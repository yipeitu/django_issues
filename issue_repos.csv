,author,repo,page_num,state,issue.number,comments_num,comments_url,html_url,labels,title,body
99,healthchecks,healthchecks,2,closed,206,2,https://api.github.com/repos/healthchecks/healthchecks/issues/206/comments,https://github.com/healthchecks/healthchecks/issues/206,[],500 Error after ls4 upgrade,"I was getting a 500 error with 1.3 initially and resolved the issue after switching to uwsgi. Now, with the 1.3.0-ls4 upgrade, I'm getting it again. Here is the email from django regarding the error:

```
Internal Server Error: /checks/

OfflineGenerationError at /checks/
You have offline compression enabled but key ""fc7aa83224b94d450c9742bb7519718eefd0fb958a9d2addbc7af82f739c41b0"" is missing from offline manifest. You may need to run ""python manage.py compress"". Here is the original content:


    <link rel=""stylesheet"" href=""/static/css/bootstrap.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/icomoon.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.min.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.pips.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/selectize.bootstrap3.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/snippet-copy.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/base.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs_cron.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/welcome.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks_desktop.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/pricing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/syntax.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channels.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channel_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/log.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_pushover.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_webhook.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/settings.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/ping_details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/profile.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/checkbox.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/radio.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/billing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/login.css"" type=""text/css"">


Request Method: GET
Request URL: https://healthchecks.example.com:443/checks/
Django Version: 2.1.3
Python Executable: /usr/sbin/uwsgi
Python Version: 3.6.6
Python Path: ['.', '', '/usr/lib/python36.zip', '/usr/lib/python3.6', '/usr/lib/python3.6/lib-dynload', '/usr/lib/python3.6/site-packages']
Server time: Fri, 30 Nov 2018 10:42:13 -0500
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')


Traceback:

File ""/usr/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  34.             response = get_response(request)

File ""/usr/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  126.                 response = self.process_exception_by_middleware(e, request)

File ""/usr/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  124.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/usr/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""./hc/front/views.py"" in my_checks
  112.     return render(request, ""front/my_checks.html"", ctx)

File ""/usr/lib/python3.6/site-packages/django/shortcuts.py"" in render
  36.     content = loader.render_to_string(template_name, context, request, using=using)

File ""/usr/lib/python3.6/site-packages/django/template/loader.py"" in render_to_string
  62.     return template.render(context, request)

File ""/usr/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  61.             return self.template.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  171.                     return self._render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in _render
  163.         return self.nodelist.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in _render
  163.         return self.nodelist.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render
  131.         return self.render_compressed(context, self.kind, self.mode, forced=forced)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render_compressed
  90.             return self.render_offline(context)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render_offline
  75.                 'is the original content:\n\n%s' % (key, original_content))

Exception Type: OfflineGenerationError at /checks/
Exception Value: You have offline compression enabled but key ""fc7aa83224b94d450c9742bb7519718eefd0fb958a9d2addbc7af82f739c41b0"" is missing from offline manifest. You may need to run ""python manage.py compress"". Here is the original content:


    <link rel=""stylesheet"" href=""/static/css/bootstrap.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/icomoon.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.min.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.pips.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/selectize.bootstrap3.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/snippet-copy.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/base.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs_cron.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/welcome.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks_desktop.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/pricing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/syntax.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channels.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channel_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/log.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_pushover.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_webhook.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/settings.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/ping_details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/profile.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/checkbox.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/radio.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/billing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/login.css"" type=""text/css"">

Request information:
USER: cron

GET: No GET data

POST: No POST data

FILES: No FILES data

COOKIES:
csrftoken = 'NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78'
sessionid = 'gbta9etj36i1gzkr0bilqdhi7oz0drfd'
__cfduid = 'd0f053d73f74db6aa609629aeb1b4ab7d1543351181'
2fatkn = '6e3lqsapr6026ua7p48n5qkhqd'

META:
CSRF_COOKIE = 'NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78'
HTTP_ACCEPT = 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'
HTTP_ACCEPT_ENCODING = 'gzip'
HTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.9'
HTTP_CF_CONNECTING_IP = '64.128.222.134'
HTTP_CF_IPCOUNTRY = 'US'
HTTP_CF_RAY = '481e6c369c419574-IAD'
HTTP_CF_VISITOR = '{""scheme"":""https""}'
HTTP_CONNECTION = 'upgrade'
HTTP_COOKIE = 'csrftoken=NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78; sessionid=gbta9etj36i1gzkr0bilqdhi7oz0drfd; __cfduid=d0f053d73f74db6aa609629aeb1b4ab7d1543351181; 2fatkn=6e3lqsapr6026ua7p48n5qkhqd'
HTTP_DNT = '1'
HTTP_HOST = 'healthchecks.example.com:443'
HTTP_UPGRADE_INSECURE_REQUESTS = '1'
HTTP_USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36'
HTTP_X_FORWARDED_FOR = '64.128.222.134, 162.158.78.145'
HTTP_X_FORWARDED_HOST = 'healthchecks.example.com'
HTTP_X_FORWARDED_PROTO = 'https'
HTTP_X_FORWARDED_SSL = 'on'
HTTP_X_REAL_IP = '162.158.78.145'
PATH_INFO = '/checks/'
QUERY_STRING = ''
REMOTE_ADDR = '172.18.0.33'
REQUEST_METHOD = 'GET'
REQUEST_URI = '/checks/'
SCRIPT_NAME = ''
SERVER_NAME = 'ff194cde2040'
SERVER_PORT = '8000'
SERVER_PROTOCOL = 'HTTP/1.1'
uwsgi.node = b'ff194cde2040'
uwsgi.version = b'2.0.17'
wsgi.errors = <_io.TextIOWrapper name=2 mode='w' encoding='UTF-8'>
wsgi.file_wrapper = ''
wsgi.input = <uwsgi._Input object at 0x7f57a4488e40>
wsgi.multiprocess = False
wsgi.multithread = False
wsgi.run_once = False
wsgi.url_scheme = 'https'
wsgi.version = '(1, 0)'

Settings:
Using settings module hc.settings
ABSOLUTE_URL_OVERRIDES = {}
ADMINS = [('Alex', 'me@example.com')]
ALLOWED_HOSTS = ['healthchecks.example.com']
APPEND_SLASH = True
AUTHENTICATION_BACKENDS = ""('hc.accounts.backends.EmailBackend', 'hc.accounts.backends.ProfileBackend')""
AUTH_PASSWORD_VALIDATORS = '********************'
AUTH_USER_MODEL = 'auth.User'
BASE_DIR = '/app/healthchecks'
CACHES = {'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
CACHE_MIDDLEWARE_ALIAS = 'default'
CACHE_MIDDLEWARE_KEY_PREFIX = '********************'
CACHE_MIDDLEWARE_SECONDS = 600
COMPRESS_CACHEABLE_PRECOMPILERS = '()'
COMPRESS_CACHE_BACKEND = 'default'
COMPRESS_CACHE_KEY_FUNCTION = '********************'
COMPRESS_CLEAN_CSS_ARGUMENTS = ''
COMPRESS_CLEAN_CSS_BINARY = 'cleancss'
COMPRESS_CLOSURE_COMPILER_ARGUMENTS = ''
COMPRESS_CLOSURE_COMPILER_BINARY = 'java -jar compiler.jar'
COMPRESS_CSS_COMPRESSOR = 'compressor.css.CssCompressor'
COMPRESS_CSS_FILTERS = ['compressor.filters.css_default.CssAbsoluteFilter']
COMPRESS_CSS_HASHING_METHOD = 'content'
COMPRESS_DATA_URI_MAX_SIZE = 1024
COMPRESS_DEBUG_TOGGLE = None
COMPRESS_ENABLED = True
COMPRESS_JINJA2_GET_ENVIRONMENT = <function CompressorConf.JINJA2_GET_ENVIRONMENT at 0x7f57a37bfc80>
COMPRESS_JS_COMPRESSOR = 'compressor.js.JsCompressor'
COMPRESS_JS_FILTERS = ['compressor.filters.jsmin.JSMinFilter']
COMPRESS_MINT_DELAY = 30
COMPRESS_MTIME_DELAY = 10
COMPRESS_OFFLINE = True
COMPRESS_OFFLINE_CONTEXT = {'STATIC_URL': '/static/'}
COMPRESS_OFFLINE_MANIFEST = 'manifest.json'
COMPRESS_OFFLINE_TIMEOUT = 31536000
COMPRESS_OUTPUT_DIR = 'CACHE'
COMPRESS_PARSER = 'compressor.parser.AutoSelectParser'
COMPRESS_PRECOMPILERS = '()'
COMPRESS_REBUILD_TIMEOUT = 2592000
COMPRESS_ROOT = '/app/healthchecks/static-collected'
COMPRESS_STORAGE = 'compressor.storage.CompressorFileStorage'
COMPRESS_TEMPLATE_FILTER_CONTEXT = {'STATIC_URL': '/static/'}
COMPRESS_URL = '/static/'
COMPRESS_URL_PLACEHOLDER = '/__compressor_url_placeholder__/'
COMPRESS_VERBOSE = False
COMPRESS_YUGLIFY_BINARY = 'yuglify'
COMPRESS_YUGLIFY_CSS_ARGUMENTS = '--terminal'
COMPRESS_YUGLIFY_JS_ARGUMENTS = '--terminal'
COMPRESS_YUI_BINARY = 'java -jar yuicompressor.jar'
COMPRESS_YUI_CSS_ARGUMENTS = ''
COMPRESS_YUI_JS_ARGUMENTS = ''
CSRF_COOKIE_AGE = 31449600
CSRF_COOKIE_DOMAIN = None
CSRF_COOKIE_HTTPONLY = False
CSRF_COOKIE_NAME = 'csrftoken'
CSRF_COOKIE_PATH = '/'
CSRF_COOKIE_SAMESITE = 'Lax'
CSRF_COOKIE_SECURE = False
CSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'
CSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'
CSRF_TRUSTED_ORIGINS = ['healthchecks.example.com']
CSRF_USE_SESSIONS = False
DATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': '/app/healthchecks/hc.sqlite', 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'NAME': None, 'MIRROR': None}}}
DATABASE_ROUTERS = []
DATA_UPLOAD_MAX_MEMORY_SIZE = 2621440
DATA_UPLOAD_MAX_NUMBER_FIELDS = 1000
DATETIME_FORMAT = 'N j, Y, P'
DATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%Y-%m-%d', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%Y', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M', '%m/%d/%y']
DATE_FORMAT = 'N j, Y'
DATE_INPUT_FORMATS = ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y']
DEBUG = False
DEBUG_PROPAGATE_EXCEPTIONS = False
DECIMAL_SEPARATOR = '.'
DEFAULT_CHARSET = 'utf-8'
DEFAULT_CONTENT_TYPE = 'text/html'
DEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'
DEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'
DEFAULT_FROM_EMAIL = 'norelpy@wootables.com'
DEFAULT_INDEX_TABLESPACE = ''
DEFAULT_TABLESPACE = ''
DISALLOWED_USER_AGENTS = []
DISCORD_CLIENT_ID = None
DISCORD_CLIENT_SECRET = '********************'
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_PASSWORD = '********************'
EMAIL_HOST_USER = 'bucketotrash@gmail.com'
EMAIL_PORT = '587'
EMAIL_SSL_CERTFILE = None
EMAIL_SSL_KEYFILE = '********************'
EMAIL_SUBJECT_PREFIX = '[Django] '
EMAIL_TIMEOUT = None
EMAIL_USE_LOCALTIME = False
EMAIL_USE_SSL = False
EMAIL_USE_TLS = True
FILE_CHARSET = 'utf-8'
FILE_UPLOAD_DIRECTORY_PERMISSIONS = None
FILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']
FILE_UPLOAD_MAX_MEMORY_SIZE = 2621440
FILE_UPLOAD_PERMISSIONS = None
FILE_UPLOAD_TEMP_DIR = None
FIRST_DAY_OF_WEEK = 0
FIXTURE_DIRS = []
FORCE_SCRIPT_NAME = None
FORMAT_MODULE_PATH = None
FORM_RENDERER = 'django.forms.renderers.DjangoTemplates'
IGNORABLE_404_URLS = []
INSTALLED_APPS = ""('django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.humanize', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'compressor', 'hc.accounts', 'hc.api', 'hc.front', 'hc.payments')""
INTERNAL_IPS = []
LANGUAGES = [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('my', 'Burmese'), ('nb', 'Norwegian Bokmål'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('th', 'Thai'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')]
LANGUAGES_BIDI = ['he', 'ar', 'fa', 'ur']
LANGUAGE_CODE = 'en-us'
LANGUAGE_COOKIE_AGE = None
LANGUAGE_COOKIE_DOMAIN = None
LANGUAGE_COOKIE_NAME = 'django_language'
LANGUAGE_COOKIE_PATH = '/'
LOCALE_PATHS = []
LOGGING = {}
LOGGING_CONFIG = 'logging.config.dictConfig'
LOGIN_REDIRECT_URL = '/accounts/profile/'
LOGIN_URL = '/accounts/login/'
LOGOUT_REDIRECT_URL = None
MANAGERS = []
MASTER_BADGE_LABEL = 'example.com'
MEDIA_ROOT = ''
MEDIA_URL = ''
MESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'
MIDDLEWARE = ""('django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'hc.accounts.middleware.TeamAccessMiddleware')""
MIGRATION_MODULES = {}
MONTH_DAY_FORMAT = 'F j'
NUMBER_GROUPING = 0
PASSWORD_HASHERS = '********************'
PASSWORD_RESET_TIMEOUT_DAYS = '********************'
PD_VENDOR_KEY = '********************'
PING_EMAIL_DOMAIN = 'localhost'
PING_ENDPOINT = 'https://healthchecks.example.com/ping/'
PREPEND_WWW = False
PUSHBULLET_CLIENT_ID = None
PUSHBULLET_CLIENT_SECRET = '********************'
PUSHOVER_API_TOKEN = '********************'
PUSHOVER_EMERGENCY_EXPIRATION = 86400
PUSHOVER_EMERGENCY_RETRY_DELAY = 300
PUSHOVER_SUBSCRIPTION_URL = None
REGISTRATION_OPEN = True
ROOT_URLCONF = 'hc.urls'
SECRET_KEY = '********************'
SECURE_BROWSER_XSS_FILTER = False
SECURE_CONTENT_TYPE_NOSNIFF = False
SECURE_HSTS_INCLUDE_SUBDOMAINS = False
SECURE_HSTS_PRELOAD = False
SECURE_HSTS_SECONDS = 0
SECURE_PROXY_SSL_HEADER = None
SECURE_REDIRECT_EXEMPT = []
SECURE_SSL_HOST = None
SECURE_SSL_REDIRECT = False
SERVER_EMAIL = 'root@localhost'
SESSION_CACHE_ALIAS = 'default'
SESSION_COOKIE_AGE = 1209600
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_HTTPONLY = True
SESSION_COOKIE_NAME = 'sessionid'
SESSION_COOKIE_PATH = '/'
SESSION_COOKIE_SAMESITE = 'Lax'
SESSION_COOKIE_SECURE = False
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
SESSION_FILE_PATH = None
SESSION_SAVE_EVERY_REQUEST = False
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SETTINGS_MODULE = 'hc.settings'
SHORT_DATETIME_FORMAT = 'm/d/Y P'
SHORT_DATE_FORMAT = 'm/d/Y'
SIGNING_BACKEND = 'django.core.signing.TimestampSigner'
SILENCED_SYSTEM_CHECKS = []
SITE_NAME = 'Healthchecks'
SITE_ROOT = 'https://healthchecks.example.com'
SLACK_CLIENT_ID = None
SLACK_CLIENT_SECRET = '********************'
STATICFILES_DIRS = ['/app/healthchecks/static']
STATICFILES_FINDERS = ""('django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder', 'compressor.finders.CompressorFinder')""
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
STATIC_ROOT = '/app/healthchecks/static-collected'
STATIC_URL = '/static/'
TELEGRAM_BOT_NAME = 'ap_healthchecks_bot'
TELEGRAM_TOKEN = '********************'
TEMPLATES = [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': ['/app/healthchecks/templates'], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', 'hc.payments.context_processors.payments']}}]
TEST_NON_SERIALIZED_APPS = []
TEST_RUNNER = 'hc.api.tests.CustomRunner'
THOUSAND_SEPARATOR = ','
TIME_FORMAT = 'P'
TIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']
TIME_ZONE = 'America/New_York'
TRELLO_APP_KEY = '********************'
TWILIO_ACCOUNT = None
TWILIO_AUTH = None
TWILIO_FROM = None
USE_I18N = True
USE_L10N = True
USE_PAYMENTS = False
USE_THOUSAND_SEPARATOR = False
USE_TZ = True
USE_X_FORWARDED_HOST = False
USE_X_FORWARDED_PORT = False
WSGI_APPLICATION = 'hc.wsgi.application'
X_FRAME_OPTIONS = 'SAMEORIGIN'
YEAR_MONTH_FORMAT = 'F Y'
ZENDESK_CLIENT_ID = None
ZENDESK_CLIENT_SECRET = '********************'
```"
113,healthchecks,healthchecks,2,closed,184,1,https://api.github.com/repos/healthchecks/healthchecks/issues/184/comments,https://github.com/healthchecks/healthchecks/issues/184,[],"./manage.py not working: ""No module named 'django.utils'""","Hey there, I'm trying to setup a development install of HC and am getting this message on trying to run anything off of `manage.py`:

```python
(hc-venv) cl@s4:~/webapps/healthchecks$ ./manage.py createsuperuser
Traceback (most recent call last):
  File ""./manage.py"", line 8, in <module>
    from django.core.management import execute_from_command_line
  File ""/home/cl/webapps/hc-venv/lib/python3.5/site-packages/django/__init__.py"", line 1, in <module>
    from django.utils.version import get_version
ImportError: No module named 'django.utils'
```

Same with `./manage.py runserver` etc.

Any help or advice would be appreciated!

Thank you."
143,healthchecks,healthchecks,2,closed,150,6,https://api.github.com/repos/healthchecks/healthchecks/issues/150/comments,https://github.com/healthchecks/healthchecks/issues/150,[],CSS file is not working while deploying to the heroku.,"Here is my settings.py file.I don't know where is the issues.if any one knows please ping me.
```
import os
import warnings

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

HOST = ""localhost""
SECRET_KEY = ""---""
DEBUG = True
ALLOWED_HOSTS = ['127.0.0.1', 'localhost', 'healthchecks-app.herokuapp.com']
DEFAULT_FROM_EMAIL = 'healthchecks@example.org'
USE_PAYMENTS = False
REGISTRATION_OPEN = True


INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.humanize',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'compressor',
    'hc.accounts',
    'hc.api',
    'hc.front',
    'hc.payments'
)

MIDDLEWARE = (
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'hc.accounts.middleware.TeamAccessMiddleware',
)

AUTHENTICATION_BACKENDS = (
    'hc.accounts.backends.EmailBackend',
    'hc.accounts.backends.ProfileBackend'
)

ROOT_URLCONF = 'hc.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'hc.payments.context_processors.payments'
            ],
        },
    },
]

WSGI_APPLICATION = 'hc.wsgi.application'
TEST_RUNNER = 'hc.api.tests.CustomRunner'


# Default database engine is SQLite. So one can just check out code,
# install requirements.txt and do manage.py runserver and it works
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': './hc.sqlite',
    }
}

# You can switch database engine to postgres or mysql using environment
# variable 'DB'. Travis CI does this.
if os.environ.get(""DB"") == ""postgres"":
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql',
            'USER': 'postgres',
            'NAME': 'hc',
            'TEST': {'CHARSET': 'UTF8'}
        }
    }

if os.environ.get(""DB"") == ""mysql"":
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            'USER': 'root',
            'NAME': 'hc',
            'TEST': {'CHARSET': 'UTF8'}
        }
    }

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True

SITE_ROOT = ""https://healthchecks-app.herokuapp.com/""
SITE_NAME = MASTER_BADGE_LABEL = ""Mychecks""
PING_ENDPOINT = SITE_ROOT + ""/ping/""
PING_EMAIL_DOMAIN = HOST
STATIC_URL = '/static-collected/static/'
STATICFILES_DIRS = [os.path.join(BASE_DIR, ""static"")]
STATIC_ROOT = os.path.join(BASE_DIR, 'static-collected')
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'compressor.finders.CompressorFinder',
)
COMPRESS_OFFLINE = True
COMPRESS_CSS_HASHING_METHOD = ""content""

# Discord integration -- override these in local_settings
DISCORD_CLIENT_ID = None
DISCORD_CLIENT_SECRET = None

# Slack integration -- override these in local_settings
SLACK_CLIENT_ID = None
SLACK_CLIENT_SECRET = None

# Pushover integration -- override these in local_settings
PUSHOVER_API_TOKEN = None
PUSHOVER_SUBSCRIPTION_URL = None
PUSHOVER_EMERGENCY_RETRY_DELAY = 300
PUSHOVER_EMERGENCY_EXPIRATION = 86400

# Pushbullet integration -- override these in local_settings
PUSHBULLET_CLIENT_ID = None
PUSHBULLET_CLIENT_SECRET = None

# Telegram integration -- override in local_settings.py
TELEGRAM_BOT_NAME = ""ExampleBot""
TELEGRAM_TOKEN = None

# SMS (Twilio) integration -- override in local_settings.py
TWILIO_ACCOUNT = None
TWILIO_AUTH = None
TWILIO_FROM = None

# PagerDuty
PD_VENDOR_KEY = None

# Zendesk
ZENDESK_CLIENT_ID = None
ZENDESK_CLIENT_SECRET = None

if os.path.exists(os.path.join(BASE_DIR, ""hc/local_settings.py"")):
    from .local_settings import *
else:
    warnings.warn(""local_settings.py not found, using defaults"")
```"
199,healthchecks,healthchecks,3,closed,83,1,https://api.github.com/repos/healthchecks/healthchecks/issues/83/comments,https://github.com/healthchecks/healthchecks/issues/83,[],"Django bug #27005 affects ""checks"" API call","When you have an empty request body and no content-length header Django `1.10` throws an exception in `django/http/request.py`

Its been fixed in 1.10.1

https://code.djangoproject.com/ticket/27005
"
203,healthchecks,healthchecks,3,closed,78,5,https://api.github.com/repos/healthchecks/healthchecks/issues/78/comments,https://github.com/healthchecks/healthchecks/issues/78,[],pushover integrations and ping logs,"running healthchecks with uwsgi/emperor and there's 2 problems that I can't seem to find a cause for:
1. checking the ping logs only shows:

```
Log is empty. This check has not received any pings yet.
```
1. tried enabling pushover notifications and ended up with a 404

```


Using the URLconf defined in hc.urls, Django tried these URL patterns, in this order:

    ^admin/
    ^accounts/
    ^ ^ping/([\w-]+)/$ [name='hc-ping-slash']
    ^ ^ping/([\w-]+)$ [name='hc-ping']
    ^ ^api/v1/checks/$
    ^ ^api/v1/checks/([\w-]+)/pause$ [name='hc-api-pause']
    ^ ^badge/([\w-]+)/([\w-]{8})/([\w-]+).svg$ [name='hc-badge']
    ^ ^$ [name='hc-index']
    ^ ^checks/$ [name='hc-checks']
    ^ ^checks/add/$ [name='hc-add-check']
    ^ ^checks/([\w-]+)/
    ^ ^integrations/ ^$ [name='hc-channels']
    ^ ^integrations/ ^add/$ [name='hc-add-channel']
    ^ ^integrations/ ^add_email/$ [name='hc-add-email']
    ^ ^integrations/ ^add_webhook/$ [name='hc-add-webhook']
    ^ ^integrations/ ^add_pd/$ [name='hc-add-pd']
    ^ ^integrations/ ^add_slack/$ [name='hc-add-slack']
    ^ ^integrations/ ^add_slack_btn/$ [name='hc-add-slack-btn']
    ^ ^integrations/ ^add_hipchat/$ [name='hc-add-hipchat']
    ^ ^integrations/ ^add_pushbullet/$ [name='hc-add-pushbullet']
    ^ ^integrations/ ^add_pushover/$ [name='hc-add-pushover']
    ^ ^integrations/ ^add_victorops/$ [name='hc-add-victorops']
    ^ ^integrations/ ^([\w-]+)/checks/$ [name='hc-channel-checks']
    ^ ^integrations/ ^([\w-]+)/remove/$ [name='hc-remove-channel']
    ^ ^integrations/ ^([\w-]+)/verify/([\w-]+)/$ [name='hc-verify-email']
    ^ ^docs/$ [name='hc-docs']
    ^ ^docs/api/$ [name='hc-docs-api']
    ^ ^about/$ [name='hc-about']
    ^ ^privacy/$ [name='hc-privacy']
    ^ ^terms/$ [name='hc-terms']
    ^ ^pricing/$ [name='hc-pricing']
    ^ ^billing/$ [name='hc-billing']
    ^ ^invoice/([\w-]+)/$ [name='hc-invoice']
    ^ ^pricing/create_plan/$ [name='hc-create-plan']
    ^ ^pricing/update_payment_method/$ [name='hc-update-payment-method']
    ^ ^pricing/cancel_plan/$ [name='hc-cancel-plan']
    ^ ^pricing/get_client_token/$ [name='hc-get-client-token']

The current URL, integrations/add_pushover/healthchecks.****.no, didn't match any of these.
```

anything I can do to test/provide more logs, let me know.

and thanks for fixing the profile not found error :)
"
204,healthchecks,healthchecks,3,closed,77,0,https://api.github.com/repos/healthchecks/healthchecks/issues/77/comments,https://github.com/healthchecks/healthchecks/issues/77,[],user has no profile,"for some reason on a fresh local install following the readme and testing with ./manage.py runserver I get ""user has no profile"" when logging in for the first time.

am I missing something or is this a bug?

```
Environment:


Request Method: GET
Request URL: http://healthchecks.***.**/

Django Version: 1.9
Python Version: 3.4.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'djmail',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')



Traceback:

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/core/handlers/base.py"" in get_response
  123.                 response = middleware_method(request)

File ""/www/sites/healthchecks.telsys.no/healthchecks/hc/accounts/middleware.py"" in process_request
  13.         profile = request.user.profile

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/utils/functional.py"" in inner
  205.         return func(self._wrapped, *args)

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/db/models/fields/related_descriptors.py"" in __get__
  355.                     self.related.get_accessor_name()

Exception Type: RelatedObjectDoesNotExist at /
Exception Value: User has no profile.
```
"
207,healthchecks,healthchecks,3,closed,74,6,https://api.github.com/repos/healthchecks/healthchecks/issues/74/comments,https://github.com/healthchecks/healthchecks/issues/74,[],NoReverseMatch at /checks/ after latest git pull,"```
NoReverseMatch at /checks/
Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
Request Method: GET
Request URL:    http://*************/checks/
Django Version: 1.9
Exception Type: NoReverseMatch
Exception Value:    
Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
Exception Location: /usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in _reverse_with_prefix, line 508
Python Executable:  /usr/bin/python
Python Version: 2.7.6
Python Path:    
['/mnt/gluster/volume_gen001/apps/healthchecks',
 '/usr/local/lib/python2.7/dist-packages/paypalrestsdk-1.11.3-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/pyOpenSSL-0.15.1-py2.7.egg',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-x86_64-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages']
Server time:    Sat, 6 Aug 2016 09:33:32 -0500
```

Traceback:

```
Environment:


Request Method: GET
Request URL: http://hc.casta.no/checks/

Django Version: 1.9
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'djmail',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')


Template error:
In template /mnt/gluster/volume_gen001/apps/healthchecks/templates/front/my_checks.html, error at line 94
   Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []   84 :                         <div class=""form-group"">
   85 :                             <label for=""update-tags-input"" class=""col-sm-2 control-label"">
   86 :                                 Tags
   87 :                             </label>
   88 :                             <div class=""col-sm-9"">
   89 :                                 <input
   90 :                                     id=""update-tags-input""
   91 :                                     name=""tags""
   92 :                                     type=""text""
   93 :                                     value=""""
   94 :                                      placeholder=""production  www""
   95 :                                     class=""form-control"" />
   96 : 
   97 :                                 <span class=""help-block"">
   98 :                                     Optionally, assign tags for easy filtering.
   99 :                                     Separate multiple tags with spaces.
   100 :                                 </span>
   101 :                             </div>
   102 :                         </div>
   103 :                 </div>
   104 :                 <div class=""modal-footer"">


Traceback:

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in get_response
  149.                     response = self.process_exception_by_middleware(e, request)

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in get_response
  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  23.                 return view_func(request, *args, **kwargs)

File ""/mnt/gluster/volume_gen001/apps/healthchecks/hc/front/views.py"" in my_checks
  58.     }

File ""/usr/local/lib/python2.7/dist-packages/django/shortcuts.py"" in render
  67.             template_name, context, request=request, using=using)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader.py"" in render_to_string
  97.         return template.render(context, request)

File ""/usr/local/lib/python2.7/dist-packages/django/template/backends/django.py"" in render
  95.             return self.template.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  206.                     return self._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  173.         return compiled_parent._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  326.                 return nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  209.                 return template.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  208.                 return self._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  220.                     nodelist.append(node.render_annotated(context))

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  513.                         six.reraise(*exc_info)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  499.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)

File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in reverse
  600.     return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))

File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in _reverse_with_prefix
  508.                              (lookup_view_s, args, kwargs, len(patterns), patterns))

Exception Type: NoReverseMatch at /checks/
Exception Value: Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
```

I'm dead in the water... it seems like pings are working, I see them coming in and being issued `200` responses when running the server is debug mode... but everything else is dead.
"
218,healthchecks,healthchecks,3,closed,62,1,https://api.github.com/repos/healthchecks/healthchecks/issues/62/comments,https://github.com/healthchecks/healthchecks/issues/62,[],sendalerts doesn't work with new failures,"Keep getting this stacktrace while testing notifications.

```
Sending alert, status=grace, code=11f7ef3e-bc25-4d85-8930-80090aab7418
Traceback (most recent call last):
  File ""/app/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/lib/python3.5/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
    utility.execute()
  File ""/usr/lib/python3.5/site-packages/django/core/management/__init__.py"", line 342, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/app/hc/api/management/commands/sendalerts.py"", line 62, in handle
    if self.handle_many():
  File ""/app/hc/api/management/commands/sendalerts.py"", line 31, in handle_many
    future.result()
  File ""/usr/lib/python3.5/concurrent/futures/_base.py"", line 405, in result
    return self.__get_result()
  File ""/usr/lib/python3.5/concurrent/futures/_base.py"", line 357, in __get_result
    raise self._exception
  File ""/usr/lib/python3.5/concurrent/futures/thread.py"", line 55, in run
    result = self.fn(*self.args, **self.kwargs)
  File ""/app/hc/api/management/commands/sendalerts.py"", line 50, in handle_one
    errors = check.send_alert()
  File ""/app/hc/api/models.py"", line 72, in send_alert
    raise NotImplementedError(""Unexpected status: %s"" % self.status)
```

Notifications seem to work when `./manage.py sendalerts` is invoked manually after 'check failure'. But when I start `sendalerts` in background I always get this stacktrace.
"
251,healthchecks,healthchecks,3,closed,28,0,https://api.github.com/repos/healthchecks/healthchecks/issues/28/comments,https://github.com/healthchecks/healthchecks/issues/28,[],Dependency: braintree should be add to requirements.txt,"Start the server with error

```
Unhandled exception in thread started by <function wrapper at 0x7ff38fabe320>
Traceback (most recent call last):
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 116, in inner_run
    self.check(display_num_errors=True)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 426, in check
    include_deployment_checks=include_deployment_checks,
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/registry.py"", line 75, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/urls.py"", line 10, in check_url_config
    return check_resolver(resolver)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/urls.py"", line 19, in check_resolver
    for pattern in resolver.url_patterns:
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 417, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 410, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/urls.py"", line 9, in <module>
    url(r'^',          include('hc.payments.urls'))
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 52, in include
    urlconf_module = import_module(urlconf_module)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/payments/urls.py"", line 3, in <module>
    from . import views
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/payments/views.py"", line 1, in <module>
    import braintree
ImportError: No module named braintree

```
"
302,healthchecks,healthchecks,2,closed,206,2,https://api.github.com/repos/healthchecks/healthchecks/issues/206/comments,https://github.com/healthchecks/healthchecks/issues/206,[],500 Error after ls4 upgrade,"I was getting a 500 error with 1.3 initially and resolved the issue after switching to uwsgi. Now, with the 1.3.0-ls4 upgrade, I'm getting it again. Here is the email from django regarding the error:

```
Internal Server Error: /checks/

OfflineGenerationError at /checks/
You have offline compression enabled but key ""fc7aa83224b94d450c9742bb7519718eefd0fb958a9d2addbc7af82f739c41b0"" is missing from offline manifest. You may need to run ""python manage.py compress"". Here is the original content:


    <link rel=""stylesheet"" href=""/static/css/bootstrap.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/icomoon.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.min.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.pips.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/selectize.bootstrap3.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/snippet-copy.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/base.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs_cron.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/welcome.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks_desktop.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/pricing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/syntax.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channels.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channel_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/log.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_pushover.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_webhook.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/settings.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/ping_details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/profile.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/checkbox.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/radio.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/billing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/login.css"" type=""text/css"">


Request Method: GET
Request URL: https://healthchecks.example.com:443/checks/
Django Version: 2.1.3
Python Executable: /usr/sbin/uwsgi
Python Version: 3.6.6
Python Path: ['.', '', '/usr/lib/python36.zip', '/usr/lib/python3.6', '/usr/lib/python3.6/lib-dynload', '/usr/lib/python3.6/site-packages']
Server time: Fri, 30 Nov 2018 10:42:13 -0500
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')


Traceback:

File ""/usr/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  34.             response = get_response(request)

File ""/usr/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  126.                 response = self.process_exception_by_middleware(e, request)

File ""/usr/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  124.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/usr/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""./hc/front/views.py"" in my_checks
  112.     return render(request, ""front/my_checks.html"", ctx)

File ""/usr/lib/python3.6/site-packages/django/shortcuts.py"" in render
  36.     content = loader.render_to_string(template_name, context, request, using=using)

File ""/usr/lib/python3.6/site-packages/django/template/loader.py"" in render_to_string
  62.     return template.render(context, request)

File ""/usr/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  61.             return self.template.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  171.                     return self._render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in _render
  163.         return self.nodelist.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in _render
  163.         return self.nodelist.render(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render
  131.         return self.render_compressed(context, self.kind, self.mode, forced=forced)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render_compressed
  90.             return self.render_offline(context)

File ""/usr/lib/python3.6/site-packages/compressor/templatetags/compress.py"" in render_offline
  75.                 'is the original content:\n\n%s' % (key, original_content))

Exception Type: OfflineGenerationError at /checks/
Exception Value: You have offline compression enabled but key ""fc7aa83224b94d450c9742bb7519718eefd0fb958a9d2addbc7af82f739c41b0"" is missing from offline manifest. You may need to run ""python manage.py compress"". Here is the original content:


    <link rel=""stylesheet"" href=""/static/css/bootstrap.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/icomoon.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.min.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/nouislider.pips.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/selectize.bootstrap3.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/snippet-copy.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/base.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/docs_cron.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/welcome.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/my_checks_desktop.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/pricing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/syntax.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channels.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/channel_checks.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/log.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_pushover.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/add_webhook.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/settings.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/ping_details.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/profile.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/checkbox.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/radio.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/billing.css"" type=""text/css"">
    <link rel=""stylesheet"" href=""/static/css/login.css"" type=""text/css"">

Request information:
USER: cron

GET: No GET data

POST: No POST data

FILES: No FILES data

COOKIES:
csrftoken = 'NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78'
sessionid = 'gbta9etj36i1gzkr0bilqdhi7oz0drfd'
__cfduid = 'd0f053d73f74db6aa609629aeb1b4ab7d1543351181'
2fatkn = '6e3lqsapr6026ua7p48n5qkhqd'

META:
CSRF_COOKIE = 'NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78'
HTTP_ACCEPT = 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'
HTTP_ACCEPT_ENCODING = 'gzip'
HTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.9'
HTTP_CF_CONNECTING_IP = '64.128.222.134'
HTTP_CF_IPCOUNTRY = 'US'
HTTP_CF_RAY = '481e6c369c419574-IAD'
HTTP_CF_VISITOR = '{""scheme"":""https""}'
HTTP_CONNECTION = 'upgrade'
HTTP_COOKIE = 'csrftoken=NGfbJmJkNTaZwpXb29xXfwNRDhFSWVecLF98YCr3BM0q80Xw4NPrkjw9FevfUM78; sessionid=gbta9etj36i1gzkr0bilqdhi7oz0drfd; __cfduid=d0f053d73f74db6aa609629aeb1b4ab7d1543351181; 2fatkn=6e3lqsapr6026ua7p48n5qkhqd'
HTTP_DNT = '1'
HTTP_HOST = 'healthchecks.example.com:443'
HTTP_UPGRADE_INSECURE_REQUESTS = '1'
HTTP_USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36'
HTTP_X_FORWARDED_FOR = '64.128.222.134, 162.158.78.145'
HTTP_X_FORWARDED_HOST = 'healthchecks.example.com'
HTTP_X_FORWARDED_PROTO = 'https'
HTTP_X_FORWARDED_SSL = 'on'
HTTP_X_REAL_IP = '162.158.78.145'
PATH_INFO = '/checks/'
QUERY_STRING = ''
REMOTE_ADDR = '172.18.0.33'
REQUEST_METHOD = 'GET'
REQUEST_URI = '/checks/'
SCRIPT_NAME = ''
SERVER_NAME = 'ff194cde2040'
SERVER_PORT = '8000'
SERVER_PROTOCOL = 'HTTP/1.1'
uwsgi.node = b'ff194cde2040'
uwsgi.version = b'2.0.17'
wsgi.errors = <_io.TextIOWrapper name=2 mode='w' encoding='UTF-8'>
wsgi.file_wrapper = ''
wsgi.input = <uwsgi._Input object at 0x7f57a4488e40>
wsgi.multiprocess = False
wsgi.multithread = False
wsgi.run_once = False
wsgi.url_scheme = 'https'
wsgi.version = '(1, 0)'

Settings:
Using settings module hc.settings
ABSOLUTE_URL_OVERRIDES = {}
ADMINS = [('Alex', 'me@example.com')]
ALLOWED_HOSTS = ['healthchecks.example.com']
APPEND_SLASH = True
AUTHENTICATION_BACKENDS = ""('hc.accounts.backends.EmailBackend', 'hc.accounts.backends.ProfileBackend')""
AUTH_PASSWORD_VALIDATORS = '********************'
AUTH_USER_MODEL = 'auth.User'
BASE_DIR = '/app/healthchecks'
CACHES = {'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
CACHE_MIDDLEWARE_ALIAS = 'default'
CACHE_MIDDLEWARE_KEY_PREFIX = '********************'
CACHE_MIDDLEWARE_SECONDS = 600
COMPRESS_CACHEABLE_PRECOMPILERS = '()'
COMPRESS_CACHE_BACKEND = 'default'
COMPRESS_CACHE_KEY_FUNCTION = '********************'
COMPRESS_CLEAN_CSS_ARGUMENTS = ''
COMPRESS_CLEAN_CSS_BINARY = 'cleancss'
COMPRESS_CLOSURE_COMPILER_ARGUMENTS = ''
COMPRESS_CLOSURE_COMPILER_BINARY = 'java -jar compiler.jar'
COMPRESS_CSS_COMPRESSOR = 'compressor.css.CssCompressor'
COMPRESS_CSS_FILTERS = ['compressor.filters.css_default.CssAbsoluteFilter']
COMPRESS_CSS_HASHING_METHOD = 'content'
COMPRESS_DATA_URI_MAX_SIZE = 1024
COMPRESS_DEBUG_TOGGLE = None
COMPRESS_ENABLED = True
COMPRESS_JINJA2_GET_ENVIRONMENT = <function CompressorConf.JINJA2_GET_ENVIRONMENT at 0x7f57a37bfc80>
COMPRESS_JS_COMPRESSOR = 'compressor.js.JsCompressor'
COMPRESS_JS_FILTERS = ['compressor.filters.jsmin.JSMinFilter']
COMPRESS_MINT_DELAY = 30
COMPRESS_MTIME_DELAY = 10
COMPRESS_OFFLINE = True
COMPRESS_OFFLINE_CONTEXT = {'STATIC_URL': '/static/'}
COMPRESS_OFFLINE_MANIFEST = 'manifest.json'
COMPRESS_OFFLINE_TIMEOUT = 31536000
COMPRESS_OUTPUT_DIR = 'CACHE'
COMPRESS_PARSER = 'compressor.parser.AutoSelectParser'
COMPRESS_PRECOMPILERS = '()'
COMPRESS_REBUILD_TIMEOUT = 2592000
COMPRESS_ROOT = '/app/healthchecks/static-collected'
COMPRESS_STORAGE = 'compressor.storage.CompressorFileStorage'
COMPRESS_TEMPLATE_FILTER_CONTEXT = {'STATIC_URL': '/static/'}
COMPRESS_URL = '/static/'
COMPRESS_URL_PLACEHOLDER = '/__compressor_url_placeholder__/'
COMPRESS_VERBOSE = False
COMPRESS_YUGLIFY_BINARY = 'yuglify'
COMPRESS_YUGLIFY_CSS_ARGUMENTS = '--terminal'
COMPRESS_YUGLIFY_JS_ARGUMENTS = '--terminal'
COMPRESS_YUI_BINARY = 'java -jar yuicompressor.jar'
COMPRESS_YUI_CSS_ARGUMENTS = ''
COMPRESS_YUI_JS_ARGUMENTS = ''
CSRF_COOKIE_AGE = 31449600
CSRF_COOKIE_DOMAIN = None
CSRF_COOKIE_HTTPONLY = False
CSRF_COOKIE_NAME = 'csrftoken'
CSRF_COOKIE_PATH = '/'
CSRF_COOKIE_SAMESITE = 'Lax'
CSRF_COOKIE_SECURE = False
CSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'
CSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'
CSRF_TRUSTED_ORIGINS = ['healthchecks.example.com']
CSRF_USE_SESSIONS = False
DATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'NAME': '/app/healthchecks/hc.sqlite', 'ATOMIC_REQUESTS': False, 'AUTOCOMMIT': True, 'CONN_MAX_AGE': 0, 'OPTIONS': {}, 'TIME_ZONE': None, 'USER': '', 'PASSWORD': '********************', 'HOST': '', 'PORT': '', 'TEST': {'CHARSET': None, 'COLLATION': None, 'NAME': None, 'MIRROR': None}}}
DATABASE_ROUTERS = []
DATA_UPLOAD_MAX_MEMORY_SIZE = 2621440
DATA_UPLOAD_MAX_NUMBER_FIELDS = 1000
DATETIME_FORMAT = 'N j, Y, P'
DATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%Y-%m-%d', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%Y', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M', '%m/%d/%y']
DATE_FORMAT = 'N j, Y'
DATE_INPUT_FORMATS = ['%Y-%m-%d', '%m/%d/%Y', '%m/%d/%y', '%b %d %Y', '%b %d, %Y', '%d %b %Y', '%d %b, %Y', '%B %d %Y', '%B %d, %Y', '%d %B %Y', '%d %B, %Y']
DEBUG = False
DEBUG_PROPAGATE_EXCEPTIONS = False
DECIMAL_SEPARATOR = '.'
DEFAULT_CHARSET = 'utf-8'
DEFAULT_CONTENT_TYPE = 'text/html'
DEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'
DEFAULT_FILE_STORAGE = 'django.core.files.storage.FileSystemStorage'
DEFAULT_FROM_EMAIL = 'norelpy@wootables.com'
DEFAULT_INDEX_TABLESPACE = ''
DEFAULT_TABLESPACE = ''
DISALLOWED_USER_AGENTS = []
DISCORD_CLIENT_ID = None
DISCORD_CLIENT_SECRET = '********************'
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_PASSWORD = '********************'
EMAIL_HOST_USER = 'bucketotrash@gmail.com'
EMAIL_PORT = '587'
EMAIL_SSL_CERTFILE = None
EMAIL_SSL_KEYFILE = '********************'
EMAIL_SUBJECT_PREFIX = '[Django] '
EMAIL_TIMEOUT = None
EMAIL_USE_LOCALTIME = False
EMAIL_USE_SSL = False
EMAIL_USE_TLS = True
FILE_CHARSET = 'utf-8'
FILE_UPLOAD_DIRECTORY_PERMISSIONS = None
FILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']
FILE_UPLOAD_MAX_MEMORY_SIZE = 2621440
FILE_UPLOAD_PERMISSIONS = None
FILE_UPLOAD_TEMP_DIR = None
FIRST_DAY_OF_WEEK = 0
FIXTURE_DIRS = []
FORCE_SCRIPT_NAME = None
FORMAT_MODULE_PATH = None
FORM_RENDERER = 'django.forms.renderers.DjangoTemplates'
IGNORABLE_404_URLS = []
INSTALLED_APPS = ""('django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.humanize', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', 'compressor', 'hc.accounts', 'hc.api', 'hc.front', 'hc.payments')""
INTERNAL_IPS = []
LANGUAGES = [('af', 'Afrikaans'), ('ar', 'Arabic'), ('ast', 'Asturian'), ('az', 'Azerbaijani'), ('bg', 'Bulgarian'), ('be', 'Belarusian'), ('bn', 'Bengali'), ('br', 'Breton'), ('bs', 'Bosnian'), ('ca', 'Catalan'), ('cs', 'Czech'), ('cy', 'Welsh'), ('da', 'Danish'), ('de', 'German'), ('dsb', 'Lower Sorbian'), ('el', 'Greek'), ('en', 'English'), ('en-au', 'Australian English'), ('en-gb', 'British English'), ('eo', 'Esperanto'), ('es', 'Spanish'), ('es-ar', 'Argentinian Spanish'), ('es-co', 'Colombian Spanish'), ('es-mx', 'Mexican Spanish'), ('es-ni', 'Nicaraguan Spanish'), ('es-ve', 'Venezuelan Spanish'), ('et', 'Estonian'), ('eu', 'Basque'), ('fa', 'Persian'), ('fi', 'Finnish'), ('fr', 'French'), ('fy', 'Frisian'), ('ga', 'Irish'), ('gd', 'Scottish Gaelic'), ('gl', 'Galician'), ('he', 'Hebrew'), ('hi', 'Hindi'), ('hr', 'Croatian'), ('hsb', 'Upper Sorbian'), ('hu', 'Hungarian'), ('ia', 'Interlingua'), ('id', 'Indonesian'), ('io', 'Ido'), ('is', 'Icelandic'), ('it', 'Italian'), ('ja', 'Japanese'), ('ka', 'Georgian'), ('kab', 'Kabyle'), ('kk', 'Kazakh'), ('km', 'Khmer'), ('kn', 'Kannada'), ('ko', 'Korean'), ('lb', 'Luxembourgish'), ('lt', 'Lithuanian'), ('lv', 'Latvian'), ('mk', 'Macedonian'), ('ml', 'Malayalam'), ('mn', 'Mongolian'), ('mr', 'Marathi'), ('my', 'Burmese'), ('nb', 'Norwegian Bokmål'), ('ne', 'Nepali'), ('nl', 'Dutch'), ('nn', 'Norwegian Nynorsk'), ('os', 'Ossetic'), ('pa', 'Punjabi'), ('pl', 'Polish'), ('pt', 'Portuguese'), ('pt-br', 'Brazilian Portuguese'), ('ro', 'Romanian'), ('ru', 'Russian'), ('sk', 'Slovak'), ('sl', 'Slovenian'), ('sq', 'Albanian'), ('sr', 'Serbian'), ('sr-latn', 'Serbian Latin'), ('sv', 'Swedish'), ('sw', 'Swahili'), ('ta', 'Tamil'), ('te', 'Telugu'), ('th', 'Thai'), ('tr', 'Turkish'), ('tt', 'Tatar'), ('udm', 'Udmurt'), ('uk', 'Ukrainian'), ('ur', 'Urdu'), ('vi', 'Vietnamese'), ('zh-hans', 'Simplified Chinese'), ('zh-hant', 'Traditional Chinese')]
LANGUAGES_BIDI = ['he', 'ar', 'fa', 'ur']
LANGUAGE_CODE = 'en-us'
LANGUAGE_COOKIE_AGE = None
LANGUAGE_COOKIE_DOMAIN = None
LANGUAGE_COOKIE_NAME = 'django_language'
LANGUAGE_COOKIE_PATH = '/'
LOCALE_PATHS = []
LOGGING = {}
LOGGING_CONFIG = 'logging.config.dictConfig'
LOGIN_REDIRECT_URL = '/accounts/profile/'
LOGIN_URL = '/accounts/login/'
LOGOUT_REDIRECT_URL = None
MANAGERS = []
MASTER_BADGE_LABEL = 'example.com'
MEDIA_ROOT = ''
MEDIA_URL = ''
MESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'
MIDDLEWARE = ""('django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', 'hc.accounts.middleware.TeamAccessMiddleware')""
MIGRATION_MODULES = {}
MONTH_DAY_FORMAT = 'F j'
NUMBER_GROUPING = 0
PASSWORD_HASHERS = '********************'
PASSWORD_RESET_TIMEOUT_DAYS = '********************'
PD_VENDOR_KEY = '********************'
PING_EMAIL_DOMAIN = 'localhost'
PING_ENDPOINT = 'https://healthchecks.example.com/ping/'
PREPEND_WWW = False
PUSHBULLET_CLIENT_ID = None
PUSHBULLET_CLIENT_SECRET = '********************'
PUSHOVER_API_TOKEN = '********************'
PUSHOVER_EMERGENCY_EXPIRATION = 86400
PUSHOVER_EMERGENCY_RETRY_DELAY = 300
PUSHOVER_SUBSCRIPTION_URL = None
REGISTRATION_OPEN = True
ROOT_URLCONF = 'hc.urls'
SECRET_KEY = '********************'
SECURE_BROWSER_XSS_FILTER = False
SECURE_CONTENT_TYPE_NOSNIFF = False
SECURE_HSTS_INCLUDE_SUBDOMAINS = False
SECURE_HSTS_PRELOAD = False
SECURE_HSTS_SECONDS = 0
SECURE_PROXY_SSL_HEADER = None
SECURE_REDIRECT_EXEMPT = []
SECURE_SSL_HOST = None
SECURE_SSL_REDIRECT = False
SERVER_EMAIL = 'root@localhost'
SESSION_CACHE_ALIAS = 'default'
SESSION_COOKIE_AGE = 1209600
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_HTTPONLY = True
SESSION_COOKIE_NAME = 'sessionid'
SESSION_COOKIE_PATH = '/'
SESSION_COOKIE_SAMESITE = 'Lax'
SESSION_COOKIE_SECURE = False
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
SESSION_FILE_PATH = None
SESSION_SAVE_EVERY_REQUEST = False
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SETTINGS_MODULE = 'hc.settings'
SHORT_DATETIME_FORMAT = 'm/d/Y P'
SHORT_DATE_FORMAT = 'm/d/Y'
SIGNING_BACKEND = 'django.core.signing.TimestampSigner'
SILENCED_SYSTEM_CHECKS = []
SITE_NAME = 'Healthchecks'
SITE_ROOT = 'https://healthchecks.example.com'
SLACK_CLIENT_ID = None
SLACK_CLIENT_SECRET = '********************'
STATICFILES_DIRS = ['/app/healthchecks/static']
STATICFILES_FINDERS = ""('django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder', 'compressor.finders.CompressorFinder')""
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
STATIC_ROOT = '/app/healthchecks/static-collected'
STATIC_URL = '/static/'
TELEGRAM_BOT_NAME = 'ap_healthchecks_bot'
TELEGRAM_TOKEN = '********************'
TEMPLATES = [{'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': ['/app/healthchecks/templates'], 'APP_DIRS': True, 'OPTIONS': {'context_processors': ['django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', 'hc.payments.context_processors.payments']}}]
TEST_NON_SERIALIZED_APPS = []
TEST_RUNNER = 'hc.api.tests.CustomRunner'
THOUSAND_SEPARATOR = ','
TIME_FORMAT = 'P'
TIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']
TIME_ZONE = 'America/New_York'
TRELLO_APP_KEY = '********************'
TWILIO_ACCOUNT = None
TWILIO_AUTH = None
TWILIO_FROM = None
USE_I18N = True
USE_L10N = True
USE_PAYMENTS = False
USE_THOUSAND_SEPARATOR = False
USE_TZ = True
USE_X_FORWARDED_HOST = False
USE_X_FORWARDED_PORT = False
WSGI_APPLICATION = 'hc.wsgi.application'
X_FRAME_OPTIONS = 'SAMEORIGIN'
YEAR_MONTH_FORMAT = 'F Y'
ZENDESK_CLIENT_ID = None
ZENDESK_CLIENT_SECRET = '********************'
```"
316,healthchecks,healthchecks,2,closed,184,1,https://api.github.com/repos/healthchecks/healthchecks/issues/184/comments,https://github.com/healthchecks/healthchecks/issues/184,[],"./manage.py not working: ""No module named 'django.utils'""","Hey there, I'm trying to setup a development install of HC and am getting this message on trying to run anything off of `manage.py`:

```python
(hc-venv) cl@s4:~/webapps/healthchecks$ ./manage.py createsuperuser
Traceback (most recent call last):
  File ""./manage.py"", line 8, in <module>
    from django.core.management import execute_from_command_line
  File ""/home/cl/webapps/hc-venv/lib/python3.5/site-packages/django/__init__.py"", line 1, in <module>
    from django.utils.version import get_version
ImportError: No module named 'django.utils'
```

Same with `./manage.py runserver` etc.

Any help or advice would be appreciated!

Thank you."
346,healthchecks,healthchecks,2,closed,150,6,https://api.github.com/repos/healthchecks/healthchecks/issues/150/comments,https://github.com/healthchecks/healthchecks/issues/150,[],CSS file is not working while deploying to the heroku.,"Here is my settings.py file.I don't know where is the issues.if any one knows please ping me.
```
import os
import warnings

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

HOST = ""localhost""
SECRET_KEY = ""---""
DEBUG = True
ALLOWED_HOSTS = ['127.0.0.1', 'localhost', 'healthchecks-app.herokuapp.com']
DEFAULT_FROM_EMAIL = 'healthchecks@example.org'
USE_PAYMENTS = False
REGISTRATION_OPEN = True


INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.humanize',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'compressor',
    'hc.accounts',
    'hc.api',
    'hc.front',
    'hc.payments'
)

MIDDLEWARE = (
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'hc.accounts.middleware.TeamAccessMiddleware',
)

AUTHENTICATION_BACKENDS = (
    'hc.accounts.backends.EmailBackend',
    'hc.accounts.backends.ProfileBackend'
)

ROOT_URLCONF = 'hc.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates')],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'hc.payments.context_processors.payments'
            ],
        },
    },
]

WSGI_APPLICATION = 'hc.wsgi.application'
TEST_RUNNER = 'hc.api.tests.CustomRunner'


# Default database engine is SQLite. So one can just check out code,
# install requirements.txt and do manage.py runserver and it works
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': './hc.sqlite',
    }
}

# You can switch database engine to postgres or mysql using environment
# variable 'DB'. Travis CI does this.
if os.environ.get(""DB"") == ""postgres"":
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.postgresql',
            'USER': 'postgres',
            'NAME': 'hc',
            'TEST': {'CHARSET': 'UTF8'}
        }
    }

if os.environ.get(""DB"") == ""mysql"":
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.mysql',
            'USER': 'root',
            'NAME': 'hc',
            'TEST': {'CHARSET': 'UTF8'}
        }
    }

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True

SITE_ROOT = ""https://healthchecks-app.herokuapp.com/""
SITE_NAME = MASTER_BADGE_LABEL = ""Mychecks""
PING_ENDPOINT = SITE_ROOT + ""/ping/""
PING_EMAIL_DOMAIN = HOST
STATIC_URL = '/static-collected/static/'
STATICFILES_DIRS = [os.path.join(BASE_DIR, ""static"")]
STATIC_ROOT = os.path.join(BASE_DIR, 'static-collected')
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'compressor.finders.CompressorFinder',
)
COMPRESS_OFFLINE = True
COMPRESS_CSS_HASHING_METHOD = ""content""

# Discord integration -- override these in local_settings
DISCORD_CLIENT_ID = None
DISCORD_CLIENT_SECRET = None

# Slack integration -- override these in local_settings
SLACK_CLIENT_ID = None
SLACK_CLIENT_SECRET = None

# Pushover integration -- override these in local_settings
PUSHOVER_API_TOKEN = None
PUSHOVER_SUBSCRIPTION_URL = None
PUSHOVER_EMERGENCY_RETRY_DELAY = 300
PUSHOVER_EMERGENCY_EXPIRATION = 86400

# Pushbullet integration -- override these in local_settings
PUSHBULLET_CLIENT_ID = None
PUSHBULLET_CLIENT_SECRET = None

# Telegram integration -- override in local_settings.py
TELEGRAM_BOT_NAME = ""ExampleBot""
TELEGRAM_TOKEN = None

# SMS (Twilio) integration -- override in local_settings.py
TWILIO_ACCOUNT = None
TWILIO_AUTH = None
TWILIO_FROM = None

# PagerDuty
PD_VENDOR_KEY = None

# Zendesk
ZENDESK_CLIENT_ID = None
ZENDESK_CLIENT_SECRET = None

if os.path.exists(os.path.join(BASE_DIR, ""hc/local_settings.py"")):
    from .local_settings import *
else:
    warnings.warn(""local_settings.py not found, using defaults"")
```"
402,healthchecks,healthchecks,3,closed,83,1,https://api.github.com/repos/healthchecks/healthchecks/issues/83/comments,https://github.com/healthchecks/healthchecks/issues/83,[],"Django bug #27005 affects ""checks"" API call","When you have an empty request body and no content-length header Django `1.10` throws an exception in `django/http/request.py`

Its been fixed in 1.10.1

https://code.djangoproject.com/ticket/27005
"
406,healthchecks,healthchecks,3,closed,78,5,https://api.github.com/repos/healthchecks/healthchecks/issues/78/comments,https://github.com/healthchecks/healthchecks/issues/78,[],pushover integrations and ping logs,"running healthchecks with uwsgi/emperor and there's 2 problems that I can't seem to find a cause for:
1. checking the ping logs only shows:

```
Log is empty. This check has not received any pings yet.
```
1. tried enabling pushover notifications and ended up with a 404

```


Using the URLconf defined in hc.urls, Django tried these URL patterns, in this order:

    ^admin/
    ^accounts/
    ^ ^ping/([\w-]+)/$ [name='hc-ping-slash']
    ^ ^ping/([\w-]+)$ [name='hc-ping']
    ^ ^api/v1/checks/$
    ^ ^api/v1/checks/([\w-]+)/pause$ [name='hc-api-pause']
    ^ ^badge/([\w-]+)/([\w-]{8})/([\w-]+).svg$ [name='hc-badge']
    ^ ^$ [name='hc-index']
    ^ ^checks/$ [name='hc-checks']
    ^ ^checks/add/$ [name='hc-add-check']
    ^ ^checks/([\w-]+)/
    ^ ^integrations/ ^$ [name='hc-channels']
    ^ ^integrations/ ^add/$ [name='hc-add-channel']
    ^ ^integrations/ ^add_email/$ [name='hc-add-email']
    ^ ^integrations/ ^add_webhook/$ [name='hc-add-webhook']
    ^ ^integrations/ ^add_pd/$ [name='hc-add-pd']
    ^ ^integrations/ ^add_slack/$ [name='hc-add-slack']
    ^ ^integrations/ ^add_slack_btn/$ [name='hc-add-slack-btn']
    ^ ^integrations/ ^add_hipchat/$ [name='hc-add-hipchat']
    ^ ^integrations/ ^add_pushbullet/$ [name='hc-add-pushbullet']
    ^ ^integrations/ ^add_pushover/$ [name='hc-add-pushover']
    ^ ^integrations/ ^add_victorops/$ [name='hc-add-victorops']
    ^ ^integrations/ ^([\w-]+)/checks/$ [name='hc-channel-checks']
    ^ ^integrations/ ^([\w-]+)/remove/$ [name='hc-remove-channel']
    ^ ^integrations/ ^([\w-]+)/verify/([\w-]+)/$ [name='hc-verify-email']
    ^ ^docs/$ [name='hc-docs']
    ^ ^docs/api/$ [name='hc-docs-api']
    ^ ^about/$ [name='hc-about']
    ^ ^privacy/$ [name='hc-privacy']
    ^ ^terms/$ [name='hc-terms']
    ^ ^pricing/$ [name='hc-pricing']
    ^ ^billing/$ [name='hc-billing']
    ^ ^invoice/([\w-]+)/$ [name='hc-invoice']
    ^ ^pricing/create_plan/$ [name='hc-create-plan']
    ^ ^pricing/update_payment_method/$ [name='hc-update-payment-method']
    ^ ^pricing/cancel_plan/$ [name='hc-cancel-plan']
    ^ ^pricing/get_client_token/$ [name='hc-get-client-token']

The current URL, integrations/add_pushover/healthchecks.****.no, didn't match any of these.
```

anything I can do to test/provide more logs, let me know.

and thanks for fixing the profile not found error :)
"
407,healthchecks,healthchecks,3,closed,77,0,https://api.github.com/repos/healthchecks/healthchecks/issues/77/comments,https://github.com/healthchecks/healthchecks/issues/77,[],user has no profile,"for some reason on a fresh local install following the readme and testing with ./manage.py runserver I get ""user has no profile"" when logging in for the first time.

am I missing something or is this a bug?

```
Environment:


Request Method: GET
Request URL: http://healthchecks.***.**/

Django Version: 1.9
Python Version: 3.4.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'djmail',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')



Traceback:

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/core/handlers/base.py"" in get_response
  123.                 response = middleware_method(request)

File ""/www/sites/healthchecks.telsys.no/healthchecks/hc/accounts/middleware.py"" in process_request
  13.         profile = request.user.profile

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/utils/functional.py"" in inner
  205.         return func(self._wrapped, *args)

File ""/www/sites/healthchecks.telsys.no/hc-venv/lib/python3.4/site-packages/django/db/models/fields/related_descriptors.py"" in __get__
  355.                     self.related.get_accessor_name()

Exception Type: RelatedObjectDoesNotExist at /
Exception Value: User has no profile.
```
"
410,healthchecks,healthchecks,3,closed,74,6,https://api.github.com/repos/healthchecks/healthchecks/issues/74/comments,https://github.com/healthchecks/healthchecks/issues/74,[],NoReverseMatch at /checks/ after latest git pull,"```
NoReverseMatch at /checks/
Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
Request Method: GET
Request URL:    http://*************/checks/
Django Version: 1.9
Exception Type: NoReverseMatch
Exception Value:    
Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
Exception Location: /usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py in _reverse_with_prefix, line 508
Python Executable:  /usr/bin/python
Python Version: 2.7.6
Python Path:    
['/mnt/gluster/volume_gen001/apps/healthchecks',
 '/usr/local/lib/python2.7/dist-packages/paypalrestsdk-1.11.3-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/pyOpenSSL-0.15.1-py2.7.egg',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-x86_64-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages']
Server time:    Sat, 6 Aug 2016 09:33:32 -0500
```

Traceback:

```
Environment:


Request Method: GET
Request URL: http://hc.casta.no/checks/

Django Version: 1.9
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'compressor',
 'djmail',
 'hc.accounts',
 'hc.api',
 'hc.front',
 'hc.payments')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'hc.accounts.middleware.TeamAccessMiddleware')


Template error:
In template /mnt/gluster/volume_gen001/apps/healthchecks/templates/front/my_checks.html, error at line 94
   Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []   84 :                         <div class=""form-group"">
   85 :                             <label for=""update-tags-input"" class=""col-sm-2 control-label"">
   86 :                                 Tags
   87 :                             </label>
   88 :                             <div class=""col-sm-9"">
   89 :                                 <input
   90 :                                     id=""update-tags-input""
   91 :                                     name=""tags""
   92 :                                     type=""text""
   93 :                                     value=""""
   94 :                                      placeholder=""production  www""
   95 :                                     class=""form-control"" />
   96 : 
   97 :                                 <span class=""help-block"">
   98 :                                     Optionally, assign tags for easy filtering.
   99 :                                     Separate multiple tags with spaces.
   100 :                                 </span>
   101 :                             </div>
   102 :                         </div>
   103 :                 </div>
   104 :                 <div class=""modal-footer"">


Traceback:

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in get_response
  149.                     response = self.process_exception_by_middleware(e, request)

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in get_response
  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  23.                 return view_func(request, *args, **kwargs)

File ""/mnt/gluster/volume_gen001/apps/healthchecks/hc/front/views.py"" in my_checks
  58.     }

File ""/usr/local/lib/python2.7/dist-packages/django/shortcuts.py"" in render
  67.             template_name, context, request=request, using=using)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader.py"" in render_to_string
  97.         return template.render(context, request)

File ""/usr/local/lib/python2.7/dist-packages/django/template/backends/django.py"" in render
  95.             return self.template.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  206.                     return self._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  173.         return compiled_parent._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  326.                 return nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py"" in render
  209.                 return template.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  208.                 return self._render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  220.                     nodelist.append(node.render_annotated(context))

File ""/usr/local/lib/python2.7/dist-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  513.                         six.reraise(*exc_info)

File ""/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py"" in render
  499.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)

File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in reverse
  600.     return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))

File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in _reverse_with_prefix
  508.                              (lookup_view_s, args, kwargs, len(patterns), patterns))

Exception Type: NoReverseMatch at /checks/
Exception Value: Reverse for 'hc-pause' with arguments '(UUID('52416f5d-ccc3-4b14-94f0-0869d1398473'),)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
```

I'm dead in the water... it seems like pings are working, I see them coming in and being issued `200` responses when running the server is debug mode... but everything else is dead.
"
421,healthchecks,healthchecks,3,closed,62,1,https://api.github.com/repos/healthchecks/healthchecks/issues/62/comments,https://github.com/healthchecks/healthchecks/issues/62,[],sendalerts doesn't work with new failures,"Keep getting this stacktrace while testing notifications.

```
Sending alert, status=grace, code=11f7ef3e-bc25-4d85-8930-80090aab7418
Traceback (most recent call last):
  File ""/app/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/lib/python3.5/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
    utility.execute()
  File ""/usr/lib/python3.5/site-packages/django/core/management/__init__.py"", line 342, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/app/hc/api/management/commands/sendalerts.py"", line 62, in handle
    if self.handle_many():
  File ""/app/hc/api/management/commands/sendalerts.py"", line 31, in handle_many
    future.result()
  File ""/usr/lib/python3.5/concurrent/futures/_base.py"", line 405, in result
    return self.__get_result()
  File ""/usr/lib/python3.5/concurrent/futures/_base.py"", line 357, in __get_result
    raise self._exception
  File ""/usr/lib/python3.5/concurrent/futures/thread.py"", line 55, in run
    result = self.fn(*self.args, **self.kwargs)
  File ""/app/hc/api/management/commands/sendalerts.py"", line 50, in handle_one
    errors = check.send_alert()
  File ""/app/hc/api/models.py"", line 72, in send_alert
    raise NotImplementedError(""Unexpected status: %s"" % self.status)
```

Notifications seem to work when `./manage.py sendalerts` is invoked manually after 'check failure'. But when I start `sendalerts` in background I always get this stacktrace.
"
454,healthchecks,healthchecks,3,closed,28,0,https://api.github.com/repos/healthchecks/healthchecks/issues/28/comments,https://github.com/healthchecks/healthchecks/issues/28,[],Dependency: braintree should be add to requirements.txt,"Start the server with error

```
Unhandled exception in thread started by <function wrapper at 0x7ff38fabe320>
Traceback (most recent call last):
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 116, in inner_run
    self.check(display_num_errors=True)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 426, in check
    include_deployment_checks=include_deployment_checks,
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/registry.py"", line 75, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/urls.py"", line 10, in check_url_config
    return check_resolver(resolver)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/checks/urls.py"", line 19, in check_resolver
    for pattern in resolver.url_patterns:
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 417, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 410, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/urls.py"", line 9, in <module>
    url(r'^',          include('hc.payments.urls'))
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc-venv/local/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 52, in include
    urlconf_module = import_module(urlconf_module)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/payments/urls.py"", line 3, in <module>
    from . import views
  File ""/home/liushaohui/workspace/opensource/healthchecks/hc/payments/views.py"", line 1, in <module>
    import braintree
ImportError: No module named braintree

```
"
471,healthchecks,healthchecks,4,closed,10,1,https://api.github.com/repos/healthchecks/healthchecks/issues/10/comments,https://github.com/healthchecks/healthchecks/pull/10,[],Added missing Python module 'six',"While running on my local machine I got missing python module.

```
(hc-venv)08:17:29 (master) ~/webapps/healthchecks$ ./manage.py migrate
/home/piokie/webapps/healthchecks/hc/settings.py:131: UserWarning: local_settings.py not found, using defaults
  warnings.warn(""local_settings.py not found, using defaults"")
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 351, in execute_from_command_line
    utility.execute()
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 325, in execute
    django.setup()
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/compressor/models.py"", line 1, in <module>
    from compressor.conf import CompressorConf  # noqa
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/compressor/conf.py"", line 6, in <module>
    from appconf import AppConf
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/appconf/__init__.py"", line 2, in <module>
    from .base import AppConf  # noqa
  File ""/home/piokie/webapps/hc-venv/lib/python3.4/site-packages/appconf/base.py"", line 3, in <module>
    import six
ImportError: No module named 'six'
```

After installation with

```
pip install six
```

It does simply work.
"
483,taigaio,taiga-back,2,closed,1328,2,https://api.github.com/repos/taigaio/taiga-back/issues/1328/comments,https://github.com/taigaio/taiga-back/issues/1328,[],Syntax error when migration,"**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.

**Do you want to request a *feature* or report a *bug*?**
*bug*
**What is the current behavior?**
Unable to install.
**If the current behavior is a bug, please provide the steps to reproduce.**
python manage.py migrate --noinput
**What is the expected behavior?**
done successfully.
**Is it happening in taiga.io or in your own instance?**
my own instance
**What browser/version are you using?**
Nop
**Are there any console errors *(Ctrl + F12)* in red?**
```
(taiga) taiga@n10:/srv/taiga-back$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/django/core/management/__init__.py"", line 308, in execute
    settings.INSTALLED_APPS
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/django/conf/__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/django/conf/__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/django/conf/__init__.py"", line 110, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/importlib/__init__.py"", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 1006, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 983, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 967, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 677, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 728, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/srv/taiga-back/settings/__init__.py"", line 22, in <module>
    from .celery import *
  File ""/srv/taiga-back/settings/celery.py"", line 19, in <module>
    from kombu import Queue
  File ""<frozen importlib._bootstrap>"", line 1032, in _handle_fromlist
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/kombu/__init__.py"", line 81, in __getattr__
    module = __import__(object_origins[name], None, None, [name])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/kombu/entity.py"", line 6, in <module>
    from .abstract import MaybeChannelBound, Object
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/kombu/abstract.py"", line 6, in <module>
    from .connection import maybe_channel
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.7/site-packages/kombu/connection.py"", line 893
    return self.transport.implements.async
                                         ^
SyntaxError: invalid syntax
```
Thanks for reporting!
"
499,taigaio,taiga-back,2,closed,1302,1,https://api.github.com/repos/taigaio/taiga-back/issues/1302/comments,https://github.com/taigaio/taiga-back/issues/1302,[],Server application error when creating Project using API,"I am using the API to create a project, but getting a Server application error response.

I am sending in this to create the project:

{""name"":""The Project"",""description"":""Project description"",""is_epics_activated"":true,""is_kanban_activated"":true}

Here is the error log created when making the API call:

`ERROR:2019-05-14 08:41:21,134: Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 100, in create
    self.object = validator.save(force_insert=True)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1116, in save
    self.object = super().save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 649, in save
    self.save_object(self.object, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1134, in save_object
    obj.save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 299, in save
    super().save(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 808, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 848, in save_base
    update_fields=update_fields, raw=raw, using=using,
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/dispatch/dispatcher.py"", line 193, in send
    for receiver in self._live_receivers(sender)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/dispatch/dispatcher.py"", line 193, in <listcomp>
    for receiver in self._live_receivers(sender)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 72, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 1104, in apply_to_project
    for us_duedate in self.us_duedates:
TypeError: 'NoneType' object is not iterable`

taiga-back is version 4.0.4


Any help much appreciated!
"
502,taigaio,taiga-back,2,closed,1298,5,https://api.github.com/repos/taigaio/taiga-back/issues/1298/comments,https://github.com/taigaio/taiga-back/issues/1298,[],Taiga Upgrade Broken (Uses Wrong Credentials),"**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.

**Do you want to request a *feature* or report a *bug*?**

Bug

**What is the current behavior?**

Upgrade does not work

**If the current behavior is a bug, please provide the steps to reproduce.**

Start from a 4.0 tree, try to upgrade to 4.2.3 according to the instructions on the upgrade page found here:

https://taigaio.github.io/taiga-doc/dist/upgrades.html

At this point:

$ python manage.py migrate --noinput

the upgrade process fails with an error message about the local user, who owns the Taiga instance, not being a role in the database (yes - the database user is something completely unrelated in my installation).

The result is a long traceback, which ends in

  File ""/opt/taiga/backend/.virtualenvs/taiga/lib/python3.5/site-packages/psycopg2/__init__.py"", line 130, in connect                                                            
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)                                                                                                            
django.db.utils.OperationalError: FATAL:  role ""mytaigauser"" does not exist



**What is the expected behavior?**

Upgrade works.

The upgrade process should take all the database settings and credentials from settings/local.py instead of assuming that the database is local, and that it can connect via Unix domain socket.

**Is it happening in taiga.io or in your own instance?**

It happens in my own instance.

**What browser/version are you using?**

Not relevant - this is a backend problem.

**Are there any console errors *(Ctrl + F12)* in red?**

No.

Suggested fix:

in settings/development.py, add this directly after ""from .common import *"":

from .local import *

"
531,taigaio,taiga-back,2,closed,1261,1,https://api.github.com/repos/taigaio/taiga-back/issues/1261/comments,https://github.com/taigaio/taiga-back/issues/1261,[],Bitbucket webhook error,"Hello!
Taiga is setup on my company servers.
I've setup the bitbucket integration (not really difficult).

Unfortunately, when a request is made by Bitbucket I get an error.
Here you can find the error in the taiga log:

```
ERROR:2019-02-27 14:47:04,500: Internal Server Error: /api/v1/bitbucket-hook
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/hooks/api.py"", line 79, in create
    event_hook.process_event()
  File ""/home/taiga/taiga-back/taiga/hooks/event_hooks.py"", line 250, in process_event
    send_notifications(element, history=snapshot)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 267, in send_notifications
    send_sync_notifications(notification.id)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 342, in send_sync_notifications
    email.send(user.email, context, headers=headers)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/djmail/template_mail.py"", line 122, in send
    return email.send()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/message.py"", line 348, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"", line 104, in send_messages
    new_conn_created = self.open()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"", line 64, in open
    self.connection = self.connection_class(self.host, self.port, **connection_params)
  File ""/usr/lib/python3.5/smtplib.py"", line 251, in __init__
    (code, msg) = self.connect(host, port)
  File ""/usr/lib/python3.5/smtplib.py"", line 335, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File ""/usr/lib/python3.5/smtplib.py"", line 306, in _get_socket
    self.source_address)
  File ""/usr/lib/python3.5/socket.py"", line 711, in create_connection
    raise err
  File ""/usr/lib/python3.5/socket.py"", line 702, in create_connection
    sock.connect(sa)
OSError: [Errno 113] No route to host
```

Im not really good in python development but as I understand the error comes from a socket connection (I guess the API tried to connect to the back or something like that).
Is it due to a misconfiguration of my own?
And so do you have any idea how I could resolve that?
Thanks!"
540,taigaio,taiga-back,2,closed,1248,10,https://api.github.com/repos/taigaio/taiga-back/issues/1248/comments,https://github.com/taigaio/taiga-back/issues/1248,[],Celery: [Errno 111] Connection refused,"Hey there,

**What is the current behavior?**
The celery main process could not establish a connection:
`celery[898]: [2019-02-14 14:06:24,217: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.`

systemctl status 'taiga*' shows me:

> systemctl status 'taiga*'
> â— taiga_events.service - taiga_events
>    Loaded: loaded (/etc/systemd/system/taiga_events.service; enabled; vendor preset: enabled)
>    Active: active (running) since Thu 2019-02-14 15:08:52 CET; 1s ago
>  Main PID: 8224 (node)
>     Tasks: 6 (limit: 4915)
>    Memory: 36.1M
>       CPU: 906ms
>    CGroup: /system.slice/taiga_events.service
>            â””â”€8224 node node_modules/coffeescript/bin/coffee index.coffee
> 
> Feb 14 15:08:53 mail bash[8224]:     at Object.exports.run (/home/taiga/taiga-events/node_modules/coffeescript/lib/coffee-script/command.js:98:20)
> Feb 14 15:08:53 mail bash[8224]:     at Object.<anonymous> (/home/taiga/taiga-events/node_modules/coffeescript/bin/coffee:15:45)
> Feb 14 15:08:53 mail bash[8224]:     at Module._compile (module.js:653:30)
> Feb 14 15:08:53 mail bash[8224]:     at Object.Module._extensions..js (module.js:664:10)
> Feb 14 15:08:53 mail bash[8224]:     at Module.load (module.js:566:32)
> Feb 14 15:08:53 mail bash[8224]:     at tryModuleLoad (module.js:506:12)
> Feb 14 15:08:53 mail bash[8224]:     at Function.Module._load (module.js:498:3)
> Feb 14 15:08:53 mail bash[8224]:     at Function.Module.runMain (module.js:694:10)
> Feb 14 15:08:53 mail bash[8224]:     at startup (bootstrap_node.js:204:16)
> Feb 14 15:08:53 mail bash[8224]:     at bootstrap_node.js:625:3
> 
> â— taiga_celery.service - taiga_celery
>    Loaded: loaded (/etc/systemd/system/taiga_celery.service; enabled; vendor preset: enabled)
>    Active: active (running) since Thu 2019-02-14 14:41:33 CET; 27min ago
>  Main PID: 898 (celery)
>     Tasks: 5 (limit: 4915)
>    Memory: 218.6M
>       CPU: 5.165s
>    CGroup: /system.slice/taiga_celery.service
>            â”œâ”€ 898 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/celery -A taiga worker --concurrency 4 -l INFO
>            â”œâ”€2692 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/celery -A taiga worker --concurrency 4 -l INFO
>            â”œâ”€2693 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/celery -A taiga worker --concurrency 4 -l INFO
>            â”œâ”€2695 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/celery -A taiga worker --concurrency 4 -l INFO
>            â””â”€2696 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/celery -A taiga worker --concurrency 4 -l INFO
> 
> Feb 14 15:06:24 mail celery[898]: [2019-02-14 14:06:24,217: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.
> Feb 14 15:06:24 mail celery[898]: Trying again in 32.00 seconds...
> Feb 14 15:06:56 mail celery[898]: [2019-02-14 14:06:56,262: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.
> Feb 14 15:06:56 mail celery[898]: Trying again in 32.00 seconds...
> Feb 14 15:07:28 mail celery[898]: [2019-02-14 14:07:28,311: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.
> Feb 14 15:07:28 mail celery[898]: Trying again in 32.00 seconds...
> Feb 14 15:08:00 mail celery[898]: [2019-02-14 14:08:00,360: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.
> Feb 14 15:08:00 mail celery[898]: Trying again in 32.00 seconds...
> Feb 14 15:08:32 mail celery[898]: [2019-02-14 14:08:32,405: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@127.0.0.1:5672/taiga//: [Errno 111] Connection refused.
> Feb 14 15:08:32 mail celery[898]: Trying again in 32.00 seconds...
> 
> â— taiga.service - taiga_back
>    Loaded: loaded (/etc/systemd/system/taiga.service; enabled; vendor preset: enabled)
>    Active: active (running) since Thu 2019-02-14 14:41:33 CET; 27min ago
>  Main PID: 910 (gunicorn)
>     Tasks: 5 (limit: 4915)
>    Memory: 296.2M
>       CPU: 19.036s
>    CGroup: /system.slice/taiga.service
>            â”œâ”€ 910 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
>            â”œâ”€2664 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
>            â”œâ”€2669 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
>            â”œâ”€2670 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
>            â””â”€2672 /home/taiga/.virtualenvs/taiga/bin/python3 /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
> 
> Feb 14 14:43:35 mail gunicorn[910]: [2019-02-14 14:43:35 +0100] [910] [CRITICAL] WORKER TIMEOUT (pid:1986)
> Feb 14 14:43:35 mail gunicorn[910]: [2019-02-14 14:43:35 +0100] [910] [CRITICAL] WORKER TIMEOUT (pid:1983)
> Feb 14 14:43:36 mail gunicorn[910]: [2019-02-14 14:43:36 +0100] [2664] [INFO] Booting worker with pid: 2664
> Feb 14 14:43:36 mail gunicorn[910]: [2019-02-14 14:43:36 +0100] [2669] [INFO] Booting worker with pid: 2669
> Feb 14 14:43:36 mail gunicorn[910]: [2019-02-14 14:43:36 +0100] [2670] [INFO] Booting worker with pid: 2670
> Feb 14 14:43:36 mail gunicorn[910]: [2019-02-14 14:43:36 +0100] [2672] [INFO] Booting worker with pid: 2672
> Feb 14 14:43:36 mail gunicorn[910]: Trying import local.py settings...
> Feb 14 14:43:36 mail gunicorn[910]: Trying import local.py settings...
> Feb 14 14:43:36 mail gunicorn[910]: Trying import local.py settings...
> Feb 14 14:43:36 mail gunicorn[910]: Trying import local.py settings...

**If the current behavior is a bug, please provide the steps to reproduce.**

I already tried a fresh installation of the Rabbit-Server and a few config things (celery.py, local.py, ...)
But still the same error.

**Is it happening in taiga.io or in your own instance?**
I'm running my own instance.

**What browser/version are you using?**
Newest Chrome

My settings are:

local.py
> from .common import *
> 
> MEDIA_URL = ""https://taiga.xxx.de/media/""
> STATIC_URL = ""https://taiga.xx.de/static/""
> SITES[""front""][""scheme""] = ""https""
> SITES[""front""][""domain""] = ""xxx.virse.de""
> 
> SECRET_KEY = ""xyz""
> 
> DEBUG = True
> PUBLIC_REGISTER_ENABLED = False
> 
> ADMINS = (
>     (""admin"", ""admin@xxx.de""),
> )
> 
> ALLOWED_HOSTS = ['taiga.xxx.de']
> 
> DEFAULT_FROM_EMAIL = ""taiga@xxx.de""
> SERVER_EMAIL = DEFAULT_FROM_EMAIL
> 
> EVENTS_PUSH_BACKEND = ""taiga.events.backends.rabbitmq.EventsPushBackend""
> EVENTS_PUSH_BACKEND_OPTIONS = {""url"": ""amqp://taiga:xyz@localhost:5672/taiga""}
> 
> DEFAULT_FROM_EMAIL = ""taiga@xxx.de""
> CHANGE_NOTIFICATIONS_MIN_INTERVAL = 300 #seconds
> 
> # EMAIL SETTINGS EXAMPLE
> EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
> EMAIL_USE_TLS = True
> EMAIL_USE_SSL = False # You cannot use both (TLS and SSL) at the same time!
> EMAIL_HOST = 'mail.xxx.de'
> EMAIL_PORT = 25
> EMAIL_HOST_USER = 'admin@xxx.de'
> EMAIL_HOST_PASSWORD = 'xxx'
> 
> from .celery import *
> 
> CELERY_ENABLED = True

celery.py
> from kombu import Queue
> 
> broker_url = 'amqp://taiga:xyz@localhost:5672/taiga//'
> result_backend = 'redis://localhost:6379/0'
> 
> accept_content = ['pickle',] # Values are 'pickle', 'json', 'msgpack' and 'yaml'
> task_serializer = ""pickle""
> result_serializer = ""pickle""
> 
> timezone = 'Europe/Berlin'
> 
> task_default_queue = 'tasks'
> task_queues = (
>     Queue('tasks', routing_key='task.#'),
>     Queue('transient', routing_key='transient.#', delivery_mode=1)
> )
> task_default_exchange = 'tasks'
> task_default_exchange_type = 'topic'
> task_default_routing_key = 'task.default'

config.json
> {
>     ""url"": ""amqp://taiga:xyz@localhost:5672/taiga"",
>     ""secret"": ""xyz"",
>     ""webSocketServer"": {
>         ""port"": 8888
>     }
> }

When i comment out the part 

`from .celery import *`

in my local.py , I get this error:

> [2019-02-14 14:26:44,987: ERROR/MainProcess] consumer: Cannot connect to amqp://taiga:**@localhost:5672/taiga//: Connection.open: (530) NOT_ALLOWED - access to vhost 'taiga//' refused for user 'taiga'.

I am lost...

Thanks for helping me out.

Best regards.
"
550,taigaio,taiga-back,2,closed,1234,1,https://api.github.com/repos/taigaio/taiga-back/issues/1234/comments,https://github.com/taigaio/taiga-back/issues/1234,[],Error displaying page after update (extendMarkdown),"Hi, 

i've done a upgrade to tiga 4.04 and now i'm not able to display any userstory/epic/task. 

From the Error log i see that there is a problem with:  extendMarkdown()

Detail Log: 

`ERROR:2019-01-25 07:42:57,890: Internal Server Error: /api/v1/milestones/18
Traceback (most recent call last):
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/appl/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/appl/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
    response = self.handle_exception(exc)
  File ""/appl/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/lib64/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/appl/taiga/taiga-back/taiga/base/decorators.py"", line 60, in decorator
    return func(self, *args, **kwargs)
  File ""/appl/taiga/taiga-back/taiga/base/api/mixins.py"", line 249, in destroy
    self.pre_delete(obj)
  File ""/appl/taiga/taiga-back/taiga/projects/history/mixins.py"", line 83, in pre_delete
    self.persist_history_snapshot(obj, delete=True)
  File ""/appl/taiga/taiga-back/taiga/projects/history/mixins.py"", line 73, in persist_history_snapshot
    notifications_services.analize_object_for_watchers(obj, comment, user)
  File ""/appl/taiga/taiga-back/taiga/projects/notifications/services.py"", line 106, in analize_object_for_watchers
    mentions = get_object_mentions(obj, comment)
  File ""/appl/taiga/taiga-back/taiga/projects/notifications/services.py"", line 128, in get_object_mentions
    return get_mentions(obj.get_project(), ""\n"".join(texts))
  File ""/appl/taiga/taiga-back/taiga/projects/notifications/services.py"", line 133, in get_mentions
    _, data = render_and_extract(project, text)
  File ""/appl/taiga/taiga-back/taiga/mdrender/service.py"", line 120, in render_and_extract
    md = _get_markdown(project)
  File ""/appl/taiga/taiga-back/taiga/mdrender/service.py"", line 108, in _get_markdown
    md = Markdown(extensions=extensions)
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 78, in __init__
    configs=kwargs.get('extension_configs', {}))
  File ""/appl/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 106, in registerExtensions
    ext.extendMarkdown(self)
TypeError: extendMarkdown() takes 2 positional arguments but 3 were given
`
Any Infos on how to fix this?

best
"
552,taigaio,taiga-back,2,closed,1229,2,https://api.github.com/repos/taigaio/taiga-back/issues/1229/comments,https://github.com/taigaio/taiga-back/issues/1229,[],"Empty Epics, User Stories, Tasks, and Issues (extendMarkdown error)","Hello,

After updating to 4.0.4 following the procedure in https://taigaio.github.io/taiga-doc/dist/upgrades.html, I find that Epics, User Stories, Tasks, and Issues are completely empty. There's an error 500 everytime I go inside one of this elements, the results of which you can see in the attachment.

![user story](https://user-images.githubusercontent.com/21223384/51251534-538c8a00-1978-11e9-8a60-cda7a142a21e.png)

I went to see the gunicorn log, and find several errors, like this one:

```
> ERROR:2019-01-16 13:12:58,044: Internal Server Error: /api/v1/userstories/by_ref
> Traceback (most recent call last):
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
>     response = get_response(request)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
>     response = self._get_response(request)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
>     response = self.process_exception_by_middleware(e, request)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
>     response = wrapped_callback(request, *callback_args, **callback_kwargs)
>   File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
>     return self.dispatch(request, *args, **kwargs)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
>     return view_func(*args, **kwargs)
>   File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
>     response = self.handle_exception(exc)
>   File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
>     response = handler(request, *args, **kwargs)
>   File ""/home/taiga/taiga-back/taiga/projects/mixins/by_ref.py"", line 48, in by_ref
>     return self.retrieve(request, **retrieve_kwargs)
>   File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 159, in retrieve
>     return response.Ok(serializer.data)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 134, in data
>     self._data = self.to_value(self.instance)
>   File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 90, in to_value
>     return super().to_value(instance)
>   File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 30, in to_value
>     return super().to_value(instance)
>   File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 66, in to_value
>     return super().to_value(instance)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 124, in to_value
>     return self._serialize(instance, fields)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 107, in _serialize
>     result = getter(self, instance)
>   File ""/home/taiga/taiga-back/taiga/projects/userstories/serializers.py"", line 162, in get_blocked_note_html
>     return mdrender(obj.project, obj.blocked_note)
>   File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 99, in _decorator
>     returned_value = func(project, text)
>   File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 115, in render
>     md = _get_markdown(project)
>   File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 108, in _get_markdown
>     md = Markdown(extensions=extensions)
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 78, in __init__
>     configs=kwargs.get('extension_configs', {}))
>   File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 106, in registerExtensions
>     ext.extendMarkdown(self, globals())
> TypeError: extendMarkdown() takes 2 positional arguments but 3 were given
> 
> 
```

I've regenerated the virtualenv but it remains the same. "
555,taigaio,taiga-back,2,closed,1222,1,https://api.github.com/repos/taigaio/taiga-back/issues/1222/comments,https://github.com/taigaio/taiga-back/issues/1222,[],Cannot change port,"**Do you want to request a *feature* or report a *bug*?** 
Report a *bug*.

**What is the current behavior?**
The API server is starting up on the default port (8000), rather than respecting the settings in local.py.

**If the current behavior is a bug, please provide the steps to reproduce.**

Change the API server port in local.py. Start the server with `python3 manage.py runserver`. Server tries to start on default port. In my case, it also fails because another daemon is running on port 8000.

**What is the expected behavior?**
taiga-back will start with the api server listening on the port set in local.py.

**Is it happening in taiga.io or in your own instance?**
My own instance, Ubuntu 18.04 on a Google Cloud Compute instance.

-----

I have installed taiga-back according to the instruction at http://taigaio.github.io/taiga-doc/dist/setup-production.html . I have adjusted the SITES config in local.py as follows:

```
SITES = {
    ""api"": {
       ""scheme"": ""http"",
       ""domain"": ""localhost:9000"",
       ""name"": ""api""
    },
    ""front"": {
       ""scheme"": ""http"",
       ""domain"": ""localhost:9001"",
       ""name"": ""front""
    },
}
```

In other words, I have changed the api server port. (For what it's worth, I also tried changing it in common.py.) I try to start the server woth `python3 manage.py runserver`. The following is returned in the shell:
```
taiga@hostname:/var/www/taiga-back$ python3 manage.py runserver       
Trying import local.py settings...
Trying import local.py settings...
Performing system checks...

System check identified no issues (0 silenced).
January 04, 2019 - 02:44:49
Django version 1.11.16, using settings 'settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
Error: That port is already in use.
```

And the server quits. I have also tried with `python manage.py runserver`. I have also tried `/home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi`, to no avail. The result from that is:

```
taiga@hostname:/var/www/taiga-back$ /home/taiga/.virtualenvs/taiga/bin/gunicorn --workers 4 --timeout 60 -b 127.0.0.1:8001 taiga.wsgi
[2019-01-04 02:55:32 +0000] [25806] [INFO] Starting gunicorn 19.7.1
[2019-01-04 02:55:32 +0000] [25806] [INFO] Listening at: http://127.0.0.1:8001 (25806)
[2019-01-04 02:55:32 +0000] [25806] [INFO] Using worker: sync
[2019-01-04 02:55:32 +0000] [25809] [INFO] Booting worker with pid: 25809
[2019-01-04 02:55:32 +0000] [25810] [INFO] Booting worker with pid: 25810
[2019-01-04 02:55:32 +0000] [25812] [INFO] Booting worker with pid: 25812
[2019-01-04 02:55:32 +0000] [25814] [INFO] Booting worker with pid: 25814
Trying import local.py settings...
Trying import local.py settings...
Trying import local.py settings...
Trying import local.py settings...
```

It stops there. `netstat -al` shows nothing listening on the port configured in local.py (9000).

Any idea why the server isn't respecting the setting in local.py?

Edit: I learned that you can change the port used by Django's runserver by appending it to the command line: `python3 manage.py runserver 9000`. So is it accurate to say that the local.py settings are not supposed to tell the app what port to listen on?

Edit2: Changing the gunicorn command line to have `-b 127.0.0.1:9000` also works. So I'm guessingthis should be closed. Perhaps something could be added to the documentation to make it clearer for people trying to change the port. I will revisit this in a couple days, & if there are no responses, I will close it.
"
556,taigaio,taiga-back,2,closed,1221,3,https://api.github.com/repos/taigaio/taiga-back/issues/1221/comments,https://github.com/taigaio/taiga-back/issues/1221,[],Project Creation Error - TypeError: 'NoneType' object is not iterable,"**Do you want to request a *feature* or report a *bug*?**
Bug

**What is the current behavior?**
On project creation, API call fails with stack trace below.

```
taiga_3     | Trying import local.py settings...
taiga_3     | ERROR:2018-12-31 14:16:27,250: Internal Server Error: /api/v1/projects
taiga_3     | Traceback (most recent call last):
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
taiga_3     |     response = get_response(request)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
taiga_3     |     response = self._get_response(request)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
taiga_3     |     response = self.process_exception_by_middleware(e, request)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
taiga_3     |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
taiga_3     |     return self.dispatch(request, *args, **kwargs)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
taiga_3     |     return view_func(*args, **kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
taiga_3     |     response = self.handle_exception(exc)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
taiga_3     |     response = handler(request, *args, **kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/mixins.py"", line 100, in create
taiga_3     |     self.object = validator.save(force_insert=True)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/serializers.py"", line 1116, in save
taiga_3     |     self.object = super().save(**kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/serializers.py"", line 649, in save
taiga_3     |     self.save_object(self.object, **kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/base/api/serializers.py"", line 1134, in save_object
taiga_3     |     obj.save(**kwargs)
taiga_3     |   File ""/usr/src/taiga-back/taiga/projects/models.py"", line 299, in save
taiga_3     |     super().save(*args, **kwargs)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/db/models/base.py"", line 808, in save
taiga_3     |     force_update=force_update, update_fields=update_fields)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/db/models/base.py"", line 848, in save_base
taiga_3     |     update_fields=update_fields, raw=raw, using=using,
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/dispatch/dispatcher.py"", line 193, in send
taiga_3     |     for receiver in self._live_receivers(sender)
taiga_3     |   File ""/usr/local/lib/python3.5/site-packages/django/dispatch/dispatcher.py"", line 193, in <listcomp>
taiga_3     |     for receiver in self._live_receivers(sender)
taiga_3     |   File ""/usr/src/taiga-back/taiga/projects/signals.py"", line 72, in project_post_save
taiga_3     |     template.apply_to_project(instance)
taiga_3     |   File ""/usr/src/taiga-back/taiga/projects/models.py"", line 1104, in apply_to_project
taiga_3     |     for us_duedate in self.us_duedates:
taiga_3     | TypeError: 'NoneType' object is not iterable
```

Route:
POST to /api/v1/projects
```
{""is_private"":true,""creation_template"":2,""name"":""Test Project namer"",""description"":""description here""}
```

Response = 500 error
```
{""error"": ""Server application error""}
```


**If the current behavior is a bug, please provide the steps to reproduce.**
Create a project.

**Is it happening in taiga.io or in your own instance?**
My own.

**What browser/version are you using?**
Firefox.

**Are there any console errors *(Ctrl + F12)* in red?**
No

**Other Notable Things**
Using LDAP auth for most users"
558,taigaio,taiga-back,2,closed,1217,5,https://api.github.com/repos/taigaio/taiga-back/issues/1217/comments,https://github.com/taigaio/taiga-back/issues/1217,[],Taiga doesnt show projects after upgrade,"**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.

**Do you want to request a *feature* or report a *bug*?**
bug
**What is the current behavior?**
After upgrading taiga with the info here
https://taigaio.github.io/taiga-doc/dist/upgrades.html
from
3.4.6 (2018-10-30) 
to 
4.0.3 (2018-12-11)

I am not able to see any of my projects anymore. If I click on my user and then on the latest activities I got the error shown below. I restarted the whole host and do the upgrade steps again but nothing changed.

**If the current behavior is a bug, please provide the steps to reproduce.**


Request Method: | GET
-- | --
Request URL: | https://fritz-cloud.ddns.net:8044/api/v1/projects/by_slug?slug=fabianfritz-prasidialjahr
Django Version: | 1.11.16
Exception Type: | ProgrammingError
Exception Value: | relation   ""settings_userprojectsettings"" does not exist   LINE 178:                    FROM   settings_userprojectsettings                                     ^
Exception Location: | /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py   in execute, line 64
Python Executable: | /home/taiga/.virtualenvs/taiga/bin/python3.5
Python Version: | 3.5.2
Python Path: | ['/home/taiga/taiga-back',    '/home/taiga/taiga-back',    '/home/taiga/.virtualenvs/taiga/bin',    '/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages',    '/home/taiga/.virtualenvs/taiga/lib/python35.zip',    '/home/taiga/.virtualenvs/taiga/lib/python3.5',    '/home/taiga/.virtualenvs/taiga/lib/python3.5/plat-x86_64-linux-gnu',    '/home/taiga/.virtualenvs/taiga/lib/python3.5/lib-dynload',    '/usr/lib/python3.5',    '/usr/lib/python3.5/plat-x86_64-linux-gnu',    '/home/taiga/taiga-back']
Server time: | Sat, 15   Dec 2018 17:05:04 +0000



**What is the expected behavior?**
show projects as before
**Is it happening in taiga.io or in your own instance?**
own instance
**What browser/version are you using?**
chrome / ie both 
**Are there any console errors *(Ctrl + F12)* in red?**
see above 
Thanks for reporting!
"
560,taigaio,taiga-back,2,closed,1213,1,https://api.github.com/repos/taigaio/taiga-back/issues/1213/comments,https://github.com/taigaio/taiga-back/issues/1213,[],avatar image broken ,"**Do you want to request a *feature* or report a *bug*?**
bug?

**What is the current behavior?**
avatar image in top right corner not shown, pointing to localhost:8000/media/etc.

**If the current behavior is a bug, please provide the steps to reproduce.**
MEDIA_URL = 'https://my.taiga.com/media/'. Running behind a reverse proxy. If MEDIA_URL = '/media/' (works on normal django installations), no media files at all work (attachments, avatars), all point to localhost:8000. I have customized my conf.json in taiga-front-dist as well. Really a strange behaviour.

**What is the expected behavior?**
use correct MEDIA_URL.

**Is it happening in taiga.io or in your own instance?**
my own.

**What browser/version are you using?**
chromium latest

**Are there any console errors *(Ctrl + F12)* in red?**
the one for the image GET."
577,taigaio,taiga-back,2,closed,1190,4,https://api.github.com/repos/taigaio/taiga-back/issues/1190/comments,https://github.com/taigaio/taiga-back/issues/1190,[],Patch api calls give Server application error,"I've installed Taiga on a ubuntu server (18.04) and it's up-and-running, except I just noticed that I can't update an issue or user-story. It seems like the PATCH api calls fails, the error I see on F12 is 
angular.js:11756 PATCH http://taiga.[DOMAIN]/api/v1/issues/357 500 (Internal Server Error)
`{""error"": ""Server application error""}`

I've found the following in the gunicorn.stderr.log:

 ```
ERROR:2018-11-01 13:02:29,304: Internal Server Error: /api/v1/issues/357
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 207, in partial_update
    return self.update(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/issues/api.py"", line 144, in update
    return super().update(request, *args, **kwargs)
  File ""/usr/lib/python3.6/contextlib.py"", line 52, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/base/decorators.py"", line 60, in decorator
    return func(self, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 200, in update
    self.post_save(self.object, created=False)
  File ""/home/taiga/taiga-back/taiga/projects/occ/mixins.py"", line 85, in post_save
    super().post_save(obj, created)
  File ""/home/taiga/taiga-back/taiga/projects/history/mixins.py"", line 80, in post_save
    super().post_save(obj, created=created)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/mixins.py"", line 96, in post_save
    self.send_notifications(obj)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/mixins.py"", line 93, in send_notifications
    services.send_notifications(obj, history=history)
  File ""/usr/lib/python3.6/contextlib.py"", line 52, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 246, in send_notifications
    send_sync_notifications(notification.id)
  File ""/usr/lib/python3.6/contextlib.py"", line 52, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 320, in send_sync_notifications
    email.send(user.email, context, headers=headers)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/djmail/template_mail.py"", line 122, in send
    return email.send()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/mail/message.py"", line 348, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 104, in send_messages
    new_conn_created = self.open()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 64, in open
    self.connection = self.connection_class(self.host, self.port, **connection_params)
  File ""/usr/lib/python3.6/smtplib.py"", line 251, in __init__
    (code, msg) = self.connect(host, port)
  File ""/usr/lib/python3.6/smtplib.py"", line 336, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File ""/usr/lib/python3.6/smtplib.py"", line 307, in _get_socket
    self.source_address)
  File ""/usr/lib/python3.6/socket.py"", line 724, in create_connection
    raise err
  File ""/usr/lib/python3.6/socket.py"", line 713, in create_connection
    sock.connect(sa)
```

Taiga-Back 3.4.0
Taiga-Front 3.4.0-stable-1-g62d4f10

**Update:** found out it's not only happening on PATCH calls, also POST (password recovery or creating project) doesn't work"
596,taigaio,taiga-back,3,closed,1165,3,https://api.github.com/repos/taigaio/taiga-back/issues/1165/comments,https://github.com/taigaio/taiga-back/issues/1165,[],Received this upon upgrade,"```
(taiga) taiga@ipm:~/taiga-back$ python manage.py loaddata initial_project_templates --traceback
Trying import local.py settings...
/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use ""pip install psycopg2-binary"" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.
  """""")
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: column ""us_duedates"" of relation ""projects_projecttemplate"" does not exist
LINE 1: ..._limit"": null, ""slug"": ""archived"", ""order"": 6}]', ""us_duedat...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 363, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 355, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/commands/loaddata.py"", line 69, in handle
    self.loaddata(fixture_labels)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/commands/loaddata.py"", line 109, in loaddata
    self.load_label(fixture_label)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/commands/loaddata.py"", line 175, in load_label
    obj.save(using=self.using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/serializers/base.py"", line 205, in save
    models.Model.save_base(self.object, using=using, raw=True, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 836, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 903, in _save_table
    forced_update)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 953, in _do_update
    return filtered._update(values) > 0
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/query.py"", line 664, in _update
    return query.get_compiler(self.db).execute_sql(CURSOR)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 1191, in execute_sql
    cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 886, in execute_sql
    raise original_exception
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 876, in execute_sql
    cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/raven/contrib/django/client.py"", line 114, in execute
    return real_execute(self, sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: Problem installing fixture '/home/taiga/taiga-back/taiga/projects/fixtures/initial_project_templates.json': Could not load projects.ProjectTemplate(pk=1): column ""us_duedates"" of relation ""projects_projecttemplate"" does not exist
LINE 1: ..._limit"": null, ""slug"": ""archived"", ""order"": 6}]', ""us_duedat...
                                                             ^

(taiga) taiga@ipm:~/taiga-back$ 

```"
625,taigaio,taiga-back,3,closed,1119,2,https://api.github.com/repos/taigaio/taiga-back/issues/1119/comments,https://github.com/taigaio/taiga-back/issues/1119,[],On upgrade can no longer access US or issues ,"Upgraded our own server today to the latest stable branch for the UI and backend today. Appeared to complete the upgrade without issue. However, I can no longer view user stories or issues. 

When I attempt to view either I get the following errors in the browser console:

No module named 'smart_strong'

""No StorageEntry matches the given query.""

I've attempted to re-create the virtualenv but still hit the same issue.

From the logs on the taiga server I get the following:

ERROR:2018-06-04 14:55:21,036: Internal Server Error: /api/v1/userstories/by_ref
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 460, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/mixins/by_ref.py"", line 48, in by_ref
    return self.retrieve(request, **retrieve_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 159, in retrieve
    return response.Ok(serializer.data)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 134, in data
    self._data = self.to_value(self.instance)
  File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 90, in to_value
    return super().to_value(instance)
  File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 30, in to_value
    return super().to_value(instance)
  File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"", line 66, in to_value
    return super().to_value(instance)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 124, in to_value
    return self._serialize(instance, fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 107, in _serialize
    result = getter(self, instance)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/serializers.py"", line 162, in get_blocked_note_html
    return mdrender(obj.project, obj.blocked_note)
  File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 99, in _decorator
    returned_value = func(project, text)
  File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 115, in render
    md = _get_markdown(project)
  File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 108, in _get_markdown
    md = Markdown(extensions=extensions)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 78, in __init__
    configs=kwargs.get('extension_configs', {}))
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 106, in registerExtensions
    ext.extendMarkdown(self, globals())
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/extensions/extra.py"", line 59, in extendMarkdown
    md.registerExtensions(extensions, self.config)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 104, in registerExtensions
    ext = self.build_extension(ext, configs.get(ext, {}))
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/markdown/core.py"", line 142, in build_extension
    module = importlib.import_module(ext_name)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 956, in _find_and_load_unlocked
ImportError: No module named 'smart_strong'


I



"
632,taigaio,taiga-back,3,closed,1112,5,https://api.github.com/repos/taigaio/taiga-back/issues/1112/comments,https://github.com/taigaio/taiga-back/issues/1112,[],Unable to update pip dependencies (versions incompatibility),"**Do you want to request a *feature* or report a *bug*?**
*bug*

**What is the current behavior?**
```
(taiga) taiga@taiga:~/taiga-back$ pip install --upgrade -r requirements.txt
Collecting git+git://github.com/Python-Markdown/markdown.git@a4d4b61b5ce4a7dd96ddc13c66b8716d3ad8eb51 (from -r requirements.txt (line 4))
  Cloning git://github.com/Python-Markdown/markdown.git (to revision a4d4b61b5ce4a7dd96ddc13c66b8716d3ad8eb51) to /tmp/pip-req-build-8ht23ead
Collecting git+https://github.com/Xof/django-pglocks.git (from -r requirements.txt (line 25))
  Cloning https://github.com/Xof/django-pglocks.git to /tmp/pip-req-build-nzmd0hna
Requirement already up-to-date: CairoSVG==2.0.3 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 2)) (2.0.3)
Requirement already up-to-date: Django==1.11.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 3)) (1.11.2)
Requirement already up-to-date: Pillow==4.1.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 5)) (4.1.1)
Requirement already up-to-date: PyJWT==1.5.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 6)) (1.5.0)
Requirement already up-to-date: Unidecode==0.4.20 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 7)) (0.4.20)
Requirement already up-to-date: amqp==2.1.4 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 8)) (2.1.4)
Requirement already up-to-date: asana==0.6.5 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 9)) (0.6.5)
Requirement already up-to-date: bleach==2.0.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 10)) (2.0.0)
Requirement already up-to-date: celery==4.0.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 11)) (4.0.2)
Requirement already up-to-date: kombu==4.0.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 12)) (4.0.2)
Requirement already up-to-date: cryptography==1.9 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 13)) (1.9)
Requirement already up-to-date: cssutils==1.0.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 14)) (1.0.2)
Requirement already up-to-date: diff-match-patch==20121119 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 15)) (20121119)
Requirement already up-to-date: django-ipware==1.1.6 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 16)) (1.1.6)
Requirement already up-to-date: django-jinja==2.3.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 17)) (2.3.1)
Requirement already up-to-date: django-picklefield==0.3.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 18)) (0.3.2)
Requirement already up-to-date: django-sampledatahelper==0.4.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 19)) (0.4.1)
Requirement already up-to-date: django-sites==0.9 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 20)) (0.9)
Requirement already up-to-date: django-sr==0.0.4 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 21)) (0.0.4)
Requirement already up-to-date: djmail==1.0.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 22)) (1.0.1)
Requirement already up-to-date: easy-thumbnails==2.4.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 23)) (2.4.1)
Requirement already up-to-date: fn==0.4.3 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 24)) (0.4.3)
Requirement already up-to-date: gunicorn==19.7.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 26)) (19.7.1)
Requirement already up-to-date: jinja2==2.9.6 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 27)) (2.9.6)
Requirement already up-to-date: lxml==3.8.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 28)) (3.8.0)
Requirement already up-to-date: netaddr==0.7.19 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 29)) (0.7.19)
Requirement already up-to-date: premailer==3.0.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 30)) (3.0.1)
Requirement already up-to-date: psd-tools==1.4 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 31)) (1.4)
Requirement already up-to-date: psycopg2==2.7.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 32)) (2.7.1)
Requirement already up-to-date: pygments==2.2.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 33)) (2.2.0)
Requirement already up-to-date: pyjwkest==1.3.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 34)) (1.3.2)
Requirement already up-to-date: python-dateutil==2.6.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 35)) (2.6.0)
Requirement already up-to-date: python-magic==0.4.13 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 36)) (0.4.13)
Requirement already up-to-date: pytz==2017.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 37)) (2017.2)
Requirement already up-to-date: raven==6.1.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 38)) (6.1.0)
Requirement already up-to-date: redis==2.10.5 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 39)) (2.10.5)
Requirement already up-to-date: requests-oauthlib==0.8.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 40)) (0.8.0)
Requirement already up-to-date: requests==2.17.3 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 41)) (2.17.3)
Requirement already up-to-date: serpy==0.1.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 42)) (0.1.1)
Requirement already up-to-date: six==1.10.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 43)) (1.10.0)
Requirement already up-to-date: webcolors==1.7 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from -r requirements.txt (line 44)) (1.7)
Requirement not upgraded as not directly required: tinycss in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from CairoSVG==2.0.3->-r requirements.txt (line 2)) (0.4)
Requirement not upgraded as not directly required: cssselect in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from CairoSVG==2.0.3->-r requirements.txt (line 2)) (1.0.3)
Requirement not upgraded as not directly required: cairocffi in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from CairoSVG==2.0.3->-r requirements.txt (line 2)) (0.8.0)
Requirement not upgraded as not directly required: olefile in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from Pillow==4.1.1->-r requirements.txt (line 5)) (0.45.1)
Requirement not upgraded as not directly required: vine>=1.1.3 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from amqp==2.1.4->-r requirements.txt (line 8)) (1.1.4)
Requirement not upgraded as not directly required: html5lib>=0.99999999 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from bleach==2.0.0->-r requirements.txt (line 10)) (1.0.1)
Requirement not upgraded as not directly required: billiard<3.6.0,>=3.5.0.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from celery==4.0.2->-r requirements.txt (line 11)) (3.5.0.3)
Requirement not upgraded as not directly required: asn1crypto>=0.21.0 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from cryptography==1.9->-r requirements.txt (line 13)) (0.24.0)
Requirement not upgraded as not directly required: idna>=2.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from cryptography==1.9->-r requirements.txt (line 13)) (2.6)
Requirement not upgraded as not directly required: cffi>=1.7 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from cryptography==1.9->-r requirements.txt (line 13)) (1.11.5)
Requirement not upgraded as not directly required: sampledata in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from django-sampledatahelper==0.4.1->-r requirements.txt (line 19)) (0.3.7)
Requirement not upgraded as not directly required: MarkupSafe>=0.23 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from jinja2==2.9.6->-r requirements.txt (line 27)) (1.0)
Requirement not upgraded as not directly required: docopt>=0.5 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from psd-tools==1.4->-r requirements.txt (line 31)) (0.6.2)
Requirement not upgraded as not directly required: future in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from pyjwkest==1.3.2->-r requirements.txt (line 34)) (0.16.0)
Requirement not upgraded as not directly required: pycryptodomex in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from pyjwkest==1.3.2->-r requirements.txt (line 34)) (3.6.1)
Requirement not upgraded as not directly required: contextlib2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from raven==6.1.0->-r requirements.txt (line 38)) (0.5.5)
Requirement not upgraded as not directly required: oauthlib>=0.6.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from requests-oauthlib==0.8.0->-r requirements.txt (line 40)) (2.1.0)
Requirement not upgraded as not directly required: chardet<3.1.0,>=3.0.2 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from requests==2.17.3->-r requirements.txt (line 41)) (3.0.4)
Requirement not upgraded as not directly required: urllib3<1.22,>=1.21.1 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from requests==2.17.3->-r requirements.txt (line 41)) (1.21.1)
Requirement not upgraded as not directly required: certifi>=2017.4.17 in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from requests==2.17.3->-r requirements.txt (line 41)) (2018.4.16)
Requirement not upgraded as not directly required: webencodings in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from html5lib>=0.99999999->bleach==2.0.0->-r requirements.txt (line 10)) (0.5.1)
Requirement not upgraded as not directly required: pycparser in /home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages (from cffi>=1.7->cryptography==1.9->-r requirements.txt (line 13)) (2.18)
Building wheels for collected packages: Markdown, django-pglocks
  Running setup.py bdist_wheel for Markdown ... done
  Stored in directory: /tmp/pip-ephem-wheel-cache-pfs_4j1t/wheels/54/d8/4e/c42d3fac79a0e88ca7b6a2ac8a3b14f68c0a3e7b367df384e4
  Running setup.py bdist_wheel for django-pglocks ... done
  Stored in directory: /tmp/pip-ephem-wheel-cache-pfs_4j1t/wheels/fb/d0/35/3b2ebb60f1a2378b9a9bae075d436e44556cc08d9abe978858
Successfully built Markdown django-pglocks

asana 0.6.5 has requirement requests==2.14.*,>=2.14.2, but you'll have requests 2.17.3 which is incompatible.
asana 0.6.5 has requirement requests-oauthlib==0.6.*,>=0.6.1, but you'll have requests-oauthlib 0.8.0 which is incompatible.
requests 2.17.3 has requirement idna<2.6,>=2.5, but you'll have idna 2.6 which is incompatible.

Installing collected packages: Markdown, django-pglocks
  Found existing installation: Markdown 3.0.dev0
    Uninstalling Markdown-3.0.dev0:
      Successfully uninstalled Markdown-3.0.dev0
  Found existing installation: django-pglocks 1.0.2
    Uninstalling django-pglocks-1.0.2:
      Successfully uninstalled django-pglocks-1.0.2
Successfully installed Markdown-3.0.dev0 django-pglocks-1.0.2
```

**If the current behavior is a bug, please provide the steps to reproduce.**
```bash
cd ~/taiga-back
git checkout stable
workon taiga
git pull
pip install --upgrade -r requirements.txt
```

**What is the expected behavior?**
No reported errors about version incompatibilites

**Is it happening in taiga.io or in your own instance?**
Our instance

**What browser/version are you using?**
Latest Chrome

**Are there any console errors *(Ctrl + F12)* in red?**
```
GET http://taiga.cen.sor.ed/api/v1/tasks/by_ref?include_attachments=1&milestone=103&project=45&ref=19 500 (Internal Server Error)
(anonymous) @ angular.js:11756
g @ angular.js:11517
c @ angular.js:11227
a @ angular.js:15961
(anonymous) @ angular.js:15977
$eval @ angular.js:17229
$digest @ angular.js:17045
$apply @ angular.js:17337
(anonymous) @ angular.js:17633
o @ angular.js:5869
(anonymous) @ angular.js:6145
setTimeout (async)
c.defer @ angular.js:6143
k @ angular.js:17632
$applyAsync @ angular.js:17366
u @ angular.js:11569
_ @ angular.js:11778
k.onload @ angular.js:11711
load (async)
(anonymous) @ angular.js:11694
g @ angular.js:11517
c @ angular.js:11227
a @ angular.js:15961
(anonymous) @ angular.js:15977
$eval @ angular.js:17229
$digest @ angular.js:17045
$apply @ angular.js:17337
(anonymous) @ angular.js:13299
dispatch @ jquery.js:4737
g.handle @ jquery.js:4549
```

Thanks for reporting!
"
638,taigaio,taiga-back,3,closed,1103,2,https://api.github.com/repos/taigaio/taiga-back/issues/1103/comments,https://github.com/taigaio/taiga-back/issues/1103,[],Email errors spamming API issues,"Upon discussion with support team I was instructed to change the localhost address to ipm.uhlhosting.ch hence is my public address. Upon replacing these I started to receive over 100 emails within 30 mins.



```
Internal Server Error: /api/v1/userstories

ProgrammingError at /api/v1/userstories
column userstories_userstory.due_date does not exist
LINE 58: ...blocked"", ""userstories_userstory"".""blocked_note"", ""userstori...
                                                             ^
Request Method: GET
Request URL: https://ipm.uhlhosting.ch/api/v1/userstories?assigned_to=16&is_closed=false
Django Version: 1.11.2
Python Executable: /home/taiga/.virtualenvs/taiga/bin/python3.5
Python Version: 3.5.2
Python Path: ['/home/taiga/taiga-back', '/home/taiga/taiga-back', '/home/taiga/.virtualenvs/taiga/bin', '/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages', '/home/taiga/.virtualenvs/taiga/lib/python35.zip', '/home/taiga/.virtualenvs/taiga/lib/python3.5', '/home/taiga/.virtualenvs/taiga/lib/python3.5/plat-x86_64-linux-gnu', '/home/taiga/.virtualenvs/taiga/lib/python3.5/lib-dynload', '/usr/lib/python3.5', '/usr/lib/python3.5/plat-x86_64-linux-gnu', '/home/taiga/taiga-back']
Server time: Wed, 2 May 2018 01:09:19 +0000
Installed Applications:
['django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.admin',
'django.contrib.staticfiles',
'django.contrib.sitemaps',
'django.contrib.postgres',
'taiga.base',
'taiga.base.api',
'taiga.locale',
'taiga.events',
'taiga.front',
'taiga.users',
'taiga.userstorage',
'taiga.external_apps',
'taiga.projects',
'taiga.projects.references',
'taiga.projects.custom_attributes',
'taiga.projects.history',
'taiga.projects.notifications',
'taiga.projects.attachments',
'taiga.projects.likes',
'taiga.projects.votes',
'taiga.projects.milestones',
'taiga.projects.epics',
'taiga.projects.userstories',
'taiga.projects.tasks',
'taiga.projects.issues',
'taiga.projects.wiki',
'taiga.projects.contact',
'taiga.searches',
'taiga.timeline',
'taiga.mdrender',
'taiga.export_import',
'taiga.feedback',
'taiga.stats',
'taiga.hooks.github',
'taiga.hooks.gitlab',
'taiga.hooks.bitbucket',
'taiga.hooks.gogs',
'taiga.webhooks',
'taiga.importers',
'djmail',
'django_jinja',
'django_jinja.contrib._humanize',
'sr',
'easy_thumbnails',
'raven.contrib.django.raven_compat']
Installed Middleware:
['raven.contrib.django.middleware.SentryMiddleware',
'taiga.base.middleware.cors.CoorsMiddleware',
'taiga.events.middleware.SessionIDMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.locale.LocaleMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware']


Traceback:  

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
 65.                 return self.cursor.execute(sql, params)


     The above exception (column userstories_userstory.due_date does not exist
LINE 58: ...blocked"", ""userstories_userstory"".""blocked_note"", ""userstori...
                                                             ^
) was the direct cause of the following exception:



File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"" in inner
 41.             response = get_response(request)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"" in _legacy_get_response
 249.             response = self._get_response(request)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
 187.                 response = self.process_exception_by_middleware(e, request)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
 185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"" in view
 106.             return self.dispatch(request, *args, **kwargs)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"" in wrapped_view
 58.         return view_func(*args, **kwargs)

File ""/home/taiga/taiga-back/taiga/base/api/views.py"" in dispatch
 460.             response = self.handle_exception(exc)

File ""/home/taiga/taiga-back/taiga/base/api/views.py"" in dispatch
 458.             response = handler(request, *args, **kwargs)

File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"" in list
 143.         return response.Ok(serializer.data)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"" in data
 134.             self._data = self.to_value(self.instance)

File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"" in to_value
 90.         return super().to_value(instance)

File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"" in to_value
 30.         return super().to_value(instance)

File ""/home/taiga/taiga-back/taiga/projects/mixins/serializers.py"" in to_value
 66.         return super().to_value(instance)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"" in to_value
 123.             return [serialize(o, fields) for o in instance]

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/query.py"" in __iter__
 250.         self._fetch_all()

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/query.py"" in _fetch_all
 1105.             self._result_cache = list(self._iterable_class(self))

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/query.py"" in __iter__
 53.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/sql/compiler.py"" in execute_sql
 886.             raise original_exception

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/sql/compiler.py"" in execute_sql
 876.             cursor.execute(sql, params)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/raven/contrib/django/client.py"" in execute
 114.             return real_execute(self, sql, params)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
 65.                 return self.cursor.execute(sql, params)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/utils.py"" in __exit__
 94.                 six.reraise(dj_exc_type, dj_exc_value, traceback)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/utils/six.py"" in reraise
 685.             raise value.with_traceback(tb)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
 65.                 return self.cursor.execute(sql, params)

Exception Type: ProgrammingError at /api/v1/userstories
Exception Value: column userstories_userstory.due_date does not exist
LINE 58: ...blocked"", ""userstories_userstory"".""blocked_note"", ""userstori...
                                                             ^

Request information:
USER: Viorel-Cosmin Miron

GET:
assigned_to = '16'
is_closed = 'false'

POST: No POST data

FILES: No FILES data

COOKIES:
sessionid = '3hocqxzamh7kn4tviw2nzpe1z63mlwla'
ajs_user_id = 'null'
ajs_group_id = 'null'
ajs_anonymous_id = '%2200000000000000000000000000%22'
csrftoken = '6vseNMD9jNzYHPyffARATuHpUJbqCw7K6NDXwziqLCKVkIelkwhiapXNVTtfTmqs'
_ga = 'GA1.2.1705997440.1521743720'

META:
HTTP_ACCEPT = 'application/json, text/plain, */*'
HTTP_ACCEPT_ENCODING = 'gzip'
HTTP_ACCEPT_LANGUAGE = 'en'
HTTP_AUTHORIZATION = 'Bearer eyJ1c2VyX2F1dGhlbnRpY2F0aW9uX2lkIjoxNn0:1f1JSR:ecNPBREQLmA402xDX5334T9aQeQ'
HTTP_CONNECTION = 'close'
HTTP_COOKIE = 'csrftoken=6vseNMD9jNzYHPyffARATuHpUJbqCw7K6NDXwziqLCKVkIelkwhiapXNVTtfTmqs; sessionid=3hocqxzamh7kn4tviw2nzpe1z63mlwla; _ga=GA1.2.1705997440.1521743720; ajs_anonymous_id=%2200000000000000000000000000%22; ajs_group_id=null; ajs_user_id=null'
HTTP_DNT = '1'
HTTP_HOST = 'ipm.uhlhosting.ch'
HTTP_REFERER = 'https://ipm.uhlhosting.ch/'
HTTP_USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/11.1 Safari/605.1.15'
HTTP_X_DISABLE_PAGINATION = '1'
HTTP_X_FORWARDED_FOR = '89.103.72.238'
HTTP_X_FORWARDED_PROTO = 'https'
HTTP_X_REAL_IP = '89.103.72.238'
HTTP_X_SCHEME = 'https'
HTTP_X_SESSION_ID = '5069e991a776f4ed858231a404ea1684a8d3c88d'
PATH_INFO = '/api/v1/userstories'
QUERY_STRING = 'assigned_to=16&is_closed=false'
RAW_URI = '/api/v1/userstories?assigned_to=16&is_closed=false'
REMOTE_ADDR = '127.0.0.1'
REMOTE_PORT = '40700'
REQUEST_METHOD = 'GET'
SCRIPT_NAME = ''
SERVER_NAME = '127.0.0.1'
SERVER_PORT = '8001'
SERVER_PROTOCOL = 'HTTP/1.0'
SERVER_SOFTWARE = 'gunicorn/19.7.1'
gunicorn.socket = <socket.socket fd=13, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8001), raddr=('127.0.0.1', 40700)>
wsgi.errors = <gunicorn.http.wsgi.WSGIErrorsWrapper object at 0x7f6f9ddd91d0>
wsgi.file_wrapper = ''
wsgi.input = <gunicorn.http.body.Body object at 0x7f6f9ddd9390>
wsgi.multiprocess = True
wsgi.multithread = False
wsgi.run_once = False
wsgi.url_scheme = 'https'
wsgi.version = 

Settings:
Using settings module settings
ABSOLUTE_URL_OVERRIDES = {}
ADMINS = ('Admin', 'cosmin@uhlhost.net')
ALLOWED_HOSTS = ['*']
APPEND_SLASH = False
APP_EXTRA_EXPOSE_HEADERS = ['taiga-info-total-opened-milestones', 'taiga-info-total-closed-milestones', 'taiga-info-project-memberships', 'taiga-info-project-is-private', 'taiga-info-order-updated']
ATOMIC_REQUESTS = True
AUTHENTICATION_BACKENDS = 'django.contrib.auth.backends.ModelBackend'
AUTH_PASSWORD_VALIDATORS = '********************'
AUTH_USER_MODEL = 'users.User'
BASE_DIR = '/home/taiga/taiga-back'
BITBUCKET_VALID_ORIGIN_IPS = ['131.103.20.165', '131.103.20.166', '104.192.143.192/28', '104.192.143.208/28']
BROKER_URL = 'amqp://guest:guest@localhost:5672//'
CACHES = {'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache', 'LOCATION': 'unique-snowflake'}}
CACHE_MIDDLEWARE_ALIAS = 'default'
CACHE_MIDDLEWARE_KEY_PREFIX = '********************'
CACHE_MIDDLEWARE_SECONDS = 600
CELERY_ENABLED = True
CELERY_RESULT_BACKEND = 'redis://localhost:6379/0'
CHANGE_NOTIFICATIONS_MIN_INTERVAL = 300
CSRF_COOKIE_AGE = 31449600
CSRF_COOKIE_DOMAIN = None
CSRF_COOKIE_HTTPONLY = False
CSRF_COOKIE_NAME = 'csrftoken'
CSRF_COOKIE_PATH = '/'
CSRF_COOKIE_SECURE = False
CSRF_FAILURE_VIEW = 'django.views.csrf.csrf_failure'
CSRF_HEADER_NAME = 'HTTP_X_CSRFTOKEN'
CSRF_TRUSTED_ORIGINS = []
CSRF_USE_SESSIONS = False
DATABASES = {'default': {'ATOMIC_REQUESTS': False, 'CONN_MAX_AGE': 0, 'PORT': '', 'HOST': '', 'OPTIONS': {}, 'TEST': {'NAME': None, 'COLLATION': None, 'MIRROR': None, 'CHARSET': None}, 'USER': '', 'NAME': 'taiga', 'AUTOCOMMIT': True, 'TIME_ZONE': None, 'PASSWORD': '********************', 'ENGINE': 'django.db.backends.postgresql'}}
DATABASE_ROUTERS = []
DATA_UPLOAD_MAX_MEMORY_SIZE = 2621440
DATA_UPLOAD_MAX_NUMBER_FIELDS = 1000
DATETIME_FORMAT = 'N j, Y, P'
DATETIME_INPUT_FORMATS = ['%Y-%m-%d %H:%M:%S', '%Y-%m-%d %H:%M:%S.%f', '%Y-%m-%d %H:%M', '%Y-%m-%d', '%m/%d/%Y %H:%M:%S', '%m/%d/%Y %H:%M:%S.%f', '%m/%d/%Y %H:%M', '%m/%d/%Y', '%m/%d/%y %H:%M:%S', '%m/%d/%y %H:%M:%S.%f', '%m/%d/%y %H:%M', '%m/%d/%y']
DATE_FORMAT = 'N j, Y'
DATE_INPUT_FORMATS = 
DEBUG = False
DEBUG_PROPAGATE_EXCEPTIONS = False
DECIMAL_SEPARATOR = '.'
DEFAULT_CHARSET = 'utf-8'
DEFAULT_CONTENT_TYPE = 'text/html'
DEFAULT_EXCEPTION_REPORTER_FILTER = 'django.views.debug.SafeExceptionReporterFilter'
DEFAULT_FILE_STORAGE = 'taiga.base.storage.FileSystemStorage'
DEFAULT_FROM_EMAIL = 'talk@uhlhosting.ch'
DEFAULT_INDEX_TABLESPACE = ''
DEFAULT_PROJECT_TEMPLATE = 'scrum'
DEFAULT_TABLESPACE = ''
DISALLOWED_USER_AGENTS = []
DJMAIL_MAX_RETRY_NUMBER = 3
DJMAIL_REAL_BACKEND = 'django.core.mail.backends.console.EmailBackend'
DJMAIL_SEND_ASYNC = True
DJMAIL_TEMPLATE_EXTENSION = 'jinja'
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'panel.uhlhosting.ch'
EMAIL_HOST_PASSWORD = '********************'
EMAIL_HOST_USER = 'talk@uhlhosting.ch'
EMAIL_PORT = 587
EMAIL_SSL_CERTFILE = None
EMAIL_SSL_KEYFILE = '********************'
EMAIL_SUBJECT_PREFIX = '[Django] '
EMAIL_TIMEOUT = None
EMAIL_USE_LOCALTIME = False
EMAIL_USE_SSL = False
EMAIL_USE_TLS = True
EVENTS_PUSH_BACKEND = 'taiga.events.backends.rabbitmq.EventsPushBackend'
EVENTS_PUSH_BACKEND_OPTIONS = {'url': 'amqp://taiga:masterblaster@localhost:5672/taiga'}
EXPORTS_TTL = 86400
EXTRA_BLOCKING_CODES = []
FEEDBACK_EMAIL = 'support@uhlhosting.ch'
FEEDBACK_ENABLED = True
FILE_CHARSET = 'utf-8'
FILE_UPLOAD_DIRECTORY_PERMISSIONS = None
FILE_UPLOAD_HANDLERS = ['django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler']
FILE_UPLOAD_MAX_MEMORY_SIZE = 2621440
FILE_UPLOAD_PERMISSIONS = 420
FILE_UPLOAD_TEMP_DIR = None
FIRST_DAY_OF_WEEK = 0
FIXTURE_DIRS = []
FORCE_SCRIPT_NAME = None
FORMAT_MODULE_PATH = 'taiga.base.formats'
FORM_RENDERER = 'django.forms.renderers.DjangoTemplates'
FRONT_SITEMAP_CACHE_TIMEOUT = 86400
FRONT_SITEMAP_ENABLED = False
GITLAB_VALID_ORIGIN_IPS = []
IGNORABLE_404_ENDS = 
IGNORABLE_404_STARTS = '/phpmyadmin/'
IGNORABLE_404_URLS = []
IMPORTERS = {'jira': {'cert': '', 'active': False, 'consumer_key': '********************', 'pub_cert': ''}, 'github': {'client_id': '', 'active': False, 'client_secret': '********************'}, 'asana': {'app_secret': '********************', 'app_id': '', 'active': False, 'callback_url': ''}, 'trello': {'active': False, 'secret_key': '********************', 'api_key': '********************'}}
INSTALLED_APPS = ['django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.admin', 'django.contrib.staticfiles', 'django.contrib.sitemaps', 'django.contrib.postgres', 'taiga.base', 'taiga.base.api', 'taiga.locale', 'taiga.events', 'taiga.front', 'taiga.users', 'taiga.userstorage', 'taiga.external_apps', 'taiga.projects', 'taiga.projects.references', 'taiga.projects.custom_attributes', 'taiga.projects.history', 'taiga.projects.notifications', 'taiga.projects.attachments', 'taiga.projects.likes', 'taiga.projects.votes', 'taiga.projects.milestones', 'taiga.projects.epics', 'taiga.projects.userstories', 'taiga.projects.tasks', 'taiga.projects.issues', 'taiga.projects.wiki', 'taiga.projects.contact', 'taiga.searches', 'taiga.timeline', 'taiga.mdrender', 'taiga.export_import', 'taiga.feedback', 'taiga.stats', 'taiga.hooks.github', 'taiga.hooks.gitlab', 'taiga.hooks.bitbucket', 'taiga.hooks.gogs', 'taiga.webhooks', 'taiga.importers', 'djmail', 'django_jinja', 'django_jinja.contrib._humanize', 'sr', 'easy_thumbnails', 'raven.contrib.django.raven_compat']
INTERNAL_IPS = []
LANGUAGES = [('de', 'Deutsch'), ('en', 'English (US)')]
LANGUAGES_BIDI = ['he', 'ar', 'fa', 'ur']
LANGUAGE_CODE = 'en-us'
LANGUAGE_COOKIE_AGE = None
LANGUAGE_COOKIE_DOMAIN = None
LANGUAGE_COOKIE_NAME = 'django_language'
LANGUAGE_COOKIE_PATH = '/'
LOCALE_PATHS = 
LOGGING = {'formatters': {'simple': {'format': '%(levelname)s:%(asctime)s: %(message)s'}, 'null': {'format': '%(message)s'}, 'django.server': {'()': 'django.utils.log.ServerFormatter', 'format': '[%(server_time)s] %(message)s'}, 'complete': {'format': '%(levelname)s:%(asctime)s:%(module)s %(message)s'}}, 'filters': {'require_debug_false': {'()': 'django.utils.log.RequireDebugFalse'}}, 'loggers': {'taiga.export_import': {'handlers': ['mail_admins', 'console'], 'level': 'ERROR', 'propagate': False}, 'django.server': {'handlers': ['django.server'], 'level': 'INFO', 'propagate': False}, 'taiga': {'handlers': ['console'], 'level': 'DEBUG', 'propagate': False}, 'django': {'handlers': ['null'], 'level': 'INFO', 'propagate': True}, 'django.request': {'handlers': ['mail_admins', 'console'], 'level': 'ERROR', 'propagate': False}}, 'disable_existing_loggers': True, 'handlers': {'console': {'class': 'logging.StreamHandler', 'formatter': 'simple', 'level': 'DEBUG'}, 'null': {'class': 'logging.NullHandler', 'level': 'DEBUG'}, 'django.server': {'class': 'logging.StreamHandler', 'formatter': 'django.server', 'level': 'INFO'}, 'mail_admins': {'class': 'django.utils.log.AdminEmailHandler', 'filters': ['require_debug_false'], 'level': 'ERROR'}}, 'version': 1}
LOGGING_CONFIG = 'logging.config.dictConfig'
LOGIN_REDIRECT_URL = '/accounts/profile/'
LOGIN_URL = '/auth/login/'
LOGOUT_REDIRECT_URL = None
MANAGERS = []
MAX_AGE_AUTH_TOKEN = '********************'
MAX_AGE_CANCEL_ACCOUNT = 2592000
MAX_MEMBERSHIPS_PRIVATE_PROJECTS = None
MAX_MEMBERSHIPS_PUBLIC_PROJECTS = None
MAX_PENDING_MEMBERSHIPS = 30
MAX_PRIVATE_PROJECTS_PER_USER = None
MAX_PUBLIC_PROJECTS_PER_USER = None
MEDIA_ROOT = '/home/taiga/taiga-back/media'
MEDIA_URL = '/media/'
MESSAGE_STORAGE = 'django.contrib.messages.storage.session.SessionStorage'
MIDDLEWARE = None
MIDDLEWARE_CLASSES = ['raven.contrib.django.middleware.SentryMiddleware', 'taiga.base.middleware.cors.CoorsMiddleware', 'taiga.events.middleware.SessionIDMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.locale.LocaleMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware']
MIGRATION_MODULES = {}
MONTH_DAY_FORMAT = 'F j'
NUMBER_GROUPING = 0
PASSWORD_HASHERS = '********************'
PASSWORD_RESET_TIMEOUT_DAYS = '********************'
PREPEND_WWW = False
PROJECT_MODULES_CONFIGURATORS = {'bitbucket': 'taiga.hooks.bitbucket.services.get_or_generate_config', 'github': 'taiga.hooks.github.services.get_or_generate_config', 'gitlab': 'taiga.hooks.gitlab.services.get_or_generate_config', 'gogs': 'taiga.hooks.gogs.services.get_or_generate_config'}
PUBLIC_REGISTER_ENABLED = True
REST_FRAMEWORK = {'DEFAULT_THROTTLE_WHITELIST': [], 'EXCEPTION_HANDLER': 'taiga.base.exceptions.exception_handler', 'DEFAULT_THROTTLE_CLASSES': ('taiga.base.throttling.CommonThrottle',), 'PAGINATE_BY_PARAM': 'page_size', 'PAGINATE_BY': 30, 'DATETIME_FORMAT': '%Y-%m-%dT%H:%M:%S%z', 'DEFAULT_AUTHENTICATION_CLASSES': ('taiga.auth.backends.Token', 'taiga.auth.backends.Session', 'taiga.external_apps.auth_backends.Token'), 'DEFAULT_THROTTLE_RATES': {'user-write': None, 'register-success': None, 'user-detail': None, 'user-read': None, 'anon-read': None, 'create-memberships': None, 'import-dump-mode': '1/minute', 'anon-write': None, 'user-update': None, 'login-fail': None, 'import-mode': None}, 'MAX_PAGINATE_BY': 1000, 'FILTER_BACKEND': 'taiga.base.filters.FilterBackend'}
ROOT_URLCONF = 'taiga.urls'
SEARCHES_MAX_RESULTS = 150
SECRET_KEY = '********************'
SECURE_BROWSER_XSS_FILTER = False
SECURE_CONTENT_TYPE_NOSNIFF = False
SECURE_HSTS_INCLUDE_SUBDOMAINS = False
SECURE_HSTS_PRELOAD = False
SECURE_HSTS_SECONDS = 0
SECURE_PROXY_SSL_HEADER = 
SECURE_REDIRECT_EXEMPT = []
SECURE_SSL_HOST = None
SECURE_SSL_REDIRECT = False
SEND_BROKEN_LINK_EMAILS = True
SERVER_EMAIL = 'talk@uhlhosting.ch'
SESSION_CACHE_ALIAS = 'default'
SESSION_COOKIE_AGE = 1209600
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_HTTPONLY = True
SESSION_COOKIE_NAME = 'sessionid'
SESSION_COOKIE_PATH = '/'
SESSION_COOKIE_SECURE = False
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
SESSION_FILE_PATH = None
SESSION_SAVE_EVERY_REQUEST = False
SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SETTINGS_MODULE = 'settings'
SHORT_DATETIME_FORMAT = 'm/d/Y P'
SHORT_DATE_FORMAT = 'm/d/Y'
SIGNING_BACKEND = 'django.core.signing.TimestampSigner'
SILENCED_SYSTEM_CHECKS = []
SITES = {'api': '********************', 'front': {'domain': 'ipm.uhlhosting.ch', 'scheme': 'https', 'name': 'front'}}
SITE_ID = 'api'
SOUTH_MIGRATION_MODULES = {'easy_thumbnails': 'easy_thumbnails.south_migrations'}
SR = {'social': {'github_url': 'https://github.com/taigaio', 'twitter_url': 'https://twitter.com/taigaio'}, 'taigaio_url': 'https://taiga.io', 'support': {'url': 'https://tree.taiga.io/support', 'mailing_list': 'https://groups.google.com/forum/#!forum/taigaio', 'email': 'support@taiga.io'}}
STATICFILES_DIRS = 
STATICFILES_FINDERS = ['django.contrib.staticfiles.finders.FileSystemFinder', 'django.contrib.staticfiles.finders.AppDirectoriesFinder']
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
STATIC_ROOT = '/home/taiga/taiga-back/static'
STATIC_URL = '/static/'
STATS_CACHE_TIMEOUT = 3600
STATS_ENABLED = True
TAGS_PREDEFINED_COLORS = ['#fce94f', '#edd400', '#c4a000', '#8ae234', '#73d216', '#4e9a06', '#d3d7cf', '#fcaf3e', '#f57900', '#ce5c00', '#729fcf', '#3465a4', '#204a87', '#888a85', '#ad7fa8', '#75507b', '#5c3566', '#ef2929', '#cc0000', '#a40000', '#2e3436']
TEMPLATES = [{'BACKEND': 'django_jinja.backend.Jinja2', 'OPTIONS': {'context_processors': ['django.contrib.auth.context_processors.auth', 'django.template.context_processors.request', 'django.template.context_processors.i18n', 'django.template.context_processors.media', 'django.template.context_processors.static', 'django.template.context_processors.tz', 'django.contrib.messages.context_processors.messages'], 'match_extension': '.jinja'}, 'DIRS': ['/home/taiga/taiga-back/templates'], 'APP_DIRS': True}, {'BACKEND': 'django.template.backends.django.DjangoTemplates', 'OPTIONS': {'context_processors': ['django.contrib.auth.context_processors.auth', 'django.template.context_processors.request', 'django.template.context_processors.i18n', 'django.template.context_processors.media', 'django.template.context_processors.static', 'django.template.context_processors.tz', 'django.contrib.messages.context_processors.messages']}, 'DIRS': ['/home/taiga/taiga-back/templates'], 'APP_DIRS': True}]
TEST_NON_SERIALIZED_APPS = []
TEST_RUNNER = 'django.test.runner.DiscoverRunner'
THN_ATTACHMENT_CARD = 'card-image'
THN_ATTACHMENT_PREVIEW = 'preview-image'
THN_ATTACHMENT_TIMELINE = 'timeline-image'
THN_AVATAR_BIG = 'big-avatar'
THN_AVATAR_BIG_SIZE = 300
THN_AVATAR_SIZE = 80
THN_AVATAR_SMALL = 'avatar'
THN_CARD_IMAGE_HEIGHT = 200
THN_CARD_IMAGE_WIDTH = 300
THN_LOGO_BIG = 'logo-big'
THN_LOGO_BIG_SIZE = 300
THN_LOGO_SMALL = 'logo-small'
THN_LOGO_SMALL_SIZE = 80
THN_PREVIEW_IMAGE_WIDTH = 800
THN_TIMELINE_IMAGE_SIZE = 640
THOUSAND_SEPARATOR = ','
THUMBNAIL_ALIASES = {'': {'logo-big': {'size': (300, 300), 'crop': True}, 'preview-image': {'size': (800, 0), 'crop': False}, 'card-image': {'size': (300, 200), 'crop': True}, 'avatar': {'size': (80, 80), 'crop': True}, 'big-avatar': {'size': (300, 300), 'crop': True}, 'logo-small': {'size': (80, 80), 'crop': True}, 'timeline-image': {'size': (640, 0), 'crop': True}}}
TIME_FORMAT = 'P'
TIME_INPUT_FORMATS = ['%H:%M:%S', '%H:%M:%S.%f', '%H:%M']
TIME_ZONE = 'UTC'
USER_EMAIL_ALLOWED_DOMAINS = None
USE_ETAGS = False
USE_I18N = True
USE_L10N = True
USE_THOUSAND_SEPARATOR = False
USE_TZ = True
USE_X_FORWARDED_HOST = True
USE_X_FORWARDED_PORT = False
WEBHOOKS_ENABLED = True
WSGI_APPLICATION = 'taiga.wsgi.application'
X_FRAME_OPTIONS = 'SAMEORIGIN'
YEAR_MONTH_FORMAT = 'F Y'
```

Issues on Console:

[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (issues, line 0)
[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (userstories, line 0)
[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (tasks, line 0)
[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (issues, line 0)
[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (tasks, line 0)
[Error] Failed to load resource: the server responded with a status of 500 (Internal Server Error) (userstories, line 0)
> Selected Element

https://ipm.uhlhosting.ch/api/v1/*

All are showing 500 in connecting to https://ipm.uhlhosting.ch/api

I do not understand how this is possible I made a snapshot and reverted my snapshot, yet this is still occurring. I will have to shutdown the machine hence at this rate is flooding my mailbox.

Any idea is welcomed"
663,taigaio,taiga-back,3,closed,1067,2,https://api.github.com/repos/taigaio/taiga-back/issues/1067/comments,https://github.com/taigaio/taiga-back/issues/1067,[],E-Mail queue not cleared,"Hey,
we are running taiga on Ubuntu 16.04.3 LTS.
Version Back: 3.1.0-34-g61c0653
Version Front: 3.1.0-stable-14-g93bbd82

The system is used by about 150 users.
Now we want to setup E-Mail notifications for the users.

We decided to use the async process.
Unfortunately our E-Mail provider (Exchange 2016) only allows to send 10 mails per minute.
Also we are note allowed to change by our parent company.

So send_notifications fails with: smtplib.SMTPSenderRefused: (421, b'4.4.2 Message submission rate for this client has exceeded the configured limit', 'taiga@xxxxxxxxxxxxx')

When running send_notifications 10 mails are sent, but not removed from the mail queue.
So when we start send_notifications again, exact the same mails are send again.

Thanks in advance
Jockel
<br><br>

## E-Mail Settings
CHANGE_NOTIFICATIONS_MIN_INTERVAL = 300
DEFAULT_FROM_EMAIL = ""taiga@xxxxxxxxxxxxxxxxxxxx""
SERVER_EMAIL = DEFAULT_FROM_EMAIL
EMAIL_BACKEND = ""django.core.mail.backends.smtp.EmailBackend""
EMAIL_USE_TLS = True
EMAIL_HOST = ""mail.xxxxxxxxxxxxxxxxxxxx""
EMAIL_HOST_USER = ""taiga@xxxxxxxxxxxxxxxxxxxx""
EMAIL_HOST_PASSWORD = ""xxxxxxxxxxxxxxxxxxxx""
EMAIL_PORT = 587

<br><br>
## Log
$ taiga-back && workon taiga && python manage.py send_notifications
Trying import local.py settings...
WARNING	Property: Unknown Property name. [6:51: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [6:82: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [7:23: mso-table-lspace]
WARNING	Property: Unknown Property name. [7:45: mso-table-rspace]
WARNING	Property: Unknown Property name. [8:17: -ms-interpolation-mode]
ERROR	Property: Invalid value for ""CSS Level 2.1"" property: 0.8rem 3rem [178:17: padding]
WARNING	Property: Unknown Property name. [277:55: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name.
WARNING	Property: Unknown Property name. [1:1: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [1:31: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [1:1: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [1:31: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [1:1: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [1:31: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [1:1: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [1:31: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [1:1: -webkit-text-size-adjust]
WARNING	Property: Unknown Property name. [1:31: -ms-text-size-adjust]
WARNING	Property: Unknown Property name. [1:1: mso-table-lspace]
WARNING	Property: Unknown Property name. [1:20: mso-table-rspace]
WARNING	Property: Unknown Property name. [1:1: mso-table-lspace]
WARNING	Property: Unknown Property name. [1:20: mso-table-rspace]
WARNING	Property: Unknown Property name. [1:1: -ms-interpolation-mode]
ERROR	Property: Invalid value for ""CSS Level 2.1"" property: 0.8rem 3rem [1:138: padding]
......
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/management/commands/send_notifications.py"", line 32, in handle
    send_sync_notifications(change_notification.pk)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 294, in send_sync_notifications
    email.send(user.email, context, headers=headers)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/djmail/template_mail.py"", line 122, in send
    return email.send()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/message.py"", line 342, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"", line 107, in send_messages
    sent = self._send(message)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"", line 123, in _send
    self.connection.sendmail(from_email, recipients, message.as_bytes(linesep='\r\n'))
  File ""/usr/lib/python3.5/smtplib.py"", line 862, in sendmail
    raise SMTPSenderRefused(code, resp, from_addr)
smtplib.SMTPSenderRefused: (421, b'4.4.2 Message submission rate for this client has exceeded the configured limit', 'taiga@xxxxxxxxxxxxx')"
669,taigaio,taiga-back,3,closed,1060,2,https://api.github.com/repos/taigaio/taiga-back/issues/1060/comments,https://github.com/taigaio/taiga-back/issues/1060,[],invitation link issue,"Hi there

First of all i would like to thank you for your work and your great project.

I have a problem and i would like to receive some help.

I have this installation of Taiga on my  machine (ubuntu 16.04).
The platform works, i have set the email notification email and all is ok when it comes to send an email to invite users in joining the platform

But When i try to click on the button (ACCEPT YOUR INVITATION) within the email... the resulting link (http://MYDOMAIN/invitation/fde1b6d0-fad2-11e7-bd95-fa163e902c97) takes to a wrong page, which seems to be index.html with a bunch of errors in console:

libs.js:1 Uncaught SyntaxError: Unexpected token <
templates.js:1 Uncaught SyntaxError: Unexpected token <
app-loader.js:1 Uncaught SyntaxError: Unexpected token <

then i have cheked the received files in the browser and i have seen that:
fde1b6d0-fad2-11e7-bd95-fa163e902c97
spinner-circle.svg
libs.js
templates.js
app-loader.js
favicon.png
those files are all index.html....
It seems that TAIGA my configuration is failing in exposing an invitation interface... Getting always the index.html page when i am trying to open a /invitation/$key url.  Am i wrong? I see no invitation page

this is my local.py
from .common import *

MEDIA_URL = ""http://217.172.12.193/media/""
STATIC_URL = ""http://217.172.12.193/static/""
SITES[""front""][""scheme""] = ""http""
SITES[""front""][""domain""] = ""217.172.12.193""

SECRET_KEY = ""theveryultratopsecretkey""

DEBUG = False
PUBLIC_REGISTER_ENABLED = True

DEFAULT_FROM_EMAIL = ""no-reply@example.com""
SERVER_EMAIL = DEFAULT_FROM_EMAIL

#CELERY_ENABLED = True

EVENTS_PUSH_BACKEND = ""taiga.events.backends.rabbitmq.EventsPushBackend""
EVENTS_PUSH_BACKEND_OPTIONS = {""url"": ""amqp://taiga:PASSWORD_FOR_EVENTS@localhost:5672/""}


EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_USE_TLS = True
#EMAIL_USE_SSL = False
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'eng.taigamailerservice@gmail.com'
EMAIL_HOST_PASSWORD = 'emailpassword'

#GITHUB_API_CLIENT_ID = ""yourgithubclientid""
#GITHUB_API_CLIENT_SECRET = ""yourgithubclientsecret""


My front/dist/conf.json

{
    ""api"": ""http://217.172.12.193/api/v1/"",
    ""eventsUrl"": ""ws://217.172.12.193/events"",
    ""eventsMaxMissedHeartbeats"": 5,
    ""eventsHeartbeatIntervalTime"": 60000,
    ""eventsReconnectTryInterval"": 10000,
    ""debug"": true,
    ""debugInfo"": false,
    ""defaultLanguage"": ""en"",
    ""themes"": [""taiga""],
    ""defaultTheme"": ""taiga"",
    ""publicRegisterEnabled"": true,
    ""invitationRegisterEnabled"": true,
    ""feedbackEnabled"": true,
    ""privacyPolicyUrl"": null,
    ""termsOfServiceUrl"": null,
    ""maxUploadFileSize"": null,
    ""contribPlugins"": [],
    ""tribeHost"": null,
    ""importers"": [],
    ""gravatar"": true
}

my nginx taiga.conf

server {
    listen 80 default_server;
    server_name _;

    large_client_header_buffers 4 32k;
    client_max_body_size 50M;
    charset utf-8;

    access_log /home/taiga/logs/nginx.access.log;
    error_log /home/taiga/logs/nginx.error.log;

    #Frontend
    location / {
        root /home/taiga/taiga-front-dist/dist/;
        try_files $uri $uri/ /index.html;
    }

    # Backend
    location /api {
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://127.0.0.1:8001/api;
        proxy_redirect off;
    }

    # Django admin access (/admin/)
    location /admin {
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://127.0.0.1:8001$request_uri;
        proxy_redirect off;
    }

    # Static files
    location /static {
        alias /home/taiga/taiga-back/static;
    }

    # Media files
    location /media {
        alias /home/taiga/taiga-back/media;
    }

	# Taiga-events
	location /events {
	proxy_pass http://127.0.0.1:8888/events;
	proxy_http_version 1.1;
	proxy_set_header Upgrade $http_upgrade;
	proxy_set_header Connection ""upgrade"";
	proxy_connect_timeout 7d;
	proxy_send_timeout 7d;
	proxy_read_timeout 7d;
	}
}

my circus taiga.conf

[watcher:taiga]
working_dir = /home/taiga/taiga-back
cmd = gunicorn
args = -w 3 -t 60 --pythonpath=. -b 127.0.0.1:8001 taiga.wsgi
uid = taiga
numprocesses = 1
autostart = true
send_hup = true
stdout_stream.class = FileStream
stdout_stream.filename = /home/taiga/logs/gunicorn.stdout.log
stdout_stream.max_bytes = 10485760
stdout_stream.backup_count = 4
stderr_stream.class = FileStream
stderr_stream.filename = /home/taiga/logs/gunicorn.stderr.log
stderr_stream.max_bytes = 10485760
stderr_stream.backup_count = 4

[env:taiga]
PATH = /home/taiga/.virtualenvs/taiga/bin:$PATH
TERM=rxvt-256color
SHELL=/bin/bash
USER=taiga
LANG=en_US.UTF-8
HOME=/home/taiga
PYTHONPATH=/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages

my circus taiga-events.ini

[watcher:taiga-events]
working_dir = /home/taiga/taiga-events
cmd = /usr/bin/coffee
args = index.coffee
uid = taiga
numprocesses = 1
autostart = true
send_hup = true
stdout_stream.class = FileStream
stdout_stream.filename = /home/taiga/logs/taigaevents.stdout.log
stdout_stream.max_bytes = 10485760
stdout_stream.backup_count = 12
stderr_stream.class = FileStream
stderr_stream.filename = /home/taiga/logs/taigaevents.stderr.log
stderr_stream.max_bytes = 10485760
stderr_stream.backup_count = 12



Thanks for your support

Stefano"
670,taigaio,taiga-back,3,closed,1058,1,https://api.github.com/repos/taigaio/taiga-back/issues/1058/comments,https://github.com/taigaio/taiga-back/issues/1058,[],Error deleting a project from taiga,"What is the current behavior?

After adding the project wanted to delete it, the front-end gives an error. 

If the current behavior is a bug, please provide the steps to reproduce?

1. Add a new project.
2. Go to project details.
3. Click on gear icon (admin)
4. Select Delete this project
5. Confirm in next screen

What is the expected behavior?
Project should be deleted with success message.

Is it happening in taiga.io or in your own instance?
Yes

What browser/version are you using?
Firefox 57.0.4

*Are there any console errors *(Ctrl + F12)* in red?
Yes

Below is the log:

ERROR:2018-01-12 03:07:30,750: Internal Server Error: /api/v1/projects/15
Traceback (most recent call last):
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/utils/functional.py"", line 36, in __call__
    return self.__value__
AttributeError: 'ChannelPromise' object has no attribute '__value__'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 494, in _ensured
    return fun(*args, **kwargs)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/messaging.py"", line 187, in _publish
    channel = self.channel
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/messaging.py"", line 209, in _get_channel
    channel = self._channel = channel()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/utils/functional.py"", line 38, in __call__
    value = self.__value__ = self.__contract__()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/messaging.py"", line 224, in <lambda>
    channel = ChannelPromise(lambda: connection.default_channel)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 819, in default_channel
    self.connection
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 802, in connection
    self._connection = self._establish_connection()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 757, in _establish_connection
    conn = self.transport.establish_connection()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/transport/pyamqp.py"", line 130, in establish_connection
    conn.connect()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/connection.py"", line 294, in connect
    self.transport.connect()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 120, in connect
    self._connect(self.host, self.port, self.connect_timeout)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 161, in _connect
    self.sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 414, in _reraise_as_library_errors
    yield
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 515, in _ensured
    reraise_as_library_errors=False,
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 405, in ensure_connection
    callback)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/utils/functional.py"", line 333, in retry_over_time
    return fun(*args, **kwargs)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 261, in connect
    return self.connection
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 802, in connection
    self._connection = self._establish_connection()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 757, in _establish_connection
    conn = self.transport.establish_connection()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/transport/pyamqp.py"", line 130, in establish_connection
    conn.connect()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/connection.py"", line 294, in connect
    self.transport.connect()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 120, in connect
    self._connect(self.host, self.port, self.connect_timeout)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 161, in _connect
    self.sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/rokapm/projects/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/rokapm/projects/taiga-back/taiga/base/api/views.py"", line 461, in dispatch
    response = self.handle_exception(exc)
  File ""/home/rokapm/projects/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/rokapm/projects/taiga-back/taiga/projects/api.py"", line 481, in destroy
    self.pre_delete(obj)
  File ""/home/rokapm/projects/taiga-back/taiga/projects/history/mixins.py"", line 83, in pre_delete
    self.persist_history_snapshot(obj, delete=True)
  File ""/home/rokapm/projects/taiga-back/taiga/projects/history/mixins.py"", line 75, in persist_history_snapshot
    self.__last_history = take_snapshot(sobj, comment=comment, user=user, delete=delete)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/transaction.py"", line 267, in __exit__
    connection.set_autocommit(True)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 396, in set_autocommit
    self.run_and_clear_commit_hooks()
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 624, in run_and_clear_commit_hooks
    func()
  File ""/home/rokapm/projects/taiga-back/taiga/timeline/signals.py"", line 47, in <lambda>
    refresh_totals=refresh_totals))
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/celery/app/task.py"", line 412, in delay
    return self.apply_async(args, kwargs)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/celery/app/task.py"", line 535, in apply_async
    **options
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/celery/app/base.py"", line 737, in send_task
    amqp.send_task_message(P, name, message, **options)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/celery/app/amqp.py"", line 558, in send_task_message
    **properties
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/messaging.py"", line 181, in publish
    exchange_name, declare,
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 527, in _ensured
    errback and errback(exc, 0)
  File ""/usr/lib/python3.5/contextlib.py"", line 77, in __exit__
    self.gen.throw(type, value, traceback)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 419, in _reraise_as_library_errors
    sys.exc_info()[2])
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/vine/five.py"", line 175, in reraise
    raise value.with_traceback(tb)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 414, in _reraise_as_library_errors
    yield
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 515, in _ensured
    reraise_as_library_errors=False,
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 405, in ensure_connection
    callback)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/utils/functional.py"", line 333, in retry_over_time
    return fun(*args, **kwargs)
  File ""/home/rokapm/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 261, in connect
    return self.connection
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 802, in connection
    self._connection = self._establish_connection()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/connection.py"", line 757, in _establish_connection
    conn = self.transport.establish_connection()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/kombu/transport/pyamqp.py"", line 130, in establish_connection
    conn.connect()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/connection.py"", line 294, in connect
    self.transport.connect()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 120, in connect
    self._connect(self.host, self.port, self.connect_timeout)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/amqp/transport.py"", line 161, in _connect
    self.sock.connect(sa)
kombu.exceptions.OperationalError: [Errno 111] Connection refused"
678,taigaio,taiga-back,4,closed,1034,3,https://api.github.com/repos/taigaio/taiga-back/issues/1034/comments,https://github.com/taigaio/taiga-back/issues/1034,[],Creatting unassigned tasks returns 500 Internal server error,"**Do you want to request a *feature* or report a *bug*?**

bug

**What is the current behavior?**

When we create unassigned task in taskboard view, API returns 500 internal server error.
However, there is the task after browser page refresh.

**If the current behavior is a bug, please provide the steps to reproduce.**

1. (taiga version up from 2.x to 3.x?)
1. Configure webhook
1. Create Project
1. Create Sprint
1. Go Taskboard
1. Create Unassigned task

**What is the expected behavior?**

API return 20X.

**Is it happening in taiga.io or in your own instance?**

own instance

**What browser/version are you using?**

Chrome  61.0.3163.100（Official Build） （64 bit）

**Are there any console errors *(Ctrl + F12)* in red?**

yes, 500 Internal server error

**Additional Information**

taiga-back error log in /home/ubuntu/logs/gunicorn.stderr.log

```
ERROR:2017-10-13 10:31:53,900: Internal Server Error: /api/v1/tasks/14801
Traceback (most recent call last):
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/ubuntu/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/ubuntu/taiga-back/taiga/base/api/views.py"", line 461, in dispatch
    response = self.handle_exception(exc)
  File ""/home/ubuntu/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/ubuntu/taiga-back/taiga/base/api/mixins.py"", line 207, in partial_update
    return self.update(request, *args, **kwargs)
  File ""/home/ubuntu/taiga-back/taiga/projects/tasks/api.py"", line 203, in update
    return super().update(request, *args, **kwargs)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/transaction.py"", line 267, in __exit__
    connection.set_autocommit(True)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 396, in set_autocommit
    self.run_and_clear_commit_hooks()
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 624, in run_and_clear_commit_hooks
    func()
  File ""/home/ubuntu/taiga-back/taiga/webhooks/signal_handlers.py"", line 75, in <lambda>
    connection.on_commit(lambda: _execute_task(task, webhooks_args))
  File ""/home/ubuntu/taiga-back/taiga/webhooks/signal_handlers.py"", line 84, in _execute_task
    task(*webhook_args)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/celery/local.py"", line 191, in __call__
    return self._get_current_object()(*a, **kw)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/celery/app/task.py"", line 379, in __call__
    return self.run(*args, **kwargs)
  File ""/home/ubuntu/taiga-back/taiga/webhooks/tasks.py"", line 142, in change_webhook
    data['data'] = _serialize(obj)
  File ""/home/ubuntu/taiga-back/taiga/webhooks/tasks.py"", line 47, in _serialize
    return TaskSerializer(obj).data
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 134, in data
    self._data = self.to_value(self.instance)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 124, in to_value
    return self._serialize(instance, fields)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 114, in _serialize
    result = to_value(result)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 124, in to_value
    return self._serialize(instance, fields)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.5/site-packages/serpy/serializer.py"", line 107, in _serialize
    result = getter(self, instance)
  File ""/home/ubuntu/taiga-back/taiga/webhooks/serializers.py"", line 165, in get_custom_attributes_values
    values = obj.custom_attributes_values.attributes_values
AttributeError: 'NoneType' object has no attribute 'custom_attributes_values'
```"
688,taigaio,taiga-back,4,closed,1007,4,https://api.github.com/repos/taigaio/taiga-back/issues/1007/comments,https://github.com/taigaio/taiga-back/issues/1007,[],psycopg2.ProgrammingError: permission denied for relation projects_project,"After following all the installation steps from https://taigaio.github.io/taiga-doc/dist/setup-production.html and opening localhost on the web browser, I get problems with the frontend content display, along with the following errors within /home/kais/.taiga/logs/gunicorn.stderr.log:

> Internal Server Error: /api/v1/stats/discover
> Traceback (most recent call last):
>   File ""/home/kais/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
>     return self.cursor.execute(sql, params)
> psycopg2.ProgrammingError: permission denied for relation projects_project"
701,taigaio,taiga-back,4,closed,984,1,https://api.github.com/repos/taigaio/taiga-back/issues/984/comments,https://github.com/taigaio/taiga-back/issues/984,[],how to import taiga db of 3.0 when clean install 3.1,"now I use 3.0, and clean install 3.1, when import postgres db of 3.0, 
run ：
```
python manage.py loaddata initial_project_templates --traceback
```
it report error:

```
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: column ""tags"" of relation ""projects_projecttemplate"" does not exist
LINE 1: UPDATE ""projects_projecttemplate"" SET ""tags"" = '{}', ""tags_c...
                                              ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/commands/loaddata.py"", line 64, in handle
    self.loaddata(fixture_labels)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/commands/loaddata.py"", line 104, in loaddata
    self.load_label(fixture_label)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/commands/loaddata.py"", line 167, in load_label
    obj.save(using=self.using)
  File ""/usr/local/lib/python3.4/site-packages/django/core/serializers/base.py"", line 201, in save
    models.Model.save_base(self.object, using=using, raw=True, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 824, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 889, in _save_table
    forced_update)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 939, in _do_update
    return filtered._update(values) > 0
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/query.py"", line 654, in _update
    return query.get_compiler(self.db).execute_sql(CURSOR)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/sql/compiler.py"", line 1148, in execute_sql
    cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/sql/compiler.py"", line 835, in execute_sql
    cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/usr/local/lib/python3.4/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: Problem installing fixture '/usr/local/taiga/taiga-back/taiga/projects/fixtures/initial_project_templates.json': Could not load projects.ProjectTemplate(pk=1): column ""tags"" of relation ""projects_projecttemplate"" does not exist
LINE 1: UPDATE ""projects_projecttemplate"" SET ""tags"" = '{}', ""tags_c...
                                              ^
```

so, how to upgrade db from 3.0 to 3.1"
703,taigaio,taiga-back,4,closed,982,1,https://api.github.com/repos/taigaio/taiga-back/issues/982/comments,https://github.com/taigaio/taiga-back/issues/982,[],Internal Server Error: /api/v1/gitlab-hook,"
Hello everybody!
When I try test hook with gitlab, print this error in gunicorn.stdeer.log:

`ERROR:2017-04-11 14:41:25,372: Internal Server Error: /api/v1/gitlab-hook
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 461, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/hooks/api.py"", line 79, in create
    event_hook.process_event()
  File ""/home/taiga/taiga-back/taiga/hooks/event_hooks.py"", line 264, in process_event
    user=self.get_user(commit['user_id'], self.platform_slug))
  File ""/home/taiga/taiga-back/taiga/hooks/event_hooks.py"", line 55, in get_user
    user = get_user_model().objects.get(is_system=True, username__startswith=platform)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/manager.py"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/query.py"", line 385, in get
    self.model._meta.object_name
taiga.users.models.DoesNotExist: User matching query does not exist.
`
What's the problem?"
704,taigaio,taiga-back,4,closed,981,7,https://api.github.com/repos/taigaio/taiga-back/issues/981/comments,https://github.com/taigaio/taiga-back/issues/981,[],problem with Celery ubuntu 16.04,"I have 3 errors in trying to install Taiga backend 3, following all the instuctions you write here:
http://taigaio.github.io/taiga-doc/dist/setup-production.html
Some hours spent for nothing...
Hoping the software is better.
I'm thinking to change it before testing....
Paradox : Taiga would help an organization to coding better .... 
But leave my frustration this is my last error output when i send the command:

python manage.py migrate --noinput

Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 341, in execute
    django.setup()
  File ""/usr/local/lib/python2.7/dist-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/config.py"", line 116, in create
    mod = import_module(mod_path)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/pierluigi/taiga-back/taiga/__init__.py"", line 19, in <module>
    from . import celery
  File ""/home/pierluigi/taiga-back/taiga/celery.py"", line 21, in <module>
    from celery import Celery
ImportError: cannot import name Celery

If there are so many problems with python versions why don't make a virtual machine where everything works fine? Or make a .deb package with a ppa

I know that could be a virtualenv problem but I didn't found any instuction about using it ..."
706,taigaio,taiga-back,4,closed,975,2,https://api.github.com/repos/taigaio/taiga-back/issues/975/comments,https://github.com/taigaio/taiga-back/issues/975,[],Cannot create any new project,"Hi,

After upgrading to 3.1, I cannot create any new project:

```
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 461, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 100, in create
    self.object = validator.save(force_insert=True)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1115, in save
    self.object = super().save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 648, in save
    self.save_object(self.object, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1133, in save_object
    obj.save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 299, in save
    super().save(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 796, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 833, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 191, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 65, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 1092, in apply_to_project
    for ca in self.epic_custom_attributes:
TypeError: 'NoneType' object is not iterable
```

Thanks for this GREAT app!"
708,taigaio,taiga-back,4,closed,973,4,https://api.github.com/repos/taigaio/taiga-back/issues/973/comments,https://github.com/taigaio/taiga-back/issues/973,[],Unable to create new projects,"**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.

**Do you want to request a *feature* or report a *bug*?**
Help solving a problem

**What is the current behavior?**
I try to create a new project and the ""Create Project"" button grays out with a spinning ring - forever. However, in the `/admin/` under projects, a new project is created, but is not visible to me in the UI and has no owner.

**If the current behavior is a bug, please provide the steps to reproduce.**

**What is the expected behavior?**
A new project gets created

**Is it happening in taiga.io or in your own instance?**
Own instance

**What browser/version are you using?**
Latest chrome

**Are there any console errors *(Ctrl + F12)* in red?**
Yes. 500 Error on `/api/v1/projects`
Thanks for reporting!

`gunicorn.stderr.log`
```
taiga@ratnavali:~/logs$ cat gunicorn.stderr.log
[2017-04-01 23:49:29 -0500] [8034] [INFO] Starting gunicorn 19.6.0
[2017-04-01 23:49:29 -0500] [8034] [INFO] Listening at: http://127.0.0.1:8001 (8034)
[2017-04-01 23:49:29 -0500] [8034] [INFO] Using worker: sync
[2017-04-01 23:49:29 -0500] [8037] [INFO] Booting worker with pid: 8037
[2017-04-01 23:49:29 -0500] [8039] [INFO] Booting worker with pid: 8039
[2017-04-01 23:49:29 -0500] [8041] [INFO] Booting worker with pid: 8041
Trying import local.py settings...
ERROR:2017-04-02 04:56:06,763: Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 461, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 458, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 100, in create
    self.object = validator.save(force_insert=True)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1115, in save
    self.object = super().save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 648, in save
    self.save_object(self.object, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1133, in save_object
    obj.save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 299, in save
    super().save(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 796, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/models/base.py"", line 833, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/dispatch/dispatcher.py"", line 191, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 65, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 978, in apply_to_project
    for epic_status in self.epic_statuses:
TypeError: 'NoneType' object is not iterable

```
"
722,taigaio,taiga-back,4,closed,950,1,https://api.github.com/repos/taigaio/taiga-back/issues/950/comments,https://github.com/taigaio/taiga-back/issues/950,[],How to downgrade database ?,"**Do you want to request a *feature* or report a *bug*?**

Report a *bug*.

**What is the current behavior?**

I was mistakenly using master branch in taiga-backend (as one reported in #913).
So, I switched to stable branch.

After some days, I discovered that I can't create new project anymore.

I unsuccessfully tried to  downgrade database using django command:

```sh
./manage.py migrate projects zero
Trying import local.py settings...
Operations to perform:
  Unapply all migrations: projects
Running migrations:
  Rendering model states... DONE
  Unapplying userstories.0014_auto_20160928_0540...Raven is not configured (logging is disabled). Please see the documentation for more information.
Traceback (most recent call last):
  File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
psycopg2.DataError: integer out of range

```

So, how can I downgrade database without loosing users datas?


**If the current behavior is a bug, please provide the steps to reproduce.**

1. From personal dashboard, Projects > Create Project.
2. Fill in needed Informations
3. Validate

-> Nothing Happens

**What is the expected behavior?**

New Project form should close and bring you to your new project .


**Is it happening in taiga.io or in your own instance?**
My Own.

**What browser/version are you using?**

Chromium Version 58.0.3028.0 / Windows 7

**Are there any console errors *(Ctrl + F12)* in red?**

_Console error:_
> POST http://my-taiga-instance/api/v1/projects 500 (Internal Server Error)

_Request Payload:_
```js
{""is_private"":false,""creation_template"":1,""name"":""test"",""description"":""test""}
```
_Server log:_
> [...]
>   File ""/usr/local/lib/python3.5/site-packages/django/utils/six.py"", line 685, in reraise
>     raise value.with_traceback(tb)
>   File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
>     return self.cursor.execute(sql, params)
> django.db.utils.IntegrityError: null value in column ""is_contact_activated"" violates not-null constraint
"
723,taigaio,taiga-back,4,closed,948,6,https://api.github.com/repos/taigaio/taiga-back/issues/948/comments,https://github.com/taigaio/taiga-back/issues/948,[],Project export not generated on local instance,"Hi there :)

I'm having trouble exporting my project from a private instance.

Taiga set up to work asynchronously, no error in Chrome's console, neither in the logs except this one: 
```
==> ../logs/gunicorn.stderr.log <==
ERROR	Property: Invalid value for ""CSS Level 2.1"" property: 0.8rem 3rem [1:138: padding]
```

I get the mail saying my export is ready, but the link results in a 404.
When I go to the taiga-back/media/exports/1, no JSON file is present. It's empty :(

My local.py:

```
from .development import *

#########################################
## GENERIC
#########################################

DEBUG = True
TEMPLATE_DEBUG = False

#ADMINS = (
#    (""Admin"", ""example@example.com""),
#)

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'taiga',
        'USER': 'taiga',
        'PASSWORD': 'XXXXX',
        'HOST': '',
        'PORT': '',
    }
}

SITES = {
    ""api"": {
       ""scheme"": ""http"",
       ""domain"": ""localhost:8000"",
       ""name"": ""api""
    },
    ""front"": {
       ""scheme"": ""https"",
       ""domain"": ""taiga.XXXX.com"",
       ""name"": ""front""
    },
}

SECRET_KEY=""XXXXXX""

#SITE_ID = ""api""

MEDIA_ROOT = '/opt/taiga/taiga-back/media'
STATIC_ROOT = '/opt/taiga/taiga-back/static'

MEDIA_URL = ""https://taiga.XXXX.com/media/""
STATIC_URL = ""https://taiga.XXXX.com/static/""
ADMIN_MEDIA_PREFIX = ""https://taiga.XXX.com/static/admin/""


#########################################
## THROTTLING
#########################################

#REST_FRAMEWORK[""DEFAULT_THROTTLE_RATES""] = {
#    ""anon"": ""20/min"",
#    ""user"": ""200/min"",
#    ""import-mode"": ""20/sec"",
#    ""import-dump-mode"": ""1/minute""
#}


#########################################
## MAIL SYSTEM SETTINGS
#########################################

DEFAULT_FROM_EMAIL = ""taiga@XXXXXX.com""
#CHANGE_NOTIFICATIONS_MIN_INTERVAL = 300 #seconds
SERVER_EMAIL = DEFAULT_FROM_EMAIL

# EMAIL SETTINGS EXAMPLE
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_USE_TLS = False
#EMAIL_HOST = 'localhost'
#EMAIL_PORT = 25
#EMAIL_HOST_USER = 'user'
#EMAIL_HOST_PASSWORD = 'password'

# GMAIL SETTINGS EXAMPLE
#EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
#EMAIL_USE_TLS = True
#EMAIL_HOST = 'smtp.gmail.com'
#EMAIL_PORT = 587
#EMAIL_HOST_USER = 'youremail@gmail.com'
#EMAIL_HOST_PASSWORD = 'yourpassword'


#########################################
## REGISTRATION
#########################################

PUBLIC_REGISTER_ENABLED = False

# LIMIT ALLOWED DOMAINS FOR REGISTER AND INVITE
# None or [] values in USER_EMAIL_ALLOWED_DOMAINS means allow any domain
#USER_EMAIL_ALLOWED_DOMAINS = None

# PUCLIC OR PRIVATE NUMBER OF PROJECT PER USER
MAX_PRIVATE_PROJECTS_PER_USER = None # None == no limit
MAX_PUBLIC_PROJECTS_PER_USER = None # None == no limit
MAX_MEMBERSHIPS_PRIVATE_PROJECTS = None # None == no limit
MAX_MEMBERSHIPS_PUBLIC_PROJECTS = None # None == no limit

# GITHUB SETTINGS
#GITHUB_URL = ""https://github.com/""
#GITHUB_API_URL = ""https://api.github.com/""
#GITHUB_API_CLIENT_ID = ""yourgithubclientid""
#GITHUB_API_CLIENT_SECRET = ""yourgithubclientsecret""


#########################################
## SITEMAP
#########################################

# If is True /front/sitemap.xml show a valid sitemap of taiga-front client
#FRONT_SITEMAP_ENABLED = False
#FRONT_SITEMAP_CACHE_TIMEOUT = 24*60*60  # In second


#########################################
## FEEDBACK
#########################################

# Note: See config in taiga-front too
FEEDBACK_ENABLED = True
FEEDBACK_EMAIL = ""taiga-support@XXXXX.com""


#########################################
## STATS
#########################################

#STATS_ENABLED = False
#FRONT_SITEMAP_CACHE_TIMEOUT = 60*60  # In second


#########################################
## CELERY
#########################################

from .celery import *
CELERY_ENABLED = True
BROKER_URL = 'amqp://guest:guest@localhost:5672//'
CELERY_RESULT_BACKEND = 'redis://localhost:6379/0'
# To use celery in memory
CELERY_ALWAYS_EAGER = True

EVENTS_PUSH_BACKEND = ""taiga.events.backends.rabbitmq.EventsPushBackend""
EVENTS_PUSH_BACKEND_OPTIONS = {""url"": ""amqp://XXXXXXX@localhost:5672/taiga""}

#########################################
## INSTALLED APPS
#########################################
INSTALLED_APPS += [""taiga_contrib_slack""]
```

Thanks in advance for any clue in order to resolve this one.
And thanks a lot for this great app. I've been using Taiga for 2 years and I still enjoy it a lot ;)"
738,taigaio,taiga-back,4,closed,927,5,https://api.github.com/repos/taigaio/taiga-back/issues/927/comments,https://github.com/taigaio/taiga-back/issues/927,[],Role does not exist during backend installation,"Followed the installation procedure [here](https://taigaio.github.io/taiga-doc/dist/setup-production.html), on the **Populate the database with initial basic data**, I encountered the _role does not exist error_:

```
(taiga) dqlopez@ubuntu:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
Trying import development.py settings...
Raven is not configured (logging is disabled). Please see the documentation for more information.
Traceback (most recent call last):
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 199, in ensure_connection
    self.connect()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 171, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/postgresql/base.py"", line 175, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/psycopg2/__init__.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: FATAL:  role ""dqlopez"" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 89, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 20, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/migrations/loader.py"", line 49, in __init__
    self.build_graph()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/migrations/loader.py"", line 176, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/migrations/recorder.py"", line 65, in applied_migrations
    self.ensure_schema()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/migrations/recorder.py"", line 52, in ensure_schema
    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 231, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 204, in _cursor
    self.ensure_connection()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 199, in ensure_connection
    self.connect()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/utils.py"", line 95, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 199, in ensure_connection
    self.connect()
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 171, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/postgresql/base.py"", line 175, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/dqlopez/.virtualenvs/taiga/lib/python3.5/site-packages/psycopg2/__init__.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
django.db.utils.OperationalError: FATAL:  role ""dqlopez"" does not exist
```

Am I right that this is Postgres related issue? If thus what is the recommended approach to resolve this?
"
739,taigaio,taiga-back,4,closed,926,1,https://api.github.com/repos/taigaio/taiga-back/issues/926/comments,https://github.com/taigaio/taiga-back/issues/926,[],"Can't add members: ""No default throttle rate set for 'create-memberships' scope""","I have set up Taiga on my own server, following the ""Taiga: Setup production environment"" instructions.

When I try to add members to a project using ADMIN > MEMBERS > NEW MEMBER, I fill out the form, hit the ""CREATE"" button, and nothing happens - the form stays up, no invitation email is sent, and no users are added to the project.  This is the case whether the email address I enter in the form is associated with an existing user or not.

I get the following error in gunicorn.stderr.log:

```
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2017-01-27 04:29:46,405: Internal Server Error: /api/v1/memberships
Traceback (most recent call last):
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 118, in get_rate
    return self.THROTTLE_RATES[self.scope]
KeyError: 'create-memberships'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 446, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 434, in dispatch
    self.initial(request, *args, **kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 367, in initial
    self.check_throttles(request)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 341, in check_throttles
    for throttle in self.get_throttles():
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 289, in get_throttles
    return [throttle() for throttle in self.throttle_classes]
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 289, in <listcomp>
    return [throttle() for throttle in self.throttle_classes]
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 96, in __init__
    self.rate = self.get_rate()
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 121, in get_rate
    raise ImproperlyConfigured(msg)
django.core.exceptions.ImproperlyConfigured: No default throttle rate set for ""create-memberships"" scope
Trying import local.py settings...
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2017-01-27 04:29:56,658: Internal Server Error: /api/v1/memberships/bulk_create
Traceback (most recent call last):
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 118, in get_rate
    return self.THROTTLE_RATES[self.scope]
KeyError: 'create-memberships'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 446, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 434, in dispatch
    self.initial(request, *args, **kwargs)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 367, in initial
    self.check_throttles(request)
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 341, in check_throttles
    for throttle in self.get_throttles():
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 289, in get_throttles
    return [throttle() for throttle in self.throttle_classes]
  File ""/home/taiga/production/taiga-back/taiga/base/api/views.py"", line 289, in <listcomp>
    return [throttle() for throttle in self.throttle_classes]
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 96, in __init__
    self.rate = self.get_rate()
  File ""/home/taiga/production/taiga-back/taiga/base/api/throttling.py"", line 121, in get_rate
    raise ImproperlyConfigured(msg)
django.core.exceptions.ImproperlyConfigured: No default throttle rate set for ""create-memberships"" scope
```

Anyone have any hints as to what might be going wrong?"
743,taigaio,taiga-back,4,closed,915,3,https://api.github.com/repos/taigaio/taiga-back/issues/915/comments,https://github.com/taigaio/taiga-back/issues/915,[],Unable to add members to project,"Hello

I'ld like to add some members in a project, on our test taiga just installed yesterday. When I clic on the ""Create"" button there's no visible reaction. 
Looking at my firefox 50.0 dev tools, got a `ConnectionRefusedError at /api/v1/memberships/bulk_create`.
Everything else seems to work. Same issue with default admin / 123123 or another user.

Server's a Ubuntu 16.04.1 LTS
taiga-back is commit fd61756a2ba6fdf80749ea0cb06f51e3ec0ee5e4
taiga-front-dist is commit 195526d6d3f9e8bee50ebffc0471629b4249c7b4
taiga-events is commit f5864ef78e9af7962971339be32aae98aef41c7b
Using local postgresql 9.5 and circus 0.14.0

Here's the full debug response to bulk create post

```
<!DOCTYPE html>
<html lang=""en"">
<head>
  <meta http-equiv=""content-type"" content=""text/html; charset=utf-8"">
  <meta name=""robots"" content=""NONE,NOARCHIVE"">
  <title>ConnectionRefusedError at /api/v1/memberships/bulk_create</title>
  <style type=""text/css"">
    html * { padding:0; margin:0; }
    body * { padding:10px 20px; }
    body * * { padding:0; }
    body { font:small sans-serif; }
    body>div { border-bottom:1px solid #ddd; }
    h1 { font-weight:normal; }
    h2 { margin-bottom:.8em; }
    h2 span { font-size:80%; color:#666; font-weight:normal; }
    h3 { margin:1em 0 .5em 0; }
    h4 { margin:0 0 .5em 0; font-weight: normal; }
    code, pre { font-size: 100%; white-space: pre-wrap; }
    table { border:1px solid #ccc; border-collapse: collapse; width:100%; background:white; }
    tbody td, tbody th { vertical-align:top; padding:2px 3px; }
    thead th {
      padding:1px 6px 1px 3px; background:#fefefe; text-align:left;
      font-weight:normal; font-size:11px; border:1px solid #ddd;
    }
    tbody th { width:12em; text-align:right; color:#666; padding-right:.5em; }
    table.vars { margin:5px 0 2px 40px; }
    table.vars td, table.req td { font-family:monospace; }
    table td.code { width:100%; }
    table td.code pre { overflow:hidden; }
    table.source th { color:#666; }
    table.source td { font-family:monospace; white-space:pre; border-bottom:1px solid #eee; }
    ul.traceback { list-style-type:none; color: #222; }
    ul.traceback li.frame { padding-bottom:1em; color:#666; }
    ul.traceback li.user { background-color:#e0e0e0; color:#000 }
    div.context { padding:10px 0; overflow:hidden; }
    div.context ol { padding-left:30px; margin:0 10px; list-style-position: inside; }
    div.context ol li { font-family:monospace; white-space:pre; color:#777; cursor:pointer; padding-left: 2px; }
    div.context ol li pre { display:inline; }
    div.context ol.context-line li { color:#505050; background-color:#dfdfdf; padding: 3px 2px; }
    div.context ol.context-line li span { position:absolute; right:32px; }
    .user div.context ol.context-line li { background-color:#bbb; color:#000; }
    .user div.context ol li { color:#666; }
    div.commands { margin-left: 40px; }
    div.commands a { color:#555; text-decoration:none; }
    .user div.commands a { color: black; }
    #summary { background: #ffc; }
    #summary h2 { font-weight: normal; color: #666; }
    #explanation { background:#eee; }
    #template, #template-not-exist { background:#f6f6f6; }
    #template-not-exist ul { margin: 0 0 10px 20px; }
    #template-not-exist .postmortem-section { margin-bottom: 3px; }
    #unicode-hint { background:#eee; }
    #traceback { background:#eee; }
    #requestinfo { background:#f6f6f6; padding-left:120px; }
    #summary table { border:none; background:transparent; }
    #requestinfo h2, #requestinfo h3 { position:relative; margin-left:-100px; }
    #requestinfo h3 { margin-bottom:-1em; }
    .error { background: #ffc; }
    .specific { color:#cc3300; font-weight:bold; }
    h2 span.commands { font-size:.7em;}
    span.commands a:link {color:#5E5694;}
    pre.exception_value { font-family: sans-serif; color: #666; font-size: 1.5em; margin: 10px 0 10px 0; }
    .append-bottom { margin-bottom: 10px; }
  </style>
  
  <script type=""text/javascript"">
  //<!--
    function getElementsByClassName(oElm, strTagName, strClassName){
        // Written by Jonathan Snook, http://www.snook.ca/jon; Add-ons by Robert Nyman, http://www.robertnyman.com
        var arrElements = (strTagName == ""*"" && document.all)? document.all :
        oElm.getElementsByTagName(strTagName);
        var arrReturnElements = new Array();
        strClassName = strClassName.replace(/\-/g, ""\-"");
        var oRegExp = new RegExp(""(^|\s)"" + strClassName + ""(\s|$)"");
        var oElement;
        for(var i=0; i<arrElements.length; i++){
            oElement = arrElements[i];
            if(oRegExp.test(oElement.className)){
                arrReturnElements.push(oElement);
            }
        }
        return (arrReturnElements)
    }
    function hideAll(elems) {
      for (var e = 0; e < elems.length; e++) {
        elems[e].style.display = 'none';
      }
    }
    window.onload = function() {
      hideAll(getElementsByClassName(document, 'table', 'vars'));
      hideAll(getElementsByClassName(document, 'ol', 'pre-context'));
      hideAll(getElementsByClassName(document, 'ol', 'post-context'));
      hideAll(getElementsByClassName(document, 'div', 'pastebin'));
    }
    function toggle() {
      for (var i = 0; i < arguments.length; i++) {
        var e = document.getElementById(arguments[i]);
        if (e) {
          e.style.display = e.style.display == 'none' ? 'block': 'none';
        }
      }
      return false;
    }
    function varToggle(link, id) {
      toggle('v' + id);
      var s = link.getElementsByTagName('span')[0];
      var uarr = String.fromCharCode(0x25b6);
      var darr = String.fromCharCode(0x25bc);
      s.innerHTML = s.innerHTML == uarr ? darr : uarr;
      return false;
    }
    function switchPastebinFriendly(link) {
      s1 = ""Switch to copy-and-paste view"";
      s2 = ""Switch back to interactive view"";
      link.innerHTML = link.innerHTML.trim() == s1 ? s2: s1;
      toggle('browserTraceback', 'pastebinTraceback');
      return false;
    }
    //-->
  </script>
  
</head>
<body>
<div id=""summary"">
  <h1>ConnectionRefusedError at /api/v1/memberships/bulk_create</h1>
  <pre class=""exception_value"">[Errno 111] Connection refused</pre>
  <table class=""meta"">

    <tr>
      <th>Request Method:</th>
      <td>POST</td>
    </tr>
    <tr>
      <th>Request URL:</th>
      <td>http://qualif.taiga.adventiel.com/api/v1/memberships/bulk_create</td>
    </tr>

    <tr>
      <th>Django Version:</th>
      <td>1.9.2</td>
    </tr>

    <tr>
      <th>Exception Type:</th>
      <td>ConnectionRefusedError</td>
    </tr>


    <tr>
      <th>Exception Value:</th>
      <td><pre>[Errno 111] Connection refused</pre></td>
    </tr>


    <tr>
      <th>Exception Location:</th>
      <td>/usr/lib/python3.5/socket.py in create_connection, line 702</td>
    </tr>

    <tr>
      <th>Python Executable:</th>
      <td>/home/taiga/.virtualenvs/taiga/bin/python3.5</td>
    </tr>
    <tr>
      <th>Python Version:</th>
      <td>3.5.2</td>
    </tr>
    <tr>
      <th>Python Path:</th>
      <td><pre>[&#39;/home/taiga/taiga-back&#39;,
 &#39;/home/taiga/taiga-back&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/bin&#39;,
 &#39;/usr/lib64/python3.5/site-packages&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/lib/python35.zip&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/lib/python3.5&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/lib/python3.5/plat-x86_64-linux-gnu&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/lib/python3.5/lib-dynload&#39;,
 &#39;/usr/lib/python3.5&#39;,
 &#39;/usr/lib/python3.5/plat-x86_64-linux-gnu&#39;,
 &#39;/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages&#39;,
 &#39;/home/taiga/taiga-back&#39;]</pre></td>
    </tr>
    <tr>
      <th>Server time:</th>
      <td>mer, 11 Jan 2017 09:23:01 +0000</td>
    </tr>
  </table>
</div>




<div id=""traceback"">
  <h2>Traceback <span class=""commands""><a href=""#"" onclick=""return switchPastebinFriendly(this);"">
    Switch to copy-and-paste view</a></span>
  </h2>
  
  <div id=""browserTraceback"">
    <ul class=""traceback"">
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py</code> in <code>get_response</code>

          
            <div class=""context"" id=""c140285358473096"">
              
                <ol start=""142"" class=""pre-context"" id=""pre140285358473096"">
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                        break</pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>            if response is None:</pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                wrapped_callback = self.make_view_atomic(callback)</pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                try:</pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                    response = wrapped_callback(request, *callback_args, **callback_kwargs)</pre></li>
                
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                except Exception as e:</pre></li>
                
                </ol>
              
              <ol start=""149"" class=""context-line"">
                <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>
                    response = self.process_exception_by_middleware(e, request)</pre> <span>...</span></li></ol>
              
                <ol start='150' class=""post-context"" id=""post140285358473096"">
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>            # Complain if the view returned None (a common error).</pre></li>
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>            if response is None:</pre></li>
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                if isinstance(callback, types.FunctionType):    # FBV</pre></li>
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                    view_name = callback.__name__</pre></li>
                  
                  <li onclick=""toggle('pre140285358473096', 'post140285358473096')""><pre>                else:                                           # CBV</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358473096')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358473096"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>resolver_match</td>
                    <td class=""code""><pre>ResolverMatch(func=taiga.projects.api.MembershipViewSet, args=(), kwargs={}, url_name=memberships-bulk-create, app_names=[], namespaces=[])</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback_args</td>
                    <td class=""code""><pre>()</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback</td>
                    <td class=""code""><pre>&lt;function MembershipViewSet at 0x7f96bbb55158&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>middleware_method</td>
                    <td class=""code""><pre>&lt;bound method MessageMiddleware.process_request of &lt;django.contrib.messages.middleware.MessageMiddleware object at 0x7f96bba62128&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>response</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>urlconf</td>
                    <td class=""code""><pre>&#39;taiga.urls&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.core.handlers.wsgi.WSGIHandler object at 0x7f96bba56588&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>resolver</td>
                    <td class=""code""><pre>&lt;RegexURLResolver &#39;taiga.urls&#39; (None:None) ^/&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>response_is_rendered</td>
                    <td class=""code""><pre>False</pre></td>
                  </tr>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;WSGIRequest: POST &#39;/api/v1/memberships/bulk_create&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback_kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
                  <tr>
                    <td>wrapped_callback</td>
                    <td class=""code""><pre>&lt;function MembershipViewSet at 0x7f96bbb55158&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py</code> in <code>get_response</code>

          
            <div class=""context"" id=""c140285358472136"">
              
                <ol start=""140"" class=""pre-context"" id=""pre140285358472136"">
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                    response = middleware_method(request, callback, callback_args, callback_kwargs)</pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                    if response:</pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                        break</pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>            if response is None:</pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                wrapped_callback = self.make_view_atomic(callback)</pre></li>
                
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                try:</pre></li>
                
                </ol>
              
              <ol start=""147"" class=""context-line"">
                <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>
                    response = wrapped_callback(request, *callback_args, **callback_kwargs)</pre> <span>...</span></li></ol>
              
                <ol start='148' class=""post-context"" id=""post140285358472136"">
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                except Exception as e:</pre></li>
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                    response = self.process_exception_by_middleware(e, request)</pre></li>
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>            # Complain if the view returned None (a common error).</pre></li>
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>            if response is None:</pre></li>
                  
                  <li onclick=""toggle('pre140285358472136', 'post140285358472136')""><pre>                if isinstance(callback, types.FunctionType):    # FBV</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358472136')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358472136"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>resolver_match</td>
                    <td class=""code""><pre>ResolverMatch(func=taiga.projects.api.MembershipViewSet, args=(), kwargs={}, url_name=memberships-bulk-create, app_names=[], namespaces=[])</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback_args</td>
                    <td class=""code""><pre>()</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback</td>
                    <td class=""code""><pre>&lt;function MembershipViewSet at 0x7f96bbb55158&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>middleware_method</td>
                    <td class=""code""><pre>&lt;bound method MessageMiddleware.process_request of &lt;django.contrib.messages.middleware.MessageMiddleware object at 0x7f96bba62128&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>response</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>urlconf</td>
                    <td class=""code""><pre>&#39;taiga.urls&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.core.handlers.wsgi.WSGIHandler object at 0x7f96bba56588&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>resolver</td>
                    <td class=""code""><pre>&lt;RegexURLResolver &#39;taiga.urls&#39; (None:None) ^/&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>response_is_rendered</td>
                    <td class=""code""><pre>False</pre></td>
                  </tr>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;WSGIRequest: POST &#39;/api/v1/memberships/bulk_create&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback_kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
                  <tr>
                    <td>wrapped_callback</td>
                    <td class=""code""><pre>&lt;function MembershipViewSet at 0x7f96bbb55158&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/base/api/viewsets.py</code> in <code>view</code>

          
            <div class=""context"" id=""c140285358471944"">
              
                <ol start=""99"" class=""pre-context"" id=""pre140285358471944"">
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>                setattr(self, method, handler)</pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>            # Patch this in as it&#39;s otherwise only present from 1.5 onwards</pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>            if hasattr(self, &#39;get&#39;) and not hasattr(self, &#39;head&#39;):</pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>                self.head = self.get</pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>            # And continue as usual</pre></li>
                
                </ol>
              
              <ol start=""106"" class=""context-line"">
                <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>
            return self.dispatch(request, *args, **kwargs)</pre> <span>...</span></li></ol>
              
                <ol start='107' class=""post-context"" id=""post140285358471944"">
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>        # take name and docstring from class</pre></li>
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>        update_wrapper(view, cls, updated=())</pre></li>
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>        # and possible attributes set by decorators</pre></li>
                  
                  <li onclick=""toggle('pre140285358471944', 'post140285358471944')""><pre>        # like csrf_exempt from dispatch</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358471944')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358471944"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;WSGIRequest: POST &#39;/api/v1/memberships/bulk_create&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>initkwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
                  <tr>
                    <td>args</td>
                    <td class=""code""><pre>()</pre></td>
                  </tr>
                
                  <tr>
                    <td>cls</td>
                    <td class=""code""><pre>&lt;class &#39;taiga.projects.api.MembershipViewSet&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>handler</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.bulk_create of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>method</td>
                    <td class=""code""><pre>&#39;post&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>actions</td>
                    <td class=""code""><pre>{&#39;post&#39;: &#39;bulk_create&#39;}</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>action</td>
                    <td class=""code""><pre>&#39;bulk_create&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py</code> in <code>wrapped_view</code>

          
            <div class=""context"" id=""c140285358846408"">
              
                <ol start=""51"" class=""pre-context"" id=""pre140285358846408"">
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    Marks a view function as being exempt from the CSRF view protection.</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    # We could just do view_func.csrf_exempt = True, but decorators</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    # are nicer if they don&#39;t have side-effects, so we return a new</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    # function.</pre></li>
                
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    def wrapped_view(*args, **kwargs):</pre></li>
                
                </ol>
              
              <ol start=""58"" class=""context-line"">
                <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>
        return view_func(*args, **kwargs)</pre> <span>...</span></li></ol>
              
                <ol start='59' class=""post-context"" id=""post140285358846408"">
                  
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    wrapped_view.csrf_exempt = True</pre></li>
                  
                  <li onclick=""toggle('pre140285358846408', 'post140285358846408')""><pre>    return wraps(view_func, assigned=available_attrs(view_func))(wrapped_view)</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358846408')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358846408"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>view_func</td>
                    <td class=""code""><pre>&lt;function APIView.dispatch at 0x7f96c53bf2f0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>args</td>
                    <td class=""code""><pre>(&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;,
 &lt;WSGIRequest: POST &#39;/api/v1/memberships/bulk_create&#39;&gt;)</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/base/api/views.py</code> in <code>dispatch</code>

          
            <div class=""context"" id=""c140285360361032"">
              
                <ol start=""439"" class=""pre-context"" id=""pre140285360361032"">
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>                                  self.http_method_not_allowed)</pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>            else:</pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>                handler = self.http_method_not_allowed</pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>            response = handler(request, *args, **kwargs)</pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>        except Exception as exc:</pre></li>
                
                </ol>
              
              <ol start=""446"" class=""context-line"">
                <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>
            response = self.handle_exception(exc)</pre> <span>...</span></li></ol>
              
                <ol start='447' class=""post-context"" id=""post140285360361032"">
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>        self.response = self.finalize_response(request, response, *args, **kwargs)</pre></li>
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>        return self.response</pre></li>
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>    def options(self, request, *args, **kwargs):</pre></li>
                  
                  <li onclick=""toggle('pre140285360361032', 'post140285360361032')""><pre>        &quot;&quot;&quot;</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360361032')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360361032"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>handler</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.bulk_create of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;taiga.base.api.request.Request object at 0x7f96bb0575f8&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>args</td>
                    <td class=""code""><pre>()</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/base/api/views.py</code> in <code>dispatch</code>

          
            <div class=""context"" id=""c140285360235272"">
              
                <ol start=""436"" class=""pre-context"" id=""pre140285360235272"">
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>            # Get the appropriate handler method</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>            if request.method.lower() in self.http_method_names:</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>                handler = getattr(self, request.method.lower(),</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>                                  self.http_method_not_allowed)</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>            else:</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>                handler = self.http_method_not_allowed</pre></li>
                
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre></pre></li>
                
                </ol>
              
              <ol start=""443"" class=""context-line"">
                <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>
            response = handler(request, *args, **kwargs)</pre> <span>...</span></li></ol>
              
                <ol start='444' class=""post-context"" id=""post140285360235272"">
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>        except Exception as exc:</pre></li>
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>            response = self.handle_exception(exc)</pre></li>
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>        self.response = self.finalize_response(request, response, *args, **kwargs)</pre></li>
                  
                  <li onclick=""toggle('pre140285360235272', 'post140285360235272')""><pre>        return self.response</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360235272')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360235272"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>handler</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.bulk_create of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;taiga.base.api.request.Request object at 0x7f96bb0575f8&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>args</td>
                    <td class=""code""><pre>()</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/projects/api.py</code> in <code>bulk_create</code>

          
            <div class=""context"" id=""c140285360236936"">
              
                <ol start=""719"" class=""pre-context"" id=""pre140285360236936"">
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>        try:</pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>            with advisory_lock(&quot;membership-creation-{}&quot;.format(project.id)):</pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>                members = services.create_members_in_bulk(data[&quot;bulk_memberships&quot;],</pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>                                                          project=project,</pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>                                                          invitation_extra_text=invitation_extra_text,</pre></li>
                
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>                                                          callback=self.post_save,</pre></li>
                
                </ol>
              
              <ol start=""726"" class=""context-line"">
                <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>
                                                          precall=self.pre_save)</pre> <span>...</span></li></ol>
              
                <ol start='727' class=""post-context"" id=""post140285360236936"">
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>        except exc.ValidationError as err:</pre></li>
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>            return response.BadRequest(err.message_dict)</pre></li>
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>        members_serialized = self.admin_serializer_class(members, many=True)</pre></li>
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre>        return response.Ok(members_serialized.data)</pre></li>
                  
                  <li onclick=""toggle('pre140285360236936', 'post140285360236936')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360236936')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360236936"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>project</td>
                    <td class=""code""><pre>&lt;Project 2&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>request</td>
                    <td class=""code""><pre>&lt;taiga.base.api.request.Request object at 0x7f96bb0575f8&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>invitation_extra_text</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>total_new_memberships</td>
                    <td class=""code""><pre>1</pre></td>
                  </tr>
                
                  <tr>
                    <td>validator</td>
                    <td class=""code""><pre>&lt;taiga.projects.validators.MembersBulkValidator object at 0x7f96bb06bf98&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>data</td>
                    <td class=""code""><pre>OrderedDictWithMetadata([(&#39;project_id&#39;, 2),
                         (&#39;bulk_memberships&#39;,
                          [OrderedDictWithMetadata([(&#39;email&#39;,
                                                     &#39;bernard.serandour@adventiel.fr&#39;),
                                                    (&#39;role_id&#39;, 7)])]),
                         (&#39;invitation_extra_text&#39;, None)])</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwargs</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/projects/services/members.py</code> in <code>create_members_in_bulk</code>

          
            <div class=""context"" id=""c140285360235784"">
              
                <ol start=""45"" class=""pre-context"" id=""pre140285360235784"">
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    :param bulk_data: List of dicts `{&quot;project_id&quot;: &lt;&gt;, &quot;role_id&quot;: &lt;&gt;, &quot;email&quot;: &lt;&gt;}`.</pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    :param callback: Callback to execute after each task save.</pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    :param additional_fields: Additional fields when instantiating each task.</pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    :return: List of created `Member` instances.</pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    members = get_members_from_bulk(bulk_data, **additional_fields)</pre></li>
                
                </ol>
              
              <ol start=""52"" class=""context-line"">
                <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>
    db.save_in_bulk(members, callback, precall)</pre> <span>...</span></li></ol>
              
                <ol start='53' class=""post-context"" id=""post140285360235784"">
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    return members</pre></li>
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>def remove_user_from_project(user, project):</pre></li>
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre>    models.Membership.objects.get(project=project, user=user).delete()</pre></li>
                  
                  <li onclick=""toggle('pre140285360235784', 'post140285360235784')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360235784')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360235784"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>additional_fields</td>
                    <td class=""code""><pre>{&#39;invitation_extra_text&#39;: None, &#39;project&#39;: &lt;Project 2&gt;}</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.post_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>precall</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.pre_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>members</td>
                    <td class=""code""><pre>[&lt;Membership: Membership object&gt;]</pre></td>
                  </tr>
                
                  <tr>
                    <td>bulk_data</td>
                    <td class=""code""><pre>[OrderedDictWithMetadata([(&#39;email&#39;, &#39;bernard.serandour@adventiel.fr&#39;),
                          (&#39;role_id&#39;, 7)])]</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/contextlib.py</code> in <code>inner</code>

          
            <div class=""context"" id=""c140285360234952"">
              
                <ol start=""23"" class=""pre-context"" id=""pre140285360234952"">
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>        &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>        return self</pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>    def __call__(self, func):</pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>        @wraps(func)</pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>        def inner(*args, **kwds):</pre></li>
                
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>            with self._recreate_cm():</pre></li>
                
                </ol>
              
              <ol start=""30"" class=""context-line"">
                <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>
                return func(*args, **kwds)</pre> <span>...</span></li></ol>
              
                <ol start='31' class=""post-context"" id=""post140285360234952"">
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>        return inner</pre></li>
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>class _GeneratorContextManager(ContextDecorator):</pre></li>
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre>    &quot;&quot;&quot;Helper for @contextmanager decorator.&quot;&quot;&quot;</pre></li>
                  
                  <li onclick=""toggle('pre140285360234952', 'post140285360234952')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360234952')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360234952"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>func</td>
                    <td class=""code""><pre>&lt;function save_in_bulk at 0x7f96bc6c2a60&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>args</td>
                    <td class=""code""><pre>([&lt;Membership: Membership object&gt;],
 &lt;bound method MembershipViewSet.post_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;,
 &lt;bound method MembershipViewSet.pre_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;)</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.db.transaction.Atomic object at 0x7f96bc6bd550&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>kwds</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/base/utils/db.py</code> in <code>save_in_bulk</code>

          
            <div class=""context"" id=""c140285360237064"">
              
                <ol start=""92"" class=""pre-context"" id=""pre140285360237064"">
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>    for instance in instances:</pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>        created = False</pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>        if instance.pk is None:</pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>            created = True</pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>        precall(instance)</pre></li>
                
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>        instance.save(**save_options)</pre></li>
                
                </ol>
              
              <ol start=""99"" class=""context-line"">
                <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>
        callback(instance, created=created)</pre> <span>...</span></li></ol>
              
                <ol start='100' class=""post-context"" id=""post140285360237064"">
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>    return ret</pre></li>
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>@transaction.atomic</pre></li>
                  
                  <li onclick=""toggle('pre140285360237064', 'post140285360237064')""><pre>def update_in_bulk(instances, list_of_new_values, callback=None, precall=None):</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360237064')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360237064"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>instances</td>
                    <td class=""code""><pre>[&lt;Membership: Membership object&gt;]</pre></td>
                  </tr>
                
                  <tr>
                    <td>callback</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.post_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>precall</td>
                    <td class=""code""><pre>&lt;bound method MembershipViewSet.pre_save of &lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>ret</td>
                    <td class=""code""><pre>[]</pre></td>
                  </tr>
                
                  <tr>
                    <td>save_options</td>
                    <td class=""code""><pre>{}</pre></td>
                  </tr>
                
                  <tr>
                    <td>created</td>
                    <td class=""code""><pre>True</pre></td>
                  </tr>
                
                  <tr>
                    <td>instance</td>
                    <td class=""code""><pre>&lt;Membership: Membership object&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/projects/api.py</code> in <code>post_save</code>

          
            <div class=""context"" id=""c140285360235528"">
              
                <ol start=""759"" class=""pre-context"" id=""pre140285360235528"">
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>    def post_save(self, object, created=False):</pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>        super().post_save(object, created=created)</pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>        if not created:</pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>            return</pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>        # Send email only if a new membership is created</pre></li>
                
                </ol>
              
              <ol start=""766"" class=""context-line"">
                <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>
        services.send_invitation(invitation=object)</pre> <span>...</span></li></ol>
              
                <ol start='767' class=""post-context"" id=""post140285360235528"">
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>class InvitationViewSet(ModelListViewSet):</pre></li>
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>    &quot;&quot;&quot;</pre></li>
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>    Only used by front for get invitation by it token.</pre></li>
                  
                  <li onclick=""toggle('pre140285360235528', 'post140285360235528')""><pre>    &quot;&quot;&quot;</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360235528')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360235528"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>__class__</td>
                    <td class=""code""><pre>&lt;class &#39;taiga.projects.api.MembershipViewSet&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>object</td>
                    <td class=""code""><pre>&lt;Membership: Membership object&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>created</td>
                    <td class=""code""><pre>True</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;taiga.projects.api.MembershipViewSet object at 0x7f96bb0575c0&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/home/taiga/taiga-back/taiga/projects/services/invitations.py</code> in <code>send_invitation</code>

          
            <div class=""context"" id=""c140285360235720"">
              
                <ol start=""27"" class=""pre-context"" id=""pre140285360235720"">
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>    if invitation.user:</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>        template = mail_builder.membership_notification</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>        email = template(invitation.user, {&quot;membership&quot;: invitation})</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>    else:</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>        template = mail_builder.membership_invitation</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>        email = template(invitation.email, {&quot;membership&quot;: invitation})</pre></li>
                
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre></pre></li>
                
                </ol>
              
              <ol start=""34"" class=""context-line"">
                <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>
    email.send()</pre> <span>...</span></li></ol>
              
                <ol start='35' class=""post-context"" id=""post140285360235720"">
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>def find_invited_user(email, default=None):</pre></li>
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>    &quot;&quot;&quot;Check if the invited user is already a registered.</pre></li>
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360235720', 'post140285360235720')""><pre>    :param invitation: Invitation object.</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360235720')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360235720"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>invitation</td>
                    <td class=""code""><pre>&lt;Membership: Membership object&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>email</td>
                    <td class=""code""><pre>&lt;django.core.mail.message.EmailMultiAlternatives object at 0x7f96baf3be10&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>template</td>
                    <td class=""code""><pre>&lt;function MagicMailBuilder.__getattr__.&lt;locals&gt;._dynamic_email_generator at 0x7f96bafb5620&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/message.py</code> in <code>send</code>

          
            <div class=""context"" id=""c140285360238216"">
              
                <ol start=""285"" class=""pre-context"" id=""pre140285360238216"">
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>    def send(self, fail_silently=False):</pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>        &quot;&quot;&quot;Sends the email message.&quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>        if not self.recipients():</pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>            # Don&#39;t bother creating the network connection if there&#39;s nobody to</pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>            # send to.</pre></li>
                
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>            return 0</pre></li>
                
                </ol>
              
              <ol start=""292"" class=""context-line"">
                <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>
        return self.get_connection(fail_silently).send_messages([self])</pre> <span>...</span></li></ol>
              
                <ol start='293' class=""post-context"" id=""post140285360238216"">
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>    def attach(self, filename=None, content=None, mimetype=None):</pre></li>
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>        &quot;&quot;&quot;</pre></li>
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>        Attaches a file with the given filename and content. The filename can</pre></li>
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre>        be omitted and the mimetype is guessed, if not provided.</pre></li>
                  
                  <li onclick=""toggle('pre140285360238216', 'post140285360238216')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360238216')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360238216"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>fail_silently</td>
                    <td class=""code""><pre>False</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.core.mail.message.EmailMultiAlternatives object at 0x7f96baf3be10&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py</code> in <code>send_messages</code>

          
            <div class=""context"" id=""c140285360237960"">
              
                <ol start=""93"" class=""pre-context"" id=""pre140285360237960"">
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        Sends one or more EmailMessage objects and returns the number of email</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        messages sent.</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        &quot;&quot;&quot;</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        if not email_messages:</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>            return</pre></li>
                
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>        with self._lock:</pre></li>
                
                </ol>
              
              <ol start=""100"" class=""context-line"">
                <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>
            new_conn_created = self.open()</pre> <span>...</span></li></ol>
              
                <ol start='101' class=""post-context"" id=""post140285360237960"">
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>            if not self.connection:</pre></li>
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>                # We failed silently on open().</pre></li>
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>                # Trying to send would be pointless.</pre></li>
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>                return</pre></li>
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>            num_sent = 0</pre></li>
                  
                  <li onclick=""toggle('pre140285360237960', 'post140285360237960')""><pre>            for message in email_messages:</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360237960')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360237960"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>email_messages</td>
                    <td class=""code""><pre>[&lt;django.core.mail.message.EmailMultiAlternatives object at 0x7f96baf3be10&gt;]</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.core.mail.backends.smtp.EmailBackend object at 0x7f96baf3bef0&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame django"">
          <code>/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py</code> in <code>open</code>

          
            <div class=""context"" id=""c140285358841928"">
              
                <ol start=""51"" class=""pre-context"" id=""pre140285358841928"">
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            connection_params[&#39;timeout&#39;] = self.timeout</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>        if self.use_ssl:</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            connection_params.update({</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>                &#39;keyfile&#39;: self.ssl_keyfile,</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>                &#39;certfile&#39;: self.ssl_certfile,</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            })</pre></li>
                
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>        try:</pre></li>
                
                </ol>
              
              <ol start=""58"" class=""context-line"">
                <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>
            self.connection = connection_class(self.host, self.port, **connection_params)</pre> <span>...</span></li></ol>
              
                <ol start='59' class=""post-context"" id=""post140285358841928"">
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            # TLS/SSL are mutually exclusive, so only attempt TLS over</pre></li>
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            # non-secure connections.</pre></li>
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>            if not self.use_ssl and self.use_tls:</pre></li>
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>                self.connection.ehlo()</pre></li>
                  
                  <li onclick=""toggle('pre140285358841928', 'post140285358841928')""><pre>                self.connection.starttls(keyfile=self.ssl_keyfile, certfile=self.ssl_certfile)</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358841928')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358841928"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>connection_class</td>
                    <td class=""code""><pre>&lt;class &#39;smtplib.SMTP&#39;&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;django.core.mail.backends.smtp.EmailBackend object at 0x7f96baf3bef0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>connection_params</td>
                    <td class=""code""><pre>{&#39;local_hostname&#39;: &#39;QUADVAGILE02.adventiel.fr&#39;}</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/smtplib.py</code> in <code>__init__</code>

          
            <div class=""context"" id=""c140285359437832"">
              
                <ol start=""244"" class=""pre-context"" id=""pre140285359437832"">
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        self._host = host</pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        self.timeout = timeout</pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        self.esmtp_features = {}</pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        self.command_encoding = &#39;ascii&#39;</pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        self.source_address = source_address</pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        if host:</pre></li>
                
                </ol>
              
              <ol start=""251"" class=""context-line"">
                <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>
            (code, msg) = self.connect(host, port)</pre> <span>...</span></li></ol>
              
                <ol start='252' class=""post-context"" id=""post140285359437832"">
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>            if code != 220:</pre></li>
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>                raise SMTPConnectError(code, msg)</pre></li>
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        if local_hostname is not None:</pre></li>
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>            self.local_hostname = local_hostname</pre></li>
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>        else:</pre></li>
                  
                  <li onclick=""toggle('pre140285359437832', 'post140285359437832')""><pre>            # RFC 2821 says we should use the fqdn in the EHLO/HELO verb, and</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285359437832')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285359437832"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>source_address</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>port</td>
                    <td class=""code""><pre>25</pre></td>
                  </tr>
                
                  <tr>
                    <td>host</td>
                    <td class=""code""><pre>&#39;localhost&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;smtplib.SMTP object at 0x7f96baf83e10&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>local_hostname</td>
                    <td class=""code""><pre>&#39;QUADVAGILE02.adventiel.fr&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>timeout</td>
                    <td class=""code""><pre>&lt;object object at 0x7f96c8d680c0&gt;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/smtplib.py</code> in <code>connect</code>

          
            <div class=""context"" id=""c140285360388616"">
              
                <ol start=""328"" class=""pre-context"" id=""pre140285360388616"">
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>                    port = int(port)</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>                except ValueError:</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>                    raise OSError(&quot;nonnumeric port&quot;)</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        if not port:</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>            port = self.default_port</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        if self.debuglevel &gt; 0:</pre></li>
                
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>            self._print_debug(&#39;connect:&#39;, (host, port))</pre></li>
                
                </ol>
              
              <ol start=""335"" class=""context-line"">
                <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>
        self.sock = self._get_socket(host, port, self.timeout)</pre> <span>...</span></li></ol>
              
                <ol start='336' class=""post-context"" id=""post140285360388616"">
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        self.file = None</pre></li>
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        (code, msg) = self.getreply()</pre></li>
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        if self.debuglevel &gt; 0:</pre></li>
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>            self._print_debug(&#39;connect:&#39;, repr(msg))</pre></li>
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre>        return (code, msg)</pre></li>
                  
                  <li onclick=""toggle('pre140285360388616', 'post140285360388616')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360388616')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360388616"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>source_address</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>port</td>
                    <td class=""code""><pre>25</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;smtplib.SMTP object at 0x7f96baf83e10&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>host</td>
                    <td class=""code""><pre>&#39;localhost&#39;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/smtplib.py</code> in <code>_get_socket</code>

          
            <div class=""context"" id=""c140285360386376"">
              
                <ol start=""299"" class=""pre-context"" id=""pre140285360386376"">
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>    def _get_socket(self, host, port, timeout):</pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        # This makes it simpler for SMTP_SSL to use the SMTP connect code</pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        # and just alter the socket connection bit.</pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        if self.debuglevel &gt; 0:</pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>            self._print_debug(&#39;connect: to&#39;, (host, port), self.source_address)</pre></li>
                
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        return socket.create_connection((host, port), timeout,</pre></li>
                
                </ol>
              
              <ol start=""306"" class=""context-line"">
                <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>
                                        self.source_address)</pre> <span>...</span></li></ol>
              
                <ol start='307' class=""post-context"" id=""post140285360386376"">
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>    def connect(self, host=&#39;localhost&#39;, port=0, source_address=None):</pre></li>
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        &quot;&quot;&quot;Connect to a host on a given port.</pre></li>
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        If the hostname ends with a colon (`:&#39;) followed by a number, and</pre></li>
                  
                  <li onclick=""toggle('pre140285360386376', 'post140285360386376')""><pre>        there is no port specified, that suffix will be stripped off and the</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285360386376')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285360386376"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>port</td>
                    <td class=""code""><pre>25</pre></td>
                  </tr>
                
                  <tr>
                    <td>timeout</td>
                    <td class=""code""><pre>&lt;object object at 0x7f96c8d680c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>self</td>
                    <td class=""code""><pre>&lt;smtplib.SMTP object at 0x7f96baf83e10&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>host</td>
                    <td class=""code""><pre>&#39;localhost&#39;</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/socket.py</code> in <code>create_connection</code>

          
            <div class=""context"" id=""c140285358672776"">
              
                <ol start=""704"" class=""pre-context"" id=""pre140285358672776"">
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>        except error as _:</pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>            err = _</pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>            if sock is not None:</pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>                sock.close()</pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre></pre></li>
                
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>    if err is not None:</pre></li>
                
                </ol>
              
              <ol start=""711"" class=""context-line"">
                <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>
        raise err</pre> <span>...</span></li></ol>
              
                <ol start='712' class=""post-context"" id=""post140285358672776"">
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>    else:</pre></li>
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>        raise error(&quot;getaddrinfo returns an empty list&quot;)</pre></li>
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>def getaddrinfo(host, port, family=0, type=0, proto=0, flags=0):</pre></li>
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre>    &quot;&quot;&quot;Resolve host and port into list of address info entries.</pre></li>
                  
                  <li onclick=""toggle('pre140285358672776', 'post140285358672776')""><pre></pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358672776')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358672776"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>port</td>
                    <td class=""code""><pre>25</pre></td>
                  </tr>
                
                  <tr>
                    <td>sock</td>
                    <td class=""code""><pre>&lt;socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>af</td>
                    <td class=""code""><pre>&lt;AddressFamily.AF_INET: 2&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>host</td>
                    <td class=""code""><pre>&#39;localhost&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>res</td>
                    <td class=""code""><pre>(&lt;AddressFamily.AF_INET: 2&gt;,
 &lt;SocketKind.SOCK_STREAM: 1&gt;,
 6,
 &#39;&#39;,
 (&#39;127.0.0.1&#39;, 25))</pre></td>
                  </tr>
                
                  <tr>
                    <td>canonname</td>
                    <td class=""code""><pre>&#39;&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>address</td>
                    <td class=""code""><pre>(&#39;localhost&#39;, 25)</pre></td>
                  </tr>
                
                  <tr>
                    <td>source_address</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>socktype</td>
                    <td class=""code""><pre>&lt;SocketKind.SOCK_STREAM: 1&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>err</td>
                    <td class=""code""><pre>ConnectionRefusedError(111, &#39;Connection refused&#39;)</pre></td>
                  </tr>
                
                  <tr>
                    <td>timeout</td>
                    <td class=""code""><pre>&lt;object object at 0x7f96c8d680c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>sa</td>
                    <td class=""code""><pre>(&#39;127.0.0.1&#39;, 25)</pre></td>
                  </tr>
                
                  <tr>
                    <td>proto</td>
                    <td class=""code""><pre>6</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
        
        <li class=""frame user"">
          <code>/usr/lib/python3.5/socket.py</code> in <code>create_connection</code>

          
            <div class=""context"" id=""c140285358396808"">
              
                <ol start=""695"" class=""pre-context"" id=""pre140285358396808"">
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>        sock = None</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>        try:</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            sock = socket(af, socktype, proto)</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            if timeout is not _GLOBAL_DEFAULT_TIMEOUT:</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>                sock.settimeout(timeout)</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            if source_address:</pre></li>
                
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>                sock.bind(source_address)</pre></li>
                
                </ol>
              
              <ol start=""702"" class=""context-line"">
                <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>
            sock.connect(sa)</pre> <span>...</span></li></ol>
              
                <ol start='703' class=""post-context"" id=""post140285358396808"">
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            return sock</pre></li>
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre></pre></li>
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>        except error as _:</pre></li>
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            err = _</pre></li>
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>            if sock is not None:</pre></li>
                  
                  <li onclick=""toggle('pre140285358396808', 'post140285358396808')""><pre>                sock.close()</pre></li>
                  
              </ol>
              
            </div>
          

          
            <div class=""commands"">
                
                    <a href=""#"" onclick=""return varToggle(this, '140285358396808')""><span>&#x25b6;</span> Local vars</a>
                
            </div>
            <table class=""vars"" id=""v140285358396808"">
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                
                  <tr>
                    <td>port</td>
                    <td class=""code""><pre>25</pre></td>
                  </tr>
                
                  <tr>
                    <td>sock</td>
                    <td class=""code""><pre>&lt;socket.socket [closed] fd=-1, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>af</td>
                    <td class=""code""><pre>&lt;AddressFamily.AF_INET: 2&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>host</td>
                    <td class=""code""><pre>&#39;localhost&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>res</td>
                    <td class=""code""><pre>(&lt;AddressFamily.AF_INET: 2&gt;,
 &lt;SocketKind.SOCK_STREAM: 1&gt;,
 6,
 &#39;&#39;,
 (&#39;127.0.0.1&#39;, 25))</pre></td>
                  </tr>
                
                  <tr>
                    <td>canonname</td>
                    <td class=""code""><pre>&#39;&#39;</pre></td>
                  </tr>
                
                  <tr>
                    <td>address</td>
                    <td class=""code""><pre>(&#39;localhost&#39;, 25)</pre></td>
                  </tr>
                
                  <tr>
                    <td>source_address</td>
                    <td class=""code""><pre>None</pre></td>
                  </tr>
                
                  <tr>
                    <td>socktype</td>
                    <td class=""code""><pre>&lt;SocketKind.SOCK_STREAM: 1&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>err</td>
                    <td class=""code""><pre>ConnectionRefusedError(111, &#39;Connection refused&#39;)</pre></td>
                  </tr>
                
                  <tr>
                    <td>timeout</td>
                    <td class=""code""><pre>&lt;object object at 0x7f96c8d680c0&gt;</pre></td>
                  </tr>
                
                  <tr>
                    <td>sa</td>
                    <td class=""code""><pre>(&#39;127.0.0.1&#39;, 25)</pre></td>
                  </tr>
                
                  <tr>
                    <td>proto</td>
                    <td class=""code""><pre>6</pre></td>
                  </tr>
                
              </tbody>
            </table>
          
        </li>
      
    </ul>
  </div>
  
  <form action=""http://dpaste.com/"" name=""pasteform"" id=""pasteform"" method=""post"">

  <div id=""pastebinTraceback"" class=""pastebin"">
    <input type=""hidden"" name=""language"" value=""PythonConsole"">
    <input type=""hidden"" name=""title""
      value=""ConnectionRefusedError at /api/v1/memberships/bulk_create"">
    <input type=""hidden"" name=""source"" value=""Django Dpaste Agent"">
    <input type=""hidden"" name=""poster"" value=""Django"">
    <textarea name=""content"" id=""traceback_area"" cols=""140"" rows=""25"">
Environment:


Request Method: POST
Request URL: http://qualif.taiga.adventiel.com/api/v1/memberships/bulk_create

Django Version: 1.9.2
Python Version: 3.5.2
Installed Applications:
[&#39;django.contrib.auth&#39;,
 &#39;django.contrib.contenttypes&#39;,
 &#39;django.contrib.sessions&#39;,
 &#39;django.contrib.messages&#39;,
 &#39;django.contrib.admin&#39;,
 &#39;django.contrib.staticfiles&#39;,
 &#39;django.contrib.sitemaps&#39;,
 &#39;taiga.base&#39;,
 &#39;taiga.base.api&#39;,
 &#39;taiga.locale&#39;,
 &#39;taiga.events&#39;,
 &#39;taiga.front&#39;,
 &#39;taiga.users&#39;,
 &#39;taiga.userstorage&#39;,
 &#39;taiga.external_apps&#39;,
 &#39;taiga.projects&#39;,
 &#39;taiga.projects.references&#39;,
 &#39;taiga.projects.custom_attributes&#39;,
 &#39;taiga.projects.history&#39;,
 &#39;taiga.projects.notifications&#39;,
 &#39;taiga.projects.attachments&#39;,
 &#39;taiga.projects.likes&#39;,
 &#39;taiga.projects.votes&#39;,
 &#39;taiga.projects.milestones&#39;,
 &#39;taiga.projects.epics&#39;,
 &#39;taiga.projects.userstories&#39;,
 &#39;taiga.projects.tasks&#39;,
 &#39;taiga.projects.issues&#39;,
 &#39;taiga.projects.wiki&#39;,
 &#39;taiga.searches&#39;,
 &#39;taiga.timeline&#39;,
 &#39;taiga.mdrender&#39;,
 &#39;taiga.export_import&#39;,
 &#39;taiga.feedback&#39;,
 &#39;taiga.stats&#39;,
 &#39;taiga.hooks.github&#39;,
 &#39;taiga.hooks.gitlab&#39;,
 &#39;taiga.hooks.bitbucket&#39;,
 &#39;taiga.hooks.gogs&#39;,
 &#39;taiga.webhooks&#39;,
 &#39;djmail&#39;,
 &#39;django_jinja&#39;,
 &#39;django_jinja.contrib._humanize&#39;,
 &#39;sr&#39;,
 &#39;easy_thumbnails&#39;,
 &#39;raven.contrib.django.raven_compat&#39;]
Installed Middleware:
[&#39;taiga.base.middleware.cors.CoorsMiddleware&#39;,
 &#39;taiga.events.middleware.SessionIDMiddleware&#39;,
 &#39;django.middleware.common.CommonMiddleware&#39;,
 &#39;django.middleware.locale.LocaleMiddleware&#39;,
 &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,
 &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,
 &#39;django.contrib.messages.middleware.MessageMiddleware&#39;]



Traceback:

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  149.                     response = self.process_exception_by_middleware(e, request)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"" in view
  106.             return self.dispatch(request, *args, **kwargs)

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"" in wrapped_view
  58.         return view_func(*args, **kwargs)

File ""/home/taiga/taiga-back/taiga/base/api/views.py"" in dispatch
  446.             response = self.handle_exception(exc)

File ""/home/taiga/taiga-back/taiga/base/api/views.py"" in dispatch
  443.             response = handler(request, *args, **kwargs)

File ""/home/taiga/taiga-back/taiga/projects/api.py"" in bulk_create
  726.                                                           precall=self.pre_save)

File ""/home/taiga/taiga-back/taiga/projects/services/members.py"" in create_members_in_bulk
  52.     db.save_in_bulk(members, callback, precall)

File ""/usr/lib/python3.5/contextlib.py"" in inner
  30.                 return func(*args, **kwds)

File ""/home/taiga/taiga-back/taiga/base/utils/db.py"" in save_in_bulk
  99.         callback(instance, created=created)

File ""/home/taiga/taiga-back/taiga/projects/api.py"" in post_save
  766.         services.send_invitation(invitation=object)

File ""/home/taiga/taiga-back/taiga/projects/services/invitations.py"" in send_invitation
  34.     email.send()

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/message.py"" in send
  292.         return self.get_connection(fail_silently).send_messages([self])

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"" in send_messages
  100.             new_conn_created = self.open()

File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/mail/backends/smtp.py"" in open
  58.             self.connection = connection_class(self.host, self.port, **connection_params)

File ""/usr/lib/python3.5/smtplib.py"" in __init__
  251.             (code, msg) = self.connect(host, port)

File ""/usr/lib/python3.5/smtplib.py"" in connect
  335.         self.sock = self._get_socket(host, port, self.timeout)

File ""/usr/lib/python3.5/smtplib.py"" in _get_socket
  306.                                         self.source_address)

File ""/usr/lib/python3.5/socket.py"" in create_connection
  711.         raise err

File ""/usr/lib/python3.5/socket.py"" in create_connection
  702.             sock.connect(sa)

Exception Type: ConnectionRefusedError at /api/v1/memberships/bulk_create
Exception Value: [Errno 111] Connection refused
</textarea>
  <br><br>
  <input type=""submit"" value=""Share this traceback on a public website"">
  </div>
</form>
</div>



<div id=""requestinfo"">
  <h2>Request information</h2>


  <h3 id=""get-info"">GET</h3>
  
    <p>No GET data</p>
  

  <h3 id=""post-info"">POST</h3>
  
    <p>No POST data</p>
  
  <h3 id=""files-info"">FILES</h3>
  
    <p>No FILES data</p>
  


  <h3 id=""cookie-info"">COOKIES</h3>
  
    <table class=""req"">
      <thead>
        <tr>
          <th>Variable</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        
          <tr>
            <td>sessionid</td>
            <td class=""code""><pre>&#39;q8ryeum4furwu94q04xz3c2x38q9rxt7&#39;</pre></td>
          </tr>
        
          <tr>
            <td>csrftoken</td>
            <td class=""code""><pre>&#39;TDxlq4muuKKA6fgHbB1eZ0bjcAAqRBGk&#39;</pre></td>
          </tr>
        
      </tbody>
    </table>
  

  <h3 id=""meta-info"">META</h3>
  <table class=""req"">
    <thead>
      <tr>
        <th>Variable</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      
        <tr>
          <td>wsgi.run_once</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_COOKIE</td>
          <td class=""code""><pre>(&#39;csrftoken=TDxlq4muuKKA6fgHbB1eZ0bjcAAqRBGk; &#39;
 &#39;sessionid=q8ryeum4furwu94q04xz3c2x38q9rxt7&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.version</td>
          <td class=""code""><pre>(1, 0)</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.multithread</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_HOST</td>
          <td class=""code""><pre>&#39;qualif.taiga.adventiel.com&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_X_REAL_IP</td>
          <td class=""code""><pre>&#39;10.200.8.191&#39;</pre></td>
        </tr>
      
        <tr>
          <td>gunicorn.socket</td>
          <td class=""code""><pre>&lt;socket.socket fd=11, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=(&#39;127.0.0.1&#39;, 8001), raddr=(&#39;127.0.0.1&#39;, 47826)&gt;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_USER_AGENT</td>
          <td class=""code""><pre>&#39;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:50.0) Gecko/20100101 Firefox/50.0&#39;</pre></td>
        </tr>
      
        <tr>
          <td>RAW_URI</td>
          <td class=""code""><pre>&#39;/api/v1/memberships/bulk_create&#39;</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.input</td>
          <td class=""code""><pre>&lt;gunicorn.http.body.Body object at 0x7f96bb03d438&gt;</pre></td>
        </tr>
      
        <tr>
          <td>SERVER_PROTOCOL</td>
          <td class=""code""><pre>&#39;HTTP/1.0&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SERVER_SOFTWARE</td>
          <td class=""code""><pre>&#39;gunicorn/19.4.5&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_AUTHORIZATION</td>
          <td class=""code""><pre>(&#39;Bearer &#39;
 &#39;eyJ1c2VyX2F1dGhlbnRpY2F0aW9uX2lkIjo1fQ:1cRF6j:a3HoN12IGXr7KClc1m4d1r_5H60&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_X_SESSION_ID</td>
          <td class=""code""><pre>&#39;9293fb651f227190d912f4545de98b9689dec865&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_X_SCHEME</td>
          <td class=""code""><pre>&#39;http&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SCRIPT_NAME</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_ACCEPT_ENCODING</td>
          <td class=""code""><pre>&#39;gzip, deflate&#39;</pre></td>
        </tr>
      
        <tr>
          <td>QUERY_STRING</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CONTENT_TYPE</td>
          <td class=""code""><pre>&#39;application/json&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_ACCEPT</td>
          <td class=""code""><pre>&#39;application/json, text/plain, */*&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_REFERER</td>
          <td class=""code""><pre>&#39;http://qualif.taiga.adventiel.com/project/project-1/admin/memberships&#39;</pre></td>
        </tr>
      
        <tr>
          <td>REMOTE_ADDR</td>
          <td class=""code""><pre>&#39;127.0.0.1&#39;</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.file_wrapper</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_DNT</td>
          <td class=""code""><pre>&#39;1&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_ACCEPT_LANGUAGE</td>
          <td class=""code""><pre>&#39;fr&#39;</pre></td>
        </tr>
      
        <tr>
          <td>PATH_INFO</td>
          <td class=""code""><pre>&#39;/api/v1/memberships/bulk_create&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SERVER_NAME</td>
          <td class=""code""><pre>&#39;127.0.0.1&#39;</pre></td>
        </tr>
      
        <tr>
          <td>REQUEST_METHOD</td>
          <td class=""code""><pre>&#39;POST&#39;</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.url_scheme</td>
          <td class=""code""><pre>&#39;http&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_X_FORWARDED_PROTO</td>
          <td class=""code""><pre>&#39;http&#39;</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.errors</td>
          <td class=""code""><pre>&lt;gunicorn.http.wsgi.WSGIErrorsWrapper object at 0x7f96bb03dac8&gt;</pre></td>
        </tr>
      
        <tr>
          <td>CONTENT_LENGTH</td>
          <td class=""code""><pre>&#39;92&#39;</pre></td>
        </tr>
      
        <tr>
          <td>wsgi.multiprocess</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_CONNECTION</td>
          <td class=""code""><pre>&#39;close&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SERVER_PORT</td>
          <td class=""code""><pre>&#39;8001&#39;</pre></td>
        </tr>
      
        <tr>
          <td>HTTP_X_FORWARDED_FOR</td>
          <td class=""code""><pre>&#39;10.200.8.191&#39;</pre></td>
        </tr>
      
        <tr>
          <td>REMOTE_PORT</td>
          <td class=""code""><pre>&#39;47826&#39;</pre></td>
        </tr>
      
    </tbody>
  </table>


  <h3 id=""settings-info"">Settings</h3>
  <h4>Using settings module <code>settings</code></h4>
  <table class=""req"">
    <thead>
      <tr>
        <th>Setting</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      
        <tr>
          <td>USE_I18N</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_TRUSTED_ORIGINS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>SEARCHES_MAX_RESULTS</td>
          <td class=""code""><pre>150</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_DEFAULT_EXCHANGE</td>
          <td class=""code""><pre>&#39;tasks&#39;</pre></td>
        </tr>
      
        <tr>
          <td>BASE_DIR</td>
          <td class=""code""><pre>&#39;/home/taiga/taiga-back&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_BROWSER_XSS_FILTER</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>EVENTS_PUSH_BACKEND</td>
          <td class=""code""><pre>&#39;taiga.events.backends.rabbitmq.EventsPushBackend&#39;</pre></td>
        </tr>
      
        <tr>
          <td>STATS_ENABLED</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>DJMAIL_TEMPLATE_EXTENSION</td>
          <td class=""code""><pre>&#39;jinja&#39;</pre></td>
        </tr>
      
        <tr>
          <td>STATIC_URL</td>
          <td class=""code""><pre>&#39;http://qualif.taiga.adventiel.com/static/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CACHES</td>
          <td class=""code""><pre>{&#39;default&#39;: {&#39;BACKEND&#39;: &#39;django.core.cache.backends.locmem.LocMemCache&#39;,
             &#39;LOCATION&#39;: &#39;unique-snowflake&#39;}}</pre></td>
        </tr>
      
        <tr>
          <td>MESSAGE_STORAGE</td>
          <td class=""code""><pre>&#39;django.contrib.messages.storage.session.SessionStorage&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SETTINGS_MODULE</td>
          <td class=""code""><pre>&#39;settings&#39;</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATE_STRING_IF_INVALID</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>WEBHOOKS_ENABLED</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>FEEDBACK_EMAIL</td>
          <td class=""code""><pre>&#39;support@taiga.io&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THOUSAND_SEPARATOR</td>
          <td class=""code""><pre>&#39;,&#39;</pre></td>
        </tr>
      
        <tr>
          <td>BROKER_URL</td>
          <td class=""code""><pre>&#39;amqp://guest:guest@localhost:5672//&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_LOGO_SMALL</td>
          <td class=""code""><pre>&#39;logo-small&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_HSTS_INCLUDE_SUBDOMAINS</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>STATICFILES_DIRS</td>
          <td class=""code""><pre>()</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATE_LOADERS</td>
          <td class=""code""><pre>[&#39;django.template.loaders.filesystem.Loader&#39;,
 &#39;django.template.loaders.app_directories.Loader&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_PROXY_SSL_HEADER</td>
          <td class=""code""><pre>(&#39;HTTP_X_FORWARDED_PROTOCOL&#39;, &#39;https&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>EXPORTS_TTL</td>
          <td class=""code""><pre>86400</pre></td>
        </tr>
      
        <tr>
          <td>THN_ATTACHMENT_TIMELINE</td>
          <td class=""code""><pre>&#39;timeline-image&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_TIMEOUT</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_SSL_REDIRECT</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>IGNORABLE_404_URLS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_PATH</td>
          <td class=""code""><pre>&#39;/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>IGNORABLE_404_ENDS</td>
          <td class=""code""><pre>(&#39;.php&#39;, &#39;.cgi&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_HTTPONLY</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>SILENCED_SYSTEM_CHECKS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>FEEDBACK_ENABLED</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>PREPEND_WWW</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_SECURE</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>THN_TIMELINE_IMAGE_SIZE</td>
          <td class=""code""><pre>640</pre></td>
        </tr>
      
        <tr>
          <td>ROOT_URLCONF</td>
          <td class=""code""><pre>&#39;taiga.urls&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_SECURE</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>MAX_AGE_AUTH_TOKEN</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>PASSWORD_RESET_TIMEOUT_DAYS</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>MIDDLEWARE_CLASSES</td>
          <td class=""code""><pre>[&#39;taiga.base.middleware.cors.CoorsMiddleware&#39;,
 &#39;taiga.events.middleware.SessionIDMiddleware&#39;,
 &#39;django.middleware.common.CommonMiddleware&#39;,
 &#39;django.middleware.locale.LocaleMiddleware&#39;,
 &#39;django.contrib.sessions.middleware.SessionMiddleware&#39;,
 &#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;,
 &#39;django.contrib.messages.middleware.MessageMiddleware&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_FROM_EMAIL</td>
          <td class=""code""><pre>&#39;taiga@adventiel.fr&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_AVATAR_SMALL</td>
          <td class=""code""><pre>&#39;avatar&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LOCALE_PATHS</td>
          <td class=""code""><pre>(&#39;/home/taiga/taiga-back/locale&#39;, &#39;/home/taiga/taiga-back/taiga/locale&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_SAVE_EVERY_REQUEST</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_BACKEND</td>
          <td class=""code""><pre>&#39;django.core.mail.backends.smtp.EmailBackend&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_CARD_IMAGE_WIDTH</td>
          <td class=""code""><pre>300</pre></td>
        </tr>
      
        <tr>
          <td>MAX_AGE_CANCEL_ACCOUNT</td>
          <td class=""code""><pre>2592000</pre></td>
        </tr>
      
        <tr>
          <td>SITE_ID</td>
          <td class=""code""><pre>&#39;api&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_FILE_PATH</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_SUBJECT_PREFIX</td>
          <td class=""code""><pre>&#39;[Django] &#39;</pre></td>
        </tr>
      
        <tr>
          <td>DATABASE_ROUTERS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_TABLESPACE</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_SSL_HOST</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_HEADER_NAME</td>
          <td class=""code""><pre>&#39;HTTP_X_CSRFTOKEN&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_LOGO_BIG_SIZE</td>
          <td class=""code""><pre>300</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_PATH</td>
          <td class=""code""><pre>&#39;/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_PROJECT_TEMPLATE</td>
          <td class=""code""><pre>&#39;scrum&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LOGIN_REDIRECT_URL</td>
          <td class=""code""><pre>&#39;/accounts/profile/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGE_COOKIE_AGE</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_INDEX_TABLESPACE</td>
          <td class=""code""><pre>&#39;&#39;</pre></td>
        </tr>
      
        <tr>
          <td>AUTHENTICATION_BACKENDS</td>
          <td class=""code""><pre>(&#39;django.contrib.auth.backends.ModelBackend&#39;,)</pre></td>
        </tr>
      
        <tr>
          <td>MAX_MEMBERSHIPS_PRIVATE_PROJECTS</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>CACHE_MIDDLEWARE_SECONDS</td>
          <td class=""code""><pre>600</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGE_COOKIE_NAME</td>
          <td class=""code""><pre>&#39;django_language&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEBUG</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>ADMINS</td>
          <td class=""code""><pre>((&#39;Rémy Garrigue&#39;, &#39;remy.garrigue@adventiel.fr&#39;),)</pre></td>
        </tr>
      
        <tr>
          <td>TIME_INPUT_FORMATS</td>
          <td class=""code""><pre>[&#39;%H:%M:%S&#39;, &#39;%H:%M:%S.%f&#39;, &#39;%H:%M&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>AUTH_USER_MODEL</td>
          <td class=""code""><pre>&#39;users.User&#39;</pre></td>
        </tr>
      
        <tr>
          <td>GITLAB_VALID_ORIGIN_IPS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_DOMAIN</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>X_FRAME_OPTIONS</td>
          <td class=""code""><pre>&#39;SAMEORIGIN&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_AVATAR_SIZE</td>
          <td class=""code""><pre>80</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_HOST</td>
          <td class=""code""><pre>&#39;localhost&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LOGGING</td>
          <td class=""code""><pre>{&#39;disable_existing_loggers&#39;: True,
 &#39;filters&#39;: {&#39;require_debug_false&#39;: {&#39;()&#39;: &#39;django.utils.log.RequireDebugFalse&#39;}},
 &#39;formatters&#39;: {&#39;complete&#39;: {&#39;format&#39;: &#39;%(levelname)s:%(asctime)s:%(module)s &#39;
                                       &#39;%(message)s&#39;},
                &#39;null&#39;: {&#39;format&#39;: &#39;%(message)s&#39;},
                &#39;simple&#39;: {&#39;format&#39;: &#39;%(levelname)s:%(asctime)s: %(message)s&#39;}},
 &#39;handlers&#39;: {&#39;console&#39;: {&#39;class&#39;: &#39;logging.StreamHandler&#39;,
                          &#39;formatter&#39;: &#39;simple&#39;,
                          &#39;level&#39;: &#39;DEBUG&#39;},
              &#39;mail_admins&#39;: {&#39;class&#39;: &#39;django.utils.log.AdminEmailHandler&#39;,
                              &#39;filters&#39;: [&#39;require_debug_false&#39;],
                              &#39;level&#39;: &#39;ERROR&#39;},
              &#39;null&#39;: {&#39;class&#39;: &#39;logging.NullHandler&#39;, &#39;level&#39;: &#39;DEBUG&#39;}},
 &#39;loggers&#39;: {&#39;django&#39;: {&#39;handlers&#39;: [&#39;null&#39;],
                        &#39;level&#39;: &#39;INFO&#39;,
                        &#39;propagate&#39;: True},
             &#39;django.request&#39;: {&#39;handlers&#39;: [&#39;mail_admins&#39;, &#39;console&#39;],
                                &#39;level&#39;: &#39;ERROR&#39;,
                                &#39;propagate&#39;: False},
             &#39;taiga&#39;: {&#39;handlers&#39;: [&#39;console&#39;],
                       &#39;level&#39;: &#39;DEBUG&#39;,
                       &#39;propagate&#39;: False},
             &#39;taiga.export_import&#39;: {&#39;handlers&#39;: [&#39;mail_admins&#39;, &#39;console&#39;],
                                     &#39;level&#39;: &#39;ERROR&#39;,
                                     &#39;propagate&#39;: False}},
 &#39;version&#39;: 1}</pre></td>
        </tr>
      
        <tr>
          <td>APPEND_SLASH</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>USE_THOUSAND_SEPARATOR</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>DJMAIL_SEND_ASYNC</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>PASSWORD_HASHERS</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_LOGO_BIG</td>
          <td class=""code""><pre>&#39;logo-big&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DJMAIL_REAL_BACKEND</td>
          <td class=""code""><pre>&#39;django.core.mail.backends.console.EmailBackend&#39;</pre></td>
        </tr>
      
        <tr>
          <td>MAX_MEMBERSHIPS_PUBLIC_PROJECTS</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>USE_L10N</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>THN_ATTACHMENT_CARD</td>
          <td class=""code""><pre>&#39;card-image&#39;</pre></td>
        </tr>
      
        <tr>
          <td>FILE_UPLOAD_MAX_MEMORY_SIZE</td>
          <td class=""code""><pre>2621440</pre></td>
        </tr>
      
        <tr>
          <td>EXTRA_BLOCKING_CODES</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>DATE_FORMAT</td>
          <td class=""code""><pre>&#39;N j, Y&#39;</pre></td>
        </tr>
      
        <tr>
          <td>APP_EXTRA_EXPOSE_HEADERS</td>
          <td class=""code""><pre>[&#39;taiga-info-total-opened-milestones&#39;,
 &#39;taiga-info-total-closed-milestones&#39;,
 &#39;taiga-info-project-memberships&#39;,
 &#39;taiga-info-project-is-private&#39;,
 &#39;taiga-info-order-updated&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_FAILURE_VIEW</td>
          <td class=""code""><pre>&#39;django.views.csrf.csrf_failure&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CHANGE_NOTIFICATIONS_MIN_INTERVAL</td>
          <td class=""code""><pre>0</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATE_DEBUG</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGES</td>
          <td class=""code""><pre>[(&#39;ca&#39;, &#39;Català&#39;),
 (&#39;de&#39;, &#39;Deutsch&#39;),
 (&#39;en&#39;, &#39;English (US)&#39;),
 (&#39;es&#39;, &#39;Español&#39;),
 (&#39;fi&#39;, &#39;Suomi&#39;),
 (&#39;fr&#39;, &#39;Français&#39;),
 (&#39;it&#39;, &#39;Italiano&#39;),
 (&#39;nb&#39;, &#39;Norsk (bokmål)&#39;),
 (&#39;nl&#39;, &#39;Nederlands&#39;),
 (&#39;pl&#39;, &#39;Polski&#39;),
 (&#39;pt-br&#39;, &#39;Português (Brasil)&#39;),
 (&#39;ru&#39;, &#39;Русский&#39;),
 (&#39;sv&#39;, &#39;Svenska&#39;),
 (&#39;tr&#39;, &#39;Türkçe&#39;),
 (&#39;zh-hant&#39;, &#39;中文(香港)&#39;)]</pre></td>
        </tr>
      
        <tr>
          <td>THN_AVATAR_BIG_SIZE</td>
          <td class=""code""><pre>300</pre></td>
        </tr>
      
        <tr>
          <td>PROJECT_MODULES_CONFIGURATORS</td>
          <td class=""code""><pre>{&#39;bitbucket&#39;: &#39;taiga.hooks.bitbucket.services.get_or_generate_config&#39;,
 &#39;github&#39;: &#39;taiga.hooks.github.services.get_or_generate_config&#39;,
 &#39;gitlab&#39;: &#39;taiga.hooks.gitlab.services.get_or_generate_config&#39;,
 &#39;gogs&#39;: &#39;taiga.hooks.gogs.services.get_or_generate_config&#39;}</pre></td>
        </tr>
      
        <tr>
          <td>ALLOWED_HOSTS</td>
          <td class=""code""><pre>[&#39;*&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>LOGGING_CONFIG</td>
          <td class=""code""><pre>&#39;logging.config.dictConfig&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SECRET_KEY</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_ENABLE_UTC</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>THN_AVATAR_BIG</td>
          <td class=""code""><pre>&#39;big-avatar&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_DOMAIN</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>THUMBNAIL_ALIASES</td>
          <td class=""code""><pre>{&#39;&#39;: {&#39;avatar&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (80, 80)},
      &#39;big-avatar&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (300, 300)},
      &#39;card-image&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (300, 200)},
      &#39;logo-big&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (300, 300)},
      &#39;logo-small&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (80, 80)},
      &#39;timeline-image&#39;: {&#39;crop&#39;: True, &#39;size&#39;: (640, 0)}}}</pre></td>
        </tr>
      
        <tr>
          <td>THN_CARD_IMAGE_HEIGHT</td>
          <td class=""code""><pre>200</pre></td>
        </tr>
      
        <tr>
          <td>USE_ETAGS</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>SERVER_EMAIL</td>
          <td class=""code""><pre>&#39;root@localhost&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_SSL_KEYFILE</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>THN_LOGO_SMALL_SIZE</td>
          <td class=""code""><pre>80</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_AGE</td>
          <td class=""code""><pre>1209600</pre></td>
        </tr>
      
        <tr>
          <td>STATICFILES_FINDERS</td>
          <td class=""code""><pre>[&#39;django.contrib.staticfiles.finders.FileSystemFinder&#39;,
 &#39;django.contrib.staticfiles.finders.AppDirectoriesFinder&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGE_COOKIE_DOMAIN</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_HOST_PASSWORD</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>STATICFILES_STORAGE</td>
          <td class=""code""><pre>&#39;django.contrib.staticfiles.storage.StaticFilesStorage&#39;</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATE_DIRS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>TAGS_PREDEFINED_COLORS</td>
          <td class=""code""><pre>[&#39;#fce94f&#39;,
 &#39;#edd400&#39;,
 &#39;#c4a000&#39;,
 &#39;#8ae234&#39;,
 &#39;#73d216&#39;,
 &#39;#4e9a06&#39;,
 &#39;#d3d7cf&#39;,
 &#39;#fcaf3e&#39;,
 &#39;#f57900&#39;,
 &#39;#ce5c00&#39;,
 &#39;#729fcf&#39;,
 &#39;#3465a4&#39;,
 &#39;#204a87&#39;,
 &#39;#888a85&#39;,
 &#39;#ad7fa8&#39;,
 &#39;#75507b&#39;,
 &#39;#5c3566&#39;,
 &#39;#ef2929&#39;,
 &#39;#cc0000&#39;,
 &#39;#a40000&#39;,
 &#39;#2e3436&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>USE_X_FORWARDED_HOST</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>FORMAT_MODULE_PATH</td>
          <td class=""code""><pre>&#39;taiga.base.formats&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_CONTENT_TYPE_NOSNIFF</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>DATABASES</td>
          <td class=""code""><pre>{&#39;default&#39;: {&#39;ATOMIC_REQUESTS&#39;: False,
             &#39;AUTOCOMMIT&#39;: True,
             &#39;CONN_MAX_AGE&#39;: 0,
             &#39;ENGINE&#39;: &#39;django.db.backends.postgresql&#39;,
             &#39;HOST&#39;: &#39;localhost&#39;,
             &#39;NAME&#39;: &#39;taiga&#39;,
             &#39;OPTIONS&#39;: {},
             &#39;PASSWORD&#39;: &#39;********************&#39;,
             &#39;PORT&#39;: &#39;5432&#39;,
             &#39;TEST&#39;: {&#39;CHARSET&#39;: None,
                      &#39;COLLATION&#39;: None,
                      &#39;MIRROR&#39;: None,
                      &#39;NAME&#39;: None},
             &#39;TIME_ZONE&#39;: None,
             &#39;USER&#39;: &#39;taiga&#39;}}</pre></td>
        </tr>
      
        <tr>
          <td>MANAGERS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>BITBUCKET_VALID_ORIGIN_IPS</td>
          <td class=""code""><pre>[&#39;131.103.20.165&#39;, &#39;131.103.20.166&#39;, &#39;104.192.143.192/28&#39;, &#39;104.192.143.208/28&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>SIGNING_BACKEND</td>
          <td class=""code""><pre>&#39;django.core.signing.TimestampSigner&#39;</pre></td>
        </tr>
      
        <tr>
          <td>TEST_RUNNER</td>
          <td class=""code""><pre>&#39;django.test.runner.DiscoverRunner&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_USE_TLS</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>TIME_FORMAT</td>
          <td class=""code""><pre>&#39;P&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_AGE</td>
          <td class=""code""><pre>31449600</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_ENABLED</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>FILE_UPLOAD_PERMISSIONS</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>FRONT_SITEMAP_ENABLED</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>DATETIME_FORMAT</td>
          <td class=""code""><pre>&#39;N j, Y, P&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_SERIALIZER</td>
          <td class=""code""><pre>&#39;django.contrib.sessions.serializers.JSONSerializer&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGE_CODE</td>
          <td class=""code""><pre>&#39;en-us&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DJMAIL_MAX_RETRY_NUMBER</td>
          <td class=""code""><pre>3</pre></td>
        </tr>
      
        <tr>
          <td>CACHE_MIDDLEWARE_ALIAS</td>
          <td class=""code""><pre>&#39;default&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LOGIN_URL</td>
          <td class=""code""><pre>&#39;/auth/login/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>INTERNAL_IPS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_NAME</td>
          <td class=""code""><pre>&#39;csrftoken&#39;</pre></td>
        </tr>
      
        <tr>
          <td>FIRST_DAY_OF_WEEK</td>
          <td class=""code""><pre>0</pre></td>
        </tr>
      
        <tr>
          <td>DATE_INPUT_FORMATS</td>
          <td class=""code""><pre>(&#39;%Y-%m-%d&#39;,
 &#39;%m/%d/%Y&#39;,
 &#39;%d/%m/%Y&#39;,
 &#39;%b %d %Y&#39;,
 &#39;%b %d, %Y&#39;,
 &#39;%d %b %Y&#39;,
 &#39;%d %b, %Y&#39;,
 &#39;%B %d %Y&#39;,
 &#39;%B %d, %Y&#39;,
 &#39;%d %B %Y&#39;,
 &#39;%d %B, %Y&#39;)</pre></td>
        </tr>
      
        <tr>
          <td>INSTALLED_APPS</td>
          <td class=""code""><pre>[&#39;django.contrib.auth&#39;,
 &#39;django.contrib.contenttypes&#39;,
 &#39;django.contrib.sessions&#39;,
 &#39;django.contrib.messages&#39;,
 &#39;django.contrib.admin&#39;,
 &#39;django.contrib.staticfiles&#39;,
 &#39;django.contrib.sitemaps&#39;,
 &#39;taiga.base&#39;,
 &#39;taiga.base.api&#39;,
 &#39;taiga.locale&#39;,
 &#39;taiga.events&#39;,
 &#39;taiga.front&#39;,
 &#39;taiga.users&#39;,
 &#39;taiga.userstorage&#39;,
 &#39;taiga.external_apps&#39;,
 &#39;taiga.projects&#39;,
 &#39;taiga.projects.references&#39;,
 &#39;taiga.projects.custom_attributes&#39;,
 &#39;taiga.projects.history&#39;,
 &#39;taiga.projects.notifications&#39;,
 &#39;taiga.projects.attachments&#39;,
 &#39;taiga.projects.likes&#39;,
 &#39;taiga.projects.votes&#39;,
 &#39;taiga.projects.milestones&#39;,
 &#39;taiga.projects.epics&#39;,
 &#39;taiga.projects.userstories&#39;,
 &#39;taiga.projects.tasks&#39;,
 &#39;taiga.projects.issues&#39;,
 &#39;taiga.projects.wiki&#39;,
 &#39;taiga.searches&#39;,
 &#39;taiga.timeline&#39;,
 &#39;taiga.mdrender&#39;,
 &#39;taiga.export_import&#39;,
 &#39;taiga.feedback&#39;,
 &#39;taiga.stats&#39;,
 &#39;taiga.hooks.github&#39;,
 &#39;taiga.hooks.gitlab&#39;,
 &#39;taiga.hooks.bitbucket&#39;,
 &#39;taiga.hooks.gogs&#39;,
 &#39;taiga.webhooks&#39;,
 &#39;djmail&#39;,
 &#39;django_jinja&#39;,
 &#39;django_jinja.contrib._humanize&#39;,
 &#39;sr&#39;,
 &#39;easy_thumbnails&#39;,
 &#39;raven.contrib.django.raven_compat&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>REST_FRAMEWORK</td>
          <td class=""code""><pre>{&#39;DATETIME_FORMAT&#39;: &#39;%Y-%m-%dT%H:%M:%S%z&#39;,
 &#39;DEFAULT_AUTHENTICATION_CLASSES&#39;: (&#39;taiga.auth.backends.Token&#39;,
                                    &#39;taiga.auth.backends.Session&#39;,
                                    &#39;taiga.external_apps.auth_backends.Token&#39;),
 &#39;DEFAULT_THROTTLE_CLASSES&#39;: (&#39;taiga.base.throttling.AnonRateThrottle&#39;,
                              &#39;taiga.base.throttling.UserRateThrottle&#39;),
 &#39;DEFAULT_THROTTLE_RATES&#39;: {&#39;anon&#39;: None,
                            &#39;create-memberships&#39;: None,
                            &#39;import-dump-mode&#39;: &#39;1/minute&#39;,
                            &#39;import-mode&#39;: None,
                            &#39;user&#39;: None},
 &#39;EXCEPTION_HANDLER&#39;: &#39;taiga.base.exceptions.exception_handler&#39;,
 &#39;FILTER_BACKEND&#39;: &#39;taiga.base.filters.FilterBackend&#39;,
 &#39;MAX_PAGINATE_BY&#39;: 1000,
 &#39;PAGINATE_BY&#39;: 30,
 &#39;PAGINATE_BY_PARAM&#39;: &#39;page_size&#39;}</pre></td>
        </tr>
      
        <tr>
          <td>MEDIA_ROOT</td>
          <td class=""code""><pre>&#39;/home/taiga/taiga-back/media&#39;</pre></td>
        </tr>
      
        <tr>
          <td>IGNORABLE_404_STARTS</td>
          <td class=""code""><pre>(&#39;/phpmyadmin/&#39;,)</pre></td>
        </tr>
      
        <tr>
          <td>SITES</td>
          <td class=""code""><pre>{&#39;api&#39;: {&#39;domain&#39;: &#39;localhost:8000&#39;, &#39;name&#39;: &#39;api&#39;, &#39;scheme&#39;: &#39;http&#39;},
 &#39;front&#39;: {&#39;domain&#39;: &#39;qualif.taiga.adventiel.com&#39;,
           &#39;name&#39;: &#39;front&#39;,
           &#39;scheme&#39;: &#39;http&#39;}}</pre></td>
        </tr>
      
        <tr>
          <td>YEAR_MONTH_FORMAT</td>
          <td class=""code""><pre>&#39;F Y&#39;</pre></td>
        </tr>
      
        <tr>
          <td>FIXTURE_DIRS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>USE_X_FORWARDED_PORT</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_USE_SSL</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>USER_EMAIL_ALLOWED_DOMAINS</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>MIGRATION_MODULES</td>
          <td class=""code""><pre>{}</pre></td>
        </tr>
      
        <tr>
          <td>USE_TZ</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_CACHE_ALIAS</td>
          <td class=""code""><pre>&#39;default&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_SSL_CERTFILE</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>TEST_NON_SERIALIZED_APPS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>ATOMIC_REQUESTS</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>NUMBER_GROUPING</td>
          <td class=""code""><pre>0</pre></td>
        </tr>
      
        <tr>
          <td>DECIMAL_SEPARATOR</td>
          <td class=""code""><pre>&#39;.&#39;</pre></td>
        </tr>
      
        <tr>
          <td>MAX_PENDING_MEMBERSHIPS</td>
          <td class=""code""><pre>30</pre></td>
        </tr>
      
        <tr>
          <td>CACHE_MIDDLEWARE_KEY_PREFIX</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_DEFAULT_ROUTING_KEY</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGE_COOKIE_PATH</td>
          <td class=""code""><pre>&#39;/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_TIMEZONE</td>
          <td class=""code""><pre>&#39;Europe/Madrid&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_DEFAULT_EXCHANGE_TYPE</td>
          <td class=""code""><pre>&#39;topic&#39;</pre></td>
        </tr>
      
        <tr>
          <td>AUTH_PASSWORD_VALIDATORS</td>
          <td class=""code""><pre>&#39;********************&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SHORT_DATETIME_FORMAT</td>
          <td class=""code""><pre>&#39;m/d/Y P&#39;</pre></td>
        </tr>
      
        <tr>
          <td>SR</td>
          <td class=""code""><pre>{&#39;social&#39;: {&#39;github_url&#39;: &#39;https://github.com/taigaio&#39;,
            &#39;twitter_url&#39;: &#39;https://twitter.com/taigaio&#39;},
 &#39;support&#39;: {&#39;email&#39;: &#39;support@taiga.io&#39;,
             &#39;mailing_list&#39;: &#39;https://groups.google.com/forum/#!forum/taigaio&#39;,
             &#39;url&#39;: &#39;https://tree.taiga.io/support&#39;},
 &#39;taigaio_url&#39;: &#39;https://taiga.io&#39;}</pre></td>
        </tr>
      
        <tr>
          <td>FORCE_SCRIPT_NAME</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_REDIRECT_EXEMPT</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>ALLOWED_INCLUDE_ROOTS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>FILE_UPLOAD_TEMP_DIR</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>SECURE_HSTS_SECONDS</td>
          <td class=""code""><pre>0</pre></td>
        </tr>
      
        <tr>
          <td>TIME_ZONE</td>
          <td class=""code""><pre>&#39;UTC&#39;</pre></td>
        </tr>
      
        <tr>
          <td>STATIC_ROOT</td>
          <td class=""code""><pre>&#39;/home/taiga/taiga-back/static&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_PORT</td>
          <td class=""code""><pre>25</pre></td>
        </tr>
      
        <tr>
          <td>SEND_BROKEN_LINK_EMAILS</td>
          <td class=""code""><pre>True</pre></td>
        </tr>
      
        <tr>
          <td>SHORT_DATE_FORMAT</td>
          <td class=""code""><pre>&#39;m/d/Y&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_DEFAULT_QUEUE</td>
          <td class=""code""><pre>&#39;tasks&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_EXCEPTION_REPORTER_FILTER</td>
          <td class=""code""><pre>&#39;django.views.debug.SafeExceptionReporterFilter&#39;</pre></td>
        </tr>
      
        <tr>
          <td>MEDIA_URL</td>
          <td class=""code""><pre>&#39;http://qualif.taiga.adventiel.com/media/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>ABSOLUTE_URL_OVERRIDES</td>
          <td class=""code""><pre>{}</pre></td>
        </tr>
      
        <tr>
          <td>DATETIME_INPUT_FORMATS</td>
          <td class=""code""><pre>[&#39;%Y-%m-%d %H:%M:%S&#39;,
 &#39;%Y-%m-%d %H:%M:%S.%f&#39;,
 &#39;%Y-%m-%d %H:%M&#39;,
 &#39;%Y-%m-%d&#39;,
 &#39;%m/%d/%Y %H:%M:%S&#39;,
 &#39;%m/%d/%Y %H:%M:%S.%f&#39;,
 &#39;%m/%d/%Y %H:%M&#39;,
 &#39;%m/%d/%Y&#39;,
 &#39;%m/%d/%y %H:%M:%S&#39;,
 &#39;%m/%d/%y %H:%M:%S.%f&#39;,
 &#39;%m/%d/%y %H:%M&#39;,
 &#39;%m/%d/%y&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_CHARSET</td>
          <td class=""code""><pre>&#39;utf-8&#39;</pre></td>
        </tr>
      
        <tr>
          <td>FILE_UPLOAD_DIRECTORY_PERMISSIONS</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATE_CONTEXT_PROCESSORS</td>
          <td class=""code""><pre>[&#39;django.contrib.auth.context_processors.auth&#39;,
 &#39;django.template.context_processors.debug&#39;,
 &#39;django.template.context_processors.i18n&#39;,
 &#39;django.template.context_processors.media&#39;,
 &#39;django.template.context_processors.static&#39;,
 &#39;django.template.context_processors.tz&#39;,
 &#39;django.contrib.messages.context_processors.messages&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>MONTH_DAY_FORMAT</td>
          <td class=""code""><pre>&#39;F j&#39;</pre></td>
        </tr>
      
        <tr>
          <td>MAX_PRIVATE_PROJECTS_PER_USER</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>FILE_CHARSET</td>
          <td class=""code""><pre>&#39;utf-8&#39;</pre></td>
        </tr>
      
        <tr>
          <td>STATS_CACHE_TIMEOUT</td>
          <td class=""code""><pre>3600</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_COOKIE_NAME</td>
          <td class=""code""><pre>&#39;sessionid&#39;</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_QUEUES</td>
          <td class=""code""><pre>(&lt;unbound Queue tasks -&gt; &lt;unbound Exchange &#39;&#39;(direct)&gt; -&gt; task.#&gt;,
 &lt;unbound Queue transient -&gt; &lt;unbound Exchange &#39;&#39;(direct)&gt; -&gt; transient.#&gt;)</pre></td>
        </tr>
      
        <tr>
          <td>TEMPLATES</td>
          <td class=""code""><pre>[{&#39;APP_DIRS&#39;: True,
  &#39;BACKEND&#39;: &#39;django_jinja.backend.Jinja2&#39;,
  &#39;DIRS&#39;: [&#39;/home/taiga/taiga-back/templates&#39;],
  &#39;OPTIONS&#39;: {&#39;context_processors&#39;: [&#39;django.contrib.auth.context_processors.auth&#39;,
                                     &#39;django.template.context_processors.request&#39;,
                                     &#39;django.template.context_processors.i18n&#39;,
                                     &#39;django.template.context_processors.media&#39;,
                                     &#39;django.template.context_processors.static&#39;,
                                     &#39;django.template.context_processors.tz&#39;,
                                     &#39;django.contrib.messages.context_processors.messages&#39;,
                                     &#39;d&#39;,
                                     &#39;j&#39;,
                                     &#39;a&#39;,
                                     &#39;n&#39;,
                                     &#39;g&#39;,
                                     &#39;o&#39;,
                                     &#39;.&#39;,
                                     &#39;t&#39;,
                                     &#39;e&#39;,
                                     &#39;m&#39;,
                                     &#39;p&#39;,
                                     &#39;l&#39;,
                                     &#39;a&#39;,
                                     &#39;t&#39;,
                                     &#39;e&#39;,
                                     &#39;.&#39;,
                                     &#39;c&#39;,
                                     &#39;o&#39;,
                                     &#39;n&#39;,
                                     &#39;t&#39;,
                                     &#39;e&#39;,
                                     &#39;x&#39;,
                                     &#39;t&#39;,
                                     &#39;_&#39;,
                                     &#39;p&#39;,
                                     &#39;r&#39;,
                                     &#39;o&#39;,
                                     &#39;c&#39;,
                                     &#39;e&#39;,
                                     &#39;s&#39;,
                                     &#39;s&#39;,
                                     &#39;o&#39;,
                                     &#39;r&#39;,
                                     &#39;s&#39;,
                                     &#39;.&#39;,
                                     &#39;d&#39;,
                                     &#39;e&#39;,
                                     &#39;b&#39;,
                                     &#39;u&#39;,
                                     &#39;g&#39;],
              &#39;match_extension&#39;: &#39;.jinja&#39;}},
 {&#39;APP_DIRS&#39;: True,
  &#39;BACKEND&#39;: &#39;django.template.backends.django.DjangoTemplates&#39;,
  &#39;DIRS&#39;: [&#39;/home/taiga/taiga-back/templates&#39;],
  &#39;OPTIONS&#39;: {&#39;context_processors&#39;: [&#39;django.contrib.auth.context_processors.auth&#39;,
                                     &#39;django.template.context_processors.request&#39;,
                                     &#39;django.template.context_processors.i18n&#39;,
                                     &#39;django.template.context_processors.media&#39;,
                                     &#39;django.template.context_processors.static&#39;,
                                     &#39;django.template.context_processors.tz&#39;,
                                     &#39;django.contrib.messages.context_processors.messages&#39;]}}]</pre></td>
        </tr>
      
        <tr>
          <td>DISALLOWED_USER_AGENTS</td>
          <td class=""code""><pre>[]</pre></td>
        </tr>
      
        <tr>
          <td>SOUTH_MIGRATION_MODULES</td>
          <td class=""code""><pre>{&#39;easy_thumbnails&#39;: &#39;easy_thumbnails.south_migrations&#39;}</pre></td>
        </tr>
      
        <tr>
          <td>FILE_UPLOAD_HANDLERS</td>
          <td class=""code""><pre>[&#39;django.core.files.uploadhandler.MemoryFileUploadHandler&#39;,
 &#39;django.core.files.uploadhandler.TemporaryFileUploadHandler&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>CSRF_COOKIE_HTTPONLY</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_EXPIRE_AT_BROWSER_CLOSE</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>SESSION_ENGINE</td>
          <td class=""code""><pre>&#39;django.contrib.sessions.backends.db&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_CONTENT_TYPE</td>
          <td class=""code""><pre>&#39;text/html&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEFAULT_FILE_STORAGE</td>
          <td class=""code""><pre>&#39;taiga.base.storage.FileSystemStorage&#39;</pre></td>
        </tr>
      
        <tr>
          <td>LOGOUT_URL</td>
          <td class=""code""><pre>&#39;/accounts/logout/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>DEBUG_PROPAGATE_EXCEPTIONS</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>EVENTS_PUSH_BACKEND_OPTIONS</td>
          <td class=""code""><pre>{&#39;url&#39;: &#39;amqp://taiga:taigapwd@localhost:5672/taiga&#39;}</pre></td>
        </tr>
      
        <tr>
          <td>LANGUAGES_BIDI</td>
          <td class=""code""><pre>[&#39;he&#39;, &#39;ar&#39;, &#39;fa&#39;, &#39;ur&#39;]</pre></td>
        </tr>
      
        <tr>
          <td>MAX_PUBLIC_PROJECTS_PER_USER</td>
          <td class=""code""><pre>None</pre></td>
        </tr>
      
        <tr>
          <td>PUBLIC_REGISTER_ENABLED</td>
          <td class=""code""><pre>False</pre></td>
        </tr>
      
        <tr>
          <td>CELERY_RESULT_BACKEND</td>
          <td class=""code""><pre>&#39;redis://localhost:6379/0&#39;</pre></td>
        </tr>
      
        <tr>
          <td>EMAIL_HOST_USER</td>
          <td class=""code""><pre>&#39;user&#39;</pre></td>
        </tr>
      
        <tr>
          <td>ADMIN_MEDIA_PREFIX</td>
          <td class=""code""><pre>&#39;http://qualif.taiga.adventiel.com/static/admin/&#39;</pre></td>
        </tr>
      
        <tr>
          <td>FRONT_SITEMAP_CACHE_TIMEOUT</td>
          <td class=""code""><pre>86400</pre></td>
        </tr>
      
        <tr>
          <td>WSGI_APPLICATION</td>
          <td class=""code""><pre>&#39;taiga.wsgi.application&#39;</pre></td>
        </tr>
      
    </tbody>
  </table>

</div>

  <div id=""explanation"">
    <p>
      You're seeing this error because you have <code>DEBUG = True</code> in your
      Django settings file. Change that to <code>False</code>, and Django will
      display a standard page generated by the handler for this status code.
    </p>
  </div>

</body>
</html>
```"
751,taigaio,taiga-back,4,closed,903,7,https://api.github.com/repos/taigaio/taiga-back/issues/903/comments,https://github.com/taigaio/taiga-back/issues/903,[],[bug] 500 Internal Server Error on API user-storage,"Hello,

I just finished to install my own instance of Taiga reading the [Setup production guide](https://taigaio.github.io/taiga-doc/dist/setup-production.html).

Taiga works well but I have 500 or 404 error sometimes.
One of them is when I try to update a user story status (from the us, backlog, kanban views), I got 

> PATCH http://taiga.mycloud.com/api/v1/userstories/6 500 Internal Server Error
> {""error"": ""Server application error""}

Here is the /home/taiga/logs/gunicorn.stderr.log
```
taiga@taiga:~/logs$ cat gunicorn.stderr.log 
ERROR:2016-12-22 17:39:43,246: Internal Server Error: /api/v1/userstories/6
Traceback (most recent call last):
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 33, in _make_rabbitmq_connection
    (authdata, host) = parse_result.netloc.split(""@"")
ValueError: not enough values to unpack (expected 2, got 1)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 446, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 443, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 207, in partial_update
    return self.update(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/api.py"", line 276, in update
    return super().update(request, *args, **kwargs)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/base/decorators.py"", line 60, in decorator
    return func(self, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 200, in update
    self.post_save(self.object, created=False)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/api.py"", line 196, in post_save
    status=obj.status)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/api.py"", line 178, in _reorder_if_needed
    milestone=milestone)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/services.py"", line 102, in update_userstories_order_in_bulk
    projectid=project.pk)
  File ""/home/taiga/taiga-back/taiga/events/events.py"", line 102, in emit_event_for_ids
    data=data)
  File ""/home/taiga/taiga-back/taiga/events/events.py"", line 52, in emit_event
    channel=channel)
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 52, in emit_event
    connection = _make_rabbitmq_connection(self.url)
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 35, in _make_rabbitmq_connection
    raise RuntimeError(""Invalid url"") from e
RuntimeError: Invalid url
```

Which additional informations do you need ?

Thank you

EDIT : 

I have the same error when I try to add multiple US in an Epic.
Stories are well created but not attached to the Epic.
```
ERROR:2016-12-22 18:28:52,089: Internal Server Error: /api/v1/epics/1/related_userstories/bulk_create
Traceback (most recent call last):
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 33, in _make_rabbitmq_connection
    (authdata, host) = parse_result.netloc.split(""@"")
ValueError: not enough values to unpack (expected 2, got 1)
```
"
758,taigaio,taiga-back,5,closed,896,1,https://api.github.com/repos/taigaio/taiga-back/issues/896/comments,https://github.com/taigaio/taiga-back/issues/896,[],"userstories_rolepoints.points_id set to NULL, breaks API","We're running a local install, at version 3.0.0.  

Some of the users reported a project that stopped responding to viewing of user stories, expanding of stories in epics, etc.  After some digging, we found that one of the records in the userstories_rolepoints table for the project had a NULL in the points_id column.  After updating the record with a valid value, everything worked. 

I unfortunately don't know how the data got corrupted, but I'm recording this here as an Issue in case anyone else sees it.  Following is the exception and trace from the API call:

```
DataError at /api/v1/userstories
invalid input syntax for type json
DETAIL:  Expected JSON value, but found ""}"".
CONTEXT:  JSON data, line 1: {""79"":}
Request Method:	GET
Request URL:	http://taiga.****.com/api/v1/userstories?epic=2&include_tasks=true&order_by=epic_order
Django Version:	1.9.2
Exception Type:	DataError
Exception Value:	
invalid input syntax for type json
DETAIL:  Expected JSON value, but found ""}"".
CONTEXT:  JSON data, line 1: {""79"":}
Exception Location:	/opt/taiga/.virtualenv/lib/python3.4/site-packages/django/db/backends/utils.py in execute, line 64
Python Executable:	/opt/taiga/.virtualenv/bin/python3.4
Python Version:	3.4.5
Python Path:	
['/opt/taiga/back',
 '/opt/taiga/back',
 '/opt/taiga/.virtualenv/bin',
 '/opt/taiga/.virtualenv/lib/python3.4/site-packages',
 '/usr/lib64/python34.zip',
 '/usr/lib64/python3.4',
 '/usr/lib64/python3.4/plat-linux',
 '/usr/lib64/python3.4/lib-dynload',
 '/opt/taiga/back']
Server time:	Fri, 9 Dec 2016 22:10:20 +0000
```

![data](https://cloud.githubusercontent.com/assets/8208/21066546/5403da2c-be23-11e6-8183-f9adbb3af479.png)
"
769,taigaio,taiga-back,5,closed,882,1,https://api.github.com/repos/taigaio/taiga-back/issues/882/comments,https://github.com/taigaio/taiga-back/issues/882,[],"conn = _connect(dsn, connection_factory=connection_factory, async=async) django.db.utils.OperationalError: FATAL: role ""mathiasburton"" does not exist","**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.
I found similar issues, but not mine. 

**Do you want to request a *feature* or report a *bug*?**
report a bug

**What is the current behavior?**
conn = _connect(dsn, connection_factory=connection_factory, async=async) django.db.utils.OperationalError: FATAL: role ""mathiasburton"" does not exist

**If the current behavior is a bug, please provide the steps to reproduce.**
I am trying to set up Taiga on an Azure ubuntu image. Most of the process has gone smoothly until I tried to populate the initial data. I'm following from http://taigaio.github.io/taiga-doc/dist/setup-production.html

I tried to run
python
 manage.py migrate —noinput

That gave me the error: 
conn = _connect(dsn, connection_factory=connection_factory, async=async) django.db.utils.OperationalError: FATAL: role ""mathiasburton"" does not exist

I tried to follow advice from:
http://stackoverflow.com/questions/12316819/django-database-connection-error 

and input 
psql -u postgres createuser -P mathiasburton

I got back 
/usr/lib/postgresql/9.5/bin/psql: invalid option -- 'u'

**What is the expected behavior?**
I was expecting to complete the initial data and have a new user admin with password 123123.

**Is it happening in taiga.io or in your own instance?**
my own instance on installation

**What browser/version are you using?**
I'm on an ubuntu image on Microsoft Azure on a mac, working in Chrome.

**Are there any console errors *(Ctrl + F12)* in red?**
no 

Thanks for reporting!
"
779,taigaio,taiga-back,5,closed,869,1,https://api.github.com/repos/taigaio/taiga-back/issues/869/comments,https://github.com/taigaio/taiga-back/issues/869,[],Taiga attempting to Send Emails to example@example.com,"I noticed that Taiga is attempting to send emails to example@example.com which are bouncing.

The email subjects are like these:

```
[Django] ERROR (EXTERNAL IP): Internal Server Error: /api/v1/memberships/49
[Django] ERROR (EXTERNAL IP): Internal Server Error: /api/v1/userstories/66
[Django] ERROR (EXTERNAL IP): Internal Server Error: /api/v1/projects/1
```

Taiga instance is self-hosted.

Taiga version is 2.1.0.

What can I do rectify this issue so that Django can deliver this error notifications to project SysAdmin email.

Thank you.
"
780,taigaio,taiga-back,5,closed,868,1,https://api.github.com/repos/taigaio/taiga-back/issues/868/comments,https://github.com/taigaio/taiga-back/issues/868,[],500 when creating project,"**Before adding an issue**
Please ensure that your issue is not already reported in our [issues list](https://tree.taiga.io/project/taiga/issues?order_by=-created_date).
If this issue was already reported, remember that you can upvote it to raise its importance.

**Do you want to request a _feature_ or report a _bug_?**
Bug

**What is the current behavior?**
When creating a project, it gives a error 500 - It creates the project but with no membership.

**If the current behavior is a bug, please provide the steps to reproduce.**
I don't know exactly when started to give this bug (because when I first set instance, everything was working just fine). You just need to create any project, public or private, with superadmin or normal user.

**What is the expected behavior?**
Create a project correctly.

**Is it happening in taiga.io or in your own instance?**
Own instance.

**What browser/version are you using?**
Chromium 54

**Are there any console errors _(Ctrl + F12)_ in red?**
Yeah. I'll show stack trace on log.

```
ERROR:2016-10-25 14:52:46,749: Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 106, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 446, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 443, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 100, in create
    self.object = validator.save(force_insert=True)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1089, in save
    self.object = super().save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 648, in save
    self.save_object(self.object, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 1107, in save_object
    obj.save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 291, in save
    super().save(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 700, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 737, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 192, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 61, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 907, in apply_to_project
    for epic_status in self.epic_statuses:
TypeError: 'NoneType' object is not iterable
(END)
```

Thanks for reporting!
"
794,taigaio,taiga-back,5,closed,854,6,https://api.github.com/repos/taigaio/taiga-back/issues/854/comments,https://github.com/taigaio/taiga-back/issues/854,[],"""TypeError: 'NoneType' object is not iterable"", when I try to create a project","When I try to create a project taiga return:

ERROR:2016-10-17 21:40:17,336: Internal Server Error: /admin/projects/project/add/
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/admin/options.py"", line 541, in wrapper
    return self.admin_site.admin_view(view)(_args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, _args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/cache.py"", line 57, in _wrapped_view_func
    response = view_func(request, _args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/admin/sites.py"", line 244, in inner
    return view(request, _args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/admin/options.py"", line 1437, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(_args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, _args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(_args2, *_kwargs2)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/admin/options.py"", line 1378, in changeform_view
    self.save_model(request, new_object, form, not add)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/admin/options.py"", line 991, in save_model
    obj.save()
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 298, in save
    super().save(_args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 700, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 737, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 192, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 61, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 914, in apply_to_project
    for epic_status in self.epic_statuses:
TypeError: 'NoneType' object is not iterable
"
808,taigaio,taiga-back,5,closed,838,1,https://api.github.com/repos/taigaio/taiga-back/issues/838/comments,https://github.com/taigaio/taiga-back/issues/838,[],ImportError: cannot import name Celery,"**taiga@ip-my-ip:~/taiga-back$ python manage.py migrate --noinput**

Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 327, in execute
    django.setup()
  File ""/usr/local/lib/python2.7/dist-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/config.py"", line 116, in create
    mod = import_module(mod_path)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/taiga/taiga-back/taiga/**init**.py"", line 19, in <module>
    from . import celery
  File ""/home/taiga/taiga-back/taiga/celery.py"", line 21, in <module>
    from celery import Celery

**ImportError: cannot import name Celery**

**celery 3.1.24 ???** 

The requirements.txt has 3.1.20
"
811,taigaio,taiga-back,5,closed,835,1,https://api.github.com/repos/taigaio/taiga-back/issues/835/comments,https://github.com/taigaio/taiga-back/issues/835,[],ImportError after update to 3.0,"After update under [this tutorial](https://taigaio.github.io/taiga-doc/dist/upgrades.html) on step of migration I got ImportError.

**(taiga)taiga@astracode:~/taiga-back$ python manage.py migrate --noinput**
Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 327, in execute
    django.setup()
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/apps.py"", line 41, in ready
    from .api import SlackHookViewSet
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/api.py"", line 26, in <module>
    from . import tasks
  File ""/home/taiga/virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/tasks.py"", line 31, in <module>
    from taiga.users.services import get_photo_or_gravatar_url
**ImportError: cannot import name 'get_photo_or_gravatar_url'**
"
814,taigaio,taiga-back,5,closed,832,4,https://api.github.com/repos/taigaio/taiga-back/issues/832/comments,https://github.com/taigaio/taiga-back/issues/832,[],"Error after upgrade : ""cannot import name 'get_photo_or_gravatar_url'""","Hi!

I just upgraded Taiga to 3.0.0 using this procedure:

```
git checkout stable
workon taiga
git pull
pip install --upgrade -r requirements.txt
python manage.py migrate --noinput
```

And I'm stuck at `python manage.py migrate --noinput` with this error:

```
Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 327, in execute
    django.setup()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/apps.py"", line 41, in ready
    from .api import SlackHookViewSet
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/api.py"", line 26, in <module>
    from . import tasks
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/tasks.py"", line 31, in <module>
    from taiga.users.services import get_photo_or_gravatar_url
ImportError: cannot import name 'get_photo_or_gravatar_url'
```

What should I do to fix this error ?
"
820,taigaio,taiga-back,5,closed,824,4,https://api.github.com/repos/taigaio/taiga-back/issues/824/comments,https://github.com/taigaio/taiga-back/issues/824,[],AttributeError: 'ProjectSerializer' object has no attribute 'fields,"Not sure should I post here. I was getting below error when I browse api's. I setup the postgres and taiga on mac. Can some one give me hint what went wrong.

After setting up the postgres and taiga when I run in my browser 
Traceback (most recent call last):
  File ""/Users/durga/Projects/taiga-back-master/tvenv/lib/python3.4/site-packages/django/core/handlers/base.py"", line 174, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Users/durga/Projects/taiga-back-master/tvenv/lib/python3.4/site-packages/django/core/handlers/base.py"", line 172, in get_response
    response = response.render()
  File ""/Users/durga/Projects/taiga-back-master/tvenv/lib/python3.4/site-packages/django/template/response.py"", line 160, in render
    self.content = self.rendered_content
  File ""/Users/durga/Projects/taiga-back-master/taiga/base/response.py"", line 100, in rendered_content
    ret = renderer.render(self.data, media_type, context)
  File ""/Users/durga/Projects/taiga-back-master/taiga/base/api/renderers.py"", line 633, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File ""/Users/durga/Projects/taiga-back-master/taiga/base/api/renderers.py"", line 583, in get_context
    raw_data_post_form = self.get_raw_data_form(view, ""POST"", request)
  File ""/Users/durga/Projects/taiga-back-master/taiga/base/api/renderers.py"", line 524, in get_raw_data_form
    for name, field in serializer.fields.items():
AttributeError: 'ProjectSerializer' object has no attribute 'fields
"
827,taigaio,taiga-back,5,closed,813,9,https://api.github.com/repos/taigaio/taiga-back/issues/813/comments,https://github.com/taigaio/taiga-back/issues/813,[],error on removing sample project,"Hi, I followed the installation guide on ubuntu 16.04.
When I tried to delete the sample project 0, it 500 error as below
(I turned on the DEBUG flag to get details)

```
IntegrityError at /admin/projects/project/
insert or update on table ""timeline_timeline"" violates foreign key constraint ""timeline_timeline_project_id_58d5eadd_fk_projects_project_id""
DETAIL:  Key (project_id)=(1) is not present in table ""projects_project""
```

details:

```
Request Method: POST
Request URL:    http://10.62.41.188/admin/projects/project/
Django Version: 1.9.2
Exception Type: IntegrityError
Exception Value:    
insert or update on table ""timeline_timeline"" violates foreign key constraint ""timeline_timeline_project_id_58d5eadd_fk_projects_project_id""
DETAIL:  Key (project_id)=(1) is not present in table ""projects_project"".
Exception Location: /home/devops/.virtualenvs/taiga/lib/python3.5/site-packages/django/db/backends/base/base.py in _commit, line 211
Python Executable:  /home/devops/.virtualenvs/taiga/bin/python3.5
Python Version: 3.5.2
Python Path:    
['/home/devops/taiga-back',
 '/home/devops/taiga-back',
 '/home/devops/.virtualenvs/taiga/bin',
 '/home/devops/.virtualenvs/taiga/lib/python3.5/site-packages',
 '/home/devops/.virtualenvs/taiga/lib/python35.zip',
 '/home/devops/.virtualenvs/taiga/lib/python3.5',
 '/home/devops/.virtualenvs/taiga/lib/python3.5/plat-x86_64-linux-gnu',
 '/home/devops/.virtualenvs/taiga/lib/python3.5/lib-dynload',
 '/usr/lib/python3.5',
 '/usr/lib/python3.5/plat-x86_64-linux-gnu',
 '/home/devops/taiga-back']
```

is it caused by incompatible python/postgres version?
"
839,taigaio,taiga-back,5,closed,794,4,https://api.github.com/repos/taigaio/taiga-back/issues/794/comments,https://github.com/taigaio/taiga-back/issues/794,[],html5lib.sanitizer not found,"Hi, I'm struggling a lot because of the html5lib module. It seems that the version that I have installed does not have *.sanitizer class. I have followed 4 times all the install instructions and I still get this. It could be that the taiga-back to be outdated considering that the latest release of html5lib was on July 16 2016 https://pypi.python.org/pypi/html5lib ?

see the error trace bellow:
Traceback (most recent call last):
  File ""manage.py"", line 29, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 327, in execute
    django.setup()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 47, in <module>
    from taiga.projects.notifications.services import (
  File ""/home/taiga/taiga-back/taiga/projects/notifications/services.py"", line 36, in <module>
    from taiga.projects.history.services import (make_key_from_model_object,
  File ""/home/taiga/taiga-back/taiga/projects/history/services.py"", line 47, in <module>
    from taiga.mdrender.service import render as mdrender
  File ""/home/taiga/taiga-back/taiga/mdrender/service.py"", line 21, in <module>
    import bleach
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/bleach/__init__.py"", line 8, in <module>
    from html5lib.sanitizer import HTMLSanitizer
ImportError: No module named 'html5lib.sanitizer'
"
843,taigaio,taiga-back,6,closed,790,0,https://api.github.com/repos/taigaio/taiga-back/issues/790/comments,https://github.com/taigaio/taiga-back/issues/790,[],ImportError: No module named 'django' ,"Seems to be a python installation related issue.

Following the instructions (which are superb by the way) step by step, very carefully for the third time.
During the install using pip, an error presents (in screenshot & below) and then subsequent steps fail.

Several various errors;

Could not find a tag or branch 'dbb8d7375066859f897604132bd437832d2014ea', assuming commit.
warning: no files found matching 'sampledatahelper/static/_'
warning: no files found matching 'sampledatahelper/l10n/names/_'
warning: no files found matching '_.txt' under directory 'docs'
Single threaded build, not installing mp_compile:1 processes
warning: no previously-included files found matching '.editorconfig'
warning: no files found matching '_.py' under directory 'Lib'
Ultimately ending here:
screenshot 2016-07-18 at 21 23 20

I included the VM python & pip versions in the screenshot:

Python 3.4.3
pip 1.5.4 from /home/aj/.virtualenvs/taiga/lib/python3.4/site-packages (python 3.4)
Kindly let me know what I should do to recover...

Thanks!
"
844,taigaio,taiga-back,6,closed,789,24,https://api.github.com/repos/taigaio/taiga-back/issues/789/comments,https://github.com/taigaio/taiga-back/issues/789,[],ImportError: No module named 'django' ,"Seems to be a python installation related issue.

Following the instructions (which are superb by the way) step by step, very carefully for the third time.
During the install using pip, an error presents (in screenshot & below) and then subsequent steps fail.

Several various errors; 
-  Could not find a tag or branch 'dbb8d7375066859f897604132bd437832d2014ea', assuming commit.
- warning: no files found matching 'sampledatahelper/static/*'
- warning: no files found matching 'sampledatahelper/l10n/names/*'
- warning: no files found matching '*.txt' under directory 'docs'
- Single threaded build, not installing mp_compile:1 processes
- warning: no previously-included files found matching '.editorconfig'
- warning: no files found matching '*.py' under directory 'Lib'

Ultimately ending here:
![screenshot 2016-07-18 at 21 23 20](https://cloud.githubusercontent.com/assets/9566542/16935505/fd7d1f30-4d2d-11e6-94a4-8b48bc0aba1c.png)

I included the VM python & pip versions in the screenshot:
- Python 3.4.3
- pip 1.5.4 from /home/aj/.virtualenvs/taiga/lib/python3.4/site-packages (python 3.4)

Kindly let me know what I should do to recover...

Thanks!
"
846,taigaio,taiga-back,6,closed,786,3,https://api.github.com/repos/taigaio/taiga-back/issues/786/comments,https://github.com/taigaio/taiga-back/issues/786,[],URL definied in taiga.front.urls not working,"I recently installed taiga backend and frontend and startet to play around. Then I tried to invite a friend but the invitation link was not working. I did some research and found out that all urls defined in taiga/front/urls.py are not working:

```
Page not found (404)
Request Method: GET
Request URL:    http://example.com/forgot-password
Using the URLconf defined in taiga.urls, Django tried these URL patterns, in this order:
^api/v1/
^api/v1/api-auth/
^admin/
^static\/(?P<path>.*)$
^media\/(?P<path>.*)$
^api/v1/
^api/v1/
The current URL, forgot-password, didn't match any of these.
You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 404 page.
```

This also affects URLs such as http://example.com/project/demo/backlog when accessing them directly while navigating (clicking) to the backlog from / (home) works.
"
866,taigaio,taiga-back,6,closed,757,1,https://api.github.com/repos/taigaio/taiga-back/issues/757/comments,https://github.com/taigaio/taiga-back/issues/757,[],"when I add an userstory, it response 500","{""log"":""ERROR:2016-06-13 01:21:24,109: Internal Server Error: /api/v1/userstories\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131270331Z""}
{""log"":""Traceback (most recent call last):\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131324326Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/core/handlers/base.py\"", line 111, in get_response\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13134385Z""}
{""log"":""    response = wrapped_callback(request, _callback_args, *_callback_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131353301Z""}
{""log"":""  File \""/taiga/taiga/base/api/viewsets.py\"", line 81, in view\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13136089Z""}
{""log"":""    return self.dispatch(request, _args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13136837Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/views/decorators/csrf.py\"", line 57, in wrapped_view\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131375057Z""}
{""log"":""    return view_func(_args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131382208Z""}
{""log"":""  File \""/taiga/taiga/base/api/views.py\"", line 420, in dispatch\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13138883Z""}
{""log"":""    response = self.handle_exception(exc)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131398458Z""}
{""log"":""  File \""/taiga/taiga/base/api/views.py\"", line 417, in dispatch\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131407146Z""}
{""log"":""    response = handler(request, _args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131414451Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/transaction.py\"", line 394, in inner\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131422471Z""}
{""log"":""    return func(_args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131429718Z""}
{""log"":""  File \""/taiga/taiga/projects/userstories/api.py\"", line 172, in create\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13143625Z""}
{""log"":""    response = super().create(_args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131443098Z""}
{""log"":""  File \""/taiga/taiga/base/api/mixins.py\"", line 72, in create\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131449695Z""}
{""log"":""    self.object = serializer.save(force_insert=True)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.1314563Z""}
{""log"":""  File \""/taiga/taiga/base/api/serializers.py\"", line 1055, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131463191Z""}
{""log"":""    self.object = super().save(**kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131469949Z""}
{""log"":""  File \""/taiga/taiga/base/api/serializers.py\"", line 614, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131476525Z""}
{""log"":""    self.save_object(self.object, **kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131483258Z""}
{""log"":""  File \""/taiga/taiga/base/api/serializers.py\"", line 1073, in save_object\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131489705Z""}
{""log"":""    obj.save(**kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131496534Z""}
{""log"":""  File \""/taiga/taiga/projects/userstories/models.py\"", line 118, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131502695Z""}
{""log"":""    super().save(_args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131509601Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/models/base.py\"", line 589, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131515947Z""}
{""log"":""    force_update=force_update, update_fields=update_fields)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13152865Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/models/base.py\"", line 626, in save_base\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.13155745Z""}
{""log"":""    update_fields=update_fields, raw=raw, using=using)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131568317Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/dispatch/dispatcher.py\"", line 198, in send\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131577949Z""}
{""log"":""    response = receiver(signal=self, sender=sender, *_named)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131587171Z""}
{""log"":""  File \""/taiga/taiga/projects/references/models.py\"", line 92, in attach_sequence\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131596043Z""}
{""log"":""    instance.save(update_fields=['ref'])\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131603277Z""}
{""log"":""  File \""/taiga/taiga/projects/userstories/models.py\"", line 118, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131610197Z""}
{""log"":""    super().save(_args, *_kwargs)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131617155Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/models/base.py\"", line 589, in save\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131623598Z""}
{""log"":""    force_update=force_update, update_fields=update_fields)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131630322Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/models/base.py\"", line 626, in save_base\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131636933Z""}
{""log"":""    update_fields=update_fields, raw=raw, using=using)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131643685Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/dispatch/dispatcher.py\"", line 198, in send\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131650287Z""}
{""log"":""    response = receiver(signal=self, sender=sender, *_named)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131656863Z""}
{""log"":""  File \""/taiga/taiga/events/signal_handlers.py\"", line 43, in on_save_any_model\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131663281Z""}
{""log"":""    connection.on_commit(emit_event)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131670039Z""}
{""log"":""  File \""/usr/local/lib/python3.4/site-packages/django/db/**init**.py\"", line 40, in **getattr**\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131676154Z""}
{""log"":""    return getattr(connections[DEFAULT_DB_ALIAS], item)\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131682583Z""}
{""log"":""AttributeError: 'DatabaseWrapper' object has no attribute 'on_commit'\n"",""stream"":""stderr"",""time"":""2016-06-13T01:21:24.131689121Z""}
"
867,taigaio,taiga-back,6,closed,756,7,https://api.github.com/repos/taigaio/taiga-back/issues/756/comments,https://github.com/taigaio/taiga-back/issues/756,[],[Django] ERROR (EXTERNAL IP): Internal Server Error,"I'm still having trouble config. the email settings. I'm receiving this error when Im trying to send emails.
Thanks.
"
887,taigaio,taiga-back,6,closed,733,5,https://api.github.com/repos/taigaio/taiga-back/issues/733/comments,https://github.com/taigaio/taiga-back/issues/733,[],Internal Server Error: Attribute Error for only one project,"Hi,

I have hosted taiga locally and we have hosted few projects on this platform. Apparently, only one project we have(one of the heavily used ones) is having an issue where we are able to see only empty screens in this project. 

/api/v1/projects/by_slug?slug=admin-fresco-play-1 is giving me 500 internal error. On checking the unicorn.stderr.log below is the trace,

`AttributeError: 'QuerySet' object has no attribute 'user'
ERROR:2016-05-25 06:41:19,555: Internal Server Error: /api/v1/projects/by_slug
Traceback (most recent call last):
  File ""/home/ubuntu/taiga-back/taiga/base/api/serializers.py"", line 617, in data
    self._data = [self.to_native(item) for item in obj]
  File ""/home/ubuntu/taiga-back/taiga/base/api/serializers.py"", line 617, in <listcomp>
    self._data = [self.to_native(item) for item in obj]
  File ""/home/ubuntu/taiga-back/taiga/base/api/serializers.py"", line 396, in to_native
    value = field.field_to_native(obj, field_name)
  File ""/home/ubuntu/taiga-back/taiga/base/api/fields.py"", line 1082, in field_to_native
    value = getattr(self.parent, self.method_name)(obj)
  File ""/home/ubuntu/taiga-back/taiga/projects/serializers.py"", line 239, in get_photo
    return get_photo_or_gravatar_url(membership.user)
  File ""/home/ubuntu/taiga-back/taiga/users/services.py"", line 87, in get_photo_or_gravatar_url
    return get_photo_url(user.photo) if user.photo else get_gravatar_url(user.email)
  File ""/home/ubuntu/taiga-back/taiga/users/services.py"", line 78, in get_photo_url
    url = get_thumbnailer(photo)[settings.THN_AVATAR_SMALL].url
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/easy_thumbnails/files.py"", line 342, in __getitem__
    return self.get_thumbnail(options, silent_template_exception=True)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/easy_thumbnails/files.py"", line 517, in get_thumbnail
    silent_template_exception=silent_template_exception)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/easy_thumbnails/files.py"", line 404, in generate_thumbnail
    subsampling=subsampling)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/easy_thumbnails/engine.py"", line 71, in save_image
    image.save(destination, format=format, **options)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/PIL/Image.py"", line 1675, in save
    save_handler(self, fp, filename)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/PIL/PngImagePlugin.py"", line 757, in _save
    data = name + b""\0\0"" + zlib.compress(im.info[""icc_profile""])
TypeError: 'tuple' does not support the buffer interface

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 149, in get_response
    except:
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 147, in get_response
    callback, param_dict = resolver.resolve404()
  File ""/home/ubuntu/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/home/ubuntu/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    PendingDeprecationWarning)
  File ""/home/ubuntu/taiga-back/taiga/base/api/views.py"", line 445, in dispatch
    response = self.handle_exception(exc)
  File ""/home/ubuntu/taiga-back/taiga/base/api/views.py"", line 442, in dispatch
    response = handler(request, _args, *_kwargs)
`

Could you please help on this?

Regards,
Dwarak
"
895,taigaio,taiga-back,6,closed,725,6,https://api.github.com/repos/taigaio/taiga-back/issues/725/comments,https://github.com/taigaio/taiga-back/issues/725,[],/api/v1/userstories & RabbitMQ bug,"I noticed a bug with /api/v1/userstories & RabbitMQ bug. I am running the latest stable branches of taiga-front and taiga-back (2016-05-13T09:00+0200).

The visible consequences is that upon the creation of a user story, the ""new US"" form/layer isn't removed, without any message, and you have to manually close it. And when deleting a US, same thing, except that an error message is shown ""Oomla..."".

But in both cases, the job is actually done (a new US is created, and then deleted).

```
ERROR:2016-05-13 07:21:54,087: Internal Server Error: /api/v1/userstories/32
Traceback (most recent call last):
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 32, in _make_rabbitmq_connection
    (authdata, host) = parse_result.netloc.split(""@"")
ValueError: too many values to unpack (expected 2)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 445, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 442, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/transaction.py"", line 267, in __exit__
    connection.set_autocommit(True)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 397, in set_autocommit
    self.run_and_clear_commit_hooks()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 623, in run_and_clear_commit_hooks
    func()
  File ""/home/taiga/taiga-back/taiga/events/signal_handlers.py"", line 59, in <lambda>
    emit_event = lambda: events.emit_event_for_model(instance, sessionid=sesionid, type=""delete"")
  File ""/home/taiga/taiga-back/taiga/events/events.py"", line 78, in emit_event_for_model
    data=data)
  File ""/home/taiga/taiga-back/taiga/events/events.py"", line 47, in emit_event
    channel=channel)
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 51, in emit_event
    connection = _make_rabbitmq_connection(self.url)
  File ""/home/taiga/taiga-back/taiga/events/backends/rabbitmq.py"", line 34, in _make_rabbitmq_connection
    raise RuntimeError(""Invalid url"") from e
RuntimeError: Invalid url

```
"
899,taigaio,taiga-back,6,closed,721,1,https://api.github.com/repos/taigaio/taiga-back/issues/721/comments,https://github.com/taigaio/taiga-back/pull/721,"[{""default"": false, ""name"": ""backport"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/backport"", ""color"": ""5319e7"", ""node_id"": ""MDU6TGFiZWwzMjA0OTc4NzY="", ""id"": 320497876}, {""default"": false, ""name"": ""ready to merge"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/ready%20to%20merge"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWwxNDIxMTg0NDc="", ""id"": 142118447}]",Made minor fixes over load_dump and dump_project commands,"``` bash
> ./manage.py load_dump
```

```
Trying import local.py settings...
usage: manage.py load_dump [-h] [--version] [-v {0,1,2,3}]
                           [--settings SETTINGS] [--pythonpath PYTHONPATH]
                           [--traceback] [--no-color] [-o]
                           dump_file owner_email
manage.py load_dump: error: the following arguments are required: dump_file, owner_email
```

``` bash
> ./manage.py load_dump --help
```

```
Trying import local.py settings...
usage: manage.py load_dump [-h] [--version] [-v {0,1,2,3}]
                           [--settings SETTINGS] [--pythonpath PYTHONPATH]
                           [--traceback] [--no-color] [-o]
                           dump_file owner_email

Import a project from a json file

positional arguments:
  dump_file             The path to a dump file (.json).
  owner_email           The email of the new project owner.

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  -v {0,1,2,3}, --verbosity {0,1,2,3}
                        Verbosity level; 0=minimal output, 1=normal output,
                        2=verbose output, 3=very verbose output
  --settings SETTINGS   The Python path to a settings module, e.g.
                        ""myproject.settings.main"". If this isn't provided, the
                        DJANGO_SETTINGS_MODULE environment variable will be
                        used.
  --pythonpath PYTHONPATH
                        A directory to add to the Python path, e.g.
                        ""/home/djangoprojects/myproject"".
  --traceback           Raise on CommandError exceptions
  --no-color            Don't colorize the command output.
  -o, --overwrite       Overwrite the project if exists
```
"
900,taigaio,taiga-back,6,closed,720,8,https://api.github.com/repos/taigaio/taiga-back/issues/720/comments,https://github.com/taigaio/taiga-back/issues/720,[],Problem migrating,"Hi,

I'm running a CentOS 6.7 machine on VPS. I'm trying to install the backend but i'm on problems during the migration. I had several problems creating the virtualenv but i finally got it(I think so).

When I run ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/bin/python3.4 manage.py migrate --noinput"" or ""python3.4 manage.py migrate --noinput"" I get 
`(delme) [taiga@ISIwebsrvr taiga-back]$ /home/taiga/.pyenv/versions/miniconda3-3.9.1/bin/python3.4 manage.py migrate --noinput
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/site-packages/django/core/management/__init__.py"", line 327, in execute
    django.setup()
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/site-packages/django/apps/config.py"", line 116, in create
    mod = import_module(mod_path)
  File ""/home/taiga/.pyenv/versions/miniconda3-3.9.1/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2224, in _find_and_load_unlocked
ImportError: No module named 'taiga'`

I doesn't understand very well why I get this answer.

Anyway when I run ""python manage.py migrate --noinput""
`(delme) [taiga@ISIwebsrvr taiga-back]$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""manage.py"", line 8, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named 'django'
`
I have no idea how continue and solve this problem.
Any help will be wellcome.
Greetings.
"
909,taigaio,taiga-back,6,closed,710,1,https://api.github.com/repos/taigaio/taiga-back/issues/710/comments,https://github.com/taigaio/taiga-back/issues/710,[],error on upgrade,"Hi,

i wanted to update my taiga instance following the guide on http://taigaio.github.io/taiga-doc/dist/upgrades.html

when i did the following:
(taiga)taiga@magicserver:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 118, in create
    cls = getattr(mod, cls_name)
AttributeError: 'module' object has no attribute 'api'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/Util/_raw_api.py"", line 37, in <module>
    from cffi import FFI
ImportError: No module named 'cffi'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/taiga/taiga-back/taiga/base/api/settings.py"", line 202, in import_from_string
    module = importlib.import_module(module_path)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/taiga/taiga-back/taiga/external_apps/auth_backends.py"", line 22, in <module>
    from . import services
  File ""/home/taiga/taiga-back/taiga/external_apps/services.py"", line 25, in <module>
    from . import encryption
  File ""/home/taiga/taiga-back/taiga/external_apps/encryption.py"", line 18, in <module>
    from Crypto.PublicKey import RSA
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/PublicKey/RSA.py"", line 79, in <module>
    from Crypto.IO import PKCS8, PEM
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/IO/PKCS8.py"", line 73, in <module>
    from Crypto.IO._PBES import PBES1, PBES2, PbesError
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/IO/_PBES.py"", line 44, in <module>
    from Crypto.Cipher import DES, ARC2, DES3, AES
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/Cipher/__init__.py"", line 78, in <module>
    from Crypto.Cipher._mode_ecb import _create_ecb_cipher
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/Cipher/_mode_ecb.py"", line 29, in <module>
    from Crypto.Util._raw_api import (load_pycryptodome_raw_lib,
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/Crypto/Util/_raw_api.py"", line 94, in <module>
    from ctypes import (CDLL, c_void_p, byref, c_ulong, c_ulonglong, c_size_t,
  File ""/usr/lib/python3.4/ctypes/__init__.py"", line 7, in <module>
    from _ctypes import Union, Structure, Array
ImportError: /home/taiga/.virtualenvs/taiga/lib/python3.4/lib-dynload/_ctypes.cpython-34m-x86_64-linux-gnu.so: undefined symbol: _PyTraceback_Add

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 327, in execute
    django.setup()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 123, in create
    import_module(entry)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/taiga/taiga-back/taiga/base/api/__init__.py"", line 53, in <module>
    from .viewsets import ModelListViewSet
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 48, in <module>
    from . import views
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 134, in <module>
    class APIView(View):
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 138, in APIView
    authentication_classes = api_settings.DEFAULT_AUTHENTICATION_CLASSES
  File ""/home/taiga/taiga-back/taiga/base/api/settings.py"", line 238, in **getattr**
    val = perform_import(val, attr)
  File ""/home/taiga/taiga-back/taiga/base/api/settings.py"", line 190, in perform_import
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/taiga/taiga-back/taiga/base/api/settings.py"", line 190, in <listcomp>
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/taiga/taiga-back/taiga/base/api/settings.py"", line 206, in import_from_string
    raise ImportError(msg)
ImportError: Could not import 'taiga.external_apps.auth_backends.Token' for API setting 'DEFAULT_AUTHENTICATION_CLASSES'. ImportError: /home/taiga/.virtualenvs/taiga/lib/python3.4/lib-dynload/_ctypes.cpython-34m-x86_64-linux-gnu.so: undefined symbol: _PyTraceback_Add.

can you help me? what is wrong?

thank you in advance
"
910,taigaio,taiga-back,6,closed,709,7,https://api.github.com/repos/taigaio/taiga-back/issues/709/comments,https://github.com/taigaio/taiga-back/issues/709,[],Error generating timeline,"Using the latest stable version of taiga-back and taiga-front-dist.
Timeline shows empty with a moving circle animation. Try to run python manage.py rebuild_timeline and also tried after checking the management code at taiga/timeline/management, but didn't work. Spend quite sometime looks like some error with timeline signal in django but can't be sure. After running the command checked timeline_timeline table in postgres db and there are 0 records. It shows:

History entry: 2016-04-26 03:41:09.694628+00:00
History entry: 2016-04-26 03:57:38.081168+00:00
History entry: 2016-04-26 06:27:48.050187+00:00
History entry: 2016-04-26 06:28:11.463199+00:00
History entry: 2016-04-26 06:28:55.745807+00:00
History entry: 2016-04-26 06:29:05.769468+00:00

But then nothing in the timeline table and still can't see project or user timeline. Updating timeline with project id gives following:

---

 1/1 Project 1

---

Project: None
History entry: 2016-04-26 03:57:38.081168+00:00
History entry: 2016-04-26 06:27:48.050187+00:00
History entry: 2016-04-26 06:28:11.463199+00:00
History entry: 2016-04-26 06:28:55.745807+00:00
History entry: 2016-04-26 06:29:05.769468+00:00
"
921,taigaio,taiga-back,6,closed,698,1,https://api.github.com/repos/taigaio/taiga-back/issues/698/comments,https://github.com/taigaio/taiga-back/issues/698,[],Error on python manage.py migrate --noinput (Upgrade from 1.10),"I receive an error when trying to upgrade from 1.10

(taiga)matthias@SWIFFER-LINUX:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 327, in execute
    django.setup()
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 116, in create
    mod = import_module(mod_path)
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/apps.py"", line 20, in <module>
    from . import signal_handlers as handlers
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/signal_handlers.py"", line 19, in <module>
    from taiga.projects.history import services as history_service
  File ""/home/matthias/taiga-back/taiga/projects/history/services.py"", line 36, in <module>
    from django.contrib.contenttypes.models import ContentType
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/contrib/contenttypes/models.py"", line 159, in <module>
    class ContentType(models.Model):
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 94, in __new__
    app_config = apps.get_containing_app_config(module)
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 239, in get_containing_app_config
    self.check_apps_ready()
  File ""/home/matthias/.virtualenvs/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 124, in check_apps_ready
    raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.

any ideas what can cause this error ?
"
942,taigaio,taiga-back,7,closed,675,4,https://api.github.com/repos/taigaio/taiga-back/issues/675/comments,https://github.com/taigaio/taiga-back/issues/675,[],ASCII encoding on Pytho 3.4,"Hi all,
I have problem with this error message, only when i want to add new member with special chars in name to project.
Every answer to this message says i have to run taiga under 3.4 which i have(see in message).
I thing in Python 3.4 is no ecoding called 'ASCII' right? i recursivly search all /hom/taiga folder for string 'ascii' a iam not able find and useful results.

Error Message:
UnicodeEncodeError at /api/v1/memberships/bulk_create
'ascii' codec can't encode character '\xfd' in position 486: ordinal not in range(128)
Request Method: POST
Request URL:    http://dev.netlion.cz:8000/api/v1/memberships/bulk_create
Django Version: 1.8.9
Exception Type: UnicodeEncodeError
Exception Value:  
'ascii' codec can't encode character '\xfd' in position 486: ordinal not in range(128)
Exception Location: /home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/backends/console.py in write_message, line 23
Python Executable:  /home/taiga/.virtualenvs/taiga/bin/python3.4
Python Version: 3.4.2
Python Path:  
['/home/taiga/taiga-back',
 '/home/taiga/taiga-back',
 '/home/taiga/.virtualenvs/taiga/bin',
 '/home/taiga/.local/lib/python3.4/site-packages',
 '/home/taiga/.virtualenvs/taiga/lib/python3.4',
 '/home/taiga/.virtualenvs/taiga/lib/python3.4/plat-x86_64-linux-gnu',
 '/home/taiga/.virtualenvs/taiga/lib/python3.4/lib-dynload',
 '/usr/lib/python3.4',
 '/usr/lib/python3.4/plat-x86_64-linux-gnu',
 '/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages',
 '/home/taiga/taiga-back']
Server time:    Sun, 27 Mar 2016 18:22:04 +0000

I search answer now third day. Iam greatful for any answers. Thank you
"
955,taigaio,taiga-back,7,closed,658,4,https://api.github.com/repos/taigaio/taiga-back/issues/658/comments,https://github.com/taigaio/taiga-back/pull/658,"[{""default"": false, ""name"": ""ready to merge"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/ready%20to%20merge"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWwxNDIxMTg0NDc="", ""id"": 142118447}]",Replaced references to users.User with get_user_model(),"While playing with an integration of the latest stable tag of Taiga into an existing Django application, I noticed that I couldn't set my own `AUTH_USER_MODEL` without breaking everything, due to hardcoded references to `users.User`. So I replaced it with `get_user_model()` and `settings.AUTH_USER_MODEL`.

I had to shuffle some `__init__` code around to get everything working without `AppRegistryNotReady` errors.
"
958,taigaio,taiga-back,7,closed,655,4,https://api.github.com/repos/taigaio/taiga-back/issues/655/comments,https://github.com/taigaio/taiga-back/issues/655,[],Unable to add existing user to project,"I am unable to add an existing user to a project. I get error 500. 

ERROR:2016-03-04 12:17:07,223: Internal Server Error: /api/v1/memberships/bulk_create
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(_args, *_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 444, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 441, in dispatch
    response = handler(request, _args, *_kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/api.py"", line 530, in bulk_create
    precall=self.pre_save)
  File ""/home/taiga/taiga-back/taiga/projects/services/members.py"", line 31, in create_members_in_bulk
    db.save_in_bulk(members, callback, precall)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/taiga/taiga-back/taiga/base/utils/db.py"", line 96, in save_in_bulk
    callback(instance, created=created)
  File ""/home/taiga/taiga-back/taiga/projects/api.py"", line 565, in post_save
    services.send_invitation(invitation=object)
  File ""/home/taiga/taiga-back/taiga/projects/services/invitations.py"", line 16, in send_invitation
    email.send()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/message.py"", line 303, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/backends/smtp.py"", line 100, in send_messages
    new_conn_created = self.open()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/backends/smtp.py"", line 58, in open
    self.connection = connection_class(self.host, self.port, **connection_params)
  File ""/usr/lib/python3.4/smtplib.py"", line 242, in **init**
    (code, msg) = self.connect(host, port)
  File ""/usr/lib/python3.4/smtplib.py"", line 321, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File ""/usr/lib/python3.4/smtplib.py"", line 292, in _get_socket
    self.source_address)
  File ""/usr/lib/python3.4/socket.py"", line 494, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
  File ""/usr/lib/python3.4/socket.py"", line 533, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -2] Name or service not known

That user already has part in another two projects.

I send Request Headers and Payload in PNG
I send Response HTML in zip file

[response.zip](https://github.com/taigaio/taiga-back/files/158644/response.zip)
![captura](https://cloud.githubusercontent.com/assets/7081952/13527129/c8ba5806-e204-11e5-9c4f-715a6b739313.PNG)
"
964,taigaio,taiga-back,7,closed,649,11,https://api.github.com/repos/taigaio/taiga-back/issues/649/comments,https://github.com/taigaio/taiga-back/issues/649,[],problem with sending emails,"Hi, I have my own taiga production instance,  I have added external email provider smtp settings as described: 
https://poczta.onet.pl/pomoc/13224,0,,6,0,37,2,0,,pomoc.html
and user and password, but i am always getting: 

[02/Mar/2016 23:56:22] ""OPTIONS /api/v1/issues/1 HTTP/1.1"" 200 0
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2016-03-02 23:57:23,677: Internal Server Error: /api/v1/issues/1
Traceback (most recent call last):
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(_args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 444, in dispatch
    response = self.handle_exception(exc)
  File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 441, in dispatch
    response = handler(request, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 199, in partial_update
    return self.update(request, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/projects/issues/api.py"", line 144, in update
    return super().update(request, _args, *_kwargs)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/gearsoft/taiga-back/taiga/base/decorators.py"", line 60, in decorator
    return func(self, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 194, in update
    self.post_save(self.object, created=False)
  File ""/home/gearsoft/taiga-back/taiga/projects/occ/mixins.py"", line 84, in post_save
    super().post_save(obj, created)
  File ""/home/gearsoft/taiga-back/taiga/projects/history/mixins.py"", line 74, in post_save
    super().post_save(obj, created=created)
  File ""/home/gearsoft/taiga-back/taiga/projects/notifications/mixins.py"", line 106, in post_save
    self.send_notifications(obj)
  File ""/home/gearsoft/taiga-back/taiga/projects/notifications/mixins.py"", line 103, in send_notifications
    services.send_notifications(obj, history=history)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/gearsoft/taiga-back/taiga/projects/notifications/services.py"", line 236, in send_notifications
    send_sync_notifications(notification.id)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/gearsoft/taiga-back/taiga/projects/notifications/services.py"", line 293, in send_sync_notifications
    email.send(user.email, context, headers=headers)
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/djmail/template_mail.py"", line 125, in send
    return email.send()
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/message.py"", line 303, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/backends/smtp.py"", line 100, in send_messages
    new_conn_created = self.open()
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/mail/backends/smtp.py"", line 58, in open
    self.connection = connection_class(self.host, self.port, **connection_params)
  File ""/usr/lib/python3.4/smtplib.py"", line 242, in **init**
    (code, msg) = self.connect(host, port)
  File ""/usr/lib/python3.4/smtplib.py"", line 323, in connect
    (code, msg) = self.getreply()
  File ""/usr/lib/python3.4/smtplib.py"", line 376, in getreply
    raise SMTPServerDisconnected(""Connection unexpectedly closed"")
smtplib.SMTPServerDisconnected: Connection unexpectedly closed
[02/Mar/2016 23:58:23] ""PATCH /api/v1/issues/1 HTTP/1.1"" 500 37

Does anyone have an idea, what might be wrong,  (emails setting I have used, work with different applications)
"
966,taigaio,taiga-back,7,closed,647,1,https://api.github.com/repos/taigaio/taiga-back/issues/647/comments,https://github.com/taigaio/taiga-back/issues/647,[],unable to add comment to the issue,"Hi I have installed my own production taiga version on ubuntu 14.04 
When I try to add new comment to the issue I am getting the following error:

[01/Mar/2016 22:22:44] ""OPTIONS /api/v1/projects?member=4&order_by=memberships__user_order HTTP/1.1"" 200 0
[01/Mar/2016 22:22:45] ""OPTIONS /api/v1/projects/by_slug?slug=admin-beautysite HTTP/1.1"" 200 0
[01/Mar/2016 22:22:45] ""GET /api/v1/projects?member=4&order_by=memberships__user_order HTTP/1.1"" 200 1949
[01/Mar/2016 22:22:45] ""GET /api/v1/projects/by_slug?slug=admin-beautysite HTTP/1.1"" 200 7610
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/by_ref?page=1&project=3&ref=1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""GET /api/v1/issues/by_ref?page=1&project=3&ref=1 HTTP/1.1"" 200 1281
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/history/issue/1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/custom-attributes-values/1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/attachments?object_id=1&project=3 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""GET /api/v1/history/issue/1 HTTP/1.1"" 200 1183
[01/Mar/2016 22:22:47] ""GET /api/v1/issues/custom-attributes-values/1 HTTP/1.1"" 200 51
[01/Mar/2016 22:22:47] ""GET /api/v1/issues/attachments?object_id=1&project=3 HTTP/1.1"" 200 2
[01/Mar/2016 22:22:54] ""OPTIONS /api/v1/issues/1 HTTP/1.1"" 200 0
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2016-03-01 22:22:54,431: Internal Server Error: /api/v1/issues/1
Traceback (most recent call last):
File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django_sites/base.py"", line 85, in get_by_id
return Site(sites[id])
KeyError: 'front'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
response = wrapped_callback(request, callback_args, *callback_kwargs)
File ""/home/gearsoft/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
return self.dispatch(request, args, *kwargs)
File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
return view_func(args, *kwargs)
File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 444, in dispatch
response = self.handle_exception(exc)
File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 441, in dispatch
response = handler(request, args, *kwargs)
File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 199, in partial_update
return self.update(request, args, *kwargs)
File ""/home/gearsoft/taiga-back/taiga/projects/issues/api.py"", line 144, in update
return super().update(request, args, *kwargs)
File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
return func(args, *kwds)
File ""/home/gearsoft/taiga-back/taiga/base/decorators.py"", line 60, in decorator
return func(self, args, *kwargs)
File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 194, in update
self.post_save(self.object, created=False)
File ""/home/gearsoft/taiga-back/taiga/projects/occ/mixins.py"", line 84, in post_save
super().post_save(obj, created)
File ""/home/gearsoft/taiga-back/taiga/projects/history/mixins.py"", line 73, in post_save
self.persist_history_snapshot(obj=obj)
File ""/home/gearsoft/taiga-back/taiga/projects/history/mixins.py"", line 67, in persist_history_snapshot
notifications_services.analize_object_for_watchers(obj, comment, user)
File ""/home/gearsoft/taiga-back/taiga/projects/notifications/services.py"", line 111, in analize_object_for_watchers
, data = mdr.render_and_extract(obj.get_project(), ""\n"".join(texts))
File ""/home/gearsoft/taiga-back/taiga/mdrender/service.py"", line 122, in render_and_extract
result = bleach.clean(md.convert(text))
File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/markdown/__init_.py"", line 375, in convert
newRoot = treeprocessor.run(root)
File ""/home/gearsoft/taiga-back/taiga/mdrender/extensions/target_link.py"", line 38, in run
home_url = resolve(""home"")
File ""/home/gearsoft/taiga-back/taiga/front/templatetags/functions.py"", line 27, in resolve
site = get_site_by_id(""front"")
File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django_sites/base.py"", line 87, in get_by_id
raise exceptions.SiteNotFound(""Site with id '{}' not found"".format(id))
django_sites.exceptions.SiteNotFound: Site with id 'front' not found
[01/Mar/2016 22:23:04] ""PATCH /api/v1/issues/1 HTTP/1.1"" 500 37

my settings/local.py file looks like : 

MEDIA_URL = ""http:///media/""
STATIC_URL = ""http:///static/""
ADMIN_MEDIA_PREFIX = ""http:///static/admin/""
SITES[""front""][""scheme""] = ""http""
SITES[""front""][""domain""] = "":80""
and front is available under :80

Can anybody help?
"
967,taigaio,taiga-back,7,closed,646,7,https://api.github.com/repos/taigaio/taiga-back/issues/646/comments,https://github.com/taigaio/taiga-back/issues/646,[],unable to add comment to the issue,"Hi I have installed my own production taiga version on ubuntu 14.04 
When I try to add new comment to the issue I am getting the following error: 

[01/Mar/2016 22:22:44] ""OPTIONS /api/v1/projects?member=4&order_by=memberships__user_order HTTP/1.1"" 200 0
[01/Mar/2016 22:22:45] ""OPTIONS /api/v1/projects/by_slug?slug=admin-beautysite HTTP/1.1"" 200 0
[01/Mar/2016 22:22:45] ""GET /api/v1/projects?member=4&order_by=memberships__user_order HTTP/1.1"" 200 1949
[01/Mar/2016 22:22:45] ""GET /api/v1/projects/by_slug?slug=admin-beautysite HTTP/1.1"" 200 7610
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/by_ref?page=1&project=3&ref=1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""GET /api/v1/issues/by_ref?page=1&project=3&ref=1 HTTP/1.1"" 200 1281
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/history/issue/1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/custom-attributes-values/1 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""OPTIONS /api/v1/issues/attachments?object_id=1&project=3 HTTP/1.1"" 200 0
[01/Mar/2016 22:22:46] ""GET /api/v1/history/issue/1 HTTP/1.1"" 200 1183
[01/Mar/2016 22:22:47] ""GET /api/v1/issues/custom-attributes-values/1 HTTP/1.1"" 200 51
[01/Mar/2016 22:22:47] ""GET /api/v1/issues/attachments?object_id=1&project=3 HTTP/1.1"" 200 2
[01/Mar/2016 22:22:54] ""OPTIONS /api/v1/issues/1 HTTP/1.1"" 200 0
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2016-03-01 22:22:54,431: Internal Server Error: /api/v1/issues/1
Traceback (most recent call last):
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django_sites/base.py"", line 85, in get_by_id
    return Site(sites[id])
KeyError: 'front'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(_args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 444, in dispatch
    response = self.handle_exception(exc)
  File ""/home/gearsoft/taiga-back/taiga/base/api/views.py"", line 441, in dispatch
    response = handler(request, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 199, in partial_update
 return self.update(request, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/projects/issues/api.py"", line 144, in update
    return super().update(request, _args, *_kwargs)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(_args, *_kwds)
  File ""/home/gearsoft/taiga-back/taiga/base/decorators.py"", line 60, in decorator
    return func(self, _args, *_kwargs)
  File ""/home/gearsoft/taiga-back/taiga/base/api/mixins.py"", line 194, in update
    self.post_save(self.object, created=False)
  File ""/home/gearsoft/taiga-back/taiga/projects/occ/mixins.py"", line 84, in post_save
    super().post_save(obj, created)
  File ""/home/gearsoft/taiga-back/taiga/projects/history/mixins.py"", line 73, in post_save
    self.persist_history_snapshot(obj=obj)
  File ""/home/gearsoft/taiga-back/taiga/projects/history/mixins.py"", line 67, in persist_history_snapshot
    notifications_services.analize_object_for_watchers(obj, comment, user)
  File ""/home/gearsoft/taiga-back/taiga/projects/notifications/services.py"", line 111, in analize_object_for_watchers
    _, data = mdr.render_and_extract(obj.get_project(), ""\n"".join(texts))
  File ""/home/gearsoft/taiga-back/taiga/mdrender/service.py"", line 122, in render_and_extract
    result = bleach.clean(md.convert(text))
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/markdown/__init__.py"", line 375, in convert
    newRoot = treeprocessor.run(root)
  File ""/home/gearsoft/taiga-back/taiga/mdrender/extensions/target_link.py"", line 38, in run
    home_url = resolve(""home"")
  File ""/home/gearsoft/taiga-back/taiga/front/templatetags/functions.py"", line 27, in resolve
    site = get_site_by_id(""front"")
  File ""/home/gearsoft/.virtualenvs/taiga/lib/python3.4/site-packages/django_sites/base.py"", line 87, in get_by_id
    raise exceptions.SiteNotFound(""Site with id '{}' not found"".format(id))
django_sites.exceptions.SiteNotFound: Site with id 'front' not found
[01/Mar/2016 22:23:04] ""PATCH /api/v1/issues/1 HTTP/1.1"" 500 37

Can anybody help? 
"
977,taigaio,taiga-back,7,closed,636,9,https://api.github.com/repos/taigaio/taiga-back/issues/636/comments,https://github.com/taigaio/taiga-back/issues/636,[],is_owner / is_admin mismatch,"Hi, 

recently I've upgraded stable to latest revision, and even after having all the migrations run, there was problem with `is_owner` vs. `is_admin` column naming.

I have manually renamed the column `is_admin` to `is_owner`, and the problem was fixed, but I don't know how things could have gotten to such state.

Could you please let me know, if there is anything you know about that could cause such problems, or if it is possible to create a fixup for this, so it won't happen in the future?

Thank you

Stacktrace as follows (from `gunicorn.stdout.log`):

```
Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: column projects_membership.is_owner does not exist
LINE 1: ...p"".""project_id"", ""projects_membership"".""role_id"", ""projects_...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 105, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 444, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 441, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 139, in list
    return response.Ok(serializer.data)
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 613, in data
    self._data = [self.to_native(item) for item in obj]
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 613, in <listcomp>
    self._data = [self.to_native(item) for item in obj]
  File ""/home/taiga/taiga-back/taiga/base/api/serializers.py"", line 396, in to_native
    value = field.field_to_native(obj, field_name)
  File ""/home/taiga/taiga-back/taiga/base/api/fields.py"", line 1082, in field_to_native
    value = getattr(self.parent, self.method_name)(obj)
  File ""/home/taiga/taiga-back/taiga/projects/serializers.py"", line 266, in get_my_permissions
    return get_user_project_permissions(self.context[""request""].user, obj)
  File ""/home/taiga/taiga-back/taiga/permissions/service.py"", line 80, in get_user_project_permissions
    membership = _get_user_project_membership(user, project)
  File ""/home/taiga/taiga-back/taiga/permissions/service.py"", line 28, in _get_user_project_membership
    return user.cached_membership_for_project(project)
  File ""/home/taiga/taiga-back/taiga/users/models.py"", line 159, in cached_membership_for_project
    self._fill_cached_memberships()
  File ""/home/taiga/taiga-back/taiga/users/models.py"", line 147, in _fill_cached_memberships
    for membership in qs.all():
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/query.py"", line 162, in __iter__
    self._fetch_all()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/query.py"", line 965, in _fetch_all
    self._result_cache = list(self.iterator())
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/query.py"", line 238, in iterator
    results = compiler.execute_sql()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/sql/compiler.py"", line 840, in execute_sql
    cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/utils.py"", line 98, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: column projects_membership.is_owner does not exist
LINE 1: ...p"".""project_id"", ""projects_membership"".""role_id"", ""projects_...
```
"
991,taigaio,taiga-back,7,closed,621,1,https://api.github.com/repos/taigaio/taiga-back/issues/621/comments,https://github.com/taigaio/taiga-back/pull/621,[],Removed 'load url from future' for compatibility with Django 1.9,"Since taiga-back is based on Django 1.9, it generates TemplateSyntaxError error: 'url' is not a valid tag or filter in tag library 'future' which is loaded implicitly in 1.9.
"
1009,taigaio,taiga-back,7,closed,603,2,https://api.github.com/repos/taigaio/taiga-back/issues/603/comments,https://github.com/taigaio/taiga-back/issues/603,[],AttributeError: 'Manager' object has no attribute '_prefetch_related_lookups',"I'm following the instructions at http://taigaio.github.io/taiga-doc/dist/setup-production.html.

After installing taiga-back, I receive this error when visiting the `/api/v1/projects` endpoint (and many others in `/api/v1/`)

I am using the `stable` branch, installed as per the instructions on a Ubuntu 14.04 distro, as `taiga` user.

```
[05/Feb/2016 11:33:31] ""GET /api/v1/ HTTP/1.1"" 200 15460
ERROR:2016-02-05 11:33:57,391: Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 164, in get_response
    response = response.render()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/response.py"", line 158, in render
    self.content = self.rendered_content
  File ""/home/taiga/taiga-back/taiga/base/response.py"", line 98, in rendered_content
    ret = renderer.render(self.data, media_type, context)
  File ""/home/taiga/taiga-back/taiga/base/api/renderers.py"", line 632, in render
    context = self.get_context(data, accepted_media_type, renderer_context)
  File ""/home/taiga/taiga-back/taiga/base/api/renderers.py"", line 609, in get_context
    ""post_form"": self.get_rendered_html_form(view, ""POST"", request),
  File ""/home/taiga/taiga-back/taiga/base/api/renderers.py"", line 492, in get_rendered_html_form
    return form_renderer.render(data, self.accepted_media_type, self.renderer_context)
  File ""/home/taiga/taiga-back/taiga/base/api/renderers.py"", line 390, in render
    return template.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/backends/django.py"", line 74, in render
    return self.template.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 210, in render
    return self._render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 202, in _render
    return self.nodelist.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 919, in render_node
    return node.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/defaulttags.py"", line 224, in render
    nodelist.append(node.render(context))
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/defaulttags.py"", line 329, in render
    return nodelist.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 919, in render_node
    return node.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 959, in render
    output = self.filter_expression.resolve(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 648, in resolve
    obj = self.var.resolve(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 789, in resolve
    value = self._resolve_lookup(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/template/base.py"", line 849, in _resolve_lookup
    current = current()
  File ""/home/taiga/taiga-back/taiga/base/api/fields.py"", line 197, in widget_html
    return self.widget.render(self._name, self._value)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/forms/widgets.py"", line 513, in render
    options = self.render_options(choices, [value])
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/forms/widgets.py"", line 539, in render_options
    for option_value, option_label in chain(self.choices, choices):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/forms/models.py"", line 1095, in __iter__
    method = 'all' if self.queryset._prefetch_related_lookups else 'iterator'
AttributeError: 'Manager' object has no attribute '_prefetch_related_lookups'
[05/Feb/2016 11:33:58] ""GET /api/v1/projects HTTP/1.1"" 500 27
```
"
1033,taigaio,taiga-back,8,closed,579,3,https://api.github.com/repos/taigaio/taiga-back/issues/579/comments,https://github.com/taigaio/taiga-back/issues/579,[],I'm deploying taiga and then crash it,"I'm deploying Taiga. In the step in which the requirements are installed:

pip install -r requirements.txt

An accident occurs, the log says:

  Downloading from URL https://pypi.python.org/packages/source/a/anyjson/anyjson-0.3.3.tar.gz#md5=2ea28d6ec311aeeebaf993cb3008b27c (from https://pypi.python.org/simple/anyjson/)
  Running setup.py (path:/tmp/pip_build_ecardoz/anyjson/setup.py) egg_info for package anyjson
    running egg_info
    creating pip-egg-info/anyjson.egg-info
    writing pip-egg-info/anyjson.egg-info/PKG-INFO
    writing top-level names to pip-egg-info/anyjson.egg-info/top_level.txt
    writing dependency_links to pip-egg-info/anyjson.egg-info/dependency_links.txt
    writing manifest file 'pip-egg-info/anyjson.egg-info/SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

```
reading manifest file 'pip-egg-info/anyjson.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'pip-egg-info/anyjson.egg-info/SOURCES.txt'
```

  Source in /tmp/pip_build_ecardoz/anyjson has version 0.3.3, which satisfies requirement anyjson>=0.3.3 (from kombu>=3.0.29,<3.1->celery==3.1.19->-r requirements.txt (line 24))
Installing collected packages: Django, django-picklefield, django-sampledatahelper, gunicorn, psycopg2, Pillow, pytz, six, amqp, djmail, django-pgjson, djorm-pgarray, django-jinja, jinja2, pygments, django-sites, Markdown, fn, diff-match-patch, requests, django-sr, easy-thumbnails, celery, redis, Unidecode, raven, bleach, django-ipware, premailer, cssutils, django-transactional-cleanup, lxml, pyjwkest, django-pglocks, sampledata, MarkupSafe, kombu, billiard, contextlib2, cssselect, django-transaction-hooks, pycrypto, future, anyjson
Cleaning up...
  Removing temporary dir /tmp/pip_build_ecardoz...
Exception:
Traceback (most recent call last):
  File ""/usr/lib/python2.7/dist-packages/pip/basecommand.py"", line 122, in main
    status = self.run(options, args)
  File ""/usr/lib/python2.7/dist-packages/pip/commands/install.py"", line 283, in run
    requirement_set.install(install_options, global_options, root=options.root_path)
  File ""/usr/lib/python2.7/dist-packages/pip/req.py"", line 1436, in install
    requirement.install(install_options, global_options, _args, *_kwargs)
  File ""/usr/lib/python2.7/dist-packages/pip/req.py"", line 672, in install
    self.move_wheel_files(self.source_dir, root=root)
  File ""/usr/lib/python2.7/dist-packages/pip/req.py"", line 902, in move_wheel_files
    pycompile=self.pycompile,
  File ""/usr/lib/python2.7/dist-packages/pip/wheel.py"", line 206, in move_wheel_files
    clobber(source, lib_dir, True)
  File ""/usr/lib/python2.7/dist-packages/pip/wheel.py"", line 193, in clobber
    os.makedirs(destsubdir)
  File ""/usr/lib/python2.7/os.py"", line 157, in makedirs
    mkdir(name, mode)
OSError: [Errno 13] Permission denied: '/usr/local/lib/python2.7/dist-packages/django'
"
1043,taigaio,taiga-back,8,closed,569,12,https://api.github.com/repos/taigaio/taiga-back/issues/569/comments,https://github.com/taigaio/taiga-back/issues/569,[],New install 404 on pretty much everything backend related,"Heya,

Just finished a installation doing copy/paste from the [Documentation](https://taigaio.github.io/taiga-doc/dist/setup-production.html#circus-and-gunicorn) and everything at least on the server seems to work as expected just that pretty much whatever is not /login gives a 404

``` bash
taiga@ip-172-30-1-147:~/taiga-back$ curl -IL 127.0.0.1:8001/api
HTTP/1.1 404 NOT FOUND
Server: gunicorn/19.3.0
Date: Sat, 09 Jan 2016 18:30:35 GMT
Connection: close
Transfer-Encoding: chunked
Access-Control-Allow-Headers: content-type,x-requested-with,authorization,accept-encoding,x-disable-pagination,x-lazy-pagination,x-host,x-session-id
Access-Control-Expose-Headers: x-pagination-count,x-paginated,x-paginated-by,x-pagination-current,x-pagination-next,x-pagination-prev,x-site-host,x-site-register,taiga-info-total-opened-milestones,taiga-info-total-closed-milestones
Access-Control-Max-Age: 3600
Access-Control-Allow-Origin: *
Vary: Accept-Language
Content-Language: en
Access-Control-Allow-Credentials: true
Access-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE,PATCH,HEAD
Content-Type: text/html
```

Same if you go trough the front-end:

``` bash
marius@delirium:~$ curl -IL domain.tld/api
HTTP/1.1 404 NOT FOUND
Server: nginx/1.4.6 (Ubuntu)
Date: Sat, 09 Jan 2016 18:32:17 GMT
Content-Type: text/html; charset=utf-8
Connection: keep-alive
Access-Control-Allow-Headers: content-type,x-requested-with,authorization,accept-encoding,x-disable-pagination,x-lazy-pagination,x-host,x-session-id
Access-Control-Expose-Headers: x-pagination-count,x-paginated,x-paginated-by,x-pagination-current,x-pagination-next,x-pagination-prev,x-site-host,x-site-register,taiga-info-total-opened-milestones,taiga-info-total-closed-milestones
Access-Control-Max-Age: 3600
Access-Control-Allow-Origin: *
Vary: Accept-Language
Content-Language: en
Access-Control-Allow-Credentials: true
Access-Control-Allow-Methods: POST,GET,OPTIONS,PUT,DELETE,PATCH,HEAD
```

This is my `local.py` : 

``` python
taiga@ip-172-30-1-147:~/taiga-back$ cat settings/local.py
from .common import *
#from .celery import *

MEDIA_URL = ""http://domain.tld/media/""
STATIC_URL = ""http://domain.tld/static/""
ADMIN_MEDIA_PREFIX = ""http://domain.tld/static/admin/""
SITES[""front""][""scheme""] = ""http""
SITES[""front""][""domain""] = ""domain.tld""

SECRET_KEY = ""theveryultratopsecretkey""
EVENTS_PUSH_BACKEND = ""taiga.events.backends.rabbitmq.EventsPushBackend""
EVENTS_PUSH_BACKEND_OPTIONS = {""url"": ""amqp://taiga:password@localhost:5672/taiga""}

#BROKER_URL = 'amqp://guest:guest@localhost:5672/'
#CELERY_RESULT_BACKEND = 'redis://localhost:6379/0'
#CELERY_ENABLED = True

DEBUG = True
TEMPLATE_DEBUG = True
PUBLIC_REGISTER_ENABLED = True

DEFAULT_FROM_EMAIL = ""no-reply@domain.tld""
SERVER_EMAIL = DEFAULT_FROM_EMAIL

# Uncomment and populate with proper connection parameters
# for enable email sending. EMAIL_HOST_USER should end by @domain.tld
#EMAIL_BACKEND = ""django.core.mail.backends.smtp.EmailBackend""
#EMAIL_USE_TLS = False
#EMAIL_HOST = ""localhost""
#EMAIL_HOST_USER = """"
#EMAIL_HOST_PASSWORD = """"
#EMAIL_PORT = 25

# Uncomment and populate with proper connection parameters
# for enable github login/singin.
#GITHUB_API_CLIENT_ID = ""yourgithubclientid""
#GITHUB_API_CLIENT_SECRET = ""yourgithubclientsecret""
```

```
Using the URLconf defined in taiga.urls, Django tried these URL patterns, in this order:

    ^api/v1/
    ^api/v1/
    ^api/v1/api-auth/
    ^admin/
    ^static\/(?P<path>.*)$
    ^media\/(?P<path>.*)$
    ^api/v1/

The current URL, api, didn't match any of these.
```

Any idea? Ah, logs are not too helpful too after enabling debug
"
1049,taigaio,taiga-back,8,closed,562,1,https://api.github.com/repos/taigaio/taiga-back/issues/562/comments,https://github.com/taigaio/taiga-back/pull/562,"[{""default"": false, ""name"": ""incomplete"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/incomplete"", ""color"": ""fabada"", ""node_id"": ""MDU6TGFiZWwyNzgxOTMyNDM="", ""id"": 278193243}]",Remove usage of django.core.files.storage.Storage.path,"When using an alternate default storage (like S3 with django-storages) `django.core.files.storage.Storage.path` raises NotImplementedError. Fixes #554

These changes allow me to use S3 as my file storage with my install of Taiga. Hopefully these changes don't break users that are using the default `django.core.files.storage.FileSystemStorage`. I couldn't think of a reason to use the full filesystem path, but perhaps I'm missing something.
"
1056,taigaio,taiga-back,8,closed,554,5,https://api.github.com/repos/taigaio/taiga-back/issues/554/comments,https://github.com/taigaio/taiga-back/issues/554,[],"Support custom storage backends like django-storages (S3, Azure, CloudFiles, etc)","I am using [Deis](http://deis.io/) to host my own Taiga installation. I am running it all on Amazon Web Services, and using S3 for file storage. For my other Django projects I use django-storages' S3BotoStorage as the storage backend. However, when I enabled it in the taiga-back project I ran into a few problem areas. 

When deleting avatars and when creating a project export I would receive the following error.

`NotImplementedError: This backend doesn't support absolute paths.`

There were 3 places in the code that were using [Storage.path](https://docs.djangoproject.com/en/1.8/ref/files/storage/#django.core.files.storage.Storage.path) which raises NotImplementedError for non-local storage systems. 

I have fixed these files in my local fork. Only 3 lines needed changed that I have found so far. I'd like to discuss contributing back these changes to the main project, but I am hesitant to open a Pull Request because while the changes work on my system, I'm not sure how they would affect installations using the default local filesystem. 
"
1065,taigaio,taiga-back,8,closed,544,2,https://api.github.com/repos/taigaio/taiga-back/issues/544/comments,https://github.com/taigaio/taiga-back/issues/544,[],"psycopg2.OperationalError: FATAL:  role ""admin"" does not exist","Hello I'm trying to deploy an instance from stable branch and when i try to create the database 

```
python manage.py migrate --noinput
```

I got 

```
Trying import local.py settings...
Trying import development.py settings...
Raven is not configured (logging is disabled). Please see the documentation for more information.
Traceback (most recent call last):
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 130, in ensure_connection
    self.connect()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/transaction_hooks/mixin.py"", line 75, in connect
    super(TransactionHooksDatabaseWrapperMixin, self).connect(*a, **kw)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 119, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 176, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/psycopg2/__init__.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: FATAL:  role ""admin"" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 93, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 19, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/migrations/loader.py"", line 47, in __init__
    self.build_graph()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/migrations/loader.py"", line 188, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/migrations/recorder.py"", line 59, in applied_migrations
    self.ensure_schema()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/migrations/recorder.py"", line 49, in ensure_schema
    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 162, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 135, in _cursor
    self.ensure_connection()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 130, in ensure_connection
    self.connect()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/utils.py"", line 98, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 130, in ensure_connection
    self.connect()
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/transaction_hooks/mixin.py"", line 75, in connect
    super(TransactionHooksDatabaseWrapperMixin, self).connect(*a, **kw)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/base/base.py"", line 119, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 176, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/admin/taiga-back/taiga/lib/python3.4/site-packages/psycopg2/__init__.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
django.db.utils.OperationalError: FATAL:  role ""admin"" does not exist
```
"
1066,taigaio,taiga-back,8,closed,543,14,https://api.github.com/repos/taigaio/taiga-back/issues/543/comments,https://github.com/taigaio/taiga-back/issues/543,[],Can not create tasks on some user stories: 'NoneType' object has no attribute 'is_closed',"Hello,

I can not create tasks on some user stories that have been promoted from an issue with the following exception:  

```
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/views.py"", line 420, in dispatch
    response = self.handle_exception(exc)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/views.py"", line 417, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/mixins.py"", line 72, in create
    self.object = serializer.save(force_insert=True)
  File ""/usr/local/taiga/taiga-back/taiga/projects/notifications/mixins.py"", line 243, in save
    obj = super(EditableWatchedResourceModelSerializer, self).save(**kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/serializers.py"", line 1055, in save
    self.object = super().save(**kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/serializers.py"", line 614, in save
    self.save_object(self.object, **kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/serializers.py"", line 1073, in save_object
    obj.save(**kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/projects/tasks/models.py"", line 86, in save
    return super().save(*args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 734, in save
    force_update=force_update, update_fields=update_fields)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 758, in save_base
    update_fields=update_fields)
  File ""/usr/local/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 189, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/usr/local/taiga/taiga-back/taiga/projects/tasks/signals.py"", line 102, in set_finished_date_when_edit_task
    if instance.status.is_closed and not instance.finished_date:
AttributeError: 'NoneType' object has no attribute 'is_closed'
```

I am using the latest commit from the stable branch.

Thank you!
"
1068,taigaio,taiga-back,8,closed,541,5,https://api.github.com/repos/taigaio/taiga-back/issues/541/comments,https://github.com/taigaio/taiga-back/issues/541,[],ImportError: No module named 'django',"Hi. I tried installing in afresh Ubuntu 14.04 following [the guide](http://taigaio.github.io/taiga-doc/dist/setup-production.html). As I am behind a proxy, I had to install a more recent python-pip from Wily to get the version 1.6 and be able to download packages. Now, after installing django, when I have to run ""python manage.py XXX"" I get this:

```
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named 'django'
```

I am not a python developer, and don't know about details of it's build system. Docs says Taiga needs python 3.4, but I found django files go to ~/.local/lib/python2.7 after resolving dependencies. Could that be the problem? What else if not?
"
1071,taigaio,taiga-back,8,closed,538,4,https://api.github.com/repos/taigaio/taiga-back/issues/538/comments,https://github.com/taigaio/taiga-back/issues/538,[],UnicodeEncodeError,"```
[01/Dec/2015 03:10:37] ""POST /api/v1/memberships/bulk_create HTTP/1.0"" 500 27
ERROR:2015-12-01 03:14:37,593: Internal Server Error: /api/v1/memberships/bulk_create
Traceback (most recent call last):
  File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/src/taiga-back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/local/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/usr/src/taiga-back/taiga/base/api/views.py"", line 420, in dispatch
    response = self.handle_exception(exc)
  File ""/usr/src/taiga-back/taiga/base/api/views.py"", line 417, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/src/taiga-back/taiga/projects/api.py"", line 463, in bulk_create
    precall=self.pre_save)
  File ""/usr/src/taiga-back/taiga/projects/services/members.py"", line 31, in create_members_in_bulk
    db.save_in_bulk(members, callback, precall)
  File ""/usr/local/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/usr/src/taiga-back/taiga/base/utils/db.py"", line 93, in save_in_bulk
    callback(instance, created=created)
  File ""/usr/src/taiga-back/taiga/projects/api.py"", line 498, in post_save
    services.send_invitation(invitation=object)
  File ""/usr/src/taiga-back/taiga/projects/services/invitations.py"", line 16, in send_invitation
    email.send()
  File ""/usr/local/lib/python3.5/site-packages/django/core/mail/message.py"", line 303, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/usr/local/lib/python3.5/site-packages/django/core/mail/backends/console.py"", line 36, in send_messages
    self.write_message(message)
  File ""/usr/local/lib/python3.5/site-packages/django/core/mail/backends/console.py"", line 23, in write_message
    self.stream.write('%s\n' % msg_data)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 536-537: ordinal not in range(128)
10.20.96.145 - - [01/Dec/2015:03:14:37 +0000] ""POST /api/v1/memberships/bulk_create HTTP/1.1"" 500 38 ""http://10.20.102.38:8081/project/wotefa-jian-wang-3-2015/admin/memberships"" ""Mozilla/5.0 (Windows NT 6.1; WOW64; rv:42.0) Gecko/20100101 Firefox/42.0"" ""-""
```
"
1081,taigaio,taiga-back,8,closed,527,3,https://api.github.com/repos/taigaio/taiga-back/issues/527/comments,https://github.com/taigaio/taiga-back/issues/527,[],Comments make python scripts bugging,"Hello,
I am in the process of installing taiga with following this procedure : http://taigaio.github.io/taiga-doc/dist/setup-production.html
There is a big problem in files encoding when getting the files from github.
Ubuntu version 14.04.03LTS

exaltia@Mattermost:~/taiga-back$ locale -a
C
C.UTF-8
en_US.utf8
fr_FR.utf8
POSIX
(Yes it's on the same Virtual machine as mattermost)
Linux Mattermost 3.13.0-32-generic #57-Ubuntu SMP Tue Jul 15 03:51:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux

Content of /etc/python3/debian_config:
[DEFAULT]
byte-compile = standard

System was updated just before starting to follow your procedure

Here is a copy paste on 3 trys.
On each following trys i deleted all the comments on the .py problematic file to see the next step

exaltia@Mattermost:~/taiga-back$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 303, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/**init**.py"", line 48, in **getattr**
    self._setup(name)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 92, in **init**
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/exaltia/taiga-back/settings/**init**.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/exaltia/taiga-back/settings/**init**.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
exaltia@Mattermost:~/taiga-back$ vi /home/exaltia/taiga-back/settings/**init**.py
exaltia@Mattermost:~/taiga-back$ cp /home/exaltia/taiga-back/settings/**init**.py  /home/exaltia/taiga-back/settings/**init**.pybackup
exaltia@Mattermost:~/taiga-back$ vi /home/exaltia/taiga-back/settings/**init**.py
exaltia@Mattermost:~/taiga-back$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 303, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/**init**.py"", line 48, in **getattr**
    self._setup(name)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 92, in **init**
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/exaltia/taiga-back/settings/**init**.py"", line 4, in <module>
    from .celery import *
  File ""/home/exaltia/taiga-back/settings/celery.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/exaltia/taiga-back/settings/celery.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
exaltia@Mattermost:~/taiga-back$ vi /home/exaltia/taiga-back/settings/celery.py
exaltia@Mattermost:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 303, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/**init**.py"", line 48, in **getattr**
    self._setup(name)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 92, in **init**
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/exaltia/taiga-back/settings/**init**.py"", line 11, in <module>
    from .development import *
  File ""/home/exaltia/taiga-back/settings/development.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/exaltia/taiga-back/settings/development.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
"
1088,taigaio,taiga-back,8,closed,520,14,https://api.github.com/repos/taigaio/taiga-back/issues/520/comments,https://github.com/taigaio/taiga-back/issues/520,[],can't do python migrate,"Hello and thank you for the great project!
I'm tring to install Taiga on my server.
I'm using (production guide)[https://taigaio.github.io/taiga-doc/dist/setup-production.html] from taiga docs.
My server is running under Debian 7 wheezy with custom-built python3.4.
After setting up venv and pip installing requirements, i tried running 
`python3.4 manage.py migrate --noinput`
It ran for a bit and gave me this strange traceback:

```
(taiga) user@server:/path/to/taiga-back# python3.4 manage.py migrate
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 114, in create
    cls = getattr(mod, cls_name)
AttributeError: 'module' object has no attribute 'base'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 351, in execute_from_command_line
    utility.execute()
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 325, in execute
    django.setup()
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/usr/share/pyservers/taiga-back/taiga/lib/python3.4/site-packages/django/apps/config.py"", line 119, in create
    import_module(entry)
  File ""/usr/local/opt/python-3.4.1/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2224, in _find_and_load_unlocked
ImportError: No module named 'taiga.base'
```

What did I do wrong?
"
1095,taigaio,taiga-back,8,closed,513,14,https://api.github.com/repos/taigaio/taiga-back/issues/513/comments,https://github.com/taigaio/taiga-back/issues/513,[],"Migrate failed with the below log: relation ""djmail_message"" already exists","I've just try to upgrade taiga to 1.9.0, when I do the instructions mentioned here: http://taigaio.github.io/taiga-doc/dist/setup-faqs.html#faq-maintain-update

The below error log occurred when I migrate the database.

```
(taiga)taiga@vps3:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
Operations to perform:
  Synchronize unmigrated apps: django_jinja, django_transactional_cleanup, raven_contrib_django, sr, export_import, messages, events, front, staticfiles, searches, base, _humanize, stats, sitemaps, api, mdrender, locale
  Apply all migrations: likes, webhooks, admin, attachments, sessions, tasks, wiki, timeline, easy_thumbnails, references, gitlab, bitbucket, userstorage, external_apps, custom_attributes, djmail, votes, auth, history, users, projects, github, userstories, issues, feedback, milestones, contenttypes, notifications
Synchronizing apps without migrations:
  Creating tables...
    Running deferred SQL...
  Installing custom SQL...
Running migrations:
  Rendering model states... DONE
  Applying djmail.0001_initial...Raven is not configured (logging is disabled). Please see the documentation for more information.
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 62, in execute
    return self.cursor.execute(sql)
psycopg2.ProgrammingError: relation ""djmail_message"" already exists


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 351, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 343, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 222, in handle
    executor.migrate(targets, plan, fake=fake, fake_initial=fake_initial)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 110, in migrate
    self.apply_migration(states[migration], migration, fake=fake, fake_initial=fake_initial)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 148, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/migration.py"", line 115, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/operations/models.py"", line 59, in database_forwards
    schema_editor.create_model(model)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/base/schema.py"", line 286, in create_model
    self.execute(sql, params or None)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/base/schema.py"", line 111, in execute
    cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/utils.py"", line 97, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/backends/utils.py"", line 62, in execute
    return self.cursor.execute(sql)
django.db.utils.ProgrammingError: relation ""djmail_message"" already exists
```
"
1096,taigaio,taiga-back,8,closed,512,2,https://api.github.com/repos/taigaio/taiga-back/issues/512/comments,https://github.com/taigaio/taiga-back/issues/512,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwzMjUzOTI0Nw=="", ""id"": 32539247}]",AttributeError at /admin/projects/project/add/ 'OneToOneRel' object has no attribute 'parent_model',"I just setup Taiga on a fresh Ubuntu 14.04 install, followed install docs, and all seamed to be working till trying to admin  projects from /admin/.  Anything related to projects (add/edit) returns same failures except for list of projects

```
AttributeError at /admin/projects/project/add/

'OneToOneRel' object has no attribute 'parent_model'

Request Method: GET
Request URL:    http://oberon-taiga/admin/projects/project/add/
Django Version: 1.8.5
Exception Type: AttributeError
Exception Value:  'OneToOneRel' object has no attribute 'parent_model'
Exception Location: /home/taiga/taiga-back/taiga/projects/admin.py in formfield_for_foreignkey, line 55
Python Executable:  /home/taiga/.virtualenvs/taiga/bin/python3.4
Python Version: 3.4.3
Python Path:    
    ['/home/taiga/taiga-back',
    '/home/taiga/taiga-back',
    '/home/taiga/.virtualenvs/taiga/bin',
    '/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages',
    '/home/taiga/.virtualenvs/taiga/lib/python3.4',
    '/home/taiga/.virtualenvs/taiga/lib/python3.4/plat-x86_64-linux-gnu',
    '/home/taiga/.virtualenvs/taiga/lib/python3.4/lib-dynload',
    '/usr/lib/python3.4',
    '/usr/lib/python3.4/plat-x86_64-linux-gnu',
    '/home/taiga/taiga-back']
Server time:    Wed, 4 Nov 2015 13:50:57 +0000
```
"
1100,taigaio,taiga-back,8,closed,508,21,https://api.github.com/repos/taigaio/taiga-back/issues/508/comments,https://github.com/taigaio/taiga-back/issues/508,[],Syntax error when updating (python manage.py migrate  --noinput),"(taiga)bstc@taiga:~/taiga-back$ python manage.py migrate --noinput
Trying import local.py settings...
System check identified some issues:

WARNINGS:
?: (1_8.W001) The standalone TEMPLATE_\* settings were deprecated in Django 1.8 and the TEMPLATES dictionary takes precedence. You must put the values of the following settings into your default TEMPLATES dict: TEMPLATE_DEBUG.
Raven is not configured (logging is disabled). Please see the documentation for more information.
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 351, in execute_from_command_line
    utility.execute()
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/**init**.py"", line 343, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(_args, *_cmd_options)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/raven/contrib/django/management/**init**.py"", line 41, in new_execute
    return original_func(self, _args, *_kwargs)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(_args, *_options)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 93, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 19, in **init**
    self.loader = MigrationLoader(self.connection)
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/loader.py"", line 47, in **init**
    self.build_graph()
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/loader.py"", line 176, in build_graph
    self.load_disk()
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/migrations/loader.py"", line 102, in load_disk
    migration_module = import_module(""%s.%s"" % (module_name, migration_name))
  File ""/home/bstc/.virtualenvs/taiga/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1444, in exec_module
  File ""<frozen importlib._bootstrap>"", line 1549, in get_code
  File ""<frozen importlib._bootstrap>"", line 1509, in source_to_code
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/bstc/taiga-back/taiga/projects/notifications/migrations/0006_auto_20151103_0954.py"", line 17
    field=models.SmallIntegerField(choices=[(<NotifyLevel.involved: 1>, 'Involved'), (<NotifyLevel.all: 2>, 'All'), (<NotifyLevel.none: 3>, 'None')]),
                                             ^
SyntaxError: invalid syntax
"
1101,taigaio,taiga-back,8,closed,507,5,https://api.github.com/repos/taigaio/taiga-back/issues/507/comments,https://github.com/taigaio/taiga-back/issues/507,[],saving error in some stories,"hi, i am using stable branch. i updated yesterday and everything seemed fine but today a problem emerged with one of our projects in taiga.  as far as i can find out it is only one projects out of 3 we do with taiga. and only some tasks. they cannot be saved because umba lumpas are complaining.
i looked at the logs and found this everytime a save could not be done:

```
ERROR:2015-11-03 09:34:43,065: Internal Server Error: /api/v1/userstories
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 420, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 417, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/api.py"", line 248, in create
    response = super().create(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 73, in create
    self.post_save(self.object, created=True)
  File ""/home/taiga/taiga-back/taiga/projects/userstories/api.py"", line 150, in post_save
    super().post_save(obj, created)
  File ""/home/taiga/taiga-back/taiga/projects/occ/mixins.py"", line 83, in post_save
    super().post_save(obj, created)
  File ""/home/taiga/taiga-back/taiga/projects/history/mixins.py"", line 72, in post_save
    self.persist_history_snapshot(obj=obj)
  File ""/home/taiga/taiga-back/taiga/projects/history/mixins.py"", line 68, in persist_history_snapshot
    self.__last_history = take_snapshot(sobj, comment=comment, user=user, delete=delete)
  File ""/usr/lib/python3.4/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/taiga/taiga-back/taiga/projects/history/services.py"", line 335, in take_snapshot
    return entry_model.objects.create(**kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/manager.py"", line 127, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/query.py"", line 348, in create
    obj.save(force_insert=True, using=self.db)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 734, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 771, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 201, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/signal_handlers.py"", line 62, in on_new_history_entry
    task(*args)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/celery/local.py"", line 188, in __call__
    return self._get_current_object()(*a, **kw)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/celery/app/task.py"", line 420, in __call__
    return self.run(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/taiga_contrib_slack/tasks.py"", line 271, in create_slackhook
    ""text"": template.render(context),
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django_jinja/backend.py"", line 64, in render
    return self.template.render(context)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/jinja2/environment.py"", line 984, in render
    vars = dict(*args, **kwargs)
ValueError: dictionary update sequence element #1 has length 3; 2 is required
```

can i give you any more help fixing this?
i updated the backend again today, because i saw you added a new commit in stable branch. but it did not fix it.
"
1121,taigaio,taiga-back,8,closed,484,3,https://api.github.com/repos/taigaio/taiga-back/issues/484/comments,https://github.com/taigaio/taiga-back/issues/484,[],Email Templates Not Being Created,"When trying to do a bulk_create or anything dealing with emails I get errors such as

```
Trying import local.py settings...
Template 'emails/membership_notification-body-html.html' does not exists.
Raven is not configured (logging is disabled). Please see the documentation for more information.
ERROR:2015-10-14 13:26:32,192: Internal Server Error: /api/v1/memberships/bulk_create
Traceback (most recent call last):
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/opt/taiga/back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 57, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/opt/taiga/back/taiga/base/api/views.py"", line 420, in dispatch
    response = self.handle_exception(exc)
  File ""/opt/taiga/back/taiga/base/api/views.py"", line 417, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/opt/taiga/back/taiga/projects/api.py"", line 457, in bulk_create
    precall=self.pre_save)
  File ""/opt/taiga/back/taiga/projects/services/members.py"", line 31, in create_members_in_bulk
    db.save_in_bulk(members, callback, precall)
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/django/db/transaction.py"", line 394, in inner
    return func(*args, **kwargs)
  File ""/opt/taiga/back/taiga/base/utils/db.py"", line 74, in save_in_bulk
    callback(instance, created=created)
  File ""/opt/taiga/back/taiga/projects/api.py"", line 492, in post_save
    services.send_invitation(invitation=object)
  File ""/opt/taiga/back/taiga/projects/services/invitations.py"", line 12, in send_invitation
    email = template(invitation.user, {""membership"": invitation})
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/djmail/template_mail.py"", line 160, in _dynamic_email_generator
    email_instance = template_email.make_email_object(to, context)
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/djmail/template_mail.py"", line 97, in make_email_object
    body_html = self._render_message_body_as_html(context)
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/djmail/template_mail.py"", line 133, in _render_message_body_as_html
    return premailer.transform(html)
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/premailer/premailer.py"", line 560, in transform
    return Premailer(html, base_url=base_url).transform()
  File ""/opt/taiga/back/taiga-py/lib/python3.4/site-packages/premailer/premailer.py"", line 291, in transform
    stripped = self.html.strip()
AttributeError: 'NoneType' object has no attribute 'strip'
```
"
1123,taigaio,taiga-back,8,closed,482,3,https://api.github.com/repos/taigaio/taiga-back/issues/482/comments,https://github.com/taigaio/taiga-back/pull/482,[],Template loader fix & GitLab improvement,"Fixing this template loader error:

```
ERROR:2015-10-13 11:36:29,919: Internal Server Error: /api/v1/
Traceback (most recent call last):
  File ""/usr/lib/python3.4/site-packages/django/core/handlers/base.py"", line 164, in get_response
    response = response.render()
  File ""/usr/lib/python3.4/site-packages/django/template/response.py"", line 158, in render
    self.content = self.rendered_content
  File ""/srv/http/taiga/taigaio/taiga-back/taiga/base/response.py"", line 74, in rendered_content
    ret = renderer.render(self.data, media_type, context)
  File ""/srv/http/taiga/taigaio/taiga-back/taiga/base/api/renderers.py"", line 607, in render
    template = loader.get_template(self.template)
  File ""/usr/lib/python3.4/site-packages/django/template/loader.py"", line 46, in get_template
    raise TemplateDoesNotExist(template_name)
django.template.base.TemplateDoesNotExist: api/api.html
[13/Oct/2015 11:36:29] ""GET /api/v1/ HTTP/1.1"" 500 27
```

Adding improvement to a GitLab event hook so that link to a commit and author name will be displayed along the comment.
"
1127,taigaio,taiga-back,8,closed,478,8,https://api.github.com/repos/taigaio/taiga-back/issues/478/comments,https://github.com/taigaio/taiga-back/issues/478,[],Matching query does not exist when importing sample_data,"Hi there

I am attempting to run the following command to import sample_data into a newly created taiga database:

``` bash
python manage.py sample_data
```

As soon as I do that, I notice that my `celery.stderr.log` starts spamming errors like this:

```
[2015-10-07 11:55:31,430: ERROR/MainProcess] Task taiga.timeline.service.push_to_timeline[3dd65d5f-2512-4475-b755-bf2767394b74] raised unexpected: DoesNotExist('UserStory matching query does not exist.',)
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/celery/app/trace.py"", line 240, in trace_task
    R = retval = fun(*args, **kwargs)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/celery/app/trace.py"", line 438, in __protected_call__
    return self.run(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 85, in push_to_timeline
    _add_to_objects_timeline(objects, instance, event_type, created_datetime, namespace, extra_data)
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 77, in _add_to_objects_timeline
    _add_to_object_timeline(obj, instance, event_type, created_datetime, namespace, extra_data)
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 69, in _add_to_object_timeline
    data=impl(instance, extra_data=extra_data),
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 175, in _wrapper
    return fn(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 175, in _wrapper
    return fn(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/timeline/service.py"", line 175, in _wrapper
    return fn(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/timeline/timeline_implementations.py"", line 80, in task_timeline
    if instance.user_story:
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/fields/related.py"", line 572, in __get__
    rel_obj = qs.get()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/db/models/query.py"", line 357, in get
    self.model._meta.object_name)
taiga.projects.userstories.models.DoesNotExist: UserStory matching query does not exist.
```

Have you got any suggestions what may cause this issue?

Thanks very much for your help!
"
1137,taigaio,taiga-back,9,closed,466,3,https://api.github.com/repos/taigaio/taiga-back/issues/466/comments,https://github.com/taigaio/taiga-back/issues/466,[],project -> export not working,"Clicking the export button results in an error.

Request is an XHR GET /api/v1/exporter/4
The UserStories are created with the API and may contain special characters or weird encoding. Not sure if that is the cause of the problem though.

Log:

```
ERROR:2015-09-17 20:31:10,287: Internal Server Error: /api/v1/exporter/4
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/site-packages/django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 57, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/views.py"", line 420, in dispatch
    response = self.handle_exception(exc)
  File ""/usr/local/taiga/taiga-back/taiga/base/api/views.py"", line 417, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/usr/local/taiga/taiga-back/taiga/export_import/api.py"", line 73, in retrieve
    default_storage.save(path, content)
  File ""/usr/local/lib/python3.4/site-packages/django/core/files/storage.py"", line 51, in save
    name = self._save(name, content)
  File ""/usr/local/lib/python3.4/site-packages/django/core/files/storage.py"", line 227, in _save
    _file.write(chunk)
UnicodeEncodeError: 'ascii' codec can't encode character '\xe9' in position 15006: ordinal not in range(128)
```
"
1174,taigaio,taiga-back,9,closed,425,4,https://api.github.com/repos/taigaio/taiga-back/issues/425/comments,https://github.com/taigaio/taiga-back/issues/425,[], No module named '_multiprocessing' in my Taiga dev environment,"Hi guys

I'm trying to get my Taiga development environment updated however I'm getting a problem on master that I'm not getting on stable.

If I check out the stable branch of taiga-back, I can run any of the manage.py commands as usual without any problems.

However if I check out master, and run manage.py, I get the following error

```
Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/chriswilson/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/chriswilson/taiga-back/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 354, in execute
    django.setup()
  File ""/home/chriswilson/taiga-back/taiga/lib/python3.4/site-packages/django/__init__.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/chriswilson/taiga-back/taiga/lib/python3.4/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/home/chriswilson/taiga-back/taiga/feedback/apps.py"", line 31, in ready
    from taiga.urls import urlpatterns
  File ""/home/chriswilson/taiga-back/taiga/urls.py"", line 21, in <module>
    from .routers import router
  File ""/home/chriswilson/taiga-back/taiga/routers.py"", line 100, in <module>
    from taiga.searches.api import SearchViewSet
  File ""/home/chriswilson/taiga-back/taiga/searches/api.py"", line 29, in <module>
    from concurrent import futures
  File ""/usr/local/lib/python3.4/concurrent/futures/__init__.py"", line 17, in <module>
    from concurrent.futures.process import ProcessPoolExecutor
  File ""/usr/local/lib/python3.4/concurrent/futures/process.py"", line 55, in <module>
    from multiprocessing.connection import wait
  File ""/usr/local/lib/python3.4/multiprocessing/connection.py"", line 21, in <module>
    import _multiprocessing
ImportError: No module named '_multiprocessing'
```

I'm running in a newly created virtual environment, and have run `pip install -r requirements.txt` and `pip install --upgrade -r requirements.txt` after switching from stable branch to master.

The difference between stable and master which causes this seems to be commit `8b05f20` on the master branch which introduced the line below into taiga/searches/api.py:

```
from concurrent import futures
```

Any ideas please?
Am I missing a dependency in my requirements.txt file?

thanks!
"
1191,taigaio,taiga-back,9,closed,403,7,https://api.github.com/repos/taigaio/taiga-back/issues/403/comments,https://github.com/taigaio/taiga-back/issues/403,[],"relation ""projects_userstorycustomattribute"" does not exist","```
-> Generate sample data
Trying import local.py settings...
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: relation ""projects_userstorycustomattribute"" does not exist
LINE 1: INSERT INTO ""projects_userstorycustomattribute"" (""name"", ""de...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python3.4/site-packages/django/db/transaction.py"", line 394, in inner
    return func(*args, **kwargs)
  File ""/taiga/taiga/projects/management/commands/sample_data.py"", line 160, in handle
    order=i)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/manager.py"", line 92, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/query.py"", line 372, in create
    obj.save(force_insert=True, using=self.db)
  File ""/taiga/taiga/projects/custom_attributes/models.py"", line 61, in save
    return super().save(*args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 589, in save
    force_update=force_update, update_fields=update_fields)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 617, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 698, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/base.py"", line 731, in _do_insert
    using=using, raw=raw)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/manager.py"", line 92, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/query.py"", line 921, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File ""/usr/local/lib/python3.4/site-packages/django/db/models/sql/compiler.py"", line 921, in execute_sql
    cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/usr/local/lib/python3.4/site-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/usr/local/lib/python3.4/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: relation ""projects_userstorycustomattribute"" does not exist
LINE 1: INSERT INTO ""projects_userstorycustomattribute"" (""name"", ""de...
                    ^

-> Rebuilding timeline
Trying import local.py settings...

```
"
1197,taigaio,taiga-back,9,closed,394,8,https://api.github.com/repos/taigaio/taiga-back/issues/394/comments,https://github.com/taigaio/taiga-back/issues/394,[],Celery Import Issue,"Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/codersbyte/projects/taiga-back/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/codersbyte/projects/taiga-back/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 354, in execute
    django.setup()
  File ""/home/codersbyte/projects/taiga-back/local/lib/python2.7/site-packages/django/**init**.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/codersbyte/projects/taiga-back/local/lib/python2.7/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/codersbyte/projects/taiga-back/local/lib/python2.7/site-packages/django/apps/config.py"", line 116, in create
    mod = import_module(mod_path)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/codersbyte/projects/taiga-back/taiga/**init**.py"", line 17, in <module>
    from . import celery
  File ""/home/codersbyte/projects/taiga-back/taiga/celery.py"", line 19, in <module>
    from celery import Celery
ImportError: cannot import name Celery
"
1204,taigaio,taiga-back,9,closed,387,2,https://api.github.com/repos/taigaio/taiga-back/issues/387/comments,https://github.com/taigaio/taiga-back/issues/387,[],role root does not exists,"I tried to install taiga as per the document http://taigaio.github.io/taiga-doc/dist/setup-production.html

but ran into issues after the command
python manage.py migrate --noinput
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""/home/taiga-back/env/lib/python3.4/site-packages/django/db/backends/**init**.py"", line 133, in ensure_connection
    self.connect()
  File ""/home/taiga-back/env/lib/python3.4/site-packages/transaction_hooks/mixin.py"", line 75, in connect
    super(TransactionHooksDatabaseWrapperMixin, self).connect(_a, *_kw)
  File ""/home/taiga-back/env/lib/python3.4/site-packages/django/db/backends/**init**.py"", line 122, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/taiga-back/env/lib/python3.4/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 130, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/taiga-back/env/lib/python3.4/site-packages/psycopg2/**init**.py"", line 164, in connect
    conn = _connect(dsn, connection_factory=connection_factory, async=async)
psycopg2.OperationalError: FATAL:  role ""root"" does not exist
"
1214,taigaio,taiga-back,9,closed,376,1,https://api.github.com/repos/taigaio/taiga-back/issues/376/comments,https://github.com/taigaio/taiga-back/issues/376,[],Problem with ASCII,"When i run ""python manage.py migrate --noinput"" appears this error on terminal:

""Non-ASCII character '\xc3' in file""

RAW OUTPUT:

``` bash
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/michel/.virtualenvs/taiga/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/michel/.virtualenvs/taiga/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 345, in execute
    settings.INSTALLED_APPS
  File ""/home/michel/.virtualenvs/taiga/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 46, in __getattr__
    self._setup(name)
  File ""/home/michel/.virtualenvs/taiga/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File ""/home/michel/.virtualenvs/taiga/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 94, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/michel/taiga-back/settings/__init__.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/michel/taiga-back/settings/__init__.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
```

Putting # -_\- coding: utf-8 -_\- at the top of every file works for me.
"
1232,taigaio,taiga-back,10,closed,358,3,https://api.github.com/repos/taigaio/taiga-back/issues/358/comments,https://github.com/taigaio/taiga-back/issues/358,[],user account creation from invitations fails ,"I am running stable 1.7 and have encountered errors with registering private users. Invitations are sent and the token is written to the membership table, but users can't redeem their invitations b/c of a constraint on the 'project_id' field on the 'timeline_timeline' table:

```
psycopg2.IntegrityError: null value in column ""project_id"" violates not-null constraint
DETAIL:  Failing row contains (2950, 158, user:158, users.user.create, null, {""user"": {""id"": 158}}, 3, 2015-06-18 20:54:13.521675+00, 3).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/taiga-back/taiga/users/models.py"", line 164, in save
    super().save(*args, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/base.py"", line 589, in save
    force_update=force_update, update_fields=update_fields)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/base.py"", line 626, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/usr/local/lib/python3.4/dist-packages/django/dispatch/dispatcher.py"", line 198, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/taiga-back/taiga/timeline/signals.py"", line 132, in create_user_push_to_timeline
    _push_to_timelines(project, user, user, ""create"")
  File ""/taiga-back/taiga/timeline/signals.py"", line 46, in _push_to_timelines
    extra_data=extra_data)
  File ""/taiga-back/taiga/timeline/signals.py"", line 33, in _push_to_timeline
    push_to_timeline(*args, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/celery/local.py"", line 167, in <lambda>
    __call__ = lambda x, *a, **kw: x._get_current_object()(*a, **kw)
  File ""/usr/local/lib/python3.4/dist-packages/celery/app/task.py"", line 420, in __call__
    return self.run(*args, **kwargs)
...
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/usr/local/lib/python3.4/dist-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
```

```
STATEMENT:  INSERT INTO ""timeline_timeline"" (""content_type_id"", ""object_id"", ""namespace"", ""event_type"", ""project_id"", ""data"", ""data_content_type_id"", ""created"") VALUES (3, 158, 'user:158', 'users.user.create', NULL, '{""user"": {""id"": 158}}', 3, '2015-06-18 20:54:13.521675+00:00') RETURNING ""timeline_timeline"".""id""
```
"
1246,taigaio,taiga-back,10,closed,343,5,https://api.github.com/repos/taigaio/taiga-back/issues/343/comments,https://github.com/taigaio/taiga-back/issues/343,[],Non-ASCII character '\xc3',"SyntaxError: Non-ASCII character '\xc3' in file /var/django/taiga-back/settings/**init**.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details

Please, update files where non-ASCII characters are included (I have seen is because of some accents in the credits comments), otherwise tell me how to get it running.
"
1272,taigaio,taiga-back,10,closed,313,2,https://api.github.com/repos/taigaio/taiga-back/issues/313/comments,https://github.com/taigaio/taiga-back/issues/313,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwzMjUzOTI0Nw=="", ""id"": 32539247}]","User story statuses require ""is_archived"" property in project templates","I created a project in the Taiga UI (v1.6 on-premise deployment), customised it to the way I wanted it (ie. added new states, new roles, etc), and then used the API to create a template from it using [http://taigaio.github.io/taiga-doc/dist/api.html#projects-create-template](http://taigaio.github.io/taiga-doc/dist/api.html#projects-create-template).
The generated template is as per the example given in the API documentation: [http://taigaio.github.io/taiga-doc/dist/api.html#project-templates-create](http://taigaio.github.io/taiga-doc/dist/api.html#project-templates-create)

Then through the UI I tried to create a project using my new template.  I choose the template, click Next, enter a project Name and Description then click the Create button.  
I'm left with a blank screen (with the forest background image) and no error message.
Looking in the Developer Tools in the browser, I see a 

```
{""error"": ""Server application error""}
```

response from the ""projects"" api call.

In the gunicorn.stderr.log on the server, I see the following:

```
ERROR:2015-04-24 13:22:53,311: Internal Server Error: /api/v1/projects
Traceback (most recent call last):
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/viewsets.py"", line 81, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 57, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 418, in dispatch
    response = self.handle_exception(exc)
  File ""/home/taiga/taiga-back/taiga/base/api/views.py"", line 415, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/base/api/mixins.py"", line 71, in create
    self.object = serializer.save(force_insert=True)
  File ""/home/taiga/taiga-back/taiga/base/serializers.py"", line 155, in save
    self.object = super(serializers.ModelSerializer, self).save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/rest_framework/serializers.py"", line 596, in save
    self.save_object(self.object, **kwargs)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/rest_framework/serializers.py"", line 991, in save_object
    obj.save(**kwargs)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 211, in save
    super().save(*args, **kwargs)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 589, in save
    force_update=force_update, update_fields=update_fields)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/django/db/models/base.py"", line 626, in save_base
    update_fields=update_fields, raw=raw, using=using)
  File ""/home/taiga/taiga-back/taiga/lib/python3.4/site-packages/django/dispatch/dispatcher.py"", line 198, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/taiga/taiga-back/taiga/projects/signals.py"", line 79, in project_post_save
    template.apply_to_project(instance)
  File ""/home/taiga/taiga-back/taiga/projects/models.py"", line 714, in apply_to_project
    is_archived=us_status[""is_archived""],
KeyError: 'is_archived'
```

If I add the ""is_archived"" property manually to the project template, and create this new template in Taiga via the API, I can then create projects using this new template without error (both through the UI and API)

So, it seems that ""is_archived"" is a required property for user story statuses on project templates when creating new projects based on a template.  Therefore I would say that either the project template generated by the Create Template API call needs to include the ""is_archived"" property, or ""is_archived"" should not be mandatory when creating a project from a template.
"
1282,taigaio,taiga-back,10,closed,303,1,https://api.github.com/repos/taigaio/taiga-back/issues/303/comments,https://github.com/taigaio/taiga-back/issues/303,[],Migrate command not working,"After I clone and run the command migrate I get the following error

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/amtex/management/env/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/amtex/management/env/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 303, in execute
    settings.INSTALLED_APPS
  File ""/home/amtex/management/env/local/lib/python2.7/site-packages/django/conf/**init**.py"", line 48, in **getattr**
    self._setup(name)
  File ""/home/amtex/management/env/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""/home/amtex/management/env/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 92, in **init**
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/amtex/management/taiga-back/settings/**init**.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/amtex/management/taiga-back/settings/**init**.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
"
1288,taigaio,taiga-back,10,closed,297,1,https://api.github.com/repos/taigaio/taiga-back/issues/297/comments,https://github.com/taigaio/taiga-back/issues/297,[],UnicodeEncodeError 'ascii' codec can't encode character,"Hello

when i try add new comment with chars (żąśćł)  to users story i have error:

```
UnicodeEncodeError: 'ascii' codec can't encode character '\u017c' in position 757: ordinal not in range(128)
```

Python 3.4.1
Django 1.7.6
"
1294,taigaio,taiga-back,10,closed,291,2,https://api.github.com/repos/taigaio/taiga-back/issues/291/comments,https://github.com/taigaio/taiga-back/pull/291,[],Update requirements.txt,"Dependency needed by celery

``` bash
(taiga)taiga@taiga:~/taiga-back$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/conf/__init__.py"", line 94, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/taiga/taiga-back/settings/__init__.py"", line 20, in <module>
    from .celery import *
  File ""/home/taiga/taiga-back/settings/celery.py"", line 17, in <module>
    from kombu import Exchange, Queue
ImportError: No module named 'kombu'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/core/management/__init__.py"", line 345, in execute
    settings.INSTALLED_APPS
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/conf/__init__.py"", line 46, in __getattr__
    self._setup(name)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/conf/__init__.py"", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File ""/home/taiga/.virtualenvs/taiga/lib/python3.4/site-packages/django/conf/__init__.py"", line 98, in __init__
    % (self.SETTINGS_MODULE, e)
ImportError: Could not import settings 'settings' (Is it on sys.path? Is there an import error in the settings file?): No module named 'kombu'
```
"
1302,taigaio,taiga-back,10,closed,282,7,https://api.github.com/repos/taigaio/taiga-back/issues/282/comments,https://github.com/taigaio/taiga-back/issues/282,[],Gunicorn fail to start,"Hello,

I've encountered several problems with Taiga today, here's a little history : 

I've updated to the latest stable version, as explained here => http://taigaio.github.io/taiga-doc/dist/setup-production.html#faq-maintain-update . For info, during the process, I've encounter a nice warning : 

```
Your models have changes that are not yet reflected in a migration, and so won't be applied.
Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.
```

Being a little bit (too?) cautious, I didn't dare to it.

The we had some issues and looking at the logs I came to this issue : https://github.com/taigaio/taiga-back/issues/272 
Changed the postgresql engine, restarted taiga and...

Gunicorn failed to start

Traceback

```
Traceback (most recent call last):
  File ""/usr/local/bin/gunicorn"", line 11, in <module>
    sys.exit(run())
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/app/wsgiapp.py"", line 74, in run
    WSGIApplication(""%(prog)s [OPTIONS] [APP_MODULE]"").run()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py"", line 185, in run
    super(Application, self).run()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py"", line 71, in run
    Arbiter(self).run()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py"", line 169, in run
    self.manage_workers()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py"", line 477, in manage_workers
    self.spawn_workers()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py"", line 542, in spawn_workers
    time.sleep(0.1 * random.random())
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py"", line 209, in handle_chld
    self.reap_workers()
  File ""/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py"", line 459, in reap_workers
    raise HaltServer(reason, self.WORKER_BOOT_ERROR)
gunicorn.errors.HaltServer: <HaltServer 'Worker failed to boot.' 3>
```

But! Reverting the changes on the settings/local.py does not give me back my buggy-taiga

When running python manage.py runserver : 

```
Trying import local.py settings...
Monkey patching...
WARNING: Using backend without django-transaction-hooks support, auto delete files will not work.
Trying import local.py settings...
Monkey patching...
WARNING: Using backend without django-transaction-hooks support, auto delete files will not work.
Performing system checks...

System check identified no issues (0 silenced).
March 17, 2015 - 16:45:16
Django version 1.7.6, using settings 'settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
```

A curl on  http://localhost:8000/api/v1/ does respond

I'm not familiar with the python/django stack and the gunicorn error is really not self explaining, so I'm a little bit lost here...

Any ideas? (and yes, I hope the answer is just ""listen when your console tells you to run some commands!"")
"
1323,taigaio,taiga-back,10,closed,261,3,https://api.github.com/repos/taigaio/taiga-back/issues/261/comments,https://github.com/taigaio/taiga-back/issues/261,[],Installation Issues,"Just cloned Taigo, and started running through the installation instructions, but I came up against the following issues.

Firstly, it seems there are two missing two dependencies from your requirements.txt file: kombu and billiard. Once I installed those, things moved on (a bit).

Secondly, on the initial ""migrate"", I get the following error:

psycopg2.OperationalError: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket ""/var/run/postgresql/.s.PGSQL.5432""?

I went and had a brief look in settings/common.py and it appears that you're trying to use PostgreSQL, but there are no instructions that mention that, nor mention of where to put the username and password I'll inevitably need.

I'm a Python dev, but not a Django dev, so I am a bit lost as to where to go from here.
"
1325,taigaio,taiga-back,10,closed,259,1,https://api.github.com/repos/taigaio/taiga-back/issues/259/comments,https://github.com/taigaio/taiga-back/issues/259,[],Problem with django-transactional-cleanup,"There is an issue with setting up the django-transactional-cleanup==0.1.13 requirement. 

In this module  File ""/var/www/taiga-back/build/django-transactional-cleanup/setup.py"", line 22, Fails with TypeError: 'encoding' is an invalid keyword argument for this function. Even the taiga-scripts fail at this point for me. 

```
long_description = open('README.markdown', 'r', encoding='utf8').read(),
```

More here https://github.com/jespino/django-transactional-cleanup/issues/1

How did you guys get past this without manually modifying then installing the module?  
"
1331,taigaio,taiga-back,10,closed,253,3,https://api.github.com/repos/taigaio/taiga-back/issues/253/comments,https://github.com/taigaio/taiga-back/issues/253,[],Enabling HTTPS breaks current users login action,"Hi everyone.

First of all, I need to thank you for you efforts and the great application. I could only enjoy working with Taiga. :)

Here's the problem: After I enabled HTTPS, I couldn't login with neither of my users (admin and the other thing). I deleted caches and cookies but it didn't work.

I was able to register a new user. I was able to recover password for my secondary user and access my account again, but my admin is lost (email was not set).

This is the response I received from Django server:

``` json
{
   ""_error_message"": ""Username or password does not matches user."", 
   ""_error_type"": ""taiga.base.exceptions.WrongArguments""
}
```

Maybe I'm missing something from the documentation. I just wanted to make sure it's not a bug.
"
1341,taigaio,taiga-back,11,closed,243,1,https://api.github.com/repos/taigaio/taiga-back/issues/243/comments,https://github.com/taigaio/taiga-back/issues/243,[],Invalid ASCII Jesús Espino's name ,"root@cloud-server-09:/home/deployer/taiga-back# python manage.py migrate --noinput
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 345, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/**init**.py"", line 46, in **getattr**
    self._setup(name)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 94, in **init**
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/deployer/taiga-back/settings/**init**.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /home/deployer/taiga-back/settings/**init**.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details

This line is on Line 2
# Copyright (C) 2014 Jesús Espino jespinog@gmail.com
# Copyright (C) 2014 David Barragán bameda@dbarragan.com
"
1353,taigaio,taiga-back,11,closed,229,6,https://api.github.com/repos/taigaio/taiga-back/issues/229/comments,https://github.com/taigaio/taiga-back/issues/229,[],"Unable to start taiga-back server ""No module named 'sr'""","Hello There, 

 I have pulled lastest changes on branch ""stable"", while starting server using ""manage.py runserver"" command gives following error.

  ImportError: No module named 'sr'

Following is the trace

sudo /opt/python3/bin/python3.4 manage.py runserver 0:8000
Trying import local.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/python3/lib/python3.4/site-packages/django/core/management/**init**.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/opt/python3/lib/python3.4/site-packages/django/core/management/**init**.py"", line 354, in execute
    django.setup()
  File ""/opt/python3/lib/python3.4/site-packages/django/**init**.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/opt/python3/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/opt/python3/lib/python3.4/site-packages/django/apps/config.py"", line 87, in create
    module = import_module(entry)
  File ""/opt/python3/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2224, in _find_and_load_unlocked
ImportError: No module named 'sr'
"
1382,taigaio,taiga-back,11,closed,197,1,https://api.github.com/repos/taigaio/taiga-back/issues/197/comments,https://github.com/taigaio/taiga-back/pull/197,"[{""default"": false, ""name"": ""ready to merge"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/ready%20to%20merge"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWwxNDIxMTg0NDc="", ""id"": 142118447}]",Modifications to django.po file for to include new spanish translations,"Hi.

This pull request contain a django.pot file revised for fix some gramatical errors and add some chains untranslated

Consider use it.
"
1421,taigaio,taiga-back,11,closed,147,0,https://api.github.com/repos/taigaio/taiga-back/issues/147/comments,https://github.com/taigaio/taiga-back/pull/147,"[{""default"": false, ""name"": ""ready to merge"", ""url"": ""https://api.github.com/repos/taigaio/taiga-back/labels/ready%20to%20merge"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWwxNDIxMTg0NDc="", ""id"": 142118447}]",Migrations improvements,"- Improved projects/0006 migration making it much more efficient.
- Add missing parameters on migration action (seems a bug of django 1.7 (reported by me))
"
1431,taigaio,taiga-back,12,closed,137,2,https://api.github.com/repos/taigaio/taiga-back/issues/137/comments,https://github.com/taigaio/taiga-back/issues/137,[],`Cannot import name supress`,"```
(dat)taiga@xieshaij:~/taiga-back> python manage.py migrate --noinput
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/taiga/.virtualenvs/dat/lib/python3.3/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/taiga/.virtualenvs/dat/lib/python3.3/site-packages/django/core/management/__init__.py"", line 354, in execute
    django.setup()
  File ""/home/taiga/.virtualenvs/dat/lib/python3.3/site-packages/django/__init__.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/taiga/.virtualenvs/dat/lib/python3.3/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/taiga/.virtualenvs/dat/lib/python3.3/site-packages/django/apps/config.py"", line 112, in create
    mod = import_module(mod_path)
  File ""/home/taiga/.virtualenvs/dat/lib64/python3.3/importlib/__init__.py"", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 1584, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 1565, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 1532, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 584, in _check_name_wrapper
  File ""<frozen importlib._bootstrap>"", line 1022, in load_module
  File ""<frozen importlib._bootstrap>"", line 1003, in load_module
  File ""<frozen importlib._bootstrap>"", line 560, in module_for_loader_wrapper
  File ""<frozen importlib._bootstrap>"", line 868, in _load_module
  File ""<frozen importlib._bootstrap>"", line 313, in _call_with_frames_removed
  File ""/home/taiga/taiga-back/taiga/projects/tasks/apps.py"", line 22, in <module>
    from . import signals as handlers
  File ""/home/taiga/taiga-back/taiga/projects/tasks/signals.py"", line 17, in <module>
    from contextlib import suppress
ImportError: cannot import name suppress
```
"
1448,taigaio,taiga-back,12,closed,119,1,https://api.github.com/repos/taigaio/taiga-back/issues/119/comments,https://github.com/taigaio/taiga-back/issues/119,[],ImportError: cannot import name Celery,"I tried to run the command `python manage.py migrate --noinput`:

And I get this error:

```
Trying import local.py settings...
Trying import development.py settings...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute
    django.setup()
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/__init__.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/apps/config.py"", line 112, in create
    mod = import_module(mod_path)
  File ""/usr/local/Cellar/python/2.7.7_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/nateaune/Dropbox/code/taiga/taiga-back/taiga/__init__.py"", line 1, in <module>
    from . import celery
  File ""/Users/nateaune/Dropbox/code/taiga/taiga-back/taiga/celery.py"", line 3, in <module>
    from celery import Celery
ImportError: cannot import name Celery
```

I checked requirements.txt, and celery is listed as a requirement. So then I tried installing Celery manually.

```
$ pip install Celery
Requirement already satisfied (use --upgrade to upgrade): Celery in /Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages
Cleaning up...
```

Any ideas?
"
1449,taigaio,taiga-back,12,closed,118,25,https://api.github.com/repos/taigaio/taiga-back/issues/118/comments,https://github.com/taigaio/taiga-back/issues/118,[],SyntaxError: Non-ASCII character '\xc3' in file,"When I try to run the command `python manage.py migrate --noinput` i get the following error:

```
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/core/management/__init__.py"", line 345, in execute
    settings.INSTALLED_APPS
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/conf/__init__.py"", line 46, in __getattr__
    self._setup(name)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/conf/__init__.py"", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File ""/Users/nateaune/.virtualenvs/taiga-back/lib/python2.7/site-packages/django/conf/__init__.py"", line 94, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/local/Cellar/python/2.7.7_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/nateaune/Dropbox/code/taiga/taiga-back/settings/__init__.py"", line 2
SyntaxError: Non-ASCII character '\xc3' in file /Users/nateaune/Dropbox/code/taiga/taiga-back/settings/__init__.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
```

I was able to workaround this issue by removing the special characters from all the files in the settings directory:

```
# Copyright (C) 2014 Jesús Espino <jespinog@gmail.com>
# Copyright (C) 2014 David Barragán <bameda@dbarragan.com>
```

to:

```
# Copyright (C) 2014 Jesus Espino <jespinog@gmail.com>
# Copyright (C) 2014 David Barragan <bameda@dbarragan.com>
```

Is there a better method?
"
1486,taigaio,taiga-back,12,closed,77,2,https://api.github.com/repos/taigaio/taiga-back/issues/77/comments,https://github.com/taigaio/taiga-back/issues/77,[],Python 3.4 actually needs all packages in requirements.txt,"I commented out the last lines of `requirements.txt` because I'm using Python 3.4 but I got errors:

```
$ python manage.py migrate --noinput
Traceback (most recent call last):
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/conf/__init__.py"", line 94, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/juanlu/Development/Python/taiga/taiga-back/settings/__init__.py"", line 20, in <module>
    from .celery import *
  File ""/home/juanlu/Development/Python/taiga/taiga-back/settings/celery.py"", line 17, in <module>
    from kombu import Exchange, Queue
ImportError: No module named 'kombu'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 345, in execute
    settings.INSTALLED_APPS
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/conf/__init__.py"", line 46, in __getattr__
    self._setup(name)
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/conf/__init__.py"", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File ""/home/juanlu/Development/Python/taiga/venv/lib/python3.4/site-packages/django/conf/__init__.py"", line 98, in __init__
    % (self.SETTINGS_MODULE, e)
ImportError: Could not import settings 'settings' (Is it on sys.path? Is there an import error in the settings file?): No module named 'kombu'
```

Installing the rest of packages results in a clean `python manage.py migrate --noinput`.
"
1561,taigaio,taiga-back,13,closed,1,1,https://api.github.com/repos/taigaio/taiga-back/issues/1/comments,https://github.com/taigaio/taiga-back/issues/1,[],"Cannot assign None: ""Project.owner"" does not allow null values.","I was trying to create a `Project` from the admin interface, I saw that the `owner` field wasn't required so I tried to save it without any project owner and it crashed with the exception message that I wrote as the title of this issue.

Is [this](https://github.com/kaleidos/greenmine-back/blob/master/greenmine/scrum/models.py#L192) intentional? I found that there [are](https://code.djangoproject.com/ticket/18441) [several](https://code.djangoproject.com/ticket/13776) Django bugs regarding this behaviour, I just want to let you know about the issue. 
"
1563,django,djangoproject.com,2,closed,918,0,https://api.github.com/repos/django/djangoproject.com/issues/918/comments,https://github.com/django/djangoproject.com/issues/918,[],Getting exception when I run ./manage.py migrate,"I've created a python 3.5 virtual environment and I've followed everything till step 5. But I can't seem to run the migrations. I know django but I'm not familiar with the workings of PostgresSQL. Here's the traceback: 

```
(py35_2) apoorv@apoorv:~/Work/django_prac/djangoproject.com$ ./manage.py migrateTraceback (most recent call last):
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/postgresql/base.py"", line 178, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  Peer authentication failed for user ""djangoproject""


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/base.py"", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/base.py"", line 353, in execute
    output = self.handle(*args, **options)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/base.py"", line 83, in wrapped
    res = handle_func(*args, **kwargs)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 82, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 18, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/migrations/loader.py"", line 49, in __init__
    self.build_graph()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/migrations/loader.py"", line 212, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/migrations/recorder.py"", line 61, in applied_migrations
    if self.has_table():
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/migrations/recorder.py"", line 44, in has_table
    return self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor())
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 255, in cursor
    return self._cursor()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 232, in _cursor
    self.ensure_connection()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/django/db/backends/postgresql/base.py"", line 178, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/apoorv/anaconda3/envs/py35_2/lib/python3.5/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  Peer authentication failed for user ""djangoproject""
```

Here's what I've done in my .bashrc file:

`export DJANGOPROJECT_DATA_DIR=/home/apoorv/Work/django_prac/djangoproject.com/.djangoproject`

How should I fix it? "
1564,django,djangoproject.com,2,closed,917,1,https://api.github.com/repos/django/djangoproject.com/issues/917/comments,https://github.com/django/djangoproject.com/issues/917,[],"Security flaws , use security fixes to make it more robust.","I conducted a security analysis on django and came up with the following results:
1) ""subprocess call with shell=true""
This is highly risky and provides options for attackers to invade the application with SQL injections and it possesses a HIGH severity and hence must be changed.
![Screen Shot 2019-05-18 at 8 11 22 pm](https://user-images.githubusercontent.com/51020914/58368272-0a53d480-7f2e-11e9-8521-2f0a7880b267.png)
There are other security flaws as well such as insecure hash functions but this one right here is of high severity and hence needs to be fixed."
1568,django,djangoproject.com,2,closed,913,1,https://api.github.com/repos/django/djangoproject.com/issues/913/comments,https://github.com/django/djangoproject.com/issues/913,[],_frozen_importlib._DeadlockError: deadlock detected by _ModuleLock('django.test.signals'),"Django crashing because of a deadlock 8 / 10 times.
After changing django to version 2.1.7 it works perfectly (but it's not a case I suppose :) ).

Mac OSX 10.14.4
Python 3.7

requirements.txt:

djangorestframework == 3.9.4
markdown == 3.1
django-filter == 2.1.0
**django == 2.2.1**
psycopg2-binary == 2.8.2
djangorestframework-camel-case == 1.0.3
django-cors-headers == 3.0.1
six == 1.12.0
django-ckeditor == 5.7.1

Log:

^C[user-name:~/Dev/folder/intranet/GIT/project-name/back] [venv] feature/init_web_api(+33/-1)+* ± **python manage.py runserver**

Watching for file changes with StatReloader
Performing system checks...

Exception in thread django-main-thread:
Traceback (most recent call last):
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/utils.py"", line 66, in __getitem__
    return self._engines[alias]
KeyError: 'django'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py"", line 917, in _bootstrap_inner
    self.run()
  File ""/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py"", line 865, in run
    self._target(*self._args, **self._kwargs)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/utils/autoreload.py"", line 54, in wrapper
    fn(*args, **kwargs)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/core/management/commands/runserver.py"", line 117, in inner_run
    self.check(display_num_errors=True)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 390, in check
    include_deployment_checks=include_deployment_checks,
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 377, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/core/checks/registry.py"", line 72, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/contrib/admin/checks.py"", line 79, in check_dependencies
    for engine in engines.all():
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/utils.py"", line 90, in all
    return [self[alias] for alias in self]
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/utils.py"", line 90, in <listcomp>
    return [self[alias] for alias in self]
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/utils.py"", line 81, in __getitem__
    engine = engine_cls(params)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/backends/django.py"", line 25, in __init__
    options['libraries'] = self.get_templatetag_libraries(libraries)
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/backends/django.py"", line 43, in get_templatetag_libraries
    libraries = get_installed_libraries()
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/backends/django.py"", line 108, in get_installed_libraries
    for name in get_package_libraries(pkg):
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/template/backends/django.py"", line 121, in get_package_libraries
    module = import_module(entry[1])
  File ""/usr/local/Cellar/python/3.7.3/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py"", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 1006, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 983, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 967, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 677, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 728, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/rest_framework/templatetags/rest_framework.py"", line 15, in <module>
    from rest_framework.renderers import HTMLFormRenderer
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/rest_framework/renderers.py"", line 20, in <module>
    from django.test.client import encode_multipart
  File ""/Users/user-name/Dev/folder/intranet/GIT/project-name/back/venv/lib/python3.7/site-packages/django/test/client.py"", line 23, in <module>
    from django.test import signals
  File ""<frozen importlib._bootstrap>"", line 980, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 149, in __enter__
  File ""<frozen importlib._bootstrap>"", line 94, in acquire
_frozen_importlib._DeadlockError: deadlock detected by _ModuleLock('django.test.signals') at 4546635928
"
1571,django,djangoproject.com,2,closed,909,2,https://api.github.com/repos/django/djangoproject.com/issues/909/comments,https://github.com/django/djangoproject.com/issues/909,[],Django 1.11 upgrade -> runserver error with user related field `groups` is throwing an attribute error,"I'm currently upgrading from Django 1.10 to 1.11. I've addressed all deprecation issues and everything is working fine, our app is running on gunicorn and django shell works. However, runserver is throwing an error that I can't seem to sort out. Looks like it's happening on the related groups field to the user model. We are using a custom user model which was working fine in 1.10. Below is the stack trace. Appreciate any help in getting this resolved. Cheers!

error in db/models/fields/related.py _check_table_uniqueness()

Unhandled exception in thread started by <function wrapper at 0x7f6d8b8358c0>
Traceback (most recent call last):
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 227, in wrapper
    fn(*args, **kwargs)
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 125, in inner_run
    self.check(display_num_errors=True)
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/core/management/base.py"", line 359, in check
    include_deployment_checks=include_deployment_checks,
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/core/management/base.py"", line 346, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/core/checks/registry.py"", line 81, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/core/checks/model_checks.py"", line 30, in check_all_models
    errors.extend(model.check(**kwargs))
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/db/models/base.py"", line 1282, in check
    errors.extend(cls._check_fields(**kwargs))
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/db/models/base.py"", line 1359, in _check_fields
    errors.extend(field.check(from_model=cls, **kwargs))
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/db/models/fields/related.py"", line 1195, in check
    errors.extend(self._check_table_uniqueness(**kwargs))
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/db/models/fields/related.py"", line 1446, in _check_table_uniqueness
    for model in self.opts.apps.get_models(include_auto_created=True)
  File ""/home/manzama/.virtualenvs/manzama/local/lib/python2.7/site-packages/django/db/models/fields/related.py"", line 1447, in <dictcomp>
    if model != self.remote_field.through and model._meta.managed
AttributeError: 'ModelOptions' object has no attribute 'managed'"
1572,django,djangoproject.com,2,closed,908,1,https://api.github.com/repos/django/djangoproject.com/issues/908/comments,https://github.com/django/djangoproject.com/issues/908,[],Django 3.0,"I noticed that the ""Writing your first Django app, part 1"" webpage of the Django documentation says that Django 3 is being used, but the latest version is 2.2, and 3 is unreleased. Is this a typing error?"
1577,django,djangoproject.com,2,closed,897,0,https://api.github.com/repos/django/djangoproject.com/issues/897/comments,https://github.com/django/djangoproject.com/issues/897,[],Failing collectstatic with ManifestFilesMixin,"Collectstatic throws `KeyError: 'ContentLength'` when used with ManifestFileMixin. Below is the custom storage class I've written to upload the files to Google Cloud Storage.

    class CustomStorage(ManifestFilesMixin, S3Boto3Storage):
         pass

in the settings.py

    STATICFILES_STORAGE = 'myapp.storage.CustomStorage'

And here is the stacktrace:

    .venv/lib/python3.6/site-packages/storages/backends/s3boto3.py:282: UserWarning: The default behavior of S3Boto3Storage is insecure and will change in django-storages 2.0. By default files and new buckets are saved with an ACL of 'public-read' (globally publicly readable). Version 2.0 will default to using the bucket's ACL. To opt into the new behavior set AWS_DEFAULT_ACL = None, otherwise to silence this warning explicitly set AWS_DEFAULT_ACL.
     ""The default behavior of S3Boto3Storage is insecure and will change ""
     Traceback (most recent call last): File ""./manage.py"", line 10, in <module> execute_from_command_line(sys.argv)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line 
       utility.execute()
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute 
       self.fetch_command(subcommand).run_from_argv(self.argv)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/management/base.py"", line 316, in run_from_argv 
       self.execute(*args, **cmd_options)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/management/base.py"", line 353, in execute
       output = self.handle(*args, **options)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 188, in handle
       collected = self.collect()
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 128, in collect
       for original_path, processed_path, processed in processor:
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 402, in post_process
       yield from super().post_process(*args, **kwargs)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 236, in post_process
       for name, hashed_name, processed, _ in self._post_process(paths, adjustable_paths, hashed_files):
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 293, in _post_process
       content = pattern.sub(converter, content)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 194, in converter
       force=True, hashed_files=hashed_files,
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 131, in _url
       hashed_name = hashed_name_func(*args)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 342, in _stored_name
       cache_name = self.clean_name(self.hashed_name(name))
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 99, in hashed_name
       file_hash = self.file_hash(clean_name, content)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/contrib/staticfiles/storage.py"", line 79, in file_hash
       for chunk in content.chunks():
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/files/base.py"", line 55, in chunks
      self.seek(0)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/django/core/files/utils.py"", line 20, in <lambda>
       seek = property(lambda self: self.file.seek)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/storages/backends/s3boto3.py"", line 97, in _get_file
       self.obj.download_fileobj(self._file)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/boto3/s3/inject.py"", line 760, in object_download_fileobj
       ExtraArgs=ExtraArgs, Callback=Callback, Config=Config)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/boto3/s3/inject.py"", line 678, in download_fileobj
       return future.result()
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/s3transfer/futures.py"", line 106, in result
       return self._coordinator.result()
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/s3transfer/futures.py"", line 265, in result
       raise self._exception
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/s3transfer/tasks.py"", line 255, in _main
       self._submit(transfer_future=transfer_future, **kwargs)
     File ""/home/ufaz/webapps/ufaz_website/.venv/lib/python3.6/site-packages/s3transfer/download.py"", line 348, in _submit
       response['ContentLength'])
     KeyError: 'ContentLength'

As a reminder. I am using Google Cloud Storage since it is also S3 compatible
"
1592,django,djangoproject.com,2,closed,879,1,https://api.github.com/repos/django/djangoproject.com/issues/879/comments,https://github.com/django/djangoproject.com/issues/879,[],Forbidden (403) CSRF Verification failed. Request aborted,"These days I've tried Django2.1.7 with Python 3.7.2. I was following djangoproject tutorial end I ended up with this error while trying to login in the admin page. 

I will attach images below to show the problem.
![admin_login_problem_image1](https://user-images.githubusercontent.com/31784300/53697664-7b15a580-3db2-11e9-9209-24facd30ddab.jpg)

![admin_login_problem_image2](https://user-images.githubusercontent.com/31784300/53697666-7f41c300-3db2-11e9-82c2-1b977924eeb5.jpg)

![admin_login_problem_image3](https://user-images.githubusercontent.com/31784300/53697667-823cb380-3db2-11e9-8f6f-8af7c18a4b81.jpg)


This problem occurred with the versions I've mentioned.
But Yesterday I've tried Django 2.0.0 with Python 3.6.8 and I could login in the admin page without any problem. What could be the problem I'm facing?
"
1609,django,djangoproject.com,2,closed,859,1,https://api.github.com/repos/django/djangoproject.com/issues/859/comments,https://github.com/django/djangoproject.com/issues/859,[],Django 2.1.5 and MySQL Client Incompabilities,"I am using Django 2.1.5 and installed mysqlclient for my application, but when I am running python manage.py migrate. I am getting a whole lot of SQL syntax errors.

So what is the compatible mysqlclient version for Django==2.1.5"
1613,django,djangoproject.com,2,closed,855,2,https://api.github.com/repos/django/djangoproject.com/issues/855/comments,https://github.com/django/djangoproject.com/issues/855,[], HttpResponseRedirect failed in django 2.1,"Greetings!
At first, I would thank to Django team for developing Python-Django Web Framework.

Question:
I wrote a view (def register(request)) to check if DB is empty, user can to create a new SuperUser. When DB is empty, “register” view works fine on GET request. but when user is submitting her/his info (via POST request), then he/she must be redirected to “login” url (mean: now user should enter USER and PASS in login page). but a “login” is added after “register/”  in browser-address-bar.
note: inserting data (superuser) to DB works fine. but redirect doesn't work.

uploaded code:
https://pastebin.com/fLibTNP9

uploaded error:

why “login” is appended to address-bar after “register/” !?
where is the problem !?

thanks in advance"
1614,django,djangoproject.com,2,closed,854,1,https://api.github.com/repos/django/djangoproject.com/issues/854/comments,https://github.com/django/djangoproject.com/issues/854,[],pyhton manage.py migrate not working,"Dear every one, 
i'm new in the Django cms environment, and I need your help ! ( please :) )

When I tried to ""install"" the cms is not working, I had a long list of error message 

> `(venv) project@project-web:~/work.project.www$ python manage.py migrate
Traceback (most recent call last):
  File ""manage.py"", line 10, in 
    execute_from_command_line(sys.argv)
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", 
line 364, in execute_from_command_line
    utility.execute()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", 
line 338, in execute
    django.setup()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/__init__.py"", 
line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/apps/registry.py"", 
line 116, in populate
    app_config.ready()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/contrib/admin/apps.py"", 
line 23, in ready
    self.module.autodiscover()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/contrib/admin/__init__.py"", 
line 26, in autodiscover
    autodiscover_modules('admin', register_to=site)
  File 
""/home/project/venv/local/lib/python2.7/site-packages/django/utils/module_loading.py"", 
line 50, in autodiscover_modules
    import_module('%s.%s' % (app_config.name, module_to_search))
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File 
""/home/project/venv/local/lib/python2.7/site-packages/cms/admin/__init__.py"", 
line 11, in 
    plugin_pool.plugin_pool.discover_plugins()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/cms/plugin_pool.py"", 
line 33, in discover_plugins
    invalidate_cms_page_cache()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/cms/cache/__init__.py"", 
line 69, in invalidate_cms_page_cache
    version = _get_cache_version()
  File 
""/home/project/venv/local/lib/python2.7/site-packages/cms/cache/__init__.py"", 
line 20, in _get_cache_version
    _set_cache_version(1)
  File 
""/home/project/venv/local/lib/python2.7/site-packages/cms/cache/__init__.py"", 
line 33, in _set_cache_version
    get_cms_setting('CACHE_DURATIONS')['content']
TypeError: 'int' object has no attribute '__getitem__'
(venv) project@project-web:~/work.project.www$
`

OS: Ubuntu / Debian
Version of python: 2.7

In advance , 
Thank's so much
"
1619,django,djangoproject.com,2,closed,849,1,https://api.github.com/repos/django/djangoproject.com/issues/849/comments,https://github.com/django/djangoproject.com/issues/849,[],Better UX for website newticket page,"The UX for the website newticket page is very confusing. 
https://code.djangoproject.com/newticket

I would suggest something like the following changes be made: 
Visited links _should not_ be a dark green that is almost black. 
Layout should be as follows with text changes for clarity: 

**### Bug Tickets**  # Big title 
Please read this first # Large heading
	Don't report security issues here! Contact <url here> # smaller heading, not black 
	Don't use this form for general questions. Check the FAQ # smaller heading, not black 

Issues # Large heading
	Django Project Code Issues # smaller heading 
		Use the below form to create new tickets and for best response: 
- Follow bug reporting guidelines<link>
- Follow patch submition guidelines<link>
- Go through the bug checklist<link>
- Use Preview<link> to check your formatting. 

Django Website Issues #Large heading 

- For issues with the website report here: 
- <<em>> www <em.>.django.com<</em>>  ##!! www must be very emphasized ##
- For issues with the website <em> code tracker</em> report here:	
- <<em>> code<em>. django.com</em> ##! www must be very emphasized to tell the difference from the above link 

Bugs with Translation? Report on Transifex <link>#Large heading 
"
1627,django,djangoproject.com,2,closed,841,1,https://api.github.com/repos/django/djangoproject.com/issues/841/comments,https://github.com/django/djangoproject.com/issues/841,[],Error when I access the path in django 2.1,"Hello, I did an update of a project for django 2.1 from 2.0.8 but when I try to access I have 2 errors

![slack](https://user-images.githubusercontent.com/9811859/44412890-982e0980-a52f-11e8-81df-e82b2534dc8f.png)
![1__docker-compose_up__docker-compose_](https://user-images.githubusercontent.com/9811859/44412819-72086980-a52f-11e8-8f17-38ced320c46f.png)
![attributeerror_at__](https://user-images.githubusercontent.com/9811859/44412928-b0058d80-a52f-11e8-92bf-e2a68c6934d8.png)

Could you help me please, thanks"
1632,django,djangoproject.com,2,closed,833,1,https://api.github.com/repos/django/djangoproject.com/issues/833/comments,https://github.com/django/djangoproject.com/issues/833,[],CORS Problem - Method PATCH is not allowed by Access-Control-Allow-Methods,"I am using Agular5 and Django Rest Frame work . All methods work fine with cors , like GET,POST,PUT , but I am getting Method PATCH is not allowed by Access-Control-Allow-Methods in preflight response. I have read about this on stackoverflow that this problem is related to CORS header.


I found a solution a on stackoverflow where it was said that I have to explicitly allow Control Allow Methods in django. So I made a middleware.py file and included it in MIDDLEWARES in settings.py file , my middleware.py content is as follow
`class MyMiddleware:

    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        response = self.get_response(request)
        response['Access-Control-Allow-Methods'] = 'GET, POST, PUT, PATCH, DELETE, OPTIONS'
        return response`

But still I am getting this error .what should I do I am stuck at it ."
1643,django,djangoproject.com,2,closed,822,1,https://api.github.com/repos/django/djangoproject.com/issues/822/comments,https://github.com/django/djangoproject.com/issues/822,[],[BUG?] Django ORM Group by on two keys in Single Table,"class ConcurrentUser(models.Model):
    logtime = models.DateTimeField(primary_key=True)
    country = models.CharField(max_length=10)
    pcu = models.IntegerField(blank=True)
    update_ts = models.DateTimeField(blank=True)

I wanted data to group by 'country' and 'logtime'. and made ORM sentence, like below.
'''
res = res_tmp.values('country', 'logtime').annotate(hourly_sum=models.Sum(core_v))\
                    .values('country', 'logtime', 'hourly_sum').order_by('-hourly_sum')
'''

But, query is converted to the SQL sentence, below, by Django ORM.
'''
SELECT `country`, `logtime`, SUM(`pcu`) AS `hourly_sum` FROM `concurrent_user`
GROUP BY `logtime` ORDER BY `hourly_sum` DESC
'''

Why does Django Annotation ignore 'country' key in values() when making group_by query? 
How can I fix this problem with Django ORM?"
1649,django,djangoproject.com,2,closed,816,1,https://api.github.com/repos/django/djangoproject.com/issues/816/comments,https://github.com/django/djangoproject.com/issues/816,[],installation of hstore extension before running tests,"I am trying to install the hstore extension before running django tests. For that, I have overridden the default **DiscoverRunner**'s *setup_databases* method.

However, the extension is not installed & the tests show this error 
`django.db.utils.ProgrammingError: type ""hstore"" does not exist`

> Here's my code to override the default discover runner.

***settings.py***

    TEST_RUNNER = 'project.tests.CustomDiscovererRunner'


***tests.py***


    from django.db import DEFAULT_DB_ALIAS, connections
    from django.test.runner import DiscoverRunner
    
    class CustomDiscovererRunner(DiscoverRunner):
        def setup_databases(self, **kwargs):
    
            result = super().setup_databases(**kwargs)
    
            connection = connections[DEFAULT_DB_ALIAS]
            cursor = connection.cursor()
            cursor.execute('CREATE EXTENSION IF NOT EXISTS HSTORE')
            
            return result

"
1650,django,djangoproject.com,2,closed,815,1,https://api.github.com/repos/django/djangoproject.com/issues/815/comments,https://github.com/django/djangoproject.com/issues/815,[],French documentation isn't translated,"# How to reproduce :

- Go to https://docs.djangoproject.com/fr/2.0/
- We have the same result if we go to https://docs.djangoproject.com/en/2.0/intro/ , then use the bottom right button ""Language: fr"" 

# Expected

The documentation in french.

# Information

- Browser: Mozilla Firefox 58.0.2 (64 bits)
- This bug doesn't appear with other languages
- I haven't this issue last week"
1656,django,djangoproject.com,2,closed,808,1,https://api.github.com/repos/django/djangoproject.com/issues/808/comments,https://github.com/django/djangoproject.com/issues/808,[],django admin search fields: FieldError at /admin/tropo/outcalltransfer/,"when I use a foreign key field id from current table, it throws the exception.
explained:
model A has field b which is a one to one foreign key relation to Model B. Model B has a field c which is another one to one relation to Model C.
Now when I use in Model A admin, search_fields=('b__c_id',) 
and then search for a needle in the model admin interface searchbox, it throws exception

FieldError at /admin/tropo/outcalltransfer/
Related Field got invalid lookup: icontains

But no problem for search_fields=('b__c__id',) 

Why?
for foreign key relations, table for B already has c_id right?"
1661,django,djangoproject.com,2,closed,803,1,https://api.github.com/repos/django/djangoproject.com/issues/803/comments,https://github.com/django/djangoproject.com/issues/803,[],Textbox resizing is semi-broken when creating new ticket,"Now this is a proper yak shave: I'm reporting a bug in the bug-reporting system that I'm using to report the issue that's blocking my work on the first issue.  Ahem.

If you go to create a new issue at https://code.djangoproject.com/newticket, the ""description"" box has a lovely note next to it that you can use wiki markup.  If you make the textbox itself narrower, the note stays in position.  But when you make it wider again, the note *retains all the added space*.

Terribly crude image:

![image](https://user-images.githubusercontent.com/12229877/33525406-f9bcb978-d882-11e7-807d-3d1ef11cd759.png)
"
1662,django,djangoproject.com,3,closed,802,1,https://api.github.com/repos/django/djangoproject.com/issues/802/comments,https://github.com/django/djangoproject.com/issues/802,[],Password validation Error with Latin characters,"I am using the function 'validate_password (password, new_user)' and I have my settings configured in Spanish, the problem comes when the validate_password function raises an error with the word 'contraseña' and shows me this error:
ValidationError: [u'La contrase\xf1a es demasiado similar a la de nombre de usuario.']
I am using python 2.7 and Django 1.11.4

This is the traceback:

```
Traceback (most recent call last):
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/Users/adrianmansilla/Documents/sisgos/sisgos/company/views.py"", line 129, in new_user
    validate_password(password, new_user)
  File ""/Users/adrianmansilla/Documents/sisgos/venv/lib/python2.7/site-packages/django/contrib/auth/password_validation.py"", line 56, in validate_password
    raise ValidationError(errors)
ValidationError: [u'La contrase\xf1a es demasiado similar a la de nombre de usuario.']
```"
1664,django,djangoproject.com,3,closed,800,24,https://api.github.com/repos/django/djangoproject.com/issues/800/comments,https://github.com/django/djangoproject.com/issues/800,[],Can you please elaborate 3 step where I need to create secret.json file,"I am getting the following error 

 conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  password authentication failed for user ""djangoproject""
FATAL:  password authentication failed for user ""djangoproject""

I followed all steps excluding step 3. So please help me how I configure that project successfully on local server(ubuntu)."
1667,django,djangoproject.com,3,closed,796,8,https://api.github.com/repos/django/djangoproject.com/issues/796/comments,https://github.com/django/djangoproject.com/issues/796,[],Broken Debug Toolbar for docs,"Django Debug Toolbar works well for `www` , for example, if I open http://www.djangoproject.dev:8000/ I can show the toolbar and open the SQL panel.

If I try to open for example http://docs.djangoproject.dev:8000/en/1.11/ I can see the toolbar but I got `0: error` if I try to open SQL panel

This is the message I saw on browser console:
`Failed to load http://www.djangoproject.dev:8000/__debug__/render_panel/?store_id=212b2bb5adc54a3a81b97b6da5547d4c&panel_id=SQLPanel: No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://docs.djangoproject.dev:8000' is therefore not allowed access.`

If i open the url http://www.djangoproject.dev:8000/__debug__/render_panel/?store_id=212b2bb5adc54a3a81b97b6da5547d4c&panel_id=SQLPanel I can see all the data

I think the problem is the toolbar is trying to open a www. for the panel instead of a doc. url but I don't know how to update the settings to fix this."
1684,django,djangoproject.com,3,closed,777,4,https://api.github.com/repos/django/djangoproject.com/issues/777/comments,https://github.com/django/djangoproject.com/pull/777,[],Fixed Sphinx command error,"### Solution:
Downgrade to Sphinx 1.5.6 due to bug con sphinx-build command.

### Steps to reproduce:

- Create a fresh repo and follow de README installation instructions
- While running the command update_docs the following error popups:

### Traceback: 
```
(django-fts) ../djangoproject.com (master)$ ./manage.py update_docs
Updating en/dev...
HEAD is now at 504ce3914f Fixed #28394 -- Allowed setting BaseExpression.output_field (renamed from _output_field).
Removing django/__pycache__/
Removing django/apps/__pycache__/
Removing django/conf/__pycache__/
Removing django/conf/locale/__pycache__/
Removing django/conf/urls/__pycache__/
Removing django/contrib/__pycache__/
Removing django/contrib/admin/__pycache__/
Removing django/contrib/admin/templatetags/__pycache__/
Removing django/contrib/admin/views/__pycache__/
Removing django/contrib/auth/__pycache__/
Removing django/contrib/contenttypes/__pycache__/
Removing django/contrib/flatpages/__pycache__/
Removing django/contrib/gis/__pycache__/
Removing django/contrib/gis/admin/__pycache__/
Removing django/contrib/gis/db/__pycache__/
Removing django/contrib/gis/db/models/__pycache__/
Removing django/contrib/gis/forms/__pycache__/
Removing django/contrib/gis/gdal/__pycache__/
Removing django/contrib/gis/gdal/prototypes/__pycache__/
Removing django/contrib/gis/geoip2/__pycache__/
Removing django/contrib/gis/geos/__pycache__/
Removing django/contrib/gis/geos/prototypes/__pycache__/
Removing django/contrib/gis/utils/__pycache__/
Removing django/contrib/messages/__pycache__/
Removing django/contrib/messages/storage/__pycache__/
Removing django/contrib/postgres/__pycache__/
Removing django/contrib/postgres/aggregates/__pycache__/
Removing django/contrib/postgres/fields/__pycache__/
Removing django/contrib/postgres/forms/__pycache__/
Removing django/contrib/redirects/__pycache__/
Removing django/contrib/sessions/__pycache__/
Removing django/contrib/sessions/backends/__pycache__/
Removing django/contrib/sitemaps/__pycache__/
Removing django/contrib/sites/__pycache__/
Removing django/contrib/staticfiles/__pycache__/
Removing django/contrib/syndication/__pycache__/
Removing django/core/__pycache__/
Removing django/core/cache/__pycache__/
Removing django/core/cache/backends/__pycache__/
Removing django/core/checks/__pycache__/
Removing django/core/checks/security/__pycache__/
Removing django/core/files/__pycache__/
Removing django/core/handlers/__pycache__/
Removing django/core/mail/__pycache__/
Removing django/core/management/__pycache__/
Removing django/core/serializers/__pycache__/
Removing django/core/servers/__pycache__/
Removing django/db/__pycache__/
Removing django/db/backends/__pycache__/
Removing django/db/backends/base/__pycache__/
Removing django/db/migrations/__pycache__/
Removing django/db/migrations/operations/__pycache__/
Removing django/db/models/__pycache__/
Removing django/db/models/fields/__pycache__/
Removing django/db/models/functions/__pycache__/
Removing django/db/models/sql/__pycache__/
Removing django/dispatch/__pycache__/
Removing django/forms/__pycache__/
Removing django/http/__pycache__/
Removing django/middleware/__pycache__/
Removing django/template/__pycache__/
Removing django/template/backends/__pycache__/
Removing django/template/loaders/__pycache__/
Removing django/templatetags/__pycache__/
Removing django/test/__pycache__/
Removing django/urls/__pycache__/
Removing django/utils/__pycache__/
Removing django/utils/translation/__pycache__/
Removing django/views/__pycache__/
Removing django/views/decorators/__pycache__/
Removing django/views/generic/__pycache__/
Removing docs/_ext/__pycache__/
Updating es/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
Updating fr/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
Updating ja/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
Updating id/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
Updating pt-br/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
Updating en/1.9...
HEAD is now at 2c3c029ede [1.9.x] Added CVE-2017-7233,4 to the security release archive.
../.pyenv/versions/3.5.3/envs/django-fts/lib/python3.5/site-packages/sphinx/util/compat.py:40: RemovedInSphinx17Warning: sphinx.util.compat.Directive is deprecated and will be removed in Sphinx 1.7, please use docutils' instead.
  RemovedInSphinx17Warning)

Extension error:
Could not import extension djangodocs (exception: cannot import name 'SmartyPantsHTMLTranslator')
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""../.pyenv/versions/django-fts/lib/python3.5/site-packages/django/core/management/__init__.py"", line 363, in execute_from_command_line
    utility.execute()
  File ""../.pyenv/versions/django-fts/lib/python3.5/site-packages/django/core/management/__init__.py"", line 355, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""../.pyenv/versions/django-fts/lib/python3.5/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""../.pyenv/versions/django-fts/lib/python3.5/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""../Documents/sprints/europython-2017/djangoproject.com/docs/management/commands/update_docs.py"", line 120, in handle
    str(build_dir),         # Destination directory
  File ""../.pyenv/versions/3.5.3/lib/python3.5/subprocess.py"", line 271, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['sphinx-build', '-b', 'json', '-D', 'language=en', '-q', '../.djangoproject/djangodocs/sources/1.9/docs', '../.djangoproject/djangodocs/en/1.9/_build/json']' returned non-zero exit status 1
```

This seems related with a change or [deprecation](https://github.com/sphinx-doc/sphinx/blob/007593fa810918f243223080598d7ef74fd48fe9/CHANGES#L27) on Sphinx 1.6 and after.

```
...
Features removed
----------------

* Configuration variables

  - html_use_smartypants
...
```


footnote:

Found while working with @Dunedan, @pauloxnet, @joaojunior, @lucifurtun, @leapforleap on the Europython 2017 sprints."
1717,django,djangoproject.com,3,closed,737,6,https://api.github.com/repos/django/djangoproject.com/issues/737/comments,https://github.com/django/djangoproject.com/issues/737,[],"Docs build error: ""Cannot delete indices that are being snapshotted""","Sometimes [`DocumentDocType.alias_to_main_index()`](https://github.com/django/djangoproject.com/blob/7e188d8ee5d403a1e530dcabddd6685421b5a298/docs/search.py#L159-L178) crashes like this:
```
DELETE https://7cd8f7a21dbf68934d42d468910c155e-us-east-1.foundcluster.com:9243/docs-2017-02-12t18%3A00%3A09.916080 [status:400 request:0.178s]
Traceback (most recent call last):
...
  File ""/home/www/www/src/docs/management/commands/update_index.py"", line 28, in handle
    DocumentDocType.alias_to_main_index(new_index_name)
  File ""/home/www/www/src/docs/search.py"", line 178, in alias_to_main_index
    client.indices.delete(old_index_name)
  File ""/home/www/www/venv/lib/python3.5/site-packages/elasticsearch/client/utils.py"", line 71, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""/home/www/www/venv/lib/python3.5/site-packages/elasticsearch/client/indices.py"", line 200, in delete
    params=params)
  File ""/home/www/www/venv/lib/python3.5/site-packages/elasticsearch/transport.py"", line 318, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""/home/www/www/venv/lib/python3.5/site-packages/elasticsearch/connection/http_urllib3.py"", line 127, in perform_request
    self._raise_error(response.status, raw_data)
  File ""/home/www/www/venv/lib/python3.5/site-packages/elasticsearch/connection/base.py"", line 122, in _raise_error
    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
elasticsearch.exceptions.RequestError: TransportError(400, 'illegal_argument_exception', 'Cannot delete indices that are being snapshotted: [[docs-2017-02-12t18:00:09.916080/-C5sHfYsTBOA3klBpDfhuw]]. Try again after snapshot finishes or cancel the currently running snapshot.')
```"
1722,django,djangoproject.com,3,closed,732,1,https://api.github.com/repos/django/djangoproject.com/issues/732/comments,https://github.com/django/djangoproject.com/issues/732,[],No module named NullHandler,"Hello Team!,

I really hope you could help me with this error:
_Unable to configure handler 'null': Cannot resolve 'django.utils.log.NullHandler': No module named NullHandler_

I am using Django 1.10 on Ubuntu 14.04 with python 2.7
Even though I have been looking up for information to solve the error; I haven`t found a solution that works. 

Thanks a lot in advance



"
1752,django,djangoproject.com,3,closed,699,0,https://api.github.com/repos/django/djangoproject.com/issues/699/comments,https://github.com/django/djangoproject.com/issues/699,"[{""default"": false, ""name"": ""docs"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/docs"", ""color"": ""bfe5bf"", ""node_id"": ""MDU6TGFiZWwxNTk5MDU3NTc="", ""id"": 159905757}, {""default"": false, ""name"": ""styles"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/styles"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWwxNTcxODgyMjY="", ""id"": 157188226}]",Exceptions aren't styled the same as other references,"See the following screen capture (from https://docs.djangoproject.com/en/1.10/topics/templates/#django.template.TemplateSyntaxError):

![templates_django_documentation_django_-_2016-08-28_15 10 19](https://cloud.githubusercontent.com/assets/6345/18033995/c97a3f00-6d31-11e6-9a8c-15621dee2f92.png)

Notice how `exception TemplateSyntaxError(msg` is not highlighted in bold like `Template.render(context=None, request=None)` is.

This seems to be because of a missing selector in `style.scss`: https://github.com/django/djangoproject.com/blob/master/djangoproject/scss/_style.scss#L2365. Adding `dl.exception` to that list should fix the issue.
"
1763,django,djangoproject.com,4,closed,688,1,https://api.github.com/repos/django/djangoproject.com/issues/688/comments,https://github.com/django/djangoproject.com/issues/688,[],Feed not showing under /community/blogs/,"Hello,

I've added my feed on this page a few months ago:
https://www.djangoproject.com/community/add/blogs/

the feed is: http://eatsomecode.com/rss/django/

My posts, including one I've published today are not showing up here:
https://www.djangoproject.com/community/blogs/

I've tried to add it back today but I'm getting an error message saying that this feed already exists. I haven't received any email or see any error message last time. I'm not sure if it's a problem with the feed itself or something else.

Thank you,
"
1779,django,djangoproject.com,4,closed,672,1,https://api.github.com/repos/django/djangoproject.com/issues/672/comments,https://github.com/django/djangoproject.com/pull/672,[],[BUGFIX] When people.djangoproject is down/slow first non cache page …,"…is slow
"
1787,django,djangoproject.com,4,closed,664,2,https://api.github.com/repos/django/djangoproject.com/issues/664/comments,https://github.com/django/djangoproject.com/issues/664,[],Improve link to issue tracker in the contributor guide,"In the [contributor guide](https://docs.djangoproject.com/ja/1.9/internals/contributing/), the second link in ""Report bugs in our ticket tracker"", linked under ""issue tracker"", goes [here](https://code.djangoproject.com/newticket).  If you're not logged in (which many new contributors will not be), you see this:

![screenshot](https://cloud.githubusercontent.com/assets/1179362/15763142/9d42d266-28d6-11e6-9254-fe739fe0a963.png)

I will replace it with a link to [https://code.djangoproject.com/query](https://code.djangoproject.com/query)
"
1806,django,djangoproject.com,4,closed,643,1,https://api.github.com/repos/django/djangoproject.com/issues/643/comments,https://github.com/django/djangoproject.com/issues/643,[],Error: Argument of type 'datetime.datetime' is not iterable ,"Hi,

When I execute ""python manage.py migrate"" I get this error on the screen:

```
File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 354, in exec$
te_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 346, in exec$
te
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/base.py"", line 394, in run_from$
argv
    self.execute(*args, **cmd_options)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/commands/migrate.py"", line 222, 
in handle
    executor.migrate(targets, plan, fake=fake, fake_initial=fake_initial)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/migrations/executor.py"", line 110, in migrat$
    self.apply_migration(states[migration], migration, fake=fake, fake_initial=fake_initial)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/migrations/executor.py"", line 148, in apply_$
igration
    state = migration.apply(state, schema_editor)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/migrations/migration.py"", line 115, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/migrations/operations/fields.py"", line 62, in
 database_forwards
    field,
  File ""/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/schema.py"", line 43, in add_fi
eld
    super(DatabaseSchemaEditor, self).add_field(model, field)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/backends/base/schema.py"", line 384, in add_fi
eld
    definition, params = self.column_sql(model, field, include_default=True)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/backends/base/schema.py"", line 146, in column
_sql
    default_value = self.effective_default(field)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/backends/base/schema.py"", line 211, in effect
ive_default
    default = field.get_db_prep_save(default, self.connection)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py"", line 710, in get_
db_prep_save
    prepared=False)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py"", line 2003, in get
_db_prep_value
    value = self.get_prep_value(value)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.py"", line 2010, in get
_prep_value
    if value and ':' in value:
TypeError: argument of type 'datetime.datetime' is not iterable
```

Can anyone help me please?

Thanks!
"
1812,django,djangoproject.com,4,closed,637,3,https://api.github.com/repos/django/djangoproject.com/issues/637/comments,https://github.com/django/djangoproject.com/issues/637,[],Production traceback: ConnectionTimeout caused by - ReadTimeoutError (elasticsearch),"Since deploying 915ab5bd76aa27c8990269e723dd97cb1563fd00, this is a common error:

```
ConnectionTimeout: ConnectionTimeout caused by - 
ReadTimeoutError(HTTPSConnectionPool(
host='7cd8f7a21dbf68934d42d468910c155e-us-east-1.foundcluster.com', port=9243):
Read timed out. (read timeout=60.0))

  File ""bin/django-admin.py"", line 5, in <module>
    management.execute_from_command_line()
  File ""django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""docs/management/commands/update_docs_and_index.py"", line 11, in handle
    call_command('update_index', **options)
  File ""django/core/management/__init__.py"", line 119, in call_command
    return command.execute(*args, **defaults)
  File ""raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""docs/management/commands/update_index.py"", line 29, in handle
    for ok, item in index_results:
  File ""docs/search.py"", line 79, in index_all
    for ok, item in streaming_bulk(client, actions_generator(), **kwargs):
  File ""elasticsearch/helpers/__init__.py"", line 160, in streaming_bulk
    for result in _process_bulk_chunk(client, bulk_actions, raise_on_exception, raise_on_error, **kwargs):
  File ""elasticsearch/helpers/__init__.py"", line 89, in _process_bulk_chunk
    raise e
  File ""elasticsearch/helpers/__init__.py"", line 85, in _process_bulk_chunk
    resp = client.bulk('\n'.join(bulk_actions) + '\n', **kwargs)
  File ""elasticsearch/client/utils.py"", line 69, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""elasticsearch/client/__init__.py"", line 777, in bulk
    doc_type, '_bulk'), params=params, body=self._bulk_body(body))
  File ""elasticsearch/transport.py"", line 329, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""elasticsearch/connection/http_urllib3.py"", line 99, in perform_request
    raise ConnectionTimeout('TIMEOUT', str(e), e)
```
"
1822,django,djangoproject.com,4,closed,627,6,https://api.github.com/repos/django/djangoproject.com/issues/627/comments,https://github.com/django/djangoproject.com/issues/627,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/bug"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWwxNTk5MjM4MjU="", ""id"": 159923825}, {""default"": false, ""name"": ""docs"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/docs"", ""color"": ""bfe5bf"", ""node_id"": ""MDU6TGFiZWwxNTk5MDU3NTc="", ""id"": 159905757}]",Translated docs builds fail often with KeyError,"```
# Sphinx version: 1.3.4
# Python version: 3.4.0 (CPython)
# Docutils version: 0.12 release
# Jinja2 version: 2.7.3
# Last messages:
#   reading sources... [ 17%] internals/security
#   reading sources... [ 17%] internals/team
#   reading sources... [ 17%] intro/contributing
#   reading sources... [ 18%] intro/index
#   reading sources... [ 18%] intro/install
#   reading sources... [ 18%] intro/overview
#   reading sources... [ 18%] intro/reusable-apps
#   reading sources... [ 19%] intro/tutorial01
#   reading sources... [ 19%] intro/tutorial02
#   reading sources... [ 19%] intro/tutorial03
# Loaded extensions:
#   sphinx.ext.intersphinx (1.3.4) from /home/www/www/venv/lib/python3.4/site-packages/sphinx/ext/intersphinx.py
#   ticket_role (unknown version) from /home/www/www/data/docbuilds/1.8/docs/_ext/ticket_role.py
#   djangodocs (unknown version) from /home/www/www/data/docbuilds/1.8/docs/_ext/djangodocs.py
#   alabaster (0.7.7) from /home/www/www/venv/lib/python3.4/site-packages/alabaster/__init__.py
#   sphinx.ext.viewcode (1.3.4) from /home/www/www/venv/lib/python3.4/site-packages/sphinx/ext/viewcode.py
Traceback (most recent call last):
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/cmdline.py"", line 244, in main
    app.build(opts.force_all, filenames)
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/application.py"", line 266, in build
    self.builder.build_update()
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/builders/__init__.py"", line 251, in build_update
    'out of date' % len(to_build))
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/builders/__init__.py"", line 265, in build
    self.doctreedir, self.app))
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/environment.py"", line 618, in update
    self._read_serial(docnames, app)
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/environment.py"", line 638, in _read_serial
    self.read_doc(docname, app)
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/environment.py"", line 791, in read_doc
    pub.publish()
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/core.py"", line 218, in publish
    self.apply_transforms()
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/core.py"", line 199, in apply_transforms
    self.document.transformer.apply_transforms()
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/transforms/__init__.py"", line 171, in apply_transforms
    transform.apply(**kwargs)
  File ""/home/www/www/venv/lib/python3.4/site-packages/sphinx/transforms.py"", line 332, in apply
    self.document.note_implicit_target(section_node)
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/nodes.py"", line 1383, in note_implicit_target
    self.set_name_id_map(target, id, msgnode, explicit=None)
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/nodes.py"", line 1330, in set_name_id_map
    self.set_duplicate_name_id(node, id, name, msgnode, explicit)
  File ""/home/www/www/venv/lib/python3.4/site-packages/docutils/nodes.py"", line 1367, in set_duplicate_name_id
    old_node = self.ids[old_id]
KeyError: 'philosophy'
```
"
1836,django,djangoproject.com,4,closed,613,0,https://api.github.com/repos/django/djangoproject.com/issues/613/comments,https://github.com/django/djangoproject.com/issues/613,"[{""default"": false, ""name"": ""fundraising"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/fundraising"", ""color"": ""eeaa77"", ""node_id"": ""MDU6TGFiZWwxNjg4MjIzMDk="", ""id"": 168822309}]",Non-even donation amounts generate a Javascript error,"Improve the following error so that the mistake is more clear to the donor:

""The page at www.djangoproject.com says:

{""amount"":[{""message"": ""Enter a whole number."", ""code"": ""invalid""}]}""

For example, it might instead read ""Use a whole number only. Characters like $ and ""."" are not allowed"" (if in fact we want them to not be allowed). 
"
1904,django,djangoproject.com,5,closed,545,1,https://api.github.com/repos/django/djangoproject.com/issues/545/comments,https://github.com/django/djangoproject.com/issues/545,[],"django.db.utils.OperationalError: (2006, 'MySQL server has gone away')","Hi,

I am using celery with django mostly for async task. It work perfect on python2.7. 
After update project to newest python 3.5, i got a problem with mysql connections.
All work fine, but in arbitrary period of time (5-10 hours normal work) celeryd fail down with Unrecoverable error.

Please help find the solution.
### Project configurations
- System: Ubuntu 12.04
- Python 3.5
  - mysqlclient as connector
- Django 1.8.4
- Celery 3.1.18
- Kombu 3.0.29

**Try to tweak mysql and django configuration:**
Mysql:

```
wait_timeout = 3600
```

Django:

```
CONN_MAX_AGE = 3000
```
### Traceback

```
[2015-11-10 17:45:17,776: ERROR/MainProcess] Unrecoverable error: OperationalError(2006, 'MySQL server has gone away')
Traceback (most recent call last):
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/backends/mysql/base.py"", line 124, in execute
    return self.cursor.execute(query, args)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 220, in execute
    self.errorhandler(self, exc, value)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/connections.py"", line 36, in defaulterrorhandler
    raise errorvalue
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 209, in execute
    r = self._query(query)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 371, in _query
    rowcount = self._do_query(q)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 335, in _do_query
    db.query(q)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/connections.py"", line 280, in query
    _mysql.connection.query(self, query)
_mysql_exceptions.OperationalError: (2006, 'MySQL server has gone away')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/worker/__init__.py"", line 206, in start
    self.blueprint.start(self)
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/bootsteps.py"", line 123, in start
    step.start(parent)
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/bootsteps.py"", line 374, in start
    return self.obj.start()
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/worker/consumer.py"", line 278, in start
    blueprint.start(self)
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/bootsteps.py"", line 123, in start
    step.start(parent)
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/worker/consumer.py"", line 821, in start
    c.loop(*c.loop_args())
  File ""/opt/helena/python3/lib/python3.5/site-packages/celery/worker/loops.py"", line 97, in synloop
    connection.drain_events(timeout=2.0)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/connection.py"", line 275, in drain_events
    return self.transport.drain_events(self.connection, **kwargs)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/__init__.py"", line 830, in drain_events
    item, channel = get(timeout=timeout)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/scheduling.py"", line 39, in get
    return self.fun(resource, **kwargs), resource
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/__init__.py"", line 850, in _drain_channel
    return channel.drain_events(timeout=timeout)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/__init__.py"", line 642, in drain_events
    return self._poll(self.cycle, timeout=timeout)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/__init__.py"", line 328, in _poll
    return cycle.get()
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/virtual/scheduling.py"", line 39, in get
    return self.fun(resource, **kwargs), resource
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/django/__init__.py"", line 49, in _get
    m = Queue.objects.fetch(queue)
  File ""/opt/helena/python3/lib/python3.5/site-packages/kombu/transport/django/managers.py"", line 33, in fetch
    queue = self.get(name=queue_name)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/manager.py"", line 127, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/query.py"", line 328, in get
    num = len(clone)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/query.py"", line 144, in __len__
    self._fetch_all()
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/query.py"", line 965, in _fetch_all
    self._result_cache = list(self.iterator())
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/query.py"", line 238, in iterator
    results = compiler.execute_sql()
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 840, in execute_sql
    cursor.execute(sql, params)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/utils.py"", line 97, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/utils/six.py"", line 658, in reraise
    raise value.with_traceback(tb)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/opt/helena/python3/lib/python3.5/site-packages/django/db/backends/mysql/base.py"", line 124, in execute
    return self.cursor.execute(query, args)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 220, in execute
    self.errorhandler(self, exc, value)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/connections.py"", line 36, in defaulterrorhandler
    raise errorvalue
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 209, in execute
    r = self._query(query)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 371, in _query
    rowcount = self._do_query(q)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/cursors.py"", line 335, in _do_query
    db.query(q)
  File ""/opt/helena/python3/lib/python3.5/site-packages/MySQLdb/connections.py"", line 280, in query
    _mysql.connection.query(self, query)
django.db.utils.OperationalError: (2006, 'MySQL server has gone away')
```
"
1913,django,djangoproject.com,5,closed,536,0,https://api.github.com/repos/django/djangoproject.com/issues/536/comments,https://github.com/django/djangoproject.com/issues/536,[],"If a template is missing and is included in another template, error is shown about the parent template","This behaviour changed in Django 1.8 I think, cannot be 100% sure, but it worked correctly before.
If I'm including a template and the file is missing I get a TemplateDoesNotExist error. But the error states that missing is the includer, not the actual included template.
"
1916,django,djangoproject.com,5,closed,533,1,https://api.github.com/repos/django/djangoproject.com/issues/533/comments,https://github.com/django/djangoproject.com/issues/533,[],Nicer landpoint for new tickets,"When arriving to [this](https://code.djangoproject.com/newticket) page (for example, following the link from django's README.md) while not logged (try opening it in a private browsing session), user gets yelled at with ""Error: Forbidden"" and a sentace that might be not easy to grasp for non-experienced developers (""TICKET_CREATE privileges are required to perform this operation on Ticket #None. You don't have the required permissions."" )

It says ""you're currently not logged"", it says ""forbidden"" but what it does not say is that loging in or signing up may help. Not very welcoming. Maybe we could do something (like redirecting the the login or sign up page (with a ?next=...) ?)
"
1919,django,djangoproject.com,5,closed,530,1,https://api.github.com/repos/django/djangoproject.com/issues/530/comments,https://github.com/django/djangoproject.com/issues/530,[],Trouble updating to libsass 0.8.3.,"After updating and trying to deploy, `collectstatic` fails:

```
:stderr: Post-processing 'css/output-ie.css' failed!

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/core/management/__init__.py"", line 330, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/core/management/base.py"", line 393, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/core/management/base.py"", line 444, in execute
    output = self.handle(*args, **options)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 168, in handle
    collected = self.collect()
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 120, in collect
    raise processed
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 245, in post_process
    content = pattern.sub(converter, content)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 184, in converter
    hashed_url = self.url(unquote(joined_result), force=True)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 131, in url
    hashed_name = self.stored_name(clean_name)
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 280, in stored_name
    cache_name = self.clean_name(self.hashed_name(name))
  File ""/home/www/www/venv/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 94, in hashed_name
    (clean_name, self))
ValueError: The file 'img/'+$name+'.png' could not be found with <django.contrib.staticfiles.storage.ManifestStaticFilesStorage object at 0x7fce99dd5358>.
```
"
1923,django,djangoproject.com,5,closed,526,2,https://api.github.com/repos/django/djangoproject.com/issues/526/comments,https://github.com/django/djangoproject.com/issues/526,[],Deploying the website on the local computer. The problem with Elasticsearch,"Hi, I tried to run locally djangoproject.com, but when you run the command `./manage.py update_docs` I get the error:

```
Updating en/dev...
HEAD is now at c14b6b5 Documented auth's login/logout function parameters.
Removing django/__pycache__/
Removing django/apps/__pycache__/
Removing django/conf/__pycache__/
Removing django/conf/urls/__pycache__/
Removing django/contrib/__pycache__/
Removing django/contrib/admin/__pycache__/
Removing django/contrib/admin/templatetags/__pycache__/
Removing django/contrib/admin/views/__pycache__/
Removing django/contrib/auth/__pycache__/
Removing django/contrib/contenttypes/__pycache__/
Removing django/contrib/flatpages/__pycache__/
Removing django/contrib/gis/__pycache__/
Removing django/contrib/gis/admin/__pycache__/
Removing django/contrib/gis/db/__pycache__/
Removing django/contrib/gis/db/models/__pycache__/
Removing django/contrib/gis/forms/__pycache__/
Removing django/contrib/gis/gdal/__pycache__/
Removing django/contrib/gis/gdal/prototypes/__pycache__/
Removing django/contrib/gis/geoip/__pycache__/
Removing django/contrib/gis/geoip2/__pycache__/
Removing django/contrib/gis/geometry/__pycache__/
Removing django/contrib/gis/geometry/backend/__pycache__/
Removing django/contrib/gis/geos/__pycache__/
Removing django/contrib/gis/geos/prototypes/__pycache__/
Removing django/contrib/gis/utils/__pycache__/
Removing django/contrib/messages/__pycache__/
Removing django/contrib/messages/storage/__pycache__/
Removing django/contrib/postgres/__pycache__/
Removing django/contrib/postgres/aggregates/__pycache__/
Removing django/contrib/postgres/fields/__pycache__/
Removing django/contrib/postgres/forms/__pycache__/
Removing django/contrib/redirects/__pycache__/
Removing django/contrib/sessions/__pycache__/
Removing django/contrib/sitemaps/__pycache__/
Removing django/contrib/sites/__pycache__/
Removing django/contrib/staticfiles/__pycache__/
Removing django/contrib/syndication/__pycache__/
Removing django/core/__pycache__/
Removing django/core/cache/__pycache__/
Removing django/core/cache/backends/__pycache__/
Removing django/core/checks/__pycache__/
Removing django/core/checks/compatibility/__pycache__/
Removing django/core/checks/security/__pycache__/
Removing django/core/files/__pycache__/
Removing django/core/handlers/__pycache__/
Removing django/core/mail/__pycache__/
Removing django/core/management/__pycache__/
Removing django/core/serializers/__pycache__/
Removing django/core/servers/__pycache__/
Removing django/db/__pycache__/
Removing django/db/backends/__pycache__/
Removing django/db/backends/base/__pycache__/
Removing django/db/migrations/__pycache__/
Removing django/db/migrations/operations/__pycache__/
Removing django/db/models/__pycache__/
Removing django/db/models/fields/__pycache__/
Removing django/db/models/sql/__pycache__/
Removing django/dispatch/__pycache__/
Removing django/forms/__pycache__/
Removing django/http/__pycache__/
Removing django/middleware/__pycache__/
Removing django/template/__pycache__/
Removing django/template/backends/__pycache__/
Removing django/template/loaders/__pycache__/
Removing django/test/__pycache__/
Removing django/utils/__pycache__/
Removing django/utils/translation/__pycache__/
Removing django/views/__pycache__/
Removing django/views/decorators/__pycache__/
Removing django/views/generic/__pycache__/
Removing docs/_ext/__pycache__/
Already up-to-date.
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/django/core/management/__init__.py"", line 330, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/django/core/management/base.py"", line 393, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/django/core/management/base.py"", line 444, in execute
    output = self.handle(*args, **options)
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/django/core/management/base.py"", line 660, in handle
    return self.handle_noargs(**options)
  File ""/home/user/projects/djangoproject.com/docs/management/commands/update_docs.py"", line 202, in handle_noargs
    DocumentDocType.index_object(doc)
  File ""/home/user/projects/djangoproject.com/docs/search.py"", line 95, in index_object
    return cls.from_django(obj).save()
  File ""/home/user/projects/djangoproject.com/env/lib/python3.4/site-packages/elasticsearch_dsl/document.py"", line 197, in save
    return meta['created']
KeyError: 'created'
```

Elasticsearch works, because localhost:9200 answers

```
{
  ""ok"" : true,
  ""status"" : 200,
  ""name"" : ""Schemer"",
  ""version"" : {
    ""number"" : ""0.90.7"",
    ""build_hash"" : ""36897d07dadcb70886db7f149e645ed3d44eb5f2"",
    ""build_timestamp"" : ""2013-11-13T12:06:54Z"",
    ""build_snapshot"" : false,
    ""lucene_version"" : ""4.5.1""
  },
  ""tagline"" : ""You Know, for Search""
}
```

Python 3.4, Ububntu 14.04
"
1925,django,djangoproject.com,5,closed,524,4,https://api.github.com/repos/django/djangoproject.com/issues/524/comments,https://github.com/django/djangoproject.com/pull/524,[],Added missing mocks in fundraising tests.,"Django 1.9 gives ""ValueError: Failed to insert expression""
without these fixes.
"
1929,django,djangoproject.com,5,closed,520,0,https://api.github.com/repos/django/djangoproject.com/issues/520/comments,https://github.com/django/djangoproject.com/issues/520,[],Wrong links about bug submission at bottom?,"Hi,

The page-bottom link for ""Submit a bug"" currently goes to https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/#reporting-security-issues while the link to ""Report a security issue"" goes to https://docs.djangoproject.com/en/dev/internals/security/ -- is that intended?
"
1938,django,djangoproject.com,5,closed,511,7,https://api.github.com/repos/django/djangoproject.com/issues/511/comments,https://github.com/django/djangoproject.com/issues/511,[],Approving a feed from the admin changelist page crashes,"The error is:

```
SubscriptionError: ('Error during request to hub https://superfeedr.com/hubbub for topic
http://timonweb.com/taxonomy/term/60/all/feed: Make sure your callback returns a 2XX
status code. You returned 404 to https://www.djangoproject.com/subscriber/846/?
hub.mode=subscribe&hub.topic=http%3A%2%2Ftimonweb.com%2Ftaxonomy%2Fterm%2F60%2Fall%2Ffeed&
hub.challenge=xedbjdr6bt9&hub.lease_seconds=315360000', <Subscription: Subscription object>,
<Response [422]>)
```

I think the issue is that because `ModelAdmin.changeform_view()` uses `@transaction.atomic`, the `Subscription` object that is created during the request isn't accessible at the point later in the request when the query to superfeedr is issued (which then pings back to `djangoproject.com/subscriber/<new_id>/`).
"
1947,django,djangoproject.com,5,closed,501,0,https://api.github.com/repos/django/djangoproject.com/issues/501/comments,https://github.com/django/djangoproject.com/issues/501,[],Vague djangoproject.com login error message,"When logging on to the django website (https://www.djangoproject.com/accounts/login/) with incorrect details an incomplete error message is displayed: ""Please correct the errors below:"" Though no further info is provided.

The following behaviour was observed:
No indication is given when the username or password is incorrect. Incorrect or non-existing usernames stay in the username field.
Only when the password field is left blank a requirement message is displayed.

The screenshot is from when incorrect details were provided.

![djangoproject com_login_error_2015-07-13](https://cloud.githubusercontent.com/assets/7848383/8655927/49b43922-298c-11e5-850b-055a442c1273.png)
"
1949,django,djangoproject.com,5,closed,499,2,https://api.github.com/repos/django/djangoproject.com/issues/499/comments,https://github.com/django/djangoproject.com/pull/499,[],Fix issue with migrations.,"There is a bug in Django with migrations that set multiple fields from null=True to null=False. This change creates a separate migration to set the null values to empty strings first.

Refs #498 
"
1950,django,djangoproject.com,5,closed,498,7,https://api.github.com/repos/django/djangoproject.com/issues/498/comments,https://github.com/django/djangoproject.com/issues/498,[],Can't apply fundraising migration 34 due to pending trigger events,"```
Running migrations:
  Rendering model states... DONE
  Applying fundraising.0016_campaign... OK
  Applying fundraising.0017_auto_20150209_1405... OK
  Applying fundraising.0018_auto_20150209_1424... OK
  Applying fundraising.0019_data_migration_for_campaign... OK
  Applying fundraising.0020_auto_20150209_1633... OK
  Applying fundraising.0021_auto_20150209_1704... OK
  Applying fundraising.0022_auto_20150211_0341... OK
  Applying fundraising.0023_donation_stripe_subscription_id... OK
  Applying fundraising.0024_djangohero_hero_type... OK
  Applying fundraising.0025_auto_20150419_0655... OK
  Applying fundraising.0026_auto_20150419_0727... OK
  Applying fundraising.0027_auto_20150419_0757... OK
  Applying fundraising.0028_auto_20150419_0758... OK
  Applying fundraising.0029_donation_interval... OK
  Applying fundraising.0030_auto_20150604_0608... OK
  Applying fundraising.0031_auto_20150604_0813... OK
  Applying fundraising.0032_auto_20150604_0813... OK
  Applying fundraising.0033_auto_20150611_0750... OK
  Applying fundraising.0034_auto_20150702_0241...Traceback (most recent call last):
  File ""/home/tim/.virtualenvs/djangoproject-1.8/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
psycopg2.OperationalError: cannot ALTER TABLE ""fundraising_donation"" because it has pending trigger events
```

cc @danielroseman

By the way, I finish the Django 1.8 update and merged it to this branch, but didn't create the merge migration yet in case we need to split up migration 34.
"
1975,django,djangoproject.com,6,closed,472,3,https://api.github.com/repos/django/djangoproject.com/issues/472/comments,https://github.com/django/djangoproject.com/issues/472,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/bug"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWwxNTk5MjM4MjU="", ""id"": 159923825}]",Sitemap URLs include scheme/domain twice,"Hi,

   Do you see this sitemap on production of djangoproject.com. we can see a lot of error on [https://www.djangoproject.com/sitemap.xml](https://www.djangoproject.com/sitemap.xml) , I think its some configure error?  We can see domain appear two times.

```
<url>
<loc>
https://www.djangoproject.comhttps://www.djangoproject.com/weblog/2015/may/22/djangocon-us-registration-open/
</loc>
<changefreq>never</changefreq>
<priority>0.4</priority>
    </url>
```
"
1988,django,djangoproject.com,6,closed,459,0,https://api.github.com/repos/django/djangoproject.com/issues/459/comments,https://github.com/django/djangoproject.com/issues/459,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/bug"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWwxNTk5MjM4MjU="", ""id"": 159923825}]",KeyError at /contact/foundation/,"If the contact form is submitted with an empty ""name"" field, but with the rest of the other fields filled:

```
Stacktrace (most recent call last):

  File ""django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, *args, **kwargs)
  File ""django/views/generic/base.py"", line 87, in dispatch
    return handler(request, *args, **kwargs)
  File ""django/views/generic/edit.py"", line 172, in post
    if form.is_valid():
  File ""django/forms/forms.py"", line 162, in is_valid
    return self.is_bound and not bool(self.errors)
  File ""django/forms/forms.py"", line 154, in errors
    self.full_clean()
  File ""django/forms/forms.py"", line 353, in full_clean
    self._clean_fields()
  File ""django/forms/forms.py"", line 371, in _clean_fields
    value = getattr(self, 'clean_%s' % name)()
  File ""contact/forms.py"", line 52, in clean_body
    'comment_author': self.cleaned_data['name'],
```
"
1990,django,djangoproject.com,6,closed,457,0,https://api.github.com/repos/django/djangoproject.com/issues/457/comments,https://github.com/django/djangoproject.com/issues/457,"[{""default"": false, ""name"": ""search"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/search"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWwxNjIzOTk3MzM="", ""id"": 162399733}]","search suggestions crashing with ""JSON is not serializable""","URL: https://docs.djangoproject.com/en/1.8/search/suggestions/?q=test
Exception: `TypeError: ['Creating forms from models'] is not JSON serializable`
Started happening 4 days ago.

```
Stacktrace (most recent call last):

  File ""django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""django/utils/decorators.py"", line 105, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""docs/views.py"", line 259, in search_suggestions
    return JsonResponse(suggestions, safe=False)
  File ""django/http/response.py"", line 497, in __init__
    data = json.dumps(data, cls=encoder)
  File ""json/__init__.py"", line 237, in dumps
    **kw).encode(obj)
  File ""json/encoder.py"", line 192, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File ""json/encoder.py"", line 250, in iterencode
    return _iterencode(o, 0)
  File ""django/core/serializers/json.py"", line 109, in default
    return super(DjangoJSONEncoder, self).default(o)
  File ""json/encoder.py"", line 173, in default
    raise TypeError(repr(o) + "" is not JSON serializable"")
```
"
1992,django,djangoproject.com,6,closed,455,1,https://api.github.com/repos/django/djangoproject.com/issues/455/comments,https://github.com/django/djangoproject.com/issues/455,[],"""Transifex"" points to a deprecated link","A very minor issue, on page https://code.djangoproject.com/newticket, the ""Transifex"" link points to https://www.transifex.net/projects/p/django/, which shows SSL certificate expired error. I supposed ""https://www.transifex.net"" was deprecated and should be replaced by ""https://www.transifex.com""
"
1999,django,djangoproject.com,6,closed,448,2,https://api.github.com/repos/django/djangoproject.com/issues/448/comments,https://github.com/django/djangoproject.com/issues/448,[],Missing fontfile?,"our (webserver) error logs show many logs ala: server: code.djangoproject.com, request: ""GET /chrome/site/fonts/fira-mono/FiraMono-Regular.ttf HTTP/1.1"", host: ""code.djangoproject.com"", referrer: ""https://code.djangoproject.com/chrome/site/css/trachacks.css"".

Is that file at a different location or just missing?
"
2001,django,djangoproject.com,6,closed,446,3,https://api.github.com/repos/django/djangoproject.com/issues/446/comments,https://github.com/django/djangoproject.com/issues/446,[],Error on requesting docs version with invalid language,"Requested URL: https://docs.djangoproject.com/wp-admin/css/colors-classic.css/

```
AttributeError: 'NoneType' object has no attribute '_info'
(1 additional frame(s) were not displayed)
...
  File ""docs/views.py"", line 56, in document
    activate(lang)
```
"
2011,django,djangoproject.com,6,closed,434,0,https://api.github.com/repos/django/djangoproject.com/issues/434/comments,https://github.com/django/djangoproject.com/issues/434,[],TypeError in djangoproject.com/~username/,"Bug from the Python 3 migration:

```
TypeError: Unicode-objects must be encoded before hashing
  File ""accounts/views.py"", line 22, in user_profile
    'email_hash': hashlib.md5(u.email).hexdigest(),
```
"
2027,django,djangoproject.com,6,closed,418,3,https://api.github.com/repos/django/djangoproject.com/issues/418/comments,https://github.com/django/djangoproject.com/issues/418,[],New feed approval process is broken,"If you try to approve a new feed (either by using the admin action on the feed list, or by changing the approval status on a feed), you get a ""500 page unavailable error"".

I saw the problem with the timonweb.com/categories/python-and-django feed.
"
2038,django,djangoproject.com,6,closed,406,2,https://api.github.com/repos/django/djangoproject.com/issues/406/comments,https://github.com/django/djangoproject.com/issues/406,"[{""default"": false, ""name"": ""accessibility"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/accessibility"", ""color"": ""5319e7"", ""node_id"": ""MDU6TGFiZWwxNTgxMjgyMjM="", ""id"": 158128223}]","Add ""you're in the wrong place"" text to DSF contact page","About 75% of people who use the Django contact form are using it to:
- Report a bug in Django
- Report a problem with the Django website
- Ask for help debugging their site

and so on. There's clearly some confusion about what the contact page is for; it would be great to be able to push some of this traffic towards more appropriate destinations.

Putting some text at the top of the Contact the Foundation page might help:

""This contact form is for the Django Software Foundation - the legal and fundraising arm of the Django project. If you want to report a bug in Django, use the ticket tracker. If you want to report a problem with this website, use the github repo. If you've got questions about how to use Django, use the django-users mailing list""
"
2041,django,djangoproject.com,6,closed,401,1,https://api.github.com/repos/django/djangoproject.com/issues/401/comments,https://github.com/django/djangoproject.com/issues/401,[],TypeError: Sorting watchlist not working,"- Sign in
- Go to URL https://code.djangoproject.com/watchlist
- Click the headers multiple times to sort by the column ascending and descending
- Notice the sort order does not change

There is an error in the Firebug console:

```
TypeError: c[f] is undefined
https://code.djangoproject.com/chrome/watchlist/js/dynamictables.js
Line 24
```
"
2044,django,djangoproject.com,6,closed,398,1,https://api.github.com/repos/django/djangoproject.com/issues/398/comments,https://github.com/django/djangoproject.com/issues/398,[],Page Not Found - https://www.djangoproject.com/about/,"Hi, I'm new here so let me know if this is the wrong place to issue a hyperlink bug.

When I access this [page](https://www.djangoproject.com/weblog/2015/jan/27/django-fellowship-fundraising-goal-achieved/), there's a link all the way on the bottom that says ""There are always alternative ways to donate or partner with the Django Software Foundation."".  The 'Django Software Foundation' link points to a broken link [here](https://www.djangoproject.com/about/)
"
2068,django,djangoproject.com,7,closed,372,7,https://api.github.com/repos/django/djangoproject.com/issues/372/comments,https://github.com/django/djangoproject.com/pull/372,[],Migrate to Python 3,"- [x] Find a replacement for unipath: pathlib
- [x] Find a replacement for akismet: pykismet3
- [x] Upgrade django-haystack
- [x] Fix the broken stripe integration, `StripeError has no attribute 'message'`
- [x] Fix `./manage.py update_docs`
- [x] Port the dashboard
- [x] Wait for merge of #303 
- [x] django-pygments does not support python3

Closes #343 
"
2079,django,djangoproject.com,7,closed,360,3,https://api.github.com/repos/django/djangoproject.com/issues/360/comments,https://github.com/django/djangoproject.com/pull/360,[],Improve error handling in payment form and add receipt email. Fix #342,"- raise a new DonationError for:
  - invalid card
  - some kind of error querying the Stripe API (e.g. reuse of stripe token)
  - broken network connection to Stripe API
- let errors bubble up:
  - auth tokens are wrong (we've changed them?)
  - other stripe errors and general exceptions
- added tests for new behavior
- improved frontend help for payment form
- stop passing fixed_amount to template since it's unused
- Added optional email field to send Stripe receipt to.
- Added tabindex to donation form fields.
- Improved DjangoHero and Donation admin UI.
- Change color of submit button and other call-to-action things on focus.
"
2122,django,djangoproject.com,7,closed,315,2,https://api.github.com/repos/django/djangoproject.com/issues/315/comments,https://github.com/django/djangoproject.com/issues/315,[],Clicking on the documentation version switcher makes it not work on hover anymore.,"To reproduce, go to https://docs.djangoproject.com/en/1.7/ (or any doc page), click on ""documentation version: 1.7"".

This could be a 'feature', but to me it feels like a bug.
"
2126,django,djangoproject.com,7,closed,311,10,https://api.github.com/repos/django/djangoproject.com/issues/311/comments,https://github.com/django/djangoproject.com/issues/311,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/bug"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWwxNTk5MjM4MjU="", ""id"": 159923825}]",Unsubscribing from feed in admin gives a 500 error,"I was trying to deactivate a feed on the site by switching its status to ""denied"" in the admin.

Trying to do so leads to an error page (500).

```
Here's the traceback and error messages associated (provided by Tim):
...
  File ""django/contrib/admin/options.py"", line 1045, in save_model
    obj.save()
  File ""aggregator/models.py"", line 54, in save
    self.unsubscribe()
  File ""aggregator/models.py"", line 63, in unsubscribe
    Subscription.objects.get(topic=self.feed_url).unsubscribe()
  File ""django_push/subscriber/models.py"", line 86, in unsubscribe
    return self.send_request(mode='unsubscribe')
  File ""django_push/subscriber/models.py"", line 131, in send_request
    response,


SubscriptionError: (u'Error during request to hub https://superfeedr.com/hubbub for topic http://feeds.delicious.com/v2/rss/tag/django?count=15: Unauthorized', <Subscription: http://feeds.delicious.com/v2/rss/tag/django?count=15: https://superfeedr.com/hubbub>, <Response [401]>)
```
"
2203,django,djangoproject.com,8,closed,229,3,https://api.github.com/repos/django/djangoproject.com/issues/229/comments,https://github.com/django/djangoproject.com/issues/229,"[{""default"": false, ""name"": ""docs"", ""url"": ""https://api.github.com/repos/django/djangoproject.com/labels/docs"", ""color"": ""bfe5bf"", ""node_id"": ""MDU6TGFiZWwxNTk5MDU3NTc="", ""id"": 159905757}]",The 404 and 500 pages on docs are missing their header and footer,"This is caused by this rabbit-hole chain of events:
- `404.html` (and `500.html`) inherits from `base.html`
- `base.html` includes `footer.html` (and `header.html`)
- `footer.html` contains `{% url 'homepage' %}` which doesn't work on docs.djangoproject.com
- Somehow (that's probably a bug in Django), that makes the `{% include %}` render to an empty string 
"
2209,django,djangoproject.com,8,closed,223,2,https://api.github.com/repos/django/djangoproject.com/issues/223/comments,https://github.com/django/djangoproject.com/issues/223,[],ValueError on /search/ with bad params,"This has happened before the redesign, just ticketing now.

Request: `GET /search/q=%27&release=%271`

```
Stacktrace (most recent call last):

  File ""django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""haystack/views.py"", line 150, in search_view
    return view_class(*args, **kwargs)(request)
  File ""haystack/views.py"", line 46, in __call__
    self.form = self.build_form()
  File ""docs/views.py"", line 130, in build_form
    form_kwargs['default_release'] = get_object_or_404(DocumentRelease, pk=pk)
  File ""django/shortcuts.py"", line 113, in get_object_or_404
    return queryset.get(*args, **kwargs)
  File ""django/db/models/query.py"", line 345, in get
    clone = self.filter(*args, **kwargs)
  File ""django/db/models/query.py"", line 691, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File ""django/db/models/query.py"", line 709, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File ""django/db/models/sql/query.py"", line 1287, in add_q
    clause, require_inner = self._add_q(where_part, self.used_aliases)
  File ""django/db/models/sql/query.py"", line 1314, in _add_q
    current_negated=current_negated, connector=connector)
  File ""django/db/models/sql/query.py"", line 1186, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File ""django/db/models/sql/query.py"", line 1094, in build_lookup
    return final_lookup(lhs, rhs)
  File ""django/db/models/lookups.py"", line 82, in __init__
    self.rhs = self.get_prep_lookup()
  File ""django/db/models/lookups.py"", line 85, in get_prep_lookup
    return self.lhs.output_field.get_prep_lookup(self.lookup_name, self.rhs)
  File ""django/db/models/fields/__init__.py"", line 646, in get_prep_lookup
    return self.get_prep_value(value)
  File ""django/db/models/fields/__init__.py"", line 915, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: ""'1""
```
"
2227,django,djangoproject.com,8,closed,202,0,https://api.github.com/repos/django/djangoproject.com/issues/202/comments,https://github.com/django/djangoproject.com/issues/202,[],Document DJANGOPROJECT_DEBUG,"The README seems to miss it right now
"
2287,django,djangoproject.com,9,closed,137,4,https://api.github.com/repos/django/djangoproject.com/issues/137/comments,https://github.com/django/djangoproject.com/pull/137,[],Fixed #23886 -- Displaying 410 page instead of 500 on outdated docs sites,"I fixed an error that caused [exceptions on outdated docs pages](https://code.djangoproject.com/ticket/23886). 

I also tested this on the new redesign branch, it works there if you're wondering. Should I write some tests for that bug fix? This view doesn't have any tests yet as far as I can see.

> (Happy [24pullrequests.com](http://24pullrequests.com/)! :gift:)
"
2335,django,djangoproject.com,9,closed,85,0,https://api.github.com/repos/django/djangoproject.com/issues/85/comments,https://github.com/django/djangoproject.com/pull/85,[],Refs #23334 -- changed some /newticket links,"https://code.djangoproject.com/ticket/23334
/newticket currently has an unfriendly ""forbidden"" error if you are
logged out. Send them to wiki home page instead.
"
2375,django,djangoproject.com,10,closed,43,8,https://api.github.com/repos/django/djangoproject.com/issues/43/comments,https://github.com/django/djangoproject.com/pull/43,[],disallow search engine indexing of trunk documentation,"The end result of this data being indexed confuses newbies and is the source of an increasing number of invalid tickets in trac. More specifically:
1. User searches to find info on a specific feature.
2. Said feature is backwards incompatible with previous versions of Django.
3. User does not know better, assumes Django has a bug.
4. Invalid bug is filed in trac.

Hopefully, removing the dev documentation pages from search engines will help solve this issue, since those who want to read the dev docs can just click through to them by using the version navigation at the bottom of the docs pages.
"
2381,django,djangoproject.com,10,closed,37,1,https://api.github.com/repos/django/djangoproject.com/issues/37/comments,https://github.com/django/djangoproject.com/issues/37,[],Sample login template doesn't work as it is,"This should be a quick fix and if no one does it before I can I will put in a pull request but at this link: https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.login where it shows the example login template there is a tiny error.

Here is what is presently there: 

```
{% extends ""base.html"" %}

{% block content %}

{% if form.errors %}
<p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method=""post"" action=""{% url 'django.contrib.auth.views.login' %}"">
{% csrf_token %}
<table>
<tr>
    <td>{{ form.username.label_tag }}</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>{{ form.password.label_tag }}</td>
    <td>{{ form.password }}</td>
</tr>
</table>

<input type=""submit"" value=""login"" />
<input type=""hidden"" name=""next"" value=""{{ next }}"" />
</form>

{% endblock %}
```

The line that is breaks at is `<form method=""post"" action=""{% url 'django.contrib.auth.views.login' %}"">` and it is because there shouldn't be any single quotes around `django.contrib.auth.views.login`.

Here is the correct version:

```
{% extends ""base.html"" %}

{% block content %}

{% if form.errors %}
<p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method=""post"" action=""{% url django.contrib.auth.views.login %}"">
{% csrf_token %}
<table>
<tr>
    <td>{{ form.username.label_tag }}</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>{{ form.password.label_tag }}</td>
    <td>{{ form.password }}</td>
</tr>
</table>

<input type=""submit"" value=""login"" />
<input type=""hidden"" name=""next"" value=""{{ next }}"" />
</form>

{% endblock %}
```
"
2390,django,djangoproject.com,10,closed,28,4,https://api.github.com/repos/django/djangoproject.com/issues/28/comments,https://github.com/django/djangoproject.com/issues/28,[],Procedure in README.txt for setting up djangoproject locally doesn't work,"The current procedures described in README.txt for setting up the djangoproject locally don't work. This appears to be because they assume that you already have a trac database setup properly with the correct schema.  When the ./manage.py migrate step is executed, it fails due to missing relations from the trac model. In particular, the migration fails with the following error:

Running migrations for trac:
- Migrating forwards to 0001_initial.
  > trac:0001_initial
  ERROR:  relation ""attachment"" does not exist
  STATEMENT:  CREATE VIEW ""attachment_django_view"" AS
              SELECT ""type"" || '.' || ""id"" || '.' || ""filename"" AS ""django_id"", *
              FROM attachment;

Perhaps you could provide a truncated database dump from the live trac instance so that this can be used to create a dummy trac database.  
"
2414,django,djangoproject.com,10,closed,4,0,https://api.github.com/repos/django/djangoproject.com/issues/4/comments,https://github.com/django/djangoproject.com/pull/4,[],#9382,"Updating sidebar of the registration page to include information about what constitutes a valid username. Seems less invasive than editing errors for django-registration.
"
2468,stephenmcd,drum,2,closed,41,1,https://api.github.com/repos/stephenmcd/drum/issues/41/comments,https://github.com/stephenmcd/drum/issues/41,[],ImportError: cannot import name 'patterns' with Django 1.10,"Clean install of drum and mezzanine gives the following error, as Django 1.10 has removed patterns:

`(testDrum) erics-mbp:website eric$ python manage.py createdb
/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/mezzanine/utils/conf.py:56: UserWarning: You haven't defined the ALLOWED_HOSTS settings, which Django requires. Will fall back to the domains configured as sites.
  warn(""You haven't defined the ALLOWED_HOSTS settings, which ""
/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/mezzanine/accounts/defaults.py:23: UserWarning: Django's AUTH_PROFILE_MODULE setting is deprecated, use Mezzanine's ACCOUNTS_PROFILE_MODEL instead.
  warn(""Django's AUTH_PROFILE_MODULE setting is deprecated, use ""
Traceback (most recent call last):
  File ""manage.py"", line 14, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/base.py"", line 305, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/base.py"", line 353, in execute
    self.check()
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/base.py"", line 385, in check
    include_deployment_checks=include_deployment_checks,
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/management/base.py"", line 372, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/checks/registry.py"", line 81, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/checks/urls.py"", line 14, in check_url_config
    return check_resolver(resolver)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/core/checks/urls.py"", line 24, in check_resolver
    for pattern in resolver.url_patterns:
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/urls/resolvers.py"", line 310, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/eric/virtualenv/testDrum/lib/python3.4/site-packages/django/urls/resolvers.py"", line 303, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/Users/eric/virtualenv/testDrum/website/website/urls.py"", line 2, in <module>
    from django.conf.urls import patterns, include, url
ImportError: cannot import name 'patterns'
`
"
2473,stephenmcd,drum,2,closed,36,3,https://api.github.com/repos/stephenmcd/drum/issues/36/comments,https://github.com/stephenmcd/drum/issues/36,[],"Following setup instructions, demo site not working.","Well, I do not know if it makes sense to paste all the error messages, however it results in a

```
A server error occurred.  Please contact the administrator.
```

when visiting 127.0.0.1/admin or 127.0.0.1

the console output has this last line:

```
RuntimeError: Model class mezzanine.pages.models.Page doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.
```

Also there are some warnings before that:

```
System check identified some issues:

WARNINGS:
?: (mezzanine.core.W01) Please update your settings to use the TEMPLATES setting rather than the deprecated individual TEMPLATE_ settings. The latter are unsupported and correct behaviour is not guaranteed. Here's a suggestion based on on your existing configuration:

TEMPLATES = [{u'APP_DIRS': True,
              u'BACKEND': u'django.template.backends.django.DjangoTemplates',
              u'DIRS': (u'/home/xxx/tmp/test/mezzanine-drum/drumtest/templates',),
              u'OPTIONS': {u'builtins': [u'mezzanine.template.loader_tags'],
                           u'context_processors': (u'django.contrib.auth.context_processors.auth',
                                                   u'django.contrib.messages.context_processors.messages',
                                                   u'django.core.context_processors.debug',
                                                   u'django.core.context_processors.i18n',
                                                   u'django.core.context_processors.static',
                                                   u'django.core.context_processors.media',
                                                   u'django.core.context_processors.request',
                                                   u'django.core.context_processors.tz',
                                                   u'mezzanine.conf.context_processors.settings',
                                                   u'mezzanine.pages.context_processors.page')}}]

?: (mezzanine.core.W02) TEMPLATE_DEBUG and DEBUG settings have different values, which may not be what you want. Mezzanine used to fix this for you, but doesn't any more. Update your settings.py to use the TEMPLATES setting to have template debugging controlled by the DEBUG setting.

System check identified 2 issues (0 silenced).

```

Is there a quick fix for this? I just wanted to take a look at mezzanine...
"
2476,stephenmcd,drum,2,closed,32,1,https://api.github.com/repos/stephenmcd/drum/issues/32/comments,https://github.com/stephenmcd/drum/issues/32,[],do not work with django 1.9.*,"Hi, 

drum work on django version <= 1.8.12
`Performing system checks...

/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/template/utils.py:37: RemovedInDjango110Warning: You haven't defined a TEMPLATES setting. You must do so before upgrading to Django 1.10. Otherwise Django will be unable to load templates.
  ""unable to load templates."", RemovedInDjango110Warning)

System check identified some issues:

WARNINGS:
?: (mezzanine.core.W01) Please update your settings to use the TEMPLATES setting rather than the deprecated individual TEMPLATE_ settings. The latter are unsupported and correct behaviour is not guaranteed. Here's a suggestion based on on your existing configuration:

TEMPLATES = [{u'APP_DIRS': True,
              u'BACKEND': u'django.template.backends.django.DjangoTemplates',
              u'DIRS': (u'/home/keiser1080/dev/drumbase/templates',),
              u'OPTIONS': {u'builtins': [u'mezzanine.template.loader_tags'],
                           u'context_processors': (u'django.contrib.auth.context_processors.auth',
                                                   u'django.contrib.messages.context_processors.messages',
                                                   u'django.core.context_processors.debug',
                                                   u'django.core.context_processors.i18n',
                                                   u'django.core.context_processors.static',
                                                   u'django.core.context_processors.media',
                                                   u'django.core.context_processors.request',
                                                   u'django.core.context_processors.tz',
                                                   u'mezzanine.conf.context_processors.settings',
                                                   u'mezzanine.pages.context_processors.page')}}]

?: (mezzanine.core.W02) TEMPLATE_DEBUG and DEBUG settings have different values, which may not be what you want. Mezzanine used to fix this for you, but doesn't any more. Update your settings.py to use the TEMPLATES setting to have template debugging controlled by the DEBUG setting.

System check identified 2 issues (0 silenced).
April 17, 2016 - 18:47:16
Django version 1.9.5, using settings 'drumbase.settings'
Starting development server at http://0.0.0.0:8000/
Quit the server with CONTROL-C.
Traceback (most recent call last):
  File ""/home/keiser1080/pypy-5.0.1-linux-armhf-raspbian/lib-python/2.7/wsgiref/handlers.py"", line 85, in run
    self.result = application(self.environ, self.start_response)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/contrib/staticfiles/handlers.py"", line 63, in **call**
    return self.application(environ, start_response)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/contrib/staticfiles/handlers.py"", line 63, in **call**
    return self.application(environ, start_response)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/core/handlers/wsgi.py"", line 158, in **call**
    self.load_middleware()
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/core/handlers/base.py"", line 51, in load_middleware
    mw_class = import_string(middleware_path)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/utils/module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""/home/keiser1080/pypy-5.0.1-linux-armhf-raspbian/lib-python/2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/mezzanine/pages/middleware.py"", line 8, in <module>
    from mezzanine.pages import context_processors, page_processors
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/mezzanine/pages/context_processors.py"", line 2, in <module>
    from mezzanine.pages.models import Page
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/mezzanine/pages/models.py"", line 35, in <module>
    class Page(BasePage):
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/mezzanine/core/models.py"", line 390, in **new**
    return super(OrderableBase, cls).**new**(cls, name, bases, attrs)
  File ""/home/keiser1080/.virtualenvs/pypy-env/site-packages/django/db/models/base.py"", line 102, in **new**
    ""INSTALLED_APPS."" % (module, name)
RuntimeError: Model class mezzanine.pages.models.Page doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.
`
"
2505,stephenmcd,drum,2,closed,1,7,https://api.github.com/repos/stephenmcd/drum/issues/1/comments,https://github.com/stephenmcd/drum/issues/1,[],Unknown command: 'createdb',"I am following the installation manual from github,
After running  ./manage.py createdb --noinput  I face the following error,

Unknown command: 'createdb'  Type 'manage.py help' for usage.

when I run directly, python manage.py syncdb
I get, raise ImproperlyConfigured(""The SECRET_KEY setting must not be empty."")
django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.

any hint? thanks,
"
2513,gothinkster,django-realworld-example-app,2,closed,4,2,https://api.github.com/repos/gothinkster/django-realworld-example-app/issues/4/comments,https://github.com/gothinkster/django-realworld-example-app/pull/4,[],Update Django and django-cors-headers version,"Update Django version to 1.10.5 and django-cors-headers to 1.3.1 to get rid of the exception 

`mw_instance = middleware(handler)
TypeError: object() takes no parameters
`
on running 
`python manage.py runserver`

Used suggestion from issue   #2 "
2514,gothinkster,django-realworld-example-app,2,closed,2,2,https://api.github.com/repos/gothinkster/django-realworld-example-app/issues/2/comments,https://github.com/gothinkster/django-realworld-example-app/issues/2,[],Django Cors,"Looks like a great project.

I tried installing in both python2.7 and python3.5 and got the same error.
When running 
```
python manage.py runserver
```
I got
```
mw_instance = middleware(handler)
TypeError: object() takes no parameters
```
So by upgrading to django=1.10.5 and adding django-cors-headers==1.3.1.

I was able to get the project to build.

Hopefully this helps someone
"
2530,nitely,Spirit,2,closed,255,3,https://api.github.com/repos/nitely/Spirit/issues/255/comments,https://github.com/nitely/Spirit/issues/255,[],Downgrade Mistune or Show NbConvert==5.3.1 in  requirements.txt,"I received the following errors when trying to run pip install -r requirements

`django-spirit 0.7.0 has requirement mistune==0.7.4, but you'll have mistune 0.8.4 which is incompatible.`

`nbconvert 5.4.0 has requirement mistune>=0.8.1, but you'll have mistune 0.7.4 which is incompatible.`

See: `Upgrade mistune dependency PR #705`
https://nbconvert.readthedocs.io/en/latest/changelog.html#testing-docs-and-builds"
2556,nitely,Spirit,2,closed,225,2,https://api.github.com/repos/nitely/Spirit/issues/225/comments,https://github.com/nitely/Spirit/issues/225,[],"relation ""djconfig_config"" does not exist","ProgrammingError at /
relation ""djconfig_config"" does not exist
LINE 1: ...fig_config"".""key"", ""djconfig_config"".""value"" FROM ""djconfig_...
                                                             ^
Request Method:	GET
Request URL:	http://xxxx.io/
Django Version:	1.11.8
Exception Type:	ProgrammingError
Exception Value:	
relation ""djconfig_config"" does not exist
LINE 1: ...fig_config"".""key"", ""djconfig_config"".""value"" FROM ""djconfig_...
                                                             ^
Exception Location:	/home/particle/www/myenv/lib/python3.5/site-packages/django/db/backends/utils.py in execute, line 64
Python Executable:	/home/particle/www/myenv/bin/python3
Python Version:	3.5.2
Python Path:	
['/home/particle/jblog',
 '/home/particle/www/myenv/bin',
 '/home/particle/www/myenv/lib/python35.zip',
 '/home/particle/www/myenv/lib/python3.5',
 '/home/particle/www/myenv/lib/python3.5/plat-x86_64-linux-gnu',
 '/home/particle/www/myenv/lib/python3.5/lib-dynload',
 '/usr/lib/python3.5',
 '/usr/lib/python3.5/plat-x86_64-linux-gnu',
 '/home/particle/www/myenv/lib/python3.5/site-packages']
Server time:	Sat, 23 Dec 2017 11:15:02 +0000

I've tried setup different databases. But the problem remains. How can I fix it? Thank you."
2574,nitely,Spirit,2,closed,202,26,https://api.github.com/repos/nitely/Spirit/issues/202/comments,https://github.com/nitely/Spirit/issues/202,[],spirit_topic_poll migration error and python-magic error (Windows),"I was following your instruction about ""integration with mezzanine"".
I tried ""python manage.py spiritinstall"". But below problem happened
I am trying to find a solution by googling but not right answers. 
Would you help me? ^^ 

```
django ver=1.10
**Run localhost:8000** 

Request Method: | GET
-- | --
1.10
ImportError
No module named 'djconfig.context_processors'
c:\Users\Administrator\AppData\Local\Programs\Python\Python35-32\lib\importlib\__init__.py in import_module, line 126
C:\xampp\apache\bin\httpd.exe
3.5.2
['C:\\xampp\\htdocs\\project_test_mezz',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_clever_selects-0.7.1-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_smart_selects-1.3.4-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\mezzaninetheme_moderna-1.0-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\geopy-0.95.1-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\mod_wsgi-4.5.17-py3.5-win32.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_spirit-0.5.0.dev0-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_djconfig-0.5.3-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_infinite_scroll_pagination-0.2.0-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\pillow-4.2.1-py3.5-win32.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\mistune-0.7.4-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\whoosh-2.7.4-py3.5.egg',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages\\django_haystack-2.6.1-py3.5.egg',  'C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\python35.zip',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\DLLs',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib',  'C:\\xampp\\apache\\bin',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32',  'c:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python35-32\\lib\\site-packages']

```
"
2583,nitely,Spirit,2,closed,192,28,https://api.github.com/repos/nitely/Spirit/issues/192/comments,https://github.com/nitely/Spirit/issues/192,[],Spirit integration into mezzanine- help!!,"
Hello Nitely! To start your package is AMAZING. I fall in love with it wright after i tested the example on the repo.
My problem is that It has been about 2 weeks that I have been trying to integrate Spirit in to my mezzanine project. It is a big pain because I tried a couple things around the internet but was unlucky. This is what i have tried



http://www.adamwester.me/blog/integrate-spirit-forum/ and i got this error ""django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet."", I checked the  __init__.py of spirit, and commented the function out but nothing.

Then i tried this https://community.spirit-project.com/topic/318/tutorial-for-not-advanced-django-users/ I was also unsuccessful

I then went here: https://github.com/nitely/Spirit/issues/25 but the post is 3 years old and does not give much information.



Gus please save me if there is something that had previously worked for you, please let me know"
2598,nitely,Spirit,2,closed,177,3,https://api.github.com/repos/nitely/Spirit/issues/177/comments,https://github.com/nitely/Spirit/issues/177,[],no such table: djconfig_config,"```
OperationalError at /

no such table: djconfig_config
```

Hello I am using Spirit for the first time. To start I am installing it as a standalone project. 
I get the above error when I run the app, from django debugger. 

I tried python manage.py migrate again but it said no migrations

The settings.py was in the example project didn't have database settings, so I added these: - 

> BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
> 
> DATABASES = {
>     'default': {
>         'ENGINE': 'django.db.backends.sqlite3',
>         'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
>     }
> }

Any idea how I can fix this error? "
2600,nitely,Spirit,2,closed,175,4,https://api.github.com/repos/nitely/Spirit/issues/175/comments,https://github.com/nitely/Spirit/issues/175,[],can't run example application,"I use Python 3.5.3 , try to run the command ""pip install . "" and I get these errors:

Collecting unicode-slugify==0.1.3 (from django-spirit==0.5.0.dev0)
  Using cached unicode-slugify-0.1.3.tar.gz
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File ""<string>"", line 1, in <module>
      File ""/tmp/pip-build-y1vmyhid/unicode-slugify/setup.py"", line 7, in <module>
        long_description=open('README.md').read(),
      File ""/root/Envs/spirit/lib/python3.5/encodings/ascii.py"", line 26, in decode
        return codecs.ascii_decode(input, self.errors)[0]
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 361: ordinal not in range(128)"
2604,nitely,Spirit,2,closed,170,3,https://api.github.com/repos/nitely/Spirit/issues/170/comments,https://github.com/nitely/Spirit/issues/170,[],Image compression support. And remove image after link in comments was deleted.,"- I've implemented image compression just now:
```python
# comment/forms.py
from django.core.files.uploadedfile import InMemoryUploadedFile
from PIL import Image as PImage
try:
    from StringIO import StringIO
except ImportError:
    # python3
    from io import BytesIO as StringIO


    def save(self):
        # todo: use DEFAULT_FILE_STORAGE and MEDIA_URL

        file = self.cleaned_data['image']

        if file.size > 1 * 1024 * 1024: # 1MB
            img = PImage.open(file)
            if img.mode != 'RGB':
                img = img.convert('RGB')
            new_img = StringIO()
            img.save(new_img, format='JPEG', quality=70)
            new_img.seek(0)
            if hasattr(new_img, 'len'):
                size = new_img.len
            else:
                size = new_img.tell()
            file = InMemoryUploadedFile(
                new_img,
                'ImageField',
                ""%s.jpg""%file.name.split('.')[0],
                'image/jpeg',
                size,
                None,
            )
            file.image = img
```
Because:
1. Some VPS storage and bandwidth are expensive.
2. And larger images could take more time to load.
3. Data can be append after or encrypted into an image. What if an image of 1GB size uploaded.
- Delete image from storage after link(text) in comments was deleted, for saving disk space.
This may be implemented via ImageField in models.py or walking through all comments.
The bad thing is image links on comment history page will be broken.
- Use [django-avatar  ](https://github.com/grantmcconnaughey/django-avatar) for avatars.
It supports uploading avatar( and gravatar by default).
I've done that. But I don't have time now.
I also implemented [django-avatar compression](https://github.com/grantmcconnaughey/django-avatar/issues/146).
- Add ~~`width: 100%`~~ `max-width: 100%` to `.comment-text img`, otherwise image parts outside container will be hidden.
"
2609,nitely,Spirit,2,closed,164,4,https://api.github.com/repos/nitely/Spirit/issues/164/comments,https://github.com/nitely/Spirit/issues/164,[],S3 Storage and Custom Theme/Styling,"I haven't been able to add AWS S3 storage. I tried using django-s3-storage and django-storages.
I get a server error.

Also, I don't exactly understand how to make changes to the styling or themes.

Every time I make some changes they don't show up when I run
python manage.py runserver


I have tried this using both Spirit and spirit-heroku versions but no change.
Am I missing something?"
2619,nitely,Spirit,3,closed,150,11,https://api.github.com/repos/nitely/Spirit/issues/150/comments,https://github.com/nitely/Spirit/issues/150,[],"LastIPMiddleware sql update error because REMOTE_ADDR is ""b''""","REMOTE_ADDR is ""b''"" when login from LAN and DEBUG=True. If I set DEBUG=False everything works great.
I think here's the target code: [XForwardedForMiddleware](https://github.com/nitely/Spirit/blob/c476fe06aa28d4656369e8d85a43e4451a9005ff/spirit/core/middleware.py#L13-L14), [LastIPMiddleware](https://github.com/nitely/Spirit/blob/c476fe06aa28d4656369e8d85a43e4451a9005ff/spirit/user/middleware.py#L45). Can we remove [this](https://github.com/nitely/Spirit/blob/c476fe06aa28d4656369e8d85a43e4451a9005ff/spirit/core/middleware.py#L13) line?
Error details:
```
DataError at /
invalid input syntax for type inet: ""b''""
LINE 1: UPDATE ""spirit_user_userprofile"" SET ""last_ip"" = 'b'''''::in...
```
```
▶ Local vars
Variable	Value
params  (Inet(""b''""), 1)
self   <django.db.backends.utils.CursorDebugWrapper object at 0x7f8d2aa436d8>
sql   ('UPDATE ""spirit_user_userprofile"" SET ""last_ip"" = %s WHERE '
 '""spirit_user_userprofile"".""user_id"" = %s')
```
Meta:
```
HTTP_X_FORWARDED_FOR  '192.168.1.4'
HTTP_X_FORWARDED_PROTO  'http'
HTTP_X_REAL_IP  '192.168.1.4'
REMOTE_ADDR  ""b''""
```
Great app. Though there's no link to `st/admin/comment/flag/` from `st/admin/`"
2620,nitely,Spirit,3,closed,149,4,https://api.github.com/repos/nitely/Spirit/issues/149/comments,https://github.com/nitely/Spirit/issues/149,[],MIDDLEWARE_CLASSES setting is deprecated in Django 1.10,"```
MIDDLEWARE_CLASSES += [
    # 'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    # 'django.middleware.common.CommonMiddleware',
    # 'django.middleware.csrf.CsrfViewMiddleware',
    # 'django.contrib.auth.middleware.AuthenticationMiddleware',
    # 'django.contrib.messages.middleware.MessageMiddleware',
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',

    'spirit.core.middleware.XForwardedForMiddleware',
    'spirit.user.middleware.TimezoneMiddleware',
    'spirit.user.middleware.LastIPMiddleware',
    'spirit.user.middleware.LastSeenMiddleware',
    'spirit.user.middleware.ActiveUserMiddleware',
    'spirit.core.middleware.PrivateForumMiddleware',
]
```
If I change `MIDDLEWARE_CLASSES` above to `MIDDLEWARE` errors occur:
```
[2017-01-09 20:35:10 +0800] [9759] [ERROR] Exception in worker process
Traceback (most recent call last):
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/arbiter.py"", line 557, in spawn_worker
    worker.init_process()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/workers/base.py"", line 126, in init_process
    self.load_wsgi()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/workers/base.py"", line 136, in load_wsgi
    self.wsgi = self.app.wsgi()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/app/base.py"", line 67, in wsgi
    self.callable = self.load()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/app/wsgiapp.py"", line 65, in load
    return self.load_wsgiapp()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/app/wsgiapp.py"", line 52, in load_wsgiapp
    return util.import_app(self.app_uri)
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/gunicorn/util.py"", line 357, in import_app
    __import__(module)
  File ""/home/i/Desktop/mysite/myapp/wsgi.py"", line 16, in <module>
    application = get_wsgi_application()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/django/core/wsgi.py"", line 14, in get_wsgi_application
    return WSGIHandler()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/django/core/handlers/wsgi.py"", line 153, in __init__
    self.load_middleware()
  File ""/home/i/Desktop/env/lib/python3.5/site-packages/django/core/handlers/base.py"", line 82, in load_middleware
    mw_instance = middleware(handler)
TypeError: object() takes no parameters
[2017-01-09 20:35:10 +0800] [9759] [INFO] Worker exiting (pid: 9759)
[2017-01-09 20:35:10 +0800] [9754] [INFO] Shutting down: Master
[2017-01-09 20:35:10 +0800] [9754] [INFO] Reason: Worker failed to boot.
```
So now I can't keep both `MIDDLEWARE_CLASSES` and `MIDDLEWARE`, and have to use `MIDDLEWARE_CLASSES` only.
Now I can see the forum and login page."
2663,nitely,Spirit,3,closed,94,11,https://api.github.com/repos/nitely/Spirit/issues/94/comments,https://github.com/nitely/Spirit/issues/94,[],Is it a better idea to let postgresql handle the primary key?,"If you use postgresql, creating another category would be a little inconvenient. For example, with the following two lines in a test, django will complain `django.db.utils.IntegrityError: duplicate key value violates unique constraint ""spirit_category_category_pkey"" DETAIL:  Key (id)=(1) already exists.`

```
from spirit.core.tests import utils
self.category = utils.create_category()
```

Because spirit has already inserted two other categories by default, with respective `id` specified. In the file `spirit/category/migrations/0002_auto_20150728_0442.py`, you can find the following lines:

```
if not Category.objects.filter(pk=settings.ST_TOPIC_PRIVATE_CATEGORY_PK).exists():
    Category.objects.create(
        pk=settings.ST_TOPIC_PRIVATE_CATEGORY_PK,
        title=""Private"",
        slug=""private"",
        is_private=True
    )

if not Category.objects.filter(pk=settings.ST_UNCATEGORIZED_CATEGORY_PK).exists():
    Category.objects.create(
        pk=settings.ST_UNCATEGORIZED_CATEGORY_PK,
        title=""Uncategorized"",
        slug=""uncategorized""
    )
```

It's not hard to fix the problem, you just need to restart the last_value.

```
alter sequence spirit_category_category_id_seq restart with 3
```

But I think it may be convenient if `pk` was not specified in the first place, .i.e. let postgresql generate the suitable `id` for the table. Removing the following two lines in the above code would be better, I think.

```
pk=settings.ST_TOPIC_PRIVATE_CATEGORY_PK,
pk=settings.ST_UNCATEGORIZED_CATEGORY_PK,
```
"
2665,nitely,Spirit,3,closed,91,6,https://api.github.com/repos/nitely/Spirit/issues/91/comments,https://github.com/nitely/Spirit/issues/91,[],Add Support for Django 1.9,"from django.utils.datastructures import SortedDict
ImportError: cannot import name 'SortedDict'
"
2666,nitely,Spirit,3,closed,90,2,https://api.github.com/repos/nitely/Spirit/issues/90/comments,https://github.com/nitely/Spirit/issues/90,[],'Running the example application' on python3.4,"Hi there
I have problem running the example application.
can someone help me with this?

$ git clone https://github.com/nitely/Spirit.git
$ cd Spirit
$ virtualenv venv
$ source ./venv/bin/activate
$ pip install .
$ cd example
$ python manage.py spiritinstall

and I get following error

``` javascript
Operations to perform:
  Synchronize unmigrated apps: haystack, spirit_core, spirit_search, messages, spirit_category_admin, staticfiles, spirit_comment_flag_admin, spirit_topic_admin, moderate, spirit_admin, spirit_user_admin, spirit_user_auth
  Apply all migrations: spirit_comment_like, djconfig, sessions, spirit_user, admin, spirit_topic_unread, spirit_comment, spirit_comment_bookmark, spirit_topic_favorite, spirit_category, spirit_comment_flag, spirit_topic_poll, spirit_topic, spirit_topic_private, auth, spirit_comment_history, spirit_topic_notification, contenttypes, spirit_comment_poll
Synchronizing apps without migrations:
  Creating tables...
    Running deferred SQL...
  Installing custom SQL...
Running migrations:
  Rendering model states...
 DONE
  Applying contenttypes.0001_initial...
 OK
  Applying auth.0001_initial...
 OK
  Applying admin.0001_initial...
 OK
  Applying contenttypes.0002_remove_content_type_name...
 OK
  Applying auth.0002_alter_permission_name_max_length...
 OK
  Applying auth.0003_alter_user_email_max_length...
 OK
  Applying auth.0004_alter_user_username_opts...
 OK
  Applying auth.0005_alter_user_last_login_null...
 OK
  Applying auth.0006_require_contenttypes_0002...
 OK
  Applying djconfig.0001_initial...
 OK
  Applying sessions.0001_initial...
 OK
  Applying spirit_category.0001_initial...
 OK
  Applying spirit_category.0002_auto_20150728_0442...
 OK
  Applying spirit_category.0003_category_is_global...
 OK
  Applying spirit_topic.0001_initial...
 OK
  Applying spirit_comment.0001_initial...
 OK
  Applying spirit_comment.0002_auto_20150828_2003...
 OK
  Applying spirit_comment.0003_auto_20151115_0400...
Traceback (most recent call last):
  File ""manage.py"", line 11, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/core/management/commands/spiritinstall.py"", line 14, in handle
    call_command('migrate', stdout=self.stdout, stderr=self.stderr)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/__init__.py"", line 120, in call_command
    return command.execute(*args, **defaults)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 222, in handle
    executor.migrate(targets, plan, fake=fake, fake_initial=fake_initial)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 110, in migrate
    self.apply_migration(states[migration], migration, fake=fake, fake_initial=fake_initial)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/db/migrations/executor.py"", line 148, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/db/migrations/migration.py"", line 115, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/opt/anaconda3/lib/python3.4/site-packages/django/db/migrations/operations/special.py"", line 183, in database_forwards
    self.code(from_state.apps, schema_editor)
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/comment/migrations/0003_auto_20151115_0400.py"", line 11, in render_comments
    from ...core.utils.markdown import Markdown
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/core/utils/markdown/__init__.py"", line 3, in <module>
    from .markdown import Markdown
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/core/utils/markdown/markdown.py"", line 8, in <module>
    from .inline import InlineLexer
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/core/utils/markdown/inline.py"", line 40, in <module>
    class InlineLexer(mistune.InlineLexer):
  File ""/opt/anaconda3/lib/python3.4/site-packages/spirit/core/utils/markdown/inline.py"", line 42, in InlineLexer
    default_rules = copy.copy(mistune.InlineLexer.inline_html_rules)
AttributeError: type object 'InlineLexer' has no attribute 'inline_html_rules'

```
"
2675,nitely,Spirit,3,closed,80,2,https://api.github.com/repos/nitely/Spirit/issues/80/comments,https://github.com/nitely/Spirit/issues/80,[],"Duplicate ""core"" issue when integrating spirit into existing mezzanine website","I am trying to integrate spirit into an existing mezzanine app which also has ""mezzanine.core"" app in settings.py. Spirit/settings.py has ""spirit.core"". So I am getting the following error:

django.core.exceptions.ImproperlyConfigured: Application labels aren't unique, duplicates: core

Any ideas on how to resolve this duplicate issue.

Thanks!!
"
2676,nitely,Spirit,3,closed,79,1,https://api.github.com/repos/nitely/Spirit/issues/79/comments,https://github.com/nitely/Spirit/issues/79,"[{""default"": true, ""name"": ""duplicate"", ""url"": ""https://api.github.com/repos/nitely/Spirit/labels/duplicate"", ""color"": ""cccccc"", ""node_id"": ""MDU6TGFiZWw5ODQzNzIxNg=="", ""id"": 98437216}]",Having trouble adding django-spirit to an exisiting mezzanine website,"I am tying to integrate django-spirit into an existing mezzanine website on windows.

I followed the following instructions:
https://github.com/nitely/Spirit/blob/master/README.md

When i launch the website now I get the following error:

Exception Value:  
Cannot create form field for 'category' yet, because its related model u'spirit_category.Category' has not been loaded yet

Any ideas on how to get this resolved and move forward with the integration. Appreciate the inputs.

Thanks,
Nirmala
"
2678,nitely,Spirit,3,closed,77,3,https://api.github.com/repos/nitely/Spirit/issues/77/comments,https://github.com/nitely/Spirit/issues/77,"[{""default"": true, ""name"": ""invalid"", ""url"": ""https://api.github.com/repos/nitely/Spirit/labels/invalid"", ""color"": ""e6e6e6"", ""node_id"": ""MDU6TGFiZWw5ODQzNzIxOQ=="", ""id"": 98437219}]",type object 'BlockLexer' has no attribute 'default_features',"AttributeError at /topic
type object 'BlockLexer' has no attribute 'default_features'
Request Method: GET
Request URL:    http://127.0.0.1:8000/topic
Django Version: 1.8
Exception Type: AttributeError
Exception Value:  
type object 'BlockLexer' has no attribute 'default_features'
Exception Location: C:\Python27\lib\site-packages\spirit\core\utils\markdown\block.py in BlockLexer, line 97
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.8
Python Path:  
['C:\Users\Robert\Desktop\forum\forum',
 'C:\Python27\lib\site-packages\xlrd-0.9.3-py2.7.egg',
 'C:\Python27\lib\site-packages\pip-1.5.6-py2.7.egg',
 'C:\Python27\python27.zip',
 'C:\Python27\DLLs',
 'C:\Python27\lib',
 'C:\Python27\lib\plat-win',
 'C:\Python27\lib\lib-tk',
 'C:\Python27',
 'C:\Python27\lib\site-packages']
Server time:    Sat, 17 Oct 2015 15:51:59 +0000

That is the issue that i am getting when i am using this app with my production enviorment any ideas why? 
"
2681,nitely,Spirit,3,closed,74,6,https://api.github.com/repos/nitely/Spirit/issues/74/comments,https://github.com/nitely/Spirit/issues/74,"[{""default"": true, ""name"": ""invalid"", ""url"": ""https://api.github.com/repos/nitely/Spirit/labels/invalid"", ""color"": ""e6e6e6"", ""node_id"": ""MDU6TGFiZWw5ODQzNzIxOQ=="", ""id"": 98437219}]",Error: Cannot create form field for 'category' yet (Windows),"Thank you for this open source forum.Really helpful 

I've trying to install it using the readme on the front page, through pip, cloned it, used the example, also tried this https://github.com/nitely/Spirit/issues/73.

These seems to be some errors while `python manage.py runserver`. I'm using windows and django==1.8.

This is one of the error I keep getting:

`Cannot create form field for 'category' yet, because its related model u'spirit_category.Category' has not been loaded yet`

I got stuck here for days.So,if you could please take time to explain the step-wise installation procedure, it would be helpful to me. 
I appreciate that.
Thank you so much.
"
2703,nitely,Spirit,3,closed,48,2,https://api.github.com/repos/nitely/Spirit/issues/48/comments,https://github.com/nitely/Spirit/issues/48,[],Remove django-debug-toolbar from requirements.txt,"Do we really need django-debug-toolbar there?
"
2710,nitely,Spirit,3,closed,40,2,https://api.github.com/repos/nitely/Spirit/issues/40/comments,https://github.com/nitely/Spirit/pull/40,[],Fix postgres broken transaction from IntegrityError catch,"IntegrityError causes transaction erroneous state in Postgres, so, any database request after that will cause exception. Fixed by django update_or_create, as mentioned in comments before.
"
2711,nitely,Spirit,3,closed,39,18,https://api.github.com/repos/nitely/Spirit/issues/39/comments,https://github.com/nitely/Spirit/issues/39,[],ImportError: No module named Category,"Hey guys! I've been looking into a few Django forums for an app I'm developing when I stumbled upon Spirit. I (and the other members of the team) love the way it looks, as well as the many functionalities it offers. However, after installing Spirit (both through pip install django-spirit and pip install -r requirements.txt), I can't run my migrations or my server because I'm getting an ImportError. This is the traceback: 
    Traceback (most recent call last):  
       File ""manage.py"", line 10, in <module>
        execute_from_command_line(sys.argv)
       File ""/usr/local/lib/python3.4/dist-packages/django/core/management/**init**.py"", line 385, in      execute_from_command_line
        utility.execute()
      File ""/usr/local/lib/python3.4/dist-packages/django/core/management/**init**.py"", line 354, in execute
       django.setup()
      File ""/usr/local/lib/python3.4/dist-packages/django/**init**.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
      File ""/usr/local/lib/python3.4/dist-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
      File ""/usr/local/lib/python3.4/dist-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
      File ""/usr/lib/python3.4/importlib/**init**.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
      File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
      File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
      File ""<frozen importlib._bootstrap>"", line 1129, in _exec
      File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
      File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
      File ""/usr/local/lib/python3.4/dist-packages/spirit/models/__init__.py"", line 1, in <module>
    from category import Category
   ImportError: No module named 'category'

Do you have any clue what might be causing this? Many thanks in advance! 
"
2714,nitely,Spirit,3,closed,36,8,https://api.github.com/repos/nitely/Spirit/issues/36/comments,https://github.com/nitely/Spirit/issues/36,[],Import spirit in project with another user_model,"For testing purposes, I changed the  spirit [example project](https://github.com/benjaminabel/Spirit/commit/c9f71b1ccf82123249553f74bfd41c2370b932d9) adding a user app which defines a user_model called `TestUser`. When I set `AUTH_USER_MODEL = 'user.TestUser`, 

`./manage.py makemigrations` outputs:

```
Migrations for 'user':
  0001_initial.py:
    - Create model TestUser
Migrations for 'spirit':
  0003_auto_20141218_0910.py:
    - Alter field slug on category
    - Alter field slug on topic
    - Alter field slug on user
    - Alter field timezone on user
    - Alter field username on user

```

But I can't run `./manage.py makemigrations` , I got this error.

```
...
  Applying spirit.0001_initial...Traceback (most recent call last):
  File ""/media/home/ben/.miniconda3/envs/spirit/lib/python3.4/site-packages/django/apps/registry.py"", line 148, in get_app_config
    return self.app_configs[app_label]
KeyError: 'user'
...
LookupError: No installed app with label 'user'.
...
ValueError: Lookup failed for model referenced by field spirit.CommentLike.user: user.TestUser
```

The only way I can run migrations is to delete `spirit.0001_` and `spirit.0002_` migrations and make a new one with `./manage.py makemigrations`, but you told me I shouldn't do that.
"
2725,nitely,Spirit,4,closed,25,3,https://api.github.com/repos/nitely/Spirit/issues/25/comments,https://github.com/nitely/Spirit/issues/25,[],Integration of Spirit in Mezzanine,"I try to integrate Spirit with the Mezzanine CMS.
But I'm not able to use the AUTH model of ezzanine in Spirit.
Now I try the Spirit-User-Profile app and I get following error:

> django.contrib.admin.sites.AlreadyRegistered: The model User is already registered

Actually I'm stuck. It's my first Django project.
Maybe the problem is, that Mezzanine still uses Django's AUTH_PROFILE_MODULE setting to create custom user profiles.

It would really be nice if Spirit could integrate in Mezzanine.
They're both great projects.
"
2743,nitely,Spirit,4,closed,4,3,https://api.github.com/repos/nitely/Spirit/issues/4/comments,https://github.com/nitely/Spirit/issues/4,[],Django fails to find 'spirit.User',"I've installed Spirit using pip and added it to my INSTALLED_APPS.  Having done so, Django fails to find the 'spirit.User' model:

```
(project) ± python manage.py shell_plus --settings=project.settings.local
CommandError: One or more models did not validate:
auth.user: Model has been swapped out for 'spirit.User' which has not been installed or is abstract.
admin.logentry: 'user' has a relation with model spirit.User, which has either not been installed or is abstract.
```
"
2747,mirumee,saleor,2,closed,4319,3,https://api.github.com/repos/mirumee/saleor/issues/4319/comments,https://github.com/mirumee/saleor/pull/4319,"[{""default"": false, ""name"": ""core"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/core"", ""color"": ""5062b2"", ""node_id"": ""MDU6TGFiZWwxMjE1NTI1Mjk4"", ""id"": 1215525298}]",Fixed internal error when adding a note to an anonymous order,"```
AttributeError: 'NoneType' object has no attribute 'pk'
  File ""django/core/handlers/exception.py"", line 34, in inner
    response = get_response(request)
  File ""django/core/handlers/base.py"", line 115, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""django/core/handlers/base.py"", line 113, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""saleor/order/views.py"", line 45, in details
    note_form.save(user=request.user)
  File ""saleor/order/forms.py"", line 76, in save
    order=self.instance, user=user, message=self.instance.customer_note
  File ""saleor/order/events.py"", line 225, in order_note_added_event
    if order.user.pk == user.pk:
```

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] Database migration files are up to date.
1. [x] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
1. [x] Changes are mentioned in the changelog.
"
2751,mirumee,saleor,2,closed,4304,4,https://api.github.com/repos/mirumee/saleor/issues/4304/comments,https://github.com/mirumee/saleor/pull/4304,"[{""default"": false, ""name"": ""performance"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/performance"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw0ODI3Mjc5MDU="", ""id"": 482727905}]",Optimize discount calculations,"This change makes sure that all discount information is prefetched ahead of the time.

### Before

```
DEBUG django.db.backends (0.001) SELECT ""discount_sale"".""id"", ""discount_sale"".""name"", ""discount_sale"".""type"", ""discount_sale"".""value"", ""discount_sale"".""start_date"", ""discount_sale"".""end_date"" FROM ""discount_sale"" WHERE ((""discount_sale"".""end_date"" IS NULL OR ""discount_sale"".""end_date"" >= '2019-06-17'::date) AND ""discount_sale"".""start_date"" <= '2019-06-17'::date); args=(datetime.date(2019, 6, 17), datetime.date(2019, 6, 17)) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.042) SELECT (""discount_sale_products"".""sale_id"") AS ""_prefetch_related_val_sale_id"", ""product_product"".""id"", ""product_product"".""publication_date"", ""product_product"".""is_published"", ""product_product"".""seo_title"", ""product_product"".""seo_description"", ""product_product"".""product_type_id"", ""product_product"".""name"", ""product_product"".""description"", ""product_product"".""description_json"", ""product_product"".""category_id"", ""product_product"".""price"", ""product_product"".""attributes"", ""product_product"".""updated_at"", ""product_product"".""charge_taxes"", ""product_product"".""tax_rate"", ""product_product"".""weight"" FROM ""product_product"" INNER JOIN ""discount_sale_products"" ON (""product_product"".""id"" = ""discount_sale_products"".""product_id"") WHERE ""discount_sale_products"".""sale_id"" IN (1, 2, 3, 4, 5) ORDER BY ""product_product"".""name"" ASC; args=(1, 2, 3, 4, 5) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.002) SELECT (""discount_sale_categories"".""sale_id"") AS ""_prefetch_related_val_sale_id"", ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" INNER JOIN ""discount_sale_categories"" ON (""product_category"".""id"" = ""discount_sale_categories"".""category_id"") WHERE ""discount_sale_categories"".""sale_id"" IN (1, 2, 3, 4, 5); args=(1, 2, 3, 4, 5) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT (""discount_sale_collections"".""sale_id"") AS ""_prefetch_related_val_sale_id"", ""product_collection"".""id"", ""product_collection"".""publication_date"", ""product_collection"".""is_published"", ""product_collection"".""seo_title"", ""product_collection"".""seo_description"", ""product_collection"".""name"", ""product_collection"".""slug"", ""product_collection"".""background_image"", ""product_collection"".""background_image_alt"", ""product_collection"".""description"", ""product_collection"".""description_json"" FROM ""product_collection"" INNER JOIN ""discount_sale_collections"" ON (""product_collection"".""id"" = ""discount_sale_collections"".""collection_id"") WHERE ""discount_sale_collections"".""sale_id"" IN (1, 2, 3, 4, 5) ORDER BY ""product_collection"".""slug"" ASC; args=(1, 2, 3, 4, 5) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 7; args=(7,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 7; args=(7,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 7; args=(7,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 7; args=(7,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 8; args=(8,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"", ""product_category"".""seo_title"", ""product_category"".""seo_description"", ""product_category"".""name"", ""product_category"".""slug"", ""product_category"".""description"", ""product_category"".""description_json"", ""product_category"".""parent_id"", ""product_category"".""background_image"", ""product_category"".""background_image_alt"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"", ""product_category"".""level"" FROM ""product_category"" WHERE ""product_category"".""id"" = 9; args=(9,) [PID:4120:Thread-1]
```

### After

```
DEBUG django.db.backends (0.001) SELECT ""discount_sale"".""id"", ""discount_sale"".""name"", ""discount_sale"".""type"", ""discount_sale"".""value"", ""discount_sale"".""start_date"", ""discount_sale"".""end_date"" FROM ""discount_sale"" WHERE ((""discount_sale"".""end_date"" IS NULL OR ""discount_sale"".""end_date"" >= '2019-06-17'::date) AND ""discount_sale"".""start_date"" <= '2019-06-17'::date); args=(datetime.date(2019, 6, 17), datetime.date(2019, 6, 17)) [PID:5057:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""discount_sale_collections"".""sale_id"", ""discount_sale_collections"".""collection_id"" FROM ""discount_sale_collections"" WHERE ""discount_sale_collections"".""sale_id"" IN (1, 2, 3, 4, 5); args=(1, 2, 3, 4, 5) [PID:5057:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""discount_sale_products"".""sale_id"", ""discount_sale_products"".""product_id"" FROM ""discount_sale_products"" WHERE ""discount_sale_products"".""sale_id"" IN (1, 2, 3, 4, 5); args=(1, 2, 3, 4, 5) [PID:5057:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""discount_sale_categories"".""sale_id"", ""discount_sale_categories"".""category_id"" FROM ""discount_sale_categories"" WHERE ""discount_sale_categories"".""sale_id"" IN (1, 2, 3, 4, 5); args=(1, 2, 3, 4, 5) [PID:5057:Thread-1]
```
```
DEBUG django.db.backends (0.001) SELECT ""product_category"".""id"", ""product_category"".""parent_id"", ""product_category"".""lft"", ""product_category"".""rght"", ""product_category"".""tree_id"" FROM ""product_category"" WHERE ""product_category"".""id"" IN (8, 9, 7) ORDER BY ""product_category"".""tree_id"" ASC, ""product_category"".""parent_id"" ASC, ""product_category"".""lft"" ASC; args=(8, 9, 7) [PID:5057:Thread-1]
```
```
DEBUG django.db.backends (0.000) SELECT ""product_category"".""id"" FROM ""product_category"" WHERE ((""product_category"".""lft"" >= 1 AND ""product_category"".""rght"" <= 2 AND ""product_category"".""tree_id"" = 1) OR (""product_category"".""lft"" >= 1 AND ""product_category"".""rght"" <= 2 AND ""product_category"".""tree_id"" = 2) OR (""product_category"".""lft"" >= 1 AND ""product_category"".""rght"" <= 2 AND ""product_category"".""tree_id"" = 3)) ORDER BY ""product_category"".""tree_id"" ASC, ""product_category"".""lft"" ASC; args=(1, 2, 1, 1, 2, 2, 1, 2, 3) [PID:5057:Thread-1]
```

### Query
```graphql
query ProductsList {
  products(first: 20) {
    edges {
      node {
        pricing {
          priceRange {
            start {
              gross {
                currency
                amount
                localized
              }
            }
          }
        }
      }
    }
  }
}

```

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [ ] Database migration files are up to date.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
1. [ ] Changes are mentioned in the changelog.
"
2753,mirumee,saleor,2,closed,4299,0,https://api.github.com/repos/mirumee/saleor/issues/4299/comments,https://github.com/mirumee/saleor/issues/4299,"[{""default"": false, ""name"": ""performance"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/performance"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw0ODI3Mjc5MDU="", ""id"": 482727905}]",Drop the static files panel from Django Debug Toolbar,This panel is mostly useless and having it enabled in DEBUG mode slows everything down to a crawl.
2806,mirumee,saleor,2,closed,4201,4,https://api.github.com/repos/mirumee/saleor/issues/4201/comments,https://github.com/mirumee/saleor/issues/4201,[],ModuleNotFoundError: No module named 'geolite2',"### What I'm trying to achieve
install saleor

### Steps to reproduce the problem
1. python manage.py migrate

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""D:\installation\anaconda3\lib\site-packages\django\core\management\__in
t__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""D:\installation\anaconda3\lib\site-packages\django\core\management\__in
t__.py"", line 357, in execute
    django.setup()
  File ""D:\installation\anaconda3\lib\site-packages\django\__init__.py"", line 2
, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""D:\installation\anaconda3\lib\site-packages\django\apps\registry.py"", l
ne 114, in populate
    app_config.import_models()
  File ""D:\installation\anaconda3\lib\site-packages\django\apps\config.py"", lin
 211, in import_models
    self.models_module = import_module(models_module_name)
  File ""D:\installation\anaconda3\lib\importlib\__init__.py"", line 127, in impo
t_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 1006, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 983, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 967, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 677, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 728, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""D:\saleor\saleor\saleor\account\models.py"", line 19, in <module>
    from ..core.utils.json_serializer import CustomJsonEncoder
  File ""D:\saleor\saleor\saleor\core\utils\__init__.py"", line 19, in <module>
    from geolite2 import geolite2
ModuleNotFoundError: No module named 'geolite2'

### What I expected to happen
…

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

**System information**
Operating system: windows 7
Browser:
"
2827,mirumee,saleor,2,closed,4166,2,https://api.github.com/repos/mirumee/saleor/issues/4166/comments,https://github.com/mirumee/saleor/pull/4166,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}, {""default"": false, ""name"": ""storefront 1.0"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/storefront%201.0"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw0NTQyMjEwOTQ="", ""id"": 454221094}]",Adding a non existent variant to a checkout no longer crashes,"This fixes this error:
```
File ""/Users/Development/saleor/saleor/product/views.py"" in product_add_to_checkout
  144.     if form.is_valid():

File ""/Users/Development/saleor-venv/lib/python3.7/site-packages/django/forms/forms.py"" in is_valid
  185.         return self.is_bound and not self.errors

File ""/Users/Development/saleor-venv/lib/python3.7/site-packages/django/forms/forms.py"" in errors
  180.             self.full_clean()

File ""/Users/Development/saleor-venv/lib/python3.7/site-packages/django/forms/forms.py"" in full_clean
  382.         self._clean_form()

File ""/Users/Development/saleor-venv/lib/python3.7/site-packages/django/forms/forms.py"" in _clean_form
  409.             cleaned_data = self.clean()

File ""/Users/Development/saleor/saleor/checkout/forms.py"" in clean
  93.             line = self.checkout.get_line(variant)

File ""/Users/Development/saleor/saleor/checkout/models.py"" in get_line
  125.         return next(matching_lines, None)

File ""/Users/Development/saleor/saleor/checkout/models.py"" in <genexpr>
  124.         matching_lines = (line for line in self if line.variant.pk == variant.pk)

Exception Type: AttributeError at /en/products/white-parrot-cushion-86/add/
Exception Value: 'NoneType' object has no attribute 'pk'
```

Note: I checked, no override is raising such exception (""ObjectDoesNotExist"") they are only returning the form field that already resolved the variant.

### Screenshots

<!-- If your changes affect the UI, providing ""before"" and ""after"" screenshots will
greatly reduce the amount of work needed to review your work. -->

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] Database migration files are up to date.
1. [x] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
1. [x] Changes are mentioned in the changelog.
"
2883,mirumee,saleor,3,closed,4086,4,https://api.github.com/repos/mirumee/saleor/issues/4086/comments,https://github.com/mirumee/saleor/issues/4086,"[{""default"": false, ""name"": ""graphql"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/graphql"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw4MjI0OTA0ODc="", ""id"": 822490487}]",Build breaks on newest django-phonenumber-field release,"django-phonenumber-field 2.4.0 was release a few days ago. As their changelog state: Saving or filtering by an invalid phone number will now raise a `ValueError`.

After looking for more information about the previous implementation and for the context, I found the https://github.com/stefanfoulis/django-phonenumber-field/pull/298 pull request. django-phonenumber-field was previously silently failing when we filtered with an invalid phone number, by replacing the phone number value to `""""`.

We should probably add or edit the check logic in our back-end handle this case. As we don't handle in (as shown in the tests).

There is also a breakage coming from the newest release of `phonenumberslite` (8.10.11, coming from 8.10.10). They release a new ""minor"" version which actually introduces breaking changes to the number validation rules. ~~I couldn't tell the reasons of those new changes and their validity as no changelog is provided, the best thing I found was this: https://github.com/matext/python-phonenumbers/pull/21.~~

Edit: I found the changelog.

> Apr 30, 2019: v8.10.11
> Metadata changes:
> - Updated phone metadata for region code(s): CU, EH, MA
> - Updated short number metadata for region code(s): CU
>- Updated geocoding data for country calling code(s): 53 (en)

<details><summary>Test results</summary>

```
number = '+1 (555) 555-5555'
user_api_client = <tests.api.conftest.ApiClient object at 0x7f9a90618550>
checkout_with_item = Checkout(quantity=3)
graphql_address_data = {'city': 'Wrocław', 'companyName': 'Mirumee Software', 'country': 'PL', 'countryArea': '', ...}
    @pytest.mark.parametrize(
        'number', [
            '+48321321888',
            '+1 (555) 555-5555',
            '00 44 (0155 55) 5555'
        ]
    )
    def test_checkout_shipping_address_update_with_phone_country_prefix(
            number, user_api_client, checkout_with_item, graphql_address_data):
        checkout = checkout_with_item
        assert checkout.shipping_address is None
        checkout_id = graphene.Node.to_global_id('Checkout', checkout.pk)
    
        shipping_address = graphql_address_data
        shipping_address['phone'] = number
        variables = {
            'checkoutId': checkout_id,
            'shippingAddress': shipping_address}
    
        response = user_api_client.post_graphql(
            MUTATION_CHECKOUT_SHIPPING_ADDRESS_UPDATE, variables)
>       content = get_graphql_content(response)
tests/api/test_checkout.py:724: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
response = <JsonResponse status_code=200, ""application/json"">
    def get_graphql_content(response):
        """"""Get's GraphQL content from the response, and optionally checks if it
        contains any operating-related errors, eg. schema errors or lack of
        permissions.
        """"""
        content = _get_graphql_content_from_response(response)
>       assert 'errors' not in content, content['errors']
E       AssertionError: [{'message': '“+15555555555” is not a valid phone number.', 'locations': [{'line': 4, 'column': 9}], 'path': ['checkoutShippingAddressUpdate']}]
tests/api/utils.py:18: AssertionError
----------------------------- Captured stderr call -----------------------------
ERROR graphql.execution.utils graphql.error.located_error.GraphQLLocatedError: “+15555555555” is not a valid phone number.
 [PID:5171:MainThread]
------------------------------ Captured log call -------------------------------
utils.py                   151 ERROR    graphql.error.located_error.GraphQLLocatedError: “+15555555555” is not a valid phone number.
_ test_checkout_shipping_address_update_with_phone_country_prefix[00 44 (0155 55) 5555] _
[gw0] linux -- Python 3.6.7 /home/travis/build/mirumee/saleor/.tox/py36-django22/bin/python
number = '00 44 (0155 55) 5555'
user_api_client = <tests.api.conftest.ApiClient object at 0x7f9a9063f588>
checkout_with_item = Checkout(quantity=3)
graphql_address_data = {'city': 'Wrocław', 'companyName': 'Mirumee Software', 'country': 'PL', 'countryArea': '', ...}
    @pytest.mark.parametrize(
        'number', [
            '+48321321888',
            '+1 (555) 555-5555',
            '00 44 (0155 55) 5555'
        ]
    )
    def test_checkout_shipping_address_update_with_phone_country_prefix(
            number, user_api_client, checkout_with_item, graphql_address_data):
        checkout = checkout_with_item
        assert checkout.shipping_address is None
        checkout_id = graphene.Node.to_global_id('Checkout', checkout.pk)
    
        shipping_address = graphql_address_data
        shipping_address['phone'] = number
        variables = {
            'checkoutId': checkout_id,
            'shippingAddress': shipping_address}
    
        response = user_api_client.post_graphql(
            MUTATION_CHECKOUT_SHIPPING_ADDRESS_UPDATE, variables)
>       content = get_graphql_content(response)
tests/api/test_checkout.py:724: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
response = <JsonResponse status_code=200, ""application/json"">
    def get_graphql_content(response):
        """"""Get's GraphQL content from the response, and optionally checks if it
        contains any operating-related errors, eg. schema errors or lack of
        permissions.
        """"""
        content = _get_graphql_content_from_response(response)
>       assert 'errors' not in content, content['errors']
E       AssertionError: [{'message': '“+44155555555” is not a valid phone number.', 'locations': [{'line': 4, 'column': 9}], 'path': ['checkoutShippingAddressUpdate']}]
</details>
"
2906,mirumee,saleor,3,closed,4056,1,https://api.github.com/repos/mirumee/saleor/issues/4056/comments,https://github.com/mirumee/saleor/issues/4056,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Send order confirmation does not check for null addresses,"
### Steps to reproduce the problem
1. Create a digital order 
2. Send the order confirmation email

```
.ERROR celery.app.trace Task saleor.order.emails.send_order_confirmation[6b5284db-234a-4afd-96c6-2d384b9192de] raised unexpected: AttributeError(""'NoneType' object has no attribute 'as_data'"") [PID:3810:MainThread]
Traceback (most recent call last):
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/celery/app/trace.py"", line 385, in trace_task
    R = retval = fun(*args, **kwargs)
  File ""/Users/mikailkocak/Development/saleor/saleor/order/emails.py"", line 60, in send_order_confirmation
    send_templated_mail(**email_data)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/templated_email/__init__.py"", line 70, in send_templated_mail
    headers=headers, create_link=create_link, **kwargs)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/templated_email/backends/vanilla_django.py"", line 258, in send
    create_link=create_link)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/templated_email/backends/vanilla_django.py"", line 134, in get_email_message
    template_suffix or file_extension)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/templated_email/backends/vanilla_django.py"", line 106, in _render_email
    response[part] = render_block_to_string(full_template_names, part, render_context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/render_block/base.py"", line 39, in render_block_to_string
    return django_render_block(t, block_name, context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/render_block/django.py"", line 27, in django_render_block
    return _render_template_block(template, block_name, context_instance)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/render_block/django.py"", line 70, in _render_template_block
    return _render_template_block_nodelist(template.nodelist, block_name, context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/render_block/django.py"", line 85, in _render_template_block_nodelist
    return node.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/loader_tags.py"", line 62, in render
    result = block.nodelist.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/base.py"", line 937, in render
    bit = node.render_annotated(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/base.py"", line 904, in render_annotated
    return self.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/loader_tags.py"", line 188, in render
    return template.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/base.py"", line 173, in render
    return self._render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/base.py"", line 937, in render
    bit = node.render_annotated(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/base.py"", line 904, in render_annotated
    return self.render(context)
  File ""/Users/mikailkocak/Development/saleor-venv/lib/python3.7/site-packages/django/template/library.py"", line 214, in render
    _dict = self.func(*resolved_args, **resolved_kwargs)
  File ""/Users/mikailkocak/Development/saleor/saleor/account/templatetags/i18n_address_tags.py"", line 10, in format_address
    address_data = address.as_data()
AttributeError: 'NoneType' object has no attribute 'as_data'
```"
2910,mirumee,saleor,3,closed,4051,0,https://api.github.com/repos/mirumee/saleor/issues/4051/comments,https://github.com/mirumee/saleor/issues/4051,[],"KeyError: ('checkout', 'cart')","### What I'm trying to achieve

I am trying to upgrade my store to the latest version of Saleor. When I `makemigrations` or `migrate`, I get the following error. 

### Steps to reproduce the problem
1. Pull from master
2. Run `python manage.py migrate`
3. Get a system recommendation to run `python manage.py makemigrations --merge`

### What I expected to happen
That `makemigrations` merge successfully and that I can migrate easily.

### Screenshots

```bash python
(soqonee) ➜  soqoni-web (master) ✗ python manage.py makemigrations
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 323, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 364, in execute
    output = self.handle(*args, **options)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 83, in wrapped
    res = handle_func(*args, **kwargs)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/commands/makemigrations.py"", line 141, in handle
    loader.project_state(),
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/loader.py"", line 324, in project_state
    return self.graph.make_state(nodes=nodes, at_end=at_end, real_apps=list(self.unmigrated_apps))
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/graph.py"", line 315, in make_state
    project_state = self.nodes[node].mutate_state(project_state, preserve=False)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/migration.py"", line 87, in mutate_state
    operation.state_forwards(self.app_label, new_state)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/operations/fields.py"", line 229, in state_forwards
    state.models[app_label, self.model_name_lower].fields
KeyError: ('checkout', 'cart')
(soqonee) ➜  soqoni-web (master) ✗ python manage.py migrate 
Operations to perform:
  Apply all migrations: account, auth, checkout, contenttypes, discount, django_celery_results, django_prices_openexchangerates, django_prices_vatlayer, impersonate, menu, order, page, payment, product, sessions, shipping, site, sites, social_django
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 323, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 364, in execute
    output = self.handle(*args, **options)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/base.py"", line 83, in wrapped
    res = handle_func(*args, **kwargs)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/core/management/commands/migrate.py"", line 190, in handle
    pre_migrate_state = executor._create_project_state(with_applied_migrations=True)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/executor.py"", line 79, in _create_project_state
    migration.mutate_state(state, preserve=False)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/migration.py"", line 87, in mutate_state
    operation.state_forwards(self.app_label, new_state)
  File ""/Users/raymaun/Projects/soqoni-web/soqonee/lib/python3.7/site-packages/django/db/migrations/operations/fields.py"", line 229, in state_forwards
    state.models[app_label, self.model_name_lower].fields
KeyError: ('checkout', 'cart')
(soqonee) ➜  soqoni-web (master) ✗ 
```

**System information**
Operating system: Mac OSX
Browser: Chrome
"
2925,mirumee,saleor,3,closed,4026,3,https://api.github.com/repos/mirumee/saleor/issues/4026/comments,https://github.com/mirumee/saleor/issues/4026,[],Issue: Connecting with default postgresql credentials,"OS = Ubuntu 18.04
Python = 3.6.7
PIP =  9.0.1 from /usr/lib/python3/dist-packages (python 3.6)

Here's what I've done:

1). sudo apt-get install build-essential python3-dev python3-pip python3-cffi libcairo2 libpango-1.0-0 libpangocairo-1.0-0 libgdk-pixbuf2.0-0 libffi-dev shared-mime-info postgresql postgresql-contrib

2).  git clone https://github.com/mirumee/saleor.git

3). cd saleor

4).  pip install -r requirements.txt 

5). Created a user with password and database (other then saleor) in PostgreSQL and attached it to the database with all privileges. 

6). Edited common.env  (cat ./common.env = 
```
DATABASE_URL=postgresql://user:password@127.0.0.1:5432/userdatabase
DEFAULT_FROM_EMAIL=noreply@example.com
OPENEXCHANGERATES_API_KEY
CACHE_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/1
SECRET_KEY=32 character key
JWT_VERIFY_EXPIRATION=True
VATLAYER_ACCESS_KEY)
```

7). Run 'python manage.py migrate' and got the following error:

```
Traceback (most recent call last):
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 217, in ensure_connection
    self.connect()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 195, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 178, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/vihit/.local/lib/python3.6/site-packages/psycopg2/__init__.py"", line 126, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  password authentication failed for user ""saleor""
FATAL:  password authentication failed for user ""saleor""


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/base.py"", line 323, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/base.py"", line 364, in execute
    output = self.handle(*args, **options)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/base.py"", line 83, in wrapped
    res = handle_func(*args, **kwargs)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/core/management/commands/migrate.py"", line 87, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 18, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 49, in __init__
    self.build_graph()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 212, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 73, in applied_migrations
    if self.has_table():
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 56, in has_table
    return self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor())
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 256, in cursor
    return self._cursor()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 233, in _cursor
    self.ensure_connection()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 217, in ensure_connection
    self.connect()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 217, in ensure_connection
    self.connect()
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 195, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/vihit/.local/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 178, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/vihit/.local/lib/python3.6/site-packages/psycopg2/__init__.py"", line 126, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  password authentication failed for user ""saleor""
FATAL:  password authentication failed for user ""saleor""
```

Output of command 
```
psql ppostgresql::/user:password@127.0.0.1:5432/userdatabase
```

```

psql (10.7 (Ubuntu 10.7-0ubuntu0.18.04.1))
SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)
Type ""help"" for help.

userdatabase=>
```"
2955,mirumee,saleor,4,closed,3979,1,https://api.github.com/repos/mirumee/saleor/issues/3979/comments,https://github.com/mirumee/saleor/pull/3979,[],Remove comment and set up explicit __hash__ function,"It turns out that in Django 2.2 bug we were unknowingly relying on was fixed. Indeed, from https://docs.python.org/3/reference/datamodel.html#object.__hash__

> A class that overrides __eq__() and does not define __hash__() will have its __hash__() implicitly set to None.

> If a class that overrides __eq__() needs to retain the implementation of __hash__() from a parent class, the interpreter must be told this explicitly by setting __hash__ = <ParentClass>.__hash__.

Additional explanation of the issue:
https://code.djangoproject.com/ticket/30333

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] Database migration files are up to date.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
1. [x] Changes are mentioned in the changelog.
"
2956,mirumee,saleor,4,closed,3978,5,https://api.github.com/repos/mirumee/saleor/issues/3978/comments,https://github.com/mirumee/saleor/issues/3978,[],Do not enable Debug Toolbar by default with DEBUG mode,"### What I'm trying to achieve
Django Debug Toolbar combined with debugger causes on my env timeouts and unfortunately, it's turned on by default with DEBUG mode:
https://github.com/mirumee/saleor/blob/master/saleor/settings.py#L254

This tool should be enabled on demand, like Silk:
https://github.com/mirumee/saleor/blob/master/saleor/settings.py#L278

### Describe a proposed solution
- add separate setting for enabling DDT (new environment variable)
- the default setting should be discussed
"
2998,mirumee,saleor,4,closed,3933,1,https://api.github.com/repos/mirumee/saleor/issues/3933/comments,https://github.com/mirumee/saleor/issues/3933,[],User activity events,"In Dashboard 2.0 we'd like to be able to display timelines showing the user and system activity, such as order creation, payment success/error, notification about emails sent to customers, etc. So far we've implemented `OrderEvent` model to track order related events. Now we need to implement the rest of the events for other models and system actions. The full of list of proposed events can be found on Figma (""UI GUIDE"" tab).

Since most of the events share the same fields and logic we should think of some unified implementation e.g. an abstract model in Django and an interface in GraphQL. Let's discuss the details with the team and we'll provide more accurate requirements about the backend."
3068,mirumee,saleor,5,closed,3844,1,https://api.github.com/repos/mirumee/saleor/issues/3844/comments,https://github.com/mirumee/saleor/issues/3844,[],field_types[name] generics type cannot be used with isinstance (python 3.7),"### What I'm trying to achieve

Pycharm error

python 3.7

### Steps to reproduce the problem

saleor/saleor/payment/utils.py

Line 332

`field_types = {
        'amount': Decimal,
        'currency': str,
        'is_success': bool,
        'kind': str,
        'transaction_id': str,
        'error': (type(None), str),
    }

    for response in responses:
        if not REQUIRED_GATEWAY_KEYS.issubset(response):
            raise GatewayError(
                'Gateway response needs to contain following keys: {}'.format(
                    sorted(REQUIRED_GATEWAY_KEYS)))

        for name, value in response.items():
            if name in field_types:
                if not isinstance(value, field_types[name]):
                    raise GatewayError('{} must be of type {}, was {}'.format(
                        name, field_types[name], type(value)))

        if response['kind'] not in ALLOWED_GATEWAY_KINDS:
            raise GatewayError(
                'Gateway response kind must be one of {}'.format(
                    sorted(ALLOWED_GATEWAY_KINDS)))

        if response['currency'] != settings.DEFAULT_CURRENCY:
            logger.warning('Transaction currency is different than Saleor\'s.')

        try:
            json.dumps(response, cls=DjangoJSONEncoder)
        except (TypeError, ValueError):
            raise GatewayError(
                'Gateway response needs to be json serializable')`


`if not isinstance(value, field_types[name]):`

error: Parameterized generics cannot be used with instance and class checks

isinstance not accept generics type field_types[name] 

### What I expected to happen
…

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

**System information**
Operating system: 
Browser:
"
3092,mirumee,saleor,5,closed,3815,2,https://api.github.com/repos/mirumee/saleor/issues/3815/comments,https://github.com/mirumee/saleor/issues/3815,"[{""default"": false, ""name"": ""graphql"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/graphql"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw4MjI0OTA0ODc="", ""id"": 822490487}]",Validate languageCode in API,"We use `languageCode` argument in various queries and mutations. We should add some validation that will check if the provided code is supported by Saleor i.e. is present in `LANGUAGES` list in Django settings. 

E.g. this should return an error:
```graphql
mutation {
  productTranslate(id: ""UHJvZHVjdDo3Mg=="", languageCode: ""asd"", input: {}) {
    errors {
      field
      message
    }
    product {
      name
    }
  }
}
```"
3150,mirumee,saleor,6,closed,3746,4,https://api.github.com/repos/mirumee/saleor/issues/3746/comments,https://github.com/mirumee/saleor/issues/3746,[],error while running migrations ,"### What I'm trying to achieve
I'm pretty new to programming in django.  So after installation, while running manage.py migrate for the first time, i keep getting an error code. i don't know what i'm doing wrong

### Steps to reproduce the problem
1. followed the saleor installation docs
2. installed postgresSQL and other apps
3. created the user, database and granted my user superuser privileges
4. set the SECRET_KEY environment variable
5. ran python.py migrate

### What I expected to happen

successful migration

**System information**
Operating system: 
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""C:\Users\BELINDA\saleor\lib\site-packages\django\core\management\__init__.py"", line 381, in execute_from_command
_line
    utility.execute()
  File ""C:\Users\BELINDA\saleor\lib\site-packages\django\core\management\__init__.py"", line 325, in execute
    settings.INSTALLED_APPS
  File ""C:\Users\BELINDA\saleor\lib\site-packages\django\conf\__init__.py"", line 57, in __getattr__
    self._setup(name)
  File ""C:\Users\BELINDA\saleor\lib\site-packages\django\conf\__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""C:\Users\BELINDA\saleor\lib\site-packages\django\conf\__init__.py"", line 107, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""C:\Users\BELINDA\saleor\lib\importlib\__init__.py"", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 1006, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 983, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 967, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 677, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 728, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""C:\Users\BELINDA\saleor\saleor\settings.py"", line 55, in <module>
    conn_max_age=600)}
  File ""C:\Users\BELINDA\saleor\lib\site-packages\dj_database_url.py"", line 55, in config
    config = parse(s, engine, conn_max_age, ssl_require)
  File ""C:\Users\BELINDA\saleor\lib\site-packages\dj_database_url.py"", line 103, in parse
    engine = SCHEMES[url.scheme] if engine is None else engine
KeyError: ''
Browser:
"
3189,mirumee,saleor,6,closed,3702,1,https://api.github.com/repos/mirumee/saleor/issues/3702/comments,https://github.com/mirumee/saleor/issues/3702,[],Heroku django.core.management ,"Hi,
I'm following the Docs for deployment with heroku.. followed all the instructions but I got problems with

heroku run python manage.py migrate

Error:
ImportError: No module named django.core.management


Maybe someone can help me :/ ?
Thanks a lot

"
3200,mirumee,saleor,6,closed,3691,2,https://api.github.com/repos/mirumee/saleor/issues/3691/comments,https://github.com/mirumee/saleor/pull/3691,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}, {""default"": false, ""name"": ""i18n"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/i18n"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2MTAxMzQ3NQ=="", ""id"": 61013475}]",Fix problem with l10n in Braintree payment gateway template,"I want to merge this change because it solves problem with l10n in template file and Django's `forms.DecimalField`.

The problem was with localized decimal point. For example, when user with `pl` locale visit `order.start_payment` view, he gets 

    <input type=""hidden"" id=""amount"" name=""amount"" value=""42,30"">

On the other hand, `payment.gateways.braintree.forms.BraintreePaymentForm` has `forms.DecimalField` field without localization. Form cannot be properly proceed and display error (see screenshots below).

I've fixed it by disabling l10n in the proper part of the template.

<!-- Please mention all relevant issue numbers. -->

### Screenshots
<img width=""1392"" alt=""zrzut ekranu 2019-02-07 o 11 47 33"" src=""https://user-images.githubusercontent.com/15018155/52409752-b2a47100-2ad6-11e9-9778-f46a01115da8.png"">

<!-- If your changes affect the UI, providing ""before"" and ""after"" screenshots will
greatly reduce the amount of work needed to review your work. -->

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] Database migration files are up to date.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
1. [ ] Changes are mentioned in the changelog."
3293,mirumee,saleor,7,closed,3586,2,https://api.github.com/repos/mirumee/saleor/issues/3586/comments,https://github.com/mirumee/saleor/issues/3586,[],Error on initial migrate on account models,"### What I'm trying to achieve
…
I want to start saleor locally, I followed the linux saleor setup guide
### Steps to reproduce the problem
1. I followed every setup step, as of Jan 11 2018
2. On stage 7, when it says ""python manage.py migrate"" I get the following error:
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0001_initial... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying account.0001_initial... OK
  Applying account.0002_auto_20150907_0602...Traceback (most recent call last):
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: syntax error at or near ""WITH ORDINALITY""
LINE 6:                     FROM unnest(c.conkey) WITH ORDINALITY co...


### What I expected to happen
…
I expected saleor initial migrations to run without any sort of trouble


### What I tried

I re-created databases from scratch, tried to set it up to the default values(saleo:saleor@saleor), still drops the same mistake. 

**System information**
Ubuntu 18.04 LTS
My settings.py database sections looks like this:

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'saleor',
        'USER': 'saleor',
        'PASSWORD': 'saleor',
        'HOST': ""127.0.0.1"",
        'PORT': '5432',
    },

}

With default 

DATABASES = {
    'default': dj_database_url.config(
        default='postgres://saleor:saleor@localhost:5432/saleor',
        conn_max_age=600)}

it gives the same result.

### Full traceback:

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/base.py"", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/base.py"", line 353, in execute
    output = self.handle(*args, **options)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/base.py"", line 83, in wrapped
    res = handle_func(*args, **kwargs)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/core/management/commands/migrate.py"", line 203, in handle
    fake_initial=fake_initial,
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 117, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 147, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/migrations/migration.py"", line 124, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/migrations/operations/fields.py"", line 216, in database_forwards
    schema_editor.alter_field(from_model, from_field, to_field)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/base/schema.py"", line 508, in alter_field
    return self._alter_many_to_many(model, old_field, new_field, strict)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/base/schema.py"", line 861, in _alter_many_to_many
    new_field.remote_field.through._meta.get_field(new_field.m2m_reverse_field_name()),
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/base/schema.py"", line 523, in alter_field
    old_db_params, new_db_params, strict)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/postgresql/schema.py"", line 122, in _alter_field
    new_db_params, strict,
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/base/schema.py"", line 531, in _alter_field
    fk_names = self._constraint_names(model, [old_field.column], foreign_key=True)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/base/schema.py"", line 1029, in _constraint_names
    constraints = self.connection.introspection.get_constraints(cursor, model._meta.db_table)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/postgresql/introspection.py"", line 158, in get_constraints
    """""", [""public"", table_name])
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 100, in execute
    return super().execute(sql, params)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 68, in execute
    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 77, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/home/stephen/Code/Work/saleor/saleor-venv/lib/python3.6/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: syntax error at or near ""WITH ORDINALITY""
LINE 6:                     FROM unnest(c.conkey) WITH ORDINALITY co...
"
3309,mirumee,saleor,7,closed,3568,2,https://api.github.com/repos/mirumee/saleor/issues/3568/comments,https://github.com/mirumee/saleor/issues/3568,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",send_password_reset_email function is not working correctly,"###The version I am using
commit 5a7e2e8f179425d4b50f2ccb154d3ac5c5a425f0

### What I'm trying to achieve
I want to use graphql (customerPasswordReset) to send password reset email.

### Steps to reproduce the problem
1. Use postman or other app to send graphql mutation
2. Use tokenCreate mutation to get user's token.
3. Input token to postman or other app for Authentication
4. send the following mutation for password reset
mutation{
  customerPasswordReset(input:{email:""youremail@host.com""}){
    errors{
      message
    }
  }
}
### What I expected to happen
I expected to get email for password reset.

**System information**
Then, I go to terminal to see the log and get following error massage: 

ERROR celery.app.trace Task saleor.account.emails.send_password_reset_email[8d46cc12-5332-4129-98a7-5a5d3c0cc5f5] raised unexpected: NoReverseMatch('Reverse for \'reset-password-confirm\' with keyword arguments \'{\'uidb64\': \'<< MISSING VARIABLE ""uid"" >>\', \'token\': \'<< MISSING VARIABLE ""token"" >>\'}\' not found. 1 pattern(s) tried: [\'en/account/password/reset/(?P<uidb64>[0-9A-Za-z_\\\\-]+)/(?P<token>[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$\']',) [PID:23763:Thread-3]
Traceback (most recent call last):
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/celery/app/trace.py"", line 382, in trace_task
    R = retval = fun(*args, **kwargs)
  File ""/home/admin/Documents/Git/salor_server/saleor/saleor/account/emails.py"", line 25, in send_password_reset_email
    context=ctx)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/templated_email/__init__.py"", line 70, in send_templated_mail
    headers=headers, create_link=create_link, **kwargs)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/templated_email/backends/vanilla_django.py"", line 258, in send
    create_link=create_link)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/templated_email/backends/vanilla_django.py"", line 134, in get_email_message
    template_suffix or file_extension)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/templated_email/backends/vanilla_django.py"", line 106, in _render_email
    response[part] = render_block_to_string(full_template_names, part, render_context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/render_block/base.py"", line 39, in render_block_to_string
    return django_render_block(t, block_name, context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/render_block/django.py"", line 27, in django_render_block
    return _render_template_block(template, block_name, context_instance)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/render_block/django.py"", line 70, in _render_template_block
    return _render_template_block_nodelist(template.nodelist, block_name, context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/render_block/django.py"", line 85, in _render_template_block_nodelist
    return node.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/loader_tags.py"", line 62, in render
    result = block.nodelist.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/base.py"", line 937, in render
    bit = node.render_annotated(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/base.py"", line 904, in render_annotated
    return self.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/loader_tags.py"", line 188, in render
    return template.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/base.py"", line 173, in render
    return self._render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/base.py"", line 937, in render
    bit = node.render_annotated(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/base.py"", line 904, in render_annotated
    return self.render(context)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/template/defaulttags.py"", line 442, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/urls/base.py"", line 90, in reverse
    return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
  File ""/home/admin/Documents/Git/saleor/env/lib/python3.6/site-packages/django/urls/resolvers.py"", line 622, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'reset-password-confirm' with keyword arguments '{'uidb64': '<< MISSING VARIABLE ""uid"" >>', 'token': '<< MISSING VARIABLE ""token"" >>'}' not found. 1 pattern(s) tried: ['en/account/password/reset/(?P<uidb64>[0-9A-Za-z_\\-]+)/(?P<token>[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$']

Browser:
{
  ""data"": {
    ""customerPasswordReset"": null
  }
}

How to fix:
Then, I changed send_password_reset_email to:
def send_password_reset_email(context, recipient):
    reset_url = build_absolute_uri(
        reverse(
            'account:reset-password-confirm',
            kwargs={
                'uidb64': context['uid'],
                'token': context['token']}))
    ctx = get_email_base_context()
    ctx['reset_url'] = reset_url
    ctx['uid'] = context['uid']
    ctx['token'] = context['token']
    ctx['protocol'] = 'https'
    print(ctx)
    send_templated_mail(
        template_name='account/password_reset',
        from_email=settings.DEFAULT_FROM_EMAIL,
        recipient_list=[recipient],
        context=ctx)

Finally, I got email correctly and error didn't show up again.

So, I think, the problem is: send_templated_mail request uid token and protocol variable. But get_email_base_context() didn't provide them.
"
3334,mirumee,saleor,7,closed,3541,2,https://api.github.com/repos/mirumee/saleor/issues/3541/comments,https://github.com/mirumee/saleor/issues/3541,[],AttributeError: module 'django_filters.widgets' has no attribute 'DateRangeWidget',"### What I'm trying to achieve
Installation of Saleor on Windows 10.

### Steps to reproduce the problem
1. Run python manage.py migrate 

### What I expected to happen
Migrate application data to database.

I've tried running python -m pip install -r requirments.txt to intstall all of the necessary packages. Unfortunately, this does not istall all of the packages. I have been running python manage.py migrate over and over for a while and have been installing the missing packages manually. I would like to know how I will be able to install the missing attribute 'DateRangeWidget' using pip. I can not find a command. Or any other fix that will allow me to continue installing these packages manually. 

**System information**
Operating system: Windows 10
Browser: Chrome
"
3350,mirumee,saleor,8,closed,3521,3,https://api.github.com/repos/mirumee/saleor/issues/3521/comments,https://github.com/mirumee/saleor/issues/3521,[],ERROR django.security.DisallowedHost Invalid HTTP_HOST header: 'localhost:8000'. You may need to add 'localhost' to ALLOWED_HOSTS.,"### What I'm trying to achieve
Deploy docker local and prepare for deploy on digital ocean centos

### Steps to reproduce the problem
1. docker-compose up
open http://localhost:8000

### What I expected to happen
see the page running in docker on http://127.0.0.1:8000/

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

Request Method: | GET
-- | --
http://127.0.0.1:8000/
2.1.4
ProgrammingError
relation ""django_site"" does not exist LINE 1: ...""django_site"".""domain"", ""django_site"".""name"" FROM ""django_si...                                                              ^
/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py in _execute, line 85
/usr/local/bin/python
3.6.8
['/app',  '/usr/local/lib/python36.zip',  '/usr/local/lib/python3.6',  '/usr/local/lib/python3.6/lib-dynload',  '/usr/local/lib/python3.6/site-packages',  '/app']
do, 27 Dec 2018 22:03:08 +0100

Request Method: | GET
-- | --
http://127.0.0.1:8000/
2.1.4
ProgrammingError
relation ""django_site"" does not exist LINE 1: ...""django_site"".""domain"", ""django_site"".""name"" FROM ""django_si...                                                              ^
/usr/local/lib/python3.6/site-packages/django/db/backends/utils.py in _execute, line 85
/usr/local/bin/python
3.6.8
['/app',  '/usr/local/lib/python36.zip',  '/usr/local/lib/python3.6',  '/usr/local/lib/python3.6/lib-dynload',  '/usr/local/lib/python3.6/site-packages',  '/app']
do, 27 Dec 2018 22:03:08 +0100


http://0.0.0.0:8000


Request Method: | GET
-- | --
http://0.0.0.0:8000/
2.1.4
DisallowedHost
Invalid HTTP_HOST header: '0.0.0.0:8000'. You may need to add '0.0.0.0' to ALLOWED_HOSTS.
/usr/local/lib/python3.6/site-packages/django/http/request.py in get_host, line 106
/usr/local/bin/python
3.6.8
['/app',  '/usr/local/lib/python36.zip',  '/usr/local/lib/python3.6',  '/usr/local/lib/python3.6/lib-dynload',  '/usr/local/lib/python3.6/site-packages',  '/app']
do, 27 Dec 2018 22:09:12 +0100





**System information**
Operating system: 
Browser:"
3354,mirumee,saleor,8,closed,3517,3,https://api.github.com/repos/mirumee/saleor/issues/3517/comments,https://github.com/mirumee/saleor/issues/3517,[],npm run build-schema not working,"### What I'm trying to achieve

I am adapting your software to my current needs (multi-shops, multi-vendors). To do so, I need to upgrade your graphql api. I just started working on this project, so I did some minor changes to the graphql api in order to test its generation out. After applying my minor changes, I did

### Steps to reproduce the problem
1. Run

```
npm run build-schema
``` 

### What I expected to happen

I expected an updated graphql schema to be located under `saleor/graphql/schema.graphql`.  Instead, I get this:

```
Unknown command: 'get_graphql_schema'. Did you mean graphql_schema?
Type 'manage.py help' for usage.
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! saleor@0.0.0 build-schema: `python manage.py get_graphql_schema > saleor/graphql/schema.graphql`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the saleor@0.0.0 build-schema script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\mihl\AppData\Roaming\npm-cache\_logs\2018-12-27T09_09_50_047Z-debug.log
```
And indeed, if I run

```
python manage.py help
```

I don't see `get_graphql_schema` in the list. Instead I see `graphql_schema`. It seems like that command doesn't work the way it used to in previous saleor releases.

**System information**
Operating system: Windows
Browser: N/A
Saleor release: 2.1.0
graphene-django: 2.2.0
graphene: 2.1.3
"
3355,mirumee,saleor,8,closed,3516,2,https://api.github.com/repos/mirumee/saleor/issues/3516/comments,https://github.com/mirumee/saleor/issues/3516,[],Issue Preparing Database,"I am trying to setup Saleor on my machine. I have created a psql user with superuser status, a psql database and I am now trying to prepare the database using the `python manage.py migrate` command (step 7 of installation). 

Here is the error I get when running the command. 
```
django.db.utils.ProgrammingError: permission denied to create extension ""hstore""
HINT:  Must be superuser to create this extension.

```
Any insights re: how to fix this problem are greatly appreciated.


**System information**
Operating system: Mac OSX 10.12.6
"
3359,mirumee,saleor,8,closed,3511,3,https://api.github.com/repos/mirumee/saleor/issues/3511/comments,https://github.com/mirumee/saleor/issues/3511,[],PopulateDB currency issue,"### What I'm trying to achieve

To run populatedb after running migrations.

### Steps to reproduce the problem

1. `python manage.py migrate` (WORKS - thanks to [fix](https://github.com/mirumee/saleor/pull/3506))
2. `python manage.py populatedb`

Then an error is generated as follows:

```text
Shipping Zone: Europe
Shipping Zone: Oceania
Shipping Zone: Asia
Shipping Zone: Americas
Shipping Zone: Africa
Traceback (most recent call last):
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 502, in update_or_create
    obj = self.select_for_update().get(**lookup)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 399, in get
    self.model._meta.object_name
saleor.product.models.DoesNotExist: Product matching query does not exist.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/base.py"", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/base.py"", line 353, in execute
    output = self.handle(*args, **options)
  File ""/app/saleor/core/management/commands/populatedb.py"", line 83, in handle
    create_products_by_schema(self.placeholders_dir, create_images)
  File ""/app/saleor/core/utils/random_data.py"", line 227, in create_products_by_schema
    placeholder_dir=placeholder_dir, create_images=create_images)
  File ""/app/saleor/core/utils/random_data.py"", line 187, in create_products
    product, _ = Product.objects.update_or_create(pk=pk, defaults=defaults)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/manager.py"", line 82, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 506, in update_or_create
    obj, created = self._create_object_from_params(lookup, params, lock=True)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 522, in _create_object_from_params
    obj = self.create(**params)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 413, in create
    obj.save(force_insert=True, using=self.db)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/base.py"", line 718, in save
    force_update=force_update, update_fields=update_fields)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/base.py"", line 748, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/base.py"", line 831, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/base.py"", line 869, in _do_insert
    using=using, raw=raw)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/manager.py"", line 82, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/query.py"", line 1136, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1288, in execute_sql
    for sql, params in self.as_sql():
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1241, in as_sql
    for obj in self.query.objs
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1241, in <listcomp>
    for obj in self.query.objs
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1240, in <listcomp>
    [self.prepare_value(field, self.pre_save_val(field, obj)) for field in fields]
  File ""/usr/local/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1182, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File ""/usr/local/lib/python3.6/site-packages/django_prices/models.py"", line 42, in get_db_prep_save
    value = self.get_prep_value(value)
  File ""/usr/local/lib/python3.6/site-packages/django_prices/models.py"", line 36, in get_prep_value
    value = self.to_python(value)
  File ""/usr/local/lib/python3.6/site-packages/django_prices/models.py"", line 28, in to_python
    value.currency, self.currency))
ValueError: Invalid currency: 'USD' (expected 'EUR')
```

### What I expected to happen

`python manage.py populatedb` to run to completion

### Extra information:

Seems to happen when the currency is not USD in env.

"
3384,mirumee,saleor,8,closed,3480,2,https://api.github.com/repos/mirumee/saleor/issues/3480/comments,https://github.com/mirumee/saleor/pull/3480,[],Update Pipfile.lock,"Build on CircleCI are failing due to invalid `Pipfile.lock`:

```
Step 7/35 : RUN pipenv install --system --deploy --dev
 ---> Running in aa180ec5354a
Installing dependencies from Pipfile.lock (0c2c67)…
An error occurred while installing pylint-django==2.0.4 --hash=sha256:f2899a0f33c9bede0c9912ade9a57bbfc4b400b4912c59bea055353f9d2ff56f! Will try again.
Installing initially failed dependencies…
[pipenv.exceptions.InstallError]:   File ""/usr/local/lib/python3.6/site-packages/pipenv/core.py"", line 1874, in do_install
[pipenv.exceptions.InstallError]:       keep_outdated=keep_outdated
[pipenv.exceptions.InstallError]:   File ""/usr/local/lib/python3.6/site-packages/pipenv/core.py"", line 1253, in do_init
[pipenv.exceptions.InstallError]:       pypi_mirror=pypi_mirror,
[pipenv.exceptions.InstallError]:   File ""/usr/local/lib/python3.6/site-packages/pipenv/core.py"", line 859, in do_install_dependencies
[pipenv.exceptions.InstallError]:       retry_list, procs, failed_deps_queue, requirements_dir, **install_kwargs
[pipenv.exceptions.InstallError]:   File ""/usr/local/lib/python3.6/site-packages/pipenv/core.py"", line 763, in batch_install
[pipenv.exceptions.InstallError]:       _cleanup_procs(procs, not blocking, failed_deps_queue, retry=retry)
[pipenv.exceptions.InstallError]:   File ""/usr/local/lib/python3.6/site-packages/pipenv/core.py"", line 681, in _cleanup_procs
[pipenv.exceptions.InstallError]:       raise exceptions.InstallError(c.dep.name, extra=err_lines)
[pipenv.exceptions.InstallError]: ['Looking in indexes: https://pypi.python.org/simple', 'Collecting pylint-django==2.0.4 (from -r /tmp/pipenv-juhbkhhq-requirements/pipenv-ol7u76or-requirement.txt (line 1))', '  Using cached https://files.pythonhosted.org/packages/c7/15/27cecc8048956a55afcf4971e38bad83493b2c183ac5be74eadaea3494e1/pylint_django-2.0.4-py3-none-any.whl']
[pipenv.exceptions.InstallError]: ['THESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully; someone may have tampered with them.', '    pylint-django==2.0.4 from https://files.pythonhosted.org/packages/c7/15/27cecc8048956a55afcf4971e38bad83493b2c183ac5be74eadaea3494e1/pylint_django-2.0.4-py3-none-any.whl#sha256=fe2bcf0debeb5ef3f8350fccce5abf2c91fd036acdb55737fe2b6ce09b9240d3 (from -r /tmp/pipenv-juhbkhhq-requirements/pipenv-ol7u76or-requirement.txt (line 1)):', '        Expected sha256 f2899a0f33c9bede0c9912ade9a57bbfc4b400b4912c59bea055353f9d2ff56f', '             Got        fe2bcf0debeb5ef3f8350fccce5abf2c91fd036acdb55737fe2b6ce09b9240d3']
ERROR: ERROR: Package installation failed...
```

I've updated the `pylint-django` package. Locally it works, I hope it also fixes the issue on CI.

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [x] Database migration files are up to date.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [x] GraphQL schema and type definitions are up to date.
1. [x] Changes are mentioned in the changelog.
"
3493,mirumee,saleor,9,closed,3357,4,https://api.github.com/repos/mirumee/saleor/issues/3357/comments,https://github.com/mirumee/saleor/issues/3357,[],Images aren't found in startproject,"### What I'm trying to achieve
Have the Saleor template just as it is

### Steps to reproduce the problem
1. Follow the tutorial to install Saleor

### What I expected to happen
Saleor to be created as per the demo

### Explanation

Hi guys,  just started a fresh install of Saleor in my system.

Everything works fine, except some of the images.

Here's the output that I got.

WARNING django.server ""GET /static/dashboard/images/logo.svg HTTP/1.1"" 404 1813 [PID:7264:Thread-31]
WARNING django.server ""GET /static/dashboard/images/account-circle.svg HTTP/1.1"" 404 1843 [PID:7264:Thread-32]
WARNING django.server ""GET /static/dashboard/images/logo.svg HTTP/1.1"" 404 1813 [PID:7264:Thread-31]
WARNING django.server ""GET /static/dashboard/images/account-circle.svg HTTP/1.1"" 404 1843 [PID:7264:Thread-32]
WARNING django.server ""GET /static/dashboard/images/mobile-menu.svg HTTP/1.1"" 404 1834 [PID:7264:Thread-33]
WARNING django.server ""GET /static/dashboard/images/mobile-menu.svg HTTP/1.1"" 404 1834 [PID:7264:Thread-33]
WARNING django.server ""GET /static/dashboard/images/account-circle.svg HTTP/1.1"" 404 1843 [PID:7264:Thread-32]
WARNING django.server ""GET /static/dashboard/images/logo.svg HTTP/1.1"" 404 1813 [PID:7264:Thread-31]
WARNING django.server ""GET /static/dashboard/images/mobile-menu.svg HTTP/1.1"" 404 1834 [PID:7264:Thread-33]
WARNING django.server ""GET /static/dashboard/images/search.svg HTTP/1.1"" 404 1819 [PID:7264:Thread-34]
WARNING django.server ""GET /static/dashboard/images/search.svg HTTP/1.1"" 404 1819 [PID:7264:Thread-34]
WARNING django.server ""GET /static/dashboard/images/search.svg HTTP/1.1"" 404 1819 [PID:7264:Thread-34]

**Please note that at this moment, i've not touched anything in the code. This is running directly off a fresh install. I thought it might have been an error whilst installing, so I tried it again. No luck on the second try either.**

**System information**
Operating system: Windows 10 with Pycharm
Browser: Chrome
"
3496,mirumee,saleor,9,closed,3354,3,https://api.github.com/repos/mirumee/saleor/issues/3354/comments,https://github.com/mirumee/saleor/issues/3354,[],Elastic Search missing root certificates,"### What I'm trying to achieve
I'm trying to integrate elastic search into a saleor app on Heroku. Following the instructions on the saleor docs, I ran `heroku run python manage.py search_index --create`.

### Steps to reproduce the problem
1. Deploy a saleor app on heroku
2. Run `heroku addons:create bonsai:sandbox-6 --version=5.4`
3. Run `heroku run python manage.py search_index --create`

### What I expected to happen
I expected the search index to be created.

### Screenshots
```
heroku run python manage.py search_index --create -a
Running python manage.py search_index --create on ⬢ saleor-tmp-9fc86b... up, run.5535 (Free)
Creating index 'users'
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py"", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py"", line 353, in execute
    output = self.handle(*args, **options)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/management/commands/search_index.py"", line 128, in handle
    self._create(models, options)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/management/commands/search_index.py"", line 84, in _create
    index.create()
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch_dsl/index.py"", line 203, in create
    self.connection.indices.create(index=self._name, body=self.to_dict(), **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch_dsl/index.py"", line 41, in _get_connection
    return connections.get_connection(self._using)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch_dsl/connections.py"", line 91, in get_connection
    return self.create_connection(alias, **self._kwargs[alias])
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch_dsl/connections.py"", line 66, in create_connection
    conn = self._conns[alias] = Elasticsearch(**kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/client/__init__.py"", line 170, in __init__
    self.transport = transport_class(_normalize_hosts(hosts), **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/transport.py"", line 108, in __init__
    self.set_connections(hosts)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/transport.py"", line 157, in set_connections
    connections = list(zip(connections, hosts))
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/transport.py"", line 154, in _create_connection
    return self.connection_class(**kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/connection/http_urllib3.py"", line 91, in __init__
    raise ImproperlyConfigured(""Root certificates are missing for certificate ""
elasticsearch.exceptions.ImproperlyConfigured: Root certificates are missing for certificate validation. Either pass them in using the ca_certs parameter or install certifi to use it automatically.
```

### Guesses
This appears to be a bug in elastic search (https://github.com/elastic/elasticsearch-py/issues/669), but it would seem other saleor users have been using elastic search successfully. Perhaps I missed a step?
Additionally, the error says to install `certify`, but I already have `certify` in my pipfile lock, so it's definitely installed.
"
3507,mirumee,saleor,9,closed,3342,23,https://api.github.com/repos/mirumee/saleor/issues/3342/comments,https://github.com/mirumee/saleor/issues/3342,[],Can't Get Saleor To Start In Windows Anaconda,"### What I'm trying to achieve
…
Clone from own repo (started the project in Mac) and run it on my Windows computer by cloning the repo on Github

### Steps to reproduce the problem
1. Cloned Repo (fresh installation of Saleor) via Anaconda Prompt on Windows 10
2. Python manage.py runserver in Anaconda Prompt

### What I expected to happen
…
Project to start as per usual, as per my Mac machine

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

`(DjangoEnv) C:\Users\Owner\Desktop\Django_Projects\urbanradder>python manage.py runserver                                 Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x0000026A7A84F840>                   Traceback (most recent call last):                                                                                          File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\utils\autoreload.py"", line 225, in wrapper           fn(*args, **kwargs)                                                                                                     File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\core\management\commands\runserver.py"", line 109, in inner_run                                                                                                                 autoreload.raise_last_exception()                                                                                       File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\utils\autoreload.py"", line 248, in raise_last_exception                                                                                                                        raise _exception[1]                                                                                                     File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\core\management\__init__.py"", line 337, in execute                                                                                                                             autoreload.check_errors(django.setup)()                                                                                 File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\utils\autoreload.py"", line 225, in wrapper           fn(*args, **kwargs)                                                                                                     File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\__init__.py"", line 24, in setup                      apps.populate(settings.INSTALLED_APPS)                                                                                  File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\apps\registry.py"", line 89, in populate              app_config = AppConfig.create(entry)                                                                                    File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\apps\config.py"", line 116, in create                 mod = import_module(mod_path)                                                                                           File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\importlib\__init__.py"", line 126, in import_module                        return _bootstrap._gcd_import(name[level:], package, level)                                                             File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import                                                            File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load                                                         File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked                                                File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked                                                         File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module                                                   File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed                                              File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\contrib\postgres\apps.py"", line 8, in <module>       from .signals import register_type_handlers                                                                             File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\django\contrib\postgres\signals.py"", line 3, in <module>                                                                                                                              import psycopg2                                                                                                         File ""C:\Users\Owner\Anaconda3\envs\DjangoEnv\lib\site-packages\psycopg2\__init__.py"", line 50, in <module>                 from psycopg2._psycopg import (                     # noqa                                                            ModuleNotFoundError: No module named 'psycopg2._psycopg'                   `

**System information**
Operating system: Windows 10, 64 bit, with Anaconda installed. Python 3.6.5, Django 2.1.2, 'final', 0
Browser: Chrome

**Additional Information**

Hi guys, tried to clone my repo to local drive and ran it and I was surprised that it did not load on my Windows machine.

Please help, thank you so much!
"
3517,mirumee,saleor,9,closed,3332,13,https://api.github.com/repos/mirumee/saleor/issues/3332/comments,https://github.com/mirumee/saleor/issues/3332,[],Unable To Start Server On Second Try,"### What I'm trying to achieve
…

Start Saleor server on second try.

### Steps to reproduce the problem
1. cd/saleor
2. python manage.py runserver

### What I expected to happen
…server starts as per first run

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

**System information**
Operating system: Mac Mojave
Browser: Chrome

### Details

Hi guys, it's funny why this is happening, but I can run Saleor on the browser loading everything as per normal (beautiful store by the way).

However, as soon as I close my terminal, and try to start my server again, it doesn't load at all.

I'm really confused and I hope you guys can help me out.

Here's the Traceback:

(DjangoEnv) johnchen@JMA:~/Desktop/Projects$ cd saleor/
(DjangoEnv) johnchen@JMA:~/Desktop/Projects/saleor$ python manage.py runserver
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/base.py"", line 316, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/commands/runserver.py"", line 60, in execute
    super().execute(*args, **options)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/base.py"", line 353, in execute
    output = self.handle(*args, **options)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/core/management/commands/runserver.py"", line 67, in handle
    if not settings.DEBUG and not settings.ALLOWED_HOSTS:
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/conf/__init__.py"", line 57, in __getattr__
    self._setup(name)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/conf/__init__.py"", line 44, in _setup
    self._wrapped = Settings(settings_module)
  File ""/Users/johnchen/Desktop/Projects/DjangoEnv/lib/python3.7/site-packages/django/conf/__init__.py"", line 126, in __init__
    raise ImproperlyConfigured(""The SECRET_KEY setting must not be empty."")

##Additional Notes

Nothing has been edited at all - everything is a fresh install off Saleor's instructions for MacOs.

I'm really confused, because if it's running well on the **first** try, why isn't it working on the second (and above) try?

Please help, thank you so much in advance!
"
3520,mirumee,saleor,9,closed,3327,9,https://api.github.com/repos/mirumee/saleor/issues/3327/comments,https://github.com/mirumee/saleor/pull/3327,[],Only enable graphql-playground in DEBUG mode,"- Enable graphql-playground in production mode has security issues such as it has inline-scripts which breaks CSP security. This PR only enable graphql-playground in DEBUG mode
- Default graphene-django has support for GET method such as ```query``` and ```variable``` query parameters. This PR adds this kind of support
- Slash of graphql api url is removed as shown in the example of ```graphene-python```, then ```graphql``` and ```graphql/``` can both be accessed by POST method.


### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
"
3530,mirumee,saleor,9,closed,3313,19,https://api.github.com/repos/mirumee/saleor/issues/3313/comments,https://github.com/mirumee/saleor/issues/3313,[],npm install error,"Hi there, I've just finished installing the requirements but I leftout uwsgi package as it always fails with a missing module but I read somewhere that it has issues on win10 and it isn't necessary for development purposes.

I use anaconda for my development environments with python 3.6.6.... Moving on to invoking npm install, I'm getting an error :
$ npm warn tar ENOENT no such file or directory on all node modules.

Actually prior to this I was getting 
$ npm warn tarball tarball data for <package-name> seems to be corrupt by invoking npm install.

Where am I going wrong, is it I'm skipping $npm init command initially before $npm install but I see it as unnecessary as the package.json file exists in the root.

I'm sorry for the trouble but I'm new to django and have been trying django-shop but it seems like a ghost town as you barely get support of some kind. Please help.   "
3533,mirumee,saleor,9,closed,3310,1,https://api.github.com/repos/mirumee/saleor/issues/3310/comments,https://github.com/mirumee/saleor/pull/3310,[],Remove runtime warning when product has discount,"It is acutally not a bug. It happens when product has discounts.

```
.local/share/virtualenvs/saleor-Ar4mgESs/lib/python3.6/site-packages/django/template/defaulttags.py:308: RuntimeWarning: `bool(taxed_money)` will always evaluate to True, consider replacing the test with explicit `if taxed_money is None` or `if taxed_money.gross`.
  if match:
```

It is because ```availability.discount``` can be ```None``` or ```TaxedMoney``` which is returned in ```get_availability```, but the templates doesn't know it.

Anyway, this PR removes the annoying warning.

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
"
3578,mirumee,saleor,10,closed,3259,9,https://api.github.com/repos/mirumee/saleor/issues/3259/comments,https://github.com/mirumee/saleor/issues/3259,[],Webpage Error at first level,"### What I'm trying to achieve
I have done setup for saleor on Google Cloud Centos7 linux instance. I followed all instructions for installation of saleor  from https://docs.getsaleor.com/en/latest/gettingstarted/installation-linux.html. 
Now I run the server on console.

(saleorenv) [bete-2@e-commerce saleor]$ sudo python3.6 manage.py runserver 0.0.0.0:80
Performing system checks...

System check identified no issues (0 silenced).
November 09, 2018 - 02:00:49
Django version 2.1.3, using settings 'saleor.settings'
Starting development server at http://0.0.0.0:80/
Quit the server with CONTROL-C.


### Steps to reproduce the problem
1. open www.jakheera.com 
2. you can see 

Request Method: | GET
-- | --
http://www.jakheera.com/en/
2.1.3
**RelatedObjectDoesNotExist**
**Site has no settings.**
/usr/lib64/python3.6/site-packages/django/db/models/fields/related_descriptors.py in __get__, line 414
/bin/python3.6
3.6.5
['/home/simpy.sri/saleor/saleor',  '/usr/lib64/python36.zip',  '/usr/lib64/python3.6',  '/usr/lib64/python3.6/lib-dynload',  '/usr/lib64/python3.6/site-packages',  '/usr/lib/python3.6/site-packages',  '/home/simpy.sri/saleor/saleor']
Fri, 9 Nov 2018 02:00:59 -0600

 

### What I expected to happen
… Default Home page

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->
 **pls visit www.jakheera.com for viewing the bug.**

**System information**
Operating system: CentOS7
Browser: Chrome 67
"
3639,mirumee,saleor,10,closed,3193,16,https://api.github.com/repos/mirumee/saleor/issues/3193/comments,https://github.com/mirumee/saleor/issues/3193,[],operational Error ,"when i was installing the saleor project in my windows 10 than i have a issue with "" python manage.py  migrate "" command on my powershell , please give me the right solution . thanks 
the powershell text are as follows -
File ""F:\myprojects\lib\site-packages\psycopg2\__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  password authentication failed for user ""saleor"""
3694,mirumee,saleor,11,closed,3130,1,https://api.github.com/repos/mirumee/saleor/issues/3130/comments,https://github.com/mirumee/saleor/issues/3130,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Using of wrong Money constructor on displaying order info in dashboard,"### What I'm trying to achieve
I've tried to add refunds / captures (using dummy provider's preauth. payment)

### Steps to reproduce the problem
1. Create payment using dummy provider
2. Preauth. payment
3. Make payment refunds and captures in dashboard
4. Open order in dashboard

### What I expected to happen
I expected to see order page in dashboard, but I've got `conversion from dict to Decimal is not supported` on order's page
I guess the root of the problem is (from Django debugger information):
Line: `/app/saleor/order/__init__.py : 134-135` in display_order_event

Code:
```
amount = Money(
            amount=params['amount'], currency=settings.DEFAULT_CURRENCY) 
```

Local vars:
```
event_type | 'captured'
order_event | OrderEvent(type='captured', user=<User: ***@***>)
params | {'amount': {'_type': 'Money', 'amount': '500', 'currency': 'USD'}}
```

Possible solution:
```
amount = Money(
            amount=params['amount']['amount'], currency=params['amount']['currency']) 
```

**System information**
Operating system: ubuntu 16.04
Browser: chrome
"
3734,mirumee,saleor,11,closed,3085,4,https://api.github.com/repos/mirumee/saleor/issues/3085/comments,https://github.com/mirumee/saleor/issues/3085,[],Facebook login - TypeError: 'username' is an invalid keyword argument for this function ,"I'm trying to login thru facebook login, and I'm getting TypeError: 'username' is an invalid keyword argument for this function error. 

[Wed Oct 10 08:54:42.115137 2018] [wsgi:error] [pid 14689] ERROR django.request Internal Server Error: /complete/facebook/ [PID:14689:Dummy-1]
[Wed Oct 10 08:54:42.115272 2018] [wsgi:error] [pid 14689] Traceback (most recent call last):
[Wed Oct 10 08:54:42.115276 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
[Wed Oct 10 08:54:42.115279 2018] [wsgi:error] [pid 14689]     response = get_response(request)
[Wed Oct 10 08:54:42.115281 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
[Wed Oct 10 08:54:42.115283 2018] [wsgi:error] [pid 14689]     response = self.process_exception_by_middleware(e, request)
[Wed Oct 10 08:54:42.115285 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
[Wed Oct 10 08:54:42.115287 2018] [wsgi:error] [pid 14689]     response = wrapped_callback(request, *callback_args, **callback_kwargs)
[Wed Oct 10 08:54:42.115289 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/views/decorators/cache.py"", line 57, in _wrapped_view_func
[Wed Oct 10 08:54:42.115291 2018] [wsgi:error] [pid 14689]     response = view_func(request, *args, **kwargs)
[Wed Oct 10 08:54:42.115293 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
[Wed Oct 10 08:54:42.115308 2018] [wsgi:error] [pid 14689]     return view_func(*args, **kwargs)
[Wed Oct 10 08:54:42.115310 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_django/utils.py"", line 49, in wrapper
[Wed Oct 10 08:54:42.115312 2018] [wsgi:error] [pid 14689]     return func(request, backend, *args, **kwargs)
[Wed Oct 10 08:54:42.115314 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_django/views.py"", line 33, in complete
[Wed Oct 10 08:54:42.115316 2018] [wsgi:error] [pid 14689]     *args, **kwargs)
[Wed Oct 10 08:54:42.115318 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/actions.py"", line 41, in do_complete
[Wed Oct 10 08:54:42.115320 2018] [wsgi:error] [pid 14689]     user = backend.complete(user=user, *args, **kwargs)
[Wed Oct 10 08:54:42.115321 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/base.py"", line 40, in complete
[Wed Oct 10 08:54:42.115323 2018] [wsgi:error] [pid 14689]     return self.auth_complete(*args, **kwargs)
[Wed Oct 10 08:54:42.115325 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/utils.py"", line 252, in wrapper
[Wed Oct 10 08:54:42.115327 2018] [wsgi:error] [pid 14689]     return func(*args, **kwargs)
[Wed Oct 10 08:54:42.115329 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/facebook.py"", line 111, in auth_complete
[Wed Oct 10 08:54:42.115330 2018] [wsgi:error] [pid 14689]     return self.do_auth(access_token, response, *args, **kwargs)
[Wed Oct 10 08:54:42.115332 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/facebook.py"", line 153, in do_auth
[Wed Oct 10 08:54:42.115334 2018] [wsgi:error] [pid 14689]     return self.strategy.authenticate(*args, **kwargs)
[Wed Oct 10 08:54:42.115336 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_django/strategy.py"", line 107, in authenticate
[Wed Oct 10 08:54:42.115338 2018] [wsgi:error] [pid 14689]     return authenticate(*args, **kwargs)
[Wed Oct 10 08:54:42.115340 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/contrib/auth/__init__.py"", line 70, in authenticate
[Wed Oct 10 08:54:42.115342 2018] [wsgi:error] [pid 14689]     user = _authenticate_with_backend(backend, backend_path, request, credentials)
[Wed Oct 10 08:54:42.115343 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/contrib/auth/__init__.py"", line 115, in _authenticate_with_backend
[Wed Oct 10 08:54:42.115451 2018] [wsgi:error] [pid 14689]     return backend.authenticate(*args, **credentials)
[Wed Oct 10 08:54:42.115457 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/base.py"", line 80, in authenticate
[Wed Oct 10 08:54:42.115459 2018] [wsgi:error] [pid 14689]     return self.pipeline(pipeline, *args, **kwargs)
[Wed Oct 10 08:54:42.115461 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/base.py"", line 83, in pipeline
[Wed Oct 10 08:54:42.115463 2018] [wsgi:error] [pid 14689]     out = self.run_pipeline(pipeline, pipeline_index, *args, **kwargs)
[Wed Oct 10 08:54:42.115464 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/backends/base.py"", line 113, in run_pipeline
[Wed Oct 10 08:54:42.115466 2018] [wsgi:error] [pid 14689]     result = func(*args, **out) or {}
[Wed Oct 10 08:54:42.115468 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/pipeline/user.py"", line 75, in create_user
[Wed Oct 10 08:54:42.115475 2018] [wsgi:error] [pid 14689]     'user': strategy.create_user(**fields)
[Wed Oct 10 08:54:42.115477 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_core/strategy.py"", line 53, in create_user
[Wed Oct 10 08:54:42.115479 2018] [wsgi:error] [pid 14689]     return self.storage.user.create_user(*args, **kwargs)
[Wed Oct 10 08:54:42.115480 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/social_django/storage.py"", line 70, in create_user
[Wed Oct 10 08:54:42.115482 2018] [wsgi:error] [pid 14689]     user = cls.user_model().objects.create_user(*args, **kwargs)
[Wed Oct 10 08:54:42.115484 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/ampli-shop/saleor/userprofile/models.py"", line 79, in create_user
[Wed Oct 10 08:54:42.115486 2018] [wsgi:error] [pid 14689]     **extra_fields)
[Wed Oct 10 08:54:42.115488 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/contrib/auth/base_user.py"", line 68, in __init__
[Wed Oct 10 08:54:42.115490 2018] [wsgi:error] [pid 14689]     super(AbstractBaseUser, self).__init__(*args, **kwargs)
[Wed Oct 10 08:54:42.115491 2018] [wsgi:error] [pid 14689]   File ""/home/invena/invena-sklep/venv/lib/python3.5/site-packages/django/db/models/base.py"", line 573, in __init__
[Wed Oct 10 08:54:42.115493 2018] [wsgi:error] [pid 14689]     raise TypeError(""'%s' is an invalid keyword argument for this function"" % list(kwargs)[0])
[Wed Oct 10 08:54:42.115497 2018] [wsgi:error] [pid 14689] TypeError: 'username' is an invalid keyword argument for this function
[Wed Oct 10 08:54:42.115504 2018] [wsgi:error] [pid 14689] 
"
3771,mirumee,saleor,12,closed,3044,5,https://api.github.com/repos/mirumee/saleor/issues/3044/comments,https://github.com/mirumee/saleor/pull/3044,[],Support latest django-graphql-jwt,"For making PR not so radical, https://github.com/mirumee/saleor/pull/2430 locked django-graphql-jwt to lower than 0.1.13.

In [django-graphql-jwt 0.1.13](https://github.com/flavors/django-graphql-jwt/blob/master/CHANGES.rst#0113), ```GraphQLJWTError``` is renamed to ```JSONWebTokenError``` and it does not provide backward compatibility.

Since it actually doesn't break compatibility with saleor and to have new features and fewer bugs, let's support the latest version and lock it to ```>=0.1.13```

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] GraphQL schema and type definitions are up to date.
"
3772,mirumee,saleor,12,closed,3043,10,https://api.github.com/repos/mirumee/saleor/issues/3043/comments,https://github.com/mirumee/saleor/pull/3043,[],Move django debug toolbar dependencies to requirements.txt,"I want to merge this change because...

close #3042 

Django debug toolbar dependencies are currently in `requirements_dev.txt` but they are required for the project to run and for the startup tutorial to work without issue. Moving packages to `requirements.txt`.

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] The packages install successfully.
1. [ ] The changes are tested.
"
3773,mirumee,saleor,12,closed,3042,7,https://api.github.com/repos/mirumee/saleor/issues/3042/comments,https://github.com/mirumee/saleor/issues/3042,"[{""default"": false, ""name"": ""in progress"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/in%20progress"", ""color"": ""2980B9"", ""node_id"": ""MDU6TGFiZWw4NTI1NDQyMQ=="", ""id"": 85254421}]",Django debug toolbar errors on 'python manage.py migrate' during installation,"### What I'm trying to achieve
I was using the installation instructions for Linux here: https://saleor.readthedocs.io/en/latest/gettingstarted/installation-linux.html

I got stuck at step 7 `python manage.py migrate` with the errors

`ImportError: No module named 'debug_toolbar'`
and
`ImportError: No module named 'ddt_request_history'`

### Steps to reproduce the problem
1. Follow the steps here: https://saleor.readthedocs.io/en/latest/gettingstarted/installation-linux.html
2. Bug occurs when running `python manage.py migrate`

### What I expected to happen
No errors on install.

### Proposed Solution

Add
```
django-debug-toolbar==1.10.1
django-debug-toolbar-request-history==0.0.9
```
to the `requirements.txt`

**System information**
Operating system: Ubuntu 16.04

If you'd like, I can submit a pull request for this issue.
"
3871,mirumee,saleor,13,closed,2939,0,https://api.github.com/repos/mirumee/saleor/issues/2939/comments,https://github.com/mirumee/saleor/issues/2939,[],Populatedb crash (not repeated bug),"```
INFO saleor.core.utils Created 6 thumbnails [PID:6092:MainThread]
INFO saleor.core.utils Created 6 thumbnails [PID:6092:MainThread]
INFO celery.app.trace Task saleor.product.thumbnails.create_product_thumbnails[cc4345f4-3e1b-4d03-9933-4ddb4f4e1a9e] succeeded in 0.15600000000267755s: None [PID:6092:MainThread]
Product: Adams-Frank (Books), 2 variant(s)
Sale: Happy card day!
Sale: Happy gas day!
Sale: Happy behind day!
Sale: Happy say day!
Sale: Happy easy day!
Shipping voucher already exists
Value voucher already exists
User: lori.adams@example.com
User: danielle.moore@example.com
User: michael.dean@example.com
User: tina.fisher@example.com
User: angela.jones@example.com
User: madison.fuller@example.com
User: sandra.chang@example.com
User: christine.brooks@example.com
User: patrick.gonzalez@example.com
User: colton.carroll@example.com
User: monica.ingram@example.com
User: edward.gray@example.com
User: robert.ward@example.com
User: amanda.lawson@example.com
User: kathy.jones@example.com
User: lauren.johnson@example.com
User: sheena.mitchell@example.com
User: tina.grant@example.com
User: rose.walker@example.com
User: john.faulkner@example.com
Order: #1
Order: #2
Order: #3
Order: #4
Order: #5
Order: #6
Order: #7
Traceback (most recent call last):
  File ""C:\Program Files\JetBrains\PyCharm 2018.2.2\helpers\pycharm\django_manage.py"", line 52, in <module>
    run_command()
  File ""C:\Program Files\JetBrains\PyCharm 2018.2.2\helpers\pycharm\django_manage.py"", line 46, in run_command
    run_module(manage_file, None, '__main__', True)
  File ""C:\Python3\lib\runpy.py"", line 205, in run_module
    return _run_module_code(code, init_globals, run_name, mod_spec)
  File ""C:\Python3\lib\runpy.py"", line 96, in _run_module_code
    mod_name, mod_spec, pkg_name, script_name)
  File ""C:\Python3\lib\runpy.py"", line 85, in _run_code
    exec(code, run_globals)
  File ""G:/Dev/tadshop/site\manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""G:\Dev\tadshop\site\venv\lib\site-packages\django\core\management\__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""G:\Dev\tadshop\site\venv\lib\site-packages\django\core\management\__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""G:\Dev\tadshop\site\venv\lib\site-packages\django\core\management\base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""G:\Dev\tadshop\site\venv\lib\site-packages\django\core\management\base.py"", line 335, in execute
    output = self.handle(*args, **options)
  File ""G:/Dev/tadshop/site\saleor\core\management\commands\populatedb.py"", line 66, in handle
    for msg in create_orders(20):
  File ""G:/Dev/tadshop/site\saleor\core\utils\random_data.py"", line 504, in create_orders
    order = create_fake_order(discounts, taxes)
  File ""G:/Dev/tadshop/site\saleor\core\utils\random_data.py"", line 470, in create_fake_order
    [line.get_total() for line in lines], order.shipping_price)
  File ""G:/Dev/tadshop/site\saleor\core\utils\random_data.py"", line 470, in <listcomp>
    [line.get_total() for line in lines], order.shipping_price)
  File ""G:/Dev/tadshop/site\saleor\core\utils\random_data.py"", line 427, in create_order_lines
    yield create_order_line(order, discounts, taxes)
  File ""G:/Dev/tadshop/site\saleor\core\utils\random_data.py"", line 410, in create_order_line
    variant = product.variants.all()[0]
  File ""G:\Dev\tadshop\site\venv\lib\site-packages\django\db\models\query.py"", line 307, in __getitem__
    return qs._result_cache[0]
IndexError: list index out of range

```"
3920,mirumee,saleor,13,closed,2886,18,https://api.github.com/repos/mirumee/saleor/issues/2886/comments,https://github.com/mirumee/saleor/issues/2886,[],STRICTNESS does not exist in my Django 2.1.1,"### What I'm trying to achieve
I'm trying to compile your code with my Django 2.1.1 and python 3.5.2 from the demo branch. In your graphql/core/filters you are trying to import STRICTNESS from Django_filters but that does not exist, probably deprecated.



### What I expected to happen
compilation fails.

### Screenshots

  File ""/usr/lib/python3.5/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 665, in exec_mdule
  File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed
  File ""/www/rbook.com/rbook/urls.py"", line 17, in <module>
    from .graphql.api import schema
  File ""/www/rbook.com/rbook/graphql/api.py"", line 14, in <module>
    from .menu.mutations import (
  File ""/www/rbook.com/rbook/graphql/menu/mutations.py"", line 7, in <module>
    from ..product.types import Category, Collection
  File ""/www/rbook.com/rbook/graphql/product/types.py"", line 13, in <module>
    from ..core.filters import DistinctFilterSet
  File ""/www/rbook.com/rbook/graphql/core/filters.py"", line 2, in <module>
    from django_filters.constants import STRICTNESS
ImportError: cannot import name 'STRICTNESS'"
3929,mirumee,saleor,13,closed,2875,4,https://api.github.com/repos/mirumee/saleor/issues/2875/comments,https://github.com/mirumee/saleor/issues/2875,[],Cant install a fresh copy of saleor if I remove the migrations,"### What I'm trying to achieve
I'm trying to install a fresh and independent copy of saleor. I removed all the files in the /migrations/ folders and tried to install 

I get the following error which is very weird, does it mean that you are tweaking the migration files in away that now your code is really dependent on them?


(venv) webdev@ip-172-31-38-116:/www/saleor$ python manage.py migrate
Operations to perform:
  Apply all migrations: auth, contenttypes, django_celery_results, django_prices_openexchangerates, django_prices_vatlayer, impersonate, sessions, sites, social_django
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0001_initial... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying django_celery_results.0001_initial... OK
  Applying django_prices_openexchangerates.0001_initial... OK
  Applying django_prices_openexchangerates.0002_auto_20160329_0702... OK
  Applying django_prices_openexchangerates.0003_auto_20161018_0707... OK
  Applying django_prices_openexchangerates.0004_auto_20170316_0944... OK
  Applying django_prices_vatlayer.0001_initial... OK
  Applying django_prices_vatlayer.0002_ratetypes... OK
  Applying django_prices_vatlayer.0003_auto_20180316_1053... OK
  Applying impersonate.0001_initial...Traceback (most recent call last):
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: relation ""account_user"" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/core/management/base.py"", line 335, in execute
    output = self.handle(*args, **options)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 200, in handle
    fake_initial=fake_initial,
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 117, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 147, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 106, in __exit__
    self.execute(sql)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 133, in execute
    cursor.execute(sql, params)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 100, in execute
    return super().execute(sql, params)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 68, in execute
    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 77, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/www/rbook.com/venv/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: relation ""account_user"" does not exist
"
4110,mirumee,saleor,15,closed,2675,4,https://api.github.com/repos/mirumee/saleor/issues/2675/comments,https://github.com/mirumee/saleor/issues/2675,[],404 page issue,"### What I'm trying to achieve
…
I want 404 page when page not found
### Steps to reproduce the problem
1. when i make debug=False give Server Error 500
2. when i enter wrong url give default django error

### What I expected to happen
… i want same functionality like https://demo.getsaleor.com/en/ return on page not found

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

**System information**
Operating system: 
Browser:
"
4153,mirumee,saleor,16,closed,2626,13,https://api.github.com/repos/mirumee/saleor/issues/2626/comments,https://github.com/mirumee/saleor/pull/2626,[],Add support to google cloud storage,"Adding support for google cloud storage through django-storages.

https://github.com/mirumee/saleor/issues/2533
Deploying saleor to google cloud with Kubernetes and having aws buckets for storage is an inconvenience. This is a draft to add support for google cloud storage.

In order to prevent some confusions in case both settings are present, AWS has precedence over Gcloud. Raising exception if both settings are defined could also be an option, but having the error on django runserver time can be an inconvenience.

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [x] Privileged views and APIs are guarded by proper permission checks.
1. [x] All visible strings are translated with proper context.
1. [x] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
"
4169,mirumee,saleor,16,closed,2610,0,https://api.github.com/repos/mirumee/saleor/issues/2610/comments,https://github.com/mirumee/saleor/issues/2610,[],[Debug][Cosmetics] Add Django Debug Toolbar - Mail Panel,"very nice batery for debug toolbar: https://github.com/scuml/django-mail-panel
simple install, and work fine (i too upgrade Django to 2.0.8, this version have some important security fixes)
![ac16f3aa10 1](https://user-images.githubusercontent.com/9638835/44228992-6586b880-a19f-11e8-96be-c41d42b61bf4.jpg)

"
4200,mirumee,saleor,16,closed,2571,0,https://api.github.com/repos/mirumee/saleor/issues/2571/comments,https://github.com/mirumee/saleor/issues/2571,[],django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.,"I have tried it over and over again to deploy the store using wsgi and now it is giving this error:

`[Thu Aug 16 08:40:41.928268 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564] mod_wsgi (pid=16492): Target WSGI script '/home/googleuser/test2/saleor/saleor/wsgi/__init__.py' cannot be loaded as Python module.
[Thu Aug 16 08:40:41.928533 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564] mod_wsgi (pid=16492): Exception occurred processing WSGI script '/home/googleuser/test2/saleor/saleor/wsgi/__init__.py'.
[Thu Aug 16 08:40:41.928798 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564] Traceback (most recent call last):
[Thu Aug 16 08:40:41.928896 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/saleor/saleor/wsgi/__init__.py"", line 21, in <module>
[Thu Aug 16 08:40:41.928937 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     application = get_wsgi_application()
[Thu Aug 16 08:40:41.928981 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/test/lib/python3.6/site-packages/django/core/wsgi.py"", line 12, in get_wsgi_application
[Thu Aug 16 08:40:41.929019 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     django.setup(set_prefix=False)
[Thu Aug 16 08:40:41.929060 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/test/lib/python3.6/site-packages/django/__init__.py"", line 19, in setup
[Thu Aug 16 08:40:41.929098 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     configure_logging(settings.LOGGING_CONFIG, settings.LOGGING)
[Thu Aug 16 08:40:41.929139 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/test/lib/python3.6/site-packages/django/conf/__init__.py"", line 56, in __getattr__
[Thu Aug 16 08:40:41.929177 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     self._setup(name)
[Thu Aug 16 08:40:41.929217 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/test/lib/python3.6/site-packages/django/conf/__init__.py"", line 43, in _setup
[Thu Aug 16 08:40:41.929251 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     self._wrapped = Settings(settings_module)
[Thu Aug 16 08:40:41.929287 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]   File ""/home/googleuser/test2/test/lib/python3.6/site-packages/django/conf/__init__.py"", line 125, in __init__
[Thu Aug 16 08:40:41.929320 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564]     raise ImproperlyConfigured(""The SECRET_KEY setting must not be empty."")
[Thu Aug 16 08:40:41.929370 2018] [wsgi:error] [pid 16492:tid 140523285112576] [remote 39.45.252.79:7564] django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.
`
I have exported the key but still it is not working. 
If anyone know the solution, please share?"
4203,mirumee,saleor,16,closed,2567,12,https://api.github.com/repos/mirumee/saleor/issues/2567/comments,https://github.com/mirumee/saleor/pull/2567,[],Payments refactoring,"Completly refactored the payments process.
- Django payments was dropped
- Payment process consists of Payment instances, which are storing the information about the price/billing information and Transactions, which are single actions performed on the Payment (eg. capture payment/authorize payment/void payment)

New payment approach is API-based.

close #2557 
close #2556 
close #3066 

## TODO:
- [x] Documentation for implementing new payment method
- [x] Adding Braintree payment gateway to the old checkout (or at least providing how-to guide)
- [ ] How-to-guide on adding a new payment gateway to the old checkout 
- [ ] Guide about using Braintree on a sandbox environment (it's tricky)
- [x] Transform Payment and Transactions into immutable Decimal fields with currency as CharField
- [ ] Tests
- [x] Error handling on not successful transactions
- [ ] Tests. Loads of tests
- [x] Importing data from Payment to PaymentMethod
- [ ] List transactions on the old dashboard?
- [x] Rename PaymentMethod back to Payment?
- [ ] Adjust storefront 2.0 to the new payment flow"
4236,mirumee,saleor,16,closed,2532,1,https://api.github.com/repos/mirumee/saleor/issues/2532/comments,https://github.com/mirumee/saleor/pull/2532,[],Fix and make the menu migration independent from future changes,"### The fix

This fixes the issue reported in https://github.com/mirumee/saleor/pull/2522#issuecomment-411046136. 

Where the issue was that it not possible to migrate existing menus as django migrations are returning a fake model to ensure the migration are independent from any future app changes.

Meaning, that, the property `linked_object` and get method `get_absolute_url` are inexistent in the migration context.

```
/develop/virtualenvs/dummy-saleor-env/bin/python /develop/saleor/manage.py migrate
Operations to perform:
  Apply all migrations: account, auth, checkout, contenttypes, discount, django_celery_results, django_prices_openexchangerates, django_prices_vatlayer, impersonate, menu, order, page, product, sessions, shipping, site, sites, social_django
Running migrations:
  Applying menu.0007_auto_20180807_0547...
Traceback (most recent call last):
[...]
  File ""/develop/saleor/saleor/menu/migrations/0007_auto_20180807_0547.py"", line 34, in update_menus
    menu.json_content = get_menu_as_json(menu)
  File ""/develop/saleor/saleor/menu/migrations/0007_auto_20180807_0547.py"", line 15, in get_menu_as_json
    top_item_data = get_menu_item_as_dict(item)
  File ""/develop/saleor/saleor/dashboard/menu/utils.py"", line 29, in get_menu_item_as_dict
    if menu_item.linked_object:
AttributeError: 'MenuItem' object has no attribute 'linked_object'
```

### How to reproduce the issue
1. Checkout to the `2016.6` release, migrate and populate the database;
2. Checkout to `8b474603f28d558bbf3b34dcb94d087855756178`;
3. Migration would fail.

### Changes made from this PR to fix the issue
First of all, `saleor.dashboard.menu.utils.get_menu_item_as_dict` was copied into a function `get_menu_item_as_dict` inside the migration file itself.
The reason is that it would be safer to assume that any json structure change would be implemented inside an empty migration file as it would very be likely that migration would break if any heavy change is made against this function (`saleor.dashboard.menu.utils.get_menu_item_as_dict`).

Second, the migration depends on the real models of the linked objects (`Category`, `Collection`, and `Page`). The migration now assumes that `get_absolute_url` of each of those three models can achieve their job with only two data fields: `slug` and `pk` and that those field will be safely preserved over time.
The reason that I decided to call `get_absolute_url` instead of a frozen copy in the migration file, is that we would not be able to reverse the url without a risk of having the view names or namespaces changed over time.

### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [x] Privileged views and APIs are guarded by proper permission checks.
1. [x] All visible strings are translated with proper context.
1. [x] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [x] The changes are tested.
1. [x] The code is documented (docstrings, project documentation).
"
4258,mirumee,saleor,17,closed,2509,1,https://api.github.com/repos/mirumee/saleor/issues/2509/comments,https://github.com/mirumee/saleor/issues/2509,[],django-prices 1.0.2 has requirement Django<2.1.0,"django-prices 1.0.2 has requirement Django<2.1.0, but you'll have django 2.1 which is incompatible.

please fix in reqirenements.in
Django>=1.11,<2.1.0


and yet error: 
Pillow==5.0.0 # this version setup normal on Windows, and must be before cairosvg
cairosvg"
4266,mirumee,saleor,17,closed,2501,0,https://api.github.com/repos/mirumee/saleor/issues/2501/comments,https://github.com/mirumee/saleor/issues/2501,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Deleting a product present in an order breaks the customer order details,"

### Steps to reproduce the problem
1. Create an order with a given product;
2. Delete the product;
3. Go to the order details (from `Your Account > Recent Orders`);
4. It should crash.

### Expected result
Having the placeholder image and no link to the product.

---

<details>
 <summary>Traceback</summary>

```
ERROR django.request Internal Server Error: /fr/order/d45e5395-8fe8-4629-8e78-a911c871629d/ [PID:4524:Thread-10]
Traceback (most recent call last):
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 35, in inner
    response = get_response(request)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 158, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 156, in _get_response
    response = response.render()
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/response.py"", line 106, in render
    self.content = self.rendered_content
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/response.py"", line 83, in rendered_content
    content = template.render(context, self._request)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/backends/django.py"", line 61, in render
    return self.template.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 175, in render
    return self._render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/test/utils.py"", line 98, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 943, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 910, in render_annotated
    return self.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/loader_tags.py"", line 155, in render
    return compiled_parent._render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/test/utils.py"", line 98, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 943, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 910, in render_annotated
    return self.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/loader_tags.py"", line 67, in render
    result = block.nodelist.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 943, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 910, in render_annotated
    return self.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/loader_tags.py"", line 194, in render
    return template.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 177, in render
    return self._render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/test/utils.py"", line 98, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 943, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 910, in render_annotated
    return self.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/defaulttags.py"", line 211, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/base.py"", line 910, in render_annotated
    return self.render(context)
  File ""/home/sayuri/development/sailing/saleor-venv/lib/python3.6/site-packages/django/template/library.py"", line 192, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File ""/home/sayuri/development/sailing/saleor/saleor/product/templatetags/product_images.py"", line 73, in product_first_image
    all_images = product.images.all() if product else []
AttributeError: 'str' object has no attribute 'images'
```

</details>
"
4277,mirumee,saleor,17,closed,2489,1,https://api.github.com/repos/mirumee/saleor/issues/2489/comments,https://github.com/mirumee/saleor/issues/2489,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Test collection fails,"### What I'm trying to achieve
Running tests through pytest tests/ on master branch

### Steps to reproduce the problem
1. Run the command pytest/tests
2. Get the following error message
```
ImportError while importing test module '/home/egoncearov/dev/saleor/tests/test_checkout.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
tests/test_checkout.py:28: in <module>
    (0, True, reverse('cart:index')),
venv/lib/python3.6/site-packages/django/urls/base.py:57: in reverse
    app_list = resolver.app_dict[ns]
venv/lib/python3.6/site-packages/django/urls/resolvers.py:480: in app_dict
    self._populate()
venv/lib/python3.6/site-packages/django/urls/resolvers.py:416: in _populate
    for url_pattern in reversed(self.url_patterns):
venv/lib/python3.6/site-packages/django/utils/functional.py:36: in __get__
    res = instance.__dict__[self.name] = self.func(instance)
venv/lib/python3.6/site-packages/django/urls/resolvers.py:536: in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
venv/lib/python3.6/site-packages/django/utils/functional.py:36: in __get__
    res = instance.__dict__[self.name] = self.func(instance)
venv/lib/python3.6/site-packages/django/urls/resolvers.py:529: in urlconf_module
    return import_module(self.urlconf_name)
venv/lib/python3.6/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
saleor/urls.py:17: in <module>
    from .graphql.api import schema
saleor/graphql/api.py:6: in <module>
    from .account.mutations import (
saleor/graphql/account/mutations.py:12: in <module>
    from ..core.types import Error
E   ImportError: cannot import name 'Error'
______________________________ ERROR collecting tests/api/test_account.py _______________________________
ImportError while importing test module '/home/egoncearov/dev/saleor/tests/api/test_account.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
tests/api/test_account.py:13: in <module>
    from saleor.graphql.account.mutations import SetPassword
saleor/graphql/account/mutations.py:12: in <module>
    from ..core.types import Error
E   ImportError: cannot import name 'Error'
```

### What I expected to happen
Successfully collect the tests

### Screenshots
<!-- If applicable, add screenshots to help explain your problem. -->

**System information**
Operating system: Ubuntu 18.04
Browser: N/A
"
4287,mirumee,saleor,17,closed,2478,2,https://api.github.com/repos/mirumee/saleor/issues/2478/comments,https://github.com/mirumee/saleor/issues/2478,[],Payment issue,"when i proceed to payment then i got error message: ""Oops, it looks like we were unable to contact the selected payment service ""
…

PAYMENT_VARIANTS = {
'paypal': ('payments.paypal.PaypalProvider', {
'client_id': 'luceroster-facilitator@gmail.com',
'secret': 'secretkey123',
'endpoint': 'https://api.sandbox.paypal.com',
'capture': False})}

SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'

CHECKOUT_PAYMENT_CHOICES = [
('paypal', 'PaypalProvider')]

…

"
4309,mirumee,saleor,17,closed,2454,0,https://api.github.com/repos/mirumee/saleor/issues/2454/comments,https://github.com/mirumee/saleor/issues/2454,"[{""default"": false, ""name"": ""technical debt"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/technical%20debt"", ""color"": ""666666"", ""node_id"": ""MDU6TGFiZWw1MzQ5NDM1MjA="", ""id"": 534943520}]",Bump graphene and graphene-django versions,"New versions of those libraries are out:
- https://github.com/graphql-python/graphene/releases/tag/v2.1.3
- https://github.com/graphql-python/graphene-django/releases/tag/v2.1.0

I tried to quickly do the upgrade but the following error occurs (I haven't yet investigated it):
```
tests/api/test_order.py:10: in <module>
    from saleor.graphql.order.mutations.draft_orders import (
saleor/graphql/order/mutations/draft_orders.py:12: in <module>
    from saleor.graphql.order.types import Order
saleor/graphql/order/types.py:9: in <module>
    class Order(CountableDjangoObjectType):
../../.pyenv/versions/3.7.0/envs/saleor3.7/lib/python3.7/site-packages/graphene/utils/subclass_with_meta.py:52: in __init_subclass__
    super_class.__init_subclass_with_meta__(**options)
saleor/graphql/core/types.py:48: in __init_subclass_with_meta__
    *args, connection=countable_conn, **kwargs)
../../.pyenv/versions/3.7.0/envs/saleor3.7/lib/python3.7/site-packages/graphene_django/types.py:76: in __init_subclass_with_meta__
    construct_fields(model, registry, only_fields, exclude_fields), _as=Field
../../.pyenv/versions/3.7.0/envs/saleor3.7/lib/python3.7/site-packages/graphene_django/types.py:29: in construct_fields
    converted = convert_django_field_with_choices(field, registry)
../../.pyenv/versions/3.7.0/envs/saleor3.7/lib/python3.7/site-packages/graphene_django/converter.py:57: in convert_django_field_with_choices
    converted = registry.get_converted_field(field)
../../.pyenv/versions/3.7.0/envs/saleor3.7/lib/python3.7/site-packages/graphene_django/registry.py:28: in get_converted_field
    return self._field_registry.get(field)
E   TypeError: unhashable type: 'TaxedMoneyField'
```"
4319,mirumee,saleor,17,closed,2443,2,https://api.github.com/repos/mirumee/saleor/issues/2443/comments,https://github.com/mirumee/saleor/issues/2443,"[{""default"": false, ""name"": ""core"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/core"", ""color"": ""5062b2"", ""node_id"": ""MDU6TGFiZWwxMjE1NTI1Mjk4"", ""id"": 1215525298}, {""default"": false, ""name"": ""graphql"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/graphql"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw4MjI0OTA0ODc="", ""id"": 822490487}]",Log order and customer actions and events,"### What I'm trying to achieve
Keep track of whatever changes and actions were made by the staff.

This is useful to catch errors and check data changes.


### Describe a proposed solution

#### 1 — Models
Introduce a new model containing log entries. A possible model (based on django-admin's `LogEntry` model) would be the following:

| field name | content |
| ---------- | ---- |
| action_date | Datetime of the action |
| action_type | Action type from the enum: `CREATE\|EDIT\|DELETE` |
| user | FK to `User` |
| object | Object type name or verbose name if available (e.g.: `Product Variant`) |
| object_info | The object representation through `__str__` |

This model would introduce a new listing view: action logs.


#### 2 — Event trapping
To only log dashboard action, we cannot trap at the model level efficiently (unless we want to log the whole website).

##### 2.1 — Object creation and update
Object creation and update could be trapped by making a base form receiving the user request object (to catch the requester) and handling calls to `save(...)`.

##### 2.2 — Object deletion
We could implement a method `delete_object(request, object)` to replace `object.delete()` to trigger a log creation.

#### 3 — Log saving
As the dashboard doesn't depend on logging, we probably could make log entry creation as an asynchronous task."
4320,mirumee,saleor,17,closed,2442,2,https://api.github.com/repos/mirumee/saleor/issues/2442/comments,https://github.com/mirumee/saleor/pull/2442,[],Optional HTTPS settings for the taxes fetch and edited error handling,"This extends https://github.com/mirumee/django-prices-vatlayer/pull/7.

- Added optional HTTPS settings for the taxes fetch + error logging;
- Added logging for errors allowing users to know what's wrong
and remove the assumption that the issue is the ACCESS KEY.


Draft: this PR still needs to get the edits from `django-prices-vatlayer`.


### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [x] Privileged views and APIs are guarded by proper permission checks.
1. [x] All visible strings are translated with proper context.
1. [x] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [x] The changes are tested.
1. [x] The code is documented (docstrings, project documentation).
"
4356,mirumee,saleor,18,closed,2402,3,https://api.github.com/repos/mirumee/saleor/issues/2402/comments,https://github.com/mirumee/saleor/issues/2402,[],Raven is not configured,"Hi
While deploying Saleor project to heroku, I am getting an error when I run the command:
git push heroku master

The error info is following:

 INFO raven.contrib.django.client.DjangoClient Raven is not configured (logging is disabled). Please see the documentation for more information. [PID:1112:MainThread]

I am using windows command prompt, please see the image below:

![heroku deployment](https://user-images.githubusercontent.com/12031506/42719198-4dfcb554-8712-11e8-95ed-ab5e295d44cf.png)

Please help me in this regard."
4372,mirumee,saleor,18,closed,2386,0,https://api.github.com/repos/mirumee/saleor/issues/2386/comments,https://github.com/mirumee/saleor/issues/2386,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}, {""default"": false, ""name"": ""graphql"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/graphql"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw4MjI0OTA0ODc="", ""id"": 822490487}]",Mutation form errors should be always returned in camelCase,"There are situations, where field names in `errors` property are written in `snake_case` instead of `camelCase`. Most likely it happens because of Django's form validation returning raw field name instead of camelCased."
4418,mirumee,saleor,18,closed,2335,1,https://api.github.com/repos/mirumee/saleor/issues/2335/comments,https://github.com/mirumee/saleor/issues/2335,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Fulfillment update email rendering error,"### What I'm trying to achieve
Update fulfillment, email is sent resulting in error in template rendering:

```
[2018-06-29 19:19:23,651: INFO/MainProcess] Received task: saleor.order.emails.send_fulfillment_update[7f44e2cd-407f-47d1-a54e-5ba5b87db8da]
WARNING django.template Exception raised while rendering {% include %} for template 'unknown'. Empty string rendered instead. [PID:11:MainThread]
Traceback (most recent call last):
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 475, in parse
    compile_func = self.tags[command]
KeyError: 'endif'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loader_tags.py"", line 182, in render
    template = context.template.engine.get_template(template_name)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/engine.py"", line 144, in get_template
    template, origin = self.find_template(template_name)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/engine.py"", line 126, in find_template
    template = loader.get_template(name, skip=skip)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loaders/cached.py"", line 55, in get_template
    template = super().get_template(template_name, skip)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loaders/base.py"", line 30, in get_template
    contents, origin, origin.template_name, self.engine,
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 160, in __init__
    self.nodelist = self.compile_nodelist()
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 198, in compile_nodelist
    return parser.parse()
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 477, in parse
    self.invalid_block_tag(token, command, parse_until)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 539, in invalid_block_tag
    ""or load this tag?"" % (token.lineno, command)
django.template.exceptions.TemplateSyntaxError: Invalid block tag on line 190: 'endif'. Did you forget to register or load this tag?
[2018-06-29 19:19:23,701: WARNING/ForkPoolWorker-1] Exception raised while rendering {% include %} for template 'unknown'. Empty string rendered instead.
Traceback (most recent call last):
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 475, in parse
    compile_func = self.tags[command]
KeyError: 'endif'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loader_tags.py"", line 182, in render
    template = context.template.engine.get_template(template_name)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/engine.py"", line 144, in get_template
    template, origin = self.find_template(template_name)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/engine.py"", line 126, in find_template
    template = loader.get_template(name, skip=skip)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loaders/cached.py"", line 55, in get_template
    template = super().get_template(template_name, skip)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/loaders/base.py"", line 30, in get_template
    contents, origin, origin.template_name, self.engine,
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 160, in __init__
    self.nodelist = self.compile_nodelist()
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 198, in compile_nodelist
    return parser.parse()
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 477, in parse
    self.invalid_block_tag(token, command, parse_until)
  File ""/app/virtualenv/lib/python3.6/site-packages/django/template/base.py"", line 539, in invalid_block_tag
    ""or load this tag?"" % (token.lineno, command)
django.template.exceptions.TemplateSyntaxError: Invalid block tag on line 190: 'endif'. Did you forget to register or load this tag?
[2018-06-29 19:19:25,071: INFO/ForkPoolWorker-1] Task saleor.order.emails.send_fulfillment_update[7f44e2cd-407f-47d1-a54e-5ba5b87db8da] succeeded in 1.4167361508589238s: None
```

Other emails seems to be working fine (eg. comments in order).

I am suspecting that this part in compiled mjml is incorrect:
```
                      <div style=""font-family:Ubuntu, Helvetica, Arial, sans-serif;font-size:13px;line-height:1;text-align:left;color:#000000;""> {% blocktrans trimmed context ""Fulfillment update email text"" %} Your shipping status has been updated. Below is the list of ordered products that have been updated with new tracking number. {% endblocktrans %} {% if fulfillment.tracking_number
                        %} {% blocktrans trimmed with tracking_number=fulfillment.tracking_number context ""Fulfillment update email text"" %} You can track your shipment with {{ tracking_number }} code. {% endblocktrans %} {% endif %} </div>
```

Note the line break after `if fulfillment.tracking_number`, could this be the reason?

### Steps to reproduce the problem
1. Create order
2. Make fulfillment

### What I expected to happen
Email sould be rendered correctly"
4450,mirumee,saleor,19,closed,2302,21,https://api.github.com/repos/mirumee/saleor/issues/2302/comments,https://github.com/mirumee/saleor/issues/2302,[],"Error after install "" Cannot import name ResolveInfo""","### ****What I'm trying to achieve****
New to Saleor and to Gihub :-) Wishing to establish  a Saleor CMS on windows VM Azure 
### Steps to reproduce the problem
1. I followed the Saleor installation instruction steps based on the provided requirement.txt file and the Azure instructions to setup up a web app
2. Because of the error message below repeated a new install of Saleor into Python Tools for Visual Studio (PTVS) on a local windows machine running windows 10 just to eliminate Azure from the equation.
I have scanned the Internet and found this link: https://github.com/graphql-python/graphene/issues/546

### What I expected to happen
Default saleor web site home page screen
------------------------------------------------
I have limited python programming experience. Using the testing environment I have 1) renamed the Saleor folder named graphql to graphqlOLD 2) alternatively tried renaming Lib/Site- package: graphql folder to graphqlOLD. 
 Is there some guidance on what steps I could go through to narrow down what is causing the  problem.? Any help appreciated  

### Screenshots
Traceback (most recent call last):
      File ""run_waitress_server.py"", line 9, in <module>
        application = get_wsgi_application()
      File ""D:\home\python364x64\Lib\site-packages\django\core\wsgi.py"", line 12, in get_wsgi_application
        django.setup(set_prefix=False)
      File ""D:\home\python364x64\Lib\site-packages\django\__init__.py"", line 24, in setup
        apps.populate(settings.INSTALLED_APPS)
      File ""D:\home\python364x64\Lib\site-packages\django\apps\registry.py"", line 89, in populate
        app_config = AppConfig.create(entry)
      File ""D:\home\python364x64\Lib\site-packages\django\apps\config.py"", line 90, in create
        module = import_module(entry)
      File ""E:\A\_work\79\b\source_packages\python.3.6.4\tools\Lib\importlib\__init__.py"", line 126, in import_module
      File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
      File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
      File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
      File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
      File ""D:\home\python364x64\Lib\site-packages\graphene_django\__init__.py"", line 1, in <module>
        from .types import (
      File ""D:\home\python364x64\Lib\site-packages\graphene_django\types.py"", line 4, in <module>
        from graphene import Field
      File ""D:\home\python364x64\Lib\site-packages\graphene\__init__.py"", line 3, in <module>
        from .types import (
      File ""D:\home\python364x64\Lib\site-packages\graphene\types\__init__.py"", line 2, in <module>
        from graphql import ResolveInfo
    ImportError: cannot import name 'ResolveInfo'

**System information**
Operating system: windows 10
Browser:: IE 11
"
4476,mirumee,saleor,19,closed,2271,1,https://api.github.com/repos/mirumee/saleor/issues/2271/comments,https://github.com/mirumee/saleor/pull/2271,[],Added a request history panel to the debug toolbar for easier Ajax debug,"Hello! 

This is a little edit that I think quite useful to debug and profile Ajax requests that I think could be useful to Saleor to have.

This PR adds a new panel to `django-debug-toolbar` which tracks the request history and kept the list updated, allowing us to to gain an easy access to Ajax requests.

### Screenshots

#### Request list made on dashboard 2.0
![](https://i.imgur.com/AvY3FCz.png)

#### SQL requests made on dashboard 2.0 on an Ajax request
![](https://i.imgur.com/hskIf3U.png)


### Pull Request Checklist

<!-- Please keep this section. It will make maintainer's life easier. -->

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
"
4500,mirumee,saleor,19,closed,2244,3,https://api.github.com/repos/mirumee/saleor/issues/2244/comments,https://github.com/mirumee/saleor/issues/2244,[],hstore.control error meanwhile db migration,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
i'm having some trouble during the migration of the db
because there is an exception about the migration of the table 
 Applying product.0021_add_hstore_extension.
but the other tables are migrated correctly
i'm using linux mint , postgres 9.5 
...

### Steps to reproduce the problem

1. python manage.py migrate

### What I expected to happen
the migration of the db
yes is done, but the erroe on that extension.
my user i did as a superuser
### What happened instead/how it failed

...

(Please include a stack trace if this problem results in a crash.)

python manage.py migrate
System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
	HINT: User sessions need to be globally shared, use a cache server like Redis.
Operations to perform:
  Apply all migrations: account, auth, checkout, contenttypes, discount, django_celery_results, django_prices_openexchangerates, django_prices_vatlayer, impersonate, menu, order, page, product, sessions, shipping, site, sites, social_django
Running migrations:
  Applying product.0021_add_hstore_extension...Traceback (most recent call last):
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
psycopg2.OperationalError: could not open extension control file ""/usr/share/postgresql/9.5/extension/hstore.control"": No such file or directory


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/core/management/__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/core/management/base.py"", line 335, in execute
    output = self.handle(*args, **options)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 200, in handle
    fake_initial=fake_initial,
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 117, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 147, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/migrations/migration.py"", line 122, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/contrib/postgres/operations.py"", line 19, in database_forwards
    schema_editor.execute(""CREATE EXTENSION IF NOT EXISTS %s"" % schema_editor.quote_name(self.name))
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 117, in execute
    cursor.execute(sql, params)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 100, in execute
    return super().execute(sql, params)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 68, in execute
    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 77, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/var/www/html/saleor/tutorial-env/lib/python3.5/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
django.db.utils.OperationalError: could not open extension control file ""/usr/share/postgresql/9.5/extension/hstore.control"": No such file or directory

"
4508,mirumee,saleor,19,closed,2236,6,https://api.github.com/repos/mirumee/saleor/issues/2236/comments,https://github.com/mirumee/saleor/issues/2236,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Cart migration fails: cannot drop/alter table `cart_cart`,"It looks like merging cart with checkout generated a migration that causes problems:

```console
$ python manage.py migrate --no-input
...
Running migrations:
  Applying checkout.0007_merge_cart_with_checkout...Traceback (most recent call last):
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
psycopg2.OperationalError: cannot ALTER TABLE ""cart_cart"" because it has pending trigger events
```"
4535,mirumee,saleor,19,closed,2209,18,https://api.github.com/repos/mirumee/saleor/issues/2209/comments,https://github.com/mirumee/saleor/issues/2209,[],Unable to install saleor,"Did create a database named saleor with ""createdb saleor""
Did create a superuser named saleor with ""createuser -s --pwprompt saleor""
Password for the super user is as default ""saleor""

I am not sure why am i getting this error. I did find some similar issues and fallowed them through but did not solve my problem. I would really appreciate any help.

```
(ecommerce) [root@site saleor]# python manage.py migrate
System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
	HINT: User sessions need to be globally shared, use a cache server like Redis.
Traceback (most recent call last):
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 168, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: FATAL:  Ident authentication failed for user ""saleor""


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/core/management/__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/core/management/base.py"", line 335, in execute
    output = self.handle(*args, **options)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/core/management/commands/migrate.py"", line 79, in handle
    executor = MigrationExecutor(connection, self.migration_progress_callback)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 18, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 49, in __init__
    self.build_graph()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 206, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 61, in applied_migrations
    if self.has_table():
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 44, in has_table
    return self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor())
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 255, in cursor
    return self._cursor()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 232, in _cursor
    self.ensure_connection()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 168, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/root/environments/ecommerce/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  Ident authentication failed for user ""saleor""
```"
4550,mirumee,saleor,20,closed,2193,7,https://api.github.com/repos/mirumee/saleor/issues/2193/comments,https://github.com/mirumee/saleor/pull/2193,[],Fix calculus for orders with VAT,"This PR fixes #2191. Which was caused by a miss calculation from Saleor side.

After some debugging, I discovered that Saleor was trying to subtract a gross total with gross items, a gross shipping price and total tax.

In other words:
```
subtotal = total.gross - shipping.gross - tax

--- e.g.:
Item Net Price = 22.95
Item Gross Price = 27.54 (@ 20%)

Shipping Net = 62.73
Shipping Gross = 75.28 (@ 20%)

Total Net = 85.68
Total Gross = 102.82

Total Tax = 17.14

--- Wrong calculus made by Saleor:
subtotal = total.gross - shipping.gross - tax
subtotal = 102.82 - 75.28 - 17.14
subtotal = 10.40

expected subtotal = item net = 22.95

10.40 != 22.95

----------------------
PR fixed calculus:
----------------------
subtotal = total.gross - shipping.net - tax
subtotal = 102.82 - 62.73 - 17.14
subtotal = 22.95

expected subtotal = item net = 22.95

22.95 == 22.95
```

That's almost it... The second issue, was Saleor was passing the items unit price as gross, but django-payments seems to be expecting a Net price. At least, PayPal, did expect a net price.

So, the issue was that PayPal, when summing the items, and then adding the shipping and the tax, was getting a value higher than the real total.

It was pretty much all.


----


Tested against:
- [x] Single line with unique and multiple quantities;
- [x] Multiple lines with random quantities;
- [x] Vouchers;
- [x] Without VAT.

But I'm not 100% sure if it doesn't break some other providers.

Was successfully tested against the following providers:
- [x] PayPal;
- [x] Stripe;
- [x] DotPay.

Should not make an issues for others (assumptions).

---

Maybe in the future we could improve the tests on that side, to make sure those kind of bugs does not happen?

Something that could be possible, is to add a few more tests and take the providers keys (client id, secret keys, pins, etc.) from the environment when launching tests (separated tests from the other  tests, or ignored when not set in environment). 
Those environment values would be set on Travis as hidden values (and thus we would have to make sure we don't leak any sensitive data over debug logging or else).

Let me know what you think, it would be quite easy to implement such integration tests.

### Pull Request Checklist

(Please keep this section. It will make maintainer's life easier.)

1. [x] Privileged views and APIs are guarded by proper permission checks.
1. [x] All visible strings are translated with proper context.
1. [x] All data-formatting is locale-aware (dates, numbers, and so on).
1. [x] Database queries are optimized and the number of queries is constant.
1. [x] The changes are tested.
1. [x] The code is documented (docstrings, project documentation).
1. [x] Python code quality checks pass: `pycodestyle`, `pydocstyle`, `pylint`.
1. [x] JavaScript code quality checks pass: `eslint`.
"
4592,mirumee,saleor,20,closed,2144,2,https://api.github.com/repos/mirumee/saleor/issues/2144/comments,https://github.com/mirumee/saleor/issues/2144,[],Database migration error,"### What I'm trying to achieve
I am trying to install and set up Saleor for the first time. Following [documentation](http://saleor.readthedocs.io/en/latest/gettingstarted/installation-windows.html) i have installed all newest dependencies and packages. Getting to the point when i need to migrate the database it keeps showing me the Django 'Apps aren't loaded yet.' error.

### Steps to reproduce the problem

1. Follow official installation [documentation](http://saleor.readthedocs.io/en/latest/gettingstarted/installation-windows.html) 
2. In ""Installation for Windows"" point 5 login to phAdmin, right click to create a user
3. Set name and password to be 'saleor'
4. In Privileges tab enable all options (incl. superuser)

### What I expected to happen
I would expect successful database migration 

### What happened instead/how it failed
Getting Django error:
```
(Saleor) E:\Development\Web\eCommerce\saleor>python manage.py migrate
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\core\management\__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\core\management\__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\core\management\__init__.py"", line 216, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\core\management\__init__.py"", line 36, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File ""C:\Users\Ilja\Envs\Saleor\lib\importlib\__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\core\management\commands\migrate.py"", line 12, in <module>
    from django.db.migrations.autodetector import MigrationAutodetector
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\migrations\autodetector.py"", line 11, in <module>
    from django.db.migrations.questioner import MigrationQuestioner
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\migrations\questioner.py"", line 9, in <module>
    from .loader import MigrationLoader
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\migrations\loader.py"", line 8, in <module>
    from django.db.migrations.recorder import MigrationRecorder
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\migrations\recorder.py"", line 9, in <module>
    class MigrationRecorder:
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\migrations\recorder.py"", line 22, in MigrationRecorder
    class Migration(models.Model):
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\db\models\base.py"", line 100, in __new__
    app_config = apps.get_containing_app_config(module)
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\apps\registry.py"", line 244, in get_containing_app_config
    self.check_apps_ready()
  File ""C:\Users\Ilja\Envs\Saleor\lib\site-packages\django\apps\registry.py"", line 127, in check_apps_ready
    raise AppRegistryNotReady(""Apps aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Apps aren't loaded yet.
```

"
4594,mirumee,saleor,20,closed,2141,3,https://api.github.com/repos/mirumee/saleor/issues/2141/comments,https://github.com/mirumee/saleor/issues/2141,"[{""default"": false, ""name"": ""in progress"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/in%20progress"", ""color"": ""2980B9"", ""node_id"": ""MDU6TGFiZWw4NTI1NDQyMQ=="", ""id"": 85254421}]","What is the best way to handle shipping and shipping prices, especially in the same country?","### What I'm trying to achieve
 I have made the settings such that I ship products only in-country, in this case, GB. I have my settings as follows:

```
DEFAULT_COUNTRY = 'GB'
COUNTRIES_ONLY = ['GB']
DEFAULT_CURRENCY = 'GBP'
AVAILABLE_CURRENCIES = [DEFAULT_CURRENCY]
```
### What I expected to happen
I expect that given I am shipping within the same city, the price of shipping is going to be low. However, it seems to start at a fixed amount that seems ridiculously high. Example below

![screen shot 2018-05-01 at 11 40 55](https://user-images.githubusercontent.com/405697/39467062-c0a20a86-4d34-11e8-93b0-af961b9e82f6.png)

Shipping from one place to another in London should not cost £63.30. Is there something I am missing? Here is my complete settings file

```
import ast
import os.path

import dj_database_url
import dj_email_url
import django_cache_url
from django.contrib.messages import constants as messages


def get_list(text):
    return [item.strip() for item in text.split(',')]


DEBUG = ast.literal_eval(os.environ.get('DEBUG', 'True'))

SITE_ID = 1

PROJECT_ROOT = os.path.normpath(os.path.join(os.path.dirname(__file__), '..'))

ROOT_URLCONF = 'saleor.urls'

WSGI_APPLICATION = 'saleor.wsgi.application'

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)
MANAGERS = ADMINS

INTERNAL_IPS = get_list(os.environ.get('INTERNAL_IPS', '127.0.0.1'))

CACHES = {'default': django_cache_url.config()}

if os.environ.get('REDIS_URL'):
    CACHES['default'] = {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': os.environ.get('REDIS_URL')}

DATABASES = {
    'default': dj_database_url.config(
        default='postgres://postgres:postgres@localhost:5432/marketplace',
        conn_max_age=600)}


TIME_ZONE = 'Europe/London'
LANGUAGE_CODE = 'en-gb'
LOCALE_PATHS = [os.path.join(PROJECT_ROOT, 'locale')]
USE_I18N = True
USE_L10N = True
USE_TZ = True

FORM_RENDERER = 'django.forms.renderers.TemplatesSetting'

EMAIL_URL = os.environ.get('EMAIL_URL')
SENDGRID_USERNAME = os.environ.get('SENDGRID_USERNAME')
SENDGRID_PASSWORD = os.environ.get('SENDGRID_PASSWORD')
if not EMAIL_URL and SENDGRID_USERNAME and SENDGRID_PASSWORD:
    EMAIL_URL = 'smtp://%s:%s@smtp.sendgrid.net:587/?tls=True' % (
        SENDGRID_USERNAME, SENDGRID_PASSWORD)
email_config = dj_email_url.parse(EMAIL_URL or 'console://')

EMAIL_FILE_PATH = email_config['EMAIL_FILE_PATH']
EMAIL_HOST_USER = email_config['EMAIL_HOST_USER']
EMAIL_HOST_PASSWORD = email_config['EMAIL_HOST_PASSWORD']
EMAIL_HOST = email_config['EMAIL_HOST']
EMAIL_PORT = email_config['EMAIL_PORT']
EMAIL_BACKEND = email_config['EMAIL_BACKEND']
EMAIL_USE_TLS = email_config['EMAIL_USE_TLS']
EMAIL_USE_SSL = email_config['EMAIL_USE_SSL']

ENABLE_SSL = ast.literal_eval(
    os.environ.get('ENABLE_SSL', 'False'))

DEFAULT_FROM_EMAIL = os.environ.get('DEFAULT_FROM_EMAIL')
ORDER_FROM_EMAIL = os.getenv('ORDER_FROM_EMAIL', DEFAULT_FROM_EMAIL)

MEDIA_ROOT = os.path.join(PROJECT_ROOT, 'media')
MEDIA_URL = '/media/'

STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')
STATIC_URL = '/static/'
STATICFILES_DIRS = [
    ('assets', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'assets')),
    ('images', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'images')),
    ('dashboard', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'dashboard'))]
STATICFILES_FINDERS = [
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder']

context_processors = [
    'django.contrib.auth.context_processors.auth',
    'django.template.context_processors.debug',
    'django.template.context_processors.i18n',
    'django.template.context_processors.media',
    'django.template.context_processors.static',
    'django.template.context_processors.tz',
    'django.contrib.messages.context_processors.messages',
    'django.template.context_processors.request',
    'saleor.core.context_processors.default_currency',
    'saleor.core.context_processors.categories',
    'saleor.cart.context_processors.cart_counter',
    'saleor.core.context_processors.search_enabled',
    'saleor.site.context_processors.site',
    'social_django.context_processors.backends',
    'social_django.context_processors.login_redirect']

loaders = [
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader']

if not DEBUG:
    loaders = [('django.template.loaders.cached.Loader', loaders)]

TEMPLATES = [{
    'BACKEND': 'django.template.backends.django.DjangoTemplates',
    'DIRS': [os.path.join(PROJECT_ROOT, 'templates')],
    'OPTIONS': {
        'debug': DEBUG,
        'context_processors': context_processors,
        'loaders': loaders,
        'string_if_invalid': '<< MISSING VARIABLE ""%s"" >>' if DEBUG else ''}}]

# Make this unique, and don't share it with anybody.
SECRET_KEY = os.environ.get('SECRET_KEY')

MIDDLEWARE = [
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django_babel.middleware.LocaleMiddleware',
    'saleor.core.middleware.discounts',
    'saleor.core.middleware.google_analytics',
    'saleor.core.middleware.country',
    'saleor.core.middleware.currency',
    'saleor.core.middleware.site',
    'social_django.middleware.SocialAuthExceptionMiddleware',
    'impersonate.middleware.ImpersonateMiddleware']

INSTALLED_APPS = [
    # External apps that need to go before django's
    'storages',

    # Django modules
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.sitemaps',
    'django.contrib.sites',
    'django.contrib.staticfiles',
    'django.contrib.auth',
    'django.contrib.postgres',
    'django.forms',

    # Local apps
    'saleor.account',
    'saleor.discount',
    'saleor.product',
    'saleor.cart',
    'saleor.checkout',
    'saleor.core',
    'saleor.graphql',
    'saleor.order.OrderAppConfig',
    'saleor.dashboard',
    'saleor.shipping',
    'saleor.search',
    'saleor.site',
    'saleor.data_feeds',

    # External apps
    'versatileimagefield',
    'django_babel',
    'bootstrap4',
    'django_fsm',
    'django_prices',
    'django_prices_openexchangerates',
    'graphene_django',
    'mptt',
    'payments',
    'webpack_loader',
    'social_django',
    'django_countries',
    'django_filters',
    'django_celery_results',
    'impersonate',
    'phonenumber_field']

LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'root': {
        'level': 'INFO',
        'handlers': ['console']},
    'formatters': {
        'verbose': {
            'format': (
                '%(levelname)s %(name)s %(message)s'
                ' [PID:%(process)d:%(threadName)s]')},
        'simple': {
            'format': '%(levelname)s %(message)s'}},
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'}},
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'},
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'}},
    'loggers': {
        'django': {
            'handlers': ['console', 'mail_admins'],
            'level': 'INFO',
            'propagate': True},
        'django.server': {
            'handlers': ['console'],
            'level': 'INFO',
            'propagate': True},
        'saleor': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': True}}}

AUTH_USER_MODEL = 'account.User'

LOGIN_URL = '/account/login/'

DEFAULT_COUNTRY = 'GB'
COUNTRIES_ONLY = ['GB']
DEFAULT_CURRENCY = 'GBP'
AVAILABLE_CURRENCIES = [DEFAULT_CURRENCY]

OPENEXCHANGERATES_API_KEY = os.environ.get('OPENEXCHANGERATES_API_KEY')

ACCOUNT_ACTIVATION_DAYS = 3

LOGIN_REDIRECT_URL = 'home'

GOOGLE_ANALYTICS_TRACKING_ID = os.environ.get('GOOGLE_ANALYTICS_TRACKING_ID')


def get_host():
    from django.contrib.sites.models import Site
    return Site.objects.get_current().domain


PAYMENT_HOST = get_host

PAYMENT_MODEL = 'order.Payment'

# PAYMENT_VARIANTS = {
#     'default': ('payments.dummy.DummyProvider', {})}

PAYMENT_VARIANTS = {
    'stripe': ('payments.stripe.StripeProvider', {
        'secret_key': 'sk_test_8iCTnkhpBl5WLWLx1018bpwt',
        'public_key': 'pk_test_1Z6QkSnccdfEO7kiSLk3bUjA'})}

SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'

# CHECKOUT_PAYMENT_CHOICES = [
#     ('default', 'Dummy provider')]

CHECKOUT_PAYMENT_CHOICES = [
    ('stripe', 'Bank Card')]

MESSAGE_TAGS = {
    messages.ERROR: 'danger'}

LOW_STOCK_THRESHOLD = 10
MAX_CART_LINE_QUANTITY = int(os.environ.get('MAX_CART_LINE_QUANTITY', 50))

PAGINATE_BY = 16
DASHBOARD_PAGINATE_BY = 30
DASHBOARD_SEARCH_LIMIT = 5

bootstrap4 = {
    'set_placeholder': False,
    'set_required': False,
    'success_css_class': '',
    'form_renderers': {
        'default': 'saleor.core.utils.form_renderer.FormRenderer'}}

TEST_RUNNER = ''

ALLOWED_HOSTS = get_list(os.environ.get('ALLOWED_HOSTS', 'localhost'))

SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')

# Amazon S3 configuration
AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
AWS_STORAGE_BUCKET_NAME = os.environ.get('AWS_STORAGE_BUCKET_NAME')
AWS_MEDIA_BUCKET_NAME = os.environ.get('AWS_MEDIA_BUCKET_NAME')
AWS_QUERYSTRING_AUTH = ast.literal_eval(
    os.environ.get('AWS_QUERYSTRING_AUTH', 'False'))

if AWS_STORAGE_BUCKET_NAME:
    STATICFILES_STORAGE = 'storages.backends.s3boto3.S3Boto3Storage'

if AWS_MEDIA_BUCKET_NAME:
    DEFAULT_FILE_STORAGE = 'saleor.core.storages.S3MediaStorage'
    THUMBNAIL_DEFAULT_STORAGE = DEFAULT_FILE_STORAGE

MESSAGE_STORAGE = 'django.contrib.messages.storage.session.SessionStorage'

VERSATILEIMAGEFIELD_RENDITION_KEY_SETS = {
    'defaults': [
        ('product_gallery', 'crop__540x540'),
        ('product_gallery_2x', 'crop__1080x1080'),
        ('product_small', 'crop__60x60'),
        ('product_small_2x', 'crop__120x120'),
        ('product_list', 'crop__255x255'),
        ('product_list_2x', 'crop__510x510')]}

VERSATILEIMAGEFIELD_SETTINGS = {
    # Images should be pre-generated on Production environment
    'create_images_on_demand': ast.literal_eval(
        os.environ.get('CREATE_IMAGES_ON_DEMAND', 'True')),
}

PLACEHOLDER_IMAGES = {
    60: 'images/placeholder60x60.png',
    120: 'images/placeholder120x120.png',
    255: 'images/placeholder255x255.png',
    540: 'images/placeholder540x540.png',
    1080: 'images/placeholder1080x1080.png'}

DEFAULT_PLACEHOLDER = 'images/placeholder255x255.png'

WEBPACK_LOADER = {
    'DEFAULT': {
        'CACHE': not DEBUG,
        'BUNDLE_DIR_NAME': 'assets/',
        'STATS_FILE': os.path.join(PROJECT_ROOT, 'webpack-bundle.json'),
        'POLL_INTERVAL': 0.1,
        'IGNORE': [
            r'.+\.hot-update\.js',
            r'.+\.map']}}


LOGOUT_ON_PASSWORD_CHANGE = False

# SEARCH CONFIGURATION
DB_SEARCH_ENABLED = True

# support deployment-dependant elastic enviroment variable
ES_URL = (os.environ.get('ELASTICSEARCH_URL') or
          os.environ.get('SEARCHBOX_URL') or os.environ.get('BONSAI_URL'))

ENABLE_SEARCH = bool(ES_URL) or DB_SEARCH_ENABLED  # global search disabling

SEARCH_BACKEND = 'saleor.search.backends.postgresql'

if ES_URL:
    SEARCH_BACKEND = 'saleor.search.backends.elasticsearch'
    INSTALLED_APPS.append('django_elasticsearch_dsl')
    ELASTICSEARCH_DSL = {
        'default': {
            'hosts': ES_URL}}


GRAPHENE = {'MIDDLEWARE': ['graphene_django.debug.DjangoDebugMiddleware']}

AUTHENTICATION_BACKENDS = [
    'saleor.account.backends.facebook.CustomFacebookOAuth2',
    'saleor.account.backends.google.CustomGoogleOAuth2',
    'django.contrib.auth.backends.ModelBackend']

SOCIAL_AUTH_PIPELINE = [
    'social_core.pipeline.social_auth.social_details',
    'social_core.pipeline.social_auth.social_uid',
    'social_core.pipeline.social_auth.auth_allowed',
    'social_core.pipeline.social_auth.social_user',
    'social_core.pipeline.social_auth.associate_by_email',
    'social_core.pipeline.user.create_user',
    'social_core.pipeline.social_auth.associate_user',
    'social_core.pipeline.social_auth.load_extra_data',
    'social_core.pipeline.user.user_details']

SOCIAL_AUTH_USERNAME_IS_FULL_EMAIL = True
SOCIAL_AUTH_USER_MODEL = AUTH_USER_MODEL
SOCIAL_AUTH_FACEBOOK_SCOPE = ['email']
SOCIAL_AUTH_FACEBOOK_PROFILE_EXTRA_PARAMS = {
    'fields': 'id, email'}

# CELERY SETTINGS
CELERY_BROKER_URL = os.environ.get('REDIS_BROKER_URL') or ''
CELERY_TASK_ALWAYS_EAGER = False if CELERY_BROKER_URL else True
CELERY_ACCEPT_CONTENT = ['json']
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_RESULT_BACKEND = 'django-db'

# Impersonate module settings
IMPERSONATE = {
    'URI_EXCLUSIONS': [r'^dashboard/'],
    'CUSTOM_USER_QUERYSET': 'saleor.account.impersonate.get_impersonatable_users',  # noqa
    'USE_HTTP_REFERER': True,
    'CUSTOM_ALLOW': 'saleor.account.impersonate.can_impersonate'}
```


Please advise. 
"
4603,mirumee,saleor,20,closed,2130,6,https://api.github.com/repos/mirumee/saleor/issues/2130/comments,https://github.com/mirumee/saleor/issues/2130,[],Can't run saleor,"When I run this command **python manage.py runserver** I got below error, I'm stuck now here.

raceback (most recent call last):
  File ""manage.py"", line 8, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named django.core.management
"
4607,mirumee,saleor,20,closed,2125,3,https://api.github.com/repos/mirumee/saleor/issues/2125/comments,https://github.com/mirumee/saleor/issues/2125,[],saleor.W001: Session caching cannot work with locmem backend,"I was installing Saleor and had the following problem after the migration:
```

Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7feb5d026400>
Traceback (most recent call last):
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 168, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not translate host name ""saleor"" to address: Name or service not known
```


he above exception was the direct cause of the following exception:

```
Traceback (most recent call last):
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/utils/autoreload.py"", line 225, in wrapper
    fn(*args, **kwargs)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 123, in inner_run
    self.check_migrations()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/core/management/base.py"", line 427, in check_migrations
    executor = MigrationExecutor(connections[DEFAULT_DB_ALIAS])
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 18, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 49, in __init__
    self.build_graph()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 206, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 61, in applied_migrations
    if self.has_table():
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 44, in has_table
    return self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor())
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 255, in cursor
    return self._cursor()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 232, in _cursor
    self.ensure_connection()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 216, in ensure_connection
    self.connect()
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 194, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 168, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/home/scripts/saleor/shop/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: could not translate host name ""saleor"" to address: Name or service not known
`
```

I read the other topics related to this problem, but It didn't helo me, I need to run ASAP. thank you
"
4641,mirumee,saleor,20,closed,2088,9,https://api.github.com/repos/mirumee/saleor/issues/2088/comments,https://github.com/mirumee/saleor/issues/2088,[],Cannot add user to group in dashboard interface,"### I wish to a user to group on the dashboard interface

I wish to create a group and add users to it on the dashboard interface but I get a `string index out of range` error

### Steps to reproduce the problem

1. Log into dashboard
2. Create group
3. Add user by inputting email address and choosing group
4. Get the following error message

![screen shot 2018-04-16 at 15 44 47](https://user-images.githubusercontent.com/405697/38809708-24a8f21e-418d-11e8-99e2-55259a6cf337.png)

Below is the stack trace

```
Environment:


Request Method: POST
Request URL: http://www.shopihato.com/dashboard/staff/staff-create/

Django Version: 2.0.2
Python Version: 3.6.3
Installed Applications:
['storages',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.auth',
 'django.contrib.postgres',
 'django.forms',
 'saleor.account',
 'saleor.discount',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.graphql',
 'saleor.order.OrderAppConfig',
 'saleor.dashboard',
 'saleor.shipping',
 'saleor.search',
 'saleor.site',
 'saleor.data_feeds',
 'versatileimagefield',
 'django_babel',
 'bootstrap4',
 'django_fsm',
 'django_prices',
 'django_prices_openexchangerates',
 'graphene_django',
 'mptt',
 'payments',
 'webpack_loader',
 'social_django',
 'django_countries',
 'django_filters',
 'django_celery_results',
 'impersonate',
 'phonenumber_field']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django_babel.middleware.LocaleMiddleware',
 'saleor.core.middleware.discounts',
 'saleor.core.middleware.google_analytics',
 'saleor.core.middleware.country',
 'saleor.core.middleware.currency',
 'saleor.core.middleware.site',
 'social_django.middleware.SocialAuthExceptionMiddleware',
 'impersonate.middleware.ImpersonateMiddleware']



Traceback:

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  35.             response = get_response(request)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  128.                 response = self.process_exception_by_middleware(e, request)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  126.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""./saleor/dashboard/staff/views.py"" in staff_create
  68.             send_promote_customer_to_staff_email(staff)

File ""/app/.heroku/python/lib/python3.6/site-packages/celery/local.py"" in __call__
  191.         return self._get_current_object()(*a, **kw)

File ""/app/.heroku/python/lib/python3.6/site-packages/celery/app/task.py"" in __call__
  380.             return self.run(*args, **kwargs)

File ""./saleor/dashboard/emails.py"" in send_promote_customer_to_staff_email
  41.         context=ctx)

File ""/app/.heroku/python/lib/python3.6/site-packages/templated_email/__init__.py"" in send_templated_mail
  70.                            headers=headers, create_link=create_link, **kwargs)

File ""/app/.heroku/python/lib/python3.6/site-packages/templated_email/backends/vanilla_django.py"" in send
  263.             e.send(fail_silently)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/mail/message.py"" in send
  294.         return self.get_connection(fail_silently).send_messages([self])

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"" in send_messages
  110.                 sent = self._send(message)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"" in _send
  122.         from_email = sanitize_address(email_message.from_email, encoding)

File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/mail/message.py"" in sanitize_address
  119.         address = Address(nm, addr_spec=addr)

File ""/app/.heroku/python/lib/python3.6/email/headerregistry.py"" in __init__
  42.             a_s, rest = parser.get_addr_spec(addr_spec)

File ""/app/.heroku/python/lib/python3.6/email/_header_value_parser.py"" in get_addr_spec
  1986.     token, value = get_local_part(value)

File ""/app/.heroku/python/lib/python3.6/email/_header_value_parser.py"" in get_local_part
  1798.     if value[0] in CFWS_LEADER:

Exception Type: IndexError at /dashboard/staff/staff-create/
Exception Value: string index out of range
```
Any insights as to what the issue might be are appreciated. 
"
4644,mirumee,saleor,20,closed,2083,7,https://api.github.com/repos/mirumee/saleor/issues/2083/comments,https://github.com/mirumee/saleor/issues/2083,[],Issue installing Saleor in Windows 10,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
I'm trying to install Saleor locally on my PC to develop. It is a Windows 10.

### Steps to reproduce the problem

1. python -m pip install -r requirements.txt

### What I expected to happen

...

### What happened instead/how it failed

https://i.imgur.com/pIw2J0p.png
If i comment in requirements 
#maxminddb-geolite2==2017.803
#maxminddb==1.3.0 
i have next error:
https://i.imgur.com/QxfHtOg.png

(Please include a stack trace if this problem results in a crash.)

```
(venv) E:\dev\saleor>python -m pip freeze
amqp==2.2.2
asn1crypto==0.24.0
attrs==17.4.0
Babel==2.5.3
billiard==3.5.0.3
bleach==2.1.3
boto3==1.5.31
botocore==1.8.45
braintree==3.39.1
cairocffi==0.8.0
CairoSVG==2.1.3
celery==4.1.0
certifi==2018.1.18
cffi==1.11.4
chardet==3.0.4
colorama==0.3.9
cryptography==2.1.4
cssselect2==0.2.1
defusedxml==0.5.0
dj-database-url==0.4.2
dj-email-url==0.0.10
Django==1.11.12
django-babel==0.6.2
django-bootstrap4==0.0.5
django-cache-url==2.0.0
django-celery-results==1.0.1
django-countries==5.2
django-debug-toolbar==1.9.1
django-elasticsearch-dsl==0.4.4
django-environ==0.4.4
django-filter==1.1.0
django-fsm==2.6.0
django-graphql-jwt==0.1.9
django-impersonate==1.3
django-js-asset==1.0.0
django-mptt==0.9.0
django-payments==0.12.1
django-phonenumber-field==2.0.0
django-prices==1.0.0
django-prices-openexchangerates==1.0.0
django-redis==4.8.0
django-render-block==0.5
django-storages==1.6.5
django-templated-email==2.2.0
django-versatileimagefield==1.9
django-webpack-loader==0.5.0
docutils==0.14
elasticsearch==5.5.2
elasticsearch-dsl==5.4.0
Faker==0.8.11
freezegun==0.3.9
google-i18n-address==2.3.0
google-measurement-protocol==1.0.0
graphene==2.0.1
graphene-django==2.0.0
graphql-core==2.0
graphql-relay==0.4.5
html5lib==1.0.1
idna==2.6
iso8601==0.1.12
jmespath==0.9.3
jsonfield==2.0.2
kombu==4.1.0
Markdown==2.6.11
maxminddb==1.3.0
multidict==3.3.2
oauthlib==2.0.6
pdfrw==0.4
phonenumberslite==8.9.1
Pillow==5.0.0
pluggy==0.6.0
prices==1.0.0
promise==2.1
psycopg2-binary==2.7.4
purl==1.3.1
py==1.5.2
pycparser==2.18
PyJWT==1.5.3
Pyphen==0.9.4
pytest==3.4.0
pytest-django==3.1.2
pytest-mock==1.7.0
python-dateutil==2.6.1
pytz==2018.3
PyYAML==3.12
redis==2.10.6
requests==2.18.4
Rx==1.6.0
s3transfer==0.1.12
singledispatch==3.4.0.3
six==1.11.0
sqlparse==0.2.4
stripe==1.77.1
suds-jurko==0.6
text-unidecode==1.1
tinycss2==0.6.1
typing==3.6.2
urllib3==1.22
vine==1.1.4
webencodings==0.5.1
wrapt==1.10.11
xmltodict==0.11.0
yarl==0.17.0
```
"
4657,mirumee,saleor,21,closed,2069,1,https://api.github.com/repos/mirumee/saleor/issues/2069/comments,https://github.com/mirumee/saleor/issues/2069,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}, {""default"": false, ""name"": ""dashboard 1.0"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/dashboard%201.0"", ""color"": ""afffcb"", ""node_id"": ""MDU6TGFiZWw0NTQyMjEwMDk="", ""id"": 454221009}]",Error while trying to disable variants for product type,"### Steps to reproduce the problem

1. Choose a product type with variant attributes in the dashboard
2. Uncheck ""Enable variants"" indicator

### What I expected to happen
Disabled variants for product type or proper warning similar to ""Some products of this type have more than one variant""

### What happened instead/how it failed
```
Traceback:

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  35.             response = get_response(request)

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  128.                 response = self.process_exception_by_middleware(e, request)

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  126.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)

File ""/home/adam/mirumee/saleor/saleor/dashboard/product/views.py"" in product_type_edit
  74.     if form.is_valid():

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/forms/forms.py"" in is_valid
  179.         return self.is_bound and not self.errors

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/forms/forms.py"" in errors
  174.             self.full_clean()

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/forms/forms.py"" in full_clean
  377.         self._clean_form()

File ""/home/adam/mirumee/saleor/.direnv/python-3.6.4/lib/python3.6/site-packages/django/forms/forms.py"" in _clean_form
  404.             cleaned_data = self.clean()

File ""/home/adam/mirumee/saleor/saleor/dashboard/product/forms.py"" in clean
  97.         self.update_variants_names(data)

File ""/home/adam/mirumee/saleor/saleor/dashboard/product/forms.py"" in update_variants_names
  104.         saved_attributes = set(list(data.get('variant_attributes')))

Exception Type: TypeError at /dashboard/products/types/3/update/
Exception Value: 'NoneType' object is not iterable
```


```
data | {'is_shipping_required': True,  'name': 'Coffee',  'product_attributes': <QuerySet [<ProductAttribute: Brand>, <ProductAttribute: Coffee Genre>]>}
initial_attributes | set()
self | <ProductTypeForm bound=True, valid=False, fields=(name;has_variants;product_attributes;variant_attributes;is_shipping_required)>
```
It seems that 
```saved_attributes = set(list(data.get('variant_attributes')))```
crashes at trying creating list from `None`.
Possibly related with #2026

"
4679,mirumee,saleor,21,closed,2042,9,https://api.github.com/repos/mirumee/saleor/issues/2042/comments,https://github.com/mirumee/saleor/issues/2042,[],ModuleNotFoundError: No module named 'celery',"Please help i cloned the saleor project and i did pip install and i have configured the postgress database and secretkey. and when i run the following command  manage.py migrate,
i get this.

```
(ecommerce) F:\milven\projects-robobo\ecommerce\saleor>manage.py migrate
Traceback (most recent call last):
  File ""F:\milven\projects-robobo\ecommerce\saleor\manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\management\__init__.py"", line 371, in execute_from_command_l
ne
    utility.execute()
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\management\__init__.py"", line 317, in execute
    settings.INSTALLED_APPS
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\conf\__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\conf\__init__.py"", line 43, in _setup
    self._wrapped = Settings(settings_module)
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\conf\__init__.py"", line 106, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""C:\Users\arnal_000\AppData\Local\Programs\Python\Python36-32\lib\importlib\__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 941, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""F:\milven\projects-robobo\ecommerce\saleor\saleor\__init__.py"", line 1, in <module>
    from .celeryconf import app as celery_app
  File ""F:\milven\projects-robobo\ecommerce\saleor\saleor\celeryconf.py"", line 4, in <module>
    from celery import Celery
ModuleNotFoundError: No module named 'celery'

(ecommerce) F:\milven\projects-robobo\ecommerce\saleor>
```"
4727,mirumee,saleor,21,closed,1989,24,https://api.github.com/repos/mirumee/saleor/issues/1989/comments,https://github.com/mirumee/saleor/issues/1989,[],unable to install Saleor,"OS: macOS High Sierra 10.13.3
node.js version: 8.10.0
postgreSQL version: 10.3.
Command Line Tool macOS 10.13 for Xcode 9.3 beta
Homebrew: checked
Python: checked

I clone the repo, enter the directory, run:

> pip install -r requirements.txt

and that's what i get back

> \Collecting amqp==2.2.2 (from -r requirements.txt (line 7))
  Using cached amqp-2.2.2-py2.py3-none-any.whl
Collecting asn1crypto==0.24.0 (from -r requirements.txt (line 8))
  Using cached asn1crypto-0.24.0-py2.py3-none-any.whl
^R
Collecting attrs==17.4.0 (from -r requirements.txt (line 9))
  Using cached attrs-17.4.0-py2.py3-none-any.whl
Collecting babel==2.5.3 (from -r requirements.txt (line 10))
  Using cached Babel-2.5.3-py2.py3-none-any.whl
Collecting billiard==3.5.0.3 (from -r requirements.txt (line 11))
  Using cached billiard-3.5.0.3.tar.gz
Collecting bleach==2.1.3 (from -r requirements.txt (line 12))
  Using cached bleach-2.1.3-py2.py3-none-any.whl
Collecting boto3==1.5.31 (from -r requirements.txt (line 13))
  Using cached boto3-1.5.31-py2.py3-none-any.whl
Collecting botocore==1.8.45 (from -r requirements.txt (line 14))
  Using cached botocore-1.8.45-py2.py3-none-any.whl
Collecting braintree==3.39.1 (from -r requirements.txt (line 15))
  Using cached braintree-3.39.1-py2.py3-none-any.whl
Collecting cairocffi==0.8.0 (from -r requirements.txt (line 16))
  Using cached cairocffi-0.8.0.tar.gz
Collecting cairosvg==2.1.3 (from -r requirements.txt (line 17))
  Could not find a version that satisfies the requirement cairosvg==2.1.3 (from -r requirements.txt (line 17)) (from versions: 2.0.0rc1.linux-x86_64, 2.1.3.linux-x86_64, 0.1, 0.1.1, 0.1.2, 0.2, 0.3, 0.3.1, 0.4, 0.4.1, 0.4.2, 0.4.3, 0.4.4, 0.5, 1.0, 1.0.1, 1.0.2, 1.0.3, 1.0.4, 1.0.5, 1.0.6, 1.0.7, 1.0.8, 1.0.9, 1.0.10, 1.0.11, 1.0.12, 1.0.13, 1.0.14, 1.0.15, 1.0.16, 1.0.17, 1.0.18, 1.0.19, 1.0.20, 1.0.21, 1.0.22, 2.0.0rc2, 2.0.0rc3, 2.0.0rc4, 2.0.0rc5, 2.0.0rc6, 2.0.0, 2.0.1, 2.0.2, 2.0.3, 2.1.0, 2.1.1, 2.1.2)
No matching distribution found for cairosvg==2.1.3 (from -r requirements.txt (line 17))

I can't move forward because of this, when i run 

> python manage.py migrate

i get 

> Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 308, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 110, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/local/Cellar/python@2/2.7.14_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/adi/saleor/saleor/__init__.py"", line 1, in <module>
    from .celeryconf import app as celery_app
  File ""/Users/adi/saleor/saleor/celeryconf.py"", line 3, in <module>
    from celery import Celery
ImportError: No module named celery

Any ideas what's wrong? I would appreciate any help. "
4734,mirumee,saleor,21,closed,1982,9,https://api.github.com/repos/mirumee/saleor/issues/1982/comments,https://github.com/mirumee/saleor/issues/1982,[],Error: Cannot find module 'C:\Users\vio\Desktop\My_Django_stuff\saleor\node_modules\webpack\bin\webpack.js',"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve

...

### Steps to reproduce the problem

1.
2.

### What I expected to happen

...

### What happened instead/how it failed
npm run build-assets 
...
show me this error 
(Please include a stack trace if this problem results in a crash.)
> saleor@0.0.0 build-assets C:\Users\vio\Desktop\My_Django_stuff\saleor
> node ./node_modules/webpack/bin/webpack.js -p --progress

module.js:557
    throw err;
    ^

Error: Cannot find module 'C:\Users\vio\Desktop\My_Django_stuff\saleor\node_modules\webpack\bin\webpack.js'
    at Function.Module._resolveFilename (module.js:555:15)

    at Function.Module._load (module.js:482:25)
    at Function.Module.runMain (module.js:701:10)
    at startup (bootstrap_node.js:190:16)
    at bootstrap_node.js:662:3
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! saleor@0.0.0 build-assets: `node ./node_modules/webpack/bin/webpack.js -p --progress`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the saleor@0.0.0 build-assets script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\vio\AppData\Roaming\npm-cache\_logs\2018-03-27T07_30_32_261Z-debug.log

And I am update node sass to 4.7.x and my node version is 9.5

How do I fix this problem ??"
4784,mirumee,saleor,22,closed,1929,10,https://api.github.com/repos/mirumee/saleor/issues/1929/comments,https://github.com/mirumee/saleor/pull/1929,"[{""default"": false, ""name"": ""dashboard 1.0"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/dashboard%201.0"", ""color"": ""afffcb"", ""node_id"": ""MDU6TGFiZWw0NTQyMjEwMDk="", ""id"": 454221009}, {""default"": false, ""name"": ""storefront 1.0"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/storefront%201.0"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw0NTQyMjEwOTQ="", ""id"": 454221094}]",Enable VAT,"This PR contains my attempt at implementing proper VAT handling in Saleor's core.

General assumptions:

- VAT is opt-in for stores that don't need it
- VAT calculation is configurable: Saleor may be configured to assume that entered prices are either net or gross

Fixes #824 and #742


### Note

Some changes introduced on the repo are temporary and used to help with implementing tax changes:

- Default country changed to PL (because its the country tax system I'm most familiar with, and geo2ip obv. doesn't work for `127.0.01`)
- Net and tax data on products lists

### TODO

* [x] Ducttape WIP `django-prices-vatlayer` branch that works with `prices==1.0.0`
* [x] Add some basic settings
* [x] Make sure that taxes and discounts update prices correctly
* [x] Swap around discount and price calculation
* [x] Test `Product.get_price_per_item()`, `Product.get_price_range()`, `Product.get_gross_price_range()` and `ProductVariant.get_price_per_item()` without discounts and taxes, discounts only, taxes only, discounts and taxes.
* [x] Support products exempt from vat
* [x] Add taxes to products lists (home, category and collections)
* [x] Add taxes to cart (dropdown and full)
* [x] Add taxes to checkout
* [x] Add tax computation to shipping types
* [x] Replace stopgaps `Product.tax_rate` (can be null) and `ProductType.tax_rate` (can be null) with proper model fields and dashboard UI
* [x] Calculate prices correctly with order discounts
* [x] Display taxes on order details
* [x] Make payments capture/return/release actions handle taxes
* [x] Display taxes on order details in dashboard
* [x] Display taxes on invoices
* [x] Remove debugging data (eg. net and tax details on products lists)
* [x] Add missing tests
* [x] Write guide for enabling VAT on your store

### Pull Request Checklist

(Please keep this section. It will make maintainer's life easier.)

1. [ ] Privileged views and APIs are guarded by proper permission checks.
1. [ ] All visible strings are translated with proper context.
1. [ ] All data-formatting is locale-aware (dates, numbers, and so on).
1. [ ] Database queries are optimized and the number of queries is constant.
1. [ ] The changes are tested.
1. [ ] The code is documented (docstrings, project documentation).
1. [ ] Python code quality checks pass: `pycodestyle`, `pydocstyle`, `pylint`.
1. [ ] JavaScript code quality checks pass: `eslint`.
"
4790,mirumee,saleor,22,closed,1922,2,https://api.github.com/repos/mirumee/saleor/issues/1922/comments,https://github.com/mirumee/saleor/issues/1922,[],Install saleor version v2018.02 failed,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve

I'm trying to install Saleor version v2018.02 in Window 7.
The Saleor version v2018.01 is worked

### Steps to reproduce the problem
python manage.py migrate 

### What I expected to happen
From django_prices.models import MoneyField
ImportError: cannot import name 'MoneyField'
...

### What happened instead/how it failed
![image](https://user-images.githubusercontent.com/9067918/37448300-5dde3c04-2858-11e8-8b30-6c85622df3c0.png)

...

(Please include a stack trace if this problem results in a crash.)
"
4813,mirumee,saleor,22,closed,1897,12,https://api.github.com/repos/mirumee/saleor/issues/1897/comments,https://github.com/mirumee/saleor/issues/1897,[],Saleor deployment to Heroku fails: ModuleNotFoundError: No module named 'celery',"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve

I was following the Deploy to Heroku button on the git page to deploy Saleor to Heroku. But the deployment failed with error: ModuleNotFoundError: No module named 'celery'


### Steps to reproduce the problem

1. Click the button on github page of Saleor
2. Fill the info required on Heroku to deploy it. 
3. It failes

### What I expected to happen

I expect the deployment to succeed but it failed. 

### What happened instead/how it failed

Not sure why, but I suspect there are issues with the current Saleor release in Git and it's causing the error on Celery. 

I also downloaded a copy of Saleor to my Mac and tried to deploy to Heroku through command line and ran into the same error. Even though it works fine on my Mac.  

(Please include a stack trace if this problem results in a crash.)

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 317, in execute
    settings.INSTALLED_APPS
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/conf/__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/conf/__init__.py"", line 43, in _setup
    self._wrapped = Settings(settings_module)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/conf/__init__.py"", line 106, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/app/.heroku/python/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 941, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/app/saleor/__init__.py"", line 1, in <module>
    from .celeryconf import app as celery_app
  File ""/app/saleor/celeryconf.py"", line 3, in <module>
    from celery import Celery
ModuleNotFoundError: No module named 'celery'
"
4820,mirumee,saleor,22,closed,1888,11,https://api.github.com/repos/mirumee/saleor/issues/1888/comments,https://github.com/mirumee/saleor/issues/1888,[],FileNotFoundError on Dashboard when deployed on Heroku,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
I wish to deploy my Saleor store on Heroku and load data from a DB dump with `python manage.py loaddata db.json` and that it works fine showing the products and the associated images.

### Steps to reproduce the problem

1. Deploy to Heroku with Git on the command line
2. Load data from a database dump
3. View store but it shows placeholder images

### What I expected to happen

1. Deploy to Heroku with Git on the command line
2. Load data from a database dump
3. View store showing product catalog with the right images

### What happened instead/how it failed

1. After loading database dump, images do not show despite `python manage.py collectstatic` shows that the images are there but they are probably not being referenced right.

![screen shot 2018-03-08 at 23 40 25](https://user-images.githubusercontent.com/405697/37175291-296fe20c-232a-11e8-9c21-33862f6bfbf6.png)


2. When I attempt to edit the products to change images on the dashboard, I get the following error:

![screen shot 2018-03-08 at 23 35 23](https://user-images.githubusercontent.com/405697/37175069-760c65fa-2329-11e8-9ba1-2999c7743274.png)

The settings for the STATIC and Whitenoise look as follows:

```
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')
STATIC_URL = '/static/'
STATICFILES_DIRS = [
    ('assets', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'assets')),
    ('images', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'images')),
    ('dashboard', os.path.join(PROJECT_ROOT, 'saleor', 'static', 'dashboard'))]
STATICFILES_FINDERS = [
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder']

MIDDLEWARE = [
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django_babel.middleware.LocaleMiddleware',
    'saleor.core.middleware.discounts',
    'saleor.core.middleware.google_analytics',
    'saleor.core.middleware.country',
    'saleor.core.middleware.currency',
    'saleor.core.middleware.site',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'social_django.middleware.SocialAuthExceptionMiddleware',
    'impersonate.middleware.ImpersonateMiddleware']

INSTALLED_APPS = [
    # External apps that need to go before django's
    'storages',

    # Django modules
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.sitemaps',
    'django.contrib.sites',
    'django.contrib.staticfiles',
    'django.contrib.auth',
    'django.contrib.postgres',
    'django.forms',

    # Local apps
    'saleor.account',
    'saleor.discount',
    'saleor.product',
    'saleor.cart',
    'saleor.checkout',
    'saleor.core',
    'saleor.graphql',
    'saleor.order.OrderAppConfig',
    'saleor.dashboard',
    'saleor.shipping',
    'saleor.search',
    'saleor.site',
    'saleor.data_feeds',

    # External apps
    'versatileimagefield',
    'django_babel',
    'bootstrap4',
    'django_fsm',
    'django_prices',
    'django_prices_openexchangerates',
    'graphene_django',
    'mptt',
    'payments',
    'webpack_loader',
    'social_django',
    'django_countries',
    'django_filters',
    'django_celery_results',
    'impersonate',
    'phonenumber_field']
```
Is there something I am missing? A WhiteNoise setting? Wrong way to load static files to Heroku due to differences between STATIC settings in Saleor and those in Whitenoise? What might I be doing wrong? Please help."
4833,mirumee,saleor,22,closed,1875,10,https://api.github.com/repos/mirumee/saleor/issues/1875/comments,https://github.com/mirumee/saleor/issues/1875,[],Issue installing Saleor on Windows,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
Getting Saleor up and running on Windows 8/10.
...

### Steps to reproduce the problem

1.Running python migrate.py
2.

### What I expected to happen
Install the DB and other settings
...

### What happened instead/how it failed
raise ImproperlyConfigured(""The SECRET_KEY setting must not be empty."")
django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.

This is the stack trace:
![screenshot - 06-mar-18 3_28_56 pm](https://user-images.githubusercontent.com/28978304/37032331-2c98af28-2153-11e8-8301-8407bde4029b.jpg)


This is the settings.py file:
![screenshot - 06-mar-18 3_39_10 pm](https://user-images.githubusercontent.com/28978304/37032728-9b1bb14c-2154-11e8-942f-036e74b8fd65.jpg)

After giving a random secret key, i get the message:
 from django.urls import path
ModuleNotFoundError: No module named 'django.urls'

My pip freeze is:
![screenshot - 06-mar-18 3_42_45 pm](https://user-images.githubusercontent.com/28978304/37032883-0fb43600-2155-11e8-9ea9-1a220e480821.jpg)

I dont know if the problem is the Django version i am running or the inability of manage.py to fetch a SECRET_KEY....
...

(Please include a stack trace if this problem results in a crash.)
"
4836,mirumee,saleor,22,closed,1872,1,https://api.github.com/repos/mirumee/saleor/issues/1872/comments,https://github.com/mirumee/saleor/issues/1872,"[{""default"": false, ""name"": ""blocker"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/blocker"", ""color"": ""ed2e21"", ""node_id"": ""MDU6TGFiZWw3ODI3OTgzMjI="", ""id"": 782798322}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",PayPal payment VALIDATION_ERROR ,"paypal response --> 

`{'name': 'VALIDATION_ERROR', 'details': [{'field': 'transactions.item_list.items', 'issue': ""Currency amount must be non-negative number, may optionally contain exactly 2 decimal places separated by '.', optional thousands separator ',', limited to 7 digits before the decimal point and currency which is a valid ISO Currency Code""}], 'message': 'Invalid request - see details', 'information_link': 'https://developer.paypal.com/docs/api/payments/#errors', 'debug_id': 'xxx'}
`

raw request post data: -->

{'data': '{""intent"": ""authorize"", ""transactions"": [{""amount"": {""total"": ""100.00"", ""currency"": ""HKD"", ""details"": {""subtotal"": ""100.00"", ""tax"": ""0.00"", ""shipping"": ""0.00""}}, ""item_list"": {""items"": [{""name"": ""product name"", ""quantity"": ""1"", ""price"": ""**Money(\'100.00\', \'HKD\')**"", ""currency"": ""HKD"", ""sku"": ""fandee-01""}]}, ""description"": ""xxxxx""}], ""redirect_urls"": {""return_url"": ""http://localhost:8000/process/xxxxx/"", ""cancel_url"": ""http://localhost:8000/process/xxxxx""}, ""payer"": {""payment_method"": ""paypal""}}', 'headers': {'Content-Type': 'application/json', 'Authorization': 'xxxx'}}

package version:

prices (1.0.0)
django-prices (1.0.0)
"
4840,mirumee,saleor,22,closed,1868,8,https://api.github.com/repos/mirumee/saleor/issues/1868/comments,https://github.com/mirumee/saleor/issues/1868,[],Payment confirmation status - 403 Forbidden,"I check the operation of dotpay payments from the django-payments package.
I have already eliminated most errors, but I receive now 403 Forbidden for the payment status.

After the payment process, the operator sends information about the payment status to the store:

<img width=""573"" alt=""zrzut ekranu 2018-03-05 o 10 35 19"" src=""https://user-images.githubusercontent.com/1561204/36967776-f850533a-2060-11e8-8cd5-63ee42fa99be.png"">

Where should I look for a solution?"
4843,mirumee,saleor,22,closed,1864,11,https://api.github.com/repos/mirumee/saleor/issues/1864/comments,https://github.com/mirumee/saleor/issues/1864,[],Graphql,"I get error in the backend when gql requests are sent for filtering products:

### What I'm trying to achieve
testing
...

### Steps to reproduce the problem
just installed the demo.

**INFO django.server ""POST /graphql HTTP/1.1"" 200 18793 [PID:18744:Thread-180]
INFO django.server ""POST /graphql HTTP/1.1"" 200 18793 [PID:18744:Thread-180]
ERROR graphql.execution.executor An error occurred while resolving field CategoryType.products [PID:18744:Thread-181]
Traceback (most recent call last):
  File ""/usr/local/lib/python3.5/dist-packages/graphql/execution/executor.py"", line 311, in resolve_or_error
    return executor.execute(resolve_fn, source, info, **args)
  File ""/usr/local/lib/python3.5/dist-packages/graphql/execution/executors/sync.py"", line 7, in execute
    return fn(*args, **kwargs)
  File ""/usr/local/lib/python3.5/dist-packages/graphene_django/debug/middleware.py"", line 56, in resolve
    promise = next(root, info, **args)
  File ""/usr/local/lib/python3.5/dist-packages/graphql/execution/middleware.py"", line 57, in make_it_promise
    return Promise.resolve(next(*a, **b))
  File ""/usr/local/lib/python3.5/dist-packages/graphene_django/fields.py"", line 128, in connection_resolver
    return on_resolve(iterable)
  File ""/usr/local/lib/python3.5/dist-packages/graphene_django/fields.py"", line 80, in resolve_connection
    iterable = cls.merge_querysets(default_queryset, iterable)
  File ""/usr/local/lib/python3.5/dist-packages/graphene_django/fields.py"", line 70, in merge_querysets
    return queryset & default_queryset
  File ""/usr/local/lib/python3.5/dist-packages/django/db/models/query.py"", line 317, in __and__
    combined.query.combine(other.query, sql.AND)
  File ""/usr/local/lib/python3.5/dist-packages/django/db/models/sql/query.py"", line 525, in combine
    ""Cannot combine a unique query with a non-unique query.""
AssertionError: Cannot combine a unique query with a non-unique query.
Traceback (most recent call last):
  File ""/usr/local/lib/python3.5/dist-packages/graphql/execution/executor.py"", line 330, in complete_value_catching_error
    exe_context, return_type, field_asts, info, result)
  File ""/usr/local/lib/python3.5/dist-packages/graphql/execution/executor.py"", line 383, in complete_value
    raise GraphQLLocatedError(field_asts, original_error=result)
graphql.error.located_error.GraphQLLocatedError: Cannot combine a unique query with a non-unique query.

**"
4846,mirumee,saleor,22,closed,1861,2,https://api.github.com/repos/mirumee/saleor/issues/1861/comments,https://github.com/mirumee/saleor/issues/1861,[],ImportError: No module named 'html5lib.filters.base',"### What I'm trying to achieve

Following the installation instructions

### Steps to reproduce the problem

`python manage.py runserver`

### What I expected to happen

Expected server to start

### What happened instead/how it failed

```
/home/developer/.local/lib/python3.5/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use ""pip install psycopg2-binary"" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.

  """""")

/home/developer/.local/lib/python3.5/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use ""pip install psycopg2-binary"" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.

  """""")

Performing system checks...

 

Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7efd678e4840>

Traceback (most recent call last):

  File ""/home/developer/.local/lib/python3.5/site-packages/django/utils/autoreload.py"", line 225, in wrapper

    fn(*args, **kwargs)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/management/commands/runserver.py"", line 121, in inner_run

    self.check(display_num_errors=True)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/management/base.py"", line 364, in check

    include_deployment_checks=include_deployment_checks,

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/management/base.py"", line 351, in _run_checks

    return checks.run_checks(**kwargs)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/checks/registry.py"", line 73, in run_checks

    new_errors = check(app_configs=app_configs)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/checks/urls.py"", line 13, in check_url_config

    return check_resolver(resolver)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/core/checks/urls.py"", line 23, in check_resolver

    return check_method()

  File ""/home/developer/.local/lib/python3.5/site-packages/django/urls/resolvers.py"", line 397, in check

    for pattern in self.url_patterns:

  File ""/home/developer/.local/lib/python3.5/site-packages/django/utils/functional.py"", line 36, in __get__

    res = instance.__dict__[self.name] = self.func(instance)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/urls/resolvers.py"", line 536, in url_patterns

    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/utils/functional.py"", line 36, in __get__

    res = instance.__dict__[self.name] = self.func(instance)

  File ""/home/developer/.local/lib/python3.5/site-packages/django/urls/resolvers.py"", line 529, in urlconf_module

    return import_module(self.urlconf_name)

  File ""/usr/lib/python3.5/importlib/__init__.py"", line 126, in import_module

    return _bootstrap._gcd_import(name[level:], package, level)

  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import

  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load

  File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked

  File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked

  File ""<frozen importlib._bootstrap_external>"", line 665, in exec_module

  File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed

  File ""/home/developer/saleor/saleor/urls.py"", line 14, in <module>

    from .dashboard.urls import urlpatterns as dashboard_urls

  File ""/home/developer/saleor/saleor/dashboard/urls.py"", line 13, in <module>

    from .product.urls import urlpatterns as product_urls

  File ""/home/developer/saleor/saleor/dashboard/product/urls.py"", line 3, in <module>

    from . import views

  File ""/home/developer/saleor/saleor/dashboard/product/views.py"", line 12, in <module>

    from . import forms

  File ""/home/developer/saleor/saleor/dashboard/product/forms.py"", line 1, in <module>

    import bleach

  File ""/home/developer/.local/lib/python3.5/site-packages/bleach/__init__.py"", line 8, in <module>

    from bleach.linkifier import (

  File ""/home/developer/.local/lib/python3.5/site-packages/bleach/linkifier.py"", line 6, in <module>

    from html5lib.filters.base import Filter

ImportError: No module named 'html5lib.filters.base'

```
"
4848,mirumee,saleor,23,closed,1859,34,https://api.github.com/repos/mirumee/saleor/issues/1859/comments,https://github.com/mirumee/saleor/issues/1859,[],"relation ""account_user"" does not exist","I'm not sure why this error is thrown. I can't find any account_user relation.

### What I'm trying to achieve
To install the master branch
...

### Steps to reproduce the problem
as provided by the documentation


(Please include a stack trace if this problem results in a crash.)
ubuntu@ip-172-31-17-237:~/saleor$ python3 manage.py migrate
/usr/local/lib/python3.4/dist-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release
2.8; in order to keep installing from binary please use ""pip install psycopg2-binary"" instead. For details see: <http://initd.org/psyc
opg/docs/install.html#binary-install-from-pypi>.
  """""")
System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
        HINT: User sessions need to be globally shared, use a cache server like Redis.
Operations to perform:
  Apply all migrations: auth, contenttypes, django_celery_results, django_prices_openexchangerates, impersonate, sessions, sites, soci
al_django
Running migrations:
  Applying impersonate.0001_initial...Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
psycopg2.ProgrammingError: relation ""account_user"" does not exist


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.4/dist-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.4/dist-packages/django/core/management/__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.4/dist-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/local/lib/python3.4/dist-packages/django/core/management/base.py"", line 335, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python3.4/dist-packages/django/core/management/commands/migrate.py"", line 200, in handle
    fake_initial=fake_initial,
  File ""/usr/local/lib/python3.4/dist-packages/django/db/migrations/executor.py"", line 117, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/migrations/executor.py"", line 147, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/base/schema.py"", line 90, in __exit__
    self.execute(sql)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/base/schema.py"", line 117, in execute
 File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/base/schema.py"", line 117, in execute
    cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 100, in execute
    return super().execute(sql, params)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 68, in execute
    return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 77, in _execute_with_wrappers
    return executor(sql, params, many, context)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/utils.py"", line 89, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File ""/usr/local/lib/python3.4/dist-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: relation ""account_user"" does not exist
"
4852,mirumee,saleor,23,closed,1854,3,https://api.github.com/repos/mirumee/saleor/issues/1854/comments,https://github.com/mirumee/saleor/issues/1854,[],list object has no attribute 'lower',"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
The only change I made was to use sqlite3 instead of postgres.
...

### Steps to reproduce the problem

1.Simply checked out from git
2. replaced the database directive
 it failed

...

(Please include a stack trace if this problem results in a crash.)
Starting development server at http://0:8000/
Quit the server with CONTROL-C.
ERROR django.request Internal Server Error: / [PID:23989:Thread-1]
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/django/core/handlers/exception.py"", line 35, in inner
    response = get_response(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/utils/deprecation.py"", line 93, in __call__
    response = self.process_request(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/middleware/common.py"", line 55, in process_request
    host = request.get_host()
  File ""/usr/local/lib/python3.4/dist-packages/django/http/request.py"", line 97, in get_host
    if domain and validate_host(domain, allowed_hosts):
  File ""/usr/local/lib/python3.4/dist-packages/django/http/request.py"", line 565, in validate_host
    if pattern == '*' or is_same_domain(host, pattern):
  File ""/usr/local/lib/python3.4/dist-packages/django/utils/http.py"", line 273, in is_same_domain
    pattern = pattern.lower()
AttributeError: 'list' object has no attribute 'lower'
ERROR django.request Internal Server Error: / [PID:23989:Thread-1]
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/django/core/handlers/exception.py"", line 35, in inner
    response = get_response(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/utils/deprecation.py"", line 93, in __call__
    response = self.process_request(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/middleware/common.py"", line 55, in process_request
    host = request.get_host()
  File ""/usr/local/lib/python3.4/dist-packages/django/http/request.py"", line 97, in get_host
    if domain and validate_host(domain, allowed_hosts):
  File ""/usr/local/lib/python3.4/dist-packages/django/http/request.py"", line 565, in validate_host
    if pattern == '*' or is_same_domain(host, pattern):
  File ""/usr/local/lib/python3.4/dist-packages/django/utils/http.py"", line 273, in is_same_domain
    pattern = pattern.lower()
AttributeError: 'list' object has no attribute 'lower'
ERROR django.server ""GET / HTTP/1.1"" 500 83661 [PID:23989:Thread-1]
ERROR django.server ""GET / HTTP/1.1"" 500 83661 [PID:23989:Thread-1]
ERROR django.server ""GET / HTTP/1.1"" 500 83661 [PID:23989:Thread-1]
"
4876,mirumee,saleor,23,closed,1830,3,https://api.github.com/repos/mirumee/saleor/issues/1830/comments,https://github.com/mirumee/saleor/issues/1830,[],Localization of duplicate email account doesn't make sense,"I saw this weird thing in post production when I was creating a customer account that was already registered.

![](https://i.imgur.com/DIT6uHC.png)

![](https://i.imgur.com/SXlwkvt.png)

---

Edit: note, the untranslated string is ` User with this Email already exists. `

---

I'm not quite sure how to explain this, it doesn't make sense in other language, but make sense in English. It's understandable for a French or a Polish for example but doesn't make real sense it shouldn't be that way, it looks like a debug string (as a dev).

I will wait to hear back from you. I also know it's not from your side, so I'm not quite sure of what you can do about this.

The error is generated by `django.db.models.base.Model#unique_error_message` (sourcing from `django.forms.models.BaseModelForm#_post_clean`).
```python
    def unique_error_message(self, model_class, unique_check):
        opts = model_class._meta

        params = {
            'model': self,
            'model_class': model_class,
            'model_name': capfirst(opts.verbose_name),
            'unique_check': unique_check,
        }

        # A unique field
        if len(unique_check) == 1:
            field = opts.get_field(unique_check[0])
            params['field_label'] = capfirst(field.verbose_name)
            return ValidationError(
                message=field.error_messages['unique'],
                code='unique',
                params=params,
            )

        # unique_together
        else:
            field_labels = [capfirst(opts.get_field(f).verbose_name) for f in unique_check]
            params['field_labels'] = get_text_list(field_labels, _('and'))
            return ValidationError(
                message=_(""%(model_name)s with this %(field_labels)s already exists.""),
                code='unique_together',
                params=params,
            )
            # ^^^^^^
```"
4889,mirumee,saleor,23,closed,1815,4,https://api.github.com/repos/mirumee/saleor/issues/1815/comments,https://github.com/mirumee/saleor/issues/1815,[],getting error while running local server: AttributeError: 'list' object has no attribute 'lower';,"- Error occurred while running the server
- all dependancies installed properly.
- created new user 'saleor' for postgre as well.
- working on MacOS High Sierra.

```
ERROR django.request Internal Server Error: / [PID:6282:Thread-1]
File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 35, in inner
    response = get_response(request)
  File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/utils/deprecation.py"", line 93, in __call__
    response = self.process_request(request)
  File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/middleware/common.py"", line 55, in process_request
    host = request.get_host()
  File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/http/request.py"", line 97, in get_host
    if domain and validate_host(domain, allowed_hosts):
  File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/http/request.py"", line 565, in validate_host
    if pattern == '*' or is_same_domain(host, pattern):
  File ""/Users/purnendushukla/anaconda3/envs/saleor/lib/python3.6/site-packages/django/utils/http.py"", line 273, in is_same_domain
    pattern = pattern.lower()
AttributeError: 'list' object has no attribute 'lower'
```"
4890,mirumee,saleor,23,closed,1814,3,https://api.github.com/repos/mirumee/saleor/issues/1814/comments,https://github.com/mirumee/saleor/issues/1814,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]","AttributeChoiceValue, slug field max length is much less than max length of name field","Branch: Master

### What I'm trying to achieve
Adding an attribute value that is longer than 50 characters (max allowed is 100)

### Steps to reproduce the problem

1.  Add an attribute choice value of greater than 50
2.  The slug field will throw a constraint error because it defaults to only 50

### What I expected to happen
Slug field should match length of name field

### What happened instead/how it failed
Constraint DB error gets thrown

django.db.utils.DataError: value too long for type character varying(50)
"
4894,mirumee,saleor,23,closed,1810,0,https://api.github.com/repos/mirumee/saleor/issues/1810/comments,https://github.com/mirumee/saleor/issues/1810,[],ImportError: cannot import name SubfieldBase,"i am trying to install saleor , when i run `python manage.py migrate
`  it is giving this error`
from django.db.models import SubfieldBase
ImportError: cannot import name SubfieldBase
`
i have **Django (1.11.10)**.. i read in some posts SubfieldBase support for Django (1.11.10) is deprecated. what do we need to do in this case?

i am unable to migrate the db. please help me 
"
4913,mirumee,saleor,23,closed,1787,2,https://api.github.com/repos/mirumee/saleor/issues/1787/comments,https://github.com/mirumee/saleor/issues/1787,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Deleting an item leading the cart to be empty leads to exception,"(Please take the time and describe the problem you're having before you propose a solution.)

### What I'm trying to achieve
Empty a cart.

### Steps to reproduce the problem

First method:
1. Add an item to the cart;
2. Go to cart;
3. (optional) open the debugger to see the network request failing;
3. Remove the item from cart;
4. The code makes a request to `/cart/shipingoptions/` which leads to an exception (not directly visible).

Second method:
1. Have an empty cart;
2. Send a `POST` request to the endpoint `/cart/shipingoptions/` with a country;
3. It should make an exception.

or run

```python
    response = client.post('/cart/shipingoptions/', {'country': 'US'})
    assert response.status_code == 200
```


### What happened instead/how it failed

```
Note: price = '<< MISSING VARIABLE ""price_range.min_price"" >>'

ERROR django.request Internal Server Error: /cart/shipingoptions/ [PID:23255:Thread-29]
Traceback (most recent call last):
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/response.py"", line 107, in render
    self.content = self.rendered_content
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/response.py"", line 84, in rendered_content
    content = template.render(context, self._request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 207, in render
    return self._render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/defaulttags.py"", line 411, in render
    return strip_spaces_between_tags(self.nodelist.render(context).strip())
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/library.py"", line 245, in render
    return t.render(new_context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 209, in render
    return self._render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/library.py"", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django_prices/templatetags/prices_i18n.py"", line 73, in gross
    return format_price(price.gross, price.currency, html, normalize)
AttributeError: 'str' object has no attribute 'gross'
ERROR django.request Internal Server Error: /cart/shipingoptions/ [PID:23255:Thread-29]
Traceback (most recent call last):
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/response.py"", line 107, in render
    self.content = self.rendered_content
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/response.py"", line 84, in rendered_content
    content = template.render(context, self._request)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 207, in render
    return self._render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/defaulttags.py"", line 411, in render
    return strip_spaces_between_tags(self.nodelist.render(context).strip())
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/library.py"", line 245, in render
    return t.render(new_context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 209, in render
    return self._render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/template/library.py"", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django_prices/templatetags/prices_i18n.py"", line 73, in gross
    return format_price(price.gross, price.currency, html, normalize)
AttributeError: 'str' object has no attribute 'gross'
```
"
4961,mirumee,saleor,24,closed,1735,0,https://api.github.com/repos/mirumee/saleor/issues/1735/comments,https://github.com/mirumee/saleor/issues/1735,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Entering an attribute value with characters in a variant product,"If a variant product has an attribute without values associated to it and then, saleor decides to return a char field instead of a choice field. So if we enter an attribute value for this product variant, it makes saleor crash when opening the product on the storefront because it's thinking it's a pk.

Example:
1. A dummy attribute without values
![dummy attribute without values](https://i.imgur.com/NqeceAq.png)

---

2. Then, a product variant where we define a non integer value (otherwise, saleor thinks it's a pk) ![](https://i.imgur.com/rU9kmtZ.png)


```
Environment:


Request Method: GET
Request URL: http://0.0.0.0:4999/products/abant-4/

Django Version: 1.11.9
Python Version: 3.6.4
Installed Applications:
['storages',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.auth',
 'django.contrib.postgres',
 'django.forms',
 'saleor.userprofile',
 'saleor.discount',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.graphql',
 'saleor.order.OrderAppConfig',
 'saleor.dashboard',
 'saleor.shipping',
 'saleor.search',
 'saleor.site',
 'saleor.data_feeds',
 'versatileimagefield',
 'django_babel',
 'bootstrap4',
 'django_fsm',
 'django_prices',
 'django_prices_openexchangerates',
 'graphene_django',
 'mptt',
 'payments',
 'webpack_loader',
 'social_django',
 'django_countries',
 'django_filters',
 'django_celery_results',
 'impersonate',
 'phonenumber_field']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django_babel.middleware.LocaleMiddleware',
 'saleor.core.middleware.discounts',
 'saleor.core.middleware.google_analytics',
 'saleor.core.middleware.country',
 'saleor.core.middleware.currency',
 'saleor.core.middleware.site',
 'social_django.middleware.SocialAuthExceptionMiddleware',
 'impersonate.middleware.ImpersonateMiddleware']



Traceback:

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/sayuri/development/saleor_fork/saleor/product/views.py"" in product_details
  62.         product, request.discounts, request.currency)

File ""/home/sayuri/development/saleor_fork/saleor/product/utils.py"" in get_variant_picker_data
  192.                 int(variant_value))

Exception Type: ValueError at /products/abant-4/
Exception Value: invalid literal for int() with base 10: 'str value for the attribute that has no values!'
```"
4962,mirumee,saleor,24,closed,1734,2,https://api.github.com/repos/mirumee/saleor/issues/1734/comments,https://github.com/mirumee/saleor/issues/1734,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Products without variant make saleor crash,"(Please take the time and describe the problem you're having before you propose a solution.)

### Steps to reproduce the problem

1. Create a simple product without setting any variants
2. Open the product page from the storefront

### What happened instead/how it failed

```
Environment:


Request Method: GET
Request URL: http://0.0.0.0:4999/products/lambda-3/

Django Version: 1.11.9
Python Version: 3.6.4
Installed Applications:
['storages',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.auth',
 'django.contrib.postgres',
 'django.forms',
 'saleor.userprofile',
 'saleor.discount',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.graphql',
 'saleor.order.OrderAppConfig',
 'saleor.dashboard',
 'saleor.shipping',
 'saleor.search',
 'saleor.site',
 'saleor.data_feeds',
 'versatileimagefield',
 'django_babel',
 'bootstrap4',
 'django_fsm',
 'django_prices',
 'django_prices_openexchangerates',
 'graphene_django',
 'mptt',
 'payments',
 'webpack_loader',
 'social_django',
 'django_countries',
 'django_filters',
 'django_celery_results',
 'impersonate',
 'phonenumber_field']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django_babel.middleware.LocaleMiddleware',
 'saleor.core.middleware.discounts',
 'saleor.core.middleware.google_analytics',
 'saleor.core.middleware.country',
 'saleor.core.middleware.currency',
 'saleor.core.middleware.site',
 'social_django.middleware.SocialAuthExceptionMiddleware',
 'impersonate.middleware.ImpersonateMiddleware']



Traceback:

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/sayuri/development/saleor_fork/saleor/product/views.py"" in product_details
  57.         form = handle_cart_form(request, product, create_cart=False)[0]

File ""/home/sayuri/development/saleor_fork/saleor/product/utils.py"" in handle_cart_form
  102.         discounts=request.discounts)

File ""/home/sayuri/development/saleor_fork/saleor/product/forms.py"" in __init__
  45.         variant_field.update_field_data(self.product.variants, self.cart)

File ""/home/sayuri/development/saleor_fork/saleor/product/forms.py"" in update_field_data
  36.                 {'value': variants.all()[0].pk})

File ""/home/sayuri/py3venv/lib/python3.6/site-packages/django/db/models/query.py"" in __getitem__
  272.             return self._result_cache[k]

Exception Type: IndexError at /products/lambda-3/
Exception Value: list index out of range
```


Edit: happens as well on products having their product type with variants disabled."
5026,mirumee,saleor,24,closed,1667,1,https://api.github.com/repos/mirumee/saleor/issues/1667/comments,https://github.com/mirumee/saleor/issues/1667,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Exception doesn't have a 'message' attribute on Python3.4+,"### What I'm trying to achieve

Refunding a product from the dashboard that was paid using the dummy provider.


### Steps to reproduce the problem

1. Refund an order with an input higher than the captured amount
2. Look at the error stack console, it should fail

### What I expected to happen

A simple error message (`Payment gateway error: Refund amount can not be greater then captured amount `)

![pic](https://i.imgur.com/0Q4vTXn.png)
(notice the typo from [django-payments](https://github.com/mirumee/django-payments/blob/db6279d220085f83f3c85b46b12d46aa871c5433/payments/models.py#L161))

### What happened instead/how it failed

```
Traceback (most recent call last):
  File ""py3venv/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""py3venv/lib/python3.6/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""py3venv/lib/python3.6/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""py3venv/lib/python3.6/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""development/saleor/saleor/dashboard/order/views.py"", line 137, in refund_payment
    if form.is_valid() and form.refund():
  File ""development/saleor/saleor/dashboard/order/forms.py"", line 97, in refund
    return self.try_payment_action(self.payment.refund)
  File ""development/saleor/saleor/dashboard/order/forms.py"", line 75, in try_payment_action
    self.payment_error(e.message)
AttributeError: 'ValueError' object has no attribute 'message'
```

Edit: while I'm here, I would like to thank the whole team behind this project and all the contributors. You are doing a great job, working on such a clean, well structured code and repository, feels just great."
5053,mirumee,saleor,25,closed,1640,2,https://api.github.com/repos/mirumee/saleor/issues/1640/comments,https://github.com/mirumee/saleor/issues/1640,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Problems with creating voucher for category,"It seems that changes in the PR #1632 broke something in the voucher form in the dashboard. In the ""create voucher"" view in the dashboard, after selecting the discount type ""A category of products"", the category field shows up with an error:

![image](https://user-images.githubusercontent.com/5421321/35149441-592771e8-fd16-11e7-9ff5-1c2caa983c0c.png)

Second, after saving the voucher and going to it's ""edit"" view, the category is empty which means it wasn't saved in the first step.

Also, I'm unable to apply the newly created voucher in checkout, as it results in the error:

```
AttributeError at /checkout/shipping-address/
'NoneType' object has no attribute 'pk'

Traceback:

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/Users/marcin/mirumee/saleor/saleor/cart/utils.py"" in func
  207.             return view(request, cart, *args, **kwargs)

File ""/Users/marcin/mirumee/saleor/saleor/checkout/core.py"" in func
  413.         response = view(request, checkout, cart)

File ""/Users/marcin/mirumee/saleor/saleor/checkout/views/discount.py"" in func
  65.         return view(request, checkout, cart)

File ""/Users/marcin/mirumee/saleor/saleor/checkout/views/validators.py"" in func
  20.             return view(request, checkout)

File ""/Users/marcin/mirumee/saleor/saleor/checkout/views/validators.py"" in func
  72.         return view(request, checkout)

File ""/Users/marcin/mirumee/saleor/saleor/checkout/views/discount.py"" in func
  24.             if voucher_form.is_valid():

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/forms/forms.py"" in is_valid
  183.         return self.is_bound and not self.errors

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/forms/forms.py"" in errors
  175.             self.full_clean()

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/forms/forms.py"" in full_clean
  385.         self._clean_form()

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/django/forms/forms.py"" in _clean_form
  412.             cleaned_data = self.clean()

File ""/Users/marcin/mirumee/saleor/saleor/discount/forms.py"" in clean
  44.                 discount = voucher.get_discount_for_checkout(self.checkout)

File ""/Users/marcin/mirumee/saleor/saleor/discount/models.py"" in get_discount_for_checkout
  178.                         checkout.cart, self.category)))

File ""/Users/marcin/mirumee/saleor/saleor/discount/models.py"" in <genexpr>
  177.                     (item[1] for item in get_category_variants_and_prices(

File ""/Users/marcin/mirumee/saleor/saleor/cart/utils.py"" in get_category_variants_and_prices
  80.         if product.category.is_descendant_of(root_category, include_self=True):

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/mptt/models.py"" in _fn
  397.         return func(self, *args, **kwargs)

File ""/Users/marcin/.pyenv/versions/saleor/lib/python3.6/site-packages/mptt/models.py"" in is_descendant_of
  770.         if include_self and other.pk == self.pk:

Exception Type: AttributeError at /checkout/shipping-address/
Exception Value: 'NoneType' object has no attribute 'pk'
```
"
5076,mirumee,saleor,25,closed,1616,0,https://api.github.com/repos/mirumee/saleor/issues/1616/comments,https://github.com/mirumee/saleor/issues/1616,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]","404 not supported for ""Packing slips"" and ""Invoices"" views","When accessing ""Packing slips"" or ""Invoices"" views with IDs of non-existing objects:
```
ERROR django.request Internal Server Error: /dashboard/orders/123/packing-slips/ 
saleor.order.models.DoesNotExist: DeliveryGroup matching query does not exist.
```
Looks like missing `get_object_or_404`."
5154,mirumee,saleor,26,closed,1536,14,https://api.github.com/repos/mirumee/saleor/issues/1536/comments,https://github.com/mirumee/saleor/issues/1536,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Error generating a packing slip,"
### What I'm trying to achieve

I am clicking on Packing slip on an order.

### Steps to reproduce the problem

1. Create an order
2. Log as an administrator
3. Find the order
4. Click on packing slip.

### What I expected to happen

I was expecting to get a page displaying the packing slip to print.

### What happened instead/how it failed

It generate an eror stack as below.

Request Method: | GET
-- | --
http://127.0.0.1:8000/dashboard/orders/21/packing-slips/
1.11.5
AttributeError
'NoneType' object has no attribute '_meta'
/Users/jboutin/anaconda/lib/python3.5/site-packages/django/forms/models.py in model_to_dict, line 88
/Users/jboutin/anaconda/bin/python
3.5.4
['/Users/jboutin/workspaces/bookstore/saleor',  '/Users/jboutin/anaconda/lib/python35.zip',  '/Users/jboutin/anaconda/lib/python3.5',  '/Users/jboutin/anaconda/lib/python3.5/plat-darwin',  '/Users/jboutin/anaconda/lib/python3.5/lib-dynload',  '/Users/jboutin/anaconda/lib/python3.5/site-packages',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/Sphinx-1.6.3-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/aeosa',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/netaddr-0.7.19-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/scp-0.10.2-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/paramiko-2.3.1-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/ncclient-0.5.3-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/pyasn1-0.3.6-py3.5.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/PyNaCl-1.1.2-py3.5-macosx-10.7-x86_64.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/bcrypt-3.1.3-py3.5-macosx-10.7-x86_64.egg',  '/Users/jboutin/anaconda/lib/python3.5/site-packages/junos_eznc-1.1.2-py3.5.egg',  '/Users/jboutin/workspaces/bookstore/saleor']
dim, 31 Déc 2017 16:27:12 -0600

"
5157,mirumee,saleor,26,closed,1533,1,https://api.github.com/repos/mirumee/saleor/issues/1533/comments,https://github.com/mirumee/saleor/issues/1533,[],object() takes no parameters ,"I recently merged 2 months worth of commits to my local copy. Obviously, it is a big update for me but still managed to do complete the migration(required superuser) and installed the latest requirements.txt. But when I tried to run the server, it crashed.

I'm running on the following environment:
OS : Windows
Python : 3.6
Django : 1.11.5 (as per req.txt)

### Steps to reproduce the problem
1. git fetch
2. git merge
3. pip install -r requirements.txt
4. python manage.py migrate

Unfortunately, I'm too newbie to understand the problem. I'm suspecting the problem started with the error below
>mw_instance = middleware(handler)
TypeError: object() takes no parameters

Take note that my instance is working perfectly fine before the update.

Here's the full stack trace.
> Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x07885E40>
Traceback (most recent call last):
  File ""D:\django\shopenv\lib\site-packages\django\utils\autoreload.py"", line 228, in wrapper
    fn(*args, **kwargs)
  File ""D:\django\shopenv\lib\site-packages\django\core\management\commands\runserver.py"", line 147, in inner_run
    handler = self.get_handler(*args, **options)
  File ""D:\django\shopenv\lib\site-packages\django\contrib\staticfiles\management\commands\runserver.py"", line 28, in get_handler
    handler = super(Command, self).get_handler(*args, **options)
  File ""D:\django\shopenv\lib\site-packages\django\core\management\commands\runserver.py"", line 68, in get_handler
    return get_internal_wsgi_application()
  File ""D:\django\shopenv\lib\site-packages\django\core\servers\basehttp.py"", line 47, in get_internal_wsgi_application
    return import_string(app_path)
  File ""D:\django\shopenv\lib\site-packages\django\utils\module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""D:\django\shopenv\lib\importlib\__init__.py"", line 126, in import_module

  >  return _bootstrap._gcd_import(name[level:], package, level)
  > File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""D:\DJANGO\store\saleor\wsgi\__init__.py"", line 23, in <module>
    application = get_wsgi_application()
  File ""D:\django\shopenv\lib\site-packages\django\core\wsgi.py"", line 14, in get_wsgi_application
    return WSGIHandler()
  File ""D:\django\shopenv\lib\site-packages\django\core\handlers\wsgi.py"", line 151, in __init__
    self.load_middleware()
  File ""D:\django\shopenv\lib\site-packages\django\core\handlers\base.py"", line 82, in load_middleware
    mw_instance = middleware(handler)
TypeError: object() takes no parameters
mw_instance = middleware(handler)
TypeError: object() takes no parameters"
5164,mirumee,saleor,26,closed,1525,4,https://api.github.com/repos/mirumee/saleor/issues/1525/comments,https://github.com/mirumee/saleor/issues/1525,[],Elastic search error,"Hi everyone, I am deploying a saleor version but when I am trying to test the search with elastic_search I get the folliwing error:

```
GET http://207.210.229.227:9200/storefront__product_product/_search?from=0&_source=pk [status:404 request:0.030s]
Internal Server Error: /search/
Traceback (most recent call last):
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/root/dunes/saleor/search/views.py"", line 29, in search
    results = list(results)
  File ""/root/dunes/saleor/product/utils.py"", line 58, in products_with_availability
    for product in products:
  File ""/root/dunes/saleor/search/backends/base.py"", line 181, in __iter__
    return iter(self.results())
  File ""/root/dunes/saleor/search/backends/base.py"", line 147, in results
    self._results_cache = self._do_search()
  File ""/root/dunes/saleor/search/backends/elasticsearch.py"", line 447, in _do_search
    hits = self.backend.es.search(**params)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/utils.py"", line 73, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/__init__.py"", line 623, in search
    doc_type, '_search'), params=params, body=body)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/transport.py"", line 312, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/http_urllib3.py"", line 128, in perform_request
    self._raise_error(response.status, raw_data)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/base.py"", line 125, in _raise_error
    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
elasticsearch.exceptions.NotFoundError: <unprintable NotFoundError object>
GET http://207.210.229.227:9200/storefront__product_product/_search?size=21&_source=pk&from=0 [status:404 request:0.022s]
Traceback (most recent call last):
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/root/dunes/saleor/search/views.py"", line 29, in search
    results = list(results)
  File ""/root/dunes/saleor/product/utils.py"", line 58, in products_with_availability
    for product in products:
  File ""/root/dunes/saleor/search/backends/base.py"", line 181, in __iter__
    return iter(self.results())
  File ""/root/dunes/saleor/search/backends/base.py"", line 147, in results
    self._results_cache = self._do_search()
  File ""/root/dunes/saleor/search/backends/elasticsearch.py"", line 447, in _do_search
    hits = self.backend.es.search(**params)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/utils.py"", line 73, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/__init__.py"", line 623, in search
    doc_type, '_search'), params=params, body=body)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/transport.py"", line 312, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/http_urllib3.py"", line 128, in perform_request
    self._raise_error(response.status, raw_data)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/base.py"", line 125, in _raise_error
    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
elasticsearch.exceptions.NotFoundError: <unprintable NotFoundError object>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/template/defaultfilters.py"", line 969, in pprint
    return pformat(value)
  File ""/usr/lib/python3.5/pprint.py"", line 58, in pformat
    compact=compact).pformat(object)
  File ""/usr/lib/python3.5/pprint.py"", line 144, in pformat
    self._format(object, sio, 0, 0, {}, 0)
  File ""/usr/lib/python3.5/pprint.py"", line 161, in _format
    rep = self._repr(object, context, level)
  File ""/usr/lib/python3.5/pprint.py"", line 393, in _repr
    self._depth, level)
  File ""/usr/lib/python3.5/pprint.py"", line 405, in format
    return _safe_repr(object, context, maxlevels, level)
  File ""/usr/lib/python3.5/pprint.py"", line 555, in _safe_repr
    rep = repr(object)
  File ""/root/dunes/saleor/search/backends/base.py"", line 187, in __repr__
    data = list(self[:21])
  File ""/root/dunes/saleor/search/backends/base.py"", line 181, in __iter__
    return iter(self.results())
  File ""/root/dunes/saleor/search/backends/base.py"", line 147, in results
    self._results_cache = self._do_search()
  File ""/root/dunes/saleor/search/backends/elasticsearch.py"", line 447, in _do_search
    hits = self.backend.es.search(**params)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/utils.py"", line 73, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/client/__init__.py"", line 623, in search
    doc_type, '_search'), params=params, body=body)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/transport.py"", line 312, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/http_urllib3.py"", line 128, in perform_request
    self._raise_error(response.status, raw_data)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/connection/base.py"", line 125, in _raise_error
    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
elasticsearch.exceptions.NotFoundError: <unprintable NotFoundError object>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/lib/python3.5/wsgiref/handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/contrib/staticfiles/handlers.py"", line 63, in __call__
    return self.application(environ, start_response)
  File ""/root/dunes/saleor/wsgi/health_check.py"", line 7, in health_check_wrapper
    return application(environ, start_response)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 93, in response_for_exception
    response = handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 139, in handle_uncaught_exception
    return debug.technical_500_response(request, *exc_info)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/views/debug.py"", line 84, in technical_500_response
    html = reporter.get_traceback_html()
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/views/debug.py"", line 327, in get_traceback_html
    c = Context(self.get_traceback_data(), use_l10n=False)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/views/debug.py"", line 261, in get_traceback_data
    v = pprint(v)
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/template/defaultfilters.py"", line 971, in pprint
    return ""Error in formatting: %s: %s"" % (e.__class__.__name__, force_text(e, errors=""replace""))
  File ""/root/Env/dunes/lib/python3.5/site-packages/django/utils/encoding.py"", line 76, in force_text
    s = six.text_type(s)
  File ""/root/Env/dunes/lib/python3.5/site-packages/elasticsearch/exceptions.py"", line 55, in __str__
    cause = ', %r' % self.info['error']['root_cause'][0]['reason']
```

Can you help me guys?"
5165,mirumee,saleor,26,closed,1524,0,https://api.github.com/repos/mirumee/saleor/issues/1524/comments,https://github.com/mirumee/saleor/issues/1524,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",TypeError when configuring MAX_CART_LINE_QUANTITY via environment variable,"### What I'm trying to achieve
Add an item to a cart

### Steps to reproduce the problem
1. Configure MAX_CART_LINE_QUANTITY via environment variable
2. Attempt to add an item to the cart

### What I expected to happen
A new item is added to the cart

### What happened instead/how it failed
TypeError, returns status 500, item is not added to cart

```Traceback (most recent call last):
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/henry/Code/saleor/saleor/product/views.py"", line 94, in product_add_to_cart
    if form.is_valid():
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/forms.py"", line 183, in is_valid
    return self.is_bound and not self.errors
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/forms.py"", line 175, in errors
    self.full_clean()
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/forms.py"", line 384, in full_clean
    self._clean_fields()
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/forms.py"", line 402, in _clean_fields
    value = field.clean(value)
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/fields.py"", line 162, in clean
    self.run_validators(value)
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/forms/fields.py"", line 145, in run_validators
    v(value)
  File ""/home/henry/PythonVirtualenvs/saleor/lib/python3.5/site-packages/django/core/validators.py"", line 325, in __call__
    if self.compare(cleaned, self.limit_value):
  File ""/home/henry/PythonVirtuale

nvs/saleor/lib/python3.5/site-packages/django/core/validators.py"", line 349, in compare
    return a > b
TypeError: unorderable types: int() > str()

ERROR django.server ""POST /products/product-4/add/ HTTP/1.1"" 500 24428 [PID:32324:Thread-17]
```
python version: 3.5.4
django version: 1.11.5
most recent upstream commit: 0ec214a3deb606a951a268f7f83e659857be4dd7

Here's how I worked around:
[integer_cart_line_quantity.patch.txt](https://github.com/mirumee/saleor/files/1587457/integer_cart_line_quantity.patch.txt)
"
5168,mirumee,saleor,26,closed,1521,10,https://api.github.com/repos/mirumee/saleor/issues/1521/comments,https://github.com/mirumee/saleor/issues/1521,[],Heroku Deploy Error,"Hi!
Whenever I use heroku deploy button, I receive following error on step 4, run scripts & scale dynos.

> Shipping method #1
Shipping method #2
INFO elasticsearch POST https://birch-2016774.eu-west-1.bonsaisearch.net:443/_bulk?refresh=true [status:200 request:0.054s] [PID:11:MainThread]
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/app/saleor/core/management/commands/populatedb.py"", line 58, in handle
    stdout=self.stdout)
  File ""/app/saleor/core/utils/random_data.py"", line 245, in create_products_by_schema
    how_many=how_many, create_images=create_images, stdout=stdout)
  File ""/app/saleor/core/utils/random_data.py"", line 209, in create_products_by_class
    product = create_product(product_class=product_class)
  File ""/app/saleor/core/utils/random_data.py"", line 287, in create_product
    return Product.objects.create(**defaults)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/manager.py"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/query.py"", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/base.py"", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/base.py"", line 847, in save_base
    update_fields=update_fields, raw=raw, using=using,
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/dispatch/dispatcher.py"", line 193, in send
    for receiver in self._live_receivers(sender)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django/dispatch/dispatcher.py"", line 193, in <listcomp>
    for receiver in self._live_receivers(sender)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/signals.py"", line 51, in handle_save
    registry.update(instance)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/registries.py"", line 40, in update
    doc().update(instance, **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/documents.py"", line 216, in update
    self._get_actions(object_list, action), **kwargs
  File ""/app/.heroku/python/lib/python3.6/site-packages/django_elasticsearch_dsl/documents.py"", line 176, in bulk
    return bulk(client=self.connection, actions=actions, **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/helpers/__init__.py"", line 257, in bulk
    for ok, item in streaming_bulk(client, actions, **kwargs):
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/helpers/__init__.py"", line 192, in streaming_bulk
    raise_on_error, **kwargs)
  File ""/app/.heroku/python/lib/python3.6/site-packages/elasticsearch/helpers/__init__.py"", line 137, in _process_bulk_chunk
    raise BulkIndexError('%i document(s) failed to index.' % len(errors), errors)
elasticsearch.helpers.BulkIndexError: ('1 document(s) failed to index.', [{'index': {'_index': 'storefront', '_type': 'product_document', '_id': '1', 'status': 404, 'error': {'type': 'index_not_found_exception', 'reason': ""no such index and [action.auto_create_index] ([*logstash*,*requests*,*events*,*.kibana*,*kibana-int*,*filebeat*]) doesn't match"", 'index_uuid': '_na_', 'index': 'storefront'}, 'data': {'title': 'Day-Santana', 'name': 'Day-Santana', 'description': 'Harum et aliquam quo nemo aliquam voluptates magni. Incidunt eligendi adipisci temporibus magni adipisci. Consequuntur laudantium ut numquam soluta nisi possimus aut. Consectetur veniam ab est culpa unde amet.\n\nPossimus voluptatem necessitatibus magnam voluptatem provident laudantium dolore perferendis. Aliquid nostrum cupiditate earum cupiditate qui. Quas dolorum tempore magni recusandae ducimus.\n\nQuod fuga occaecati earum hic architecto rerum. Quae magnam repellendus placeat alias dicta vero. Repudiandae sed sequi velit voluptatum repudiandae itaque reiciendis.\n\nSimilique modi pariatur perspiciatis molestiae corrupti quod. Deleniti enim autem suscipit tempore. Qui pariatur repudiandae culpa maiores quisquam.\n\nProvident sint consectetur doloribus sint. Voluptas nemo enim suscipit consequuntur quo quaerat eligendi. Ipsa amet aliquid quaerat officia eligendi maxime.', 'is_published': True}}}])"
5170,mirumee,saleor,26,closed,1519,5,https://api.github.com/repos/mirumee/saleor/issues/1519/comments,https://github.com/mirumee/saleor/issues/1519,[],SiteSettings Primary Key error,"Hi guys

I get an error when i run `python manage.py migrate`

```bash
(handmade) ➜  saleor git:(master) ✗ python3 manage.py migrate
System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
	HINT: User sessions need to be globally shared, use a cache server like Redis.
Operations to perform:
  Apply all migrations: auth, cart, contenttypes, discount, django_celery_results, django_prices_openexchangerates, impersonate, order, product, sessions, shipping, site, sites, social_django, userprofile
Running migrations:
  Applying cart.0004_auto_20171129_1004... OK
  Applying discount.0006_auto_20171129_1004... OK
  Applying django_celery_results.0001_initial... OK
  Applying impersonate.0001_initial... OK
  Applying order.0019_auto_20171109_1423... OK
  Applying order.0020_auto_20171123_0609... OK
  Applying order.0021_auto_20171129_1004... OK
  Applying order.0022_auto_20171205_0428... OK
  Applying order.0023_auto_20171206_0506... OK
  Applying order.0024_remove_order_status... OK
  Applying order.0025_auto_20171214_1015... OK
  Applying order.0026_auto_20171218_0428... OK
  Applying product.0036_auto_20171115_0608... OK
  Applying product.0037_auto_20171124_0847... OK
  Applying product.0038_auto_20171129_0616... OK
  Applying product.0037_auto_20171129_1004... OK
  Applying product.0039_merge_20171130_0727... OK
  Applying product.0040_auto_20171205_0428... OK
  Applying product.0041_auto_20171205_0546... OK
  Applying product.0042_auto_20171206_0501... OK
  Applying product.0043_auto_20171207_0839... OK
  Applying shipping.0006_auto_20171109_0908... OK
  Applying shipping.0007_auto_20171129_1004... OK
  Applying site.0006_auto_20171025_0454... OK
  Applying site.0007_auto_20171027_0856...Traceback (most recent call last):
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 464, in get_or_create
    return self.get(**lookup), False
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 380, in get
    self.model._meta.object_name
__fake__.DoesNotExist: SiteSettings matching query does not exist.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
psycopg2.IntegrityError: duplicate key value violates unique constraint ""site_sitesettings_pkey""
DETAIL:  Key (id)=(1) already exists.


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/migrations/operations/special.py"", line 193, in database_forwards
    self.code(from_state.apps, schema_editor)
  File ""/Users/raybesiga/Projects/saleor/saleor/site/migrations/0007_auto_20171027_0856.py"", line 21, in link_to_sites
    defaults={'domain': site.domain, 'name': site.name})
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/manager.py"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 466, in get_or_create
    return self._create_object_from_params(lookup, params)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 506, in _create_object_from_params
    six.reraise(*exc_info)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/utils/six.py"", line 686, in reraise
    raise value
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 498, in _create_object_from_params
    obj = self.create(**params)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/base.py"", line 807, in save
    force_update=force_update, update_fields=update_fields)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/base.py"", line 837, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/base.py"", line 923, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/base.py"", line 962, in _do_insert
    using=using, raw=raw)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/manager.py"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/query.py"", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 1107, in execute_sql
    cursor.execute(sql, params)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/backends/utils.py"", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/Users/raybesiga/Projects/saleor/handmade/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
django.db.utils.IntegrityError: duplicate key value violates unique constraint ""site_sitesettings_pkey""
DETAIL:  Key (id)=(1) already exists.

(handmade) ➜  saleor git:(master) ✗
```
Should i delete the database and recreate it? I run `python manage.py migrate` before and got a urllib error so there should not be an issue. Please advise."
5192,mirumee,saleor,26,closed,1496,2,https://api.github.com/repos/mirumee/saleor/issues/1496/comments,https://github.com/mirumee/saleor/issues/1496,[],can not continue ; error ,"`Performing system checks...

System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
	HINT: User sessions need to be globally shared, use a cache server like Redis.

System check identified 1 issue (0 silenced).
Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x11465b048>
Traceback (most recent call last):
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 213, in ensure_connection
    self.connect()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 189, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 176, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
psycopg2.OperationalError: could not connect to server: Connection refused
	Is the server running on host ""localhost"" (::1) and accepting
	TCP/IP connections on port 5432?
could not connect to server: Connection refused
	Is the server running on host ""localhost"" (127.0.0.1) and accepting
	TCP/IP connections on port 5432?


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/utils/autoreload.py"", line 228, in wrapper
    fn(*args, **kwargs)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 128, in inner_run
    self.check_migrations()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/core/management/base.py"", line 422, in check_migrations
    executor = MigrationExecutor(connections[DEFAULT_DB_ALIAS])
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 20, in __init__
    self.loader = MigrationLoader(self.connection)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 52, in __init__
    self.build_graph()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/migrations/loader.py"", line 209, in build_graph
    self.applied_migrations = recorder.applied_migrations()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 65, in applied_migrations
    self.ensure_schema()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/migrations/recorder.py"", line 52, in ensure_schema
    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 254, in cursor
    return self._cursor()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 229, in _cursor
    self.ensure_connection()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 213, in ensure_connection
    self.connect()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 213, in ensure_connection
    self.connect()
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/base/base.py"", line 189, in connect
    self.connection = self.get_new_connection(conn_params)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/django/db/backends/postgresql/base.py"", line 176, in get_new_connection
    connection = Database.connect(**conn_params)
  File ""/Users/robiulislam/anaconda3/lib/python3.6/site-packages/psycopg2/__init__.py"", line 130, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: could not connect to server: Connection refused
	Is the server running on host ""localhost"" (::1) and accepting
	TCP/IP connections on port 5432?
could not connect to server: Connection refused
	Is the server running on host ""localhost"" (127.0.0.1) and accepting
	TCP/IP connections on port 5432?

`"
5193,mirumee,saleor,26,closed,1495,9,https://api.github.com/repos/mirumee/saleor/issues/1495/comments,https://github.com/mirumee/saleor/issues/1495,[],No module named parse,"Following the installation guide for Saleor in a virtualenv with Python 2.7. When I run the `python manage.py migrate` command. I get the following error:

```bash 
(saleor)➜  saleor git:(master) ✗ python manage.py migrate
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/raybesiga/.virtualenvs/saleor/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/Users/raybesiga/.virtualenvs/saleor/lib/python2.7/site-packages/django/core/management/__init__.py"", line 338, in execute
    django.setup()
  File ""/Users/raybesiga/.virtualenvs/saleor/lib/python2.7/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/raybesiga/.virtualenvs/saleor/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models()
  File ""/Users/raybesiga/.virtualenvs/saleor/lib/python2.7/site-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/raybesiga/Projects/saleor/saleor/discount/models.py"", line 14, in <module>
    from ..cart.utils import (
  File ""/Users/raybesiga/Projects/saleor/saleor/cart/utils.py"", line 15, in <module>
    from ..core.utils import to_local_currency
  File ""/Users/raybesiga/Projects/saleor/saleor/core/utils/__init__.py"", line 6, in <module>
    from urllib.parse import urljoin
ImportError: No module named parse
(saleor)➜  saleor git:(master) ✗
```

My pip installation is successful and when i run `pip freeze` the result is as below

```bash
(saleor)➜  saleor git:(master) ✗ pip freeze
amqp==2.2.2
asn1crypto==0.22.0
Babel==2.5.1
BabelDjango==0.2.2
billiard==3.5.0.3
boto==2.38.0
boto3==1.4.8
botocore==1.8.1
braintree==3.37.2
cairocffi==0.8.0
CairoSVG==1.0.22
celery==4.1.0
certifi==2017.7.27.1
cffi==1.10.0
chardet==3.0.4
contextlib2==0.5.5
cryptography==2.0.3
cssselect==0.9.1
cssselect2==0.2.1
cssutils==1.0
defusedxml==0.5.0
dj-database-url==0.4.2
dj-email-url==0.0.10
Django==1.11.5
django-absolute==0.3
django-babel==0.6.1
django-bootstrap3==9.0.0
django-cache-url==1.3.1
django-celery-results==1.0.1
django-countries==4.6.1
django-elasticsearch-dsl==0.4.1
django-emailit==0.2.2
django-filter==1.0.4
django-impersonate==1.1
django-model-utils==2.0.3
django-mptt==0.8.7
django-offsite-storage==0.0.5
django-payments==0.12.1
django-phonenumber-field==1.3.0
django-prices==0.7.0
django-prices-openexchangerates==0.1.15
django-redis==4.8.0
django-render-block==0.5
django-selectable==0.8.0
django-storages==1.6.5
django-templated-email==2.2.0
django-versatileimagefield==1.7.1
django-webpack-loader==0.5.0
dnspython==1.15.0
docutils==0.14
elasticsearch==5.5.1
elasticsearch-dsl==5.3.0
email-validator==1.0.2
enum34==1.1.6
fake-factory==0.5.2
Faker==0.8.3
freezegun==0.3.9
funcsigs==1.0.2
futures==3.2.0
google-i18n-address==2.0.3
google-measurement-protocol==0.1.6
graphene==2.0.1
graphene-django==2.0.0
graphql-core==2.0
graphql-relay==0.4.5
html5lib==0.999999999
idna==2.6
ipaddress==1.0.19
iso8601==0.1.12
jmespath==0.9.3
jsonfield==2.0.2
kombu==4.1.0
lxml==3.4.4
Markdown==2.6.9
maxminddb==1.3.0
maxminddb-geolite2==2017.803
mock==2.0.0
oauthlib==2.0.4
olefile==0.44
pbr==3.1.1
pdfrw==0.4
phonenumberslite==8.8.5
Pillow==4.0.0
premailer==2.9.2
prices==0.5.9
promise==2.1
psycopg2==2.7.3.1
purl==1.3.1
py==1.4.34
pycparser==2.18
pycrypto==2.6.1
PyJWT==1.5.3
Pyphen==0.9.4
pytest==3.2.2
pytest-django==3.1.2
pytest-mock==1.6.3
pytest-vcr==0.3.0
python-dateutil==2.6.1
python-openid==2.2.5
python3-openid==3.1.0
pytz==2017.2
PyYAML==3.12
redis==2.10.6
requests==2.18.4
requests-oauthlib==0.8.0
Rx==1.6.0
s3transfer==0.1.10
saleor==0.1.0a0
satchless==1.1.3
singledispatch==3.4.0.3
six==1.11.0
social-auth-app-django==2.0.0
social-auth-core==1.4.0
stripe==1.65.0
suds-jurko==0.6
text-unidecode==1.0
tinycss2==0.6.1
typing==3.6.2
Unidecode==0.4.18
urllib3==1.21.1
uWSGI==2.0.15
vcrpy==1.10.3
vine==1.1.4
WeasyPrint==0.41
webencodings==0.5.1
wrapt==1.10.11
xmltodict==0.11.0
(saleor)➜  saleor git:(master) ✗
```

I have followed the guide to the letter so I am wondering why this error arises?
"
5196,mirumee,saleor,26,closed,1492,0,https://api.github.com/repos/mirumee/saleor/issues/1492/comments,https://github.com/mirumee/saleor/issues/1492,[],Uploading Images,"
### What I'm trying to achieve
Uploading an Image via the dashboard Product/Variant detail

### Steps to reproduce the problem

1.Open the List of images view
2.Drop an image 

### What I expected to happen
My image gets correctly loaded and save in my Product

### What happened instead/how it failed
I find a form error 
```html
<tr><th><label for=""id_image_0"">Image:</label></th><td><ul class=""errorlist""><li>This field cannot be blank.</li></ul><div class=""versatileimagefield""><div class=""sizedimage-mod preview"">
  <label class=""versatileimagefield-label"">Primary Point of Interest</label>
  <div class=""image-wrap outer"">
    <div class=""point-stage"" id=""&lt;&lt; MISSING VARIABLE &quot;widget.point_stage_id&quot; &gt;&gt;""
         data-image_preview_id=""&lt;&lt; MISSING VARIABLE &quot;widget.image_preview_id&quot; &gt;&gt;"">
      <div class=""ppoi-point"" id=""&lt;&lt; MISSING VARIABLE &quot;widget.ppoi_id&quot; &gt;&gt;""></div>
    </div>
    
  </div>
</div>
<div class=""sizedimage-mod new-upload"">
  <label class=""versatileimagefield-label"">Change</label>
  <input type=""file"" name=""image_0""
 required class=""file-chooser"" id=""id_image_0""
 />
</div>
<input type=""hidden"" name=""image_1"" required class=""ppoi-input"" id=""id_image_1"" /></div></td></tr>
```
Probably is easy to resolve but i am kinda new to django forms so i need some help
"
5278,mirumee,saleor,27,closed,1406,0,https://api.github.com/repos/mirumee/saleor/issues/1406/comments,https://github.com/mirumee/saleor/issues/1406,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",KeyError u'sort_by' when user is goning to next page on lists with filters,"### What I'm trying to achieve

Go to some page on list with filters in dashboard.

### Steps to reproduce the problem

1. Go to /dashboard/products/?page=2

### What I expected to happen

Loaded page 2 of product list

### What happened instead/how it failed

KeyError at /dashboard/products/
u'sort_by'

ERROR django.request Internal Server Error: /dashboard/products/ [PID:14478:Thread-1]
Traceback (most recent call last):
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/michal/git/saleor/saleor/dashboard/product/views.py"", line 122, in product_list
    product_filter = ProductFilter(request.GET, queryset=products)
  File ""/home/michal/git/saleor/saleor/dashboard/filters.py"", line 14, in __init__
    del data_copy['sort_by']
  File ""/home/michal/envs/saleor27/lib/python2.7/site-packages/django/http/request.py"", line 441, in __delitem__
    super(QueryDict, self).__delitem__(key)
KeyError: u'sort_by'
"
5290,mirumee,saleor,27,closed,1393,4,https://api.github.com/repos/mirumee/saleor/issues/1393/comments,https://github.com/mirumee/saleor/issues/1393,[],use db mysql error ,"packet.check_error()
  File ""/usr/local/var/pyenv/versions/3.4.0/lib/python3.4/site-packages/pymysql/connections.py"", line 393, in check_error
    err.raise_mysql_exception(self._data)
  File ""/usr/local/var/pyenv/versions/3.4.0/lib/python3.4/site-packages/pymysql/err.py"", line 107, in raise_mysql_exception
    raise errorclass(errno, errval)
django.db.utils.InternalError: (1170, ""BLOB/TEXT column 'data' used in key specification without a key length"")"
5439,mirumee,saleor,28,closed,1234,2,https://api.github.com/repos/mirumee/saleor/issues/1234/comments,https://github.com/mirumee/saleor/issues/1234,[],Is PayPal payment variant really works?,"Tried different setting with sandbox and real connection but getting such error:

_Oops, it looks like we were unable to contact the selected payment service_

As I understand only changes in **settings.py** are needed. As I know there should be also signature generated by PayPal which is missing in this config. Is PayPal gateway works or something additional needs to be done? Here is the snippet from settings.py:

```
PAYMENT_HOST = get_host

PAYMENT_MODEL = 'order.Payment'

PAYMENT_VARIANTS = {
    'paypal': ('payments.paypal.PaypalProvider', {
        'client_id': 'user@example.com',
        'secret': 'iseedeadpeople',
        'endpoint': 'https://api.sandbox.paypal.com',
        'capture': False})}

SESSION_SERIALIZER = 'django.contrib.sessions.serializers.JSONSerializer'
SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'

CHECKOUT_PAYMENT_CHOICES = [
    ('paypal', 'PayPal')]

MESSAGE_TAGS = {
    messages.ERROR: 'danger'}
```"
5516,mirumee,saleor,29,closed,1156,9,https://api.github.com/repos/mirumee/saleor/issues/1156/comments,https://github.com/mirumee/saleor/issues/1156,[],"Struggling to install due to ""could not open hstore.control""","Hi can anyone help. I can't seem to get past installation step 4 in the documentation on Ubuntu 16.04 LTS.

I've installed the virtualenv, ran the install requirements.txt and export SECRET_KEY etc.

Then on python manage.py migrate I get this error:

```
  Applying product.0021_add_hstore_extension...Traceback (most recent call last):
  File ""/home/website/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
psycopg2.OperationalError: could not open extension control file ""/usr/share/postgresql/9.3/extension/hstore.control"": No such file or directory

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/website/lib/python3.5/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/home/website/lib/python3.5/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/website/lib/python3.5/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/website/lib/python3.5/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/website/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/home/website/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/website/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/website/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/website/lib/python3.5/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/website/lib/python3.5/site-packages/django/contrib/postgres/operations.py"", line 17, in database_forwards
    schema_editor.execute(""CREATE EXTENSION IF NOT EXISTS %s"" % schema_editor.quote_name(self.name))
  File ""/home/website/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 120, in execute
    cursor.execute(sql, params)
  File ""/home/website/lib/python3.5/site-packages/django/db/backends/utils.py"", line 80, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/website/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
  File ""/home/website/lib/python3.5/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/website/lib/python3.5/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/home/website/lib/python3.5/site-packages/django/db/backends/utils.py"", line 65, in execute
    return self.cursor.execute(sql, params)
django.db.utils.OperationalError: could not open extension control file ""/usr/share/postgresql/9.3/extension/hstore.control"": No such file or directory
```

On searching around I found that on Ubuntu you need to install postgresql-contrib too so I also did: sudo apt-get install postgresql postgresql-contrib

But that didn't help... Thanks again for any help getting Saleor up and running."
5561,mirumee,saleor,30,closed,1109,1,https://api.github.com/repos/mirumee/saleor/issues/1109/comments,https://github.com/mirumee/saleor/issues/1109,[],"portfolio.Price.currency: (fields.E300) Field defines a relation with model 'Currency', which is either not installed, or is abstract","SystemCheckError, when i run the command **_python ./manage.py migrate_**

Errors:

SystemCheckError: System check identified some issues:

ERRORS:

**portfolio.Price.currency: (fields.E300) Field defines a relation with model 'Currency', which is either not installed, or is abstract.
portfolio.Transaction.currency: (fields.E300) Field defines a relation with model 'Currency', which is either not installed, or is abstract.**


I'm quite new to Django. Can you help me how to solve this issue.

Any solutions? 

Thank you,
Ravin"
5563,mirumee,saleor,30,closed,1107,2,https://api.github.com/repos/mirumee/saleor/issues/1107/comments,https://github.com/mirumee/saleor/issues/1107,"[{""default"": false, ""name"": ""discussion"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/discussion"", ""color"": ""5319e7"", ""node_id"": ""MDU6TGFiZWwyODg4MTM4MzU="", ""id"": 288813835}, {""default"": false, ""name"": ""technical debt"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/technical%20debt"", ""color"": ""666666"", ""node_id"": ""MDU6TGFiZWw1MzQ5NDM1MjA="", ""id"": 534943520}]",Review requirements and decide which should be updated,"At the very least we should update Django to the latest build. Even though we don't use `DEBUG` in production we can't prevent any of our users from doing so.

https://requires.io/github/mirumee/saleor/requirements/?branch=master"
5577,mirumee,saleor,30,closed,1091,1,https://api.github.com/repos/mirumee/saleor/issues/1091/comments,https://github.com/mirumee/saleor/issues/1091,[],How to change default currency?,"edit setting file:

DEFAULT_COUNTRY = 'CN' #'US'
DEFAULT_CURRENCY = 'CNY' #'CNH' #'USD'

when click orders #18 in dashboard:

[23/Aug/2017 10:19:35] ""GET /jsi18n/ HTTP/1.1"" 200 3331
Internal Server Error: /dashboard/orders/18/
Traceback (most recent call last):
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/long/wagtailTranslation/saleor-master/saleor/dashboard/order/views.py"", line 65, in order_details
    balance = captured - order.get_total()
  File ""/home/long/wagtailTranslation/local/lib/python2.7/site-packages/prices/__init__.py"", line 138, in __sub__
    (other.currency, self.currency))
ValueError: Cannot subtract prices in u'CNY' from u'USD'
[23/Aug/2017 10:20:06] ""GET /dashboard/orders/18/ HTTP/1.1"" 500 102609
"
5595,mirumee,saleor,30,closed,1069,5,https://api.github.com/repos/mirumee/saleor/issues/1069/comments,https://github.com/mirumee/saleor/issues/1069,[],"elasticsearch 5 - TransportError(400, 'parsing_exception', 'no [query] registered for [missing]')","I try to run saleor with elasticsearch 5 and see django error:
`        TransportError(400, 'parsing_exception', 'no [query] registered for [missing]')`

I have:
1)
changed backend
    from:
`            'BACKEND': 'saleor.search.backends.elasticsearch2',`
    to:
`            'BACKEND': 'saleor.search.backends.elasticsearch5',`

2)
uninstalled python package (pip):
`            elasticsearch==2.4.1`
and installed:
`            elasticsearch==5.4.0 (elasticsearch>=5.0.0,<6.0.0)`

After change
from:
```
        'missing': {
            'field': column_name,
        }
```
to:
```
        ""bool"": {
            ""must_not"": {
                ""exists"": {
                    ""field"": ""user""
                }
            }
        }
```
in _saleor/search/backends/elasticsearch.py_
search works properly


Could you please perform some changes in _elasticsearch5.py_ in order for it to work from the box.
Thank you.
            "
5601,mirumee,saleor,30,closed,1062,0,https://api.github.com/repos/mirumee/saleor/issues/1062/comments,https://github.com/mirumee/saleor/issues/1062,[],TypeError with materializecss,"I go to http://127.0.0.1:8000/dashboard/products/

then show me the message 

Exception Type:  TypeError
context must be a dict rather than Context.

in dashboard/product/list.html 

I remove all templatetags ""materializecss"", the error is solved.

but i wnat to use materializecss how can I do


django version 1.11"
5605,mirumee,saleor,30,closed,1058,11,https://api.github.com/repos/mirumee/saleor/issues/1058/comments,https://github.com/mirumee/saleor/issues/1058,[],"Installation Issue: role ""saleor"" does not exist","I am following the installation instructions at http://saleor.readthedocs.io/en/latest/installation.html#installation

I've done steps 1-4 with no issues, however when I try to run 
`python manage.py migrate`
in step 5 I get the error django.db.utils.OperationalError: FATAL:  role ""saleor"" does not exist

I am installing on mac."
5629,mirumee,saleor,30,closed,1034,1,https://api.github.com/repos/mirumee/saleor/issues/1034/comments,https://github.com/mirumee/saleor/issues/1034,[],Add new user type (Documentation),"this is great e-commerce application from django, but many standard code from django framework has been gone (changing) for example when i use `admin/`, i got template error and i was curious bout this. Hence of that i search the problem and i was got the django framework has been changing. So how to give user new user type (user group) in this apps or is there documentation bout this allauth?"
5638,mirumee,saleor,30,closed,1024,13,https://api.github.com/repos/mirumee/saleor/issues/1024/comments,https://github.com/mirumee/saleor/issues/1024,[],"While installing Saleor, throwing ImportError : No module named parse","Hi,
I have installed Saleor as per the instructions given in 

After installation, when I run ```python manage.py migrate``` , it is throwing below error :
``` 
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/dist-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py"", line 113, in inner_run
    autoreload.raise_last_exception()
  File ""/usr/local/lib/python2.7/dist-packages/django/utils/autoreload.py"", line 249, in raise_last_exception
    six.reraise(*_exception)
  File ""/usr/local/lib/python2.7/dist-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/usr/local/lib/python2.7/dist-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/usr/local/lib/python2.7/dist-packages/django/apps/config.py"", line 199, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/usr/local/lib/python2.7/dist-packages/social_django/models.py"", line 10, in <module>
    from .storage import DjangoUserMixin, DjangoAssociationMixin, \
  File ""/usr/local/lib/python2.7/dist-packages/social_django/storage.py"", line 8, in <module>
    from social_core.storage import UserMixin, AssociationMixin, NonceMixin, \
  File ""/usr/local/lib/python2.7/dist-packages/social_core/storage.py"", line 12, in <module>
    from openid.association import Association as OpenIdAssociation
  File ""/usr/local/lib/python2.7/dist-packages/openid/association.py"", line 37, in <module>
    from openid import cryptutil
  File ""/usr/local/lib/python2.7/dist-packages/openid/cryptutil.py"", line 33, in <module>
    from openid.oidutil import toBase64, fromBase64
  File ""/usr/local/lib/python2.7/dist-packages/openid/oidutil.py"", line 15, in <module>
    from urllib.parse import urlencode
ImportError: No module named parse


```

Could anyone help me on how to solve this?"
5647,mirumee,saleor,31,closed,1015,1,https://api.github.com/repos/mirumee/saleor/issues/1015/comments,https://github.com/mirumee/saleor/issues/1015,[],Problem with search using elastic search,"I am trying to run the demo and I get NotFoundError: TransportError(404, u'index_not_found_exception', u'no such index')
Here is the stack trace:
```
Traceback (most recent call last):
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/zack/sportsnstuff/sportsnstuff/saleor/search/views.py"", line 29, in search
    results = list(results)
  File ""/home/zack/sportsnstuff/sportsnstuff/saleor/product/utils.py"", line 57, in products_with_availability
    for product in products:
  File ""/home/zack/sportsnstuff/sportsnstuff/saleor/search/backends/base.py"", line 181, in __iter__
    return iter(self.results())
  File ""/home/zack/sportsnstuff/sportsnstuff/saleor/search/backends/base.py"", line 147, in results
    self._results_cache = self._do_search()
  File ""/home/zack/sportsnstuff/sportsnstuff/saleor/search/backends/elasticsearch.py"", line 447, in _do_search
    hits = self.backend.es.search(**params)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/elasticsearch/client/utils.py"", line 69, in _wrapped
    return func(*args, params=params, **kwargs)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/elasticsearch/client/__init__.py"", line 539, in search
    doc_type, '_search'), params=params, body=body)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/elasticsearch/transport.py"", line 327, in perform_request
    status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/elasticsearch/connection/http_urllib3.py"", line 110, in perform_request
    self._raise_error(response.status, raw_data)
  File ""/home/zack/.environments/sports/local/lib/python2.7/site-packages/elasticsearch/connection/base.py"", line 114, in _raise_error
    raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)
NotFoundError: TransportError(404, u'index_not_found_exception', u'no such index')
```

Am I supposed to add any code to make the demo search for goods?"
5659,mirumee,saleor,31,closed,1003,15,https://api.github.com/repos/mirumee/saleor/issues/1003/comments,https://github.com/mirumee/saleor/issues/1003,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Not able to deploy in Heroku,"Getting this error when trying to deploy Saleor using ""Deploy to Heroku"" button in ""https://github.com/mirumee/saleor/"". Had the same problem in my own machine(kali linux), which got resolved when I removed appdirs manually beforehand using pip.

```
Installing collected packages: appdirs, pytz, babel, babeldjango, docutils, python-dateutil, jmespath, botocore, s3transfer, boto3, requests, braintree, pycparser, cffi, idna, pyasn1, cryptography, cssselect, cssutils, dj-database-url, dj-email-url, django, django-absolute, django-bootstrap3, django-cache-url, django-countries, lxml, premailer, django-emailit, django-materializecss-form, django-mptt, pyjwt, stripe, suds-jurko, xmltodict, django-payments, prices, django-prices, django-prices-openexchangerates, redis, django-redis, django-storages, pillow, django-versatileimagefield, django-webpack-loader, djangorestframework, urllib3, elasticsearch, faker, google-i18n-address, google-measurement-protocol, typing, promise, graphql-core, graphql-relay, graphene, iso8601, singledispatch, graphene-django, jsonfield, markdown, maxminddb, maxminddb-geolite2, pbr, mock, oauthlib, psycopg2, purl, py, pyparsing, pytest, pytest-django, requests-oauthlib, satchless, defusedxml, python3-openid, social-auth-core, social-auth-app-django, text-unidecode, uwsgi
         Found existing installation: appdirs 1.4.3
           Uninstalling appdirs-1.4.3:
             Successfully uninstalled appdirs-1.4.3
         Rolling back uninstall of appdirs
       Exception:
       Traceback (most recent call last):
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2813, in _dep_map
           return self.__dep_map
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2624, in __getattr__
           raise AttributeError(attr)
       AttributeError: _DistInfoDistribution__dep_map
       
       During handling of the above exception, another exception occurred:
       
       Traceback (most recent call last):
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2804, in _parsed_pkg_info
           return self._pkg_info
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2624, in __getattr__
           raise AttributeError(attr)
       AttributeError: _pkg_info
       
       During handling of the above exception, another exception occurred:
       
       Traceback (most recent call last):
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/basecommand.py"", line 215, in main
           status = self.run(options, args)
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/commands/install.py"", line 342, in run
           prefix=options.prefix_path,
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/req/req_set.py"", line 784, in install
           **kwargs
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/req/req_install.py"", line 851, in install
           self.move_wheel_files(self.source_dir, root=root, prefix=prefix)
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/req/req_install.py"", line 1064, in move_wheel_files
           isolated=self.isolated,
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/wheel.py"", line 247, in move_wheel_files
           prefix=prefix,
         File ""/app/.heroku/python/lib/python3.5/site-packages/pip/locations.py"", line 140, in distutils_scheme
           d = Distribution(dist_args)
         File ""/app/.heroku/python/lib/python3.5/site-packages/setuptools/dist.py"", line 320, in __init__
           _Distribution.__init__(self, attrs)
         File ""/app/.heroku/python/lib/python3.5/distutils/dist.py"", line 281, in __init__
           self.finalize_options()
         File ""/app/.heroku/python/lib/python3.5/site-packages/setuptools/dist.py"", line 386, in finalize_options
           ep.require(installer=self.fetch_build_egg)
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2324, in require
           items = working_set.resolve(reqs, env, installer, extras=self.extras)
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 862, in resolve
           new_requirements = dist.requires(req.extras)[::-1]
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2568, in requires
           dm = self._dep_map
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2815, in _dep_map
           self.__dep_map = self._compute_dependencies()
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2824, in _compute_dependencies
           for req in self._parsed_pkg_info.get_all('Requires-Dist') or []:
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 2806, in _parsed_pkg_info
           metadata = self.get_metadata(self.PKG_INFO)
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 1468, in get_metadata
           value = self._get(self._fn(self.egg_info, name))
         File ""/app/.heroku/python/lib/python3.5/site-packages/pkg_resources/__init__.py"", line 1577, in _get
           with open(path, 'rb') as stream:
       FileNotFoundError: [Errno 2] No such file or directory: '/tmp/build_e48812842771c8b173aaffba76c2598e/mirumee-saleor-79f5f26/.heroku/python/lib/python3.5/site-packages/appdirs-1.4.3.dist-info/METADATA'
 !     Push rejected, failed to compile Python app.
 !     Push failed
```

"
5695,mirumee,saleor,31,closed,964,2,https://api.github.com/repos/mirumee/saleor/issues/964/comments,https://github.com/mirumee/saleor/issues/964,[],Can not connect to localhost ,"when i run this command: python manage.py runserver

```
System check identified some issues:

WARNINGS:
saleor.W001: Session caching cannot work with locmem backend
    HINT: User sessions need to be globally shared, use a cache server like Redis.

System check identified 1 issue (0 silenced).
February 28, 2017 - 05:53:34
Django version 1.10.5, using settings 'saleor.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
```

and when i connect to localhost: http://127.0.0.1:8000/, 

```
OSError at /
Error reading /home/phanhoang/workspace/forked/saleor/saleor/webpack-bundle.json. Are you sure webpack has generated the file and the path is correct?
```

how can i fix that error ?, thanks"
5844,mirumee,saleor,32,closed,810,4,https://api.github.com/repos/mirumee/saleor/issues/810/comments,https://github.com/mirumee/saleor/issues/810,"[{""default"": false, ""name"": ""technical debt"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/technical%20debt"", ""color"": ""666666"", ""node_id"": ""MDU6TGFiZWw1MzQ5NDM1MjA="", ""id"": 534943520}]",Django 1.11 compatibility,"Once 1.11 ships we should switch to supporting 1.11 as it's an LTS and possibly 1.8 if we want to give our users option of using an earlier LTS (still supported until 2018).

This is a tracking bug for 1.11 compatibility.

* [x] `django-countries`: SmileyChris/django-countries#164
* [x] `django-bootstrap3`
* [ ] `django-materializecss-form`: florent1933/django-materializecss-form#13
* [ ] `django-emailit`: divio/django-emailit#10"
5911,mirumee,saleor,33,closed,739,36,https://api.github.com/repos/mirumee/saleor/issues/739/comments,https://github.com/mirumee/saleor/issues/739,[],migration failed due to importError,"Hi,

I am trying to install saleor on my local machine. I followed the instructions carefully here http://saleor.readthedocs.io/en/latest/installation.html#installation. I even have a virtual environment as recommended by the Docs.

However, I cannot seem to have it up and running. I am using python 2.7, Django 1.10, pip 9.0.1. The first time I ran a migration, I go this error

ImportError: No module named dj_database_url. I proceeded to install it and other several modules that appeared as an import error when I tried to migrate but could not. I finally reached this module
dj_cache_url but I get this error when i try to install it via pip

Could not find a version that satisfies the requirement dj_cache_url (from versions: )
No matching distribution found for dj_cache_url

Now I cannot pass the migration stage because this module has an issue. What could be the problem?
"
5986,mirumee,saleor,34,closed,663,6,https://api.github.com/repos/mirumee/saleor/issues/663/comments,https://github.com/mirumee/saleor/issues/663,[],migrate failed table_site,"Problem when migrating, generates the following error
   utility.execute()
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 224, in handle
    self.verbosity, self.interactive, connection.alias, apps=post_migrate_apps, plan=plan,
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/core/management/sql.py"", line 53, in emit_post_migrate_signal
    **kwargs
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/dispatch/dispatcher.py"", line 191, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/contrib/sites/management.py"", line 20, in create_default_site
    if not Site.objects.using(using).exists():
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/models/query.py"", line 660, in exists
    return self.query.has_results(using=self.db)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/models/sql/query.py"", line 494, in has_results
    return compiler.has_results()
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 806, in has_results
    return bool(self.execute_sql(SINGLE))
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 835, in execute_sql
    cursor.execute(sql, params)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/msalinas/Documentos/saleor-cms/env_saleor/local/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py"", line 337, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.OperationalError: no such table: django_site"
5992,mirumee,saleor,34,closed,657,1,https://api.github.com/repos/mirumee/saleor/issues/657/comments,https://github.com/mirumee/saleor/issues/657,[],WebpackError at / ,"I have a problem starting Saleor, it generates an error

Internal Server Error: /
Traceback (most recent call last):
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 39, in inner
    response = get_response(request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/response.py"", line 109, in render
    self.content = self.rendered_content
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/response.py"", line 86, in rendered_content
    content = template.render(context, self._request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 208, in render
    return self._render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/library.py"", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/templatetags/webpack_loader.py"", line 40, in render_bundle
    return render_as_tags(_get_bundle(bundle_name, extension, config), attrs)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/templatetags/webpack_loader.py"", line 32, in _get_bundle
    bundle = get_loader(config).get_bundle(bundle_name)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/loader.py"", line 94, in get_bundle
    raise WebpackError(error)
WebpackError: 
            ModuleBuildError in 
            Module build failed: ReferenceError: Promise is not defined
    at LazyResult.async (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss/lib/lazy-result.js:237:31)
    at LazyResult.then (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss/lib/lazy-result.js:141:21)
    at Object.module.exports (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss-loader/index.js:93:10)
            
[13/Dec/2016 11:34:50] ""GET / HTTP/1.1"" 500 142037
Internal Server Error: /
Traceback (most recent call last):
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 39, in inner
    response = get_response(request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/response.py"", line 109, in render
    self.content = self.rendered_content
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/response.py"", line 86, in rendered_content
    content = template.render(context, self._request)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 208, in render
    return self._render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/django/template/library.py"", line 203, in render
    output = self.func(*resolved_args, **resolved_kwargs)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/templatetags/webpack_loader.py"", line 40, in render_bundle
    return render_as_tags(_get_bundle(bundle_name, extension, config), attrs)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/templatetags/webpack_loader.py"", line 32, in _get_bundle
    bundle = get_loader(config).get_bundle(bundle_name)
  File ""/home/msalinas/Documentos/e-commerce/env_saleor/local/lib/python2.7/site-packages/webpack_loader/loader.py"", line 94, in get_bundle
    raise WebpackError(error)
WebpackError: 
            ModuleBuildError in 
            Module build failed: ReferenceError: Promise is not defined
    at LazyResult.async (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss/lib/lazy-result.js:237:31)
    at LazyResult.then (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss/lib/lazy-result.js:141:21)
    at Object.module.exports (/home/msalinas/Documentos/e-commerce/saleor/node_modules/postcss-loader/index.js:93:10)
            
[13/Dec/2016 11:34:51] ""GET / HTTP/1.1"" 500 142037
"
6001,mirumee,saleor,34,closed,648,0,https://api.github.com/repos/mirumee/saleor/issues/648/comments,https://github.com/mirumee/saleor/issues/648,[],Improve add to cart logic on Product page,"Now we add to card form placed on Product page and this form posts to add_to_cart view. It causes some issues with form errors propagation (#644).
As we discussed, some refactoring will be needed there.
Idea:
- Extract common part from add_to_cart form to a helper method that will return a form instance
- Call this helper method from product details view and from add_to_cart view

By the way I'd recommend to drop part that serializes form errors to django.messages message, it shouldn't be needed anymore."
6038,mirumee,saleor,34,closed,611,2,https://api.github.com/repos/mirumee/saleor/issues/611/comments,https://github.com/mirumee/saleor/issues/611,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",PayPal failure with discount,"Firstly I am not sure if this is a Saleor bug or a django-payments one. 

## Saleor steps

Given a cart with:

* A single product price: 100
* Shipping at: 5
* Discount: 5

`payments.paypal.PaypalProvider#get_transactions_data` generates the following data:

```
{
    'intent': 'sale', 
    'transactions': [
        {'amount': {
            'details': {
                'tax': '0.00', 
                'shipping': '5.00', 
                'subtotal': '95.00'
            },
        'total': '100.00', 
        'currency': 'GBP'}, 
        'item_list': {
            'items': [
                {
                    'price': '100.00', 
                    'name': 'Error',
                    'quantity': '1',
                    'currency': 'GBP',
                    'sku': 'SKU'}
                ]
            }, 
        'description': 'Order #53'
    }]
}
```

This results in a PayPal API 400:

`Item amount must add up to specified amount subtotal (or total if amount details not specified)`

---

From my Googling the recommended approach is to pass in an `item` with a negative amount.


"
6100,mirumee,saleor,35,closed,547,4,https://api.github.com/repos/mirumee/saleor/issues/547/comments,https://github.com/mirumee/saleor/issues/547,[],StockManager.allocate_stock - adds twice the quantity it is supposed to,"When an order is placed, the stock manager allocates twice the quantity it is supposed to.

The problem seems to be with  the F() expression.

`
stock.quantity_allocated = F('quantity_allocated') + quantity
`

If I replace that line with 
`
 stock.quantity_allocated += quantity
`

then my problem is fixed. (Though I imagine performance is worse)

I tested the issue from Django Shell and could replicate the error by doing:

`from saleor.product.models import Stock` 
`s = Stock.objects.get(pk=94)`
`s.quantity_allocated`
`Stock.objects.allocate_stock(s, 1)`

If you reload the shell, the quantity allocated value has changed by two instead of one.

Can anyone else replicate the problem ?
Will there also be an issue with deallocate stock ?
"
6128,mirumee,saleor,35,closed,517,6,https://api.github.com/repos/mirumee/saleor/issues/517/comments,https://github.com/mirumee/saleor/issues/517,[], python manage.py migrate issue,"Hello guys,

I'm trying to install saleor on local server ( Centos 7.2) and get an error when run  _**python manage.py migrate**_ as below.

I'm quite new to Django...can you help me how to solve this issue.

Thank you,
Duc Doan

> # python manage.py migrate
> 
> Traceback (most recent call last):
>   File ""manage.py"", line 10, in <module>
>     execute_from_command_line(sys.argv)
>   File ""/usr/lib/python2.7/site-packages/django/core/management/**init**.py"", line 353, in execute_from_command_line
>     utility.execute()
>   File ""/usr/lib/python2.7/site-packages/django/core/management/**init**.py"", line 345, in execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)
>   File ""/usr/lib/python2.7/site-packages/django/core/management/**init**.py"", line 195, in fetch_command
>     klass = load_command_class(app_name, subcommand)
>   File ""/usr/lib/python2.7/site-packages/django/core/management/**init**.py"", line 39, in load_command_class
>     module = import_module('%s.management.commands.%s' % (app_name, name))
>   File ""/usr/lib64/python2.7/importlib/**init**.py"", line 37, in import_module
>     **import**(name)
>   File ""/usr/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 16, in <module>
>     from django.db.migrations.autodetector import MigrationAutodetector
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/autodetector.py"", line 13, in <module>
>     from django.db.migrations.questioner import MigrationQuestioner
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/questioner.py"", line 12, in <module>
>     from .loader import MigrationLoader
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/loader.py"", line 10, in <module>
>     from django.db.migrations.recorder import MigrationRecorder
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/recorder.py"", line 12, in <module>
>     class MigrationRecorder(object):
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/recorder.py"", line 26, in MigrationRecorder
>     class Migration(models.Model):
>   File ""/usr/lib/python2.7/site-packages/django/db/migrations/recorder.py"", line 27, in Migration
>     app = models.CharField(max_length=255)
>   File ""/usr/lib/python2.7/site-packages/django/db/models/fields/**init**.py"", line 1072, in **init**
>     super(CharField, self).**init**(_args, *_kwargs)
>   File ""/usr/lib/python2.7/site-packages/django/db/models/fields/**init**.py"", line 166, in **init**
>     self.db_tablespace = db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
>   File ""/usr/lib/python2.7/site-packages/django/conf/**init**.py"", line 55, in **getattr**
>     self._setup(name)
>   File ""/usr/lib/python2.7/site-packages/django/conf/__init__.py"", line 43, in _setup
>     self._wrapped = Settings(settings_module)
>   File ""/usr/lib/python2.7/site-packages/django/conf/__init__.py"", line 120, in **init**
>     raise ImproperlyConfigured(""The SECRET_KEY setting must not be empty."")
> django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty.
"
6166,mirumee,saleor,36,closed,476,6,https://api.github.com/repos/mirumee/saleor/issues/476/comments,https://github.com/mirumee/saleor/issues/476,[],adding stock to product,"Trying out saleor and having some issues setting up the stock on a product.  I suspect that something isn't installed properly or i'm using the wrong version of something.  First I get this error on startup.  The site comes up and I can add products and view cart ect..

```
saleor/.env/local/lib/python2.7/site-packages/model_utils/managers.py:105: RemovedInDjango110Warning: 'get_all_related_objects is an unofficial API that has been deprecated. You may be able to replace it with 'get_fields()'
  rel for rel in model._meta.get_all_related_objects()

/media/storage/home/kirk/projects/saleor/.env/local/lib/python2.7/site-packages/materializecssform/templatetags/materializecss.py:53: RemovedInDjango110Warning: render() must be called with a dict, not a Context.
  return template.render(context)
```

using this url http://127.0.0.1:8000/dashboard/products/1/stock/add/
which calls into 
saleor/saleor/dashboard/product/views.py  

in stock_edit where stock = Stock() is called I get exception

```
  File ""/media/storage/home/kirk/projects/saleor/.env/local/lib/python2.7/site-packages/django/db/models/base.py"", line 459, in __repr__
    u = six.text_type(self)
  File ""/media/storage/home/kirk/projects/saleor/saleor/product/models/base.py"", line 272, in __str__
    return '%s - %s' % (self.variant.name, self.location)
  File ""/media/storage/home/kirk/projects/saleor/.env/local/lib/python2.7/site-packages/django/db/models/fields/related_descriptors.py"", line 179, in __get__
    ""%s has no %s."" % (self.field.model.__name__, self.field.name)
RelatedObjectDoesNotExist: Stock has no variant.
```

```
product_pk  u'1'
product <saleor.product.models.base.Product(pk=1, name=u'cats')>
request <WSGIRequest: GET '/dashboard/products/1/stock/add/'>
stock_pk    None
stock   Error in formatting: RelatedObjectDoesNotExist: Stock has no variant.
```

After attempting to add stock the page flashes and nothing happens.

```
Babel==2.2.0
BabelDjango==0.2.2
Django==1.9.2
Markdown==2.6.5
Pillow==3.1.1
PyJWT==1.4.0
Unidecode==0.04.19
argparse==1.2.1
boto==2.39.0
braintree==3.24.0
cffi==1.5.0
cryptography==1.2.2
cssselect==0.9.1
cssutils==1.0.1
dj-database-url==0.4.0
dj-email-url==0.0.4
django-absolute==0.3
django-bootstrap3==6.2.2
django-cache-url==1.0.0
django-countries==3.4.1
django-emailit==0.2.2
django-materializecss-form==1.0.1
django-model-utils==2.4
django-mptt==0.8.0
django-offsite-storage==0.0.8
django-payments==0.9.1
django-prices==0.4.11
django-redis==4.3.0
django-selectable==0.9.0
django-versatileimagefield==1.3
djangorestframework==3.3.2
enum34==1.1.2
fake-factory==0.5.3
funcsigs==0.4
google-i18n-address==1.0.7
google-measurement-protocol==0.1.5
idna==2.0
ipaddr==2.1.11
ipaddress==1.0.16
jsonfield==1.0.3
lxml==3.5.0
maxminddb==1.2.0
maxminddb-geolite2==2015.0708
mock==1.3.0
pbr==1.8.1
premailer==2.9.7
prices==0.5.7
psycopg2==2.6.1
purl==1.2
py==1.4.31
pyasn1==0.1.9
pycparser==2.14
pytest==2.8.7
pytest-django==2.9.1
pytz==2015.7
redis==2.10.5
requests==2.9.1
satchless==1.1.3
six==1.10.0
stripe==1.29.1
suds-jurko==0.6
uWSGI==2.0.12
wsgiref==0.1.2
xmltodict==0.9.2

```
"
6184,mirumee,saleor,36,closed,458,4,https://api.github.com/repos/mirumee/saleor/issues/458/comments,https://github.com/mirumee/saleor/issues/458,[],Geoip conflicting with Python 3.5?,"It appears that python-geoip won't work with the current setup (utilizing Python 3.5).
I get this stack trace:

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.9.1
Python Version: 3.5.1
Installed Applications:
['offsite_storage',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.auth',
 'saleor.userprofile',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.order',
 'saleor.registration',
 'saleor.dashboard',
 'saleor.shipping',
 'versatileimagefield',
 'babeldjango',
 'bootstrap3',
 'django_prices',
 'emailit',
 'mptt',
 'payments',
 'selectable',
 'materializecssform',
 'rest_framework']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'babeldjango.middleware.LocaleMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.DiscountMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CountryMiddleware',
 'saleor.core.middleware.CurrencyMiddleware']



Traceback:

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  123.                 response = middleware_method(request)

File ""/home/eightbit/saleor/saleor/saleor/core/middleware.py"" in process_request
  37.             request.country = get_country_by_ip(request.META['REMOTE_ADDR'])

File ""/home/eightbit/saleor/saleor/saleor/core/__init__.py"" in get_country_by_ip
  14.     geo_data = geolite2.lookup(ip_address)

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/geoip.py"" in lookup
  364.         return self._get_actual_db().lookup(ip_addr)

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/geoip.py"" in _get_actual_db
  350.             rv = self._load_database()

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/geoip.py"" in _load_database
  342.         return mod.loader(self, sys.modules[__name__])

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/_geoip_geolite2/__init__.py"" in loader
  9.     return mod.open_database(filename)

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/geoip.py"" in open_database
  508.     md = _read_mmdb_metadata(buf)

File ""/home/eightbit/saleor/env/lib/python3.5/site-packages/geoip.py"" in _read_mmdb_metadata
  382.                        buf.size() - MMDB_METADATA_BLOCK_MAX_SIZE)

Exception Type: TypeError at /
Exception Value: a bytes-like object is required, not 'str'
```

python-geoip seems to be abandoned from looking at its GitHub page. Perhaps it should be replaced with something else?
"
6194,mirumee,saleor,36,closed,448,2,https://api.github.com/repos/mirumee/saleor/issues/448/comments,https://github.com/mirumee/saleor/pull/448,[],Remove unnecessary broken add_error method.,"This method is now implemented by Django itself, but in a subtly different way. With this implementation, if you raise a ValidationError in the clean() method it will getting added to form.errors under they key `None` instead of `NON_FIELD_ERRORS`, and therefore silently disappear from rendering.
"
6219,mirumee,saleor,36,closed,423,7,https://api.github.com/repos/mirumee/saleor/issues/423/comments,https://github.com/mirumee/saleor/issues/423,[],Failure when adding variant - mysql,"Using MySQL.

Attempting to add products to cart.

Have added categories and attributes.

When attempting to add a variant, I get:

``` python
AttributeError at /dashboard/products/2/variants/add/
'NoneType' object has no attribute 'net'
Request Method: POST
Request URL:    http://localhost:8000/dashboard/products/2/variants/add/
Django Version: 1.8.7
Exception Type: AttributeError
Exception Value:    
'NoneType' object has no attribute 'net'
Exception Location: /home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django_prices/forms.py in run_validators, line 37
Python Executable:  /home/doug/Projects/my-project/venv/bin/python
Python Version: 2.7.10
Python Path:    
['/home/doug/Projects/my-project',
 '/home/doug/Projects/my-project/venv/lib/python2.7',
 '/home/doug/Projects/my-project/venv/lib/python2.7/plat-x86_64-linux-gnu',
 '/home/doug/Projects/my-project/venv/lib/python2.7/lib-tk',
 '/home/doug/Projects/my-project/venv/lib/python2.7/lib-old',
 '/home/doug/Projects/my-project/venv/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-x86_64-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages']
Server time:    Tue, 8 Dec 2015 16:21:50 -0500
```

``` python
Environment:


Request Method: POST
Request URL: http://localhost:8000/dashboard/products/2/variants/add/

Django Version: 1.8.7
Python Version: 2.7.10
Installed Applications:
['offsite_storage',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.auth',
 'saleor.userprofile',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.order',
 'saleor.registration',
 'saleor.dashboard',
 'versatileimagefield',
 'babeldjango',
 'django_prices',
 'emailit',
 'mptt',
 'payments',
 'selectable',
 'materializecssform',
 'rest_framework']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'babeldjango.middleware.LocaleMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.DiscountMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CheckHTML']


Traceback:
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  132.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/doug/Projects/my-project/saleor/dashboard/product/views.py"" in variant_edit
  183.     if all([form.is_valid(), attribute_form.is_valid()]):
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/forms/forms.py"" in is_valid
  184.         return self.is_bound and not self.errors
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/forms/forms.py"" in errors
  176.             self.full_clean()
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/forms/forms.py"" in full_clean
  392.         self._clean_fields()
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/forms/forms.py"" in _clean_fields
  407.                     value = field.clean(value)
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django/forms/fields.py"" in clean
  164.         self.run_validators(value)
File ""/home/doug/Projects/my-project/venv/local/lib/python2.7/site-packages/django_prices/forms.py"" in run_validators
  37.         return super(PriceField, self).run_validators(value.net)

Exception Type: AttributeError at /dashboard/products/2/variants/add/
Exception Value: 'NoneType' object has no attribute 'net'
```

The break appears to be here:

``` python

/home/doug/Projects/my-project/saleor/dashboard/product/views.py in variant_edit

if all([form.is_valid(), attribute_form.is_valid()]): 

Variable    Value
product_pk  u'2'
product <saleor.product.models.base.Product(pk=2L, name=u'Fast Fix Deep Cherry E-Cig Liquid')>
form    <ProductVariantForm bound=True, valid=True, fields=(sku;name;price_override;weight_override)>
request '<WSGIRequest\npath:/dashboard/products/2/variants/add/,\nGET:<QueryDict: {}>,\nPOST:<QueryDict: {u\'sku\': [u\'br549\'], u\'name\': [u\'\'], u\'weight_override\': [u\'\'], u\'attribute-fast-fix-deep-cherry\': [u\'5\'], u\'success_url\': [u\'/dashboard/products/2/update/#variants\'], u\'csrfmiddlewaretoken\': [u\'DXDEmzzttcsHlzulWKWVrEfmS85RrFVy\'], u\'price_override\': [u\'\']}>,\nCOOKIES:{\'csrftoken\': \'DXDEmzzttcsHlzulWKWVrEfmS85RrFVy\',\n \'sessionid\': \'vlgv1ffk72u87mrjioxt59rznfla35ge\'},\nMETA:{\'CLUTTER_IM_MODULE\': \'xim\',\n \'COMPIZ_BIN_PATH\': \'/usr/bin/\',\n \'COMPIZ_CONFIG_PROFILE\': \'ubuntu\',\n \'COMP_WORDBREAKS\': \' \\t\\n""\\\'><;|&(:\',\n \'CONTENT_LENGTH\': \'825\',\n \'CONTENT_TYPE\': \'multipart/form-data; boundary=----WebKitFormBoundaryrwovFBsrGLvWw8iD\',\n u\'CSRF_COOKIE\': u\'DXDEmzzttcsHlzulWKWVrEfmS85RrFVy\',\n \'DBUS_SESSION_BUS_ADDRESS\': \'unix:abstract=/tmp/dbus-CuWaS16gPY\',\n \'DEFAULTS_PATH\': \'/usr/share/gconf/ubuntu.default.path\',\n \'DESKTOP_SESSION\': \'ubuntu\',\n \'DISPLAY\': \':0\',\n \'DJANGO_SETTINGS_MODULE\': \'saleor.settings\',\n \'GATEWAY_INTERFACE\': \'CGI/1.1\',\n \'GDMSESSION\': \'ubuntu\',\n \'GDM_LANG\': \'en_US\',\n \'GNOME_DESKTOP_SESSION_ID\': \'this-is-deprecated\',\n \'GNOME_KEYRING_CONTROL\': \'\',\n \'GNOME_KEYRING_PID\': \'\',\n \'GTK2_MODULES\': \'overlay-scrollbar\',\n \'GTK_IM_MODULE\': \'ibus\',\n \'GTK_MODULES\': \'unity-gtk-module\',\n \'HOME\': \'/home/doug\',\n \'HTTP_ACCEPT\': \'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\',\n \'HTTP_ACCEPT_ENCODING\': \'gzip, deflate\',\n \'HTTP_ACCEPT_LANGUAGE\': \'en-US,en;q=0.8\',\n \'HTTP_CACHE_CONTROL\': \'max-age=0\',\n \'HTTP_CONNECTION\': \'keep-alive\',\n \'HTTP_COOKIE\': \'sessionid=vlgv1ffk72u87mrjioxt59rznfla35ge; csrftoken=DXDEmzzttcsHlzulWKWVrEfmS85RrFVy\',\n \'HTTP_HOST\': \'localhost:8000\',\n \'HTTP_ORIGIN\': \'http://localhost:8000\',\n \'HTTP_REFERER\': \'http://localhost:8000/dashboard/products/2/variants/add/\',\n \'HTTP_UPGRADE_INSECURE_REQUESTS\': \'1\',\n \'HTTP_USER_AGENT\': \'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/45.0.2454.101 Chrome/45.0.2454.101 Safari/537.36\',\n \'IM_CONFIG_PHASE\': \'1\',\n \'INSTANCE\': \'\',\n \'JOB\': \'unity-settings-daemon\',\n \'LANG\': \'en_US.UTF-8\',\n \'LANGUAGE\': \'en_US\',\n \'LESSCLOSE\': \'/usr/bin/lesspipe %s %s\',\n \'LESSOPEN\': \'| /usr/bin/lesspipe %s\',\n \'LOGNAME\': \'doug\',\n \'LS_COLORS\': \'rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.axa=00;36:*.oga=00;36:*.spx=00;36:*.xspf=00;36:\',\n \'MANDATORY_PATH\': \'/usr/share/gconf/ubuntu.mandatory.path\',\n \'NODE_PATH\': \'/usr/lib/nodejs:/usr/lib/node_modules:/usr/share/javascript\',\n \'OLDPWD\': \'/home/doug... <trimmed 6704 bytes string>
variant <ProductVariant: >
variant_pk  None
attribute_form  <VariantAttributeForm bound=True, valid=Unknown, fields=(attribute-fast-fix-deep-cherry)>
form_initial    {}  
```

Taking a SWAG and looking at the product_productvariant table:

``` sql
mysql> describe product_productvariant;

```

| Field | Type | Null | Key | Default | Extra |
| --- | --- | --- | --- | --- | --- |
| id | int(11) | NO | PRI | NULL | auto_increment |
| sku | varchar(32) | NO | UNI | NULL |  |
| name | varchar(100) | NO |  | NULL |  |
| price_override | decimal(12,2) | YES |  | NULL |  |
| weight_override | decimal(6,2) | YES |  | NULL |  |
| attributes | longtext | NO |  | NULL |  |
| product_id | int(11) | NO | MUL | NULL |  |

The error is referencing a NoneType, so I'm probably wasting disk space posting what I think (total django noob) is the corresponding table.

Any information you need, shout and I'll provide.
"
6224,mirumee,saleor,36,closed,418,7,https://api.github.com/repos/mirumee/saleor/issues/418/comments,https://github.com/mirumee/saleor/issues/418,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}, {""default"": false, ""name"": ""in progress"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/in%20progress"", ""color"": ""2980B9"", ""node_id"": ""MDU6TGFiZWw4NTI1NDQyMQ=="", ""id"": 85254421}]","""BLOB/TEXT column 'service' used in key specification without a key length""","Setting up saleor using virtualenv, using the recommended module mysqlclient==1.3.7 on an ubuntu 15.10 system.

``` bash
(venv)doug@ookla:~/Projects/saleor$ git rev-list --count HEAD
1586
```

I have created a db ""saleor"", a db user ""foobar"" and granted that user full control over the ""saleor"" database.

When running migrate on newly created db.

``` bash
python manage.py migrate
```

I get the following error:

``` bash
  Applying order.0009_auto_20151201_0820... OK
  Applying registration.0001_initial...Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 222, in handle
    executor.migrate(targets, plan, fake=fake, fake_initial=fake_initial)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 110, in migrate
    self.apply_migration(states[migration], migration, fake=fake, fake_initial=fake_initial)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 148, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/migrations/migration.py"", line 115, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/migrations/operations/models.py"", line 359, in database_forwards
    getattr(new_model._meta, self.option_name, set()),
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 324, in alter_unique_together
    self.execute(self._create_unique_sql(model, columns))
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 111, in execute
    cursor.execute(sql, params)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/utils.py"", line 98, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py"", line 124, in execute
    return self.cursor.execute(query, args)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/MySQLdb/cursors.py"", line 226, in execute
    self.errorhandler(self, exc, value)
  File ""/home/doug/NSixty/saleor/venv/local/lib/python2.7/site-packages/MySQLdb/connections.py"", line 36, in defaulterrorhandler
    raise errorvalue
django.db.utils.OperationalError: (1170, ""BLOB/TEXT column 'service' used in key specification without a key length"")
```

Apologies in advance: I am a django noob and lack the brains to know if this is an error in saleor's setup, or a problem in django.
"
6239,mirumee,saleor,36,closed,403,3,https://api.github.com/repos/mirumee/saleor/issues/403/comments,https://github.com/mirumee/saleor/issues/403,[],django-offsite-storages raises NotImplementedError on image upload,"An error is raised whenever a ProductImage's path property is called upon. I am not able to upload any media files due to this and not sure of a workaround. Everything works fine in local dev environment. I'm using Amazon S3 and my static files are working fine (different bucket, same credentials. 
/lib/python3.4/site-packages/offsite_storage/storages/s3.py in path

``` python
def listdir(self, name):
        raise NotImplementedError()
    def modified_time(self, name):
        raise NotImplementedError()
    def path(self, name):
                    raise NotImplementedError() 
```

Full traceback:
lib/python3.4/site-packages/django/core/handlers/base.py in get_response
                                response = wrapped_callback(request, _callback_args, *_callback_kwargs) ...
lib/python3.4/site-packages/django/contrib/auth/decorators.py in _wrapped_view
                            return view_func(request, _args, *_kwargs) ...
/media/storage/Programming/sale/store/saleor/dashboard/product/views.py in product_image_edit
                    product_image = form.save() ...
lib/python3.4/site-packages/django/forms/models.py in save
                                         construct=False) ...
lib/python3.4/site-packages/django/forms/models.py in save_instance
                    instance.save() ...
/media/storage/Programming/sale/store/saleor/product/models/images.py in save
                    super(ProductImage, self).save(_args, *_kwargs) ...
lib/python3.4/site-packages/django/db/models/base.py in save
                                   force_update=force_update, update_fields=update_fields) ...
lib/python3.4/site-packages/django/db/models/base.py in save_base
                        updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields) ...
lib/python3.4/site-packages/django/db/models/base.py in _save_table
                        result = self._do_insert(cls._base_manager, using, fields, update_pk, raw) ...
lib/python3.4/site-packages/django/db/models/base.py in _do_insert
                                           using=using, raw=raw) ...
lib/python3.4/site-packages/django/db/models/manager.py in manager_method
                            return getattr(self.get_queryset(), name)(_args, *_kwargs) ...
lib/python3.4/site-packages/django/db/models/query.py in _insert
                    return query.get_compiler(using=using).execute_sql(return_id) ...
lib/python3.4/site-packages/django/db/models/sql/compiler.py in execute_sql
                        for sql, params in self.as_sql(): ...
lib/python3.4/site-packages/django/db/models/sql/compiler.py in as_sql
                            for obj in self.query.objs ...
lib/python3.4/site-packages/django/db/models/sql/compiler.py in <listcomp>
                            for obj in self.query.objs ...
lib/python3.4/site-packages/django/db/models/sql/compiler.py in <listcomp>
                                ) for f in fields ...
lib/python3.4/site-packages/versatileimagefield/fields.py in pre_save
                    file = super(VersatileImageField, self).pre_save(model_instance, add) ...

lib/python3.4/site-packages/django/db/models/fields/files.py in pre_save
                        print(file.path) ...

lib/python3.4/site-packages/django/db/models/fields/files.py in _get_path
                    return self.storage.path(self.name) ...

lib/python3.4/site-packages/offsite_storage/storages/s3.py in path
                    raise NotImplementedError() ...
"
6243,mirumee,saleor,36,closed,399,1,https://api.github.com/repos/mirumee/saleor/issues/399/comments,https://github.com/mirumee/saleor/issues/399,[],"Failed to add stock: AttributeError, RelatedManager object has no attribute _prefetch_related_lookups","AttributeError at /dashboard/products/4/stock/add/

'RelatedManager' object has no attribute '_prefetch_related_lookups'

Request Method:     GET
Request URL:    http://localhost:8000/dashboard/products/4/stock/add/
Django Version:     1.8.6
Exception Type:     AttributeError
Exception Value:    

'RelatedManager' object has no attribute '_prefetch_related_lookups'

Exception Location:     /home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/models.py in **iter**, line 1095
Python Executable:  /home/cephlin/Projects/Python/shop/env/bin/python
Python Version:     2.7.6
Python Path:    

['/home/cephlin/Projects/Python/shop/env/bin',
 '/home/cephlin/Projects/Python/shop',
 '/home/cephlin/Projects/Python/shop/env/lib/python2.7',
 '/home/cephlin/Projects/Python/shop/env/lib/python2.7/plat-i386-linux-gnu',
 '/home/cephlin/Projects/Python/shop/env/lib/python2.7/lib-tk',
 '/home/cephlin/Projects/Python/shop/env/lib/python2.7/lib-old',
 '/home/cephlin/Projects/Python/shop/env/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-i386-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages']

Server time:    Sun, 22 Nov 2015 10:20:40 -0600
Error during template rendering

In template /home/cephlin/Projects/Python/shop/saleor/core/templates/materializecssform/field.html, error at line 92
'RelatedManager' object has no attribute '_prefetch_related_lookups'
82  
83                      {% if field.help_text %}
84                      <p class=""help-block"">
85                          {{ field.help_text|safe }}
86                      </p>
87                      {% endif %}
88                  </div>
89  
90              {% else %}
91                  <label for=""{{ field.id_for_label }}"">{{ field.label }}</label>
92  

```
  {{field}}
```

93                  {% for error in field.errors %}
94                      <p class=""help-block materialize-red-text"">{{ error }}</p>
95                  {% endfor %}
96  
97                  {% if field.help_text %}
98                  <p class=""help-block"">
99                      {{ field.help_text|safe }}
100                     </p>
101                     {% endif %}
102  
Traceback Switch to copy-and-paste view

```
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/core/handlers/base.py in get_response

                                response = response.render()

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/response.py in render

                            self.content = self.rendered_content

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/response.py in rendered_content

                        content = template.render(context, self._request)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/backends/django.py in render

                        return self.template.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                    return self._render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in _render

                        return self.nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/loader_tags.py in render

                        return compiled_parent._render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in _render

                        return self.nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/loader_tags.py in render

                                result = block.nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render

                            output = self.filter_expression.resolve(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in resolve

                                new_obj = func(obj, *arg_vals)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/materializecssform/templatetags/materializecss.py in materializecss

                    return render(element, markup_classes)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/materializecssform/templatetags/materializecss.py in render

                    return template.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/backends/django.py in render

                        return self.template.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                    return self._render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in _render

                        return self.nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/defaulttags.py in render

                                return nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/defaulttags.py in render

                                return nodelist.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/base.py in render

                                bit = self.render_node(node, context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render_node

                            return node.render(context)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/template/debug.py in render

                            output = force_text(output)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/utils/encoding.py in force_text

                                s = six.text_type(s)

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/utils/html.py in <lambda>

                        klass.__unicode__ = lambda self: mark_safe(klass_unicode(self))

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/forms.py in __str__

                        return self.as_widget()

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/forms.py in as_widget

                        return force_text(widget.render(name, self.value(), attrs=attrs))

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/widgets.py in render

                        options = self.render_options(choices, [value])

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/widgets.py in render_options

                        for option_value, option_label in chain(self.choices, choices):

     ...
▶ Local vars
/home/cephlin/Projects/Python/shop/env/local/lib/python2.7/site-packages/django/forms/models.py in __iter__

                        method = 'all' if self.queryset._prefetch_related_lookups else 'iterator'

     ...
▶ Local vars
```

Request information
GET

No GET data
POST

No POST data
FILES

No FILES data
COOKIES
Variable    Value
csrftoken   

'eT6xWBixiphebINVajqt5coD7NbjnB4Z'

sessionid   

'd9i83vag5j31b2miy94hsk6db9kvqqew'

META
Variable    Value
RUN_MAIN    

'true'

HTTP_REFERER    

'http://localhost:8000/dashboard/products/4/update/'

LESS    

'-R'

QT4_IM_MODULE   

'xim'

SERVER_SOFTWARE     

'WSGIServer/0.1 Python/2.7.6'

LC_CTYPE    

'en_GB.UTF-8'

SCRIPT_NAME     

u''

REQUEST_METHOD  

'GET'

CSRF_COOKIE     

u'eT6xWBixiphebINVajqt5coD7NbjnB4Z'

SERVER_PROTOCOL     

'HTTP/1.1'

HOME    

'/home/cephlin'

XDG_GREETER_DATA_DIR    

'/var/lib/lightdm-data/cephlin'

DISPLAY     

':0'

LANG    

'en_GB.UTF-8'

VIRTUAL_ENV     

'/home/cephlin/Projects/Python/shop/env'

SHELL   

'/usr/bin/zsh'

XDG_DATA_DIRS   

'/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/'

MANDATORY_PATH  

'/usr/share/gconf/ubuntu.mandatory.path'

CLUTTER_IM_MODULE   

'xim'

UPSTART_INSTANCE    

''

JOB     

'gnome-session'

TEXTDOMAIN  

'im-config'

SERVER_PORT     

'8000'

XMODIFIERS  

'@im=ibus'

SELINUX_INIT    

'YES'

PATH_INFO   

u'/dashboard/products/4/stock/add/'

XDG_RUNTIME_DIR     

'/run/user/1000'

VTE_VERSION     

'3409'

UPSTART_EVENTS  

'started starting'

UPSTART_SESSION     

'unix:abstract=/com/ubuntu/upstart-session/1000/1075'

HTTP_HOST   

'localhost:8000'

GNOME_KEYRING_PID   

'1163'

XDG_SESSION_ID  

'c1'

DBUS_SESSION_BUS_ADDRESS    

'unix:abstract=/tmp/dbus-swO1n2eKE6'

GTK_MODULES     

'overlay-scrollbar:unity-gtk-module'

HTTP_ACCEPT     

'text/html,application/xhtml+xml,application/xml;q=0.9,_/_;q=0.8'

DESKTOP_SESSION     

'ubuntu'

wsgi.version    

(1, 0)

DEFAULTS_PATH   

'/usr/share/gconf/ubuntu.default.path'

wsgi.run_once   

False

wsgi.errors     

<open file '<stderr>', mode 'w' at 0xb75420d0>

wsgi.multiprocess   

False

HTTP_ACCEPT_LANGUAGE    

'en-GB,en;q=0.5'

INSTANCE    

'Unity'

wsgi.input  

<socket._fileobject object at 0xb3cc426c>

TMUX_PANE   

'%0'

XDG_SEAT    

'seat0'

HTTP_COOKIE     

'csrftoken=eT6xWBixiphebINVajqt5coD7NbjnB4Z; sessionid=d9i83vag5j31b2miy94hsk6db9kvqqew'

GNOME_DESKTOP_SESSION_ID    

'this-is-deprecated'

XDG_CURRENT_DESKTOP     

'Unity'

QUERY_STRING    

''

QT_IM_MODULE    

'ibus'

LOGNAME     

'cephlin'

USER    

'cephlin'

GNOME_KEYRING_CONTROL   

'/run/user/1000/keyring-a0ZBC6'

XDG_VTNR    

'7'

PATH    

'/home/cephlin/Projects/Python/shop/env/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'

PS1     

'(env)${ret_status}%{$fg_bold[green]%}%p %{$fg[cyan]%}%c %{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%} % %{$reset_color%}'

ZSH     

'/home/cephlin/.oh-my-zsh'

TERM    

'screen'

HTTP_USER_AGENT     

'Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:42.0) Gecko/20100101 Firefox/42.0'

XDG_SESSION_PATH    

'/org/freedesktop/DisplayManager/Session0'

XAUTHORITY  

'/home/cephlin/.Xauthority'

LANGUAGE    

'en_GB:en'

REMOTE_ADDR     

'127.0.0.1'

SHLVL   

'2'

QT_QPA_PLATFORMTHEME    

'appmenu-qt5'

wsgi.url_scheme     

'http'

COMPIZ_CONFIG_PROFILE   

'ubuntu'

WINDOWID    

'67108876'

SESSIONTYPE     

'gnome-session'

IM_CONFIG_PHASE     

'1'

GPG_AGENT_INFO  

'/run/user/1000/keyring-a0ZBC6/gpg:0:1'

CONTENT_LENGTH  

''

CONTENT_TYPE    

'text/plain'

SSH_AUTH_SOCK   

'/run/user/1000/keyring-a0ZBC6/ssh'

TMUX    

'/tmp/tmux-1000/default,2817,0'

GDMSESSION  

'ubuntu'

UPSTART_JOB     

'unity-settings-daemon'

TEXTDOMAINDIR   

'/usr/share/locale/'

wsgi.multithread    

True

XDG_SEAT_PATH   

'/org/freedesktop/DisplayManager/Seat0'

TZ  

'America/Chicago'

_   

'/home/cephlin/Projects/Python/shop/env/bin/saleor'

HTTP_CONNECTION     

'keep-alive'

GTK_IM_MODULE   

'ibus'

LSCOLORS    

'Gxfxcxdxbxegedabagacad'

XDG_CONFIG_DIRS     

'/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdg'

SERVER_NAME     

'localhost'

GATEWAY_INTERFACE   

'CGI/1.1'

REMOTE_HOST     

''

OLDPWD  

'/home/cephlin/Projects/Python/shop'

GDM_LANG    

'en_GB'

CSRF_COOKIE_USED    

True

PWD     

'/home/cephlin/Projects/Python/shop'

DJANGO_SETTINGS_MODULE  

'saleor.settings'

COLORTERM   

'gnome-terminal'

wsgi.file_wrapper   

''

PAGER   

'less'

HTTP_ACCEPT_ENCODING    

'gzip, deflate'

Settings
Using settings module saleor.settings
Setting     Value
DEFAULT_WEIGHT  

'lb'

SELECTABLE_ESCAPED_KEYS     

u'********************'

SECURE_BROWSER_XSS_FILTER   

False

USE_THOUSAND_SEPARATOR  

False

CSRF_COOKIE_SECURE  

False

LANGUAGE_CODE   

'en-us'

ROOT_URLCONF    

'saleor.urls'

MANAGERS    

()

SILENCED_SYSTEM_CHECKS  

[]

DEFAULT_CHARSET     

'utf-8'

SESSION_SERIALIZER  

'django.contrib.sessions.serializers.JSONSerializer'

STATIC_ROOT     

'/home/cephlin/Projects/Python/shop/static'

SELECTABLE_MAX_LIMIT    

25

GOOGLE_ANALYTICS_TRACKING_ID    

None

ALLOWED_HOSTS   

['localhost']

EMAIL_HOST  

None

MESSAGE_STORAGE     

'django.contrib.messages.storage.session.SessionStorage'

DEFAULT_CURRENCY    

'USD'

EMAIL_SUBJECT_PREFIX    

'[Django] '

SERVER_EMAIL    

'root@localhost'

SECURE_HSTS_SECONDS     

0

STATICFILES_FINDERS     

['django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder']

SESSION_CACHE_ALIAS     

'default'

SESSION_COOKIE_DOMAIN   

None

SESSION_COOKIE_NAME     

'sessionid'

TIME_INPUT_FORMATS  

('%H:%M:%S', '%H:%M:%S.%f', '%H:%M')

SECURE_REDIRECT_EXEMPT  

[]

DATABASES   

{'default': {'ATOMIC_REQUESTS': False,
             'AUTOCOMMIT': True,
             'CONN_MAX_AGE': 0,
             'ENGINE': 'django.db.backends.sqlite3',
             'HOST': '',
             'NAME': '/home/cephlin/Projects/Python/shop/dev.sqlite',
             'OPTIONS': {},
             'PASSWORD': u'********************',
             'PORT': '',
             'TEST': {'CHARSET': None,
                      'COLLATION': None,
                      'MIRROR': None,
                      'NAME': None},
             'TIME_ZONE': 'UTC',
             'USER': ''}}

EMAIL_SSL_KEYFILE   

u'********************'

FILE_UPLOAD_DIRECTORY_PERMISSIONS   

None

FILE_UPLOAD_PERMISSIONS     

None

FILE_UPLOAD_HANDLERS    

('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')

DEFAULT_CONTENT_TYPE    

'text/html'

APPEND_SLASH    

True

FIRST_DAY_OF_WEEK   

0

DATABASE_ROUTERS    

[]

DEFAULT_TABLESPACE  

''

YEAR_MONTH_FORMAT   

'F Y'

STATICFILES_STORAGE     

'django.contrib.staticfiles.storage.StaticFilesStorage'

CACHES  

{'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}

SQLITE_DB_URL   

'sqlite:////home/cephlin/Projects/Python/shop/dev.sqlite'

FACEBOOK_SECRET     

u'********************'

SESSION_COOKIE_PATH     

'/'

CHECKOUT_PAYMENT_CHOICES    

[('default', 'Dummy provider')]

MESSAGE_TAGS    

{40: 'danger'}

SECURE_CONTENT_TYPE_NOSNIFF     

False

LOW_STOCK_THRESHOLD     

10

MIDDLEWARE_CLASSES  

['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'babeldjango.middleware.LocaleMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.DiscountMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CheckHTML']

USE_I18N    

True

THOUSAND_SEPARATOR  

','

SECRET_KEY  

u'********************'

CANONICAL_HOSTNAME  

'localhost:8000'

LANGUAGE_COOKIE_NAME    

'django_language'

DEFAULT_INDEX_TABLESPACE    

''

LOGGING_CONFIG  

'logging.config.dictConfig'

SIGNING_BACKEND     

'django.core.signing.TimestampSigner'

TEMPLATE_LOADERS    

('django.template.loaders.filesystem.Loader',
 'django.template.loaders.app_directories.Loader')

WSGI_APPLICATION    

'saleor.wsgi.application'

TEMPLATE_DEBUG  

False

X_FRAME_OPTIONS     

'SAMEORIGIN'

CSRF_COOKIE_NAME    

'csrftoken'

SESSION_COOKIE_SECURE   

False

FORCE_SCRIPT_NAME   

None

USE_X_FORWARDED_HOST    

False

PAYMENT_HOST    

'localhost:8000'

EMAIL_TIMEOUT   

None

SECURE_SSL_HOST     

None

ACCOUNT_ACTIVATION_DAYS     

3

AWS_MEDIA_ACCESS_KEY_ID     

u'********************'

CSRF_COOKIE_DOMAIN  

None

FILE_CHARSET    

'utf-8'

DEBUG   

True

LANGUAGE_COOKIE_DOMAIN  

None

AWS_ACCESS_KEY_ID   

u'********************'

DEFAULT_FILE_STORAGE    

'django.core.files.storage.FileSystemStorage'

INSTALLED_APPS  

['offsite_storage',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.webdesign',
 'saleor.userprofile',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.order',
 'saleor.registration',
 'saleor.dashboard',
 'versatileimagefield',
 'babeldjango',
 'django_prices',
 'emailit',
 'mptt',
 'payments',
 'selectable',
 'materializecssform',
 'rest_framework']

LANGUAGES   

(('af', 'Afrikaans'),
 ('ar', 'Arabic'),
 ('ast', 'Asturian'),
 ('az', 'Azerbaijani'),
 ('bg', 'Bulgarian'),
 ('be', 'Belarusian'),
 ('bn', 'Bengali'),
 ('br', 'Breton'),
 ('bs', 'Bosnian'),
 ('ca', 'Catalan'),
 ('cs', 'Czech'),
 ('cy', 'Welsh'),
 ('da', 'Danish'),
 ('de', 'German'),
 ('el', 'Greek'),
 ('en', 'English'),
 ('en-au', 'Australian English'),
 ('en-gb', 'British English'),
 ('eo', 'Esperanto'),
 ('es', 'Spanish'),
 ('es-ar', 'Argentinian Spanish'),
 ('es-mx', 'Mexican Spanish'),
 ('es-ni', 'Nicaraguan Spanish'),
 ('es-ve', 'Venezuelan Spanish'),
 ('et', 'Estonian'),
 ('eu', 'Basque'),
 ('fa', 'Persian'),
 ('fi', 'Finnish'),
 ('fr', 'French'),
 ('fy', 'Frisian'),
 ('ga', 'Irish'),
 ('gl', 'Galician'),
 ('he', 'Hebrew'),
 ('hi', 'Hindi'),
 ('hr', 'Croatian'),
 ('hu', 'Hungarian'),
 ('ia', 'Interlingua'),
 ('id', 'Indonesian'),
 ('io', 'Ido'),
 ('is', 'Icelandic'),
 ('it', 'Italian'),
 ('ja', 'Japanese'),
 ('ka', 'Georgian'),
 ('kk', 'Kazakh'),
 ('km', 'Khmer'),
 ('kn', 'Kannada'),
 ('ko', 'Korean'),
 ('lb', 'Luxembourgish'),
 ('lt', 'Lithuanian'),
 ('lv', 'Latvian'),
 ('mk', 'Macedonian'),
 ('ml', 'Malayalam'),
 ('mn', 'Mongolian'),
 ('mr', 'Marathi'),
 ('my', 'Burmese'),
 ('nb', 'Norwegian Bokmal'),
 ('ne', 'Nepali'),
 ('nl', 'Dutch'),
 ('nn', 'Norwegian Nynorsk'),
 ('os', 'Ossetic'),
 ('pa', 'Punjabi'),
 ('pl', 'Polish'),
 ('pt', 'Portuguese'),
 ('pt-br', 'Brazilian Portuguese'),
 ('ro', 'Romanian'),
 ('ru', 'Russian'),
 ('sk', 'Slovak'),
 ('sl', 'Slovenian'),
 ('sq', 'Albanian'),
 ('sr', 'Serbian'),
 ('sr-latn', 'Serbian Latin'),
 ('sv', 'Swedish'),
 ('sw', 'Swahili'),
 ('ta', 'Tamil'),
 ('te', 'Telugu'),
 ('th', 'Thai'),
 ('tr', 'Turkish'),
 ('tt', 'Tatar'),
 ('udm', 'Udmurt'),
 ('uk', 'Ukrainian'),
 ('ur', 'Urdu'),
 ('vi', 'Vietnamese'),
 ('zh-cn', 'Simplified Chinese'),
 ('zh-hans', 'Simplified Chinese'),
 ('zh-hant', 'Traditional Chinese'),
 ('zh-tw', 'Traditional Chinese'))

USE_L10N    

True

SECURE_HSTS_INCLUDE_SUBDOMAINS  

False

STATICFILES_DIRS    

['/home/cephlin/Projects/Python/shop/saleor/static']

PREPEND_WWW     

False

SECURE_PROXY_SSL_HEADER     

('HTTP_X_FORWARDED_PROTO', 'https')

LANGUAGE_COOKIE_AGE     

None

SESSION_COOKIE_HTTPONLY     

True

AWS_SECRET_ACCESS_KEY   

u'********************'

FACEBOOK_APP_ID     

None

DEBUG_PROPAGATE_EXCEPTIONS  

False

CSRF_COOKIE_AGE     

31449600

AWS_MEDIA_BUCKET_NAME   

None

MONTH_DAY_FORMAT    

'F j'

LOGIN_URL   

'/account/login'

SESSION_EXPIRE_AT_BROWSER_CLOSE     

False

TIME_FORMAT     

'P'

AUTH_USER_MODEL     

'userprofile.User'

DATE_INPUT_FORMATS  

('%Y-%m-%d',
 '%m/%d/%Y',
 '%m/%d/%y',
 '%b %d %Y',
 '%b %d, %Y',
 '%d %b %Y',
 '%d %b, %Y',
 '%B %d %Y',
 '%B %d, %Y',
 '%d %B %Y',
 '%d %B, %Y')

AUTHENTICATION_BACKENDS     

('saleor.registration.backends.EmailPasswordBackend',
 'saleor.registration.backends.ExternalLoginBackend',
 'saleor.registration.backends.TrivialBackend')

EMAIL_HOST_PASSWORD     

u'********************'

WARN_ABOUT_INVALID_HTML5_OUTPUT     

False

PASSWORD_RESET_TIMEOUT_DAYS     

u'********************'

SESSION_FILE_PATH   

None

CACHE_MIDDLEWARE_ALIAS  

'default'

SESSION_SAVE_EVERY_REQUEST  

False

NUMBER_GROUPING     

0

SESSION_ENGINE  

'django.contrib.sessions.backends.cached_db'

CSRF_FAILURE_VIEW   

'django.views.csrf.csrf_failure'

CSRF_COOKIE_PATH    

'/'

LOGIN_REDIRECT_URL  

'home'

PROJECT_ROOT    

'/home/cephlin/Projects/Python/shop'

DECIMAL_SEPARATOR   

'.'

IGNORABLE_404_URLS  

()

LOCALE_PATHS    

()

TEMPLATE_STRING_IF_INVALID  

''

LOGOUT_URL  

'/accounts/logout/'

EMAIL_USE_TLS   

False

PAYMENT_MODEL   

'order.Payment'

FIXTURE_DIRS    

()

GOOGLE_CLIENT_ID    

None

DATE_FORMAT     

'N j, Y'

MEDIA_ROOT  

'/home/cephlin/Projects/Python/shop/media'

DEFAULT_EXCEPTION_REPORTER_FILTER   

'django.views.debug.SafeExceptionReporterFilter'

ADMINS  

()

FORMAT_MODULE_PATH  

None

DEFAULT_FROM_EMAIL  

None

MEDIA_URL   

'/media/'

DATETIME_FORMAT     

'N j, Y, P'

TEMPLATE_DIRS   

()

PAYMENT_VARIANTS    

{'default': ('payments.dummy.DummyProvider', {})}

SITE_ID     

1

DISALLOWED_USER_AGENTS  

()

ALLOWED_INCLUDE_ROOTS   

()

GOOGLE_CLIENT_SECRET    

u'********************'

LOGGING     

{'disable_existing_loggers': False,
 'filters': {'require_debug_false': {'()': 'django.utils.log.RequireDebugFalse'},
             'require_debug_true': {'()': 'django.utils.log.RequireDebugTrue'}},
 'formatters': {'simple': {'format': '%(levelname)s %(message)s'},
                'verbose': {'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'}},
 'handlers': {'console': {'class': 'logging.StreamHandler',
                          'filters': ['require_debug_true'],
                          'formatter': 'simple',
                          'level': 'DEBUG'},
              'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',
                              'filters': ['require_debug_false'],
                              'level': 'ERROR'}},
 'loggers': {'django.request': {'handlers': ['mail_admins'],
                                'level': 'ERROR',
                                'propagate': True},
             'saleor': {'handlers': ['console'],
                        'level': 'DEBUG',
                        'propagate': True}},
 'version': 1}

SHORT_DATE_FORMAT   

'm/d/Y'

TEMPLATES   

[{'BACKEND': 'django.template.backends.django.DjangoTemplates',
  'DIRS': ['/home/cephlin/Projects/Python/shop/templates'],
  'OPTIONS': {'context_processors': ['django.contrib.auth.context_processors.auth',
                                     'django.core.context_processors.debug',
                                     'django.core.context_processors.i18n',
                                     'django.core.context_processors.media',
                                     'django.core.context_processors.static',
                                     'django.core.context_processors.tz',
                                     'django.contrib.messages.context_processors.messages',
                                     'django.core.context_processors.request',
                                     'saleor.core.context_processors.canonical_hostname',
                                     'saleor.core.context_processors.default_currency',
                                     'saleor.core.context_processors.categories'],
              'debug': True,
              'loaders': ['django.template.loaders.filesystem.Loader',
                          'django.template.loaders.app_directories.Loader',
                          'django.template.loaders.eggs.Loader'],
              'string_if_invalid': '<< MISSING VARIABLE >>'}}]

TEST_RUNNER     

''

CACHE_MIDDLEWARE_KEY_PREFIX     

u'********************'

SECURE_SSL_REDIRECT     

False

TIME_ZONE   

'America/Chicago'

FILE_UPLOAD_MAX_MEMORY_SIZE     

2621440

EMAIL_BACKEND   

'django.core.mail.backends.console.EmailBackend'

AWS_MEDIA_SECRET_ACCESS_KEY     

u'********************'

EMAIL_USE_SSL   

False

TEMPLATE_CONTEXT_PROCESSORS     

('django.contrib.auth.context_processors.auth',
 'django.template.context_processors.debug',
 'django.template.context_processors.i18n',
 'django.template.context_processors.media',
 'django.template.context_processors.static',
 'django.template.context_processors.tz',
 'django.contrib.messages.context_processors.messages')

MIGRATION_MODULES   

{}

SESSION_COOKIE_AGE  

1209600

SETTINGS_MODULE     

'saleor.settings'

USE_ETAGS   

False

LANGUAGES_BIDI  

('he', 'ar', 'fa', 'ur')

FILE_UPLOAD_TEMP_DIR    

None

INTERNAL_IPS    

['127.0.0.1']

STATIC_URL  

'/static/'

EMAIL_PORT  

None

USE_TZ  

True

SHORT_DATETIME_FORMAT   

'm/d/Y P'

TEST_NON_SERIALIZED_APPS    

[]

PASSWORD_HASHERS    

u'********************'

ABSOLUTE_URL_OVERRIDES  

{}

LANGUAGE_COOKIE_PATH    

'/'

PAYMENT_BASE_URL    

'http://localhost:8000/'

CACHE_MIDDLEWARE_SECONDS    

600

EMAIL_SSL_CERTFILE  

None

CSRF_COOKIE_HTTPONLY    

False

DATETIME_INPUT_FORMATS  

('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M:%S.%f',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M:%S.%f',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M:%S.%f',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')

AWS_STATIC_BUCKET_NAME  

None

EMAIL_HOST_USER     

None

You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard page generated by the handler for this status code.
"
6256,mirumee,saleor,37,closed,386,14,https://api.github.com/repos/mirumee/saleor/issues/386/comments,https://github.com/mirumee/saleor/issues/386,[],Add stock error,"I created a product and then went to go add a stock record for it. As soon as I hit the 'add' link this happens. I tried to track it down but am new to your code and all the traceback appears in django standard library classes. It all has to do with the variant field form -- 'VariantChoiceField'

pip freeze:

Babel==1.3
BabelDjango==0.2.2
Django==1.8.6
Markdown==2.6.4
Pillow==3.0.0
PyJWT==1.4.0
Unidecode==0.04.18
argparse==1.2.1
boto==2.38.0
braintree==3.21.0
cssselect==0.9.1
cssutils==1.0.1
dj-database-url==0.3.0
django-absolute==0.3
django-emailit==0.2.2
django-materializecss-form==0.0.64
django-model-utils==2.0.3
django-mptt==0.7.4
django-offsite-storage==0.0.6
django-payments==0.7.3
django-prices==0.4.1
django-selectable==0.8.0
django-versatileimagefield==1.0.6
djangorestframework==3.1.3
fake-factory==0.5.3
google-measurement-protocol==0.1.4
jsonfield==1.0.3
lxml==3.5.0b1
premailer==2.9.6
prices==0.5.4
pycrypto==2.6.1
pytz==2015.7
requests==2.8.1
saleor==0.1.0a0
satchless==1.1.3
stripe==1.27.1
suds-jurko==0.6
wsgiref==0.1.2
xmltodict==0.9.2

Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/dashboard/products/1/stock/add/

Django Version: 1.8.6
Python Version: 2.7.6
Installed Applications:
['offsite_storage',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sitemaps',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.webdesign',
 'saleor.userprofile',
 'saleor.product',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.order',
 'saleor.registration',
 'saleor.dashboard',
 'versatileimagefield',
 'babeldjango',
 'django_prices',
 'emailit',
 'mptt',
 'payments',
 'selectable',
 'materializecssform',
 'rest_framework']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'babeldjango.middleware.LocaleMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.DiscountMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CheckHTML']

Template error:
In template /home/bryan/Projects/mission/mission_naturals/saleor/core/templates/materializecssform/field.html, error at line 92
   'RelatedManager' object has no attribute '_prefetch_related_lookups'

   82 : 

   83 :                     {% if field.help_text %}

   84 :                     <p class=""help-block"">

   85 :                         {{ field.help_text|safe }}

   86 :                     </p>

   87 :                     {% endif %}

   88 :                 </div>

   89 : 

   90 :             {% else %}

   91 :                 <label for=""{{ field.id_for_label }}"">{{ field.label }}</label>

   92 :                  {{field}} 

   93 :                 {% for error in field.errors %}

   94 :                     <p class=""help-block materialize-red-text"">{{ error }}</p>

   95 :                 {% endfor %}

   96 : 

   97 :                 {% if field.help_text %}

   98 :                 <p class=""help-block"">

   99 :                     {{ field.help_text|safe }}

   100 :                 </p>

   101 :                 {% endif %}

   102 : 

Traceback:
File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                 response = response.render()
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/response.py"" in render
2.             self.content = self.rendered_content
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/response.py"" in rendered_content
3.         content = template.render(context, self._request)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/backends/django.py"" in render
4.         return self.template.render(context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
5.                     return self._render(context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in _render
6.         return self.nodelist.render(context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
7.                 bit = self.render_node(node, context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
8.             return node.render(context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
9.         return compiled_parent._render(context)
   File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in _render
10.         return self.nodelist.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
11.                 bit = self.render_node(node, context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
12.             return node.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
13.                 result = block.nodelist.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
14.                 bit = self.render_node(node, context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
15.             return node.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render
16.             output = self.filter_expression.resolve(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in resolve
17.                 new_obj = func(obj, *arg_vals)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django_materializecss_form-0.0.64-py2.7.egg/materializecssform/templatetags/materializecss.py"" in materializecss
18.     return render(element, markup_classes)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django_materializecss_form-0.0.64-py2.7.egg/materializecssform/templatetags/materializecss.py"" in render
19.     return template.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/backends/django.py"" in render
20.         return self.template.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
21.                     return self._render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in _render
22.         return self.nodelist.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
23.                 bit = self.render_node(node, context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
24.             return node.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/defaulttags.py"" in render
25.                 return nodelist.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
26.                 bit = self.render_node(node, context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
27.             return node.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/defaulttags.py"" in render
28.                 return nodelist.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/base.py"" in render
29.                 bit = self.render_node(node, context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
30.             return node.render(context)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/template/debug.py"" in render
31.             output = force_text(output)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/utils/encoding.py"" in force_text
32.                 s = six.text_type(s)
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/utils/html.py"" in <lambda>
33.         klass.**unicode** = lambda self: mark_safe(klass_unicode(self))
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/forms/forms.py"" in **str**
34.         return self.as_widget()
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/forms/forms.py"" in as_widget
35.         return force_text(widget.render(name, self.value(), attrs=attrs))
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/forms/widgets.py"" in render
36.         options = self.render_options(choices, [value])
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/forms/widgets.py"" in render_options
37.         for option_value, option_label in chain(self.choices, choices):
    File ""/home/bryan/Projects/mission/saleor/local/lib/python2.7/site-packages/django/forms/models.py"" in **iter**
38.         method = 'all' if self.queryset._prefetch_related_lookups else 'iterator'

Exception Type: AttributeError at /dashboard/products/1/stock/add/
Exception Value: 'RelatedManager' object has no attribute '_prefetch_related_lookups'
"
6272,mirumee,saleor,37,closed,370,4,https://api.github.com/repos/mirumee/saleor/issues/370/comments,https://github.com/mirumee/saleor/issues/370,[],Add django bootstrap3 templatetags,"I think we need more complex solution for bootstrap3 tempalatetags in Saleor. I was facing some problems while customizing ""Add to cart"" form. I couldn't clearly add `non_field_errors`, as it's not correctly done in current version. I had to use this code: 
`{% include ""bootstrap/_non_field_errors.html"" with errors=form.non_field_errors %}`
I suggest to use [django-bootstrap3](http://django-bootstrap3.readthedocs.org/en/latest/) or maybe you have some propositions.
"
6319,mirumee,saleor,37,closed,323,4,https://api.github.com/repos/mirumee/saleor/issues/323/comments,https://github.com/mirumee/saleor/issues/323,[],facebook oauth login exception,"I'm running into an exception using the FacebookClient oauth class as it is currently implemented in saleor.  I've set up the app access on facebook and using the facebook authenticate method from /login/ correctly produces the facebook dialogue requesting permission. However, the response isn't what's expected:  

`Django Version:    1.8.3`
`Exception Type:    KeyError`
`Exception Value:`
`'verified'`
`Exception Location:    [..]/saleor/registration/utils.py in get_user_info, line 186`

I've gone through the code and I can't tell if the facebook API has changed or if there's some misconfiguration on the facebook side.

The request URL that facebook returns is:

`Request URL:   http://localhost:5000/account/oauth_callback/facebook/?code=AQCDRZbizgMZ6bMjcUwk5_yRsvW4Ix10hrJsuqpJ_Ce5PVjoXyOpnBG27jSijFCD6kascY0NbhtSA3t1oQWyAjNwRser48t6oAQGxr-P7a_toXE-a96ctooe7BQ0vb_1_er5CVCa3E10w_rFQn-OkGgHpNPdrgMhe-XtRKrIx5kyEdUAP_dw1ndg3PBd3mxrvDU1W35ntqIZCZ_fNHM4Vj8pH-eONj6VljH9HTzZELpzJuRi81sklVnrr-K8Z0OnLksmf4erzixyIEhPBs_C2n_f4Shx_DDjfHvzKO-f5RkhgXq3mMw4LgEBZmlN0HM2AdU`

Can someone advise on how I might rectify this?  Thanks.
"
6339,mirumee,saleor,37,closed,302,2,https://api.github.com/repos/mirumee/saleor/issues/302/comments,https://github.com/mirumee/saleor/issues/302,[],Does Saleor work with Django 1.8?,"I just upgraded and got this error. Looks like Django [removed this in 1.8](https://github.com/django/django/commit/80facd7a0f3e545d800ad759ce5458f5f2bc246e)?

```
File ""/Users/chad/site/rbi-com-saleor/server/saleor/core/utils/__init__.py"", line 7, in <module>
    from django.http.request import absolute_http_url_re
ImportError: cannot import name absolute_http_url_re
```

Has anyone got Saleor to work with Django 1.8?
"
6348,mirumee,saleor,38,closed,292,3,https://api.github.com/repos/mirumee/saleor/issues/292/comments,https://github.com/mirumee/saleor/issues/292,[],Recommended spot for payment processing,"Sorry, this is more of a question than an issue.

I'm using django-payments as well and I was thinking about the best place to put the code for actually processing the payment.  I was thinking it might be best in the the last step (say SummaryStep) in the `process` method just before it creates the order since in my case, if the CC declines I don't want to create an order.  Then if it declines I could just redirect them back to the last step with error messages.

Does this sound right?  Or is there a better spot/way of doing this?
"
6352,mirumee,saleor,38,closed,288,2,https://api.github.com/repos/mirumee/saleor/issues/288/comments,https://github.com/mirumee/saleor/issues/288,[],Bad Request when run locally,"Hi Community

I follow the steps defined in the README successfully but when I try to run the application locally, it returns a BAD REQUEST(400) error.

``` python
Performing system checks...

System check identified no issues (0 silenced).
June 14, 2015 - 14:18:35
Django version 1.7, using settings 'saleor.settings'
Starting development server at http://127.0.0.1:8080/
Quit the server with CONTROL-C.
[14/Jun/2015 14:18:46] ""GET / HTTP/1.1"" 400 26
[14/Jun/2015 14:18:46] ""GET /favicon.ico HTTP/1.1"" 400 26
[14/Jun/2015 14:18:46] ""GET /favicon.ico HTTP/1.1"" 400 26
```

Any advice on next steps?
"
6367,mirumee,saleor,38,closed,271,0,https://api.github.com/repos/mirumee/saleor/issues/271/comments,https://github.com/mirumee/saleor/issues/271,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Migrate issue on Postgresql,"`python manage.py migrate` fails on Postgresql:

```
Operations to perform:
  Synchronize unmigrated apps: core, product, mptt, django_prices, staticfiles, messages, cart, offsite_storage, sitemaps, webdesign, emailit, dashboard, registration, versatileimagefield, selectable, payments, checkout, order, babeldjango, userprofile
  Apply all migrations: admin, contenttypes, sites, auth, sessions
Synchronizing apps without migrations:
  Creating tables...
    Creating table product_category
    Creating table product_product
    Creating table product_fixedproductdiscount
    Creating table product_color
    Creating table product_bag
    Creating table product_shirt
    Creating table product_bagvariant
    Creating table product_shirtvariant
    Creating table product_productimage
    Creating table order_order
    Creating table order_deliverygroup
    Creating table order_ordereditem
    Creating table order_payment
    Creating table order_orderhistoryentry
    Creating table order_ordernote
    Creating table registration_externaluserdata
    Creating table registration_emailconfirmationrequest
    Creating table registration_emailchangerequest
    Creating table userprofile_address
    Creating table userprofile_user
    Running deferred SQL...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/__init__.py"", line 330, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/base.py"", line 390, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/base.py"", line 441, in execute
    output = self.handle(*args, **options)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/commands/syncdb.py"", line 25, in handle
    call_command(""migrate"", **options)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/__init__.py"", line 120, in call_command
    return command.execute(*args, **defaults)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/base.py"", line 441, in execute
    output = self.handle(*args, **options)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/commands/migrate.py"", line 179, in handle
    created_models = self.sync_apps(connection, executor.loader.unmigrated_apps)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/core/management/commands/migrate.py"", line 317, in sync_apps
    cursor.execute(statement)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/db/utils.py"", line 97, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/adam/.virtualenvs/saleor-dj18/local/lib/python2.7/site-packages/Django-1.8-py2.7.egg/django/db/backends/utils.py"", line 62, in execute
    return self.cursor.execute(sql)
django.db.utils.ProgrammingError: relation ""auth_group"" does not exist
```
"
6458,mirumee,saleor,39,closed,176,6,https://api.github.com/repos/mirumee/saleor/issues/176/comments,https://github.com/mirumee/saleor/issues/176,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",400 Client Error: Bad Request,"I'm getting this error when using paypal provider from django-payments module. 

This issue seems relevant:
mirumee/django-payments#27

Request Method: GET
Request URL: http://127.0.0.1:8000/order/175da597-d413-4866-952c-63c5c91dc51f/payment/PayPal/

Django Version: 1.6.2
Python Version: 2.7.4
Installed Applications:
['django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.webdesign',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.product',
 'saleor.order',
 'saleor.registration',
 'saleor.userprofile',
 'django_images',
 'django_prices',
 'mptt',
 'payments',
 'south',
 'selectable',
 'debug_toolbar']
Installed Middleware:
[u'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CheckHTML']

Traceback:
File ""/home/admin/.virtualenvs/saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)
   File ""/home/admin/devel/python/saleor/saleor/order/**init**.py"" in decorator
2.         return func(_args, *_kwargs)
   File ""/home/admin/devel/python/saleor/saleor/order/views.py"" in start_payment
3.         form = payment.get_form(data=request.POST or None)
   File ""/home/admin/.virtualenvs/saleor/local/lib/python2.7/site-packages/payments/models.py"" in get_form
4.         return provider.get_form(data=data)
   File ""/home/admin/.virtualenvs/saleor/local/lib/python2.7/site-packages/payments/paypal/**init**.py"" in get_form
5.             response.raise_for_status()
   File ""/home/admin/.virtualenvs/saleor/local/lib/python2.7/site-packages/requests/models.py"" in raise_for_status
6.             raise HTTPError(http_error_msg, response=self)

Exception Type: HTTPError at /order/175da597-d413-4866-952c-63c5c91dc51f/payment/PayPal/
Exception Value: 400 Client Error: Bad Request
"
6472,mirumee,saleor,39,closed,162,1,https://api.github.com/repos/mirumee/saleor/issues/162/comments,https://github.com/mirumee/saleor/issues/162,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Checkout throws TypeError if user has address,"If user already has billing address stored in the account, when going to checkout, TypeError is being thrown.

Traceback below:

```
Request Method: GET
Request URL: http://localhost:8000/checkout/

Django Version: 1.6.2
Python Version: 2.7.4
Installed Applications:
['django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.webdesign',
 'saleor.cart',
 'saleor.checkout',
 'saleor.core',
 'saleor.product',
 'saleor.order',
 'saleor.registration',
 'saleor.userprofile',
 'django_images',
 'django_prices',
 'mptt',
 'payments',
 'south',
 'selectable']
Installed Middleware:
['django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'saleor.cart.middleware.CartMiddleware',
 'saleor.core.middleware.GoogleAnalytics',
 'saleor.core.middleware.CheckHTML']


Traceback:
File ""/home/admin/.virtualenvs/saleor/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/admin/devel/python/saleor/saleor/checkout/views.py"" in details
  10.     checkout = Checkout(request)
File ""/home/admin/devel/python/saleor/saleor/checkout/__init__.py"" in __init__
  43.         self.generate_steps(self.cart)
File ""/home/admin/devel/python/saleor/saleor/checkout/__init__.py"" in generate_steps
  48.             self.request, self.get_storage('billing'))
File ""/home/admin/devel/python/saleor/saleor/checkout/steps.py"" in __init__
  95.         super(BillingAddressStep, self).__init__(request, storage, address)
File ""/home/admin/devel/python/saleor/saleor/checkout/steps.py"" in __init__
  41.             self.address = Address(**address)

Exception Type: TypeError at /checkout/
Exception Value: ModelBase object argument after ** must be a mapping, not Address
```
"
6500,mirumee,saleor,39,closed,134,0,https://api.github.com/repos/mirumee/saleor/issues/134/comments,https://github.com/mirumee/saleor/pull/134,[],Product variants with collections (and autocomplete),"I suggest to discard previous pull request for this feature - #130 . In this branch I did some cleanup and squashed small commits. 

This branch includes:
- Product variants with sizes and collections
- Product collections are implemented as `CharField(db_index=True)` (as @patrys suggested)
- Product collections have auto-complete feature implemented with django-selectable (works on Python 3)
- All hints from previous PR are implemented and errors are fixed

We should merge this to master and later we can merge currency conversion (#133)
"
6520,mirumee,saleor,39,closed,114,5,https://api.github.com/repos/mirumee/saleor/issues/114/comments,https://github.com/mirumee/saleor/issues/114,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Integrity Error When Loading Fixtures for Project,"Per this question http://stackoverflow.com/questions/19857406/django-unable-to-load-test-fixtures-integrityerror/19857905?noredirect=1#19857905 and discussion on the Google Group - https://groups.google.com/forum/#!topic/satchless/khbhKRAxJpM I am getting the following problem when loading test fixtures generated from a database dump of a saleor installation 

Traceback (most recent call last):
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/test/testcases.py"", line 259, in **call**
    self._pre_setup()
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/test/testcases.py"", line 479, in _pre_setup
    self._fixture_setup()
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/test/testcases.py"", line 849, in _fixture_setup
    'skip_validation': True,
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/core/management/__init__.py"", line 161, in call_command
    return klass.execute(_args, *_defaults)
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/core/management/base.py"", line 255, in execute
    output = self.handle(_args, *_options)
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/core/management/commands/loaddata.py"", line 224, in handle
    connection.check_constraints(table_names=table_names)
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 132, in check_constraints
    self.cursor().execute('SET CONSTRAINTS ALL IMMEDIATE')
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 56, in execute
    six.reraise(utils.IntegrityError, utils.IntegrityError(*tuple(e.args)), sys.exc_info()[2])
  File ""/Users/andres/.virtualenvs/rpmwest/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 54, in execute
    return self.cursor.execute(query, args)
IntegrityError: Problem installing fixtures: insert or update on table ""product_ship"" violates foreign key constraint ""product_ship_product_ptr_id_fkey""
DETAIL:  Key (product_ptr_id)=(1) is not present in table ""product_product"".
"
6592,mirumee,saleor,40,closed,40,1,https://api.github.com/repos/mirumee/saleor/issues/40/comments,https://github.com/mirumee/saleor/issues/40,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/mirumee/saleor/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyODE5MjMzMQ=="", ""id"": 28192331}]",Watch big prices,"When your order exceeds maximum price that django-payments can handle, you get python decimal's error.

We need to watch total price for order in saleor and disallow to exceed it.
"
6630,mirumee,saleor,40,closed,2,1,https://api.github.com/repos/mirumee/saleor/issues/2/comments,https://github.com/mirumee/saleor/issues/2,[],Tidy HTML error page logging.,"Django error page has a lot of tidy warnings. They cover the traceback in the console.
"
6721,ansible,awx,2,closed,3964,7,https://api.github.com/repos/ansible/awx/issues/3964/comments,https://github.com/ansible/awx/issues/3964,"[{""default"": false, ""name"": ""state:needs_info"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_info"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWw2ODcxNzg4NTQ="", ""id"": 687178854}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Failed to parse dynamic inventory script,"##### ISSUE TYPE
 - Bug Report

##### SUMMARY
Failed to parse a dynamic inventory script. Script works fine in Ansible Engine/CLI. l

##### ENVIRONMENT
* AWX version: Tower 3.4.3
* AWX install method: tower install
* Ansible version:  2.7.9
* Operating System: RHEL 7
* Web Browser: firefox

##### STEPS TO REPRODUCE

Adding inventory to point to custom dynamic script. I have installed subprocess via pip per https://docs.ansible.com/ansible-tower/latest/html/upgrade-migration-guide/virtualenv.html 

##### EXPECTED RESULTS

inventory parsed and added

##### ACTUAL RESULTS

failure

##### ADDITIONAL INFORMATION
```
    1.471 INFO     Updating inventory 22: my inventory
    1.490 INFO     Reading Ansible inventory source: /var/lib/awx/projects/_66__my_playbooks/ansible-inventory/my-inventory.py
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==3.4.3', 'console_scripts', 'awx-manage')()
  File ""/lib/python2.7/site-packages/awx/__init__.py"", line 150, in manage
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 1024, in handle
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 245, in load_inventory_source
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 180, in load
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 163, in command_to_json
RuntimeError: ansible-inventory failed (rc=1) with stdout:

stderr:
 [WARNING]:  * Failed to parse /var/lib/awx/projects/_66__my_playbooks
/ansible-inventory/my-inventory.py with script plugin: Inventory script
(/var/lib/awx/projects/_66__my_playbooks/ansible-inventory/my-inventory.py)
had an execution error: Traceback (most recent call last):   File
""/var/lib/awx/projects/_66__my_playbooks/ansible-inventory/my-inventory.py"",
line 126, in <module>     stderr=subprocess.STDOUT, shell=False)   File
""/usr/lib64/python2.7/subprocess.py"", line 568, in check_output     process =
Popen(stdout=PIPE, *popenargs, **kwargs)   File
""/usr/lib64/python2.7/subprocess.py"", line 711, in __init__     errread,
errwrite)   File ""/usr/lib64/python2.7/subprocess.py"", line 1327, in
_execute_child     raise child_exception OSError: [Errno 2] No such file or
directory

 [WARNING]:  * Failed to parse /var/lib/awx/projects/_66__my_playbooks
/ansible-inventory/my-inventory.py with ini plugin:
/var/lib/awx/projects/_66__my_playbooks/ansible-inventory/my-inventory.py:3:
Error parsing host definition 'DOCUMENTATION = '''': No closing quotation

 [WARNING]: Unable to parse /var/lib/awx/projects/_66__my_playbooks/ansible-
inventory/my-inventory.py as an inventory source

ERROR! No inventory was parsed, please check your configuration and options.
```
**The custom script:**
```python
#!/usr/bin/env python

import os
import json
import argparse
import subprocess

comment_char = '#'
server_char = ':'
project_root = os.path.dirname(os.path.abspath(__file__))

parser = argparse.ArgumentParser(
  description='Produce an Ansible Dynamic Inventory file based on nodes.stz'
)
parser.add_argument(
  '--list',
  action='store_true',
  help='Get all Ansible inventory variables about all servers',
)
parser.add_argument(
  '--host',
  action='store',
  help='Get all Ansible inventory variables about a specific server',
)
args = parser.parse_args()

if ""MY_ARGS"" in os.environ:
    MY_ARGS = os.environ['MY_ARGS']

stderr = ''
try:
    MY_ARGS
except:
    output = subprocess.check_output(
            [""asset_list"", ""-A""],
            stderr=subprocess.STDOUT, shell=False)
else:
    output = subprocess.check_output(
            [""asset_list"", ""-a""] + str(MY_ARGS).split(),
            stderr=subprocess.STDOUT, shell=False)
 
result = {
  'all': {
    'children': [
      'ungrouped'
    ],
    'hosts': [],
    'vars': {},
   },
  'ungrouped': {
    'children': [
    ]
  },
  '_meta': {
    'hostvars': {}
   }
}
server = ''
for raw_line in output.split('\n'):
    line = raw_line.strip()
    if len(line) > 0 and not line.startswith(comment_char):
        if line.endswith(server_char):
            server = line[:-1]
            result['all']['hosts'].append(server)
            result['_meta']['hostvars'][server] = {}
        else:
            raw_key, raw_value = line.split('=', 1)
            key = raw_key.strip()
            value = raw_value.strip()
            result['_meta']['hostvars'][server][key] = value
            if key == 'ansible_groups':
                for group in value.split("",""):
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'bucket':
                for group in value.split("",""):
                    group = 'bucket_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'classification':
                for group in value.split("",""):
                    group = 'ni_classification_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'tier':
                for group in value.split("",""):
                    group = 'tier_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'platform':
                for group in value.split("",""):
                    group = 'platform_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'production':
                for group in value.split("",""):
                    group = 'production_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'remedy_os':
                for group in value.split("",""):
                    group = 'remedy_os_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'app_owner':
                for group in value.split("",""):
                    group = 'app_owner_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'os':
                for group in value.split("",""):
                    group = 'os_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
            if key == 'remedy_os':
                for group in value.split("",""):
                    group = 'remedy_os_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
            if key == 'remedy_ostype':
                for group in value.split("",""):
                    group = 'remedy_ostype_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
                    result[group]['hosts'].append(server)
            if key == 'status':
                for group in value.split("",""):
                    group = 'status_' + group.lower().replace("" "", ""_"")
                    if group not in result.keys():
                        result[group] = {'hosts': [], 'vars': {}}
                    result[group]['hosts'].append(server)
                    result[group]['hosts'].append(server)

if args.host is None:
    args.list = True


if args.list:
    print(json.dumps(result))
else:
    server = result['_meta']['hostvars'].get(args.host)
    if server is None:
        print('No such server')
    else:
        server_data = {
            'server': server,
        }
        print(json.dumps(server_data))
```

"
6770,ansible,awx,3,closed,3900,8,https://api.github.com/repos/ansible/awx/issues/3900/comments,https://github.com/ansible/awx/pull/3900,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",Remove duplicated type methods and old Django logic,"##### SUMMARY
This is a general tech debt cleanup item.

Idea of this change: to remove all code in our models that has comments with reference to some old Django version.

We don't want this around as we move to Django 2.0.

##### ISSUE TYPE
 - Feature Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
4.0.0
```


##### ADDITIONAL INFORMATION
<!---
Include additional information to help people understand the change here.
For bugs that don't have a linked bug report, a step-by-step reproduction
of the problem is helpful.
  -->

<!--- Paste verbatim command output below, e.g. before and after your change -->
```

```
"
6775,ansible,awx,3,closed,3890,9,https://api.github.com/repos/ansible/awx/issues/3890/comments,https://github.com/ansible/awx/pull/3890,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Fix Django debug toolbar after its upgrade,"##### SUMMARY
I upgraded this library and didn't realize the needed configuration steps had changed.

https://github.com/jazzband/django-debug-toolbar/blob/master/docs/changes.rst

> Support for automatic setup has been removed as it was frequently problematic. Installation now requires explicit setup.

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
4.0.0
```


##### ADDITIONAL INFORMATION
Will delay merging until https://github.com/ansible/awx/pull/3854 lands, ping @beeankha 

"
6777,ansible,awx,3,closed,3883,5,https://api.github.com/repos/ansible/awx/issues/3883/comments,https://github.com/ansible/awx/pull/3883,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",[WIP] Reduce time to start running jobs via task logic,"##### SUMMARY
These are optimizations obtained by running the task logic through some profiling stuff. It is mostly concerned with tracking no-op conditions, but it also makes a major change to the task logic in that keeps a persistent object for the job.

##### ISSUE TYPE
 - Feature Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
4.0.0
```


##### ADDITIONAL INFORMATION
Tested with the Django debug toolbar by doing this:

```diff
diff --git a/awx/api/views/__init__.py b/awx/api/views/__init__.py
index eb02aec10f..8feec16413 100644
--- a/awx/api/views/__init__.py
+++ b/awx/api/views/__init__.py
@@ -3543,6 +3543,26 @@ class JobDetail(UnifiedJobDeletionMixin, RetrieveUpdateDestroyAPIView):
             methods.remove('PATCH')
         return methods
 
+    def get(self, request, *args, **kwargs):
+        obj = self.get_object()
+        from awx.main.tasks import RunJob
+        from unittest import mock
+        from collections import namedtuple
+
+        def substitute_run(**_kw):
+            Res = namedtuple('Result', ['status', 'rc'])
+            return Res('successful', 0)
+
+        # Mock this so that it will not send events to the callback receiver
+        # because doing so in pytest land creates large explosions
+        with mock.patch('awx.main.queue.CallbackQueueDispatcher.dispatch', lambda self, obj: None):
+            # The point of this test is that we replace run with assertions
+            with mock.patch('awx.main.tasks.ansible_runner.interface.run', substitute_run):
+                # so this sets up everything for a run and then yields control over to substitute_run
+                task = RunJob()
+                task.run(obj.pk)
+        return Response({})
+
     def put(self, request, *args, **kwargs):
         if get_request_version(self.request) > 1:
             return Response({""error"": _(""PUT not allowed for Job Details in version 2 of the API"")},
diff --git a/awx/main/tasks.py b/awx/main/tasks.py
index 4d791a2e40..c3652e7a79 100644
--- a/awx/main/tasks.py
+++ b/awx/main/tasks.py
@@ -1110,6 +1110,7 @@ class BaseTask(object):
         '''
         Run the job/task and capture its output.
         '''
+        start_outer = time.time()
         # self.instance because of the update_model pattern and when it's used in callback handlers
         self.instance = self.update_model(pk, status='running',
                                           start_args='')  # blank field to remove encrypted passwords
@@ -1250,7 +1251,9 @@ class BaseTask(object):
                 self.event_ct = len(isolated_manager_instance.handled_events)
             else:
                 self.dispatcher = CallbackQueueDispatcher()
+                start_inner = time.time()
                 res = ansible_runner.interface.run(**params)
+                finish_inner = time.time()
                 status = res.status
                 rc = res.rc
 
@@ -1284,6 +1287,10 @@ class BaseTask(object):
             logger.exception('{} Final run hook errored.'.format(self.instance.log_format))
 
         self.instance.websocket_emit_status(status)
+        finish_outer = time.time()
+        logger.info('Time for running job, prep: {}, run: {}, finish: {}'.format(
+            start_inner - start_outer, finish_inner - start_inner, finish_outer -finish_inner
+        ))
         if status != 'successful':
             if status == 'canceled':
                 raise AwxTaskError.TaskCancel(self.instance, rc)
diff --git a/awx/settings/defaults.py b/awx/settings/defaults.py
index 85d56728a3..526cb841da 100644
--- a/awx/settings/defaults.py
+++ b/awx/settings/defaults.py
@@ -628,7 +628,7 @@ AWX_REBUILD_SMART_MEMBERSHIP = False
 ALLOW_JINJA_IN_EXTRA_VARS = 'template'
 
 # Enable dynamically pulling roles from a requirement.yml file
-# when updating SCM projects 
+# when updating SCM projects
 # Note: This setting may be overridden by database settings.
 AWX_ROLES_ENABLED = True
 
@@ -1014,7 +1014,7 @@ LOGGING = {
         'console': {
             '()': 'logging.StreamHandler',
             'level': 'DEBUG',
-            'filters': ['require_debug_true_or_test'],
+            # 'filters': ['require_debug_true_or_test'],
             'formatter': 'simple',
         },
         'null': {
```

Some results:

```
in optimization branch:
awx_1        | 2019-05-13 15:42:04,610 INFO     awx.main.tasks Time for running job, prep: 0.692488431930542, run: 0.00033164024353027344, finish: 0.06170034408569336
awx_1        | 2019-05-13 16:07:28,119 INFO     awx.main.tasks Time for running job, prep: 0.3466510772705078, run: 0.0003898143768310547, finish: 0.062465667724609375
awx_1        | 2019-05-13 16:07:34,206 INFO     awx.main.tasks Time for running job, prep: 0.3850884437561035, run: 0.0004067420959472656, finish: 0.06271839141845703
awx_1        | 2019-05-13 16:07:37,967 INFO     awx.main.tasks Time for running job, prep: 0.6079730987548828, run: 0.0003314018249511719, finish: 0.06001162528991699

in devel:
awx_1        | 2019-05-13 15:47:54,156 INFO     awx.main.tasks Time for running job, prep: 0.9255514144897461, run: 0.0005123615264892578, finish: 0.10568857192993164
awx_1        | 2019-05-13 15:48:51,790 INFO     awx.main.tasks Time for running job, prep: 0.5584995746612549, run: 0.0004189014434814453, finish: 0.10896682739257812
awx_1        | 2019-05-13 15:48:59,743 INFO     awx.main.tasks Time for running job, prep: 0.9592108726501465, run: 0.0005075931549072266, finish: 0.1099698543548584
awx_1        | 2019-05-13 15:49:04,851 INFO     awx.main.tasks Time for running job, prep: 0.8540959358215332, run: 0.0006184577941894531, finish: 0.1058661937713623
```

I got these numbers by turning off `DEBUG`


I still want to run cProfile stuff."
6803,ansible,awx,3,closed,3854,24,https://api.github.com/repos/ansible/awx/issues/3854/comments,https://github.com/ansible/awx/pull/3854,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_test"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_test"", ""color"": ""00ffff"", ""node_id"": ""MDU6TGFiZWwxMDk0ODc5MDk5"", ""id"": 1094879099}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Update Custom Middleware to New Style,"##### SUMMARY

When running any `awx-manage` commands in the AWX shell in `devel`, this warning would pop up:

```
System check identified some issues:

WARNINGS:
?: (debug_toolbar.W001) debug_toolbar.middleware.DebugToolbarMiddleware is missing from MIDDLEWARE_CLASSES.
    HINT: Add debug_toolbar.middleware.DebugToolbarMiddleware to MIDDLEWARE_CLASSES.
```

##### ISSUE TYPE
 - Bugfix Pull Request


##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
awx: 4.0.0
```


##### ADDITIONAL INFORMATION
When I added the debug toolbar to `MIDDLEWARE` in `development.py`, the following warning came up:
```
System check identified some issues:

WARNINGS:
?: (1_10.W001) The MIDDLEWARE_CLASSES setting is deprecated in Django 1.10 and the MIDDLEWARE setting takes precedence. Since you've set MIDDLEWARE, the value of MIDDLEWARE_CLASSES is ignored.
```

Thus the additional change from `MIDDLEWARE_CLASSES` ---> `MIDDLEWARE` in `defaults.py`.
"
6823,ansible,awx,3,closed,3820,10,https://api.github.com/repos/ansible/awx/issues/3820/comments,https://github.com/ansible/awx/pull/3820,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Resolve default ordering warnings from tests,"##### SUMMARY
The tests were giving warnings

```
awx/main/tests/functional/api/test_organizations.py::test_organization_user_list
  /venv/awx/lib64/python3.6/site-packages/rest_framework/pagination.py:208: UnorderedObjectListWarning: Pagination may yield inconsistent results with an unordered object_list: <class 'django.contrib.auth.models.User'> QuerySet.
    paginator = self.django_paginator_class(queryset, page_size)
```

There were a lot of them. After this there should be none.

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
4.0.0
```


##### ADDITIONAL INFORMATION
In some cases, we can't modify the `Meta` of the model, because it is not our model.

Because of that, I borrowed the closest thing to the standard pattern from DRF:

https://github.com/encode/django-rest-framework/blob/14fad0d6902550cd61fc07370759ef785effa207/rest_framework/filters.py#L186-L190

So when you see the `ordering` parameter set on a view, you should know that I did not invent that.
"
6925,ansible,awx,4,closed,3690,1,https://api.github.com/repos/ansible/awx/issues/3690/comments,https://github.com/ansible/awx/issues/3690,"[{""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Microsoft Azure Resource Manager - Inventory bug,"##### ISSUE TYPE
 - Bug Report

##### SUMMARY
<!-- Briefly describe the problem. -->
Microsoft Azure Resource Manager inventory source cannot sync. 
This has worked recently.

##### ENVIRONMENT
* Ansible version:  2.7.10
* Operating System: CentOS

##### STEPS TO REPRODUCE

<!-- Please describe exactly how to reproduce the problem. -->
Create Microsoft Azure Resource Manager credential.
Fill out subscription ID, username and password.
Create Microsoft Azure Resource Manager inventory source.
Select previous created credential. Start sync process.

##### EXPECTED RESULTS

<!-- What did you expect to happen when running the steps above? -->
 Microsoft Azure Resource Manager inventory should sync.

##### ACTUAL RESULTS

<!-- What actually happened? -->
`
    3.193 INFO     Updating inventory 8: Azure Test Inventory
    3.222 DEBUG    Using system install of ansible-inventory CLI: /usr/bin/ansible-inventory
    3.222 INFO     Reading Ansible inventory source: /usr/lib/python2.7/site-packages/awx/plugins/inventory/azure_rm.py
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==2.1.0', 'console_scripts', 'awx-manage')()
  File ""/usr/lib/python2.7/site-packages/awx/__init__.py"", line 150, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 994, in handle
    self.is_custom)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 245, in load_inventory_source
    is_custom=is_custom).load()
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 180, in load
    data = self.command_to_json(base_args + ['--list'])
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 163, in command_to_json
    self.method, proc.returncode, stdout, stderr))
RuntimeError: ansible-inventory failed (rc=1) with stdout:

stderr:
 [WARNING]:  * Failed to parse /usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py with script plugin: Inventory script
(/usr/lib/python2.7/site-packages/awx/plugins/inventory/azure_rm.py) had an
execution error: No handlers could be found for logger
""msrestazure.azure_active_directory"" Traceback (most recent call last):   File
""/usr/lib/python2.7/site-packages/awx/plugins/inventory/azure_rm.py"", line 973,
in <module>     main()   File ""/usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py"", line 969, in main
AzureInventory()   File ""/usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py"", line 603, in __init__
self.get_inventory()   File ""/usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py"", line 669, in get_inventory
self._load_machines(selected_machines)   File ""/usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py"", line 744, in _load_machines
interface_reference['networkInterfaces'])   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-packages/azure/mgmt/network/v2017
_06_01/operations/network_interfaces_operations.py"", line 166, in get
response = self._client.send(request, header_parameters, **operation_config)
File ""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/msrest/service_client.py"", line 290, in send
raise_with_traceback(ClientRequestError, msg, err)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-packages/msrest/exceptions.py"",
line 48, in raise_with_traceback     raise error
msrest.exceptions.ClientRequestError: Error occurred in request., RetryError:
HTTPSConnectionPool(host='management.azure.com', port=443): Max retries
exceeded with url: /subscriptions/HIDE_SUBSCRIPTION_ID/resourceGroups/test-linux-
master/providers/Microsoft.Network/networkInterfaces/test-linux-master01?api-
version=2017-06-01 (Caused by ResponseError('too many 500 error responses',))

 [WARNING]: Unable to parse /usr/lib/python2.7/site-
packages/awx/plugins/inventory/azure_rm.py as an inventory source

ERROR! No inventory was parsed, please check your configuration and options.
`

##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->

I've reset the used azure credential password.
I've changed the user. Both users are owners.
I've tried with different subscriptions.
Upgraded from ansible version 2.7.4 to 2.7.10 but error persists."
6931,ansible,awx,4,closed,3682,33,https://api.github.com/repos/ansible/awx/issues/3682/comments,https://github.com/ansible/awx/pull/3682,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",General upgrade of dependencies,"##### SUMMARY
This upgrades using the pip-compile dependency resolution. Only very few manually-pinned things are upgraded here, and generally done so to pick up CVE fixes.

##### ISSUE TYPE
 - Feature Pull Request
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
4.0.0
```


##### ADDITIONAL INFORMATION
There will be a lot of additional information on this. The upgrade agenda items were the following:

- kombu
- Django<2.0
- pyyaml
- (in ansible venv) cryptography & paramiko

Covering what's listed in:
https://github.com/ansible/awx/network/alerts

### kombu

I very specifically want this fix:

https://github.com/celery/kombu/pull/880

Because I believe it'll keep `awx-manage run_dispatcher --status` from hanging
when rabbit becomes unresponsive, and will give a timeout error instead. Version 4.5.0 will pick that up (we could do much lower, if needed).

### Django

Old: 1.11.16
New: 1.11.20

Versions .18 and .19 have CVEs the other two are single-item fixes, prevent crashing, fixed packaging. Hopefully this doesn't mess with FIPS???

### pyyaml

This had a CVE, and if you upgrade it will start to issue an annoying warning if you don't pass in the loader. The fix was picked up by running the pip tool

### cryptography

github suggests cryptography>=2.3
pip-compile gave cryptography==2.6.1

no problem there

### paramiko

github suggests paramiko>=2.4.2
pip-compile gave paramiko==2.4.2

no problem there.

related:
https://github.com/ansible/awx/pull/3466"
7073,ansible,awx,6,closed,3510,9,https://api.github.com/repos/ansible/awx/issues/3510/comments,https://github.com/ansible/awx/pull/3510,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Use Django's own logic to invalidate sessions of users when changing passwords,"##### SUMMARY

The key is django.contrib.auth.update_session_auth_hash(), which knows
how to inject a recalculated session hash back into the session if the
requesting user is changing their own password, in order to keep that
user logged in.

##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bugfix Pull Request

##### COMPONENT NAME
<!--- Name of the module/plugin/module/task -->
 - API

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
awx: 3.0.1
```
"
7137,ansible,awx,7,closed,3424,2,https://api.github.com/repos/ansible/awx/issues/3424/comments,https://github.com/ansible/awx/pull/3424,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Makes daphne websocket_timeout infinite.,"##### SUMMARY
Daphne has a default timeout of 86400 seconds, so after 1 day of starting
awx_web container, the stdout stops refreshing automatically on the web UI.
This fixes this issue by making the timeout infinite, so the connection
between nginx and daphne's websocket never gets closed.

relateds #1556, #1831

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
 - Installer

##### AWX VERSION
```
awx: 3.0.1
```


##### ADDITIONAL INFORMATION
[Daphne websocket default timeout](https://github.com/django/daphne/blob/9c574083ff04037cd728bfda351b5ca3327f1fff/daphne/server.py#L45)
"
7216,ansible,awx,7,closed,3329,1,https://api.github.com/repos/ansible/awx/issues/3329/comments,https://github.com/ansible/awx/issues/3329,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",OPTIONS call to api/v2/instance_groups/:id/instances throws 500,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API

##### SUMMARY
Traceback:

```
awx_1        | 18:58:54 uwsgi.1      | 2019-02-27 18:58:54,069 ERROR    django.request Internal Server Error: /api/v2/instance_groups/1/instances/
awx_1        | 18:58:54 uwsgi.1      | Traceback (most recent call last):
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
awx_1        | 18:58:54 uwsgi.1      |     response = get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/wsgi.py"", line 72, in _legacy_get_response
awx_1        | 18:58:54 uwsgi.1      |     return super(AWXWSGIHandler, self)._legacy_get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
awx_1        | 18:58:54 uwsgi.1      |     response = self._get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 187, in _get_response
awx_1        | 18:58:54 uwsgi.1      |     response = self.process_exception_by_middleware(e, request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 185, in _get_response
awx_1        | 18:58:54 uwsgi.1      |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/usr/lib64/python3.6/contextlib.py"", line 52, in inner
awx_1        | 18:58:54 uwsgi.1      |     return func(*args, **kwds)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
awx_1        | 18:58:54 uwsgi.1      |     return view_func(*args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/views/generic/base.py"", line 68, in view
awx_1        | 18:58:54 uwsgi.1      |     return self.dispatch(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/generics.py"", line 334, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     return super(APIView, self).dispatch(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 494, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     response = self.handle_exception(exc)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 454, in handle_exception
awx_1        | 18:58:54 uwsgi.1      |     self.raise_uncaught_exception(exc)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 491, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     response = handler(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 505, in options
awx_1        | 18:58:54 uwsgi.1      |     data = self.metadata_class().determine_metadata(request, self)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/metadata.py"", line 198, in determine_metadata
awx_1        | 18:58:54 uwsgi.1      |     metadata = super(Metadata, self).determine_metadata(request, view)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/metadata.py"", line 69, in determine_metadata
awx_1        | 18:58:54 uwsgi.1      |     actions = self.determine_actions(request, view)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/metadata.py"", line 256, in determine_actions
awx_1        | 18:58:54 uwsgi.1      |     for field in actions[method]:
awx_1        | 18:58:54 uwsgi.1      | RuntimeError: OrderedDict mutated during iteration
awx_1        | 18:58:54 uwsgi.1      | 2019-02-27 18:58:54,069 ERROR    django.request Internal Server Error: /api/v2/instance_groups/1/instances/
awx_1        | 18:58:54 uwsgi.1      | Traceback (most recent call last):
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
awx_1        | 18:58:54 uwsgi.1      |     response = get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/wsgi.py"", line 72, in _legacy_get_response
awx_1        | 18:58:54 uwsgi.1      |     return super(AWXWSGIHandler, self)._legacy_get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
awx_1        | 18:58:54 uwsgi.1      |     response = self._get_response(request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 187, in _get_response
awx_1        | 18:58:54 uwsgi.1      |     response = self.process_exception_by_middleware(e, request)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/core/handlers/base.py"", line 185, in _get_response
awx_1        | 18:58:54 uwsgi.1      |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/usr/lib64/python3.6/contextlib.py"", line 52, in inner
awx_1        | 18:58:54 uwsgi.1      |     return func(*args, **kwds)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
awx_1        | 18:58:54 uwsgi.1      |     return view_func(*args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/django/views/generic/base.py"", line 68, in view
awx_1        | 18:58:54 uwsgi.1      |     return self.dispatch(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/generics.py"", line 334, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     return super(APIView, self).dispatch(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 494, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     response = self.handle_exception(exc)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 454, in handle_exception
awx_1        | 18:58:54 uwsgi.1      |     self.raise_uncaught_exception(exc)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 491, in dispatch
awx_1        | 18:58:54 uwsgi.1      |     response = handler(request, *args, **kwargs)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/views.py"", line 505, in options
awx_1        | 18:58:54 uwsgi.1      |     data = self.metadata_class().determine_metadata(request, self)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/metadata.py"", line 198, in determine_metadata
awx_1        | 18:58:54 uwsgi.1      |     metadata = super(Metadata, self).determine_metadata(request, view)
awx_1        | 18:58:54 uwsgi.1      |   File ""/venv/awx/lib64/python3.6/site-packages/rest_framework/metadata.py"", line 69, in determine_metadata
awx_1        | 18:58:54 uwsgi.1      |     actions = self.determine_actions(request, view)
awx_1        | 18:58:54 uwsgi.1      |   File ""./awx/api/metadata.py"", line 256, in determine_actions
awx_1        | 18:58:54 uwsgi.1      |     for field in actions[method]:
awx_1        | 18:58:54 uwsgi.1      | RuntimeError: OrderedDict mutated during iteration
awx_1        | 18:58:54 uwsgi.1      | 172.18.0.1 OPTIONS /api/v2/instance_groups/1/instances/ - HTTP/1.1 500
```

##### ENVIRONMENT
* AWX version: 3.0.1

##### STEPS TO REPRODUCE
Make an OPTIONS request on `api/v2/instance_groups/:id/instances`
See error

##### EXPECTED RESULTS
200 response

##### ACTUAL RESULTS
500 response
"
7236,ansible,awx,8,closed,3305,15,https://api.github.com/repos/ansible/awx/issues/3305/comments,https://github.com/ansible/awx/pull/3305,"[{""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","Add PyCryptodome to requirements_ansible.*, related #3180","related #3180

##### SUMMARY
Adds PyCryptodome to python requirements. Fixes gce.py dynamic inventory failure.
related #3180

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
<!--- Name of the module/plugin/module/task -->
 - inventory_import.py & gce.py

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
awx: 3.0.1
```


##### ADDITIONAL INFORMATION

Before:
```
2019-02-21 08:52:29,422 INFO     awx.main.commands.inventory_import Reading Ansible inventory source: /var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/plugins/inventory/gce.py
2019-02-21 08:52:29,423 INFO     awx.main.commands.inventory_import Using VIRTUAL_ENV: /var/lib/awx/venv/ansible
2019-02-21 08:52:29,424 INFO     awx.main.commands.inventory_import Using PATH: /var/lib/awx/venv/ansible/bin:/var/lib/awx/venv/awx/bin:/var/lib/awx/venv/awx/bin:/var/lib/awx/venv/awx/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
2019-02-21 08:52:29,424 INFO     awx.main.commands.inventory_import Using PYTHONPATH: /var/lib/awx/venv/ansible/lib/python2.7/site-packages:
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/bin/awx-manage"", line 11, in <module>
    load_entry_point('awx==3.0.1.0', 'console_scripts', 'awx-manage')()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/__init__.py"", line 140, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/management/commands/inventory_import.py"", line 1049, in handle
    raise exc
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/management/commands/inventory_import.py"", line 949, in handle
    data = AnsibleInventoryLoader(source=source, is_custom=self.is_custom, venv_path=venv_path).load()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/management/commands/inventory_import.py"", line 195, in load
    return self.command_to_json(base_args + ['--list'])
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/management/commands/inventory_import.py"", line 178, in command_to_json
    self.method, proc.returncode, stdout, stderr))
RuntimeError: ansible-inventory failed (rc=1) with stdout:
stderr:
 [WARNING]:  * Failed to parse /var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py with script plugin: Inventory script
(/var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py) had an execution error: Traceback (most
recent call last):   File ""/var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py"", line 508, in <module>
GceInventory()   File ""/var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py"", line 170, in __init__     self.driver =
self.get_gce_driver()   File ""/var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py"", line 318, in get_gce_driver     gce =
get_driver(Provider.GCE)(*args, **kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/compute/drivers/gce.py"", line 1795, in __init__
super(GCENodeDriver, self).__init__(user_id, key, **kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/common/base.py"", line 975, in __init__     self.connection =
self.connectionCls(*args, **conn_kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/compute/drivers/gce.py"", line 99, in __init__
credential_file=credential_file, **kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/common/google.py"", line 767, in __init__     user_id, key,
auth_type, credential_file, scopes, **kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/common/google.py"", line 653, in __init__     self.user_id,
self.key, self.scopes, **kwargs)   File
""/var/lib/awx/venv/ansible/lib/python2.7/site-
packages/libcloud/common/google.py"", line 486, in __init__     raise
GoogleAuthError('PyCrypto library required for '
libcloud.common.google.GoogleAuthError: 'PyCrypto library required for Service
Account Authentication.'
 [WARNING]: Unable to parse /var/lib/awx/venv/awx/lib64/python3.6/site-
packages/awx/plugins/inventory/gce.py as an inventory source
ERROR! No inventory was parsed, please check your configuration and options.
```

After:
```
2019-02-25 05:10:28,348 INFO     awx.main.commands.inventory_import Updating inventory 2: foo-gcp-project
2019-02-25 05:10:28,367 INFO     awx.main.commands.inventory_import Reading Ansible inventory source: /var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/plugins/inventory/gce.py
2019-02-25 05:10:28,368 INFO     awx.main.commands.inventory_import Using VIRTUAL_ENV: /var/lib/awx/venv/ansible
2019-02-25 05:10:28,368 INFO     awx.main.commands.inventory_import Using PATH: /var/lib/awx/venv/ansible/bin:/var/lib/awx/venv/awx/bin:/var/lib/awx/venv/awx/bin:/var/lib/awx/venv/awx/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
2019-02-25 05:10:28,368 INFO     awx.main.commands.inventory_import Using PYTHONPATH: /var/lib/awx/venv/ansible/lib/python2.7/site-packages:
2019-02-25 05:10:31,766 INFO     awx.main.commands.inventory_import Processing JSON output...
2019-02-25 05:10:31,767 INFO     awx.main.commands.inventory_import Loaded 31 groups, 12 hosts
2019-02-25 05:10:32,504 DEBUG    awx.main.models.inventory Going to update inventory computed fields, pk=2
2019-02-25 05:10:33,196 DEBUG    awx.main.models.inventory Finished updating inventory computed fields, pk=2, in 0.692 seconds
2019-02-25 05:10:33,211 INFO     awx.main.commands.inventory_import Inventory import completed for foo-gcp-project in 4.9s
```
"
7280,ansible,awx,8,closed,3250,6,https://api.github.com/repos/ansible/awx/issues/3250/comments,https://github.com/ansible/awx/issues/3250,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Django profiled_pg fails the installation,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY
Installer breaks in migrate task, django backend not found.

##### ENVIRONMENT
* AWX version: devel
* AWX install method: kubernetes
* Ansible version:  2.8.0
* Operating System: Ubuntu 18.04
* Web Browser: Firefox

##### STEPS TO REPRODUCE
Update inventory to point to external database host, user, password and database.

##### EXPECTED RESULTS
Complete the setup.

##### ACTUAL RESULTS
The migration tasks fails with this error:

```
 kubectl -n awx exec ansible-tower-management --  bash -c awx-manage migrate
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py"", line 115, in load_backend
    return import_module('%s.base' % backend_name)
  File ""/usr/lib64/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 941, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 941, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 953, in _find_and_load_unlocked
ModuleNotFoundError: No module named 'awx.main.db'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 11, in <module>
    load_entry_point('awx==3.0.0.0', 'console_scripts', 'awx-manage')()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/__init__.py"", line 150, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 338, in execute
    django.setup()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models()
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib64/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/contrib/auth/models.py"", line 4, in <module>
    from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/contrib/auth/base_user.py"", line 52, in <module>
    class AbstractBaseUser(models.Model):
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/base.py"", line 124, in __new__
    new_class.add_to_class('_meta', Options(meta, app_label))
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/base.py"", line 325, in add_to_class
    value.contribute_to_class(cls, name)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/options.py"", line 214, in contribute_to_class
    self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/__init__.py"", line 33, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py"", line 211, in __getitem__
    backend = load_backend(db['ENGINE'])
  File ""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py"", line 134, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'awx.main.db.profiled_pg' isn't an available database backend.
Try using 'django.db.backends.XXX', where XXX is one of:
    'mysql', 'oracle', 'postgresql', 'sqlite3'
Error was: No module named 'awx.main.db'
command terminated with exit code 1
```

If you replace the django backend engine it works:
### installer/roles/kubernetes/templates/credentials.py.j2
Updated file:

```
DATABASES = {
    'default': {
        'ATOMIC_REQUESTS': True,
        'ENGINE': 'django.db.backends.postgresql', ### BEFORE CHANGE 'ENGINE': 'awx.main.db.profiled_pg',
        'NAME': ""{{ pg_database }}"",
        'USER': ""{{ pg_username }}"",
        'PASSWORD': ""{{ pg_password }}"",
        'HOST': ""{{ pg_hostname|default('postgresql') }}"",
        'PORT': ""{{ pg_port }}"",
    }
}
BROKER_URL = 'amqp://{}:{}@{}:{}/{}'.format(
    ""{{ rabbitmq_user }}"",
    ""{{ rabbitmq_password }}"",
    ""localhost"",
    ""5672"",
    ""awx"")
CHANNEL_LAYERS = {
    'default': {'BACKEND': 'asgi_amqp.AMQPChannelLayer',
                'ROUTING': 'awx.main.routing.channel_routing',
                'CONFIG': {'url': BROKER_URL}}
}
```


##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->
"
7363,ansible,awx,9,closed,3157,1,https://api.github.com/repos/ansible/awx/issues/3157/comments,https://github.com/ansible/awx/issues/3157,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",I have a strange issue when openshift with postgresql pod,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY
all other pods are up and running but the postgresql with this error

##### ENVIRONMENT
* AWX version: X.Y.Z
* AWX install method: openshift
* Ansible version:  2.6.5
* Operating System: centos7


##### STEPS TO REPRODUCE
just try to install and watch events

##### EXPECTED RESULTS

run as expected

##### ACTUAL RESULTS

failed

##### ADDITIONAL INFORMATION
`
TASK [kubernetes : Migrate database] *********************************************************************************************************************************************************************************************************
fatal: [localhost]: FAILED! => {""changed"": true, ""cmd"": ""oc --config=/tmp/awx-config/.kube/config -n awx-test exec ansible-tower-management -- bash -c \""awx-manage migrate --noinput\"""", ""delta"": ""0:00:30.761138"", ""end"": ""2019-02-05 13:54:37.853104"", ""msg"": ""non-zero return code"", ""rc"": 1, ""start"": ""2019-02-05 13:54:07.091966"", ""stderr"": ""Traceback (most recent call last):\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection\n    connection = Database.connect(**conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: could not connect to server: No route to host\n\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting\n\tTCP/IP connections on port 5432?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 91, in _ctit_db_wrapper\n    yield\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 446, in __getattr__\n    value = self._get_local(name)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 363, in _get_local\n    self._preload_cache()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 325, in _preload_cache\n    for setting in Setting.objects.filter(key__in=settings_to_cache.keys(), user__isnull=True).order_by('pk'):\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 250, in __iter__\n    self._fetch_all()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 1121, in _fetch_all\n    self._result_cache = list(self._iterable_class(self))\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 53, in __iter__\n    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/sql/compiler.py\"", line 887, in execute_sql\n    cursor = self.connection.cursor()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 254, in cursor\n    return self._cursor()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor\n    self.ensure_connection()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py\"", line 94, in __exit__\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/six.py\"", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection\n    connection = Database.connect(**conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\ndjango.db.utils.OperationalError: could not connect to server: No route to host\n\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting\n\tTCP/IP connections on port 5432?\n\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection\n    connection = Database.connect(**conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\npsycopg2.OperationalError: could not connect to server: No route to host\n\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting\n\tTCP/IP connections on port 5432?\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \""/usr/bin/awx-manage\"", line 11, in <module>\n    load_entry_point('awx==3.0.0.0', 'console_scripts', 'awx-manage')()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/__init__.py\"", line 150, in manage\n    execute_from_command_line(sys.argv)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py\"", line 364, in execute_from_command_line\n    utility.execute()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py\"", line 356, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 283, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 327, in execute\n    self.check()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 359, in check\n    include_deployment_checks=include_deployment_checks,\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/commands/migrate.py\"", line 62, in _run_checks\n    issues.extend(super(Command, self)._run_checks(**kwargs))\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 346, in _run_checks\n    return checks.run_checks(**kwargs)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/registry.py\"", line 81, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/urls.py\"", line 16, in check_url_config\n    return check_resolver(resolver)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/urls.py\"", line 26, in check_resolver\n    return check_method()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 256, in check\n    for pattern in self.url_patterns:\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/functional.py\"", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 407, in url_patterns\n    patterns = getattr(self.urlconf_module, \""urlpatterns\"", self.urlconf_module)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/functional.py\"", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 400, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \""/usr/lib64/python3.6/importlib/__init__.py\"", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \""<frozen importlib._bootstrap>\"", line 994, in _gcd_import\n  File \""<frozen importlib._bootstrap>\"", line 971, in _find_and_load\n  File \""<frozen importlib._bootstrap>\"", line 955, in _find_and_load_unlocked\n  File \""<frozen importlib._bootstrap>\"", line 665, in _load_unlocked\n  File \""<frozen importlib._bootstrap_external>\"", line 678, in exec_module\n  File \""<frozen importlib._bootstrap>\"", line 219, in _call_with_frames_removed\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/urls.py\"", line 17, in <module>\n    url(r'^sso/', include('social_django.urls', namespace='social')),\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/conf/urls/__init__.py\"", line 50, in include\n    urlconf_module = import_module(urlconf_module)\n  File \""/usr/lib64/python3.6/importlib/__init__.py\"", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \""<frozen importlib._bootstrap>\"", line 994, in _gcd_import\n  File \""<frozen importlib._bootstrap>\"", line 971, in _find_and_load\n  File \""<frozen importlib._bootstrap>\"", line 955, in _find_and_load_unlocked\n  File \""<frozen importlib._bootstrap>\"", line 665, in _load_unlocked\n  File \""<frozen importlib._bootstrap_external>\"", line 678, in exec_module\n  File \""<frozen importlib._bootstrap>\"", line 219, in _call_with_frames_removed\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/urls.py\"", line 6, in <module>\n    from . import views\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/views.py\"", line 10, in <module>\n    from .utils import psa\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/utils.py\"", line 13, in <module>\n    BACKENDS = settings.AUTHENTICATION_BACKENDS\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 542, in __getattr_without_cache__\n    return getattr(self._wrapped, name)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 446, in __getattr__\n    value = self._get_local(name)\n  File \""/usr/lib64/python3.6/contextlib.py\"", line 99, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 93, in _ctit_db_wrapper\n    if 'migrate' in sys.argv and get_tower_migration_version() < '310':\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/utils/db.py\"", line 14, in get_tower_migration_version\n    loader = MigrationLoader(connection, ignore_no_migrations=True)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/loader.py\"", line 52, in __init__\n    self.build_graph()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/loader.py\"", line 209, in build_graph\n    self.applied_migrations = recorder.applied_migrations()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/recorder.py\"", line 65, in applied_migrations\n    self.ensure_schema()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/recorder.py\"", line 52, in ensure_schema\n    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 254, in cursor\n    return self._cursor()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor\n    self.ensure_connection()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py\"", line 94, in __exit__\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/six.py\"", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection\n    connection = Database.connect(**conn_params)\n  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\ndjango.db.utils.OperationalError: could not connect to server: No route to host\n\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting\n\tTCP/IP connections on port 5432?\n\ncommand terminated with exit code 1"", ""stderr_lines"": [""Traceback (most recent call last):"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect"", ""    self.connection = self.get_new_connection(conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection"", ""    connection = Database.connect(**conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect"", ""    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)"", ""psycopg2.OperationalError: could not connect to server: No route to host"", ""\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting"", ""\tTCP/IP connections on port 5432?"", """", """", ""The above exception was the direct cause of the following exception:"", """", ""Traceback (most recent call last):"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 91, in _ctit_db_wrapper"", ""    yield"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 446, in __getattr__"", ""    value = self._get_local(name)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 363, in _get_local"", ""    self._preload_cache()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 325, in _preload_cache"", ""    for setting in Setting.objects.filter(key__in=settings_to_cache.keys(), user__isnull=True).order_by('pk'):"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 250, in __iter__"", ""    self._fetch_all()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 1121, in _fetch_all"", ""    self._result_cache = list(self._iterable_class(self))"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/query.py\"", line 53, in __iter__"", ""    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/models/sql/compiler.py\"", line 887, in execute_sql"", ""    cursor = self.connection.cursor()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 254, in cursor"", ""    return self._cursor()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor"", ""    self.ensure_connection()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py\"", line 94, in __exit__"", ""    six.reraise(dj_exc_type, dj_exc_value, traceback)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/six.py\"", line 685, in reraise"", ""    raise value.with_traceback(tb)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect"", ""    self.connection = self.get_new_connection(conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection"", ""    connection = Database.connect(**conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect"", ""    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)"", ""django.db.utils.OperationalError: could not connect to server: No route to host"", ""\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting"", ""\tTCP/IP connections on port 5432?"", """", """", ""During handling of the above exception, another exception occurred:"", """", ""Traceback (most recent call last):"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect"", ""    self.connection = self.get_new_connection(conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection"", ""    connection = Database.connect(**conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect"", ""    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)"", ""psycopg2.OperationalError: could not connect to server: No route to host"", ""\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting"", ""\tTCP/IP connections on port 5432?"", """", """", ""The above exception was the direct cause of the following exception:"", """", ""Traceback (most recent call last):"", ""  File \""/usr/bin/awx-manage\"", line 11, in <module>"", ""    load_entry_point('awx==3.0.0.0', 'console_scripts', 'awx-manage')()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/__init__.py\"", line 150, in manage"", ""    execute_from_command_line(sys.argv)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py\"", line 364, in execute_from_command_line"", ""    utility.execute()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py\"", line 356, in execute"", ""    self.fetch_command(subcommand).run_from_argv(self.argv)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 283, in run_from_argv"", ""    self.execute(*args, **cmd_options)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 327, in execute"", ""    self.check()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 359, in check"", ""    include_deployment_checks=include_deployment_checks,"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/commands/migrate.py\"", line 62, in _run_checks"", ""    issues.extend(super(Command, self)._run_checks(**kwargs))"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py\"", line 346, in _run_checks"", ""    return checks.run_checks(**kwargs)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/registry.py\"", line 81, in run_checks"", ""    new_errors = check(app_configs=app_configs)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/urls.py\"", line 16, in check_url_config"", ""    return check_resolver(resolver)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/core/checks/urls.py\"", line 26, in check_resolver"", ""    return check_method()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 256, in check"", ""    for pattern in self.url_patterns:"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/functional.py\"", line 35, in __get__"", ""    res = instance.__dict__[self.name] = self.func(instance)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 407, in url_patterns"", ""    patterns = getattr(self.urlconf_module, \""urlpatterns\"", self.urlconf_module)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/functional.py\"", line 35, in __get__"", ""    res = instance.__dict__[self.name] = self.func(instance)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/urls/resolvers.py\"", line 400, in urlconf_module"", ""    return import_module(self.urlconf_name)"", ""  File \""/usr/lib64/python3.6/importlib/__init__.py\"", line 126, in import_module"", ""    return _bootstrap._gcd_import(name[level:], package, level)"", ""  File \""<frozen importlib._bootstrap>\"", line 994, in _gcd_import"", ""  File \""<frozen importlib._bootstrap>\"", line 971, in _find_and_load"", ""  File \""<frozen importlib._bootstrap>\"", line 955, in _find_and_load_unlocked"", ""  File \""<frozen importlib._bootstrap>\"", line 665, in _load_unlocked"", ""  File \""<frozen importlib._bootstrap_external>\"", line 678, in exec_module"", ""  File \""<frozen importlib._bootstrap>\"", line 219, in _call_with_frames_removed"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/urls.py\"", line 17, in <module>"", ""    url(r'^sso/', include('social_django.urls', namespace='social')),"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/conf/urls/__init__.py\"", line 50, in include"", ""    urlconf_module = import_module(urlconf_module)"", ""  File \""/usr/lib64/python3.6/importlib/__init__.py\"", line 126, in import_module"", ""    return _bootstrap._gcd_import(name[level:], package, level)"", ""  File \""<frozen importlib._bootstrap>\"", line 994, in _gcd_import"", ""  File \""<frozen importlib._bootstrap>\"", line 971, in _find_and_load"", ""  File \""<frozen importlib._bootstrap>\"", line 955, in _find_and_load_unlocked"", ""  File \""<frozen importlib._bootstrap>\"", line 665, in _load_unlocked"", ""  File \""<frozen importlib._bootstrap_external>\"", line 678, in exec_module"", ""  File \""<frozen importlib._bootstrap>\"", line 219, in _call_with_frames_removed"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/urls.py\"", line 6, in <module>"", ""    from . import views"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/views.py\"", line 10, in <module>"", ""    from .utils import psa"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/social_django/utils.py\"", line 13, in <module>"", ""    BACKENDS = settings.AUTHENTICATION_BACKENDS"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 542, in __getattr_without_cache__"", ""    return getattr(self._wrapped, name)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 446, in __getattr__"", ""    value = self._get_local(name)"", ""  File \""/usr/lib64/python3.6/contextlib.py\"", line 99, in __exit__"", ""    self.gen.throw(type, value, traceback)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/conf/settings.py\"", line 93, in _ctit_db_wrapper"", ""    if 'migrate' in sys.argv and get_tower_migration_version() < '310':"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/awx/main/utils/db.py\"", line 14, in get_tower_migration_version"", ""    loader = MigrationLoader(connection, ignore_no_migrations=True)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/loader.py\"", line 52, in __init__"", ""    self.build_graph()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/loader.py\"", line 209, in build_graph"", ""    self.applied_migrations = recorder.applied_migrations()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/recorder.py\"", line 65, in applied_migrations"", ""    self.ensure_schema()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/migrations/recorder.py\"", line 52, in ensure_schema"", ""    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 254, in cursor"", ""    return self._cursor()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor"", ""    self.ensure_connection()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/utils.py\"", line 94, in __exit__"", ""    six.reraise(dj_exc_type, dj_exc_value, traceback)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/utils/six.py\"", line 685, in reraise"", ""    raise value.with_traceback(tb)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/base/base.py\"", line 189, in connect"", ""    self.connection = self.get_new_connection(conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection"", ""    connection = Database.connect(**conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib64/python3.6/site-packages/psycopg2/__init__.py\"", line 130, in connect"", ""    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)"", ""django.db.utils.OperationalError: could not connect to server: No route to host"", ""\tIs the server running on host \""postgresql\"" (172.30.174.92) and accepting"", ""\tTCP/IP connections on port 5432?"", """", ""command terminated with exit code 1""], ""stdout"": """", ""stdout_lines"": []}
`
![screenshot 2019-02-05 at 13 54 56](https://user-images.githubusercontent.com/12847532/52275181-13a13d00-294f-11e9-96ad-fff357be8d22.png)
"
7398,ansible,awx,9,closed,3118,4,https://api.github.com/repos/ansible/awx/issues/3118/comments,https://github.com/ansible/awx/pull/3118,"[{""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}]",work around a bug in Django that breaks the stdout HTML view in py3,see: https://github.com/ansible/awx/issues/3108
7450,ansible,awx,10,closed,3059,2,https://api.github.com/repos/ansible/awx/issues/3059/comments,https://github.com/ansible/awx/issues/3059,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""state:needs_devel"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_devel"", ""color"": ""ededed"", ""node_id"": ""MDU6TGFiZWw2NzAyMjY3MDc="", ""id"": 670226707}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",Provide environment details on inventory updates (to indicate venv used),"##### ISSUE TYPE
With #3039 we have custom virtual environments working with inventory updates, but it is not eminently clear from the inventory update view what venv was used at the time.

We should add the venv detail to the inventory update view like it is available for jobs <insert example here>

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API
 - UI

##### SUMMARY
<!-- Briefly describe the problem or desired enhancement. -->
Provide same info provided on jobs regarding environment used to execute inventory update

##### ADDITIONAL INFORMATION
Would help when diagnosing problems that are ansible version dependent (using plugin or script for inventory update?) like:

```
    6.772 INFO     Updating inventory 132: Inventory - PlayFeed孧
    6.799 INFO     Reading Ansible inventory source: /tmp/awx_523_2casc_vc/gcp_compute.yml
Traceback (most recent call last):
  File ""/usr/local/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx', 'console_scripts', 'awx-manage')()
  File ""/awx_devel/awx/__init__.py"", line 150, in manage
    execute_from_command_line(sys.argv)
  File ""/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/venv/awx/lib64/python3.6/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/venv/awx/lib64/python3.6/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/awx_devel/awx/main/management/commands/inventory_import.py"", line 1021, in handle
    raise exc
  File ""/awx_devel/awx/main/management/commands/inventory_import.py"", line 921, in handle
    data = AnsibleInventoryLoader(source=source, is_custom=self.is_custom).load()
  File ""/awx_devel/awx/main/management/commands/inventory_import.py"", line 170, in load
    return self.command_to_json(base_args + ['--list'])
  File ""/awx_devel/awx/main/management/commands/inventory_import.py"", line 153, in command_to_json
    self.method, proc.returncode, stdout, stderr))
RuntimeError: ansible-inventory failed (rc=1) with stdout:
stderr:
 [WARNING]:  * Failed to parse /tmp/awx_523_2casc_vc/gcp_compute.yml with
gcp_compute plugin: [{u'domain': u'global', u'message': u""Invalid value for
field 'zone': 'all'. Unknown zone."", u'reason': u'invalid'}]
 [WARNING]: Unable to parse /tmp/awx_523_2casc_vc/gcp_compute.yml as an
inventory source
ERROR! No inventory was parsed, please check your configuration and options.
```
"
7509,ansible,awx,10,closed,2993,2,https://api.github.com/repos/ansible/awx/issues/2993/comments,https://github.com/ansible/awx/pull/2993,"[{""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}]",catch _all_ types of django.db.utils.Error on CTinT key lookups,
7510,ansible,awx,10,closed,2992,3,https://api.github.com/repos/ansible/awx/issues/2992/comments,https://github.com/ansible/awx/pull/2992,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",Optimize dashboard using Django annotation for sum,"##### SUMMARY
Previously, this was loading all inventory sources with active failures into memory, and because of that, it was the slowest query shown by Django debug toolbar. This is not at all necessary, but may have been written before Django annotations were available?

##### ISSUE TYPE
 - Feature Pull Request
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```

```


##### ADDITIONAL INFORMATION
Tested that count is the same. New query:

```sql
SELECT
   SUM(""main_inventory"".""inventory_sources_with_failures"") AS ""inventory_sources_with_failures__sum"" 
FROM
   ""main_inventory""
```

old query:

```sql
SELECT
   ""main_inventory"".""id"",
   ""main_inventory"".""created"",
   ""main_inventory"".""modified"",
   ""main_inventory"".""description"",
   ""main_inventory"".""created_by_id"",
   ""main_inventory"".""modified_by_id"",
   ""main_inventory"".""name"",
   ""main_inventory"".""organization_id"",
   ""main_inventory"".""variables"",
   ""main_inventory"".""has_active_failures"",
   ""main_inventory"".""total_hosts"",
   ""main_inventory"".""hosts_with_active_failures"",
   ""main_inventory"".""total_groups"",
   ""main_inventory"".""groups_with_active_failures"",
   ""main_inventory"".""has_inventory_sources"",
   ""main_inventory"".""total_inventory_sources"",
   ""main_inventory"".""inventory_sources_with_failures"",
   ""main_inventory"".""kind"",
   ""main_inventory"".""host_filter"",
   ""main_inventory"".""admin_role_id"",
   ""main_inventory"".""update_role_id"",
   ""main_inventory"".""adhoc_role_id"",
   ""main_inventory"".""use_role_id"",
   ""main_inventory"".""read_role_id"",
   ""main_inventory"".""insights_credential_id"",
   ""main_inventory"".""pending_deletion"",
   ""auth_user"".""id"",
   ""auth_user"".""password"",
   ""auth_user"".""last_login"",
   ""auth_user"".""is_superuser"",
   ""auth_user"".""username"",
   ""auth_user"".""first_name"",
   ""auth_user"".""last_name"",
   ""auth_user"".""email"",
   ""auth_user"".""is_staff"",
   ""auth_user"".""is_active"",
   ""auth_user"".""date_joined"",
   T3.""id"",
   T3.""password"",
   T3.""last_login"",
   T3.""is_superuser"",
   T3.""username"",
   T3.""first_name"",
   T3.""last_name"",
   T3.""email"",
   T3.""is_staff"",
   T3.""is_active"",
   T3.""date_joined"",
   ""main_organization"".""id"",
   ""main_organization"".""created"",
   ""main_organization"".""modified"",
   ""main_organization"".""description"",
   ""main_organization"".""created_by_id"",
   ""main_organization"".""modified_by_id"",
   ""main_organization"".""name"",
   ""main_organization"".""custom_virtualenv"",
   ""main_organization"".""admin_role_id"",
   ""main_organization"".""execute_role_id"",
   ""main_organization"".""project_admin_role_id"",
   ""main_organization"".""inventory_admin_role_id"",
   ""main_organization"".""credential_admin_role_id"",
   ""main_organization"".""workflow_admin_role_id"",
   ""main_organization"".""notification_admin_role_id"",
   ""main_organization"".""job_template_admin_role_id"",
   ""main_organization"".""auditor_role_id"",
   ""main_organization"".""member_role_id"",
   ""main_organization"".""read_role_id"" 
FROM
   ""main_inventory"" 
   LEFT OUTER JOIN
      ""auth_user"" 
      ON (""main_inventory"".""created_by_id"" = ""auth_user"".""id"") 
   LEFT OUTER JOIN
      ""auth_user"" T3 
      ON (""main_inventory"".""modified_by_id"" = T3.""id"") 
   LEFT OUTER JOIN
      ""main_organization"" 
      ON (""main_inventory"".""organization_id"" = ""main_organization"".""id"") 
ORDER BY
   ""main_inventory"".""name"" ASC
```
"
7570,ansible,awx,11,closed,2904,2,https://api.github.com/repos/ansible/awx/issues/2904/comments,https://github.com/ansible/awx/issues/2904,[],High-available configuration job distribution,"<!---
The Ansible community is highly committed to the security of our open source
projects.  Security concerns should be reported directly by email to
security@ansible.com.  For more information on the Ansible community's
practices regarding responsible disclosure, see
https://www.ansible.com/security
-->

##### ISSUE TYPE
 - Documentation / Configuration issue

##### COMPONENT NAME
 - Celery

##### SUMMARY
All jobs go to the primary AWX server in a cluster

##### ENVIRONMENT
* AWX version: 2.0.1
* AWX install method: RPM
* Operating System: CentOS 7

##### STEPS TO REPRODUCE

Setup multi-node AWX cluster and schedule jobs.

##### EXPECTED RESULTS

Jobs are distributed fairly across all AWX nodes in the cluster.

##### ACTUAL RESULTS

All jobs are executed on the first AWX node. Only when node 1 is unavailable, the next will pick up tasks.

##### ADDITIONAL INFORMATION

We've setup an HA cluster of AWX on 6 machines, using the following configuration:

- 3x postgresql
- 3x awx+rabbitmq

As a whole, the cluster works, any single server can go offline and the platform will continue to work. However, **jobs are not distributed fairly across all the nodes. All job runs exclusively go towards the first node**, unless the first node is down (in which case they go to node 2). In other words, we appear to have an active-passive-passive cluster of AWX, which was not the intention.

From my (limited) understanding regarding internal AWX architecture, the job scheduling is controlled by celery, which uses RabbitMQ as the backend.

A short summary of our configuration (based on #26):

- celery beat is stopped on every node
- celery workers have '-n celery@<hostname>' parameters, no filtering on queues
- CELERY_BROKER_URL refers to a list of all 3 RabbitMQ nodes.
- awx version 2.0.1 on CentOS 7

I've collected a bunch of details regarding our configuration/system state:

All our instances are known/up. All have full capacity available.

```
[elp003744(root):/opt/awx/bin] ./awx-manage list_instances
[tower capacity=171 policy=100%]
        elp003744.mgt.example.be capacity=57 version=2.0.1 heartbeat=""2018-12-11 13:24:28""
        elp003745.mgt.example.be capacity=57 version=2.0.1 heartbeat=""2018-12-11 13:24:43""
        elp003746.mgt.example.be capacity=57 version=2.0.1 heartbeat=""2018-12-11 13:24:50""
```

All three nodes have the same queues configured

```
[elp003744(root):/opt/awx/bin] ./celery inspect active_queues
-> celery@elp003744.mgt.example.be: OK
    * {u'exclusive': False, u'name': u'bcast.33ef5052-ec4e-4592-b4d7-0ea754658074', u'exchange': {u'name': u'tower_broadcast_all', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'fanout', u'auto_delete': False}, u'durable': True, u'routing_key': u'', u'no_ack': False, u'queue': u'bcast.33ef5052-ec4e-4592-b4d7-0ea754658074', u'alias': u'tower_broadcast_all', u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': True}
    * {u'exclusive': False, u'name': u'awx_private_queue', u'exchange': {u'name': u'awx_private_queue', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'awx_private_queue', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
    * {u'exclusive': False, u'name': u'elp003744.mgt.example.be', u'exchange': {u'name': u'elp003744.mgt.example.be', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'elp003744.mgt.example.be', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
-> celery@elp003745.mgt.example.be: OK
    * {u'exclusive': False, u'name': u'bcast.1ba6747d-4bbe-4466-b01f-90290a84d5e4', u'exchange': {u'name': u'tower_broadcast_all', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'fanout', u'auto_delete': False}, u'durable': True, u'routing_key': u'', u'no_ack': False, u'queue': u'bcast.1ba6747d-4bbe-4466-b01f-90290a84d5e4', u'alias': u'tower_broadcast_all', u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': True}
    * {u'exclusive': False, u'name': u'elp003745.mgt.example.be', u'exchange': {u'name': u'elp003745.mgt.example.be', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'elp003745.mgt.example.be', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
    * {u'exclusive': False, u'name': u'awx_private_queue', u'exchange': {u'name': u'awx_private_queue', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'awx_private_queue', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
-> celery@elp003746.mgt.example.be: OK
    * {u'exclusive': False, u'name': u'bcast.d36996bb-0805-42af-8776-2c9667658846', u'exchange': {u'name': u'tower_broadcast_all', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'fanout', u'auto_delete': False}, u'durable': True, u'routing_key': u'', u'no_ack': False, u'queue': u'bcast.d36996bb-0805-42af-8776-2c9667658846', u'alias': u'tower_broadcast_all', u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': True}
    * {u'exclusive': False, u'name': u'awx_private_queue', u'exchange': {u'name': u'awx_private_queue', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'awx_private_queue', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
    * {u'exclusive': False, u'name': u'elp003746.mgt.example.be', u'exchange': {u'name': u'elp003746.mgt.example.be', u'durable': True, u'delivery_mode': 2, u'passive': False, u'arguments': None, u'type': u'direct', u'auto_delete': False}, u'durable': True, u'routing_key': u'elp003746.mgt.example.be', u'no_ack': False, u'alias': None, u'queue_arguments': None, u'binding_arguments': None, u'bindings': [], u'auto_delete': False}
```

Every instance is already registered to the ""tower"" queue and specifies its hostname

```
[elp003744(root):/opt/awx/bin] ./awx-manage register_queue --queuename=tower --instance_percent=100
Instance Group already registered tower
[elp003744(root):/opt/awx/bin] ps aux | grep celery
awx       26094  0.9  1.3 459064 105812 ?       S    14:47   0:00 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003744.mgt.example.be
root      26143  0.0  0.0 112660   976 pts/0    S+   14:47   0:00 grep --color=auto celery
awx       57267  0.3  1.3 459044 110144 ?       Ss   Nov16 118:18 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003744.mgt.example.be
awx       57280  0.0  1.3 459168 104912 ?       S    Nov16  17:32 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003744.mgt.example.be

[elp003745(root):/opt/awx/bin] ./awx-manage register_queue --queuename=tower --instance_percent=100
Instance Group already registered tower
[elp003745(root):/opt/awx/bin] ps aux | grep celery
awx       76362  0.8  1.3 463868 107620 ?       S    14:47   0:00 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003745.mgt.example.be
root      76422  0.0  0.0 112660   976 pts/0    R+   14:47   0:00 grep --color=auto celery
awx       96311  0.3  1.3 463848 111064 ?       Ss   Nov16 139:40 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003745.mgt.example.be
awx       96325  0.0  1.3 459168 105092 ?       S    Nov16  15:25 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003745.mgt.example.be

[elp003746(root):/opt/awx/bin] ./awx-manage register_queue --queuename=tower --instance_percent=100
Instance Group already registered tower
[elp003746(root):/opt/awx/bin] ps aux | grep celery
root      20932  0.0  0.0 112660   976 pts/0    S+   14:44   0:00 grep --color=auto celery
awx       80884  0.1  1.3 444964 105060 ?       Ss   Nov16  63:41 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
awx       80894  0.1  1.4 532228 117052 ?       S    Nov16  56:51 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
awx       80895  0.1  1.4 457632 116120 ?       S    Nov16  52:43 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
awx       80896  0.1  1.4 457884 115096 ?       S    Nov16  53:44 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
awx       80897  0.1  1.4 458568 116316 ?       S    Nov16  55:46 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
awx       80898  0.0  1.2 459168 101220 ?       S    Nov16  16:23 python2 /opt/awx/bin/celery worker -A awx -l info --autoscale=50,4 -n celery@elp003746.mgt.example.be
```

RabbitMQ cluster is healthy and all nodes are working correctly.

```
[elp003745(root):/opt/awx/bin] rabbitmqctl cluster_status
Cluster status of node rabbit@elp003745.mgt.example.be ...
[{nodes,[{disc,['rabbit@elp003744.mgt.example.be',
                'rabbit@elp003745.mgt.example.be',
                'rabbit@elp003746.mgt.example.be']}]},
{running_nodes,['rabbit@elp003744.mgt.example.be',
                 'rabbit@elp003746.mgt.example.be',
                 'rabbit@elp003745.mgt.example.be']},
{cluster_name,<<""rabbit@elp003744.mgt.example.be"">>},
{partitions,[]},
{alarms,[{'rabbit@elp003744.mgt.example.be',[]},
          {'rabbit@elp003746.mgt.example.be',[]},
          {'rabbit@elp003745.mgt.example.be',[]}]}]
```

AWX settings for reference

```
[elp003746(root):/opt/awx/bin] cat /etc/awx/settings.py | grep -iv LOG | grep -v PASSWORD | grep -v SECRET
# AWX settings file
import os
import platform

HOSTNAME = platform.node()

ADMINS = ()

STATIC_ROOT = '/opt/awx/static'

PROJECTS_ROOT = '/var/lib/awx/projects'

JOBOUTPUT_ROOT = '/var/lib/awx/job_status'

ALLOWED_HOSTS = ['*']

INTERNAL_API_URL = 'http://127.0.0.1:8052'

AWX_TASK_ENV['HOME'] = '/var/lib/awx'

# Container environments don't like chroots
AWX_PROOT_ENABLED = False

ANSIBLE_VENV_PATH = '/opt/awx/embedded'

CLUSTER_HOST_ID = HOSTNAME
SYSTEM_UUID = '6075e938-743f-52e7-8b28-c81cbfa1a451'
#CELERY_QUEUES += (Queue(CLUSTER_HOST_ID, Exchange(CLUSTER_HOST_ID), routing_key=CLUSTER_HOST_ID),)
#CELERY_ROUTES['awx.main.tasks.cluster_node_heartbeat'] = {'queue': CLUSTER_HOST_ID, 'routing_key': CLUSTER_HOST_ID}
#CELERY_ROUTES['awx.main.tasks.purge_old_stdout_files'] = {'queue': CLUSTER_HOST_ID, 'routing_key': CLUSTER_HOST_ID}

SESSION_COOKIE_SECURE = False
CSRF_COOKIE_SECURE = False

###############################################################################
# EMAIL SETTINGS
###############################################################################

SERVER_EMAIL = 'root@%s' % HOSTNAME
DEFAULT_FROM_EMAIL = 'webmaster@%s' % HOSTNAME
EMAIL_SUBJECT_PREFIX = '[AWX] '

EMAIL_HOST = 'localhost'
EMAIL_PORT = 25
EMAIL_HOST_USER = ''
EMAIL_USE_TLS = False

    'level': 'DEBUG',
    'formatter': 'simple',
}
DATABASES = {
    'default': {
        'ATOMIC_REQUESTS': True,
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'awx',
        'USER': 'awx',
        'HOST': 'awxpg.cmt.mgt.example.be',
        'PORT': '6543',
    }
}

CELERY_BROKER_URL = [
  'amqp://guest:guest@elp003744.mgt.example.be:5672/%2F',
  'amqp://guest:guest@elp003745.mgt.example.be:5672/%2F',
  'amqp://guest:guest@elp003746.mgt.example.be:5672/%2F'
]

# asgi_amqp
CHANNEL_LAYERS = {
    'default': {'BACKEND': 'asgi_amqp.AMQPChannelLayer',
                'ROUTING': 'awx.main.routing.channel_routing',
                'CONFIG': {'url': CELERY_BROKER_URL}}
}

CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'LOCATION': '127.0.0.1:11211',
    },
    'ephemeral': {
        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
    },
}

USE_X_FORWARDED_PORT = True
```

Celery stats clearly indicate that elp003744 is executing the bulk of the jobs (awx.main.tasks.run_job). Only when we manually stop/disable 3744, the other servers start executing jobs.

```
[elp003746(root):/opt/awx/bin] ./celery inspect stats
celery@elp003746.mgt.example.be:
    {
        ""broker"": {
            ""alternates"": [],
            ""connect_timeout"": 4,
            ""failover_strategy"": ""round-robin"",
            ""heartbeat"": null,
            ""hostname"": ""127.0.0.1"",
            ""insist"": false,
            ""login_method"": ""AMQPLAIN"",
            ""port"": 5672,
            ""ssl"": false,
            ""transport"": ""amqp"",
            ""transport_options"": {},
            ""uri_prefix"": null,
            ""userid"": ""guest"",
            ""virtual_host"": ""/""
        },
        ""clock"": ""5231619"",
        ""pid"": 80884,
        ""pool"": {
            ""max-concurrency"": 4,
           ""max-tasks-per-child"": ""N/A"",
            ""processes"": [
                80894,
                80895,
                80896,
                80897
            ],
            ""put-guarded-by-semaphore"": false,
            ""timeouts"": [
                0,
                0
            ],
            ""writes"": {
                ""all"": ""25.00%, 25.00%, 25.00%, 25.00%"",
                ""avg"": ""25.00%"",
                ""inqueues"": {
                    ""active"": 0,
                    ""total"": 4
                },
                ""raw"": ""110681, 110681, 110680, 110681"",
                ""total"": 442723
            }
        },
        ""prefetch_count"": 16,
        ""rusage"": {
            ""idrss"": 0,
            ""inblock"": 216,
            ""isrss"": 0,
            ""ixrss"": 0,
            ""majflt"": 4,
            ""maxrss"": 111520,
            ""minflt"": 92395,
            ""msgrcv"": 0,
            ""msgsnd"": 0,
            ""nivcsw"": 7368,
            ""nsignals"": 0,
            ""nswap"": 0,
            ""nvcsw"": 4931810,
            ""oublock"": 0,
            ""stime"": 328.160919,
            ""utime"": 3494.149686
        },
        ""total"": {
            ""awx.main.scheduler.tasks.run_job_complete"": 136,
            ""awx.main.scheduler.tasks.run_job_launch"": 115,
            ""awx.main.scheduler.tasks.run_task_manager"": 213772,
            ""awx.main.tasks.awx_isolated_heartbeat"": 7247,
            ""awx.main.tasks.awx_periodic_scheduler"": 148581,
            ""awx.main.tasks.cluster_node_heartbeat"": 72474,
            ""awx.main.tasks.handle_setting_changes"": 6,
            ""awx.main.tasks.handle_work_error"": 25,
            ""awx.main.tasks.handle_work_success"": 102,
            ""awx.main.tasks.purge_old_stdout_files"": 6,
            ""awx.main.tasks.run_administrative_checks"": 2,
            ""awx.main.tasks.run_job"": 1,
            ""awx.main.tasks.send_notifications"": 13,
            ""awx.main.tasks.update_inventory_computed_fields"": 193,
            ""celery.backend_cleanup"": 50
        }
    }
celery@elp003744.mgt.example.be:
    {
        ""broker"": {
            ""alternates"": [],
            ""connect_timeout"": 4,
            ""failover_strategy"": ""round-robin"",
            ""heartbeat"": null,
            ""hostname"": ""127.0.0.1"",
            ""insist"": false,
            ""login_method"": ""AMQPLAIN"",
            ""port"": 5672,
            ""ssl"": false,
            ""transport"": ""amqp"",
            ""transport_options"": {},
            ""uri_prefix"": null,
            ""userid"": ""guest"",
            ""virtual_host"": ""/""
        },
        ""clock"": ""5231619"",
        ""pid"": 57267,
        ""pool"": {
            ""max-concurrency"": 4,
            ""max-tasks-per-child"": ""N/A"",
            ""processes"": [
                26227
            ],
            ""put-guarded-by-semaphore"": false,
            ""timeouts"": [
                0,
                0
            ],
            ""writes"": {
                ""all"": ""67.10%, 20.25%, 6.54%, 6.09%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%"",
                ""avg"": ""9.09%"",
                ""inqueues"": {
                    ""active"": 0,
                    ""total"": 1
                },
                ""raw"": ""299720, 90472, 29219, 27210, 19, 2, 3, 5, 9, 13, 21"",
                ""total"": 446693
            }
        },
        ""prefetch_count"": 223268,
        ""rusage"": {
            ""idrss"": 0,
            ""inblock"": 0,
            ""isrss"": 0,
            ""ixrss"": 0,
            ""majflt"": 0,
            ""maxrss"": 112208,
            ""minflt"": 455423880,
            ""msgrcv"": 0,
            ""msgsnd"": 0,
            ""nivcsw"": 138537,
            ""nsignals"": 0,
            ""nswap"": 0,
            ""nvcsw"": 5265485,
            ""oublock"": 0,
            ""stime"": 1023.837484,
            ""utime"": 6074.95462
        },
        ""total"": {
            ""awx.main.scheduler.tasks.run_job_complete"": 111,
            ""awx.main.scheduler.tasks.run_job_launch"": 130,
            ""awx.main.scheduler.tasks.run_task_manager"": 218473,
            ""awx.main.tasks.awx_isolated_heartbeat"": 7248,
            ""awx.main.tasks.awx_periodic_scheduler"": 143846,
            ""awx.main.tasks.cluster_node_heartbeat"": 72472,
            ""awx.main.tasks.delete_inventory"": 2,
            ""awx.main.tasks.handle_setting_changes"": 6,
            ""awx.main.tasks.handle_work_error"": 25,
            ""awx.main.tasks.handle_work_success"": 113,
            ""awx.main.tasks.purge_old_stdout_files"": 6,
            ""awx.main.tasks.run_administrative_checks"": 2,
            ""awx.main.tasks.run_inventory_update"": 8,
            ""awx.main.tasks.run_job"": 247,
            ""awx.main.tasks.run_project_update"": 83,
            ""awx.main.tasks.run_system_job"": 8,
            ""awx.main.tasks.send_notifications"": 14,
            ""awx.main.tasks.update_inventory_computed_fields"": 218,
            ""celery.backend_cleanup"": 50
        }
    }
celery@elp003745.mgt.example.be:
    {
        ""broker"": {
            ""alternates"": [],
            ""connect_timeout"": 4,
            ""failover_strategy"": ""round-robin"",
            ""heartbeat"": null,
            ""hostname"": ""127.0.0.1"",
            ""insist"": false,
            ""login_method"": ""AMQPLAIN"",
            ""port"": 5672,
            ""ssl"": false,
            ""transport"": ""amqp"",
            ""transport_options"": {},
            ""uri_prefix"": null,
            ""userid"": ""guest"",
            ""virtual_host"": ""/""
        },
        ""clock"": ""5231619"",
        ""pid"": 96311,
        ""pool"": {
            ""max-concurrency"": 4,
            ""max-tasks-per-child"": ""N/A"",
            ""processes"": [
                76763
            ],
            ""put-guarded-by-semaphore"": false,
            ""timeouts"": [
                0,
                0
            ],
            ""writes"": {
                ""all"": ""77.80%, 21.74%, 0.37%, 0.06%, 0.01%, 0.01%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.00%, 0.01%"",
                ""avg"": ""6.67%"",
                ""inqueues"": {
                    ""active"": 0,
                    ""total"": 1
                },
                ""raw"": ""350018, 97815, 1650, 275, 57, 24, 2, 2, 3, 2, 6, 8, 9, 16, 26"",
                ""total"": 449913
            }
        },
        ""prefetch_count"": 315624,
        ""rusage"": {
            ""idrss"": 0,
            ""inblock"": 0,
            ""isrss"": 0,
            ""ixrss"": 0,
            ""majflt"": 0,
            ""maxrss"": 114228,
            ""minflt"": 606926339,
            ""msgrcv"": 0,
            ""msgsnd"": 0,
            ""nivcsw"": 94540,
            ""nsignals"": 0,
            ""nswap"": 0,
            ""nvcsw"": 5163256,
            ""oublock"": 0,
            ""stime"": 1336.273182,
            ""utime"": 7044.649228
        },
        ""total"": {
            ""awx.main.scheduler.tasks.run_job_complete"": 127,
            ""awx.main.scheduler.tasks.run_job_launch"": 131,
            ""awx.main.scheduler.tasks.run_task_manager"": 219955,
            ""awx.main.tasks.apply_cluster_membership_policies"": 1,
            ""awx.main.tasks.awx_isolated_heartbeat"": 7248,
            ""awx.main.tasks.awx_periodic_scheduler"": 142409,
            ""awx.main.tasks.cluster_node_heartbeat"": 72474,
            ""awx.main.tasks.handle_setting_changes"": 6,
            ""awx.main.tasks.handle_work_error"": 18,
            ""awx.main.tasks.handle_work_success"": 91,
            ""awx.main.tasks.purge_old_stdout_files"": 6,
            ""awx.main.tasks.run_administrative_checks"": 2,
            ""awx.main.tasks.run_inventory_update"": 1,
            ""awx.main.tasks.run_job"": 20,
            ""awx.main.tasks.run_project_update"": 5,
            ""awx.main.tasks.send_notifications"": 15,
            ""awx.main.tasks.update_inventory_computed_fields"": 227,
            ""celery.backend_cleanup"": 50
        }
    }
```

We've tried modifying the celery service definitions to include a celery beat scheduler, running a dedicated celery beat service, or disabling it completely. We've also changed the BROKER_URL to either point to localhost or to the list of all 3 servers. None of these changes appeared to have any visible effect to the job scheduling.

One important note regarding this issue is that this effectively blocks job execution while an ""exclusive"" job is running: rather than the second or third node executing jobs on the queue while the first server is running the exclusive job, only the first server effectively processes tasks. 

Although this is not an issue with the AWX by itself, maybe someone here will have a similar setup and will be able to provide insight into how AWX works - and in turn improve documentation regarding an HA configuration of AWX."
7592,ansible,awx,11,closed,2877,2,https://api.github.com/repos/ansible/awx/issues/2877/comments,https://github.com/ansible/awx/pull/2877,"[{""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}]",more sane default log handlers,"* Removed the emailing of admins on request error. When turned on, the
handler will include all django settings in the email. This is not
desirable from a security standpoint.
"
7595,ansible,awx,11,closed,2873,7,https://api.github.com/repos/ansible/awx/issues/2873/comments,https://github.com/ansible/awx/pull/2873,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]","Show type in related_jobs, link based on type","##### SUMMARY
This filters out joblets in the recent jobs of a job template

##### ISSUE TYPE
 - Feature Pull Request
 - Bugfix Pull Request

##### COMPONENT NAME
 - API
 - UI

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```

```


##### ADDITIONAL INFORMATION
The new SQL for generating the recent jobs list:

```sql
SELECT ""main_unifiedjob"".""id"", 
       ""main_unifiedjob"".""polymorphic_ctype_id"", 
       ""main_unifiedjob"".""created"", 
       ""main_unifiedjob"".""modified"", 
       ""main_unifiedjob"".""description"", 
       ""main_unifiedjob"".""created_by_id"", 
       ""main_unifiedjob"".""modified_by_id"", 
       ""main_unifiedjob"".""name"", 
       ""main_unifiedjob"".""old_pk"", 
       ""main_unifiedjob"".""emitted_events"", 
       ""main_unifiedjob"".""unified_job_template_id"", 
       ""main_unifiedjob"".""launch_type"", 
       ""main_unifiedjob"".""schedule_id"", 
       ""main_unifiedjob"".""execution_node"", 
       ""main_unifiedjob"".""controller_node"", 
       ""main_unifiedjob"".""cancel_flag"", 
       ""main_unifiedjob"".""status"", 
       ""main_unifiedjob"".""failed"", 
       ""main_unifiedjob"".""started"", 
       ""main_unifiedjob"".""finished"", 
       ""main_unifiedjob"".""elapsed"", 
       ""main_unifiedjob"".""job_args"", 
       ""main_unifiedjob"".""job_cwd"", 
       ""main_unifiedjob"".""job_env"", 
       ""main_unifiedjob"".""job_explanation"", 
       ""main_unifiedjob"".""start_args"", 
       ""main_unifiedjob"".""result_traceback"", 
       ""main_unifiedjob"".""celery_task_id"", 
       ""main_unifiedjob"".""instance_group_id"" 
FROM   ""main_unifiedjob"" 
       LEFT OUTER JOIN ""main_job"" 
                    ON ( ""main_unifiedjob"".""id"" = 
                       ""main_job"".""unifiedjob_ptr_id"" ) 
WHERE  ( ""main_unifiedjob"".""unified_job_template_id"" = 350 
         AND NOT ( ""main_job"".""job_slice_count"" > 1 
                   AND ""main_job"".""job_slice_count"" IS NOT NULL ) ) 
ORDER  BY ""main_unifiedjob"".""created"" DESC 
LIMIT  10 
```

We did lose something due to a weird polymorphic issue - it won't let me use `.only` in combination with the `.exclude` filter (without grabbing real instances again). I think this is _probably_ a Django polymorphic bug.

Anyway, we didn't used to have the only, so I guess this is probably okay. It doesn't affect the indexing.

Also, since this hits on the same logic, I used the same trick to get the model from the unified model for the `last_job`. This brings the query count down to around 40 for my dataset (25 are unavoidable due to recent jobs not being prefetchable).

One recent_jobs fetching:

https://explain.depesz.com/s/AQS"
7683,ansible,awx,12,closed,2774,1,https://api.github.com/repos/ansible/awx/issues/2774/comments,https://github.com/ansible/awx/issues/2774,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}]",installation on Kubernetes created with Rancher fails at database migration,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY
<!-- Briefly describe the problem. -->
running the installer against a kubernetes cluster built with Rancher 2.0 does not finish, 
stuck at database migration

I am very new with Kubernetes, still maybe something that does not work.
Thank you!

##### ENVIRONMENT
* AWX version: branch devel sha: 79f483a66d1bd5cee938eef5c19074667dc268a8
* AWX install method: kubernetes on Rancher 2
* Ansible version:  2.6.2
* Operating System: mac OSX
* Web Browser: none

##### STEPS TO REPRODUCE
fill in the kuberentes variables in the inventory

```
# Kubernetes Install
kubernetes_context=myfirst
kubernetes_namespace=awx
tiller_namespace=kube-system
```
and run 
`ansible-playbook -i inventory install.yml`


##### EXPECTED RESULTS

awx gets installed

##### ACTUAL RESULTS

the task migrate databases ended in error

##### ADDITIONAL INFORMATION
`
TASK [kubernetes : Migrate database] *********************************************************************************************************************************************************************************************************
task path: /awx/installer/roles/kubernetes/tasks/main.yml:162
Wednesday 21 November 2018  09:08:40 +0100 (0:00:00.674)       0:16:26.181 ****
fatal: [localhost]: FAILED! => {""changed"": true, ""cmd"": ""kubectl -n awx exec ansible-tower-management -- bash -c \""awx-manage migrate --noinput\"""", ""delta"": ""0:03:03.630970"", ""end"": ""2018-11-21 09:11:44.303477"", ""msg"": ""non-zero return code"", ""rc"": 1, ""start"": ""2018-11-21 09:08:40.672507"", ""stderr"": ""Traceback (most recent call last):\n  File \""/usr/bin/awx-manage\"", line 9, in <module>\n    load_entry_point('awx==2.1.0', 'console_scripts', 'awx-manage')()\n  File \""/usr/lib/python2.7/site-packages/awx/__init__.py\"", line 108, in manage\n    execute_from_command_line(sys.argv)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 364, in execute_from_command_line\n    utility.execute()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 356, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 283, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 327, in execute\n    self.check()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 359, in check\n    include_deployment_checks=include_deployment_checks,\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/commands/migrate.py\"", line 62, in _run_checks\n    issues.extend(super(Command, self)._run_checks(**kwargs))\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 346, in _run_checks\n    return checks.run_checks(**kwargs)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/registry.py\"", line 81, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py\"", line 16, in check_url_config\n    return check_resolver(resolver)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py\"", line 26, in check_resolver\n    return check_method()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 256, in check\n    for pattern in self.url_patterns:\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py\"", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 407, in url_patterns\n    patterns = getattr(self.urlconf_module, \""urlpatterns\"", self.urlconf_module)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py\"", line 35, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 400, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \""/usr/lib64/python2.7/importlib/__init__.py\"", line 37, in import_module\n    __import__(name)\n  File \""/usr/lib/python2.7/site-packages/awx/urls.py\"", line 17, in <module>\n    url(r'^sso/', include('social_django.urls', namespace='social')),\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/conf/urls/__init__.py\"", line 50, in include\n    urlconf_module = import_module(urlconf_module)\n  File \""/usr/lib64/python2.7/importlib/__init__.py\"", line 37, in import_module\n    __import__(name)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/urls.py\"", line 6, in <module>\n    from . import views\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/views.py\"", line 10, in <module>\n    from .utils import psa\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/utils.py\"", line 13, in <module>\n    BACKENDS = settings.AUTHENTICATION_BACKENDS\n  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 552, in __getattr_without_cache__\n    return getattr(self._wrapped, name)\n  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 456, in __getattr__\n    value = self._get_local(name)\n  File \""/usr/lib64/python2.7/contextlib.py\"", line 35, in __exit__\n    self.gen.throw(type, value, traceback)\n  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 94, in _ctit_db_wrapper\n    if 'migrate' in sys.argv and get_tower_migration_version() < '310':\n  File \""/usr/lib/python2.7/site-packages/awx/main/utils/db.py\"", line 14, in get_tower_migration_version\n    loader = MigrationLoader(connection, ignore_no_migrations=True)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/loader.py\"", line 52, in __init__\n    self.build_graph()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/loader.py\"", line 209, in build_graph\n    self.applied_migrations = recorder.applied_migrations()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/recorder.py\"", line 65, in applied_migrations\n    self.ensure_schema()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/recorder.py\"", line 52, in ensure_schema\n    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 254, in cursor\n    return self._cursor()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor\n    self.ensure_connection()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py\"", line 94, in __exit__\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection\n    self.connect()\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 189, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection\n    connection = Database.connect(**conn_params)\n  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/psycopg2/__init__.py\"", line 130, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)\ndjango.db.utils.OperationalError: could not translate host name \""awx-postgresql\"" to address: Name or service not known"", ""stderr_lines"": [""Traceback (most recent call last):"", ""  File \""/usr/bin/awx-manage\"", line 9, in <module>"", ""    load_entry_point('awx==2.1.0', 'console_scripts', 'awx-manage')()"", ""  File \""/usr/lib/python2.7/site-packages/awx/__init__.py\"", line 108, in manage"", ""    execute_from_command_line(sys.argv)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 364, in execute_from_command_line"", ""    utility.execute()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 356, in execute"", ""    self.fetch_command(subcommand).run_from_argv(self.argv)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 283, in run_from_argv"", ""    self.execute(*args, **cmd_options)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 327, in execute"", ""    self.check()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 359, in check"", ""    include_deployment_checks=include_deployment_checks,"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/commands/migrate.py\"", line 62, in _run_checks"", ""    issues.extend(super(Command, self)._run_checks(**kwargs))"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 346, in _run_checks"", ""    return checks.run_checks(**kwargs)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/registry.py\"", line 81, in run_checks"", ""    new_errors = check(app_configs=app_configs)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py\"", line 16, in check_url_config"", ""    return check_resolver(resolver)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py\"", line 26, in check_resolver"", ""    return check_method()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 256, in check"", ""    for pattern in self.url_patterns:"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py\"", line 35, in __get__"", ""    res = instance.__dict__[self.name] = self.func(instance)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 407, in url_patterns"", ""    patterns = getattr(self.urlconf_module, \""urlpatterns\"", self.urlconf_module)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py\"", line 35, in __get__"", ""    res = instance.__dict__[self.name] = self.func(instance)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py\"", line 400, in urlconf_module"", ""    return import_module(self.urlconf_name)"", ""  File \""/usr/lib64/python2.7/importlib/__init__.py\"", line 37, in import_module"", ""    __import__(name)"", ""  File \""/usr/lib/python2.7/site-packages/awx/urls.py\"", line 17, in <module>"", ""    url(r'^sso/', include('social_django.urls', namespace='social')),"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/conf/urls/__init__.py\"", line 50, in include"", ""    urlconf_module = import_module(urlconf_module)"", ""  File \""/usr/lib64/python2.7/importlib/__init__.py\"", line 37, in import_module"", ""    __import__(name)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/urls.py\"", line 6, in <module>"", ""    from . import views"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/views.py\"", line 10, in <module>"", ""    from .utils import psa"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/utils.py\"", line 13, in <module>"", ""    BACKENDS = settings.AUTHENTICATION_BACKENDS"", ""  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 552, in __getattr_without_cache__"", ""    return getattr(self._wrapped, name)"", ""  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 456, in __getattr__"", ""    value = self._get_local(name)"", ""  File \""/usr/lib64/python2.7/contextlib.py\"", line 35, in __exit__"", ""    self.gen.throw(type, value, traceback)"", ""  File \""/usr/lib/python2.7/site-packages/awx/conf/settings.py\"", line 94, in _ctit_db_wrapper"", ""    if 'migrate' in sys.argv and get_tower_migration_version() < '310':"", ""  File \""/usr/lib/python2.7/site-packages/awx/main/utils/db.py\"", line 14, in get_tower_migration_version"", ""    loader = MigrationLoader(connection, ignore_no_migrations=True)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/loader.py\"", line 52, in __init__"", ""    self.build_graph()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/loader.py\"", line 209, in build_graph"", ""    self.applied_migrations = recorder.applied_migrations()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/recorder.py\"", line 65, in applied_migrations"", ""    self.ensure_schema()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/migrations/recorder.py\"", line 52, in ensure_schema"", ""    if self.Migration._meta.db_table in self.connection.introspection.table_names(self.connection.cursor()):"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 254, in cursor"", ""    return self._cursor()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 229, in _cursor"", ""    self.ensure_connection()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py\"", line 94, in __exit__"", ""    six.reraise(dj_exc_type, dj_exc_value, traceback)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 213, in ensure_connection"", ""    self.connect()"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py\"", line 189, in connect"", ""    self.connection = self.get_new_connection(conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/postgresql/base.py\"", line 176, in get_new_connection"", ""    connection = Database.connect(**conn_params)"", ""  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/psycopg2/__init__.py\"", line 130, in connect"", ""    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)"", ""django.db.utils.OperationalError: could not translate host name \""awx-postgresql\"" to address: Name or service not known""], ""stdout"": """", ""stdout_lines"": []}
	to retry, use: --limit @/Volumes/diskE/Us`
"
7755,ansible,awx,13,closed,2696,4,https://api.github.com/repos/ansible/awx/issues/2696/comments,https://github.com/ansible/awx/pull/2696,"[{""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}]","Pre-delete bulk delete related, fix parallel request conflicts","##### SUMMARY
There was an issue involving the following steps:
 - sync a large ec2 inventory
 - delete the inventory source in the UI

Problem was that the transactions created a deadlock situation.

Testing shows that this fixes that.

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
awx: 2.1.0
```


##### ADDITIONAL INFORMATION
This is modeled after the fix

https://github.com/ansible/awx/commit/91a24666501c437aa37c4448709931932892ad67

Thanks @wwitzel3 

I can't fully get into why bulk deleting would be expected to _not_ cause deadlocks, whereas the Django behavior of walking related `on_delete` fields does, but the reasons may be self-obvious to the reader.

In the process of debugging, I kept getting some 504 timeouts, because of HARAKIRI. After I turned off the Django Debug Toolbar this stopped happening. Because of that, I tried uwsgi top with memory reports, this diff is needed:

```diff
diff --git a/Makefile b/Makefile
index 4337c13c22..91247e2a61 100644
--- a/Makefile
+++ b/Makefile
@@ -275,7 +275,7 @@ uwsgi: collectstatic
        @if [ ""$(VENV_BASE)"" ]; then \
                . $(VENV_BASE)/awx/bin/activate; \
        fi; \
-    uwsgi -b 32768 --socket 127.0.0.1:8050 --module=awx.wsgi:application --home=/venv/awx --chdir=/awx_devel/ --vacuum --processes=5 --harakiri=120 --master --no-orphans --py-autoreload 1 --max-requests=1000 --stats /tmp/stats.socket --lazy-apps --logformat ""%(addr) %(method) %(uri) - %(proto) %(status)"" --hook-accepting1-once=""exec:awx-manage run_dispatcher --reload""
+    uwsgi -b 32768 --socket 127.0.0.1:8050 --module=awx.wsgi:application --home=/venv/awx --chdir=/awx_devel/ --vacuum --processes=5 --harakiri=120 --master --no-orphans --py-autoreload 1 --max-requests=1000 --stats /tmp/stats.socket --memory-report --lazy-apps --logformat ""%(addr) %(method) %(uri) - %(proto) %(status)"" --hook-accepting1-once=""exec:awx-manage run_dispatcher --reload""
 
 daphne:
        @if [ ""$(VENV_BASE)"" ]; then \
```

So anyway, using _without_ the debug toolbar on would still give fairly long times for highly-connected inventory deletions, but parameters still looked fairly nominal.

![screen shot 2018-11-15 at 10 51 56 am](https://user-images.githubusercontent.com/1385596/48566563-1ef14900-e8c9-11e8-88ed-3deef7a77e3e.png)

"
7773,ansible,awx,13,closed,2673,21,https://api.github.com/repos/ansible/awx/issues/2673/comments,https://github.com/ansible/awx/pull/2673,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Update register_queue.py to enable registration of group names with unicode,"##### SUMMARY
<!--- Describe the change, including rationale and design decisions -->

<!---
If you are fixing an existing issue, please include ""related #nnn"" in your
commit message and your description; but you should still explain what
the change does.
-->

##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bugfix Pull Request

##### COMPONENT NAME
<!--- Name of the module/plugin/module/task -->
 - API
awx/main/management/commands/register_queue.py

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
AWX 2.1.0
```


##### ADDITIONAL INFORMATION

There was a bug that prevented registrations of instance groups that contained unicode.

```
failed: [localhost] (item=[] + [ 'fröbözz' ] + [ 'xyz' ] + [ '🙈🙉🙊' ] + [ 'tower' ]) => {""changed"": false,
 ""cmd"": ""awx-manage register_queue --queuename=\""[] + [ 'fröbözz' ] + [ 'xyz' ] + [ '🙈🙉🙊' ] + [ 'tower' ]\"" --hostnames=\""localhost\"""",
 ""delta"": ""0:00:04.766854"",
 ""end"": ""2018-01-23 20:57:58.086117"",
 ""item"": ""[] + [ 'fröbözz' ] + [ 'xyz' ] + [ '🙈🙉🙊' ] + [ 'tower' ]"",
 ""msg"": ""non-zero return code"",
 ""rc"": 1,
 ""start"": ""2018-01-23 20:57:53.319263"",
 ""stderr"": ""Traceback (most recent call last):
  File \""/bin/awx-manage\"", line 9, in <module>
    load_entry_point('awx==3.2.2', 'console_scripts', 'awx-manage')()
  File \""/lib/python2.7/site-packages/awx/__init__.py\"", line 107, in manage
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 354, in execute_from_command_line
    utility.execute()
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 445, in execute
    output = self.handle(*args, **options)
  File \""/lib/python2.7/site-packages/awx/main/management/commands/register_queue.py\"", line 28, in handle
  File \""/usr/lib64/python2.7/contextlib.py\"", line 17, in __enter__
    return self.gen.next()
  File \""/lib/python2.7/site-packages/awx/main/utils/pglock.py\"", line 13, in advisory_lock
  File \""/usr/lib64/python2.7/contextlib.py\"", line 17, in __enter__
    return self.gen.next()
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django_pglocks/__init__.py\"", line 47, in advisory_lock
    pos = crc32(lock_id.encode(\""utf-8\""))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 38: ordinal not in range(128)"", 
...
```

Showing output error + correct output after change:

![outputfixedafterchange](https://user-images.githubusercontent.com/28930622/48438768-b08a7a80-e752-11e8-9d58-738cc0da79ed.png)

Instances successfully registered:

![instancesapi](https://user-images.githubusercontent.com/28930622/48438801-cd26b280-e752-11e8-85d3-2fff167e24a4.png)
"
7928,ansible,awx,14,closed,2480,1,https://api.github.com/repos/ansible/awx/issues/2480/comments,https://github.com/ansible/awx/issues/2480,[],2.0.1 Install on linux from rpm. sqlite3.InterfaceError: Error binding parameter 0 - probably unsupported type.,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY


##### ENVIRONMENT
* AWX version: 2.0.1
* AWX install method: no-containers
* Ansible version:   2.7.0
* Operating System: CentOS Linux release 7.5.1804
* Web Browser:

##### STEPS TO REPRODUCE

 sudo -u awx /opt/awx/bin/awx-manage migrate

##### EXPECTED RESULTS

running migarations successfully

##### ACTUAL RESULTS

Operations to perform:
  Apply all migrations: auth, conf, contenttypes, djcelery, main, oauth2_provider, sessions, sites, social_django, sso, taggit
Running migrations:
  Applying main.0006_v320_release...Traceback (most recent call last):
  File ""/opt/awx/bin/awx-manage"", line 11, in <module>
    sys.exit(manage())
  File ""/usr/lib/python2.7/site-packages/awx-2.0.1-py2.7.egg/awx/__init__.py"", line 116, in manage
    execute_from_command_line(sys.argv)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/operations/special.py"", line 108, in database_forwards
    self._run_sql(schema_editor, self.sql)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/migrations/operations/special.py"", line 129, in _run_sql
    schema_editor.execute(sql, params=params)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/backends/base/schema.py"", line 120, in execute
    cursor.execute(sql, params)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/backends/utils.py"", line 83, in execute
    sql = self.db.ops.last_executed_query(self.cursor, sql, params)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/backends/sqlite3/operations.py"", line 135, in last_executed_query
    params = self._quote_params_for_last_executed_query(params)
  File ""/opt/awx/embedded/lib64/python2.7/site-packages/django/db/backends/sqlite3/operations.py"", line 124, in _quote_params_for_last_executed_query
    return cursor.execute(sql, params).fetchone()
sqlite3.InterfaceError: Error binding parameter 0 - probably unsupported type.


##### ADDITIONAL INFORMATION


"
7941,ansible,awx,15,closed,2464,4,https://api.github.com/repos/ansible/awx/issues/2464/comments,https://github.com/ansible/awx/issues/2464,"[{""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_test"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_test"", ""color"": ""00ffff"", ""node_id"": ""MDU6TGFiZWwxMDk0ODc5MDk5"", ""id"": 1094879099}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","If a SJT is converted from a JT and the JT version is relaunched, it fails semi-gracefully","##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API
 - UI

##### SUMMARY
If a SJT is converted from a JT and the JT version is relaunched, it fails with negative index errors

##### ENVIRONMENT
* AWX version:2.0.1

##### STEPS TO REPRODUCE

1. Create a JT with a slice of 1
2. Run job
3. Convert JT to SJT by increasing slice count.
4. Run the original JT from the Jobs List view

##### EXPECTED RESULTS

Unable to launch job

##### ACTUAL RESULTS

Job fails gracefully (although the description could be improved)

##### ADDITIONAL INFORMATION

```Traceback (most recent call last): File ""/lib/python2.7/site-packages/awx/main/tasks.py"", line 939, in run File ""/lib/python2.7/site-packages/awx/main/tasks.py"", line 1254, in build_args File ""/lib/python2.7/site-packages/awx/main/tasks.py"", line 810, in build_inventory File ""/lib/python2.7/site-packages/awx/main/models/inventory.py"", line 247, in get_script_data File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 269, in __getitem__ ""Negative indexing is not supported."" AssertionError: Negative indexing is not supported. ```
![screen shot 2018-10-16 at 9 34 10 pm](https://user-images.githubusercontent.com/12446869/47056619-3f739980-d18b-11e8-9d84-b109f372e73b.png)
"
7951,ansible,awx,15,closed,2452,1,https://api.github.com/repos/ansible/awx/issues/2452/comments,https://github.com/ansible/awx/pull/2452,[],fixes dispatcher test that inadvertently access db,"* Logger inadvertently triggered by dispatcher tests that do not need DB
access. Mock settings to sidestep DB access.

Fixes errors of the below form:
```
________________________________________________ TestTaskDispatcher.test_method_dispatch _________________________________________________
[gw6] linux2 -- Python 2.7.5 /venv/awx/bin/python2
Traceback (most recent call last):
  File ""/awx_devel/awx/main/tests/functional/test_dispatch.py"", line 267, in test_method_dispatch
    'args': [2, 2]
  File ""/awx_devel/awx/main/dispatch/worker/task.py"", line 79, in perform_work
    result = self.run_callable(body)
  File ""/awx_devel/awx/main/dispatch/worker/task.py"", line 54, in run_callable
    logger.debug('task {} starting {}(*{})'.format(uuid, task, args))
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 1137, in debug
    self._log(DEBUG, msg, args, **kwargs)
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 1268, in _log
    self.handle(record)
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 1278, in handle
    self.callHandlers(record)
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 1318, in callHandlers
    hdlr.handle(record)
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 745, in handle
    rv = self.filter(record)
  File ""/usr/lib64/python2.7/logging/__init__.py"", line 608, in filter
    if not f.filter(record):
  File ""/awx_devel/awx/main/utils/filters.py"", line 90, in filter
    if not self.enabled_flag:
  File ""/awx_devel/awx/main/utils/filters.py"", line 37, in __get__
    return getattr(settings, self.setting_name, None)
  File ""/awx_devel/awx/conf/settings.py"", line 531, in __getattr_without_cache__
    return getattr(self._wrapped, name)
  File ""/awx_devel/awx/conf/settings.py"", line 444, in __getattr__
    value = self._get_local(name)
  File ""/awx_devel/awx/conf/settings.py"", line 387, in _get_local
    setting = Setting.objects.filter(key=name, user__isnull=True).order_by('pk').first()
  File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 564, in first
    objects = list((self if self.ordered else self.order_by('pk'))[:1])
  File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 250, in __iter__
    self._fetch_all()
  File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 1118, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 53, in __iter__
    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)
  File ""/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 887, in execute_sql
    cursor = self.connection.cursor()
  File ""/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 254, in cursor
    return self._cursor()
  File ""/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 229, in _cursor
    self.ensure_connection()
  File ""/venv/awx/lib/python2.7/site-packages/pytest_django/plugin.py"", line 665, in _blocking_wrapper
    pytest.fail('Database access not allowed, '
  File ""/venv/awx/lib/python2.7/site-packages/_pytest/outcomes.py"", line 92, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Database access not allowed, use the ""django_db"" mark, or the ""db"" or ""transactional_db"" fixtures to enable it.
```"
7954,ansible,awx,15,closed,2449,16,https://api.github.com/repos/ansible/awx/issues/2449/comments,https://github.com/ansible/awx/pull/2449,"[{""default"": false, ""name"": ""mergeit"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/mergeit"", ""color"": ""b345d8"", ""node_id"": ""MDU6TGFiZWwxMDgwODE2Mzcw"", ""id"": 1080816370}]",silence the noisy error that's printed w/ `awx-manage check_migrations`,"This error occurs because the CI that runs `awx-manage check_migrations` doesn't have an actual postgres container when run in the zuul CI environment, so this warning is logged at `awx` import time when it attempts to evaluate certain `django.conf.settings` values:

<img width=""1366"" alt=""screen shot 2018-10-16 at 8 35 23 am"" src=""https://user-images.githubusercontent.com/214912/47016698-72cc0f00-d11e-11e8-8374-8ca275105314.png"">"
8016,ansible,awx,15,closed,2375,2,https://api.github.com/repos/ansible/awx/issues/2375/comments,https://github.com/ansible/awx/pull/2375,[],fix busted notification tests,"```python
14:17:46 uwsgi.1     | 2018-10-05 14:17:46,823 ERROR    django.request Internal Server Error: /api/v2/notification_templates/33/test/
14:17:46 uwsgi.1     | Traceback (most recent call last):
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
14:17:46 uwsgi.1     |     response = get_response(request)
14:17:46 uwsgi.1     |   File ""./awx/wsgi.py"", line 71, in _legacy_get_response
14:17:46 uwsgi.1     |     return super(AWXWSGIHandler, self)._legacy_get_response(request)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
14:17:46 uwsgi.1     |     response = self._get_response(request)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
14:17:46 uwsgi.1     |     response = self.process_exception_by_middleware(e, request)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
14:17:46 uwsgi.1     |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
14:17:46 uwsgi.1     |     return func(*args, **kwargs)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
14:17:46 uwsgi.1     |     return view_func(*args, **kwargs)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
14:17:46 uwsgi.1     |     return self.dispatch(request, *args, **kwargs)
14:17:46 uwsgi.1     |   File ""./awx/api/generics.py"", line 328, in dispatch
14:17:46 uwsgi.1     |     return super(APIView, self).dispatch(request, *args, **kwargs)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
14:17:46 uwsgi.1     |     response = self.handle_exception(exc)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
14:17:46 uwsgi.1     |     self.raise_uncaught_exception(exc)
14:17:46 uwsgi.1     |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
14:17:46 uwsgi.1     |     response = handler(request, *args, **kwargs)
14:17:46 uwsgi.1     |   File ""./awx/api/views/__init__.py"", line 4734, in post
14:17:46 uwsgi.1     |     connection.on_commit(lambda: send_notifications.delay([notification.id]))
14:17:46 uwsgi.1     | NameError: global name 'connection' is not defined
```"
8042,ansible,awx,16,closed,2345,1,https://api.github.com/repos/ansible/awx/issues/2345/comments,https://github.com/ansible/awx/issues/2345,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Openshift Installation SCM pull failing,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
- Installer

##### SUMMARY
Running an Openshift installation results in errors with AWX_Web and AWX_Celery containers. Installation succeeds however errors occur when trying to submit jobs or create projects that talk to SCM. The SCM pull never runs.

##### ENVIRONMENT
* AWX version: 1.0.8
* AWX install method: openshift
* Ansible version:  2.6.4
* Operating System: RHEL 7.4
* Web Browser: Chrome
* Openshift version: OCP 3.7 & 3.9

##### STEPS TO REPRODUCE

ansible-playbook -i inventory install.yml -e openshift_password=<password>

##### EXPECTED RESULTS

AWX running with a single pod (4 containers) and postgresql running in another pod.

##### ACTUAL RESULTS

Installation runs however the AWX Web and AWX celery containers have many python errors resulting in issues with SCM pulls, job submissions and subsequent tasks.

##### ADDITIONAL INFORMATION

Errors from the AWX_Web logs

*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 137)
spawned uWSGI worker 1 (pid: 139, cores: 1)
spawned uWSGI worker 2 (pid: 140, cores: 1)
spawned uWSGI worker 3 (pid: 141, cores: 1)
spawned uWSGI worker 4 (pid: 142, cores: 1)
spawned uWSGI worker 5 (pid: 143, cores: 1)
READY
2018-09-20 18:20:03,007 INFO success: awx-config-watcher entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
2018-09-20 18:20:03,007 INFO success: daphne entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
2018-09-20 18:20:03,007 INFO success: nginx entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
2018-09-20 18:20:03,007 INFO success: uwsgi entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
2018-09-20 18:20:06,963 WARNING  awx.conf.settings Database settings are not available, using defaults, error:
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 80, in <module>
    application = get_wsgi_application()
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 77, in get_wsgi_application
    return AWXWSGIHandler()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 151, in __init__
    self.load_middleware()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 56, in load_middleware
    mw_class = import_string(middleware_path)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/usr/lib/python2.7/site-packages/awx/sso/middleware.py"", line 18, in <module>
    from social_django import utils
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/utils.py"", line 13, in <module>
    BACKENDS = settings.AUTHENTICATION_BACKENDS
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 531, in __getattr_without_cache__
    return getattr(self._wrapped, name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 444, in __getattr__
    value = self._get_local(name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 361, in _get_local
    self._preload_cache()
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 323, in _preload_cache
    for setting in Setting.objects.filter(key__in=settings_to_cache.keys(), user__isnull=True).order_by('pk'):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 250, in __iter__
    self._fetch_all()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 1118, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 53, in __iter__
    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 899, in execute_sql
    raise original_exception
ProgrammingError: relation ""conf_setting"" does not exist
LINE 1: ...f_setting"".""value"", ""conf_setting"".""user_id"" FROM ""conf_sett...

Errors from the AWX-Celery container logs : 

Using /etc/ansible/ansible.cfg as config file
127.0.0.1 | SUCCESS => {
    ""changed"": false, 
    ""db"": ""awxtest""
}
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==1.0.8.0', 'console_scripts', 'awx-manage')()
  File ""/usr/lib/python2.7/site-packages/awx/__init__.py"", line 116, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/commands/shell.py"", line 101, in handle
    exec(sys.stdin.read())
  File ""<string>"", line 1, in <module>
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/contrib/auth/models.py"", line 170, in create_superuser
    return self._create_user(username, email, password, **extra_fields)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/contrib/auth/models.py"", line 153, in _create_user
    user.save(using=self._db)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/contrib/auth/base_user.py"", line 80, in save
    super(AbstractBaseUser, self).save(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 808, in save
    force_update=force_update, update_fields=update_fields)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 838, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 924, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 963, in _do_insert
    using=using, raw=raw)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/manager.py"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 1112, in execute_sql
    cursor.execute(sql, params)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
django.db.utils.IntegrityError: null value in column ""last_login"" violates not-null constraint
DETAIL:  Failing row contains (1, pbkdf2_sha256$36000$OD7sY8fSCxn3$NuGzqPNkK7cTL+ZLhlUZ3UiPtp6zpd+..., null, t, admin, , , root@localhost, t, t, 2018-09-20 18:19:58.843266+00).
2018-09-20 18:20:01,399 WARNING  awx.conf.settings Database settings are not available, using defaults, error:
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==1.0.8.0', 'console_scripts', 'awx-manage')()
  File ""/usr/lib/python2.7/site-packages/awx/__init__.py"", line 116, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 327, in execute
    self.check()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 359, in check
    include_deployment_checks=include_deployment_checks,
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 346, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/registry.py"", line 81, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py"", line 16, in check_url_config
    return check_resolver(resolver)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/checks/urls.py"", line 26, in check_resolver
    return check_method()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 254, in check
    for pattern in self.url_patterns:
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 405, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 398, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/usr/lib/python2.7/site-packages/awx/urls.py"", line 17, in <module>
    url(r'^sso/', include('social_django.urls', namespace='social')),
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 50, in include
    urlconf_module = import_module(urlconf_module)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/urls.py"", line 6, in <module>
    from . import views
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/views.py"", line 10, in <module>
    from .utils import psa
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/utils.py"", line 13, in <module>
    BACKENDS = settings.AUTHENTICATION_BACKENDS
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 531, in __getattr_without_cache__
    return getattr(self._wrapped, name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 444, in __getattr__
    value = self._get_local(name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 361, in _get_local
    self._preload_cache()
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 323, in _preload_cache
    for setting in Setting.objects.filter(key__in=settings_to_cache.keys(), user__isnull=True).order_by('pk'):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 250, in __iter__
    self._fetch_all()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 1118, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 53, in __iter__
    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 899, in execute_sql
    raise original_exception
ProgrammingError: relation ""conf_setting"" does not exist
LINE 1: ...f_setting"".""value"", ""conf_setting"".""user_id"" FROM ""conf_sett...



I believe what is happening here is to do with the following role -

awx/installer/roles/kubernetes/tasks/main.yml

The issue is that the role deploys the ""ansible-tower-management"" pod which starts the DB migration. Just prior to these two steps (deploy ansible tower mgmt pod & db migration), the AWX main pod is deployed. This pod comes online before the DB migrations have completed and therefore cause errors when the AWX_Web and AWX_Celery containers start. Delaying these until the DB migration is complete, resolves the error.

I'll raise a pull request with the modified code I've used to fix this. "
8074,ansible,awx,16,closed,2308,3,https://api.github.com/repos/ansible/awx/issues/2308/comments,https://github.com/ansible/awx/issues/2308,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""state:needs_info"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_info"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWw2ODcxNzg4NTQ="", ""id"": 687178854}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",AWX installation Fails on Kubernetes 1.8 in Migrate DB step,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY
Installation on kubernetes 1.8 is stuck in the DB migration step:

ImproperlyConfigured(\""settings.DATABASES is improperly configured. \"""", ""django.core.exceptions.ImproperlyConfigured: settings.**DATABASES is improperly configured. Please supply the ENGINE value**. Check settings documentation for more details."", ""command terminated with exit code 1""], ""stdout"": """", ""stdout_lines"": []}

Not Sure what is the problem and what is missing here.

##### ENVIRONMENT
* AWX version: latest
* AWX install method: Kuberenetes
* Ansible version:  2.6.3
* Operating System: Linux
* Web Browser: chrome

##### STEPS TO REPRODUCE

ansible-playbook -i inventory install.yml

"
8097,ansible,awx,16,closed,2276,6,https://api.github.com/repos/ansible/awx/issues/2276/comments,https://github.com/ansible/awx/issues/2276,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Project update get an import error (ImportError: cannot import name cleanup),"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
Project update

##### SUMMARY
I was executing project update job, and the output got an import error (ImportError: cannot import name cleanup).

##### ENVIRONMENT
* AWX version: 1.0.8
* AWX install method: native on linux
* Ansible version:  2.6.4
* Operating System: Linux

##### STEPS TO REPRODUCE

Can't find a way

##### EXPECTED RESULTS

Job should success

##### ACTUAL RESULTS

Still got error

##### ADDITIONAL INFORMATION

Output:
```
ansible-playbook 2.6.4
  config file = /etc/ansible/ansible.cfg
  configured module search path = [u'/var/lib/awx/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /home/awx/venv/awx/lib/python2.7/site-packages/ansible
  executable location = /home/awx/venv/awx/bin/ansible-playbook
  python version = 2.7.5 (default, Jul 13 2018, 13:06:57) [GCC 4.8.5 20150623 (Red Hat 4.8.5-28)]
Using /etc/ansible/ansible.cfg as config file
Parsed localhost, inventory source with host_list plugin
ERROR! Unexpected Exception, this is probably a bug: cannot import name cleanup
the full traceback was:

Traceback (most recent call last):
  File ""/home/awx/venv/awx/bin/ansible-playbook"", line 118, in <module>
    exit_code = cli.run()
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/ansible/cli/playbook.py"", line 122, in run
    results = pbex.run()
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/ansible/executor/playbook_executor.py"", line 89, in run
    self._tqm.load_callbacks()
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/ansible/executor/task_queue_manager.py"", line 182, in load_callbacks
    self._stdout_callback = callback_loader.get(self._stdout_callback)
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/ansible/plugins/loader.py"", line 378, in get
    self._module_cache[path] = self._load_module_source(name, path)
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/ansible/plugins/loader.py"", line 357, in _load_module_source
    module = imp.load_source(full_name, path, module_file)
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg/awx/plugins/callback/awx_display.py"", line 30, in <module>
    from awx_display_callback import AWXDefaultCallbackModule as CallbackModule  # noqa
  File ""/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg/awx/lib/awx_display_callback/__init__.py"", line 21, in <module>
    from . import cleanup  # noqa (registers control persistent cleanup)
ImportError: cannot import name cleanup
```

Job api detail:
`{
    ""id"": 1,
    ""type"": ""project_update"",
    ""url"": ""/api/v2/project_updates/1/"",
    ""related"": {
        ""created_by"": ""/api/v2/users/1/"",
        ""unified_job_template"": ""/api/v2/projects/4/"",
        ""stdout"": ""/api/v2/project_updates/1/stdout/"",
        ""project"": ""/api/v2/projects/4/"",
        ""cancel"": ""/api/v2/project_updates/1/cancel/"",
        ""notifications"": ""/api/v2/project_updates/1/notifications/"",
        ""scm_inventory_updates"": ""/api/v2/project_updates/1/scm_inventory_updates/"",
        ""events"": ""/api/v2/project_updates/1/events/""
    },
    ""summary_fields"": {
        ""instance_group"": {
            ""id"": 2,
            ""name"": ""tower""
        },
        ""unified_job_template"": {
            ""id"": 4,
            ""name"": ""Demo Project"",
            ""description"": """",
            ""unified_job_type"": ""project_update""
        },
        ""project"": {
            ""id"": 4,
            ""name"": ""Demo Project"",
            ""description"": """",
            ""status"": ""failed"",
            ""scm_type"": ""git""
        },
        ""created_by"": {
            ""id"": 1,
            ""username"": ""admin"",
            ""first_name"": """",
            ""last_name"": """"
        },
        ""user_capabilities"": {
            ""start"": true,
            ""delete"": true
        }
    },
    ""created"": ""2018-09-19T14:20:30.897988Z"",
    ""modified"": ""2018-09-19T14:45:41.116566Z"",
    ""name"": ""Demo Project"",
    ""description"": """",
    ""local_path"": ""_4__demo_project"",
    ""scm_type"": ""git"",
    ""scm_url"": ""https://github.com/ansible/ansible-tower-samples"",
    ""scm_branch"": """",
    ""scm_clean"": false,
    ""scm_delete_on_update"": false,
    ""credential"": null,
    ""timeout"": 0,
    ""unified_job_template"": 4,
    ""launch_type"": ""manual"",
    ""status"": ""failed"",
    ""failed"": true,
    ""started"": ""2018-09-19T14:45:41.269848Z"",
    ""finished"": ""2018-09-19T14:45:42.916423Z"",
    ""elapsed"": 1.647,
    ""job_args"": ""[\""ansible-playbook\"", \""-i\"", \""localhost,\"", \""-vvv\"", \""-e\"", \""@/tmp/awx_1_JcSSI0/tmpX3LIfg\"", \""project_update.yml\""]"",
    ""job_cwd"": ""/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg/awx/playbooks"",
    ""job_env"": {
        ""TMP"": ""/tmp"",
        ""ANSIBLE_BECOME_ASK_PASS"": ""False"",
        ""ANSIBLE_PARAMIKO_RECORD_HOST_KEYS"": ""False"",
        ""AWX_PRIVATE_DATA_DIR"": ""/tmp/awx_1_JcSSI0"",
        ""LC_CTYPE"": ""en_US.UTF-8"",
        ""_MP_FORK_LOGFILE_"": """",
        ""ANSIBLE_ASK_PASS"": ""False"",
        ""CELERY_LOG_REDIRECT"": ""1"",
        ""SUPERVISOR_GROUP_NAME"": ""awx"",
        ""PATH"": ""/home/awx/venv/awx/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin"",
        ""HOME"": ""/var/lib/awx"",
        ""DISPLAY"": """",
        ""ANSIBLE_CALLBACK_PLUGINS"": ""/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg/awx/plugins/callback"",
        ""LANG"": ""en_US.UTF-8"",
        ""VIRTUAL_ENV"": ""/home/awx/venv/awx"",
        ""SUPERVISOR_SERVER_URL"": ""unix:///var/run/supervisor/supervisor.sock"",
        ""TZ"": ""UTC"",
        ""ANSIBLE_RETRY_FILES_ENABLED"": ""False"",
        ""LANGUAGE"": ""en_US.UTF-8"",
        ""_MP_FORK_LOGFORMAT_"": ""[%(asctime)s: %(levelname)s/%(processName)s] %(message)s"",
        ""AWX_SETTINGS_FILE"": ""/etc/awx/settings.py"",
        ""SUPERVISOR_ENABLED"": ""1"",
        ""CELERY_LOG_FILE"": """",
        ""DJANGO_PROJECT_DIR"": ""/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg"",
        ""CACHE"": ""redis://192.168.8.64:6379/4"",
        ""ANSIBLE_HOST_KEY_CHECKING"": ""False"",
        ""DJANGO_LIVE_TEST_SERVER_ADDRESS"": ""localhost:9013-9199"",
        ""ANSIBLE_STDOUT_CALLBACK"": ""awx_display"",
        ""PYTHONPATH"": ""/home/awx/venv/awx/lib/python2.7/site-packages:/home/awx/venv/awx/lib/python2.7/site-packages/awx-1.0.8-py2.7.egg/awx/lib:"",
        ""CELERY_LOADER"": ""djcelery.loaders.DjangoLoader"",
        ""_MP_FORK_LOGLEVEL_"": ""10"",
        ""LC_ALL"": ""en_US.UTF-8"",
        ""ANSIBLE_FORCE_COLOR"": ""True"",
        ""CELERY_LOG_REDIRECT_LEVEL"": ""WARNING"",
        ""SUPERVISOR_PROCESS_NAME"": ""celery"",
        ""CELERY_LOG_LEVEL"": ""10"",
        ""PROJECT_UPDATE_ID"": ""1"",
        ""DJANGO_SETTINGS_MODULE"": ""awx.settings.production"",
        ""ANSIBLE_VENV_PATH"": ""/home/awx/venv/awx""
    },
    ""job_explanation"": """",
    ""execution_node"": ""bogon"",
    ""result_traceback"": """",
    ""event_processing_finished"": true,
    ""project"": 4,
    ""job_type"": ""check"",
    ""host_status_counts"": {},
    ""playbook_counts"": {
        ""play_count"": 0,
        ""task_count"": 0
    }
}
`"
8129,ansible,awx,16,closed,2233,1,https://api.github.com/repos/ansible/awx/issues/2233/comments,https://github.com/ansible/awx/issues/2233,[],Anisble Tower Job fails when size of the extra-vars is more,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API
 - UI

##### SUMMARY
<!-- Briefly describe the problem. -->
I am having a Job in Ansible Tower. All inputs for the job is passed in the extra-vars (in JSON format)

When the size of extra-vars is small the Job runs fine. But when it is big, say 800KB or 160000 lines of extra-vars, the Job is failing with error.

##### ENVIRONMENT
* AWX version: 2.4.5
* Ansible version:  1.9.1
* Operating System: RHEL 6


##### STEPS TO REPRODUCE

<!-- Please describe exactly how to reproduce the problem. -->
1. Create any sample play-book
2. Pass Huge sized extra_vars to it
##### EXPECTED RESULTS
Play should start executing as a Normal job
<!-- What did you expect to happen when running the steps above? -->

##### ACTUAL RESULTS
Play did not start rather throwing the below Error. Following is the std_out of the job.

[2018-08-30 07:13:27,641: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #1): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:32,649: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #2): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:37,653: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #3): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:42,660: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #4): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:47,667: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #5): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:52,674: DEBUG/Worker-6835] Database error updating Job, retrying in 5 seconds (retry #6): could not receive data from server: Bad file descriptor

[2018-08-30 07:13:52,682: WARNING/Worker-6835] Traceback (most recent call last):
[2018-08-30 07:13:52,683: WARNING/Worker-6835] File ""/usr/lib64/python2.6/logging/handlers.py"", line 76, in emit
[2018-08-30 07:13:52,687: WARNING/Worker-6835] if self.shouldRollover(record):
[2018-08-30 07:13:52,687: WARNING/Worker-6835] File ""/usr/lib64/python2.6/logging/handlers.py"", line 150, in shouldRollover
[2018-08-30 07:13:52,687: WARNING/Worker-6835] self.stream.seek(0, 2)  #due to non-posix-compliant Windows feature
[2018-08-30 07:13:52,687: WARNING/Worker-6835] IOError: [Errno 9] Bad file descriptor
[2018-08-30 07:13:52,674: ERROR/Worker-6835] Failed to update Job after 5 retries.
[2018-08-30 07:13:52,724: WARNING/Worker-6835] /usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/app/trace.py:348: RuntimeWarning: Exception raised outside body: OperationalError('could not receive data from server: Bad file descriptor\n',):
Traceback (most recent call last):
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/app/trace.py"", line 253, in trace_task
    I, R, state, retval = on_error(task_request, exc, uuid)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/app/trace.py"", line 201, in on_error
    R = I.handle_error_state(task, eager=eager)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/app/trace.py"", line 85, in handle_error_state
    }[self.state](task, store_errors=store_errors)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/app/trace.py"", line 118, in handle_failure
    req.id, exc, einfo.traceback, request=req,
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/backends/base.py"", line 120, in mark_as_failure
    traceback=traceback, request=request)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/celery/backends/base.py"", line 251, in store_result
    request=request, **kwargs)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/djcelery/backends/database.py"", line 29, in _store_result
    traceback=traceback, children=self.current_task_children(request),
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/djcelery/managers.py"", line 42, in _inner
    return fun(*args, **kwargs)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/djcelery/managers.py"", line 181, in store_result
    'meta': {'children': children}})
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/djcelery/managers.py"", line 87, in update_or_create
    return get_queryset(self).update_or_create(**kwargs)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/djcelery/managers.py"", line 70, in update_or_create
    obj, created = self.get_or_create(**kwargs)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/query.py"", line 376, in get_or_create
    return self.get(**lookup), False
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/query.py"", line 304, in get
    num = len(clone)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/query.py"", line 77, in __len__
    self._fetch_all()
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/query.py"", line 857, in _fetch_all
    self._result_cache = list(self.iterator())
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/query.py"", line 220, in iterator
    for row in compiler.results_iter():
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/sql/compiler.py"", line 713, in results_iter
    for rows in self.execute_sql(MULTI):
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/models/sql/compiler.py"", line 786, in execute_sql
    cursor.execute(sql, params)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/backends/util.py"", line 53, in execute
    return self.cursor.execute(sql, params)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/utils.py"", line 99, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/django/db/backends/util.py"", line 53, in execute
    return self.cursor.execute(sql, params)
OperationalError: could not receive data from server: Bad file descriptor


  exc, exc_info.traceback)))
[2018-08-30 07:13:52,743: ERROR/Worker-6835] Pool process <Worker(Worker-6835, started daemon)> error: OSError(9, 'Bad file descriptor')
Traceback (most recent call last):
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/billiard/pool.py"", line 288, in run
    sys.exit(self.workloop(pid=pid))
  File ""/usr/lib/python2.6/site-packages/awx/lib/site-packages/billiard/pool.py"", line 372, in workloop
    put((READY, (job, i, (False, einfo), inqW_fd)))
OSError: [Errno 9] Bad file descriptor

<!-- What actually happened? -->

##### ADDITIONAL INFORMATION

No other information in any of the logs apart from the above Error message
<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->"
8149,ansible,awx,17,closed,2210,1,https://api.github.com/repos/ansible/awx/issues/2210/comments,https://github.com/ansible/awx/issues/2210,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""state:in_progress"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:in_progress"", ""color"": ""BCF5A9"", ""node_id"": ""MDU6TGFiZWw2ODYyMDM2MzA="", ""id"": 686203630}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",celery does not restore connection to the database after losing it,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - celery

##### SUMMARY
If for some reason connection between celery and database is lost, celery stops running tasks. When connection is restored, celery does not restore the connection to the database. You need to restart celery to solve problem.

##### ENVIRONMENT
* AWX version: 1.0.7.3
* Operating System: CentOS 7

##### STEPS TO REPRODUCE
Run all components.
Stop the database (or add iptables rule to deny access from celery).
Watch celery log.
```
[2018-08-29 19:47:59,749: ERROR/Beat] Message Error: Couldn't apply scheduled task task_manager: connection already closed
```
Start the database.
After database is up error messagese still present.

##### EXPECTED RESULTS
The connection to the database must be restored

##### ACTUAL RESULTS
The connection to the database is not restored

##### ADDITIONAL INFORMATION
```
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,622: INFO/Beat] Scheduler: Sending due task cluster_heartbeat (awx.main.tasks.cluster_node_heartbeat)
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,698: ERROR/Beat] Message Error: Couldn't apply scheduled task cluster_heartbeat: server closed the connection unexpectedly
Aug 29 22:47:59 celery[273]: This probably means the server terminated abnormally
Aug 29 22:47:59 celery[273]: before or while processing the request.
Aug 29 22:47:59 celery[273]: ['  File ""/var/lib/awx/venv/awx/bin/celery"", line 11, in <module>\n    sys.exit(main())\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/__main__.py"", line 30, in main\n    main()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 81, in main\n    cmd.execute_from_commandline(argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 793, in execute_from_commandline\n    super(CeleryCommand, self).execute_from_commandline(argv)))\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 311, in execute_from_commandline\n    return self.handle_argv(self.prog_name, argv[1:])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 785, in handle_argv\n    return self.execute(command, argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 717, in execute\n    ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 179, in run_from_argv\n    return self(*args, **options)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 274, in __call__\n    ret = self.run(*args, **kwargs)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 212, in run\n    state_db=self.node_format(state_db, hostname), **kwargs\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/worker/__init__.py"", line 206, in start\n    self.blueprint.start(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 123, in start\n    step.start(parent)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 374, in start\n    return self.obj.start()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 137, in start\n    self._popen = Popen(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/forking.py"", line 105, in __init__\n    code = process_obj._bootstrap()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 292, in _bootstrap\n    self.run()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 553, in run\n    self.service.start(embedded_process=True)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 479, in start\n    interval = self.scheduler.tick()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 221, in tick\n    next_time_to_run = self.maybe_due(entry, self.publisher)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 207, in maybe_due\n    exc, traceback.format_stack(), exc_info=True)\n']
Aug 29 22:47:59 celery[273]: Traceback (most recent call last):
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 204, in maybe_due
Aug 29 22:47:59 celery[273]: result = self.apply_async(entry, publisher=publisher)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 260, in apply_async
Aug 29 22:47:59 celery[273]: entry, exc=exc)), sys.exc_info()[2])
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 252, in apply_async
Aug 29 22:47:59 celery[273]: **entry.options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/task.py"", line 573, in apply_async
Aug 29 22:47:59 celery[273]: **dict(self._get_exec_options(), **options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/base.py"", line 345, in send_task
Aug 29 22:47:59 celery[273]: options = router.route(options, name, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 50, in route
Aug 29 22:47:59 celery[273]: route = self.lookup_route(task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 78, in lookup_route
Aug 29 22:47:59 celery[273]: return _first_route(self.routes, task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/utils/functional.py"", line 233, in _matcher
Aug 29 22:47:59 celery[273]: answer = getattr(maybe_evaluate(obj), method)(*args, **kwargs)
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/ha.py"", line 11, in route_for_task
Aug 29 22:47:59 celery[273]: (changed, instance) = Instance.objects.get_or_register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 104, in get_or_register
Aug 29 22:47:59 celery[273]: return self.register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 95, in register
Aug 29 22:47:59 celery[273]: with advisory_lock('instance_registration_%s' % hostname):
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/pglock.py"", line 13, in advisory_lock
Aug 29 22:47:59 celery[273]: with django_pglocks_advisory_lock(*args, **kwargs) as internal_lock:
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django_pglocks/__init__.py"", line 66, in advisory_lock
Aug 29 22:47:59 celery[273]: cursor.execute(command)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
Aug 29 22:47:59 celery[273]: return self.cursor.execute(sql, params)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
Aug 29 22:47:59 celery[273]: six.reraise(dj_exc_type, dj_exc_value, traceback)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 62, in execute
Aug 29 22:47:59 celery[273]: return self.cursor.execute(sql)
Aug 29 22:47:59 celery[273]: SchedulingError: Couldn't apply scheduled task cluster_heartbeat: server closed the connection unexpectedly
Aug 29 22:47:59 celery[273]: This probably means the server terminated abnormally
Aug 29 22:47:59 celery[273]: before or while processing the request.
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,748: INFO/Beat] Scheduler: Sending due task task_manager (awx.main.scheduler.tasks.run_task_manager)
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,749: ERROR/Beat] Message Error: Couldn't apply scheduled task task_manager: connection already closed
Aug 29 22:47:59 celery[273]: ['  File ""/var/lib/awx/venv/awx/bin/celery"", line 11, in <module>\n    sys.exit(main())\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/__main__.py"", line 30, in main\n    main()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 81, in main\n    cmd.execute_from_commandline(argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 793, in execute_from_commandline\n    super(CeleryCommand, self).execute_from_commandline(argv)))\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 311, in execute_from_commandline\n    return self.handle_argv(self.prog_name, argv[1:])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 785, in handle_argv\n    return self.execute(command, argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 717, in execute\n    ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 179, in run_from_argv\n    return self(*args, **options)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 274, in __call__\n    ret = self.run(*args, **kwargs)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 212, in run\n    state_db=self.node_format(state_db, hostname), **kwargs\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/worker/__init__.py"", line 206, in start\n    self.blueprint.start(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 123, in start\n    step.start(parent)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 374, in start\n    return self.obj.start()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 137, in start\n    self._popen = Popen(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/forking.py"", line 105, in __init__\n    code = process_obj._bootstrap()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 292, in _bootstrap\n    self.run()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 553, in run\n    self.service.start(embedded_process=True)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 479, in start\n    interval = self.scheduler.tick()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 221, in tick\n    next_time_to_run = self.maybe_due(entry, self.publisher)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 207, in maybe_due\n    exc, traceback.format_stack(), exc_info=True)\n']
Aug 29 22:47:59 celery[273]: Traceback (most recent call last):
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 204, in maybe_due
Aug 29 22:47:59 celery[273]: result = self.apply_async(entry, publisher=publisher)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 260, in apply_async
Aug 29 22:47:59 celery[273]: entry, exc=exc)), sys.exc_info()[2])
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 252, in apply_async
Aug 29 22:47:59 celery[273]: **entry.options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/task.py"", line 573, in apply_async
Aug 29 22:47:59 celery[273]: **dict(self._get_exec_options(), **options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/base.py"", line 345, in send_task
Aug 29 22:47:59 celery[273]: options = router.route(options, name, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 50, in route
Aug 29 22:47:59 celery[273]: route = self.lookup_route(task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 78, in lookup_route
Aug 29 22:47:59 celery[273]: return _first_route(self.routes, task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/utils/functional.py"", line 233, in _matcher
Aug 29 22:47:59 celery[273]: answer = getattr(maybe_evaluate(obj), method)(*args, **kwargs)
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/ha.py"", line 11, in route_for_task
Aug 29 22:47:59 celery[273]: (changed, instance) = Instance.objects.get_or_register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 104, in get_or_register
Aug 29 22:47:59 celery[273]: return self.register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 95, in register
Aug 29 22:47:59 celery[273]: with advisory_lock('instance_registration_%s' % hostname):
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/pglock.py"", line 13, in advisory_lock
Aug 29 22:47:59 celery[273]: with django_pglocks_advisory_lock(*args, **kwargs) as internal_lock:
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django_pglocks/__init__.py"", line 64, in advisory_lock
Aug 29 22:47:59 celery[273]: cursor = connections[using].cursor()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 254, in cursor
Aug 29 22:47:59 celery[273]: return self._cursor()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 231, in _cursor
Aug 29 22:47:59 celery[273]: return self._prepare_cursor(self.create_cursor(name))
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
Aug 29 22:47:59 celery[273]: six.reraise(dj_exc_type, dj_exc_value, traceback)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 231, in _cursor
Aug 29 22:47:59 celery[273]: return self._prepare_cursor(self.create_cursor(name))
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/postgresql/base.py"", line 220, in create_cursor
Aug 29 22:47:59 celery[273]: cursor = self.connection.cursor()
Aug 29 22:47:59 celery[273]: SchedulingError: Couldn't apply scheduled task task_manager: connection already closed
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,761: INFO/Beat] Scheduler: Sending due task tower_scheduler (awx.main.tasks.awx_periodic_scheduler)
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,762: ERROR/Beat] Message Error: Couldn't apply scheduled task tower_scheduler: connection already closed
Aug 29 22:47:59 celery[273]: ['  File ""/var/lib/awx/venv/awx/bin/celery"", line 11, in <module>\n    sys.exit(main())\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/__main__.py"", line 30, in main\n    main()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 81, in main\n    cmd.execute_from_commandline(argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 793, in execute_from_commandline\n    super(CeleryCommand, self).execute_from_commandline(argv)))\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 311, in execute_from_commandline\n    return self.handle_argv(self.prog_name, argv[1:])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 785, in handle_argv\n    return self.execute(command, argv)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/celery.py"", line 717, in execute\n    ).run_from_argv(self.prog_name, argv[1:], command=argv[0])\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 179, in run_from_argv\n    return self(*args, **options)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/base.py"", line 274, in __call__\n    ret = self.run(*args, **kwargs)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bin/worker.py"", line 212, in run\n    state_db=self.node_format(state_db, hostname), **kwargs\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/worker/__init__.py"", line 206, in start\n    self.blueprint.start(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 123, in start\n    step.start(parent)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/bootsteps.py"", line 374, in start\n    return self.obj.start()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 137, in start\n    self._popen = Popen(self)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/forking.py"", line 105, in __init__\n    code = process_obj._bootstrap()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/billiard/process.py"", line 292, in _bootstrap\n    self.run()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 553, in run\n    self.service.start(embedded_process=True)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 479, in start\n    interval = self.scheduler.tick()\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 221, in tick\n    next_time_to_run = self.maybe_due(entry, self.publisher)\n', '  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 207, in maybe_due\n    exc, traceback.format_stack(), exc_info=True)\n']
Aug 29 22:47:59 celery[273]: Traceback (most recent call last):
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 204, in maybe_due
Aug 29 22:47:59 celery[273]: result = self.apply_async(entry, publisher=publisher)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 260, in apply_async
Aug 29 22:47:59 celery[273]: entry, exc=exc)), sys.exc_info()[2])
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/beat.py"", line 252, in apply_async
Aug 29 22:47:59 celery[273]: **entry.options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/task.py"", line 573, in apply_async
Aug 29 22:47:59 celery[273]: **dict(self._get_exec_options(), **options)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/base.py"", line 345, in send_task
Aug 29 22:47:59 celery[273]: options = router.route(options, name, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 50, in route
Aug 29 22:47:59 celery[273]: route = self.lookup_route(task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/app/routes.py"", line 78, in lookup_route
Aug 29 22:47:59 celery[273]: return _first_route(self.routes, task, args, kwargs)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/celery/utils/functional.py"", line 233, in _matcher
Aug 29 22:47:59 celery[273]: answer = getattr(maybe_evaluate(obj), method)(*args, **kwargs)
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/ha.py"", line 11, in route_for_task
Aug 29 22:47:59 celery[273]: (changed, instance) = Instance.objects.get_or_register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 104, in get_or_register
Aug 29 22:47:59 celery[273]: return self.register()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/managers.py"", line 95, in register
Aug 29 22:47:59 celery[273]: with advisory_lock('instance_registration_%s' % hostname):
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/usr/lib/python2.7/site-packages/awx/main/utils/pglock.py"", line 13, in advisory_lock
Aug 29 22:47:59 celery[273]: with django_pglocks_advisory_lock(*args, **kwargs) as internal_lock:
Aug 29 22:47:59 celery[273]: File ""/usr/lib64/python2.7/contextlib.py"", line 17, in __enter__
Aug 29 22:47:59 celery[273]: return self.gen.next()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django_pglocks/__init__.py"", line 64, in advisory_lock
Aug 29 22:47:59 celery[273]: cursor = connections[using].cursor()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 254, in cursor
Aug 29 22:47:59 celery[273]: return self._cursor()
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 231, in _cursor
Aug 29 22:47:59 celery[273]: return self._prepare_cursor(self.create_cursor(name))
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
Aug 29 22:47:59 celery[273]: six.reraise(dj_exc_type, dj_exc_value, traceback)
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/base/base.py"", line 231, in _cursor
Aug 29 22:47:59 celery[273]: return self._prepare_cursor(self.create_cursor(name))
Aug 29 22:47:59 celery[273]: File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/postgresql/base.py"", line 220, in create_cursor
Aug 29 22:47:59 celery[273]: cursor = self.connection.cursor()
Aug 29 22:47:59 celery[273]: SchedulingError: Couldn't apply scheduled task tower_scheduler: connection already closed
Aug 29 22:47:59 celery[273]: [2018-08-29 19:47:59,763: DEBUG/Beat] beat: Waking up in 19.99 seconds.
```"
8334,ansible,awx,19,closed,1982,1,https://api.github.com/repos/ansible/awx/issues/1982/comments,https://github.com/ansible/awx/issues/1982,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",AWX SAML settings.py configuration can cause AssertionErrors,"##### ISSUE TYPE
 - Bug Report
 - Feature Idea
 - Documentation

##### COMPONENT NAME
 - API

##### SUMMARY

When using settings.py to configure SAML authentication, the `required=True` setting on certain fields causes problems

##### ENVIRONMENT
* AWX version: 1.0.6
* AWX install method: minikube
* Ansible version:  2.5.3
* Operating System: OS X
* Web Browser: Firefox

##### STEPS TO REPRODUCE

Using standard 1.0.6 awx_web, set all the required SAML values:

```
SOCIAL_AUTH_SAML_SP_ENTITY_ID = 'https://awx.local'
SOCIAL_AUTH_SAML_SP_PUBLIC_CERT = '{{ awx_sso_public_cert|trim }}'
SOCIAL_AUTH_SAML_SP_PRIVATE_KEY = '{{ awx_sso_private_key|trim }}'
SOCIAL_AUTH_SAML_ORG_INFO = {
  ""en-US"": {
    ""url"": ""https://awx.local/"",
    ""displayname"": ""AWX Dev"",
    ""name"": ""awx-dev""
  }
}
SOCIAL_AUTH_SAML_TECHNICAL_CONTACT = {
  ""givenName"": ""xyz"",
  ""emailAddress"": ""xyz@example.com""
}
SOCIAL_AUTH_SAML_SUPPORT_CONTACT = {
  ""givenName"": ""xyz"",
  ""emailAddress"": ""xyz@example.com""
}
SOCIAL_AUTH_SAML_ENABLED_IDPS = {
  ""auth0"": {
    ""entity_id"": ""{{ auth0_entity_id }}"",
    ""url"": ""{{ auth0_url }}"",
    ""x509cert"": ""..."",
    ""attr_user_permanent_id"": ""http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"",
    ""attr_email"": ""http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"",
    ""attr_username"": ""http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn"",
    ""attr_first_name"": ""http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname"",
    ""attr_last_name"": ""http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname"",
  }
}
```

##### EXPECTED RESULTS

Working SSO with login. Note that the above settings work fine as configured through the web interface.

##### ACTUAL RESULTS

```
2018-06-12 04:17:45,000 ERROR    django.request Internal Server Error: /
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 59, in _legacy_get_response
    if getattr(resolve(request.path), 'url_name', '') == 'migrations_notran':
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/base.py"", line 27, in resolve
    return get_resolver(urlconf).resolve(path)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 362, in resolve
    for pattern in self.url_patterns:
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 405, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/urls/resolvers.py"", line 398, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/usr/lib/python2.7/site-packages/awx/urls.py"", line 17, in <module>
    url(r'^sso/', include('social_django.urls', namespace='social')),
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 50, in include
    urlconf_module = import_module(urlconf_module)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/urls.py"", line 6, in <module>
    from . import views
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/views.py"", line 10, in <module>
    from .utils import psa
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social_django/utils.py"", line 13, in <module>
    BACKENDS = settings.AUTHENTICATION_BACKENDS
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 489, in __getattr_without_cache__
    return getattr(self._wrapped, name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 402, in __getattr__
    value = self._get_local(name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 356, in _get_local
    value = field.get_default()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 479, in get_default
    return self.default()
  File ""/usr/lib/python2.7/site-packages/awx/sso/fields.py"", line 161, in _default_from_required_settings
    if all([getattr(settings, rs, None) for rs in required_settings]):
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 489, in __getattr_without_cache__
    return getattr(self._wrapped, name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 402, in __getattr__
    value = self._get_local(name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/settings.py"", line 335, in _get_local
    field = self.registry.get_setting_field(name)
  File ""/usr/lib/python2.7/site-packages/awx/conf/registry.py"", line 143, in get_setting_field
    field_instance = field_class(**field_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 1654, in __init__
    super(DictField, self).__init__(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 320, in __init__
    assert not (read_only and required), NOT_READ_ONLY_REQUIRED
```
##### ADDITIONAL INFORMATION

With the following patch, the application works:

```
diff --git a/awx/sso/conf.py b/awx/sso/conf.py
index 75178d6d1..58b9b7ab1 100644
--- a/awx/sso/conf.py
+++ b/awx/sso/conf.py
@@ -1005,7 +1005,6 @@ register(
 register(
     'SOCIAL_AUTH_SAML_ORG_INFO',
     field_class=fields.SAMLOrgInfoField,
-    required=True,
     label=_('SAML Service Provider Organization Info'),
     help_text=_('Provide the URL, display name, and the name of your app. Refer to'
                 ' the Ansible Tower documentation for example syntax.'),
@@ -1025,7 +1024,6 @@ register(
     'SOCIAL_AUTH_SAML_TECHNICAL_CONTACT',
     field_class=fields.SAMLContactField,
     allow_blank=True,
-    required=True,
     label=_('SAML Service Provider Technical Contact'),
     help_text=_('Provide the name and email address of the technical contact for'
                 ' your service provider. Refer to the Ansible Tower documentation'
@@ -1043,7 +1041,6 @@ register(
     'SOCIAL_AUTH_SAML_SUPPORT_CONTACT',
     field_class=fields.SAMLContactField,
     allow_blank=True,
-    required=True,
     label=_('SAML Service Provider Support Contact'),
     help_text=_('Provide the name and email address of the support contact for your'
                 ' service provider. Refer to the Ansible Tower documentation for'
```

I would raise this as a PR, but someone presumably spent effort putting those `required=True` settings in there for a reason!"
8384,ansible,awx,19,closed,1921,1,https://api.github.com/repos/ansible/awx/issues/1921/comments,https://github.com/ansible/awx/issues/1921,"[{""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",OpenStack source inventory not working,"<!---
The Ansible community is highly committed to the security of our open source
projects.  Security concerns should be reported directly by email to
security@ansible.com.  For more information on the Ansible community's
practices regarding responsible disclosure, see
https://www.ansible.com/security
-->

##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - UI

##### SUMMARY
Error synchronizing inventory with OpenStack

##### ENVIRONMENT
* AWX version: 3.2.2
* AWX install method: -
* Ansible version:  2.4.3.0
* Operating System: RHEL 7.4
* Web Browser: Google Chrome

##### STEPS TO REPRODUCE

Trying to synchronize an Ansible Tower inventory using an OpenStack source, but without success.
I created an OpenStack credential, providing the necessary data into it (for the record, this OpenStack credential is used in a playbook which provisions VMs into a PowerVC).

##### EXPECTED RESULTS

Import instances to inventory

##### ACTUAL RESULTS

3.197 INFO     Updating inventory 16: PowerVC Inventory
    3.241 DEBUG    Using system install of ansible-inventory CLI: /usr/bin/ansible-inventory
    3.241 INFO     Reading Ansible inventory source: /var/lib/awx/venv/awx/lib/python2.7/site-packages/awx/plugins/inventory/openstack.py
    3.257 DEBUG    Using private credential data in '/tmp/awx_1717_AvYfdO'.
    3.260 DEBUG    Using fresh temporary directory '/tmp/awx_proot_pwU1BE' for isolation.
    3.260 DEBUG    Running from `/var/lib/awx/venv/awx/lib/python2.7/site-packages/awx/plugins/inventory` working directory.
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==3.2.2', 'console_scripts', 'awx-manage')()
  File ""/lib/python2.7/site-packages/awx/__init__.py"", line 107, in manage
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 661, in handle
    return self.handle_noargs(**options)
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 995, in handle_noargs
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 245, in load_inventory_source
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 180, in load
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 163, in command_to_json
RuntimeError: ansible-inventory failed (rc=4) with stdout:

stderr:
ERROR! Could not parse inventory source /var/lib/awx/venv/awx/lib/python2.7/site-packages/awx/plugins/inventory/openstack.py with available plugins:
Plugin script failed: Inventory script (/var/lib/awx/venv/awx/lib/python2.7/site-packages/awx/plugins/inventory/openstack.py) had an execution error: Error fetching server list on devstack::

 
Plugin ini failed: /var/lib/awx/venv/awx/lib/python2.7/site-packages/awx/plugins/inventory/openstack.py:48: Expected key=value host variable assignment, got: argparse

##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->
"
8571,ansible,awx,21,closed,1704,7,https://api.github.com/repos/ansible/awx/issues/1704/comments,https://github.com/ansible/awx/issues/1704,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_devel"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_devel"", ""color"": ""ededed"", ""node_id"": ""MDU6TGFiZWw2NzAyMjY3MDc="", ""id"": 670226707}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",LDAP configuration failed (/api/v2/settings/all/ 500 error),"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - UI

##### SUMMARY
We tried to configure the LDAP endpoint from web UI but after the change if we click to save and we switch to another tab, the old configurations were missing. We noticed an HTTP 500 error on call /api/v2/settings/all/. We added the stackt race generated during the save action.

##### ENVIRONMENT
* AWX version: 1.0.5.13
* AWX install method: openshift 
* Ansible version: 2.4.2.0
* Operating System: CentOS 7
* Web Browser: Firefox and Chrome

##### STEPS TO REPRODUCE
- Edit the configuration from settings panel and click to save

##### EXPECTED RESULTS
We would keep persistent the LDAP configuration for the external users

##### ACTUAL RESULTS
The configurations becomes blank when i change the tab selection and i return to the previous one.

##### ADDITIONAL INFORMATION
This is the error reported during the issue:

```
10.130.2.1 - - [29/Mar/2018:06:53:59 +0000] ""GET /api/v2/settings/all/ HTTP/1.1"" 200 9706 ""https://awx-web-svc-test-dev.devapps.test.it/"" ""Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36""
[pid: 35|app: 0|req: 91/535] 10.130.2.1 () {50 vars in 2655 bytes} [Thu Mar 29 06:53:58 2018] GET /api/v2/settings/all/ => generated 9706 bytes in 288 msecs (HTTP/1.1 200) 8 headers in 260 bytes (1 switches on core 0)
RESULT 2
OKREADY
2018-03-29 06:54:04,888 ERROR    django.request Internal Server Error: /api/v2/settings/all/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 65, in _legacy_get_response
    return super(AWXWSGIHandler, self)._legacy_get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 284, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 260, in patch
    return self.partial_update(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 745, in partial_update
    return super(RetrieveUpdateAPIView, self).partial_update(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 84, in partial_update
    return self.update(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 741, in update
    return super(RetrieveUpdateAPIView, self).update(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 69, in update
    serializer.is_valid(raise_exception=True)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 236, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 435, in run_validation
    value = self.to_internal_value(data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 465, in to_internal_value
    validated_value = field.run_validation(primitive_value)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 523, in run_validation
    value = self.to_internal_value(data)
  File ""/usr/lib/python2.7/site-packages/awx/conf/serializers.py"", line 57, in to_internal_value
    obj = super(SettingFieldMixin, self).to_internal_value(value)
  File ""/usr/lib/python2.7/site-packages/awx/sso/fields.py"", line 401, in to_internal_value
    return cls(**params_sanitized)
TypeError: __init__() takes at least 2 arguments (2 given)
2018-03-29 06:54:04,888 ERROR    django.request Internal Server Error: /api/v2/settings/all/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 65, in _legacy_get_response
    return super(AWXWSGIHandler, self)._legacy_get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 284, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 260, in patch
    return self.partial_update(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 745, in partial_update
    return super(RetrieveUpdateAPIView, self).partial_update(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 84, in partial_update
    return self.update(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 741, in update
    return super(RetrieveUpdateAPIView, self).update(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 69, in update
    serializer.is_valid(raise_exception=True)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 236, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 435, in run_validation
    value = self.to_internal_value(data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 465, in to_internal_value
    validated_value = field.run_validation(primitive_value)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 523, in run_validation
    value = self.to_internal_value(data)
  File ""/usr/lib/python2.7/site-packages/awx/conf/serializers.py"", line 57, in to_internal_value
    obj = super(SettingFieldMixin, self).to_internal_value(value)
  File ""/usr/lib/python2.7/site-packages/awx/sso/fields.py"", line 401, in to_internal_value
    return cls(**params_sanitized)
TypeError: __init__() takes at least 2 arguments (2 given)
[pid: 36|app: 0|req: 155/536] 10.130.2.1 () {56 vars in 2830 bytes} [Thu Mar 29 06:54:04 2018] PATCH /api/v2/settings/all/ => generated 41 bytes in 325 msecs (HTTP/1.1 500) 5 headers in 177 bytes (1 switches on core 0)
```"
8651,ansible,awx,22,closed,1618,4,https://api.github.com/repos/ansible/awx/issues/1618/comments,https://github.com/ansible/awx/issues/1618,"[{""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","""relation ""conf_setting"" does not exist at character 158"" & ""relation ""django_migrations"" does not exist at character 124"" errors in postgres container ","##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - awx_web

##### SUMMARY
Browsing to the localhost URL yields the ""This site can't be reached"" error.
I see ```Starting server at tcp:port=8051:interface=127.0.0.1, channel layer awx.asgi:channel_layer.``` in dockercompose_web_1 logs, yet the container redirects 0.0.0.0:80->8052/tcp.  This may explain the issue. Or maybe I'm missing something.

##### ENVIRONMENT
* AWX version: tag 1.0.4
* AWX install method: docker/docker-compose on linux
* Ansible version: v2.4.3.0-1
* Operating System: Ubuntu 17.10
* Web Browser: chrome 65.0.3325.162
* docker-ce ```18.02.0~ce-0~ubuntu``` (from official docker PPA)
* docker==3.1.3
* docker-compose==1.20.0
* requests==2.18.1
* Django==1.11.10

##### STEPS TO REPRODUCE

```
# echo ---------------------------
# echo Starting all AWX containers
# echo ---------------------------
# cd <docker-compose.yml folder>
# docker-compose start
Starting memcached ... done
Starting postgres  ... done
Starting rabbitmq  ... done
Starting web       ... done
Starting task      ... done

# docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS              PORTS                                NAMES
d54f70bc9382        ansible/awx_task:latest   ""/tini -- /bin/sh -c…""   15 minutes ago      Up 15 minutes       8052/tcp                             dockercompose_task_1
4474f311762e        ansible/awx_web:latest    ""/tini -- /bin/sh -c…""   15 minutes ago      Up 15 minutes       0.0.0.0:80->8052/tcp                 dockercompose_web_1
58ec082ced51        rabbitmq:3                ""docker-entrypoint.s…""   15 minutes ago      Up 15 minutes       4369/tcp, 5671-5672/tcp, 25672/tcp   dockercompose_rabbitmq_1
a67dadbea52a        postgres:9.6              ""docker-entrypoint.s…""   15 minutes ago      Up 15 minutes       5432/tcp                             dockercompose_postgres_1
5ce8b8f76985        memcached:alpine          ""docker-entrypoint.s…""   15 minutes ago      Up 15 minutes       11211/tcp                            dockercompose_memcached_1
```
[dockercompose_task_1.logs](https://github.com/ansible/awx/files/1830120/dockercompose_task_1.logs.txt)
[dockercompose_web_1.logs](https://github.com/ansible/awx/files/1830122/dockercompose_web_1.logs.txt)

Access http://localhost with chrome

##### EXPECTED RESULTS
Login screen

##### ACTUAL RESULTS
This site can't be reached"
8673,ansible,awx,22,closed,1594,1,https://api.github.com/repos/ansible/awx/issues/1594/comments,https://github.com/ansible/awx/issues/1594,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Cannot delete token,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### STEPS TO REPRODUCE

DELETE `/api/v2/tokens/N/`

##### EXPECTED RESULTS

204

##### ACTUAL RESULTS

```
awx_1        | 2018-03-16 19:13:40,480 ERROR    django.request Internal Server Error: /api/v2/tokens/11/
awx_1        | Traceback (most recent call last):
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
awx_1        |     response = get_response(request)
awx_1        |   File ""./awx/wsgi.py"", line 65, in _legacy_get_response
awx_1        |     return super(AWXWSGIHandler, self)._legacy_get_response(request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
awx_1        |     response = self._get_response(request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
awx_1        |     response = self.process_exception_by_middleware(e, request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
awx_1        |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
awx_1        |     return func(*args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
awx_1        |     return view_func(*args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
awx_1        |     return self.dispatch(request, *args, **kwargs)
awx_1        |   File ""./awx/api/generics.py"", line 284, in dispatch
awx_1        |     return super(APIView, self).dispatch(request, *args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
awx_1        |     response = self.handle_exception(exc)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
awx_1        |     self.raise_uncaught_exception(exc)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
awx_1        |     response = handler(request, *args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 219, in delete
awx_1        |     return self.destroy(request, *args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 93, in destroy
awx_1        |     self.perform_destroy(instance)
awx_1        |   File ""./awx/api/generics.py"", line 487, in perform_destroy
awx_1        |     super(DestroyAPIView, self).perform_destroy(instance)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 97, in perform_destroy
awx_1        |     instance.delete()
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 974, in delete
awx_1        |     return collector.delete()
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/deletion.py"", line 284, in delete
awx_1        |     count = qs._raw_delete(using=self.using)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 631, in _raw_delete
awx_1        |     return sql.DeleteQuery(self.model).delete_qs(self, using)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/sql/subqueries.py"", line 80, in delete_qs
awx_1        |     cursor = self.get_compiler(using).execute_sql(CURSOR)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 899, in execute_sql
awx_1        |     raise original_exception
awx_1        | ProgrammingError: relation ""oauth2_provider_refreshtoken"" does not exist
awx_1        | LINE 1: DELETE FROM ""oauth2_provider_refreshtoken"" WHERE ""oauth2_pro...
```

##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->
"
8698,ansible,awx,22,closed,1568,5,https://api.github.com/repos/ansible/awx/issues/1568/comments,https://github.com/ansible/awx/issues/1568,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""priority:high"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:high"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTUzODc="", ""id"": 686255387}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",installer/kubernetes/templates/deployment.yml.j2 cpu and memory mismatch + limit supported only with apiVersion: extensions/v1beta2,"##### ISSUE TYPE

 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY

in installer/kubernetes/templates/deployment.yml.j2

issues introduced with following commit https://github.com/ansible/awx/commit/b0cf4de07224902992de5ad9bb957cd94855f759#diff-d975205ae64de1b20726919b50ffcc75

- limits are only supported since apiVersion: extensions/v1beta2
- cpu and memory mismatch on lines 55-59
- please cast variables to integer
- additionally, requirements should be adapted in the documentation:  At leasts 6GB of memory, At least 3 cpu cores
- additionally, organisation in a single pod makes it impossible to have components running on separate nodes of a kubernetes cluster

##### STEPS TO REPRODUCE

exexute the install playbook on a kubernetes cluster

##### EXPECTED RESULTS

```
TASK [kubernetes : Apply Deployment] ******************************************************************************************************************************************************************************
changed: [vars]
```

##### ACTUAL RESULTS

- limits are only supported since apiVersion: extensions/v1beta2

```
TASK [kubernetes : Apply Deployment] ******************************************************************************************************************************************************************************
fatal: [vars]: FAILED! => {""changed"": true, ""cmd"": ""kubectl apply -f /tmp/awx-config/deployment.yml"", ""delta"": ""0:00:00.255991"", ""end"": ""2018-03-15 11:46:32.239584"", ""msg"": ""non-zero return code"", ""rc"": 1, ""start"": ""2018-03-15 11:46:31.983593"", ""stderr"": ""error: error validating \""/tmp/awx-config/deployment.yml\"": error validating data: ValidationError(Deployment.spec.template.spec.containers[1].resources): unknown field \""limit\"" in io.k8s.api.core.v1.ResourceRequirements; if you choose to ignore these errors, turn validation off with --validate=false"", ""stderr_lines"": [""error: error validating \""/tmp/awx-config/deployment.yml\"": error validating data: ValidationError(Deployment.spec.template.spec.containers[1].resources): unknown field \""limit\"" in io.k8s.api.core.v1.ResourceRequirements; if you choose to ignore these errors, turn validation off with --validate=false""], ""stdout"": """", ""stdout_lines"": []}
```

-  cpu and memory mismatch on lines 55-59

```
0/3 nodes are available: 1 Insufficient memory, 1 PodToleratesNodeTaints, 3 Insufficient cpu.
```

- Variable not casted as an integer:

```
TASK [kubernetes : Template Kubernetes AWX Config] ****************************************************************************************************************************************************************
fatal: [vars]: FAILED! => {""changed"": false, ""msg"": ""AnsibleError: Unexpected templating type error occurred on (apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: awx-config\n  namespace: {{ awx_kubernetes_namespace }}\ndata:\n  secret_key: {{ awx_secret_key }}\n  awx_settings: |\n    import os\n    import socket\n    ADMINS = ()\n    \n    # Container environments don't like chroots\n    AWX_PROOT_ENABLED = False\n\n    # Automatically deprovision pods that go offline\n    AWX_AUTO_DEPROVISION_INSTANCES = True\n\n    SYSTEM_TASK_ABS_CPU = {{ ((awx_task_cpu_request|default(1500) / 1000) * 4)|int }}\n    SYSTEM_TASK_ABS_MEM = {{ ((awx_task_mem_request|default(2) * 1024) / 100)|int }}\n\n    #Autoprovisioning should replace this\n    CLUSTER_HOST_ID = socket.gethostname()\n    SYSTEM_UUID = '00000000-0000-0000-0000-000000000000'\n\n    SESSION_COOKIE_SECURE = False\n    CSRF_COOKIE_SECURE = False \n\n    REMOTE_HOST_HEADERS = ['HTTP_X_FORWARDED_FOR']\n    \n    STATIC_ROOT = '/var/lib/awx/public/static'\n    PROJECTS_ROOT = '/var/lib/awx/projects'\n    JOBOUTPUT_ROOT = '/var/lib/awx/job_status'\n    SECRET_KEY = file('/etc/tower/SECRET_KEY', 'rb').read().strip()\n    ALLOWED_HOSTS = ['*']\n    INTERNAL_API_URL = 'http://127.0.0.1:8052'\n    SERVER_EMAIL = 'root@localhost'\n    DEFAULT_FROM_EMAIL = 'webmaster@localhost'\n    EMAIL_SUBJECT_PREFIX = '[AWX] '\n    EMAIL_HOST = 'localhost'\n    EMAIL_PORT = 25\n    EMAIL_HOST_USER = ''\n    EMAIL_HOST_PASSWORD = ''\n    EMAIL_USE_TLS = False\n    \n    LOGGING['handlers']['console'] = {\n        '()': 'logging.StreamHandler',\n        'level': 'DEBUG',\n        'formatter': 'simple',\n    }\n    \n    LOGGING['loggers']['django.request']['handlers'] = ['console']\n    LOGGING['loggers']['rest_framework.request']['handlers'] = ['console']\n    LOGGING['loggers']['awx']['handlers'] = ['console']\n    LOGGING['loggers']['awx.main.commands.run_callback_receiver']['handlers'] = ['console']\n    LOGGING['loggers']['awx.main.commands.inventory_import']['handlers'] = ['console']\n    LOGGING['loggers']['awx.main.tasks']['handlers'] = ['console']\n    LOGGING['loggers']['awx.main.scheduler']['handlers'] = ['console']\n    LOGGING['loggers']['django_auth_ldap']['handlers'] = ['console']\n    LOGGING['loggers']['social']['handlers'] = ['console']\n    LOGGING['loggers']['system_tracking_migrations']['handlers'] = ['console']\n    LOGGING['loggers']['rbac_migrations']['handlers'] = ['console']\n    LOGGING['loggers']['awx.isolated.manager.playbooks']['handlers'] = ['console']\n    LOGGING['handlers']['callback_receiver'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['fact_receiver'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['task_system'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['tower_warnings'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['rbac_migrations'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['system_tracking_migrations'] = {'class': 'logging.NullHandler'}\n    LOGGING['handlers']['management_playbooks'] = {'class': 'logging.NullHandler'}\n    \n    DATABASES = {\n        'default': {\n            'ATOMIC_REQUESTS': True,\n            'ENGINE': 'django.db.backends.postgresql',\n            'NAME': \""{{ pg_database }}\"",\n            'USER': \""{{ pg_username }}\"",\n            'PASSWORD': \""{{ pg_password }}\"",\n            'HOST': \""{{ pg_hostname|default('postgresql') }}\"",\n            'PORT': \""{{ pg_port }}\"",\n        }\n    }\n    BROKER_URL = 'amqp://{}:{}@{}:{}/{}'.format(\n        \""awx\"",\n        \""abcdefg\"",\n        \""localhost\"",\n        \""5672\"",\n        \""awx\"")\n    CHANNEL_LAYERS = {\n        'default': {'BACKEND': 'asgi_amqp.AMQPChannelLayer',\n                    'ROUTING': 'awx.main.routing.channel_routing',\n                    'CONFIG': {'url': BROKER_URL}}\n    }\n    CACHES = {\n        'default': {\n            'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n            'LOCATION': '{}:{}'.format(\""localhost\"", \""11211\"")\n        },\n        'ephemeral': {\n            'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n        },\n    }\n): unsupported operand type(s) for /: 'unicode' and 'int'""}

```

- Attempt to run on a cluster with nodes with  4GB of memory and 2 cpu cores

```
0/3 nodes are available: 1 Insufficient memory, 1 PodToleratesNodeTaints, 3 Insufficient cpu.
```


##### ADDITIONAL INFORMATION

````
-apiVersion: extensions/v1beta1
+apiVersion: extensions/v1beta2
 kind: Deployment
 metadata:
   name: awx
@@ -52,11 +52,11 @@ spec:
               value: {{ default_admin_password|default('password') }}
           resources:
             requests:
-              memory: ""{{ awx_task_cpu_request|default('2') }}Gi""
-              cpu: ""{{ awx_task_mem_request|default('1500') }}m""
+              cpu: ""{{ awx_task_cpu_request|default('1500')|int }}m""
+              memory: ""{{ awx_task_mem_request|default('2')|int }}Gi""
             limit:
-              memory: ""{{ awx_task_cpu_request|default('2') }}Gi""
-              cpu: ""{{ awx_task_mem_request|default('1500') }}m""
+              cpu: ""{{ awx_task_cpu_request|default('1500')|int }}m""
+              memory: ""{{ awx_task_mem_request|default('2')|int }}Gi""
         - name: awx-rabbit
           image: ansible/awx_rabbitmq:{{ rabbitmq_version }}
           imagePullPolicy: Always
````"
8706,ansible,awx,22,closed,1560,2,https://api.github.com/repos/ansible/awx/issues/1560/comments,https://github.com/ansible/awx/pull/1560,[],Avoid failure if ip is not a command,"We need to make this case a no-op if AWX is ever going to be deployed in unconventional environments (and it's in those environments one would expect to use the development settings).

```
>>> from awx.main.models import *
sh: ip: command not found
Traceback (most recent call last):
  File ""<stdin>"", line 1, in <module>
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/awx-0.0.0-py2.7.egg/awx/main/models/__init__.py"", line 8, in <module>
    from awx.main.models.base import * # noqa
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/awx-0.0.0-py2.7.egg/awx/main/models/base.py"", line 11, in <module>
    from taggit.managers import TaggableManager
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/taggit/managers.py"", line 8, in <module>
    from django.contrib.contenttypes.fields import GenericRelation
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/contrib/contenttypes/fields.py"", line 5, in <module>
    from django.contrib.contenttypes.models import ContentType
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/contrib/contenttypes/models.py"", line 139, in <module>
    class ContentType(models.Model):
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/contrib/contenttypes/models.py"", line 140, in ContentType
    app_label = models.CharField(max_length=100)
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/db/models/fields/__init__.py"", line 1061, in __init__
    super(CharField, self).__init__(*args, **kwargs)
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/db/models/fields/__init__.py"", line 172, in __init__
    self.db_tablespace = db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/conf/__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/conf/__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/django/conf/__init__.py"", line 110, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/alancoding/.virtualenvs/cli/lib/python2.7/site-packages/awx-0.0.0-py2.7.egg/awx/settings/development.py"", line 159, in <module>
    os.environ['SDB_NOTIFY_HOST'] = os.popen('ip route').read().split(' ')[2]
IndexError: list index out of range
```

In some of these cases, `ip` just isn't a command, and the return value is just an empty string."
8717,ansible,awx,22,closed,1546,0,https://api.github.com/repos/ansible/awx/issues/1546/comments,https://github.com/ansible/awx/issues/1546,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:high"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:high"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTUzODc="", ""id"": 686255387}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",500 error when attempting to delete an inventory script,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### SUMMARY
- attempting to delete an inventory script through the UI results in a 500 error being displayed to the user.

##### STEPS TO REPRODUCE
- create an inventory script
- attempt to delete the inventory script by clicking the trashcan delete icon

##### EXPECTED RESULTS
- the inventory script is deleted or the delete prompt is shown

##### ACTUAL RESULTS
- nothing visible happens, but a 500 error is indicated in the browser console

##### ADDITIONAL INFORMATION
<img width=""879"" alt=""screen shot 2018-03-13 at 3 51 41 pm"" src=""https://user-images.githubusercontent.com/9753817/37366307-7a71ef24-26d6-11e8-8dc8-13acc9dfd935.png"">

The following traceback is present in the awx_web container logs:

```
AttributeError: 'super' object has no attribute 'accessible_pk_qs'
2018-03-13 19:49:42,026 ERROR    django.request Internal Server Error: /api/v2/inventory_sources/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 65, in _legacy_get_response
    return super(AWXWSGIHandler, self)._legacy_get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 284, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 201, in get
    return self.list(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 45, in list
    return self.get_paginated_response(serializer.data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 742, in data
    ret = super(ListSerializer, self).data
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 262, in data
    self._data = self.to_representation(self.instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 660, in to_representation
    self.child.to_representation(item) for item in iterable
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 2070, in to_representation
    ret = super(InventorySourceSerializer, self).to_representation(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 683, in to_representation
    return super(UnifiedJobTemplateSerializer, self).to_representation(obj)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 504, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 1816, in to_representation
    return method(value)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 346, in _get_summary_fields
    return {} if obj is None else self.get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 2038, in get_summary_fields
    summary_fields = super(InventorySourceSerializer, self).get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 1973, in get_summary_fields
    summary_fields = super(InventorySourceOptionsSerializer, self).get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 407, in get_summary_fields
    user_capabilities = self._obj_capability_dict(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 436, in _obj_capability_dict
    model, qs, prefetch_list, view.request.user
  File ""/usr/lib/python2.7/site-packages/awx/main/utils/common.py"", line 571, in prefetch_page_capabilities
    filter_args.append(Q(**{'pk__in': model.accessible_pk_qs(user, '%s_role' % role_type)}))
  File ""/usr/lib/python2.7/site-packages/awx/main/models/unified_jobs.py"", line 199, in accessible_pk_qs
    return super(UnifiedJobTemplate, cls).accessible_pk_qs(accessor, role_field)
AttributeError: 'super' object has no attribute 'accessible_pk_qs'
```"
8718,ansible,awx,22,closed,1545,0,https://api.github.com/repos/ansible/awx/issues/1545/comments,https://github.com/ansible/awx/issues/1545,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:high"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:high"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTUzODc="", ""id"": 686255387}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",500 error when attempting to open the workflow editor,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### SUMMARY
- attempting to open the workflow editor in the UI results in a 500 error being displayed to the user.

##### STEPS TO REPRODUCE
- create a workflow job template
- open the edit panel for the workflow job template
- click the ""workflow editor button""

##### EXPECTED RESULTS
- the workflow editor becomes visible

##### ACTUAL RESULTS
- a 500 error notification is displayed

##### ADDITIONAL INFORMATION
<img width=""1291"" alt=""screen shot 2018-03-13 at 2 52 22 pm"" src=""https://user-images.githubusercontent.com/9753817/37363515-8681352a-26ce-11e8-8782-4a82d880c32a.png"">

The following traceback is present in the awx_web container logs:

```
AttributeError: 'super' object has no attribute 'accessible_pk_qs'
2018-03-13 19:49:42,026 ERROR    django.request Internal Server Error: /api/v2/inventory_sources/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/usr/lib/python2.7/site-packages/awx/wsgi.py"", line 65, in _legacy_get_response
    return super(AWXWSGIHandler, self)._legacy_get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 284, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 201, in get
    return self.list(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 45, in list
    return self.get_paginated_response(serializer.data)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 742, in data
    ret = super(ListSerializer, self).data
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 262, in data
    self._data = self.to_representation(self.instance)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 660, in to_representation
    self.child.to_representation(item) for item in iterable
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 2070, in to_representation
    ret = super(InventorySourceSerializer, self).to_representation(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 683, in to_representation
    return super(UnifiedJobTemplateSerializer, self).to_representation(obj)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 504, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/fields.py"", line 1816, in to_representation
    return method(value)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 346, in _get_summary_fields
    return {} if obj is None else self.get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 2038, in get_summary_fields
    summary_fields = super(InventorySourceSerializer, self).get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 1973, in get_summary_fields
    summary_fields = super(InventorySourceOptionsSerializer, self).get_summary_fields(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 407, in get_summary_fields
    user_capabilities = self._obj_capability_dict(obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/serializers.py"", line 436, in _obj_capability_dict
    model, qs, prefetch_list, view.request.user
  File ""/usr/lib/python2.7/site-packages/awx/main/utils/common.py"", line 571, in prefetch_page_capabilities
    filter_args.append(Q(**{'pk__in': model.accessible_pk_qs(user, '%s_role' % role_type)}))
  File ""/usr/lib/python2.7/site-packages/awx/main/models/unified_jobs.py"", line 199, in accessible_pk_qs
    return super(UnifiedJobTemplate, cls).accessible_pk_qs(accessor, role_field)
AttributeError: 'super' object has no attribute 'accessible_pk_qs'
```"
8764,ansible,awx,23,closed,1486,1,https://api.github.com/repos/ansible/awx/issues/1486/comments,https://github.com/ansible/awx/issues/1486,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_devel"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_devel"", ""color"": ""ededed"", ""node_id"": ""MDU6TGFiZWw2NzAyMjY3MDc="", ""id"": 670226707}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Can't create system auditor user,"##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API

##### SUMMARY
<!-- Briefly describe the problem. -->


##### STEPS TO REPRODUCE

* Create a system auditor user via the UI OR
* POST to `/api/v2/organization/1/users/`

```
{
	""first_name"": ""Djkfd"",
	""last_name"": ""Kjdlkf"",
	""organization"": 1,
	""email"": ""dfdlj@kdjfd.com"",
	""username"": ""admin"",
	""password"": ""abc123"",
	""password_confirm"": ""abc123"",
	""user_type"": {
		""type"": ""system_auditor"",
		""label"": ""System Auditor""
	},
	""is_superuser"": false,
	""is_system_auditor"": true
}
```

##### EXPECTED RESULTS

* For a system auditor user to be created

##### ACTUAL RESULTS

500

##### ADDITIONAL INFORMATION

```
2018-03-08 21:19:35,536 ERROR    django.request Internal Server Error: /api/v2/organizations/1/users/
Traceback (most recent call last):
  File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""./awx/wsgi.py"", line 65, in _legacy_get_response
    return super(AWXWSGIHandler, self)._legacy_get_response(request)
  File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""./awx/api/generics.py"", line 284, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 494, in dispatch
    response = self.handle_exception(exc)
  File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 491, in dispatch
    response = handler(request, *args, **kwargs)
  File ""./awx/api/views.py"", line 968, in post
    user = User.objects.get(id=ret.data['id'])
KeyError: 'id'
```
"
8777,ansible,awx,23,closed,1470,0,https://api.github.com/repos/ansible/awx/issues/1470/comments,https://github.com/ansible/awx/pull/1470,[],Include stack trace for delete_inventory logs,"Current behavior is just a single-line message. Testing:

```
In [1]: from awx.main.tasks import delete_inventory

In [3]: delete_inventory.delay(38232, None)
Out[3]: <AsyncResult: 404c4d9d-0b9f-413b-aa7a-7385550990e8>
```

yields

```
awx_1        | 2018-03-08 12:33:18,638 ERROR    awx.main.tasks Delete Inventory failed due to missing inventory: 283934
awx_1        | Traceback (most recent call last):
awx_1        |   File ""/awx_devel/awx/main/tasks.py"", line 573, in delete_inventory
awx_1        |     i = Inventory.objects.get(id=inventory_id)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/manager.py"", line 85, in manager_method
awx_1        |     return getattr(self.get_queryset(), name)(*args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 380, in get
awx_1        |     self.model._meta.object_name
awx_1        | DoesNotExist: Inventory matching query does not exist.
```

From celery documentation, I had through that the retry method, itself, would throw an exception. Maybe it does, but it doesn't print the stack trace like I assumed.

This is because we've seen the DatabaseError case, and wanted to see if we could correlate the DB locks to other messages in the logs."
8836,ansible,awx,24,closed,1406,2,https://api.github.com/repos/ansible/awx/issues/1406/comments,https://github.com/ansible/awx/issues/1406,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",cannot create oauth personal access token at `/api/o/token/`,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### SUMMARY
Here's a test case that replicates the instructions at https://github.com/ansible/awx/blob/devel/awx/api/templates/api/api_o_auth_authorization_root_view.md#authorization-using-application-of-grant-type-password (but fails with `E   OperationalError: no such table: oauth2_provider_refreshtoken`):


```diff
(awx) [devel:●] ~/dev/awx/awx git diff
diff --git a/awx/main/tests/functional/api/test_oauth.py b/awx/main/tests/functional/api/test_oauth.py
index 435204957..6fad2fb9d 100644
--- a/awx/main/tests/functional/api/test_oauth.py
+++ b/awx/main/tests/functional/api/test_oauth.py
@@ -1,6 +1,9 @@
+import base64
+import os
+
 import pytest

-from awx.api.versioning import reverse
+from awx.api.versioning import reverse, drf_reverse
 from awx.main.models.oauth import (OAuth2Application as Application,
                                    OAuth2AccessToken as AccessToken,
                                    OAuth2RefreshToken as RefreshToken
@@ -133,3 +136,16 @@ def test_oauth_application_delete(oauth_application, post, delete, admin):
     assert Application.objects.filter(client_id=oauth_application.client_id).count() == 0
     assert RefreshToken.objects.filter(application=oauth_application).count() == 0
     assert AccessToken.objects.filter(application=oauth_application).count() == 0
+
+
+@pytest.mark.django_db
+def test_personal_access_token_creation(oauth_application, post, alice):
+    url = drf_reverse('api:oauth_authorization_root_view') + 'token/'
+    resp = post(
+        url,
+        data='grant_type=password&username=alice&password=alice&scope=read',
+        content_type='application/x-www-form-urlencoded',
+        HTTP_AUTHORIZATION='Basic ' + base64.b64encode(':'.join([
+            oauth_application.client_id, oauth_application.client_secret
+        ]))
+    )
diff --git a/awx/main/tests/functional/conftest.py b/awx/main/tests/functional/conftest.py
index 22e675246..d5b45cf72 100644
--- a/awx/main/tests/functional/conftest.py
+++ b/awx/main/tests/functional/conftest.py
@@ -531,7 +531,7 @@ def _request(verb):
             user = data_or_user
         elif 'data' not in kwargs:
             kwargs['data'] = data_or_user
-        if 'format' not in kwargs:
+        if 'format' not in kwargs and 'content_type' not in kwargs:
             kwargs['format'] = 'json'

         view, view_args, view_kwargs = resolve(urlparse(url)[2])
```

```python
$ py.test awx/main/tests/functional/api/test_oauth.py
>>>>>>>>>>>>>>>>>>> PDB set_trace (IO-capturing turned off) >>>>>>>>>>>>>>>>>>>>
...
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/endpoints/token.py:118: in create_token_response
    request, self.default_token_type)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/grant_types/resource_owner_password_credentials.py:109: in create_token_response
    self.request_validator.save_token(token, request)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/request_validator.py:246: in save_token
    return self.save_bearer_token(token, request, *args, **kwargs)
    return f(endpoint, uri, *args, **kwargs)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/endpoints/token.py:118: in create_token_response
    request, self.default_token_type)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/grant_types/resource_owner_password_credentials.py:109: in create_token_response
    self.request_validator.save_token(token, request)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/request_validator.py:246: in save_token
    return self.save_bearer_token(token, request, *args, **kwargs)
    return f(endpoint, uri, *args, **kwargs)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/endpoints/token.py:118: in create_token_response
    request, self.default_token_type)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/grant_types/resource_owner_password_credentials.py:109: in create_token_response
    self.request_validator.save_token(token, request)
/venv/awx/lib/python2.7/site-packages/oauthlib/oauth2/rfc6749/request_validator.py:246: in save_token
    return self.save_bearer_token(token, request, *args, **kwargs)
/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py:185: in inner
    return func(*args, **kwargs)
/venv/awx/lib/python2.7/site-packages/oauth2_provider/oauth2_validators.py:472: in save_bearer_token
    refresh_token.save()
/venv/awx/lib/python2.7/site-packages/django/db/models/base.py:808: in save
    force_update=force_update, update_fields=update_fields)
/venv/awx/lib/python2.7/site-packages/django/db/models/base.py:838: in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
/venv/awx/lib/python2.7/site-packages/django/db/models/base.py:924: in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
/venv/awx/lib/python2.7/site-packages/django/db/models/base.py:963: in _do_insert
    using=using, raw=raw)
/venv/awx/lib/python2.7/site-packages/django/db/models/manager.py:85: in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
/venv/awx/lib/python2.7/site-packages/django/db/models/query.py:1076: in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py:1107: in execute_sql
    cursor.execute(sql, params)
/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py:65: in execute
    return self.cursor.execute(sql, params)
/venv/awx/lib/python2.7/site-packages/django/db/utils.py:94: in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py:65: in execute
    return self.cursor.execute(sql, params)
/venv/awx/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:328: in execute
    return Database.Cursor.execute(self, query, params)
E   OperationalError: no such table: oauth2_provider_refreshtoken
==================== 1 failed, 6 deselected in 4.18 seconds ====================
```"
8863,ansible,awx,24,closed,1374,1,https://api.github.com/repos/ansible/awx/issues/1374/comments,https://github.com/ansible/awx/pull/1374,[],More consistent representations of model objects,"I got annoyed by seeing Role objects printed as `<Role: Role object>`.

I checked against how Django does things, and I thought their pattern of ""`field_name in self.__dict__`"" is better, because it avoids changing the state of the object in the process of representing the object.

https://github.com/django/django/blob/f427ffcccbb29550d18eff4ee255e278157b240d/django/db/models/base.py#L557-L564

Also, I changed from `.id` to `.pk`, because the former _also_ (extremely unexpectedly) changes the state of the object. The last thing we want is a database connection error writing log messages!

```python
In [10]: jt_name = JobTemplate.objects.only('name').first()

In [11]: jt_name.__dict__
Out[11]: 
{'_state': <django.db.models.base.ModelState at 0x806e850>,
 'name': u'A - B - C - D',
 'polymorphic_ctype_id': 22,
 'unifiedjobtemplate_ptr_id': 32}

In [12]: jt_name.id
Out[12]: 32

In [13]: jt_name.__dict__
Out[13]: 
{'_state': <django.db.models.base.ModelState at 0x806e850>,
 u'id': 32,
 'name': u'A - B - C - D',
 'polymorphic_ctype_id': 22,
 'unifiedjobtemplate_ptr_id': 32}

In [14]: jt_name = JobTemplate.objects.only('name').first()

In [15]: jt_name.__dict__
Out[15]: 
{'_state': <django.db.models.base.ModelState at 0x8071610>,
 'name': u'A - B - C - D',
 'polymorphic_ctype_id': 22,
 'unifiedjobtemplate_ptr_id': 32}

In [16]: jt_name.pk
Out[16]: 32

In [17]: jt_name.__dict__
Out[17]: 
{'_state': <django.db.models.base.ModelState at 0x8071610>,
 'name': u'A - B - C - D',
 'polymorphic_ctype_id': 22,
 'unifiedjobtemplate_ptr_id': 32}
```

With this, we get nice Roles.

```python
In [1]: Role.objects.all()
Out[1]: <QuerySet [<Role: System Administrator-1>, <Role: Admin-2>, <Role: Admin-4>, <Role: Read-5>, <Role: System Auditor-7>
```

There were several other places in the models where I felt like the `__unicode__` method was adding negative value. If the pk isn't useful in the representation, then why should it be there in the base class and all the other classes?"
8869,ansible,awx,24,closed,1368,2,https://api.github.com/repos/ansible/awx/issues/1368/comments,https://github.com/ansible/awx/pull/1368,[],Fix server error with absent client_secret,"I couldn't view `/api/v2/applications/1/`.

```
awx_1        | Traceback (most recent call last):
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
awx_1        |     response = get_response(request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
awx_1        |     response = self._get_response(request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 217, in _get_response
awx_1        |     response = self.process_exception_by_middleware(e, request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 215, in _get_response
awx_1        |     response = response.render()
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/template/response.py"", line 107, in render
awx_1        |     self.content = self.rendered_content
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/response.py"", line 72, in rendered_content
awx_1        |     ret = renderer.render(self.data, accepted_media_type, context)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/renderers.py"", line 716, in render
awx_1        |     context = self.get_context(data, accepted_media_type, renderer_context)
awx_1        |   File ""./awx/api/renderers.py"", line 29, in get_context
awx_1        |     return super(BrowsableAPIRenderer, self).get_context(data, accepted_media_type, renderer_context)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/renderers.py"", line 650, in get_context
awx_1        |     raw_data_put_form = self.get_raw_data_form(data, view, 'PUT', request)
awx_1        |   File ""./awx/api/renderers.py"", line 43, in get_raw_data_form
awx_1        |     return super(BrowsableAPIRenderer, self).get_raw_data_form(data, view, method, request)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/renderers.py"", line 554, in get_raw_data_form
awx_1        |     serializer = view.get_serializer(instance=instance)
awx_1        |   File ""./awx/api/generics.py"", line 303, in get_serializer
awx_1        |     serializer._data = self.update_raw_data(serializer.data)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 533, in data
awx_1        |     ret = super(Serializer, self).data
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 262, in data
awx_1        |     self._data = self.to_representation(self.instance)
awx_1        |   File ""./awx/api/serializers.py"", line 1001, in to_representation
awx_1        |     ret.pop('client_secret')
awx_1        |   File ""/usr/lib64/python2.7/collections.py"", line 143, in pop
awx_1        |     raise KeyError(key)
awx_1        | KeyError: 'client_secret'
```

I need this fix to keep things working."
8919,ansible,awx,24,closed,1314,0,https://api.github.com/repos/ansible/awx/issues/1314/comments,https://github.com/ansible/awx/pull/1314,[],Correct permission check for job rescheduling,"(will push another commit for tests)

This fixes 2 very annoying bugs that came out of this recently-introduced view.

Firstly, a bug which was 100% my fault, I checked `if not request.user.can_access(JobLaunchConfig, 'add', {'reference_obj': obj}):`. That makes no sense, because `obj` is a `Job`, not a launch config. That was just wrong, and the direct interpretation of prior intent was that I should have typed `config` and not `obj`. But the fact that I made this error shows that the code structure was confusing anyway. The view is creating a schedule, so I've refactored to check add permission for adding a schedule. The juggling of config objects is lower-level, buried in the access classes already.

Next, there was a problem (at least for the API browser) where DRF wants to check permissions on the _resultant_ object from a POST. Not to check permission for the action, just to decide whether to show a form. This is problematic for the simple reason that the view's model is `Job`, but it produces a `Schedule`.  This led DRF to use the `JobAccess` class to check permissions on the resultant `Schedule` object. Why would it ever do that?

https://github.com/encode/django-rest-framework/blob/a540acdc9552bcaf704371c3e1dee216059a221e/rest_framework/renderers.py#L539-L546

When a serializer creates some `data`, there is more than meets the eye. The data still has the serializer instance that created it attached (I know, you probably thought it was a vanilla dictionary, I did too). Categorically, this is a problem for any view based around one model, but creates another model.

But we have lots of views like that! How did they ever work? Consider `JobTemplateLaunch`, it is based around the JT model, but produces a Job. Why is this not a problem? Because it serializes the `Job`, and then strips the other stuff from the data that the serializer creates. Technically, what we really need is something like a `SpawnAPIView`, which is for sub-endpoints of one model that creates a different model, and have `permissions.py` updated to handle that in a more transparent way."
8991,ansible,awx,25,closed,1214,0,https://api.github.com/repos/ansible/awx/issues/1214/comments,https://github.com/ansible/awx/pull/1214,[],Change schedule queryset logic to avoid server error,"This is one of those strange subtle cases with the Django ORM where it makes a huge difference to do `Model.objects.filter(Q(related__in=A) | Q(related__in=B))` as opposed to `Model.objects.filter(related__in=(A | B))`.

I don't know if it's worth it to get too far into the specifics of why this is the case.

Manually testing shows it fixes https://github.com/ansible/awx/issues/802

Compare to the last queryset I posted in the issue, here is the revised SQL for the same endpoint viewed by the same org admin user.

```sql
SELECT
   COUNT(*) AS ""__count"" 
FROM
   ""main_schedule"" 
WHERE
   ""main_schedule"".""unified_job_template_id"" IN 
   (
      SELECT
         W0.""id"" AS Col1 
      FROM
         ""main_unifiedjobtemplate"" W0 
         LEFT OUTER JOIN
            ""main_inventorysource"" W1 
            ON (W0.""id"" = W1.""unifiedjobtemplate_ptr_id"") 
      WHERE
         (
            W0.""id"" IN 
            (
               SELECT DISTINCT
                  V0.""object_id"" AS Col1 
               FROM
                  ""main_rbac_role_ancestors"" V0 
               WHERE
                  (
                     V0.""ancestor_id"" IN 
                     (
                        SELECT
                           U0.""id"" AS Col1 
                        FROM
                           ""main_rbac_roles"" U0 
                           INNER JOIN
                              ""main_rbac_roles_members"" U1 
                              ON (U0.""id"" = U1.""role_id"") 
                        WHERE
                           U1.""user_id"" = 4
                     )
                     AND V0.""content_type_id"" IN 
                     (
                        20,
                        22,
                        30
                     )
                     AND V0.""role_field"" = 'read_role'
                  )
            )
            OR W1.""inventory_id"" IN 
            (
               SELECT DISTINCT
                  V0.""object_id"" AS Col1 
               FROM
                  ""main_rbac_role_ancestors"" V0 
               WHERE
                  (
                     V0.""ancestor_id"" IN 
                     (
                        SELECT
                           U0.""id"" AS Col1 
                        FROM
                           ""main_rbac_roles"" U0 
                           INNER JOIN
                              ""main_rbac_roles_members"" U1 
                              ON (U0.""id"" = U1.""role_id"") 
                        WHERE
                           U1.""user_id"" = 4
                     )
                     AND V0.""content_type_id"" = 37 
                     AND V0.""role_field"" = 'read_role'
                  )
            )
         )
   )
```

This query is more complex than the prior one, but at least the code is easier to follow.

I have tried to write a unit test for this, and came up with this so far

```python
    def test_schedule_queryset(self, rando, organization, inventory):
        from awx.main.models import SystemJobTemplate
        sjt = SystemJobTemplate.objects.create(name='test-system-jt')
        sjt.jobs.create()
        sjt.jobs.create()
        inventory.inventory_sources.create(name='asdf')
        job_template = JobTemplate.objects.create(name='test-job_template', inventory=inventory)
        job_template.jobs.create()
        job_template.jobs.create()
        organization.admin_role.members.add(rando)
        Schedule.objects.create(unified_job_template=job_template, rrule=self.rrule)
        assert len(list(ScheduleAccess(rando).filtered_queryset())) == 1
```

This fails to reproduce the bug. It's still not actually guaranteed that the issue (seen using postgres) will still occur in the test suite using sqlite3."
9278,ansible,awx,28,closed,906,0,https://api.github.com/repos/ansible/awx/issues/906/comments,https://github.com/ansible/awx/pull/906,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Refactor named URL unit tests,"##### SUMMARY
The original tests set no longer works after Django 1.11 due to more
strict rules against dynamic model definition. The refactored tests set
aims at each existing model that apply named URL rules,  instead of
abstract general use cases, thus significantly improves maintainability
and readability.

Ping @wwitzel3 and @ryanpetrello for review.

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
 - API

##### AWX VERSION
```
awx: 1.0.1.631
```"
9309,ansible,awx,28,closed,871,1,https://api.github.com/repos/ansible/awx/issues/871/comments,https://github.com/ansible/awx/pull/871,[],Fix bug when creating system job schedule,"the bug was

```
2017-12-19 19:30:24,764 ERROR    django.request Internal Server Error: /api/v1/system_job_templates/1/schedules/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 185, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/lib/python2.7/site-packages/awx/api/generics.py"", line 253, in dispatch
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 489, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 449, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 486, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 244, in post
    return self.create(request, *args, **kwargs)
  File ""/lib/python2.7/site-packages/awx/api/generics.py"", line 526, in create
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 236, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File ""/lib/python2.7/site-packages/awx/api/serializers.py"", line 479, in run_validation
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/serializers.py"", line 434, in run_validation
    value = self.validate(value)
  File ""/lib/python2.7/site-packages/awx/api/serializers.py"", line 3121, in validate
  File ""/lib/python2.7/site-packages/awx/api/serializers.py"", line 513, in validate
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py"", line 1228, in full_clean
    self.clean_fields(exclude=exclude)
  File ""/lib/python2.7/site-packages/awx/main/models/base.py"", line 117, in clean_fields
  File ""/lib/python2.7/site-packages/awx/main/models/schedules.py"", line 126, in clean_extra_data
  File ""/lib/python2.7/site-packages/awx/main/models/schedules.py"", line 115, in _clean_extra_data_system_jobs
NameError: global name 'ValidationError' is not defined
```

expected results

```json
{
    ""extra_data"": [
        ""days must be a positive integer.""
    ]
}
```

this is still accomplished by the logic that now lives in the SystemJob model."
9370,ansible,awx,29,closed,809,2,https://api.github.com/repos/ansible/awx/issues/809/comments,https://github.com/ansible/awx/issues/809,[],LDAP authentication not attempted on accounts with the same username that initially logged in via SAML,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API
 - UI

##### SUMMARY
When I would log in first via SAML to Ansible Tower, it would not let me log in with the same username via LDAP. LDAP authentication was not even attempted on the LDAP servers.
If I would put a fake username and password, I would see the LDAP authentication at least try.
I deleted my user, then logged in with LDAP first. Then I could log out and access Ansible Tower via SAML or LDAP with my correct username.


##### ENVIRONMENT
* Ansible Tower Version 3.2.1
* Ansible version: ansible 2.4.0.0
* Operating System: Red Hat Enterprise Linux Server release 7.4
* Web Browser: FireFox

##### STEPS TO REPRODUCE

Log in via SAML
Log out
Try to log in via LDAP with same username/password

##### EXPECTED RESULTS

I expect to be able to log in with either SAML or LDAP and access Ansible Tower

##### ACTUAL RESULTS

LDAP authentication does not even attempt to look up the user.

##### ADDITIONAL INFORMATION

2017-12-12 16:07:42,239 DEBUG    django_auth_ldap Initiating TLS
2017-12-12 16:07:42,263 DEBUG    django_auth_ldap Authentication failed for xxx: user DN/password rejected by LDAP server.
2017-12-12 16:07:42,301 WARNING  awx.api.views Login failed for user xxx
2017-12-12 16:07:42,302 WARNING  awx.api.generics status 400 received by user AnonymousUser attempting to access /api/v2/authtoken/ from 10.11.218.147
2017-12-12 16:08:53,146 WARNING  awx.api.views Login failed for user lsantiag
2017-12-12 16:08:53,147 WARNING  awx.api.generics status 400 received by user AnonymousUser attempting to access /api/v2/authtoken/ from 10.10.122.159
2017-12-12 16:08:59,223 WARNING  awx.api.views Login failed for user dminnich
2017-12-12 16:08:59,224 WARNING  awx.api.generics status 400 received by user AnonymousUser attempting to access /api/v2/authtoken/ from 10.11.218.147
2017-12-12 16:09:16,674 DEBUG    django_auth_ldap Initiating TLS
2017-12-12 16:09:16,694 DEBUG    django_auth_ldap Authentication failed for asdfdsafdsa: user DN/password rejected by LDAP server.
2017-12-12 16:09:16,732 WARNING  awx.api.views Login failed for user asdfdsafdsa
2017-12-12 16:09:16,734 WARNING  awx.api.generics status 400 received by user AnonymousUser attempting to access /api/v2/authtoken/ from 10.11.218.147
2017-12-12 16:11:10,910 DEBUG    django_auth_ldap Initiating TLS
2017-12-12 16:11:11,061 DEBUG    django_auth_ldap Created Django user dminnich
2017-12-12 16:11:11,062 DEBUG    django_auth_ldap Populating Django user dminnich
2017-12-12 16:11:11,066 DEBUG    django_auth_ldap search_s('uid=dminnich,ou=users,dc=redhat,dc=com', 0, '(objectClass=*)') returned 1 objects: uid=dminnich,ou=users,dc=redhat,dc=com
2017-12-12 16:11:11,082 DEBUG    django_auth_ldap search_s('ou=servicegroups,dc=redhat,dc=com', 2, '(&(objectClass=groupOfUniqueNames)(uniqueMember=uid=dminnich,ou=users,dc=redhat,dc=com))') returned 14 objects: cn=devlab-tower-smw-access,ou=servicegroups,dc=redhat,dc=com; cn=devlab-tower-iam-access,ou=servicegroups,dc=redhat,dc=com; cn=rhev-cpls-access,ou=servicegroups,dc=redhat,dc=com; cn=rhev-lts-access,ou=servicegroups,dc=redhat,dc=com; cn=pki-ops,ou=servicegroups,dc=redhat,dc=com; cn=pki-itdevs,ou=servicegroups,dc=redhat,dc=com; cn=pki-pnt,ou=servicegroups,dc=redhat,dc=com; cn=pki-rhevcivms,ou=servicegroups,dc=redhat,dc=com; cn=sysops,ou=servicegroups,dc=redhat,dc=com; cn=pki-dba,ou=servicegroups,dc=redhat,dc=com; cn=extidp-client-access,ou=servicegroups,dc=redhat,dc=com; cn=iso-access-rhev,ou=servicegroups,dc=redhat,dc=com; cn=extidp-admin-access,ou=servicegroups,dc=redhat,dc=com; cn=intidp-admin-access,ou=servicegroups,dc=redhat,dc=com
2017-12-12 16:11:11,114 INFO     awx.api.views User dminnich logged in
"
9400,ansible,awx,29,closed,776,2,https://api.github.com/repos/ansible/awx/issues/776/comments,https://github.com/ansible/awx/issues/776,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_devel"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_devel"", ""color"": ""ededed"", ""node_id"": ""MDU6TGFiZWw2NzAyMjY3MDc="", ""id"": 670226707}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",500 error on malformed search query,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### SUMMARY

https://awxhost/api/v2/job_events/?event=playbook_on_task_start&order_by=event_data.task_action

yields a 500 error.

```
2017-12-07 18:56:57,133 ERROR    django.request Internal Server Error: /api/v2/job_events/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 145, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 71, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/lib/python2.7/site-packages/awx/api/generics.py"", line 246, in dispatch
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 466, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 463, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 201, in get
    return self.list(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/mixins.py"", line 42, in list
    page = self.paginate_queryset(queryset)
  File ""/lib/python2.7/site-packages/awx/api/generics.py"", line 317, in paginate_queryset
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/generics.py"", line 172, in paginate_queryset
    return self.paginator.paginate_queryset(queryset, self.request, view=self)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/pagination.py"", line 218, in paginate_queryset
    return list(self.page)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/paginator.py"", line 117, in __len__
    return len(self.object_list)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 144, in __len__
    self._fetch_all()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 965, in _fetch_all
    self._result_cache = list(self.iterator())
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py"", line 238, in iterator
    results = compiler.execute_sql()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 840, in execute_sql
    cursor.execute(sql, params)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/utils.py"", line 98, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
ProgrammingError: missing FROM-clause entry for table ""event_data""
LINE 1: ...event"".""start_line"", ""main_jobevent"".""end_line"", (""event_dat...
```

##### ENVIRONMENT
* AWX version: recent
"
9466,ansible,awx,30,closed,705,10,https://api.github.com/repos/ansible/awx/issues/705/comments,https://github.com/ansible/awx/issues/705,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",CloudForms inventory import fails with django.core.exceptions.ValidationError,"##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API

##### SUMMARY
<!-- Briefly describe the problem. -->
CloudForms inventory import fails with django.core.exceptions.ValidationError. Have tried with both a ""normal"" Cloudforms user credential and an ""admin"" one but same result both times.

##### ENVIRONMENT
* AWX version: 1.0.1.225 
* AWX install method: docker for mac
* Ansible version:  2.4.1
* Operating System: MacOS 10.12.6
* Web Browser: Chrome 62
* Cloudforms: 4.2 (Management engine Version 5.7.3.2.20170621144854_6c833cc)

##### STEPS TO REPRODUCE

<!-- For bugs, please show exactly how to reproduce the problem. For new
features, show how the feature would be used.  -->

1. Create new inventory source with source type of Red Hat Cloudforms
2. Run sync

##### EXPECTED RESULTS

<!-- For bug reports, what did you expect to happen when running the steps
above? -->

* Inventory import successfully completes.

##### ACTUAL RESULTS

<!-- For bug reports, what actually happened? -->

* Inventory import fails with ""django.core.exceptions.ValidationError: [u\""'<object object at 0x7830fe0>' value must be either True or False.\""]"" error

##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->
Log file:
```
2017-11-23 01:44:04,433 INFO     awx.main.commands.inventory_import Updating inventory 2: CF
2017-11-23 01:44:04,472 INFO     awx.main.commands.inventory_import Reading Ansible inventory source: /usr/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py
2017-11-23 01:44:34,698 INFO     awx.main.commands.inventory_import Processing JSON output...
2017-11-23 01:44:34,720 INFO     awx.main.commands.inventory_import Loaded 322 groups, 266 hosts
...
2017-11-23 01:44:34,739 WARNING  awx.main.commands.inventory_import Host \""<redacted1>\"" has no \""id\"" variable
2017-11-23 01:44:34,739 WARNING  awx.main.commands.inventory_import Host \""<redacted2>\"" has no \""id\"" variable
2017-11-23 01:44:34,739 WARNING  awx.main.commands.inventory_import Host \""<redacted3>\"" has no \""id\"" variable
...
2017-11-23 01:44:38,254 INFO     awx.main.commands.inventory_import Group \""<redacted4>_ovf\"" added
2017-11-23 01:44:38,261 INFO     awx.main.commands.inventory_import Group \""<redacted5>_ovf\"" added
2017-11-23 01:44:38,269 INFO     awx.main.commands.inventory_import Group \""location\"" added
2017-11-23 01:44:38,276 INFO     awx.main.commands.inventory_import Group \""redhat\"" added
2017-11-23 01:44:38,283 INFO     awx.main.commands.inventory_import Group \""tags\"" added
2017-11-23 01:44:38,290 INFO     awx.main.commands.inventory_import Group \""type\"" added
2017-11-23 01:44:38,298 INFO     awx.main.commands.inventory_import Group \""vendor\"" added
Traceback (most recent call last):
  File \""/usr/bin/awx-manage\"", line 9, in <module>
    load_entry_point('awx==1.0.1.225', 'console_scripts', 'awx-manage')()
  File \""/usr/lib/python2.7/site-packages/awx/__init__.py\"", line 109, in manage
    execute_from_command_line(sys.argv)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 364, in execute_from_command_line
    utility.execute()
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py\"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py\"", line 330, in execute
    output = self.handle(*args, **options)
  File \""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py\"", line 1020, in handle
    self.load_into_database()
  File \""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py\"", line 892, in load_into_database
    self._create_update_hosts()
  File \""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py\"", line 798, in _create_update_hosts
    db_host = self.inventory.hosts.update_or_create(name=mem_host_name, defaults=host_attrs)[0]
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/fields/related_descriptors.py\"", line 665, in update_or_create
    return super(RelatedManager, self.db_manager(db)).update_or_create(**kwargs)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/manager.py\"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py\"", line 482, in update_or_create
    obj, created = self._create_object_from_params(lookup, params)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py\"", line 498, in _create_object_from_params
    obj = self.create(**params)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py\"", line 394, in create
    obj.save(force_insert=True, using=self.db)
  File \""/usr/lib/python2.7/site-packages/awx/main/models/inventory.py\"", line 665, in save
    super(Host, self).save(*args, **kwargs)
  File \""/usr/lib/python2.7/site-packages/awx/main/models/base.py\"", line 264, in save
    super(PrimordialModel, self).save(*args, **kwargs)
  File \""/usr/lib/python2.7/site-packages/awx/main/models/base.py\"", line 159, in save
    super(CreatedModifiedModel, self).save(*args, **kwargs)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py\"", line 808, in save
    force_update=force_update, update_fields=update_fields)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py\"", line 838, in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py\"", line 924, in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/base.py\"", line 963, in _do_insert
    using=using, raw=raw)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/manager.py\"", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/query.py\"", line 1076, in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py\"", line 1106, in execute_sql
    for sql, params in self.as_sql():
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py\"", line 1059, in as_sql
    for obj in self.query.objs
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/sql/compiler.py\"", line 998, in prepare_value
    value = field.get_db_prep_save(value, connection=self.connection)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/fields/__init__.py\"", line 770, in get_db_prep_save
    prepared=False)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/fields/__init__.py\"", line 762, in get_db_prep_value
    value = self.get_prep_value(value)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/fields/__init__.py\"", line 1043, in get_prep_value
    return self.to_python(value)
  File \""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/db/models/fields/__init__.py\"", line 1036, in to_python
    params={'value': value},
django.core.exceptions.ValidationError: [u\""'<object object at 0x6aa0f40>' value must be either True or False.\""]
```"
9502,ansible,awx,30,closed,667,3,https://api.github.com/repos/ansible/awx/issues/667/comments,https://github.com/ansible/awx/issues/667,"[{""default"": false, ""name"": ""component:installer"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:installer"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw2ODc5Nzk5NjQ="", ""id"": 687979964}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","AWX Task Installer breaking on KeyError: ('social_django', u'usersocialauth')","##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - Installer

##### SUMMARY
unable to get awx installer to complete successfully

##### ENVIRONMENT
* AWX version: latest
* AWX install method: docker on linux
* Ansible version:  2.4.1.0
* Operating System: ubuntu 16.04

##### STEPS TO REPRODUCE
Setup the inventory to connect to an existing postgres for the managed ansible tower.
Walk through install guide as written

##### EXPECTED RESULTS
AWX spins up with previous data from the managed tower version intact.

##### ACTUAL RESULTS
It appears to not be able to get paste the social login on install.

Log output: https://pastebin.com/eNdSz2Ya

##### ADDITIONAL INFORMATION
I have followed the steps here: https://github.com/ansible/awx/issues/138 however it did not fix it.

* Removing the /tmp/pgdocker did nothing since my db is external (I believe this to be expected)
* I have tried uninstalling and reinstalling all libraries

If I run it as a brand new install with a local postgresql container, it appears to complete the install just fine. So it appears to be something in the existing db that may need to be cleaned up? I am unsure what and where though if there is anything.

Any help at this point would be so much appreciated.
"
9520,ansible,awx,30,closed,647,2,https://api.github.com/repos/ansible/awx/issues/647/comments,https://github.com/ansible/awx/pull/647,[],remove raw SQL in visible_roles,"Viewing as org admin, looking at the query to return the results for the `/api/v2/roles/` list:

before:

```sql
SELECT ""main_rbac_roles"".""id"", 
       ""main_rbac_roles"".""role_field"", 
       ""main_rbac_roles"".""singleton_name"", 
       ""main_rbac_roles"".""implicit_parents"", 
       ""main_rbac_roles"".""content_type_id"", 
       ""main_rbac_roles"".""object_id"" 
FROM   ""main_rbac_roles"" 
WHERE  ( main_rbac_roles.id IN (SELECT DISTINCT visible_roles_t2.ancestor_id 
                                FROM 
         main_rbac_role_ancestors AS visible_roles_t1 
         LEFT JOIN main_rbac_role_ancestors AS 
                   visible_roles_t2 
                ON ( visible_roles_t1.descendent_id = 
                     visible_roles_t2.descendent_id ) 
                                WHERE  visible_roles_t1.ancestor_id IN ( 4, 206 
                                       )) ) 
LIMIT  25 
```

After

```sql
SELECT ""main_rbac_roles"".""id"", 
       ""main_rbac_roles"".""role_field"", 
       ""main_rbac_roles"".""singleton_name"", 
       ""main_rbac_roles"".""implicit_parents"", 
       ""main_rbac_roles"".""content_type_id"", 
       ""main_rbac_roles"".""object_id"" 
FROM   ""main_rbac_roles"" 
WHERE  ""main_rbac_roles"".""id"" IN (SELECT DISTINCT V0.""ancestor_id"" AS Col1 
                                  FROM   ""main_rbac_role_ancestors"" V0 
                                  WHERE  V0.""descendent_id"" IN 
                                         (SELECT U0.""descendent_id"" AS Col1 
                                          FROM   ""main_rbac_role_ancestors"" U0 
                                          WHERE  U0.""ancestor_id"" IN ( 4, 206 )) 
                                 ) 
LIMIT  25 
```

The org admin in this case has role 4, which is to admin the org, and role 206, which is their personal user role.

We do ""lose"" something here, although slight. IIRC, it's valid in Django it's valid to do `select_related` and then filter by the result of the extra field. The SQL in this method was doing one-level-more than this because the LEFT JOIN was doing something extremely non-obvious, in such a way that it could be put in terms of simple columns, which could be used in a `select_related`. Because of that, the JOIN is replaced with a special WHERE.

Keep in mind, we're still outright _listing_ the roles that the user has, which has scaling problems on the face of it. I'm just seeking to change as little as possible.

My reason for doing this is because I feel confident that using `visible_roles` inside of other queryset is hiding some hidden server errors, which was first surfaced by the test failure we fixed in my last PR."
9630,ansible,awx,31,closed,511,0,https://api.github.com/repos/ansible/awx/issues/511/comments,https://github.com/ansible/awx/pull/511,[],raise error for invalid type lookup,"Just some error handling and getting test coverage where we didn't have it before.

I had hit this issue within the churn of development.

```
awx_1        | 2017-10-26 14:40:50,677 ERROR    django.request Internal Server Error: /api/v1/credentials/
awx_1        | Traceback (most recent call last):
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 132, in get_response
awx_1        |     response = wrapped_callback(request, *callback_args, **callback_kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 145, in inner
awx_1        |     return func(*args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
awx_1        |     return view_func(*args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 71, in view
awx_1        |     return self.dispatch(request, *args, **kwargs)
awx_1        |   File ""./awx/api/generics.py"", line 246, in dispatch
awx_1        |     return super(APIView, self).dispatch(request, *args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 466, in dispatch
awx_1        |     response = self.handle_exception(exc)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 463, in dispatch
awx_1        |     response = handler(request, *args, **kwargs)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 477, in options
awx_1        |     data = self.metadata_class().determine_metadata(request, self)
awx_1        |   File ""./awx/api/metadata.py"", line 189, in determine_metadata
awx_1        |     metadata = super(Metadata, self).determine_metadata(request, view)
awx_1        |   File ""/venv/awx/lib/python2.7/site-packages/rest_framework/metadata.py"", line 69, in determine_metadata
awx_1        |     actions = self.determine_actions(request, view)
awx_1        |   File ""./awx/api/metadata.py"", line 157, in determine_actions
awx_1        |     meta['choices'] = serializer.get_type_choices()
awx_1        |   File ""./awx/api/serializers.py"", line 278, in get_type_choices
awx_1        |     name = type_name_map.get(t, force_text(get_model_for_type(t)._meta.verbose_name).title())
awx_1        | AttributeError: 'NoneType' object has no attribute '_meta'
```

Exactly what value was passed in for type was never deduced, but by raising this error, we will surface up those errors before it moves on and produces secondary errors like that seen above."
9652,ansible,awx,32,closed,484,2,https://api.github.com/repos/ansible/awx/issues/484/comments,https://github.com/ansible/awx/issues/484,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_info"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_info"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWw2ODcxNzg4NTQ="", ""id"": 687178854}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","""%"" in credential password causes Python parsing exception","##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - UI

##### SUMMARY
When using credentials (specifically tested with Cloudforms credentials), a password with a string interpolation special character (""%"") causes the parser to raise an exception. This can be fixed by ""escaping"" the character in the password with ""%%"". So, a password that's ""hello%world"" could be input as ""hello%%world"" and it will work (no exception and successful password string). 

##### ENVIRONMENT
* AWX version: ansible-tower 3.1.5 (1.el7)
* AWX install method: ansible-tower-setup-3.1.5.tar.gz + install.sh
* Ansible version:  2.3.2.0 (2.el7)
* Operating System: Red Hat Enterprise Linux Server release 7.4 (Maipo)
* Web Browser: Chrome 61.0.3163.100 (Windows 10)

##### STEPS TO REPRODUCE

Add a new Cloudforms credential with a password containing a ""%"" symbol. Use that credential in a dynamic inventory source (also to Cloudforms). 

##### EXPECTED RESULTS

Password is accepted and sent as seen in the text box input. 

##### ACTUAL RESULTS

Inventory sync failed because of a string interpolation failure (parsing the password). 

##### ADDITIONAL INFORMATION

Exception log:

```
  1.339 INFO     Updating inventory 3: Cloudforms Dynamic
    1.358 INFO     Reading executable JSON source: /var/lib/awx/venv/tower/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py
    1.474 ERROR    Failed to load JSON from: 
Traceback (most recent call last):
  File ""/usr/bin/tower-manage"", line 9, in <module>
    load_entry_point('ansible-tower==3.1.5', 'console_scripts', 'tower-manage')()
  File ""/lib/python2.7/site-packages/awx/__init__.py"", line 105, in manage
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/django/core/management/base.py"", line 661, in handle
    return self.handle_noargs(**options)
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 1290, in handle_noargs
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 503, in load_inventory_source
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 392, in load
  File ""/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 380, in command_to_json
RuntimeError: ['/var/lib/awx/venv/tower/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py', '--list'] failed (rc=1) with output: Traceback (most recent call last):
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py"", line 464, in <module>
    CloudFormsInventory()
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py"", line 51, in __init__
    self.read_settings()
  File ""/var/lib/awx/venv/tower/lib/python2.7/site-packages/awx/plugins/inventory/cloudforms.py"", line 140, in read_settings
    self.cloudforms_pw = config.get('cloudforms', 'password')
  File ""/usr/lib64/python2.7/ConfigParser.py"", line 623, in get
    return self._interpolate(section, option, value, d)
  File ""/usr/lib64/python2.7/ConfigParser.py"", line 691, in _interpolate
    self._interpolate_some(option, L, rawval, section, vars, 1)
  File ""/usr/lib64/python2.7/ConfigParser.py"", line 732, in _interpolate_some
    ""'%%' must be followed by '%%' or '(', found: %r"" % (rest,))
ConfigParser.InterpolationSyntaxError: '%' must be followed by '%' or '(', found: '%7K'
```
"
9672,ansible,awx,32,closed,464,0,https://api.github.com/repos/ansible/awx/issues/464/comments,https://github.com/ansible/awx/pull/464,[],fix bug where JT admins could not edit spec,"Connect #388

### General Design

We have a number of views that apply to an object, but is not the edit view for that object.

This gets tremendously confusing when you get into the permissions check, and we have had these flags like `is_job_start`, which would tell the permission class ""oh, I should check start permission"".

I wanted to generalize this a little bit, so that editing the survey spec is still kind of congruent with these special-actions of launching, canceling, etc.

Requesting review from @jangsutsr because it'll have tie-ins to copy permission checking.

### Test exception message

I added extra code to conftest, in order to change this type of message:

```
 (awx) [root@awx awx_devel]# py.test awx/main/tests/functional/api/test_survey_spec.py::test_survey_edit_access
 ============================================================================= test session starts =============================================================================
 platform linux2 -- Python 2.7.5, pytest-2.9.2, py-1.4.34, pluggy-0.3.1
 Django settings: awx.settings.development (from ini file)
 rootdir: /awx_devel, inifile: pytest.ini
 plugins: pythonpath-0.7.1, mock-1.6.3, django-3.1.2, cov-2.5.1
 collected 22 items 

 awx/main/tests/functional/api/test_survey_spec.py F..

 ================================================================================== FAILURES ===================================================================================
 ___________________________________________________________________ test_survey_edit_access[admin_role-200] ___________________________________________________________________
 Traceback (most recent call last):
   File ""/awx_devel/awx/main/tests/functional/api/test_survey_spec.py"", line 50, in test_survey_edit_access
     user=rando, expect=expected_status_code)
   File ""/awx_devel/awx/main/tests/functional/conftest.py"", line 545, in rf
     assert response.status_code == expect
 AssertionError: assert 400 == 200
  +  where 400 = 400
  +    where 400 = <rest_framework.response.Response object at 0x7680d10>.status_code
 ---------------------------------------------------------------------------- Captured stdout call -----------------------------------------------------------------------------
 {'error': <django.utils.functional.__proxy__ object at 0x7684e50>}
 ===================================================================== 1 failed, 2 passed in 1.35 seconds ======================================================================
```

to have the actual error message, see that `django.utils.functional.__proxy__` changed to an error

```
 (awx) [root@awx awx_devel]# py.test awx/main/tests/functional/api/test_survey_spec.py::test_survey_edit_access
 ============================================================================= test session starts =============================================================================
 platform linux2 -- Python 2.7.5, pytest-2.9.2, py-1.4.34, pluggy-0.3.1
 Django settings: awx.settings.development (from ini file)
 rootdir: /awx_devel, inifile: pytest.ini
 plugins: pythonpath-0.7.1, mock-1.6.3, django-3.1.2, cov-2.5.1
 collected 22 items 

 awx/main/tests/functional/api/test_survey_spec.py F..

 ================================================================================== FAILURES ===================================================================================
 ___________________________________________________________________ test_survey_edit_access[admin_role-200] ___________________________________________________________________
 Traceback (most recent call last):
   File ""/awx_devel/awx/main/tests/functional/api/test_survey_spec.py"", line 50, in test_survey_edit_access
     user=rando, expect=expected_status_code)
   File ""/awx_devel/awx/main/tests/functional/conftest.py"", line 544, in rf
     assert response.status_code == expect
 AssertionError: assert 400 == 200
  +  where 400 = 400
  +    where 400 = <rest_framework.response.Response object at 0x731fd10>.status_code
 ---------------------------------------------------------------------------- Captured stdout call -----------------------------------------------------------------------------
 {'error': ""'name' missing from survey spec.""}
 ===================================================================== 1 failed, 2 passed in 1.37 seconds ======================================================================
```"
9805,ansible,awx,33,closed,293,0,https://api.github.com/repos/ansible/awx/issues/293/comments,https://github.com/ansible/awx/pull/293,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Fix link,"##### SUMMARY
Update link url with the new documentacion url for django-auth-ldap

Fixes #285 

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
<!--- Name of the module/plugin/module/task -->
 - API

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
awx: 1.0.0.547
```


##### ADDITIONAL INFORMATION
<!---
Include additional information to help people understand the change here.
For bugs that don't have a linked bug report, a step-by-step reproduction
of the problem is helpful.
  -->
Current link is broken.
<!--- Paste verbatim command output below, e.g. before and after your change -->"
9811,ansible,awx,33,closed,285,1,https://api.github.com/repos/ansible/awx/issues/285/comments,https://github.com/ansible/awx/issues/285,"[{""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""state:needs_triage"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_triage"", ""color"": ""A0522D"", ""node_id"": ""MDU6TGFiZWw2ODcxNzI4NTg="", ""id"": 687172858}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",LDAP Group Type documentation link broken,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - UI

##### SUMMARY
In the helptext for the LDAP Group Type documentation (Configuration -> Authentication -> Sub Category = LDAP), the following text is shown.

> #### LDAP Group Type
> The group type may need to be changed based on the type of the LDAP server. Values are listed at: http://pythonhosted.org/django-auth-ldap/groups.html#types-of-groups

However, this link is broken. The new path for the best-matching documentation I could find is

> http://django-auth-ldap.readthedocs.io/en/latest/groups.html

##### ENVIRONMENT
* AWX version: 1.0.0.521 (self-built)
* Ansible version:  2.3.1.0
* Operating System: CentOS 7
* Web Browser: Firefox

##### STEPS TO REPRODUCE

At the Web UI, navigate to Configuration -> Authentication -> Sub Category = LDAP, then hover over the `?` to the right of `LDAP GROUP TYPE`. Try to visit the given link, and find that it gives a 404 error.

##### EXPECTED RESULTS

The link should yield actual documentation of the Django LDAP group types.

##### ACTUAL RESULTS

Broken link.
"
9840,ansible,awx,34,closed,251,1,https://api.github.com/repos/ansible/awx/issues/251/comments,https://github.com/ansible/awx/issues/251,[],what is pkg_resources.DistributionNotFound error ??,"I just want to only run awx's django application, so
downloaded awx-repo(through git clone~) and try to run manage.py in awx directory

$ cd awx
$ python manage.py runserver

but, I found this error

D:\dev\AWX_0920\awx>python manage.py runserver
Traceback (most recent call last):
  File ""manage.py"", line 7, in <module>
    from awx import manage
  File ""D:\dev\AWX_0920\awx\awx\__init__.py"", line 10, in <module>
    __version__ = get_distribution('awx').version
  File ""C:\Python27\lib\site-packages\pkg_resources\__init__.py"", line 557, in get_distribution
    dist = get_provider(dist)
  File ""C:\Python27\lib\site-packages\pkg_resources\__init__.py"", line 431, in get_provider
    return working_set.find(moduleOrReq) or require(str(moduleOrReq))[0]
  File ""C:\Python27\lib\site-packages\pkg_resources\__init__.py"", line 967, in require
    needed = self.resolve(parse_requirements(requirements))
  File ""C:\Python27\lib\site-packages\pkg_resources\__init__.py"", line 853, in resolve
    raise DistributionNotFound(req, requirers)
pkg_resources.DistributionNotFound: The 'awx' distribution was not found and is required by the application


Is there anything need to run manage.py??
what is different between only just running django's manage.py and installing AWX's prerequsites?

I want to know how to resolve pkg_resources.DistributionNotFound error
"
9868,ansible,awx,34,closed,223,94,https://api.github.com/repos/ansible/awx/issues/223/comments,https://github.com/ansible/awx/issues/223,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""component:ui"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:ui"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyOTU="", ""id"": 687169295}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_docs"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_docs"", ""color"": ""207de5"", ""node_id"": ""MDU6TGFiZWw2OTA2MzYxMzc="", ""id"": 690636137}, {""default"": false, ""name"": ""type:enhancement"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:enhancement"", ""color"": ""84b6eb"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NTA="", ""id"": 607283750}]",Support vault encrypted secrets in the inventory source,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME

 - API

##### SUMMARY

AWX inventory source can't handle Vault encrypted secrets for the simple ini-like inventory (""Sourced from the project"" in the UI). 

For example, I have an ini-like inventory and a few variables in the `group_vars` that are encrypted with Ansible Vault (like in [this example repo](https://github.com/dzeban/example-ansible-vault-inventory)). When I add this inventory source and try to sync it I get the following error:

```
2017-09-20 11:45:09,104 INFO     awx.main.commands.inventory_import Updating inventory 2: Production
2017-09-20 11:45:09,114 DEBUG    awx.main.commands.inventory_import Using backported ansible-inventory module: /usr/lib/python2.7/site-packages/awx/plugins/ansible_inventory/backport.py
2017-09-20 11:45:09,114 INFO     awx.main.commands.inventory_import Reading Ansible inventory source: /var/lib/awx/projects/_6__myproj/inventory
2017-09-20 11:45:09,114 INFO     awx.main.commands.inventory_import Command: ['/usr/lib/python2.7/site-packages/awx/plugins/ansible_inventory/backport.py', '-i', '/var/lib/awx/projects/_6__myproj/inventory']
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==1.0.0.487', 'console_scripts', 'awx-manage')()
  File ""/usr/lib/python2.7/site-packages/awx/__init__.py"", line 107, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 661, in handle
    return self.handle_noargs(**options)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 956, in handle_noargs
    self.is_custom)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 211, in load_inventory_source
    is_custom=is_custom).load()
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 180, in load
    data = self.command_to_json(base_args + ['--list'])
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 163, in command_to_json
    self.method, proc.returncode, stdout, stderr))
RuntimeError: ansible-inventory backport failed (rc=1) with stdout:

stderr:
ERROR! Decryption failed on /var/lib/awx/projects/_6__myproj/inventory/group_vars/aws/credentials.yml
```

You can't set Vault credential for the inventory source - trying to add it via UI shows ""NO CREDENTIALS HAVE BEEN CREATED"" window. Even if you set the Vault credential by typing its name in the input field it's still not used - I get the same error.

##### ENVIRONMENT

* AWX version: 1.0.0.487
* Ansible version:  2.3.2.0
* Operating System: Debian 8
* Web Browser: Google Chrome 61

##### ADDITIONAL INFORMATION

I'll gladly help with fixing this if somebody would give me some hints. I've tried to hack the patch by myself but I can't figure out how to pass vault credential from `RunInventoryUpdate` task to the `inventory_import.py` management command."
9873,ansible,awx,34,closed,218,0,https://api.github.com/repos/ansible/awx/issues/218/comments,https://github.com/ansible/awx/pull/218,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Fix typo in AWXDjangoStrategy constructor,"Signed-off-by: Matvey Kruglov <kubuzzzz@gmail.com>

##### SUMMARY

Fix typo in AWXDjangoStrategy, which leads to broken social logins. Request object doesn't pass to the strategy, so redirect_uri for google auth2 (and other authentication methods)  was created without hostname in it.

##### ISSUE TYPE
 - Bugfix Pull Request

##### COMPONENT NAME
- API

##### AWX VERSION
<!--- Paste verbatim output from `make VERSION` between quotes below -->
```
1.0.0.504
```
"
9877,ansible,awx,34,closed,214,3,https://api.github.com/repos/ansible/awx/issues/214/comments,https://github.com/ansible/awx/issues/214,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:medium"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:medium"", ""color"": ""fad8c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTU2NTY="", ""id"": 686255656}, {""default"": false, ""name"": ""state:needs_info"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/state:needs_info"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWw2ODcxNzg4NTQ="", ""id"": 687178854}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]","SAML XML metadata endpoint produces ""sp_acs_url_invalid"" error no matter which value is provided","##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bug Report
 
##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - API

##### SUMMARY
SAML metadata produces error although the ACS address is created automatically.

##### ENVIRONMENT
<!--
* AWX version: 1.0.0.
* Ansible version:  2.3.1.0
* Operating System: OpenShift 3.4
* Web Browser: Chrome, Firefox, Internet Explorer
-->

##### STEPS TO REPRODUCE
Configure AWX with a SAML provider. It does not matter which values to provide, the metadata endpoint still reports a `Invalid dict settings: sp_acs_url_invalid`

##### EXPECTED RESULTS

The correct metadata xml document.

##### ACTUAL RESULTS
`Invalid dict settings: sp_acs_url_invalid`
##### ADDITIONAL INFORMATION

I cannot bring AWX to generate the needed metadata, browsing to the metadata endpoint provides the following: Invalid dict settings: sp_acs_url_invalid

Log from the awx-web container:
```
2017-09-15 20:42:51,465 ERROR    awx.sso.views unable to generate SAML metadata
--
  | Traceback (most recent call last):
  | File ""/usr/lib/python2.7/site-packages/awx/sso/views.py"", line 90, in get
  | metadata, errors = saml_backend.generate_metadata_xml()
  | File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social/backends/saml.py"", line 238, in generate_metadata_xml
  | saml_settings = OneLogin_Saml2_Settings(config)
  | File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/onelogin/saml2/settings.py"", line 104, in __init__
  | ','.join(self.__errors)
  | OneLogin_Saml2_Error: Invalid dict settings: sp_acs_url_invalid

2017-09-15 20:47:01,511 ERROR    awx.sso.views unable to generate SAML metadata
--
  | Traceback (most recent call last):
  | File ""/usr/lib/python2.7/site-packages/awx/sso/views.py"", line 90, in get
  | metadata, errors = saml_backend.generate_metadata_xml()
  | File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/social/backends/saml.py"", line 238, in generate_metadata_xml
  | saml_settings = OneLogin_Saml2_Settings(config)
  | File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/onelogin/saml2/settings.py"", line 104, in __init__
  | ','.join(self.__errors)
  | OneLogin_Saml2_Error: Invalid dict settings: sp_acs_url_invalid
```
This error is risen because of this (/var/lib/awx/venv/awx/lib/python2.7/site-packages/social/backends/saml.py):
```
    def generate_metadata_xml(self):
        """"""
        Helper method that can be used from your web app to generate the XML
        metadata required to link your web app as a Service Provider with
        each IdP you wish to use.

        Returns (metadata XML string, list of errors)

        Example usage (Django):
            from social.apps.django_app.utils import load_strategy, \
                                                     load_backend
            def saml_metadata_view(request):
                complete_url = reverse('social:complete', args=(""saml"", ))
                saml_backend = load_backend(load_strategy(request), ""saml"",
                                            complete_url)
                metadata, errors = saml_backend.generate_metadata_xml()
                if not errors:
                    return HttpResponse(content=metadata,
                                        content_type='text/xml')
                return HttpResponseServerError(content=', '.join(errors))
        """"""
        # python-saml requires us to specify something here even
        # though it's not used
        idp = DummySAMLIdentityProvider()
        config = self.generate_saml_config(idp)
        saml_settings = OneLogin_Saml2_Settings(config) << This one throws an exception
        metadata = saml_settings.get_sp_metadata()
        errors = saml_settings.validate_metadata(metadata)
        return metadata, errors
```
The dummy class (/var/lib/awx/venv/awx/lib/python2.7/site-packages/social/backends/saml.py):
```
class DummySAMLIdentityProvider(SAMLIdentityProvider):
    """"""
    A placeholder IdP used when we must specify something, e.g. when
    generating SP metadata.

    If OneLogin_Saml2_Auth is modified to not always require IdP
    config, this can be removed.
    """"""
    def __init__(self):
        super(DummySAMLIdentityProvider, self).__init__(
            'dummy',
            entity_id='https://dummy.none/saml2',
            url='https://dummy.none/SSO',
            x509cert=''
        )
```
Maybe the Dummy class settings are messed up. I am not sure if this error occurs because I messed up the configuration, though (I am not proficient in python). Please take a look at it:

![30502839-3a6285ec-9a68-11e7-990f-4cef2987e8b3](https://user-images.githubusercontent.com/28100685/30605805-cf58fca8-9d6f-11e7-9bc5-1c4c2551f8b0.png)

Best regards and have a nice evening (from germany)
"
9930,ansible,awx,34,closed,157,6,https://api.github.com/repos/ansible/awx/issues/157/comments,https://github.com/ansible/awx/issues/157,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:high"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:high"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTUzODc="", ""id"": 686255387}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Normal users unable to view/edit/use Job Template Surveys,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API
 - UI

##### SUMMARY
When attempting to launch a job using a template containing a survey, normal users receive a modal with no form controls and are unable to launch.

##### ENVIRONMENT
* AWX version: 1.0.0


##### STEPS TO REPRODUCE
Create a new template with a survey for required variables. Attempt to launch the job as a normal user.

##### EXPECTED RESULTS
User should receive a the survey form to fill out before launching the job.

##### ACTUAL RESULTS
The survey modal appears but there is no form content. Web server reports a 500 error.

##### ADDITIONAL INFORMATION

```
2017-09-13 14:42:11,488 ERROR    django.request Internal Server Error: /api/v2/job_templates/8/survey_spec/
Traceback (most recent call last):
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/utils/decorators.py"", line 145, in inner
    return func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/views/generic/base.py"", line 71, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/awx/api/generics.py"", line 246, in dispatch
    return super(APIView, self).dispatch(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 466, in dispatch
    response = self.handle_exception(exc)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 454, in dispatch
    self.initial(request, *args, **kwargs)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 377, in initial
    self.check_permissions(request)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/rest_framework/views.py"", line 318, in check_permissions
    if not permission.has_permission(request, self):
  File ""/usr/lib/python2.7/site-packages/awx/api/permissions.py"", line 124, in has_permission
    response = self.check_permissions(request, view, obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/permissions.py"", line 113, in check_permissions
    result = check_method and check_method(request, view, obj)
  File ""/usr/lib/python2.7/site-packages/awx/api/permissions.py"", line 37, in check_get_permissions
    parent_obj = view.get_parent_object()
AttributeError: 'JobTemplateSurveySpec' object has no attribute 'get_parent_object'
[pid: 29|app: 0|req: 14/62] 172.17.0.1 () {48 vars in 2097 bytes} [Wed Sep 13 14:42:11 2017] GET /api/v2/job_templates/8/survey_spec/ => generated 41 bytes in 47 msecs (HTTP/1.1 500) 4 headers in 157 bytes (1 switches on core 0)
```
"
9948,ansible,awx,35,closed,138,44,https://api.github.com/repos/ansible/awx/issues/138/comments,https://github.com/ansible/awx/issues/138,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}, {""default"": false, ""name"": ""priority:high"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/priority:high"", ""color"": ""f7c6c7"", ""node_id"": ""MDU6TGFiZWw2ODYyNTUzODc="", ""id"": 686255387}, {""default"": false, ""name"": ""type:bug"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/type:bug"", ""color"": ""F79F81"", ""node_id"": ""MDU6TGFiZWw2MDcyODM3NDg="", ""id"": 607283748}]",Migration fails and leaves AWX install in a bad state,"##### ISSUE TYPE
<!--- Pick one below and delete the rest: -->
 - Bug Report

##### COMPONENT NAME
<!-- Pick the area of AWX for this issue, you can have multiple, delete the rest: -->
 - Installer

##### SUMMARY
<!-- Briefly describe the problem. -->
AWX install seemed to complete without error, however it appears to be hung in the migration phase. The web interface shows AWX is upgrading and tailing the log files shows a traceback error repeatedly.

##### ENVIRONMENT
<!--
* AWX version: latest
* Ansible version:  2.3.00
* Operating System: RHEL 7 
* Web Browser: Chrome
-->

##### STEPS TO REPRODUCE

<!-- For bugs, please show exactly how to reproduce the problem. For new
features, show how the feature would be used.  -->

Install AWX per guide

##### EXPECTED RESULTS

<!-- For bug reports, what did you expect to happen when running the steps
above? -->

##### ACTUAL RESULTS

<!-- For bug reports, what actually happened? -->

##### ADDITIONAL INFORMATION

<!-- Include any links to sosreport, database dumps, screenshots or other
information. -->

here is a snippet from the error that keeps repeating in the log file

django.db.utils.ProgrammingError: relation ""main_schedule"" does not exist
LINE 1: ...le"".""next_run"", ""main_schedule"".""extra_data"" FROM ""main_sche...
"
9949,ansible,awx,35,closed,137,2,https://api.github.com/repos/ansible/awx/issues/137/comments,https://github.com/ansible/awx/issues/137,"[{""default"": false, ""name"": ""component:api"", ""url"": ""https://api.github.com/repos/ansible/awx/labels/component:api"", ""color"": ""fbca04"", ""node_id"": ""MDU6TGFiZWw2ODcxNjkyNDY="", ""id"": 687169246}]",Error with inline vault password,"##### ISSUE TYPE
 - Bug Report

##### COMPONENT NAME
 - API

##### SUMMARY
When I try to setup and sync an inventory source (type Sourced from a project) which includes a group variable with an inline vault encrypted value, sync fails.

##### ENVIRONMENT
* AWX version: 1.0.0.338
* Ansible version:  2.3.1.0
* Operating System: CentOS 7.3

##### STEPS TO REPRODUCE
1. Create an empty inventory
2. Move to ""Sources"" tab and setup a reference to an existing project
3. Start sync

##### EXPECTED RESULTS
Inventory is properly synced.

##### ACTUAL RESULTS
Here is the output:
```
2017-09-12 15:55:22,949 INFO     awx.main.commands.inventory_import Updating inventory 2: Collaudo
2017-09-12 15:55:22,966 INFO     awx.main.commands.inventory_import Reading Ansible inventory source: /var/lib/awx/projects/_6__ansible/inventory/collaudo/hosts
Traceback (most recent call last):
  File ""/usr/bin/awx-manage"", line 9, in <module>
    load_entry_point('awx==1.0.0.338', 'console_scripts', 'awx-manage')()
  File ""/usr/lib/python2.7/site-packages/awx/__init__.py"", line 107, in manage
    execute_from_command_line(sys.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/__init__.py"", line 346, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/var/lib/awx/venv/awx/lib/python2.7/site-packages/django/core/management/base.py"", line 661, in handle
    return self.handle_noargs(**options)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 955, in handle_noargs
    self.is_custom)
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 210, in load_inventory_source
    is_custom=is_custom).load()
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 179, in load
    data = self.command_to_json(base_args + ['--list'])
  File ""/usr/lib/python2.7/site-packages/awx/main/management/commands/inventory_import.py"", line 163, in command_to_json
    self.method, proc.returncode, stdout, stderr))
RuntimeError: ansible-inventory backport failed (rc=4) with stdout:

stderr:
ERROR! Syntax Error while loading YAML.


The error appears to have been in '/var/lib/awx/projects/_6__ansible/inventory/collaudo/group_vars/buildbot': line 9, column 17, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

nexus_user: admin
nexus_password: !vault |
                ^ here
```
Are inline secrets supported or should I use a vault file instead?

Regards,
Federico Chiacchiaretta"
10081,django-oscar,django-oscar,2,closed,3065,2,https://api.github.com/repos/django-oscar/django-oscar/issues/3065/comments,https://github.com/django-oscar/django-oscar/issues/3065,[],How to apply discount to basket line?,"Found a bug? Please fill out the sections below.

### Issue Summary

I'm new to django-oscar and trying to understand how things working (couldn't do that with the Docs)
i tried this:
  line.discount(discount_value=20, affected_quantity=1)
  line.save()

and when i try to print basket.total_excl_tax_excl_discounts or basket.total_excl_tax i always get the same result (which is the total of basket no matter discounts i added)

what am i missing ??

* Python version: 3.6
* Django version: 2.1.2
* Oscar version: 1.6.4
"
10091,django-oscar,django-oscar,2,closed,3048,1,https://api.github.com/repos/django-oscar/django-oscar/issues/3048/comments,https://github.com/django-oscar/django-oscar/issues/3048,[],LookupError: No installed app with label 'promotions'.,"Found a bug? Please fill out the sections below.

### Issue Summary

Just installed django-oscar==1.6.7 and setup the project by following https://django-oscar.readthedocs.io/en/latest/internals/getting_started.html
When I run `migrate`, it shows the following error:
```
  File ""/Users/jlin/projects/cloudcalc/cloudcalc/urls.py"", line 18, in <module>
    from oscar.app import application
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/app.py"", line 13, in <module>
    class Shop(Application):
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/app.py"", line 20, in Shop
    promotions_app = get_class('promotions.app', 'application')
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/core/loading.py"", line 59, in get_class
    return get_classes(module_label, [classname], module_prefix)[0]
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/core/loading.py"", line 69, in get_classes
    return class_loader(module_label, classnames, module_prefix)
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/core/loading.py"", line 127, in default_class_loader
    oscar_module = _import_module(oscar_module_label, classnames)
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/core/loading.py"", line 182, in _import_module
    return __import__(module_label, fromlist=classnames)
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/apps/promotions/app.py"", line 7, in <module>
    KeywordPromotion = get_model('promotions', 'KeywordPromotion')
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/oscar/core/loading.py"", line 296, in get_model
    return apps.get_model(app_label, model_name)
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/django/apps/registry.py"", line 202, in get_model
    app_config = self.get_app_config(app_label)
  File ""/Users/jlin/virtualenvs/cloudcalc-Y91D8hUo/lib/python3.6/site-packages/django/apps/registry.py"", line 159, in get_app_config
    raise LookupError(message)
LookupError: No installed app with label 'promotions'.
```

### Steps to Reproduce

1. install django-oscar==1.6.7
2. python manage.py migrate
"
10094,django-oscar,django-oscar,2,closed,3045,2,https://api.github.com/repos/django-oscar/django-oscar/issues/3045/comments,https://github.com/django-oscar/django-oscar/issues/3045,[],Model.from_db_value() signature change in Django 2.0,"Hello.
I tried to apply django-oscar to my project.
But I found the following warning messages:  “RemovedInDjango30Warning: : Remove the context parameter from NullCharField.from_db_value() and UppercaseCharField.from_db_value(). Support for it will be removed in Django 3.0.
   RemovedInDjango30Warning”

Seeing warning messages every time I run tests are by no means good, so I wonder if you are open to contributions regarding fixing this. If so, I will be glad to help.

### Reproduce

1. I think that is the cause of the error is the  `UppercaseCharField` used in `oscar/models/fields/__init__.py` of from_db_value function.
And also `NullCharField` is the cause of the error used in `oscar/models/fields/__init__.py` of from_db_value function.

2.
```
class NullCharField(CharField):
    """"""
    CharField that stores '' as None and returns None as ''
    Useful when using unique=True and forms. Implies null==blank==True.

    Django's CharField stores '' as None, but does not return None as ''.
    """"""
    description = ""CharField that stores '' as None and returns None as ''""

    def __init__(self, *args, **kwargs):
        if not kwargs.get('null', True) or not kwargs.get('blank', True):
            raise ImproperlyConfigured(
                ""NullCharField implies null==blank==True"")
        kwargs['null'] = kwargs['blank'] = True
        super().__init__(*args, **kwargs)

    def contribute_to_class(self, cls, name, **kwargs):
        super().contribute_to_class(cls, name, **kwargs)
        setattr(cls, self.name, Creator(self))

    def from_db_value(self, value, expression, connection, context):
        value = self.to_python(value)
        # If the value was stored as null, return empty string instead
        return value if value is not None else ''
```
```
class UppercaseCharField(CharField):
    """"""
    A simple subclass of ``django.db.models.fields.CharField`` that
    restricts all text to be uppercase.

    Defined with the with_metaclass helper so that to_python is called
    https://docs.djangoproject.com/en/1.6/howto/custom-model-fields/#the-subfieldbase-metaclass  # NOQA
    """"""

    def contribute_to_class(self, cls, name, **kwargs):
        super().contribute_to_class(
            cls, name, **kwargs)
        setattr(cls, self.name, Creator(self))

    def from_db_value(self, value, expression, connection, context):
        return self.to_python(value)

    def to_python(self, value):
        val = super().to_python(value)
        if isinstance(val, str):
            return val.upper()
        else:
            return val
```


### Technical details

Python   3.7.3
Django   2.2
pytest   4.4.0
django-oscar   2.0b1 (edited)"
10095,django-oscar,django-oscar,2,closed,3044,1,https://api.github.com/repos/django-oscar/django-oscar/issues/3044/comments,https://github.com/django-oscar/django-oscar/issues/3044,[],"Could not resolve URL for hyperlinked relationship using view name ""profile-detail"". You may have failed to include the related model in your API, or incorrectly configured the `lookup_field` attribute on this field. the above error is  triggered when i try to access oscar basket/add-product/ api ","Found a bug? Please fill out the sections below.

### Issue Summary

A summary of the issue.

### Steps to Reproduce

It's essential that you provide enough information for someone else to replicate the problem you're seeing. Simply describing something that's broken on your current project is not enough!

1. (for example) Form the catalogue app with `./manage.py oscar_fork_app catalogue myproject/`
2. Edit models.py as follows...
3. ...

Any other relevant information. For example, why do you consider this a bug and what did you expect to happen instead?

### Technical details

* Python version: Run `python --version`.
* Django version: Look in your requirements.txt, or run `pip show django | grep Version`.
* Oscar version: Look in your requirements.txt, or run `pip show django-oscar | grep Version`.
"
10098,django-oscar,django-oscar,2,closed,3040,1,https://api.github.com/repos/django-oscar/django-oscar/issues/3040/comments,https://github.com/django-oscar/django-oscar/issues/3040,[],The basket automatically empties on redeeming an expired voucher.,"### Issue Summary

If a Voucher, which is applied to an item in the cart, expires while the item stays in the cart or during the payment process. When clicked on ""place order"" the basket gets empty automatically with an error saying ""You need to add some items to your basket to checkout"", this happens during the `check_basket_is_not_empty` method.

### Steps to Reproduce

1. Have a voucher that is soon to expire.
2. Pay for the basket with the voucher and (potentially artificially) stop the order creation.
3. Attempt to create the order once the voucher has expired.

### Technical details


-  Python version: Any
-  Django version: Any
-  Oscar version: Using 1.6

"
10099,django-oscar,django-oscar,2,closed,3039,0,https://api.github.com/repos/django-oscar/django-oscar/issues/3039/comments,https://github.com/django-oscar/django-oscar/pull/3039,[],Update django-extensions to 2.1.7,"
This PR updates [django-extensions](https://pypi.org/project/django-extensions) from **2.1.6** to **2.1.7**.



<details>
  <summary>Changelog</summary>
  
  
   ### 2.1.7
   ```
   -----

Changes:
  - New: test, many many more tests :-) thanks everybody
  - New: docs, many documentation updates
  - New: graph_model, add simple theming support and django2018 theme
  - Improvement: ModificationDateTimeField, make modificationfield name modifiable
  - Improvement: graph_model, option to not showrelations labels in the graph
  - Improvement: reset_db, allow to override list of backends for database engines
  - Improvement: reset_db, add psqlextra backend
  - Improvement: runserver_plus, idle support
  - Improvement: generate_secret_key, removed get_random_string in favour of get_random_secret_key
  - Improvement: update_permissions, add create-only and update-only flags
  - Improvement: update_permissions, update changed names of permission to match correct permission name
  - Improvement: syncdata, add --database option
  - Improvement: runscript, allow to override RUNSCRIPT_SCRIPT_DIR
  - Fix: create_command, fix mknod error on macos
  - Fix: runserver_plus, fix in resolving ssl certificate path
  - Fix: sqldiff, fix hstorefield
  - Deprecate: truncate_letters, use Django&#39;s truncatechars
  - Deprecate: passwd, use Django&#39;s changepassword
  - Deprecate: Keyczar encrypted fields, Keyczar is abandonned / deprecated
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-extensions
  - Changelog: https://pyup.io/changelogs/django-extensions/
  - Repo: http://github.com/django-extensions/django-extensions
</details>

"
10120,django-oscar,django-oscar,2,closed,3014,3,https://api.github.com/repos/django-oscar/django-oscar/issues/3014/comments,https://github.com/django-oscar/django-oscar/issues/3014,[],from oscar import get_core_apps doesn't work,"### Issue Summary

importing get_core_apps doesn't work. 
`from oscar import get_core_apps` gives me an error:

> ImportError: cannot import name 'get_core_apps' from 'oscar'


### Steps to Reproduce
I am running Python with a virtualenv and have successfully installed the latest version of `oscar` from the master branch via `install.py`.  I can import successfully several other files, which are mentioned in the installation description, e.g.:
```
from oscar.defaults import *
from oscar import OSCAR_MAIN_TEMPLATE_DIR
```
But `from oscar import get_core_apps` throws an error.

### Technical details

* Python version: 3.7.3
* Django version: 2.2.
* Oscar version: 2.0.dev0

"
10127,django-oscar,django-oscar,2,closed,3004,4,https://api.github.com/repos/django-oscar/django-oscar/issues/3004/comments,https://github.com/django-oscar/django-oscar/issues/3004,[],can i set price by age,"Found a bug? Please fill out the sections below.

### Issue Summary

hi, i request help to solve my problem.

i want set product price by age.

for example, i create movie ticket product, i should get less money for children

django-oscar already provide variant, but it has inventory each other.

i want my product has only one inventory and different price.

is it enable? if it is not enable, i will develop this feature and contribute

thanks."
10142,django-oscar,django-oscar,2,closed,2987,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2987/comments,https://github.com/django-oscar/django-oscar/issues/2987,[],ModuleNotFoundError: No module named 'compressorwidget_tweaks',"I have 
`from oscar import get_core_apps
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',
    'django.contrib.flatpages',
    'compressor'
    'widget_tweaks'
]+get_core_apps()`

but when I run python manage.py migrate I get this error `ModuleNotFoundError: No module named 'compressorwidget_tweaks'` . I am using python3 with django 2.1 and Oscar 1.6"
10168,django-oscar,django-oscar,2,closed,2958,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2958/comments,https://github.com/django-oscar/django-oscar/issues/2958,[],AttributeError: 'AppConfig' object has no attribute 'urls',"Found a bug? Please fill out the sections below.

### Issue Summary

Installed django-oscar sandbox app successfully but getting a small error in **django-oscar/sandbox/urls.py at the line     _url(r'^', include(apps.get_app_config('oscar').urls[0])),_** 

Error Message:AttributeError: 'AppConfig' object has no attribute 'urls'
The 'apps' above is comming from django package:
**_from django.apps import apps_**
and using it in 
 **_url(r'^', include(apps.get_app_config('oscar').urls[0])),_**

I googled it but didn't find the solution. I am following the instuructions available on your official django-oscar website: **https://django-oscar.readthedocs.io/en/releases-1.6/internals/sandbox.html** to make the sandbox app up and running locally.

### Technical details
Django-version 2.1.7
* Python version: 3.5.2
* Django version:2.1.7 
* Oscar version: 1.6.7(django-oscar)
"
10183,django-oscar,django-oscar,3,closed,2943,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2943/comments,https://github.com/django-oscar/django-oscar/issues/2943,[],make sandbox error  (python3) ubuntu machine,"Following the tutorial for Sandbox on Ubuntu, 
`
$ git clone https://github.com/django-oscar/django-oscar.git
$ cd django-oscar
$ virtualenv oscar
$ source ./oscar/bin/activate
(oscar) $ make sandbox
`

gives me an error 

`Command ""python setup.py egg_info"" failed with error code 1 in /tmp/pip-install-                                         rhzjrjd2/psycopg2/
Makefile:19: recipe for target 'install-python' failed
make: *** [install-python] Error 1
`
The sequence of commands before the error:

`
pip install -r requirements.txt
Collecting Werkzeug==0.14.1 (from -r requirements.txt (line 4))
  Downloading https://files.pythonhosted.org/packages/20/c4/12e3e56473e52375aa29                                         c4764e70d1b8f3efa6682bef8d0aae04fe335243/Werkzeug-0.14.1-py2.py3-none-any.whl (3                                         22kB)
    100% |████████████████████████████████| 327kB 3.1MB/s
Collecting django-debug-toolbar==1.11 (from -r requirements.txt (line 5))
  Downloading https://files.pythonhosted.org/packages/01/9a/3db232bd15882d90d3c5                                         3de1f34ce0a522327849593c9198899713267cfe/django_debug_toolbar-1.11-py2.py3-none-                                         any.whl (201kB)
    100% |████████████████████████████████| 204kB 2.1MB/s
Collecting django-extensions==2.1.5 (from -r requirements.txt (line 6))
  Downloading https://files.pythonhosted.org/packages/bf/91/840de20b263525af1585                                         194eb8339a8f6d077f8b9698c80332d28f7a3200/django_extensions-2.1.5-py2.py3-none-an                                         y.whl (218kB)
    100% |████████████████████████████████| 225kB 3.2MB/s
Collecting psycopg2<2.8,>=2.7 (from -r requirements.txt (line 7))
  Downloading https://files.pythonhosted.org/packages/63/54/c039eb0f46f9a9406b59                                         a638415c2012ad7be9b4b97bfddb1f48c280df3a/psycopg2-2.7.7.tar.gz (427kB)
    100% |████████████████████████████████| 430kB 3.5MB/s
    Complete output from command python setup.py egg_info:
    running egg_info
    creating pip-egg-info/psycopg2.egg-info
    writing pip-egg-info/psycopg2.egg-info/PKG-INFO
    writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.                                         txt
    writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt
    writing manifest file 'pip-egg-info/psycopg2.egg-info/SOURCES.txt'

    Error: pg_config executable not found.

    pg_config is required to build psycopg2 from source.  Please add the directo                                         ry
    containing pg_config to the $PATH or specify the full executable path with t                                         he
    option:

        python setup.py build_ext --pg-config /path/to/pg_config build ...

    or with the pg_config option in 'setup.cfg'.

    If you prefer to avoid building psycopg2 from source, please install the PyP                                         I
    'psycopg2-binary' package instead.

    For further information please check the 'doc/src/install.rst' file (also at
    <http://initd.org/psycopg/docs/install.html>).


 `



"
10187,django-oscar,django-oscar,3,closed,2939,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2939/comments,https://github.com/django-oscar/django-oscar/issues/2939,[],Issue with Python3 Installation. ,"/home/anshu/oscar_project/venv/lib/python3.5/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use ""pip install psycopg2-binary"" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.
  """""")
Traceback (most recent call last):
  File ""sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/anshu/oscar_project/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/home/anshu/oscar_project/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 357, in execute
    django.setup()
  File ""/home/anshu/oscar_project/venv/lib/python3.5/site-packages/django/__init__.py"", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/anshu/oscar_project/venv/lib/python3.5/site-packages/django/apps/registry.py"", line 112, in populate
    app_config.import_models()
  File ""/home/anshu/oscar_project/venv/lib/python3.5/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/anshu/oscar_project/venv/lib/python3.5/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 673, in exec_module
  File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed
  File ""/home/anshu/oscar_project/django-oscar/src/oscar/apps/address/models.py"", line 1, in <module>
    from oscar.apps.address.abstract_models import (
  File ""/home/anshu/oscar_project/django-oscar/src/oscar/apps/address/abstract_models.py"", line 12, in <module>
    from oscar.models.fields import UppercaseCharField
ImportError: No module named 'oscar.models'
Makefile:43: recipe for target 'sandbox_clean' failed
make: *** [sandbox_clean] Error 1"
10198,django-oscar,django-oscar,3,closed,2928,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2928/comments,https://github.com/django-oscar/django-oscar/pull/2928,[],Update django-extensions to 2.1.5,"
This PR updates [django-extensions](https://pypi.org/project/django-extensions) from **2.1.4** to **2.1.5**.



<details>
  <summary>Changelog</summary>
  
  
   ### 2.1.5
   ```
   -----

Changes:
  - New: ipdb, pdb and wdb filters
  - Fix: ForeignKeySearchInput, error with widget render(...) parameters on Django 2.1
  - Fix: pipchecker, unsupported format string passed to NoneType.format error
  - Tests: bunch of new test cases
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-extensions
  - Changelog: https://pyup.io/changelogs/django-extensions/
  - Repo: http://github.com/django-extensions/django-extensions
</details>

"
10209,django-oscar,django-oscar,3,closed,2917,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2917/comments,https://github.com/django-oscar/django-oscar/issues/2917,[],ImportError: cannot import name 'get_core_apps',"### Issue Summary

I making custom payment folow ""django-oscar-paypal"".
I get a error ImportError: cannot import name 'get_core_apps' when runserver
### Steps to Reproduce
1. Add ""from oscar import get_core_apps"" to settings.py
2. Run server
![image](https://user-images.githubusercontent.com/9067918/51452806-c168f500-1d6e-11e9-929d-628895e2e794.png)




### Technical details

* Python version: Python 3.4.3
* Django version:  2.0.10
* Oscar version: 2.0.dev0
"
10213,django-oscar,django-oscar,3,closed,2912,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2912/comments,https://github.com/django-oscar/django-oscar/issues/2912,[],Product Bad Request (400),"### Issue Summary
After install, I going to Dashboard > Catalogue > Products 
Bad Request (400)

### Steps to Reproduce
Product page
![image](https://user-images.githubusercontent.com/9067918/50952632-974c4300-14e3-11e9-839e-52d965a0d6dc.png)

 Error in console:  Invalid URL name dashboard:voucher-set-list
![image](https://user-images.githubusercontent.com/9067918/50952875-530d7280-14e4-11e9-9d97-4e05c6103d32.png)


### Technical details

* Python version: Python 3.7.1
* Django version: 2.1.4
* Oscar version:  2.0.dev0
"
10223,django-oscar,django-oscar,3,closed,2901,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2901/comments,https://github.com/django-oscar/django-oscar/issues/2901,[],Sandbox build workaround for `no such table: main.catalogue_product__old`,"This ticket extends #2898 and specifically addresses users attempting to setup the oscar sandbox. I believe it would be best to note the issue described here in the README/docs until a patched version of Django is released to PyPI.

When attempting to `make` the django-oscar sandbox with the latest sqlite and Django versions (3.26.0 and 2.1.4 for me, respectively), one will likely run into the following exception:

```
django.db.utils.OperationalError: Problem installing fixture '/Users/Mike/website/django-oscar/sandbox/fixtures/child_products.json': Could not load catalogue.ProductCategory(pk=1): no such table: main.catalogue_product__old
```

This is due to the bug noted in #2898 and addressed in this Django PR: https://github.com/django/django/pull/10733

A simple temporary workaround is to use an older sqlite. I switched to 3.19.0 and the build succeeds. The process for doing this is OS/environment specific."
10226,django-oscar,django-oscar,3,closed,2898,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2898/comments,https://github.com/django-oscar/django-oscar/issues/2898,[],`no such table: main.catalogue_product__old` when creating a new product,"Hi,
I've ran into a really strange error which I'm not able to debug.
On a fresh django-oscar installation (tested with 1.6.4 and 2.0-dev) I'm getting this when I add new product via the dashboard:

```
Traceback (most recent call last):
  File ""/usr/local/lib/python3.7/site-packages/django/db/backends/utils.py"", line 85, in _execute
    return self.cursor.execute(sql, params)
  File ""/usr/local/lib/python3.7/site-packages/django/db/backends/sqlite3/base.py"", line 296, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.OperationalError: no such table: main.catalogue_product__old
```
I guess there is some bug in the migrations? I looked into this quite some time and couldn't find the problem.

I prepared a minimal example:

[minimalexample.zip](https://github.com/django-oscar/django-oscar/files/2653845/minimalexample.zip)

In the extracted folder, run the following commands to init the project and get the same error:
```sh
# I tried both the system's pip and virtual envs
pip install django-oscar
python manage.py migrate
# sets up superuser ""admin"" (admin@admin.de) with password ""admin""
python manage.py loaddata data/auth.json
# this triggers the error
python manage.py loaddata data/catalogue.json
```

This bug also appears when creating a new product via the dashboard in both oscar 2.0 and 1.6.4...
Any ideas?"
10228,django-oscar,django-oscar,3,closed,2896,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2896/comments,https://github.com/django-oscar/django-oscar/issues/2896,[],Error if Voucher name matches an existing VoucherSet name,"### Issue Summary

If a VoucherSet is created, then a Voucher is created or edited with the same name the error below will be raised on form validation.  This should return a form validation error saying ""name is already in use"".

```python-traceback
Traceback: 
File ""django/core/handlers/exception.py"" in inner 34. 
    response = get_response(request) 
File ""django/core/handlers/base.py"" in _get_response 126. 
    response = self.process_exception_by_middleware(e, request)
File ""django/core/handlers/base.py"" in _get_response 124. 
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""django/contrib/auth/decorators.py"" in _wrapped_view 21. 
    return view_func(request, *args, **kwargs)
File ""django/views/generic/base.py"" in view 68. 
    return self.dispatch(request, *args, **kwargs)
File ""django/views/generic/base.py"" in dispatch 88. 
    return handler(request, *args, **kwargs)
File ""django/views/generic/edit.py"" in post 141. 
    if form.is_valid():
File ""django/forms/forms.py"" in is_valid 185. 
    return self.is_bound and not self.errors
File ""django/forms/forms.py"" in errors 180. 
    self.full_clean()
File ""django/forms/forms.py"" in full_clean 381. 
    self._clean_fields()
File ""django/forms/forms.py"" in _clean_fields 402. 
    value = getattr(self, 'clean_%s' % name)()
File ""django-oscar/src/oscar/apps/dashboard/vouchers/forms.py"" in clean_name 63. 
    voucher = Voucher.objects.get(name=name)
File ""django/db/models/manager.py"" in manager_method 82. 
    return getattr(self.get_queryset(), name)(*args, **kwargs)
File ""django/db/models/query.py"" in get 403. 
    (self.model._meta.object_name, num) 
Exception Type: MultipleObjectsReturned at /dashboard/vouchers/update/3/ 
Exception Value: get() returned more than one Voucher -- it returned 99!

```


### Steps to Reproduce

1. Create a Voucher Set with > 1 vouchers
2. Attempt to create a Voucher with the same name
3. A server error occurs

Any other relevant information. For example, why do you consider this a bug and what did you expect to happen instead?

A form validation error should be raised.

### Technical details

* Python version: 3.6.4
* Django version: 2.1.1
* Oscar version: master

The fix is here https://github.com/frmdstryr/django-oscar/commit/b71bb6e93f0c17d23dfedd1b52fdf0bdeca32108
"
10230,django-oscar,django-oscar,3,closed,2894,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2894/comments,https://github.com/django-oscar/django-oscar/pull/2894,[],Update django-debug-toolbar to 1.11,"
This PR updates [django-debug-toolbar](https://pypi.org/project/django-debug-toolbar) from **1.10.1** to **1.11**.



<details>
  <summary>Changelog</summary>
  
  
   ### 1.11
   ```
   -----------------

* Use ``defer`` on all ``&lt;script&gt;`` tags to avoid blocking HTML parsing,
  removed inline JavaScript.
* Stop inlining images in CSS to avoid Content Security Policy errors
  altogether.
* Reformatted the code using `black &lt;https://github.com/ambv/black&gt;`__.
* Added the Django mail panel to the list of third-party panels.
* Convert system check errors to warnings to accomodate exotic
  configurations.
* Fixed a crash when explaining raw querysets.
* Fixed an obscure unicode error with binary data fields.
* Added MariaDB and Python 3.7 builds to the CI.
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-debug-toolbar
  - Changelog: https://pyup.io/changelogs/django-debug-toolbar/
  - Repo: https://github.com/jazzband/django-debug-toolbar
</details>

"
10237,django-oscar,django-oscar,3,closed,2887,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2887/comments,https://github.com/django-oscar/django-oscar/issues/2887,[],Django Oscar Checkout Process Error?,"Hi,

I have created a ecom site using django oscar.

When i click on proceed to checkout, after filling shipping address it redirect  directly to /checkout/preview/ page it is not going to /checkout/payment-details/

do i need to do any changes in settings or code.


"
10238,django-oscar,django-oscar,3,closed,2886,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2886/comments,https://github.com/django-oscar/django-oscar/issues/2886,[],The application.urls on getting started/Building your own shop guide needs to be updated,"### Issue Summary

The URLs guide on the ""Building your own shop"" needs to be updated. 
`    url(r'', include(application.urls)),`

### Steps to Reproduce

It's essential that you provide enough information for someone else to replicate the problem you're seeing. Simply describing something that's broken on your current project is not enough!

1. Visit https://django-oscar.readthedocs.io/
2. Visited the ""Building your own shop""
3. Read and followed the instructions
4. Runned the project `python manage.py runserver`
5. The command produces `SyntaxError: invalid syntax`

### Technical details

* Python version: 3.6.6.
* Django version: 2.1.3.
* Oscar version: 1.6.4.
"
10250,django-oscar,django-oscar,3,closed,2872,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2872/comments,https://github.com/django-oscar/django-oscar/issues/2872,[],Dashboard users 500 error when email search field contains more than one @,"### Issue Summary

The dashboard users tool returns a 500 error when email search field contains more than one @ symbol.

### Steps to Reproduce

Open the dashboard user search tool.
Input an email address with two @'s in - perhaps just paste two email addresses in.  A server error is generated.  Stack trace as follows:
File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  23.                 return view_func(request, *args, **kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)

File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/users/views.py"" in dispatch
  41.         return super(IndexView, self).dispatch(request, *args, **kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/views/generic/base.py"" in dispatch
  88.         return handler(request, *args, **kwargs)

File ""/usr/local/lib/python2.7/dist-packages/django/views/generic/list.py"" in get
  160.         self.object_list = self.get_queryset()

File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/users/views.py"" in get_queryset
  58.         return self.apply_search(queryset)

File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/users/views.py"" in apply_search
  68.             return self.apply_search_filters(queryset, self.form.cleaned_data)

File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/users/views.py"" in apply_search_filters
  77.             email = normalise_email(data['email'])

File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/customer/utils.py"" in normalise_email
  150.         local, host = clean_email.split('@')

### Technical details

* Python 2.7, django 1.11, oscar 1.5

Could this be a type=""email"" field, and a bit bigger?  It's hard to see what we've pasted in there.
"
10265,django-oscar,django-oscar,3,closed,2857,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2857/comments,https://github.com/django-oscar/django-oscar/issues/2857,[],Sandbox Dependency Issue,"Found a bug? Please fill out the sections below.

### Issue Summary

When following the documentation to pull down the sandbox the following error is given when running make sandbox:
No matching distribution found for ipython==7.0.1 (from -r requirements.txt (line 29))

### Steps to Reproduce

$ git clone https://github.com/django-oscar/django-oscar.git $ cd django-oscar
$ mkvirtualenv oscar # needs virtualenvwrapper
(oscar) $ make sandbox

### Technical details


"
10267,django-oscar,django-oscar,3,closed,2855,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2855/comments,https://github.com/django-oscar/django-oscar/issues/2855,[],Add Category error: 'str' object is not a mapping,"### Issue Summary

After create database, createsuperuser, I add first test category with error occurs 

### Technical details

```
Environment:


Request Method: GET
Request URL: http://localhost:8000/dashboard/catalogue/categories/

Django Version: 2.1.2
Python Version: 3.6.3
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'widget_tweaks',
 'cashondelivery',
 'oscar',
 'oscar.apps.analytics',
 'apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'oscar.apps.dashboard.shipping',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']
Installed Middleware:
['debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'whitenoise.middleware.WhiteNoiseMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.http.ConditionalGetMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware']


Template error:
In template /usr/local/app/venv/lib/python3.6/site-packages/oscar/templates/oscar/dashboard/catalogue/category_row_actions.html, error at line 26
   'str' object is not a mapping
   16 :                 <a href=""{% url 'dashboard:catalogue-category-create-child' parent=record.pk %}"">
   17 :                     {% trans ""Add child category"" %}
   18 :                 </a>
   19 :             </li>
   20 :             <li{% if not record.has_children %} class=""disabled""{% endif %}>
   21 :                 <a href=""{% url 'dashboard:catalogue-category-detail-list' pk=record.pk %}"">
   22 :                     {% trans ""Edit children"" %}
   23 :                 </a>
   24 :             </li>
   25 :             <li>
   26 :                 <a href="" {{ record.get_absolute_url }} "">
   27 :                     {% trans ""View on site"" %}
   28 :                 </a>
   29 :             </li>
   30 :             <li>
   31 :                 <a href=""{% url 'dashboard:catalogue-category-delete' pk=record.id %}"">
   32 :                     {% trans ""Delete"" %}
   33 :                 </a>
   34 :             </li>
   35 :         </ul>
   36 :     </div>


Traceback:

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  34.             response = get_response(request)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  156.                 response = self.process_exception_by_middleware(e, request)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  154.                 response = response.render()

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/response.py"" in render
  106.             self.content = self.rendered_content

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/response.py"" in rendered_content
  83.         content = template.render(context, self._request)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  61.             return self.template.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  171.                     return self._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/templatetags/django_tables2.py"" in render
  169.             return template.render(context={'table': table}, request=request)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  61.             return self.template.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  171.                     return self._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  150.             return compiled_parent._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/defaulttags.py"" in render
  209.                     nodelist.append(node.render_annotated(context))

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
  62.                 result = block.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/defaulttags.py"" in render
  165.                 values = list(values)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/rows.py"" in items
  257.             column.current_value = self.get_cell(column.name)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/rows.py"" in get_cell
  205.             default=self.table.columns[name].default

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/rows.py"" in _get_and_render_with
  180.         return render_func(bound_column, value)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/rows.py"" in _call_render
  214.             self._optional_cell_arguments(bound_column, value)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/utils.py"" in call_with_appropriate
  535.     return fn(**kwargs)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django_tables2/columns/templatecolumn.py"" in render
  72.                 return get_template(self.template_name).render(context.flatten())

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  61.             return self.template.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  171.                     return self._render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/test/utils.py"" in instrumented_test_render
  96.     return self.nodelist.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  937.                 bit = node.render_annotated(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
  904.             return self.render(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in render
  987.             output = self.filter_expression.resolve(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in resolve
  671.                 obj = self.var.resolve(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in resolve
  796.             value = self._resolve_lookup(context)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/template/base.py"" in _resolve_lookup
  858.                             current = current()

File ""/usr/local/app/venv/lib/python3.6/site-packages/oscar/apps/catalogue/abstract_models.py"" in get_absolute_url
  204.         url = cache.get(cache_key)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/cache/__init__.py"" in __getattr__
  98.         return getattr(caches[DEFAULT_CACHE_ALIAS], name)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/cache/__init__.py"" in __getitem__
  79.         cache = _create_cache(alias)

File ""/usr/local/app/venv/lib/python3.6/site-packages/django/core/cache/__init__.py"" in _create_cache
  47.             params = {**conf, **kwargs}

Exception Type: TypeError at /dashboard/catalogue/categories/
Exception Value: 'str' object is not a mapping

```"
10281,django-oscar,django-oscar,4,closed,2841,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2841/comments,https://github.com/django-oscar/django-oscar/pull/2841,[],Update django-extensions to 2.1.3,"
This PR updates [django-extensions](https://pypi.org/project/django-extensions) from **2.1.2** to **2.1.3**.



<details>
  <summary>Changelog</summary>
  
  
   ### 2.1.3
   ```
   -----

Changes:
  - Fix: Readme, add direct linkt to screencast video
  - Fix: graph_models, regression under Python 2
  - Fix: ForeignKeyAutocompleteAdmin, 2.0.8 breaks ForeignKeyAutocompleteAdmin
  - Fix: AutoSlugField, fix regression when copying an autoslug model require the explicit clearing of the slug if it needs to be recalculated
  - Fix: technical_response, check for AttributeError
  - Improvement: graph_models, Add feature disable_abstract_fields
  - Improvement: AutoSlugField, Add overwrite_on_add
  - Improvement: runscript, Improve module existence test in runscript
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-extensions
  - Changelog: https://pyup.io/changelogs/django-extensions/
  - Repo: http://github.com/django-extensions/django-extensions
</details>

"
10285,django-oscar,django-oscar,4,closed,2828,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2828/comments,https://github.com/django-oscar/django-oscar/issues/2828,[],DeprecationWarning in StoreAddressInline,"### Issue Summary
I have enabled `Store` plugin in `Django-oscar` but When I am trying to create a Store I am getting this **DeprecationWarning**. 

`Setting StoreAddressInline.extra at the class level is now deprecated. Set StoreAddressInline.factory_kwargs instead.`

I am seeing that same issue was raised in #2688  and fix was released. But still I am getting this error SO don't know if that release have fixed the issue or this is different.

### Technical details

   - Python 3.6.3
   - django-extra-views==0.11.0
   - django-oscar==1.6.4
"
10290,django-oscar,django-oscar,4,closed,2823,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2823/comments,https://github.com/django-oscar/django-oscar/pull/2823,[],Update django-debug-toolbar to 1.10.1,"
This PR updates [django-debug-toolbar](https://pypi.org/project/django-debug-toolbar) from **1.10** to **1.10.1**.



<details>
  <summary>Changelog</summary>
  
  
   ### 1.10.1
   ```
   -------------------

* Fixed a problem where the duplicate query detection breaks for
  non-hashable query parameters.
* Added support for structured types when recording SQL.
* Made Travis CI also run one test no PostgreSQL.
* Added fallbacks for inline images in CSS.
* Improved cross-browser compatibility around ``URLSearchParams`` usage.
* Fixed a few typos and redundancies in the documentation, removed
  mentions of django-debug-toolbar&#39;s jQuery which aren&#39;t accurate
  anymore.
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-debug-toolbar
  - Changelog: https://pyup.io/changelogs/django-debug-toolbar/
  - Repo: https://github.com/jazzband/django-debug-toolbar
</details>

"
10295,django-oscar,django-oscar,4,closed,2818,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2818/comments,https://github.com/django-oscar/django-oscar/issues/2818,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Going back to previous steps in OfferWizard shows confusing error message,"### Issue Summary

When creating a new offer you can go back to steps 2 (Incentive) and 3 (Condition) after selecting a range and both will complain that a selected range is an invalid choice.

<img width=""689"" alt=""incentive before"" src=""https://user-images.githubusercontent.com/15933115/45168853-97b69380-b1fc-11e8-8457-a86c50727cca.png"">


### Steps to Reproduce

1. run command `make sandbox`
2. Press the Offers Tab and Select Offers option
3. Press ""Create new Offer""
4. Add a name and continue to step 2
5. Press Range and Select ""Site""
6. Press Type and Select ""Discount is a percentage off of the product's value""
7. Set Value to 10
8. Press ""Continue to step 3""
9. In the ""Steps"" Panel, select ""Incentive""

You should see the same message as the image posted.
**Note**: This applies for the Condition Step as well.

I think this is a bug since it is confusing when it says that it is not a valid choice but still shows as selectable and is already selected.

### Technical details

* Python version: 3.6.4
* Django version: 1.11.15 & 2.0.7 & 2.1.1
* Oscar version: 1.6.2 & 2.0.dev0
"
10296,django-oscar,django-oscar,4,closed,2817,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2817/comments,https://github.com/django-oscar/django-oscar/pull/2817,[],Update django-debug-toolbar to 1.10,"
This PR updates [django-debug-toolbar](https://pypi.org/project/django-debug-toolbar) from **1.9.1** to **1.10**.



<details>
  <summary>Changelog</summary>
  
  
   ### 1.10
   ```
   -----------------

* Removed support for Django &lt; 1.11.
* Added support and testing for Django 2.1 and Python 3.7. No actual code
  changes were required.
* Removed the jQuery dependency. This means that django-debug-toolbar
  now requires modern browsers with support for ``fetch``, ``classList``
  etc.
* Added support for the server timing header.
* Added a differentiation between similar and duplicate queries. Similar
  queries are what duplicate queries used to be (same SQL, different
  parameters).
* Stopped hiding frames from Django&#39;c contrib apps in stacktraces by
  default.
* Lots of small cleanups and bugfixes.
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-debug-toolbar
  - Changelog: https://pyup.io/changelogs/django-debug-toolbar/
  - Repo: https://github.com/jazzband/django-debug-toolbar
</details>

"
10302,django-oscar,django-oscar,4,closed,2810,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2810/comments,https://github.com/django-oscar/django-oscar/issues/2810,[],Lazy URL load for OSCAR_HOMEPAGE in defaults.py raises unhandled exception,"### Issue Summary

We are seeing the error `'promotions' is not a registered namespace` in our log handling when the Oscar app urls are resolved. It looks like the default settings are lazy loading the promotion homepage for the `OSCAR_HOMEPAGE` setting: https://github.com/django-oscar/django-oscar/blob/master/src/oscar/defaults.py#L8

Since we're not using the promotions app urls in our customized integration, we see this raise the unhandled exception above.

### Steps to Reproduce

We customize/override the order and payment apps, but otherwise included `oscar.get_core_apps` in our `INSTALLED_APPS` setting. In our urls.py, we did not add `url(r'', include(oscar.app.application.urls))`, and then finally this error is raised when the django app urls are resolved, quickly reproducible in a view that simply raises via `response = handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())` in django.core.handlers.exception.py

### Technical details

* Python version: 3.6.3
* Django version: 1.11.7
* Oscar version: 1.6.3
"
10314,django-oscar,django-oscar,4,closed,2798,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2798/comments,https://github.com/django-oscar/django-oscar/pull/2798,[],Fix debug error URLs whose handlers now require an exception.,Since Django 2.0 the 403 and 404 handlers must accept an `exception` argument (this was introduced in Django 1.9). This patches the debug URLs to pass a dummy exception.
10321,django-oscar,django-oscar,4,closed,2789,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2789/comments,https://github.com/django-oscar/django-oscar/issues/2789,[],Build submission:  'phone_number' is an invalid keyword argument for this function,"### Issue Summary

I'm updating a django (oscar) project from django `1.8` to `1.11` and oscar `1.2` to `1.6`.  Right now I'm at an intermediate django `1.10` with oscar `1.5`.  Django `1.9` and oscar `1.4` were working just fine.

The error I'm running in to is 

```
TypeError: 'phone_number' is an invalid keyword argument for this function
```

The error seems to occur here:

```
File ""/usr/local/lib/python2.7/site-packages/oscar/apps/checkout/session.py"", line 389, in get_billing_address
    return BillingAddress(**addr_data)
```

Full stacktrace:

```
Internal Server Error: /shop/produkte/checkout/preview/
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/lib/python2.7/site-packages/cms/utils/decorators.py"", line 18, in inner
    return func(request, *args, **kwargs)
  File ""/usr/local/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/usr/local/lib/python2.7/site-packages/oscar/apps/checkout/session.py"", line 71, in dispatch
    request, *args, **kwargs)
  File ""/usr/local/lib/python2.7/site-packages/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/usr/local/lib/python2.7/site-packages/oscar/apps/checkout/views.py"", line 441, in post
    return self.handle_place_order_submission(request)
  File ""/srv/source/apps/oscar/checkout/views.py"", line 137, in handle_place_order_submission
    if address_form.is_valid():
  File ""/usr/local/lib/python2.7/site-packages/oscar/apps/checkout/session.py"", line 273, in build_submission
    billing_address = self.get_billing_address(shipping_address)
  File ""/usr/local/lib/python2.7/site-packages/oscar/apps/checkout/session.py"", line 389, in get_billing_address
    return BillingAddress(**addr_data)
  File ""/usr/local/lib/python2.7/site-packages/django/db/models/base.py"", line 555, in __init__
    raise TypeError(""'%s' is an invalid keyword argument for this function"" % list(kwargs)[0])
TypeError: 'phone_number' is an invalid keyword argument for this function
```

In the [release notes](https://django-oscar.readthedocs.io/en/latest/releases/v1.5.html) it is stated that oscar 1.5 makes use of the external `django-phonenumber-field` package, so my best guess is that the error is somehow related to that. 

### Steps to Reproduce

Well, this is a good question... Like I said, I'm in the process of updating with the current version number as stated above and below. I do have a custom `PaymentDetailsView` that is calling the `submit` method of the `CheckoutSessionMixin`, but it is not doing anything crazy. 

None of the address models are overridden.

### Technical details

* Python version: `2.7`
* Django version: `1.10`
* Oscar version: `1.5`"
10322,django-oscar,django-oscar,4,closed,2788,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2788/comments,https://github.com/django-oscar/django-oscar/issues/2788,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Offers are consumed twice on basket lines,"I am wondering about how to apply offer for consume offer for django oscar 1.6.4,

I was digging in to the code base, and found out that we call `consume` 2 times when applying a benefit. For example
* In `apps.basket.abstract_models.py`
```
 def discount(self, discount_value, affected_quantity, incl_tax=True,
                 offer=None):
        """"""
        Apply a discount to this line
        """"""
        if incl_tax:
            if self._discount_excl_tax > 0:
                raise RuntimeError(
                    ""Attempting to discount the tax-inclusive price of a line ""
                    ""when tax-exclusive discounts are already applied"")
            self._discount_incl_tax += discount_value
        else:
            if self._discount_incl_tax > 0:
                raise RuntimeError(
                    ""Attempting to discount the tax-exclusive price of a line ""
                    ""when tax-inclusive discounts are already applied"")
            self._discount_excl_tax += discount_value
        self.consume(affected_quantity, offer=offer)
```

And then again in `apps.offer.conditions.py` in each condition, they have ` def consume_items(self, offer, basket, affected_lines):` and call `line.consume(quantity_to_consume, offer=offer)` method again.

I don't think it's supposed to call `consume` twice like this?

### Technical details
* Oscar version:  django oscar 1.6.4
"
10323,django-oscar,django-oscar,4,closed,2787,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2787/comments,https://github.com/django-oscar/django-oscar/issues/2787,[],Problem with PostgreSQL when retrieving products,"### Issue Summary

A bug when using PostgreSQL as DB backend.

An invalid query is being used to get products in the catalogue (both in dashboard and regular).
This stems from the **get_queryset** method in **ProductListView**: 

`queryset = Product.browsable.base_queryset()`

For now, I replaced it with `Product.objects.all()` to get it to work.

\lib\site-packages\oscar\templates\oscar\base.html, error at line 0

> column ""catalogue_product.structure"" must appear in the GROUP BY clause or be used in an aggregate function LINE 1: SELECT ""catalogue_product"".""id"", ""catalogue_product"".""struct... ^

Full query:

`SELECT ""catalogue_product"".""id"", ""catalogue_product"".""structure"", 
 ""catalogue_product"".""upc"", ""catalogue_product"".""parent_id"", 
 ""catalogue_product"".""title"", ""catalogue_product"".""slug"", 
 ""catalogue_product"".""description"", ""catalogue_product"".""product_class_id"", 
 ""catalogue_product"".""rating"", ""catalogue_product"".""date_created"", 
 ""catalogue_product"".""date_updated"", ""catalogue_product"".""is_discountable"", 
 COUNT(""catalogue_productclass_options"".""option_id"") AS 
 ""num_product_class_options"", 
 COUNT(""catalogue_product_product_options"".""option_id"") AS 
 ""num_product_options"", ""catalogue_productclass"".""id"", 
 ""catalogue_productclass"".""name"", ""catalogue_productclass"".""slug"", 
 ""catalogue_productclass"".""requires_shipping"", 
 ""catalogue_productclass"".""track_stock"" FROM ""catalogue_product"" LEFT OUTER 
 JOIN ""catalogue_productclass"" ON (""catalogue_product"".""product_class_id"" = 
 ""catalogue_productclass"".""id"") LEFT OUTER JOIN 
 ""catalogue_productclass_options"" ON (""catalogue_productclass"".""id"" = 
 ""catalogue_productclass_options"".""productclass_id"") LEFT OUTER JOIN 
 ""catalogue_product_product_options"" ON (""catalogue_product"".""id"" = 
 ""catalogue_product_product_options"".""product_id"") WHERE 
 ""catalogue_product"".""parent_id"" IS NULL GROUP BY ""catalogue_product"".""id"", 
 ""catalogue_productclass"".""id"" ORDER BY ""catalogue_product"".""date_updated"" 
 DESC  LIMIT 1`

### Steps to Reproduce

1. Run the server
2. Add a product (after adding arbitrary category, product type and partner)
3. Visit the homepage and get products (Menu: Browse Store > All products) or through the dashboard (Menu: Catalogue > Products)

This bug does not occur when retrieving other information, such as the product types, categories, ranges etc.

### Technical details

* Python version: 3.6.4
* Django version: 2.0.7
* Oscar version: 1.6.4.
* PostgreSQL version: 9.0.23.
"
10324,django-oscar,django-oscar,4,closed,2786,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2786/comments,https://github.com/django-oscar/django-oscar/pull/2786,[],Update whitenoise to 4.0,"
This PR updates [whitenoise](https://pypi.org/project/whitenoise) from **3.3.1** to **4.0**.



<details>
  <summary>Changelog</summary>
  
  
   ### 4.0b5
   ```
   ------

.. note:: **Breaking changes**
          The latest version of WhiteNoise removes some options which were
          deprecated in the previous major release:

    * The WSGI integration option for Django
      (which involved editing ``wsgi.py``) has been removed. Instead, you
      should add WhiteNoise to your
      middleware list in ``settings.py`` and remove any reference to WhiteNoise from
      ``wsgi.py``.
      See the :ref:`documentation &lt;django-middleware&gt;` for more details. |br|
      (The :doc:`pure WSGI &lt;base&gt;` integration is still available for non-Django apps.)

    * The ``whitenoise.django.GzipManifestStaticFilesStorage`` alias has now
      been removed. Instead you should use the correct import path:
      ``whitenoise.storage.CompressedManifestStaticFilesStorage``.

    If you are not using either of these integration options you should have
    no issues upgrading to the latest version.

Removed Python 3.3 Support
++++++++++++++++++++++++++

Removed support for Python 3.3 since it&#39;s end of life was in September 2017.


Index file support
++++++++++++++++++

WhiteNoise now supports serving :ref:`index files &lt;index-files-django&gt;` for
directories (e.g. serving ``/example/index.html`` at ``/example/``). It also
creates redirects so that visiting the index file directly, or visiting the URL
without a trailing slash will redirect to the correct URL.


Range header support (&quot;byte serving&quot;)
+++++++++++++++++++++++++++++++++++++

WhiteNoise now respects the HTTP Range header which allows a client to request
only part of a file. The main use for this is in serving video files to iOS
devices as Safari refuses to play videos unless the server supports the
Range header.


ETag support
++++++++++++

WhiteNoise now adds ETag headers to files using the same algorithm used by
nginx. This gives slightly better caching behaviour than relying purely on Last
Modified dates (although not as good as creating immutable files using
something like ``ManifestStaticFilesStorage``, which is still the best option
if you can use it).

If you need to generate your own ETags headers for any reason you can define a
custom :any:`add_headers_function &lt;WHITENOISE_ADD_HEADERS_FUNCTION&gt;`.


Remove requirement to run collectstatic
+++++++++++++++++++++++++++++++++++++++

By setting :any:`WHITENOISE_USE_FINDERS` to ``True`` files will be served
directly from their original locations in ``STATICFILES_DIRS`` without needing
to be collected into ``STATIC_ROOT`` by the collectstatic command. This was
always the default behaviour when in ``DEBUG`` mode but previously it wasn&#39;t
possible to enable this behaviour in production. For small apps which aren&#39;t
using the caching and compression features of the more advanced storage
backends this simplifies the deployment process by removing the need to run
collectstatic as part of the build step -- in fact, it&#39;s now possible not to
have any build step at all.


Customisable immutable files test
+++++++++++++++++++++++++++++++++

WhiteNoise ships with code which detects when you are using Django&#39;s
ManifestStaticFilesStorage backend and sends optimal caching headers for files
which are guaranteed not to change. If you are using a different system for
generating cacheable files then you might need to supply your own function for
detecting such files. Previously this required subclassing WhiteNoise, but now
you can use the :any:`WHITENOISE_IMMUTABLE_FILE_TEST` setting.


Fix runserver_nostatic to work with Channels
++++++++++++++++++++++++++++++++++++++++++++

The old implementation of :ref:`runserver_nostatic &lt;runserver-nostatic&gt;` (which
disables Django&#39;s default static file handling in development) did not work
with `Channels`_, which needs its own runserver implementation. The
runserver_nostatic command has now been rewritten so that it should work with
Channels and with any other app which provides its own runserver.

.. _Channels: https://channels.readthedocs.io/


Reduced storage requirements for static files
+++++++++++++++++++++++++++++++++++++++++++++

The new :any:`WHITENOISE_KEEP_ONLY_HASHED_FILES` setting reduces the number of
files in STATIC_ROOT by half by storing files only under their hashed names
(e.g.  ``app.db8f2edc0c8a.js``), rather than also keeping a copy with the
original name (e.g. ``app.js``).



Improved start up performance
+++++++++++++++++++++++++++++

When in production mode (i.e. when :any:`autorefresh &lt;WHITENOISE_AUTOREFRESH&gt;`
is disabled), WhiteNoise scans all static files when the application starts in
order to be able to serve them as efficiently and securely as possible. For
most applications this makes no noticeable difference to start up time, however
for applications with very large numbers of static files this process can take
some time. In WhiteNoise 4.0 the file scanning code has been rewritten to do
the minimum possible amount of filesystem access which should make the start up
process considerably faster.


Windows Testing
+++++++++++++++

WhiteNoise has always aimed to support Windows as well as \*NIX platforms but
we are now able to run the test suite against Windows as part of the CI process
which should ensure that we can maintain Windows compatibility in future.


Modification times for compressed files
+++++++++++++++++++++++++++++++++++++++

The compressed storage backend (which generates Gzip and Brotli compressed
files) now ensures that compressed files have the same modification time as the
originals.  This only makes a difference if you are using the compression
backend with something other than WhiteNoise to actually serve the files, which
very few users do.

Replaced brotlipy with official Brotli Python Package
+++++++++++++++++++++++++++++++++++++++++++++++++++++

Since the official `Brotli project &lt;https://github.com/google/brotli&gt;`_ offers
a `Brotli Python package &lt;https://pypi.org/project/Brotli/&gt;`_ brotlipy has been
replaced with Brotli.

Furthermore a ``brotli`` key has been added to ``extras_require`` which allows
installing WhiteNoise and Brotli together like this:

.. code-block:: bash

    pip install whitenoise[brotli]


---------------------------
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/whitenoise
  - Changelog: https://pyup.io/changelogs/whitenoise/
  - Homepage: http://whitenoise.evans.io
</details>

"
10327,django-oscar,django-oscar,4,closed,2783,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2783/comments,https://github.com/django-oscar/django-oscar/issues/2783,[],Editing child products in dashboard emits ValidationError,"### Issue Summary

First time creating a child product works fine but trying to edit and save the child product after it has been creating always emits the ValidationError ""a child product can't have a product class"".

I saw here that this was already found in a PR but the bug seems to still exists in 1.6.2
https://github.com/django-oscar/django-oscar/pull/1441#issuecomment-52473882
### Steps to Reproduce

1. Create Product Class
2. Add new Product in previously created product class
3. Add new Variant and press save
4. Edit Variant and press save


### Technical details

* Python version: 3.6.4
* Django version: 2.0.7
* Oscar version: 1.6.2
"
10333,django-oscar,django-oscar,4,closed,2777,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2777/comments,https://github.com/django-oscar/django-oscar/pull/2777,[],fix: usr: handle exception if SMTP Recipient is refused by server,"Service fails if customer has a fake email address - missing try except block
`
File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/oscar/apps/customer/utils.py"", line 123, in send_email_messages
email.send()
File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/message.py"", line 294, in send
return self.get_connection(fail_silently).send_messages([self])
File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 110, in send_messages
sent = self._send(message)
File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 126, in _send
self.connection.sendmail(from_email, recipients, message.as_bytes(linesep='\r\n'))
File ""/usr/lib64/python3.6/smtplib.py"", line 881, in sendmail
raise SMTPRecipientsRefused(senderrs)
smtplib.SMTPRecipientsRefused: {'wemiefwnifewnwfin@efwfewefw.pl': (450, b'4.1.2 wemiefwnifewnwfin@efwfewefw.pl: Recipient address rejected: Domain not found')}
ERROR 2018-07-29 14:54:55,237 [/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/servers/basehttp.py:124]
-- ""POST /platnosci/accept/6/ HTTP/1.1"" 500 226053
`"
10334,django-oscar,django-oscar,4,closed,2776,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2776/comments,https://github.com/django-oscar/django-oscar/pull/2776,[],fix: usr: handle exception if SMTP Recipient is refused by server,"Service fails if customer has a fake email address - missing try except block

  File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/oscar/apps/customer/utils.py"", line 123, in send_email_messages
    email.send()
  File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/message.py"", line 294, in send
    return self.get_connection(fail_silently).send_messages([self])
  File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 110, in send_messages
    sent = self._send(message)
  File ""/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/mail/backends/smtp.py"", line 126, in _send
    self.connection.sendmail(from_email, recipients, message.as_bytes(linesep='\r\n'))
  File ""/usr/lib64/python3.6/smtplib.py"", line 881, in sendmail
    raise SMTPRecipientsRefused(senderrs)
smtplib.SMTPRecipientsRefused: {'wemiefwnifewnwfin@efwfewefw.pl': (450, b'4.1.2 <wemiefwnifewnwfin@efwfewefw.pl>: Recipient address rejected: Domain not found')}
ERROR 2018-07-29 14:54:55,237 [/home/pmarkowski/workspace/mtechnology/shop/venv/lib/python3.6/site-packages/django/core/servers/basehttp.py:124]
-- ""POST /platnosci/accept/6/ HTTP/1.1"" 500 226053"
10335,django-oscar,django-oscar,4,closed,2775,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2775/comments,https://github.com/django-oscar/django-oscar/issues/2775,"[{""default"": false, ""name"": ""\u263c Enhancement"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%BC%20Enhancement"", ""color"": ""D8E4FD"", ""node_id"": ""MDU6TGFiZWw5MDg1Mw=="", ""id"": 90853}]",Undocumented template tag: category_tree,"Found a bug? Please fill out the sections below.

### Issue Summary

The template tag **category_tree** is missing from the current documentation.  This makes it confusing for front end developers (who are unfamiliar with this framework) that are [forking the templates](https://django-oscar.readthedocs.io/en/latest/howto/how_to_customise_templates.html?highlight=templates#method-1-forking) to understand how to display a list of categories in their own way.

### Steps to Reproduce

* Open templates/oscar/partials/nav_primary.html and notice usage of category_tree
* Go to https://django-oscar.readthedocs.io/ and search for category_tree
* Notice no results referencing the template tag

### Technical details

* None.
"
10339,django-oscar,django-oscar,4,closed,2770,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2770/comments,https://github.com/django-oscar/django-oscar/issues/2770,[],Oscar Basket django.db.models RelatedObjectDoesNotExist : Line has no basket,"Django db error when updating basket line.

### Issue Summary

I have added extra fields in StockRecord model, same fields is added in basket line model.
i have saved the extra field in db and use it to calculate final total of basket line.

but due to no reason the following error is coming at update function

**django.db.models.fields.related_descriptors.RelatedObjectDoesNotExist: Line has no basket.**

Hope i got some help
"
10344,django-oscar,django-oscar,4,closed,2765,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2765/comments,https://github.com/django-oscar/django-oscar/issues/2765,[],RuntimeError: Conflicting automaticproductlist ,"### Issue Summary

When i am trying to customise AutomaticProductList model i am getting the following RuntimeError
RuntimeError: Conflicting 'automaticproductlist' models in application 'promotions':

### models.py
from django.db import models
from oscar.core.loading import get_model
from oscar.apps.catalogue.models import Category
from django.utils.translation import gettext_lazy as _

AutomaticProductListCore = get_model('promotions','AutomaticProductList')
class AutomaticProductList(AutomaticProductListCore):
    category = models.ForeignKey(Category)
    class Meta:
        app_label = 'promotions'
        verbose_name = _(""Automatic product list"")
        verbose_name_plural = _(""Automatic product lists"")

### Error log
Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f9dca695bf8>
Traceback (most recent call last):
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/utils/autoreload.py"", line 228, in wrapper
   fn(*args, **kwargs)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 116, in inner_run
   autoreload.raise_last_exception()
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/utils/autoreload.py"", line 251, in raise_last_exception
   six.reraise(*_exception)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/utils/six.py"", line 685, in reraise
   raise value.with_traceback(tb)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/utils/autoreload.py"", line 228, in wrapper
   fn(*args, **kwargs)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/__init__.py"", line 27, in setup
   apps.populate(settings.INSTALLED_APPS)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/apps/registry.py"", line 108, in populate
   app_config.import_models()
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/apps/config.py"", line 202, in import_models
   self.models_module = import_module(models_module_name)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/importlib/__init__.py"", line 126, in import_module
   return _bootstrap._gcd_import(name[level:], package, level)
 File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
 File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
 File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
 File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
 File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
 File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
 File ""/home/vagrant/workspace/projecthealth/src/marketplace5/testing/models.py"", line 9, in <module>
   class AutomaticProductList(AutomaticProductListCore):
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/db/models/base.py"", line 319, in __new__
   new_class._meta.apps.register_model(new_class._meta.app_label, new_class)
 File ""/home/vagrant/.virtualenvs/project/lib/python3.6/site-packages/django/apps/registry.py"", line 224, in register_model
   (model_name, app_label, app_models[model_name], model))
RuntimeError: Conflicting 'automaticproductlist' models in application 'promotions': <class 'oscar.apps.promotions.models.AutomaticProductList'> and <class 'testing.models.AutomaticProductList'>.

Please help me out to solve the above issue.
Thankyou"
10348,django-oscar,django-oscar,4,closed,2761,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2761/comments,https://github.com/django-oscar/django-oscar/issues/2761,[],Input validation error in BenefitForm,"### Issue Summary

By defining a custom incentive, the input validation of the offer creation allows to input values that, lead to an error. 
After this, the whole offers page of the dashboard is inaccessible, because of an error message.

### Steps to Reproduce

Prerequisite: Existing custom incentive

1. Start creating a new offer in the dashboard
2. Set random name, e.g. ""Test""
3. For the incentive just select ""Range"" with any of the provided options and leave the rest blank
4. Submit the incentive
5. Fill the rest of the procedure with any data
6. Submit the offer
7. Dashboard shows an error, and offers page is no longer accessible without an error

### Technical details
Usage of sandbox version as described in the [docs][sandbox]. No further modifications needed.

```
$ python --version
Python 3.6.3
$ pip show django | grep Version
Version: 2.0.6
$ pip show django-oscar | grep Version
Version: 2.0.dev0
```

The problem in this case, is that [clean][clean-method] method of the BenefitForm, does only check if one of the values is set. By setting the range, this check is fulfilled.

### Fix
I submitted a simple PR #2762 for fixing this input validation error.


[sandbox]: https://django-oscar.readthedocs.io/en/latest/internals/sandbox.html#running-the-sandbox-locally
[clean-method]: https://github.com/django-oscar/django-oscar/blob/06323399b0dfdcbbf63606a3607ca9648a991cca/src/oscar/apps/dashboard/offers/forms.py#L137"
10363,django-oscar,django-oscar,4,closed,2746,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2746/comments,https://github.com/django-oscar/django-oscar/issues/2746,[],super() takes at least 1 argument (0 given) - make: *** [sandbox_clean] Error 1,"I received following error in the last step of installation. any idea:
Traceback (most recent call last):
  `File ""sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/core/management/__init__.py"", line 338, in execute
    django.setup()
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models()
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/local/Cellar/python@2/2.7.15/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/saman/Virtualenv/django-oscar/src/oscar/apps/address/models.py"", line 1, in <module>
    from oscar.apps.address.abstract_models import (
  File ""/Users/saman/Virtualenv/django-oscar/src/oscar/apps/address/abstract_models.py"", line 16, in <module>
    class AbstractAddress(models.Model):
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/db/models/base.py"", line 162, in __new__
    new_class.add_to_class(obj_name, obj)
  File ""/Users/saman/Virtualenv/oscar/lib/python2.7/site-packages/django/db/models/base.py"", line 325, in add_to_class
    value.contribute_to_class(cls, name)
  File ""/Users/saman/Virtualenv/django-oscar/src/oscar/models/fields/__init__.py"", line 78, in contribute_to_class
    super().contribute_to_class(
TypeError: Error when calling the metaclass bases
    super() takes at least 1 argument (0 given)
make: *** [sandbox_clean] Error 1`"
10386,django-oscar,django-oscar,5,closed,2721,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2721/comments,https://github.com/django-oscar/django-oscar/issues/2721,[],"vouchersets stat and edit page error, IndexError at /dashboard/vouchers/sets/1/","### Issue Summary

vouchersets stat and edit page error, IndexError at /dashboard/vouchers/sets/1/

### Steps to Reproduce

1. django-oscar==1.6.1 , django version==1.11.13, python==3.6.3
2. go to dashboard, and create vouchersets
3. create process is correct, but cannot open edit and stats page.

According the traceback,
I think in file  `oscar/apps/dashboard/vouchers/views.py`
```
    def dispatch(self, request, *args, **kwargs):
        pk = args[0]
        self.voucher_set = get_object_or_404(VoucherSet, pk=pk)
        return super(VoucherSetDetailView, self).dispatch(
            request, pk, **kwargs)
```
should be
```
    def dispatch(self, request, *args, **kwargs):
        pk = kwargs.get('pk', None)
        self.voucher_set = get_object_or_404(VoucherSet, pk=pk)
        return super(VoucherSetDetailView, self).dispatch(
            request, pk, **kwargs)
```

I am not sure whether it is a bug, please review this piece of code, thanks.




"
10389,django-oscar,django-oscar,5,closed,2718,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2718/comments,https://github.com/django-oscar/django-oscar/issues/2718,[],"Error in installation of django oscar - 'Passing a 3-tuple to include() is not supported. Pass a 2-tuple containing the list of patterns and app_name, and provide the namespace argument to include() instead.'","I have started a new Django project and am trying to make use of Django e-commerce package 'OSCAR'. I followed the steps for Install Oscar and its dependencies. I am able to create the project and when I try to start the server I get the error:
  
File ""M:\frobshop\frobshop\urls.py"", line 24, in <module>
    url(r'^admin/', include(admin.site.urls)),
  File ""C:\Users\manasa\Envs\oscar\lib\site-packages\django\urls\conf.py"", line 27, in include
    'provide the namespace argument to include() instead.' % len(arg)
django.core.exceptions.ImproperlyConfigured: Passing a 3-tuple to include() is not supported. Pass a 2-tuple containing the list of patterns and app_name, and provide the namespace argument to include() instead.


Django-version: 2.0.5
Python: 3.5
OS: Windows 10"
10391,django-oscar,django-oscar,5,closed,2716,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2716/comments,https://github.com/django-oscar/django-oscar/pull/2716,[],Fix admin URLs in getting started docs.,"The ability to include(admin.site.urls) was removed in Django 2 - if you follow the documentation as it currently is you get an error:

> django.core.exceptions.ImproperlyConfigured: Passing a 3-tuple to include() is not supported. Pass a 2-tuple containing the list of patterns and app_name, and provide the namespace argument to include() instead."
10398,django-oscar,django-oscar,5,closed,2709,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2709/comments,https://github.com/django-oscar/django-oscar/issues/2709,[],Problem Rebuild search index with Solr,"I tried setup Solr with Oscar as described in the [docs](https://django-oscar.readthedocs.io/en/releases-1.6/howto/how_to_setup_solr.html).
but i got this error, how can i solve this issue to make search working?
thanks alot.

`System check identified no issues (0 silenced).
May 22, 2018 - 15:19:37
Django version 1.11.13, using settings 'myshop.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
[22/May/2018 15:19:39] ""GET / HTTP/1.1"" 200 23423
Failed to query Solr using '*:*': Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
	at org.eclipse.jetty.server.Server.handle(Server.java:368)
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
	at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
	at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
	at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
	at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	... 1 more
Caused by: java.lang.RuntimeException: unknown field 'id'
	at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
	... 13 more
,code=500}]
Traceback (most recent call last):
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/haystack/backends/solr_backend.py"", line 138, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 730, in search
    response = self._select(params, handler=search_handler)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 428, in _select
    return self._send_request('get', path)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 403, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
	at org.eclipse.jetty.server.Server.handle(Server.java:368)
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
	at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
	at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
	at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
	at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	... 1 more
Caused by: java.lang.RuntimeException: unknown field 'id'
	at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
	... 13 more
,code=500}]
Failed to query Solr using '*:*': Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
	at org.eclipse.jetty.server.Server.handle(Server.java:368)
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
	at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
	at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
	at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
	at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	... 1 more
Caused by: java.lang.RuntimeException: unknown field 'id'
	at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
	... 13 more
,code=500}]
Traceback (most recent call last):
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/haystack/backends/solr_backend.py"", line 138, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 730, in search
    response = self._select(params, handler=search_handler)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 428, in _select
    return self._send_request('get', path)
  File ""/home/mahdi/Development/myshop/venvi/lib/python3.6/site-packages/pysolr.py"", line 403, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
	at org.eclipse.jetty.server.Server.handle(Server.java:368)
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /home/mahdi/Development/myshop/solr-4.7.2/example/solr/collection1/schema.xml
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
	at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
	at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
	at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
	at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	... 1 more
Caused by: java.lang.RuntimeException: unknown field 'id'
	at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
	at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
	... 13 more
,code=500}]
[22/May/2018 15:19:45] ""GET /catalogue/category/oil_1/ HTTP/1.1"" 200 24708
`"
10404,django-oscar,django-oscar,5,closed,2702,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2702/comments,https://github.com/django-oscar/django-oscar/issues/2702,[],RelatedFieldWidgetWrapper raises KeyError on Django ,"Affects: Django 1.11.0 but not >=1.11.1 (i never tested <1.10. *may* affect early 2.0.)

Problem: Trying to create or view a ProductClass in th Dashboard results in a KeyError on context['field'].

Bug description
-------------------
`RelatedFieldWidgetWrapper` in apps/dashboard/widgets.py: inherits from Widget but does not call super().\_\_init__.  
This means that some variables that `Widget.get_context()` builds are not present in `RelatedFieldWidgetWrapper.get_context()` (context['widget']).

When rendering ProductClass form in the dashboard, the template calls widget_tweaks's `render_field` with a class attribute added. When adding class attributes, widget tweaks will test the `BoundField` for truthyness.
In Django==1.11.0 , `BoundField` is only has \_\_len__ (which is used for truthyness tests) which eventually leads to accessing context['widget'] (which is not created). In later versions (after [this commit](https://github.com/django/django/commit/844ae40a7cdcb1738ca3a2e8f13bb6b8c2e22efd) ) BoundField got a `__bool__()` method so no access to subwidgets happens.

Solution 1: Change `RelatedFieldWidgetWrapper` to call super().\_\_init__. I don't quite understand it entirely and maybe there is a reason it doesn't, so i'm not submitting a PR
Solution 2: Require >Django==1.11.0"
10419,django-oscar,django-oscar,5,closed,2685,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2685/comments,https://github.com/django-oscar/django-oscar/issues/2685,[],setup() should add zip_safe=False parameter in setup.py ,"cd django-oscar folder
python setup.py install
it make django-tables2 install as egg file instead of package folder, then when I enter dashboard, it comes Error:
TemplateDoesNotExist: django_tables2/table.html
take me much time to debug.

To avoid this problem, zip_safe=False parameter should add to setup() in setup.py"
10422,django-oscar,django-oscar,5,closed,2682,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2682/comments,https://github.com/django-oscar/django-oscar/pull/2682,[],"Fix is_quality_allowed, updated docs with correct default setting","See https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/basket/abstract_models.py#L155

It always expects two results. When ``OSCAR_MAX_BASKET_QUANTITY_THRESHOLD`` is set to something that evaluates to ``False`` this will raise a TypeError exception:
```python
File "".../oscarapi/views/basket.py"", line 78, in validate
    allowed, message = basket.is_quantity_allowed(quantity)
File "".../oscar/apps/basket/abstract_models.py"", line155, in is_quantity_allowed
    max_allowed, basket_threshold = self.max_allowed_quantity()
TypeError: 'NoneType' object is not iterable
```

In the documentation the default value is set to ``None``. However in https://github.com/django-oscar/django-oscar/blob/master/src/oscar/defaults.py#L17 it's set to 10000. So I updated the documentation.

See also https://github.com/django-oscar/django-oscar-api/issues/122"
10423,django-oscar,django-oscar,5,closed,2681,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2681/comments,https://github.com/django-oscar/django-oscar/issues/2681,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",ImportError: No module named 'phonenumbers',"Hi!

I'm trying to start a project from the beginning with `1.6rc1` version with python 3.5.0
```
virtualenv venv 
source venv/bin/activate
pip install django-oscar==1.6rc1
django-admin.py startproject mycommerce .
```
...
Edit settings with https://django-oscar.readthedocs.io/en/latest/internals/getting_started.html

Everything is the same for django 2.0 except for the urls:
```
from django.contrib import admin
from django.urls import path, include
from oscar.app import application

urlpatterns = [
    path('i18n/', include('django.conf.urls.i18n')),

    # The Django admin is not officially supported; expect breakage.
    # Nonetheless, it's often useful for debugging.
    path('admin/', include(admin.site.urls)),

    path('', include(application.urls)),
]
```
But when i execute `python manage.py showmigrations` i get the error `ImportError: No module named 'phonenumbers'`.

This is the complete traceback:
```
Traceback (most recent call last):
  File ""manage.py"", line 15, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/django/core/management/__init__.py"", line 347, in execute
    django.setup()
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/django/__init__.py"", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/django/apps/registry.py"", line 112, in populate
    app_config.import_models()
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/Users/andres/mycommerce/venv/lib/python3.5/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 662, in exec_module
  File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/oscar/apps/address/models.py"", line 1, in <module>
    from oscar.apps.address.abstract_models import (
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/oscar/apps/address/abstract_models.py"", line 11, in <module>
    from phonenumber_field.modelfields import PhoneNumberField
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/phonenumber_field/modelfields.py"", line 8, in <module>
    from phonenumber_field import formfields
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/phonenumber_field/formfields.py"", line 9, in <module>
    from phonenumber_field.phonenumber import to_python
  File ""/Users/andres/mycommerce/venv/lib/python3.5/site-packages/phonenumber_field/phonenumber.py"", line 5, in <module>
    import phonenumbers
ImportError: No module named 'phonenumbers'
```

Thanks in advance :).

Andrés.
"
10424,django-oscar,django-oscar,5,closed,2680,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2680/comments,https://github.com/django-oscar/django-oscar/pull/2680,[],Update django-extensions to 2.0.7,"
This PR updates [django-extensions](https://pypi.org/project/django-extensions) from **2.0.6** to **2.0.7**.



<details>
  <summary>Changelog</summary>
  
  
   ### 2.0.7
   ```
   -----

Changes:
  - Fix: pipchecker, pip 10.0.0 compatibility
  - Fix: sqldiff, improve support of GIS fields by using Django introspection
  - Fix: shell_plus, fix bug in windows when PYTHONPATH is defined
  - Fix: shell_plus, Call execute on CursorWrapper instead of directly on cursor to ensure wrappers are run
  - Fix: runserver_plus, Call execute on CursorWrapper instead of directly on cursor to ensure wrappers are run
  - Improvement: sqldiff, drop old compatibility code
  - Improvement: ForeignKeyAutocompleteAdminMixin, improvements for Django &gt;1.9
   ```
   
  
</details>


 

<details>
  <summary>Links</summary>
  
  - PyPI: https://pypi.org/project/django-extensions
  - Changelog: https://pyup.io/changelogs/django-extensions/
  - Repo: http://github.com/django-extensions/django-extensions
</details>

"
10426,django-oscar,django-oscar,5,closed,2678,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2678/comments,https://github.com/django-oscar/django-oscar/pull/2678,"[{""default"": false, ""name"": ""Feedback wanted"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/Feedback%20wanted"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw1MzE3ODM0MTM="", ""id"": 531783413}]","Fix error in Anonymous mode, rest_framework Request user is None","I tried to implement example from [https://django-oscar-api.readthedocs.io/en/latest/usage/customizing_oscarapi.html](https://django-oscar-api.readthedocs.io/en/latest/usage/customizing_oscarapi.html)

In anonymous mode I had an 500 error:
`File "".../django-oscar/src/oscar/apps/partner/strategy.py"", line 61, in __init__
    if request and request.user.is_authenticated:
AttributeError: 'NoneType' object has no attribute 'is_authenticated'`

partner.strategy is used a first time by basket.middleware and the request object is `django.core.handlers.wsgi.WSGIRequest` and user is a AnonymousUser object.

But in the example when we create the strategy object

`strategy = Selector().strategy(
            request=request, user=request.user)`

The request object is `rest_framework.request.Request`, in anonymous mode user is None.

The error is the same when we use `products/<id>/price` endpoint.
"
10439,django-oscar,django-oscar,5,closed,2664,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2664/comments,https://github.com/django-oscar/django-oscar/issues/2664,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Regression: price_excl_tax is necessary for availability,"I get to upgrade an old Oscar project, and that went really well. Thanks for keeping Oscar so backwards-compatible! I noticed just a small regression for a corner case:

I work on a project where it was essential that Oscar stores the tax-inclusive price and the price without tax is calculated. The reasoning is that the tax-inclusive prices are legally binding, and doing it this way ensures that a bug in the price calculation logic has less of an impact.

This was easily done by storing the price_incl_tax on the stock record, and writing a short pricing policy for it. But two recent changes [here](https://github.com/django-oscar/django-oscar/commit/82d9e7d2647ab50aacd653d21f93f8423f974fbf#diff-38aa6a43fa33c6bad17543acc1e24541) and [here](https://github.com/django-oscar/django-oscar/commit/3e4dda9a89a51323ea50d216bd895101aa014bbf#diff-38aa6a43fa33c6bad17543acc1e24541) make this harder, because they look at a `price_excl_tax` and assume because that is not set, the product is not available to buy. 

I'd like to argue that pricing and availability are concepts that should be kept separate, and the two commits linked above essentially bypass Oscar's pricing logic. 

My workaround was to backport the `StockRequired` policy from Oscar 1.4."
10445,django-oscar,django-oscar,5,closed,2658,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2658/comments,https://github.com/django-oscar/django-oscar/pull/2658,[],Remove extra closing paragraph tag.,Noticed an extra closing paragraph tag in the thank you template. Found this because Django's [`assertInHTML`](https://docs.djangoproject.com/en/2.0/topics/testing/tools/#django.test.SimpleTestCase.assertInHTML) raises `AssertionError`s on invalid html.
10462,django-oscar,django-oscar,5,closed,2640,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2640/comments,https://github.com/django-oscar/django-oscar/issues/2640,[],Error - Rebuild search index with django-oscar and Solr,"I'm following the django-oscar documentation to integrate solr with django-Oscar.It raises the following error when trying to rebuild the index.How can I fix this issue?

```
$python3 manage.py rebuild_index --noinput

Removing all documents from your index because you said so.

    Failed to clear Solr index: Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /project/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /project/solr-4.7.2/example/solr/collection1/schema.xml
        at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:368)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
        at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
        at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1014)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:748)
    Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /project/solr-4.7.2/example/solr/collection1/schema.xml
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
        at org.apache.solr.schema.IndexSchema.(IndexSchema.java:166)
        at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
        at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
        at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        ... 1 more
    Caused by: java.lang.RuntimeException: unknown field 'id'
        at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
        ... 13 more
    ,code=500}]
    Traceback (most recent call last):
      File ""/home/asanka/.local/lib/python3.5/site-packages/haystack/backends/solr_backend.py"", line 105, in clear
        self.conn.delete(q='*:*', commit=commit)
      File ""/home/asanka/.local/lib/python3.5/site-packages/pysolr.py"", line 948, in delete
        return self._update(m, commit=commit, softCommit=softCommit, waitFlush=waitFlush, waitSearcher=waitSearcher, handler=handler)
      File ""/home/asanka/.local/lib/python3.5/site-packages/pysolr.py"", line 488, in _update
        return self._send_request('post', path, message, {'Content-type': 'text/xml; charset=utf-8'})
      File ""/home/asanka/.local/lib/python3.5/site-packages/pysolr.py"", line 403, in _send_request
        raise SolrError(error_message % (resp.status_code, solr_message))
    pysolr.SolrError: Solr responded with an error (HTTP 500): [Reason: Error 500 {msg=SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/asanka/Music/devBranch/dailyDeal_v3/main_app/solr-4.7.2/example/solr/collection1/schema.xml,trace=org.apache.solr.common.SolrException: SolrCore 'collection1' is not available due to init failure: Schema Parsing Failed: unknown field 'id'. Schema file is /home/asanka/Music/devBranch/dailyDeal_v3/main_app/solr-4.7.2/example/solr/collection1/schema.xml
        at org.apache.solr.core.CoreContainer.getCore(CoreContainer.java:827)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:305)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:205)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
        at org.eclipse.jetty.server.Server.handle(Server.java:368)
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
        at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
        at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953)
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1014)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:748)
    Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is /home/asanka/Music/devBranch/dailyDeal_v3/main_app/solr-4.7.2/example/solr/collection1/schema.xml
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
        at org.apache.solr.schema.IndexSchema.(IndexSchema.java:166)
        at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
        at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
        at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        ... 1 more
    Caused by: java.lang.RuntimeException: unknown field 'id'
        at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
        ... 13 more
    ,code=500}]

All documents removed.

[schema.zip](https://github.com/django-oscar/django-oscar/files/1795821/schema.zip)

```"
10465,django-oscar,django-oscar,5,closed,2636,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2636/comments,https://github.com/django-oscar/django-oscar/pull/2636,[],missing pagination on offer dashboard views,"during development of large ecommerce site we ran into an exception
when accessing the list of offers and ranges:

AttributeError 'NoneType' object has no attribute 'paginator'
django_rangepaginator/templatetags/rangepaginator.py in paginate at line 12

This PR fixes all cases I could find where this happens, but chances are
some views need the same fix."
10466,django-oscar,django-oscar,5,closed,2635,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2635/comments,https://github.com/django-oscar/django-oscar/issues/2635,[],solr error. java.lang.RuntimeException: unknown field 'id',"I follow the instruction: [http://django-oscar.readthedocs.io/en/latest/howto/how_to_setup_solr.html](http://django-oscar.readthedocs.io/en/latest/howto/how_to_setup_solr.html)
And it raise Error:

> 2434 [coreLoadExecutor-4-thread-1] ERROR org.apache.solr.core.CoreContainer  – Unable to create core: collection1
org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is D:\grit\solr-4.7.2\example\solr\collection1\schema.xml
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
        at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
        at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
        at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
        at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)
Caused by: java.lang.RuntimeException: unknown field 'id'
        at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
        ... 13 more
2437 [coreLoadExecutor-4-thread-1] ERROR org.apache.solr.core.CoreContainer  – null:org.apache.solr.common.SolrException: Unable to create core: collection1
        at org.apache.solr.core.CoreContainer.recordAndThrow(CoreContainer.java:989)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:606)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:258)
        at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:250)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)
Caused by: org.apache.solr.common.SolrException: Schema Parsing Failed: unknown field 'id'. Schema file is D:\grit\solr-4.7.2\example\solr\collection1\schema.xml
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:618)
        at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:166)
        at org.apache.solr.schema.IndexSchemaFactory.create(IndexSchemaFactory.java:55)
        at org.apache.solr.schema.IndexSchemaFactory.buildIndexSchema(IndexSchemaFactory.java:69)
        at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:559)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:597)
        ... 8 more
Caused by: java.lang.RuntimeException: unknown field 'id'
        at org.apache.solr.schema.IndexSchema.getIndexedField(IndexSchema.java:340)
        at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:536)
        ... 13 more



"
10478,django-oscar,django-oscar,5,closed,2622,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2622/comments,https://github.com/django-oscar/django-oscar/pull/2622,[],Update django-extensions to 2.0.0,"
There's a new version of [django-extensions](https://pypi.python.org/pypi/django-extensions) available.
You are currently using **1.9.9**. I have updated it to **2.0.0**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-extensions"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-extensions/"">Changelog</a> | <a href=""http://github.com/django-extensions/django-extensions"">Repo</a> | <a href=""http://pythonhosted.org/django-extensions/"">Docs</a> 



### Changelog
> 
>### 2.0.0

>-----

>Changes:
>  - Fix: runserver_plus, for 1.11 still using MIDDLEWARE_CLASSES
>  - Fix: show_urls, Fix display in Django 2.0
>  - Fix: validate_templates, remove realpath in validate_templates
>  - Fix: sqldiff, bug with including proxy models in sqldiff output
>  - Improvement: shell_plus, allow configurating of sqlparse formatting and pygments formatting
>  - Improvement: shell_plus, add collision resolvers based on app label
>  - Improvement: shell_plus, automatic importing of subclasses defined in SHELL_PLUS_SUBCLASSES_IMPORT
>  - New: reset_schema, simple command to recreate public schema in PostgreSQL
>  - Docs: fix links to Werkzeug documentation








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10492,django-oscar,django-oscar,6,closed,2608,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2608/comments,https://github.com/django-oscar/django-oscar/issues/2608,[],Drop support for Python 2,"Oscar should drop support for Python 2 in version 1.7. Version 1.6 (which we hope to release soon) will continue to support Python 2 for as long as Django 1.11 (which supports Python 2) is maintained, but will only contain security and bug fixes. 

New features added to version 1.7 will  support Python 3 only.

This will enable us to simplify and rationalise the existing code base. It will also ensure that we are not blocked from upgrading upstream libraries, several of which have also switched to supporting Python 3 only."
10511,django-oscar,django-oscar,6,closed,2587,7,https://api.github.com/repos/django-oscar/django-oscar/issues/2587/comments,https://github.com/django-oscar/django-oscar/pull/2587,[],Fix Catalogue Migrations,"This PR will turn off `db_constraint` on `productimage.product` foreign key  before removing unique constraint and put it back on after unique constraint is removed. 

This has been reported on https://github.com/django-oscar/django-oscar/issues/2554 and seems to be related to https://bugs.mysql.com/bug.php?id=37910

It seems to affect MySQL only but the change should not negatively affect other engines. "
10530,django-oscar,django-oscar,6,closed,2568,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2568/comments,https://github.com/django-oscar/django-oscar/issues/2568,[],Documentation is unclear how to run tests.,"The documentation (http://django-oscar.readthedocs.io/en/releases-1.5/internals/contributing/running-tests.html says to run `$ py.test`.

    $ py.test
    -bash: py.test: command not found

Well, obviously you need to have `pytest` installed. Let's make a virtualenv:

    $ mkvirtualenv --python=python3 oscar-tests
    (oscar-tests) $ pip install pytest
    (oscar-tests) $ py.test
    Traceback (most recent call last):
    ...
    ImportError: No module named 'django'
    ERROR: could not load /Users/kees/Projects/django-oscar/tests/conftest.py
 
Well obviously, we need django and all other dependencies.

    (oscar-tests) $ pip install -r requirements.txt
    ...
    Could not find a version that satisfies the requirement transifex-client==0.13.0 (from -r requirements.txt (line 30)) (from versions: 0.1, 0.2, 0.2.1, 0.3, 0.4, 0.4.1, 0.5, 0.5.1, 0.5.2, 0.6, 0.6.1, 0.7, 0.7.2, 0.7.3, 0.8, 0.9, 0.9.1, 0.10, 0.11b0, 0.11b3, 0.11, 0.11.1b0, 0.12b0, 0.12.1, 0.12.2, 0.12.3, 0.12.4, 0.12.5)
No matching distribution found for transifex-client==0.13.0 (from -r requirements.txt (line 30))

Not sure if that's bad, but let's continue:

    (oscar-tests) $ py.test
    ...
    ImportError: No module named 'django'
    ERROR: could not load /Users/kees/Projects/django-oscar/tests/conftest.py

Wait what? Oh, django dependency is declared only in setup.py, which i haven't installed.

    (oscar-tests) $ pip install .
    ...
    Successfully installed Babel-2.5.3 Faker-0.8.10 Unidecode-0.4.21 django-1.11.9 django-extra-views-0.9.0 django-haystack-2.6.1 django-oscar-1.6.dev0 django-phonenumber-field-1.3.0 django-tables2-1.16.0 django-treebeard-4.2.0 django-widget-tweaks-1.4.1 factory-boy-2.9.2 mock-2.0.0 pbr-3.1.1 phonenumberslite-8.8.9 pillow-5.0.0 purl-1.3.1 python-dateutil-2.6.1 pytz-2017.3 sorl-thumbnail-12.4.1 text-unidecode-1.1
    (oscar-tests) $ py.test
    ...
    INTERNALERROR> django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No module named 'psycopg2'

Okay, another dependency, let's just install:

    (oscar-tests) $ pip install psycopg2
    ...
    Successfully installed psycopg2-2.7.3.2
    (oscar-tests) $ py.test
    /Users/kees/Projects/django-oscar/src/oscar/defaults.py:3: RemovedInDjango20Warning: Importing from django.core.urlresolvers is deprecated in favor of django.urls.
      from django.core.urlresolvers import reverse_lazy
    ================================================================================ test session starts ================================================================================
    platform darwin -- Python 2.7.10, pytest-3.3.2, py-1.5.2, pluggy-0.6.0
    rootdir: /Users/kees/Projects/django-oscar, inifile: setup.cfg
    plugins: django-3.1.2
    collected 840 items / 33 errors

    ====================================================================================== ERRORS =======================================================================================
    _________________________________________________________________ ERROR collecting tests/functional/test_basket.py __________________________________________________________________
    ImportError while importing test module '/Users/kees/Projects/django-oscar/tests/functional/test_basket.py'.
    Hint: make sure your test modules/packages have valid Python names.
    Traceback:
    tests/functional/test_basket.py:14: in <module>
        from oscar.test.utils import extract_cookie_value
    src/oscar/test/utils.py:6: in <module>
        from webob.compat import bytes_
    E   ImportError: No module named webob.compat
    ...
    E   ImportError: No module named 'django_webtest'
    ...
    E   ImportError: No module named 'webob'

At this point i'm thinking i'm missing something. I tried installing `pytest-django` to no avail."
10543,django-oscar,django-oscar,6,closed,2554,12,https://api.github.com/repos/django-oscar/django-oscar/issues/2554/comments,https://github.com/django-oscar/django-oscar/issues/2554,[],Django oscar got failed migration via using mysql as backend,"I am trying to use django with mysql and while I was trying to migrate it throws an error ie.

""mysql.connector.errors.DatabaseError: 1553 (HY000): Cannot drop index 'catalogue_productimage_product_id_display_order_2df78171_uniq': needed in a foreign key constraint"""
10559,django-oscar,django-oscar,6,closed,2537,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2537/comments,https://github.com/django-oscar/django-oscar/issues/2537,"[{""default"": false, ""name"": ""Feedback wanted"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/Feedback%20wanted"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw1MzE3ODM0MTM="", ""id"": 531783413}]",IOERROR at /en-gb/checkout/preview/,"I get a bug when testing on server which shows 
IOError at /en-gb/checkout/preview/

Request Method: | POST
-- | --
http://eemfashion.in/en-gb/checkout/preview/
1.11.4
IOError
[Errno 5] Input/output error
/usr/local/lib/python2.7/dist-packages/django/core/mail/backends/console.py in write_message, line 23
/usr/bin/python
2.7.12
['/root/eem/sandbox',  '/usr/local/bin',  '/usr/lib/python2.7',  '/usr/lib/python2.7/plat-x86_64-linux-gnu',  '/usr/lib/python2.7/lib-tk',  '/usr/lib/python2.7/lib-old',  '/usr/lib/python2.7/lib-dynload',  '/usr/local/lib/python2.7/dist-packages',  '/usr/local/lib/python2.7/dist-packages/setuptools-33.1.1-py2.7.egg',  '/root/eem/src',  '/usr/lib/python2.7/dist-packages']
Thu, 28 Dec 2017 10:56:36 +0000


but at local it works properly

Any fixes"
10581,django-oscar,django-oscar,7,closed,2515,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2515/comments,https://github.com/django-oscar/django-oscar/issues/2515,[],IOError at /en-gb/checkout/preview/,"hello,
This is the error I'm getting while confirming the order on my site while deployment on server.
please help,

IOError at /en-gb/checkout/preview/
[Errno 5] Input/output error
Request Method: | POST
-- | --
http://139********:8080/en-gb/checkout/preview/
1.11.7
IOError
[Errno 5] Input/output error
/usr/local/lib/python2.7/dist-packages/django/core/mail/backends/console.py in write_message, line 23
/usr/bin/python
2.7.12
['/root/quetalu/sandbox',  '/usr/local/bin',  '/root/quetalu/src',  '/usr/lib/python2.7',  '/usr/lib/python2.7/plat-x86_64-linux-gnu',  '/usr/lib/python2.7/lib-tk',  '/usr/lib/python2.7/lib-old',  '/usr/lib/python2.7/lib-dynload',  '/usr/local/lib/python2.7/dist-packages',  '/usr/lib/python2.7/dist-packages']"
10582,django-oscar,django-oscar,7,closed,2514,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2514/comments,https://github.com/django-oscar/django-oscar/issues/2514,[],operational error: no such table,"

hello everyone,
I have an error arising when I created new tables in forked partner model. The models work correctly until I use 'ManyToManyField'.
I want to create model in such a way that a new seller can create their profile and select their category(ies).

The error arises when I fill table with the multiple categories.

Please help
Thanks in advance

model.py
from django.db import models
from django_countries.fields import CountryField

class PartnerCategorie(models.Model):
    category = models.CharField(max_length=100)

    def __str__(self):
        return self.category

class RegisterPartner(models.Model):
    name = models.CharField(max_length=100)
    email = models.EmailField()
    contact = models.CharField(max_length=10)
    storeName = models.CharField(max_length=100)
    address1 = models.CharField(max_length=100)
    address2 = models.CharField(max_length=100, blank=True, null=True)
    city = models.CharField(max_length=20, default='New Delhi')
    country = CountryField(default=""India"")
    pincode = models.CharField(max_length=6)
    GST = models.CharField(max_length=30, null=True)
    PAN = models.CharField(max_length=30, null=True)
    state = models.CharField(max_length=30, default=""Delhi"")
    Category = models.ManyToManyField(PartnerCategorie)

    def __str__(self):
        return self.storeName

from oscar.apps.partner.models import *

admin.py
from oscar.apps.partner.admin import *  # noqa
from .models import RegisterPartner, PartnerCategorie

admin.site.register(PartnerCategorie)
admin.site.register(RegisterPartner)

output of PartnerRegister

Request Method: | POST
-- | --
http://127.0.0.1:8000/admin/partner/registerpartner/add/
1.11.8
OperationalError
no such table: partner_registerpartner_Category
/home/ankit/Desktop/oscar/oscar/django-oscar/oscar1/lib/python3.6/site-packages/django/db/backends/sqlite3/base.py in execute, line 328
/home/ankit/Desktop/oscar/oscar/django-oscar/oscar1/bin/python
3.6.3
['/home/ankit/Desktop/oscar/oscar/django-oscar/sandbox',  '/usr/lib/python36.zip',  '/usr/lib/python3.6',  '/usr/lib/python3.6/lib-dynload',  '/home/ankit/Desktop/oscar/oscar/django-oscar/oscar1/lib/python3.6/site-packages',  '/home/ankit/Desktop/oscar/try3/django-oscar/src']
Fri, 15 Dec 2017 08:00:06 +0000


whe"
10605,django-oscar,django-oscar,7,closed,2491,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2491/comments,https://github.com/django-oscar/django-oscar/pull/2491,[],Update django-debug-toolbar to 1.9.1,"
There's a new version of [django-debug-toolbar](https://pypi.python.org/pypi/django-debug-toolbar) available.
You are currently using **1.9**. I have updated it to **1.9.1**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 


*I couldn't find a changelog for this release. Do you know where I can find one? [Tell me!](https://github.com/pyupio/changelogs/issues/new)*


*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10606,django-oscar,django-oscar,7,closed,2490,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2490/comments,https://github.com/django-oscar/django-oscar/pull/2490,[],Update django-debug-toolbar to 1.9,"
There's a new version of [django-debug-toolbar](https://pypi.python.org/pypi/django-debug-toolbar) available.
You are currently using **1.8**. I have updated it to **1.9**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 



### Changelog
> 
>### 1.9

>---

>This version is compatible with Django 2.0 and requires Django 1.8 or
>later.

>Bugfixes
>~~~~~~~~

>* The profiling panel now escapes reported data resulting in valid HTML.
>* Many minor cleanups and bugfixes.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10607,django-oscar,django-oscar,7,closed,2489,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2489/comments,https://github.com/django-oscar/django-oscar/issues/2489,[],crash test oscar application,"ups.... sory this was format bugs(((

what i mean

i try create simpe test app:

```
from django.test import TestCase
from sophoshop.settings import *

class TestSettings(TestCase):
    def setUp(self):
        pass

    def test_ukraine_language(self):
        self.assertTrue(_(""Body Text"") == ""Текст Тіла"", 'Ukraine language fix error')
        pass

```
catch:

> django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.
what i do wrong, my settings:
[settings.zip](https://github.com/django-oscar/django-oscar/files/1449080/settings.zip)


1. why i get this message?
2. how i can check translate correct (i fix Ukraine language not working bug, https://github.com/mmmcorpsvit/sophoshop/issues/9 and https://github.com/django-oscar/django-oscar/issues/2465), i try create test for this)))"
10619,django-oscar,django-oscar,7,closed,2477,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2477/comments,https://github.com/django-oscar/django-oscar/issues/2477,[],Release with working dependencies for django 1.11,"Current oscar 1.5 (or git master) does not allow a clean install with django 1.11. There is only one django-haystack version (2.7.0.dev0) that supports django 1.11, and that version is disallowed in oscar's `setup.py`:

```
$ git clone git@github.com:django-oscar/django-oscar.git
$ cd django-oscar
$ git checkout 1.5
HEAD is now at 78bc24df5... Bump to 1.5.0
$ python setup.py install
running install
running bdist_egg
running egg_info
writing requirements to src/django_oscar.egg-info/requires.txt
[...]
Processing dependencies for django-oscar==1.5
[...]
error: Django 1.11.6 is installed but Django<1.11 is required by set(['django-haystack'])
$ pip freeze
Babel==2.5.1
Django==1.11.6
django-extra-views==0.6.4
django-haystack==2.6.1
django-oscar==1.5
django-phonenumber-field==1.3.0
django-tables2==1.13.0
django-treebeard==4.1.2
django-widget-tweaks==1.4.1
factory-boy==2.9.2
Faker==0.8.6
funcsigs==1.0.2
ipaddress==1.0.18
mock==2.0.0
olefile==0.44
pbr==3.1.1
phonenumberslite==8.8.4
Pillow==4.3.0
pkg-resources==0.0.0
purl==1.3.1
python-dateutil==2.6.1
pytz==2017.2
six==1.11.0
sorl-thumbnail==12.4a1
text-unidecode==1.0
Unidecode==0.4.21
$
```

Can we get a Oscar release that allows the django-haystack 2.7.0.dev0 version please? A patch release for oscar 1.5 would be sufficient, no need for an immediate 1.6 release."
10621,django-oscar,django-oscar,7,closed,2475,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2475/comments,https://github.com/django-oscar/django-oscar/pull/2475,[],Update django-extensions to 1.9.6,"
There's a new version of [django-extensions](https://pypi.python.org/pypi/django-extensions) available.
You are currently using **1.9.1**. I have updated it to **1.9.6**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-extensions"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-extensions/"">Changelog</a> | <a href=""http://github.com/django-extensions/django-extensions"">Repo</a> | <a href=""http://pythonhosted.org/django-extensions/"">Docs</a> 



### Changelog
> 
>### 1.9.6

>-----

>Fix boo-boo with release version in django_extensions/__init__.py




>### 1.9.4

>-----

>Changes:
> - Fix missing test case




>### 1.9.3

>-----

>Changes:
> - Tests: shell_plus, simple test for get_imported_objects




>### 1.9.2

>-----

>Changes:
> - Fix: mail_debug, regression in mail_debug for older Pythons
> - Fix: shell_plus, SyntaxError on exec(), python compatibility
> - Fix: ForeignKeyAutocompleteAdminMixin, use text/plain








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10627,django-oscar,django-oscar,7,closed,2469,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2469/comments,https://github.com/django-oscar/django-oscar/issues/2469,"[{""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Individual product class template partials - mismatch in docs,"Unless I'm missing something, there seems to be an error in the doc:

[The documentation on product partials](http://django-oscar.readthedocs.io/en/releases-1.5/howto/how_to_customise_templates.html#overriding-individual-products-partials) says:
*Apart from overriding catalogue/partials/product.html to change the looks for all products, you can also override it for individual products by placing templates in **catalogue/detail-for-upc-%s.html** or **catalogue/detail-for-class-%s.html**, where %s is the product's UPC or class's slug, respectively*

However, looking at the source of [product_tags.py](https://github.com/django-oscar/django-oscar/blob/1.5/src/oscar/templatetags/product_tags.py), line 21, different template files are searched:

    names = ['catalogue/partials/product/upc-%s.html' % product.upc,
                 'catalogue/partials/product/class-%s.html'
                 % product.get_product_class().slug,
                 'catalogue/partials/product.html']"
10637,django-oscar,django-oscar,7,closed,2459,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2459/comments,https://github.com/django-oscar/django-oscar/issues/2459,[],CSRF verification failed. Request aborted. for  DEBUG = False,"I am getting CSRF error while login or registration for DEBUG=False .

Forbidden (403)
CSRF verification failed. Request aborted.
More information is available with DEBUG=True.

I am using Django==1.11.5

someone please provide me the solution for this "
10641,django-oscar,django-oscar,7,closed,2455,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2455/comments,https://github.com/django-oscar/django-oscar/pull/2455,[],Update django-extensions to 1.9.1,"
There's a new version of [django-extensions](https://pypi.python.org/pypi/django-extensions) available.
You are currently using **1.9.0**. I have updated it to **1.9.1**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-extensions"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-extensions/"">Changelog</a> | <a href=""http://github.com/django-extensions/django-extensions"">Repo</a> | <a href=""http://pythonhosted.org/django-extensions/"">Docs</a> 



### Changelog
> 
>### 1.9.1

>-----

>Changes:
> - Fix: graph_models, fix json option
> - Fix: runserver_plus, avoid duplicate messages logged to console
> - Fix: mail_debug, python3 fix
> - Improvement: sqldiff, basic support for array types in postgresql
> - Improvement: runscript, handle import errors better
> - Docs: updated documentation for model extensions








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10657,django-oscar,django-oscar,7,closed,2439,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2439/comments,https://github.com/django-oscar/django-oscar/issues/2439,[],Documentation [Error],"Hi, just to let you know, there's an error in the Docs.

Note: In django 1.10 and above: make sure to replace MIDDLEWARE with MIDDLEWARE_CLASSES

Should be:

Note: In django 1.10 and above: make sure to replace **MIDDLEWARE_CLASSES** with **MIDDLEWARE**
"
10667,django-oscar,django-oscar,7,closed,2429,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2429/comments,https://github.com/django-oscar/django-oscar/issues/2429,[],'str' object has no attribute 'strategy' When Rendering Content Blocks,"I get the following error when attempting to access a page with a Product List content block. When I create the block, I place it onto `/` URL. Then, when I access the main page, I get the error. Are you aware of this, and how can I fix this?

> 
> Request Method: | GET
> -- | --
> http://localhost:8000/
> 1.10.7
> AttributeError
> 'str' object has no attribute 'strategy'
> /Users/userman/www/sites/Playground/Django-tut/django-oscar/django-oscar-env/lib/python3.6/site-packages/oscar/templatetags/purchase_info_tags.py  in purchase_info_for_product, line 13
> /Users/userman/www/sites/Playground/Django-tut/django-oscar/django-oscar-env/bin/python
> 3.6.0

"
10668,django-oscar,django-oscar,7,closed,2428,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2428/comments,https://github.com/django-oscar/django-oscar/issues/2428,[],Caching Error When Creating and Saving New Product,"I have discovered some weird behavior when I try to create a product in my local developement environment. Namely, if some of the fields on the `Stock and Pricing` tab are left unfilled and the Save button is pressed, the systems attempts to save the item but them bounces one to a 404 Page which says (using Django debug info) that `media/cache/long_image_name_here.jpg` is not found. 
When one diligently fills out all of the fields, the item is created successfully. 

> Page not found (404)

> Request Method: | GET
> -- | --
> http://localhost:8000/media/cache/99/2a/992ab059225fc7d7f9f81064e64e021d.jpg
> django.views.static.serve
> ""/Users/selfishman/www/sites/Playground/Django-tut/django-oscar/kindbook/media/cache/99/2a/992ab059225fc7d7f9f81064e64e021d.jpg"" does not exist
> 
> You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 404 page.




I believe this is simply an issue with reporting validation to the user properly and preventing the saving before all the needed fields are populated.

My dependencies on this fully stock project.

```
Babel==2.4.0
Django==1.10.7
django-appconf==1.0.2
django-compressor==2.1.1
django-extra-views==0.6.4
django-haystack==2.5.1
django-oscar==1.4
django-tables2==1.7.1
django-treebeard==4.1.1
django-widget-tweaks==1.4.1
factory-boy==2.8.1
Faker==0.7.13
mock==2.0.0
olefile==0.44
pbr==3.0.1
phonenumbers==8.5.0
Pillow==4.1.1
purl==1.3.1
pycountry==17.5.14
python-dateutil==2.6.0
pytz==2017.2
rcssmin==1.0.6
rjsmin==1.0.12
six==1.10.0
sorl-thumbnail==12.4a1
Unidecode==0.4.20
```
"
10669,django-oscar,django-oscar,7,closed,2427,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2427/comments,https://github.com/django-oscar/django-oscar/issues/2427,[],Templates Are Not Being Overriden ,"I am trying to embed the Django-Oscar system into a custom HTML template. When I do that, I create a directory `templates/oscar` inside my project's root and place the new template's `base.html` there. However, I am still seeing the Oscar's original template and styles displayed in the browser.

On the other hand, if I place the very same `base.html` directly into the root of the `templates` directory, it is shown, but is missing the static files.

If it helps, here are some settings:

```
# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))


INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.flatpages',
    'django.contrib.sites',
    
    'compressor',
    'widget_tweaks',
] + get_core_apps()

STATIC_URL = '/static/'

STATIC_ROOT = os.path.join(BASE_DIR, ""static"")

#This should be commented out in Development
STATICFILES_DIRS = [
  os.path.join(BASE_DIR, ""static""),
]

MEDIA_URL = ""/media/""

MEDIA_ROOT = os.path.join(BASE_DIR, ""media"")
```

What can I do to fix this? Does Oscar treat templates in some special way? Is this a Django bug? I am using Django 1.11."
10688,django-oscar,django-oscar,8,closed,2408,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2408/comments,https://github.com/django-oscar/django-oscar/issues/2408,[],"The 'send_confirmation_email' in sandbox gateway app, render must be a dict not context issue with Django 1.11","![sandbox_error](https://user-images.githubusercontent.com/9208031/27769585-8dc4601e-5f5f-11e7-8ae1-a1d85c19f709.png)

There is the same error in other project. [Django 1.11 Must be a dict not context issue.](https://github.com/zokis/django-materialize-forms/issues/3) 
"
10691,django-oscar,django-oscar,8,closed,2405,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2405/comments,https://github.com/django-oscar/django-oscar/issues/2405,[],"Can't create new ""options"" attribute from dashboard","Steps to reproduce:

1. Go to dashboard
2. Create new product type with attribute type 'Option'. Can't select any options at this step (how to add them?)
3. Trying to create some product of new type. 
4. Getting an error with traceback like this:
`Internal Server Error: /dashboard/catalogue/products/3/
Traceback (most recent call last):
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/views.py"", line 206, in dispatch
    request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 236, in get
    return super(BaseUpdateView, self).get(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 174, in get
    return self.render_to_response(self.get_context_data())
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/views.py"", line 261, in get_context_data
    ctx = super(ProductCreateUpdateView, self).get_context_data(**kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 93, in get_context_data
    kwargs['form'] = self.get_form()
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 45, in get_form
    return form_class(**self.get_form_kwargs())
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 264, in __init__
    self.add_attribute_fields(product_class, self.instance.is_parent)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 305, in add_attribute_fields
    field = self.get_attribute_field(attribute)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 316, in get_attribute_field
    return self.FIELD_FACTORIES[attribute.type](attribute)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 192, in _attr_option_field
    queryset=attribute.option_group.options.all())
AttributeError: 'NoneType' object has no attribute 'options'
ERROR:django.request:Internal Server Error: /dashboard/catalogue/products/3/
Traceback (most recent call last):
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/views.py"", line 206, in dispatch
    request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 236, in get
    return super(BaseUpdateView, self).get(request, *args, **kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 174, in get
    return self.render_to_response(self.get_context_data())
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/views.py"", line 261, in get_context_data
    ctx = super(ProductCreateUpdateView, self).get_context_data(**kwargs)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 93, in get_context_data
    kwargs['form'] = self.get_form()
  File ""/home/kosc/.local/lib64/python3.5/site-packages/django/views/generic/edit.py"", line 45, in get_form
    return form_class(**self.get_form_kwargs())
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 264, in __init__
    self.add_attribute_fields(product_class, self.instance.is_parent)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 305, in add_attribute_fields
    field = self.get_attribute_field(attribute)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 316, in get_attribute_field
    return self.FIELD_FACTORIES[attribute.type](attribute)
  File ""/home/kosc/.local/lib64/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py"", line 192, in _attr_option_field
    queryset=attribute.option_group.options.all())
AttributeError: 'NoneType' object has no attribute 'options'
`"
10735,django-oscar,django-oscar,8,closed,2361,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2361/comments,https://github.com/django-oscar/django-oscar/issues/2361,[],Authentication does not work,"When I tried to do an initial setup of the application based on the documentation, I came across this error when trying to sign in to dashboard:

```
Internal Server Error: /dashboard/login/
Traceback (most recent call last):
  File ""/home/eshop/env/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/contrib/auth/views.py"", line 54, in inner
    return func(*args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/contrib/auth/views.py"", line 139, in login
    return LoginView.as_view(**kwargs)(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/views/decorators/debug.py"", line 76, in sensitive_post_parameters_wrapper
    return view(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/views/decorators/cache.py"", line 57, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/contrib/auth/views.py"", line 90, in dispatch
    return super(LoginView, self).dispatch(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/views/generic/edit.py"", line 182, in post
    if form.is_valid():
  File ""/home/eshop/env/lib/python3.5/site-packages/django/forms/forms.py"", line 183, in is_valid
    return self.is_bound and not self.errors
  File ""/home/eshop/env/lib/python3.5/site-packages/django/forms/forms.py"", line 175, in errors
    self.full_clean()
  File ""/home/eshop/env/lib/python3.5/site-packages/django/forms/forms.py"", line 385, in full_clean
    self._clean_form()
  File ""/home/eshop/env/lib/python3.5/site-packages/django/forms/forms.py"", line 412, in _clean_form
    cleaned_data = self.clean()
  File ""/home/eshop/env/lib/python3.5/site-packages/django/contrib/auth/forms.py"", line 187, in clean
    self.user_cache = authenticate(self.request, username=username, password=password)
  File ""/home/eshop/env/lib/python3.5/site-packages/django/contrib/auth/__init__.py"", line 100, in authenticate
    user = backend.authenticate(*args, **credentials)
  File ""/home/eshop/env/lib/python3.5/site-packages/oscar/apps/customer/auth_backends.py"", line 31, in authenticate
    clean_email = normalise_email(email)
  File ""/home/eshop/env/lib/python3.5/site-packages/oscar/apps/customer/utils.py"", line 130, in normalise_email
    clean_email = email.strip()
AttributeError: 'WSGIRequest' object has no attribute 'strip'
```

I am using Django 1.11 and in settings:

```
AUTHENTICATION_BACKENDS = (
    'oscar.apps.customer.auth_backends.EmailBackend',
    'django.contrib.auth.backends.ModelBackend',
)
```"
10745,django-oscar,django-oscar,8,closed,2351,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2351/comments,https://github.com/django-oscar/django-oscar/pull/2351,[],Update django-debug-toolbar to 1.8,"
There's a new version of [django-debug-toolbar](https://pypi.python.org/pypi/django-debug-toolbar) available.
You are currently using **1.7**. I have updated it to **1.8**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 



### Changelog
> 
>### 1.8

>---

>This version is compatible with Django 1.11 and requires Django 1.8 or
>later.

>Features
>~~~~~~~~

>* New decorator ``debug_toolbar.decorators.require_show_toolbar`` prevents
>  unauthorized access to decorated views by checking ``SHOW_TOOLBAR_CALLBACK``
>  every request. Unauthorized access results in a 404.
>* The ``SKIP_TEMPLATE_PREFIXES`` setting allows skipping templates in
>  the templates panel. Template-based form widgets&#39; templates are
>  skipped by default to avoid panel sizes going into hundreds of
>  megabytes of HTML.

>Bugfixes
>~~~~~~~~

>* All views are now decorated with
>  ``debug_toolbar.decorators.require_show_toolbar`` preventing unauthorized
>  access.
>* The templates panel now reuses contexts&#39; pretty printed version which
>  makes the debug toolbar usable again with Django 1.11&#39;s template-based
>  forms rendering.
>* Long SQL statements are now forcibly wrapped to fit on the screen.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10755,django-oscar,django-oscar,8,closed,2341,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2341/comments,https://github.com/django-oscar/django-oscar/pull/2341,[],Update django-debug-toolbar to 1.7,"
There's a new version of [django-debug-toolbar](https://pypi.python.org/pypi/django-debug-toolbar) available.
You are currently using **1.6**. I have updated it to **1.7**



These links might come in handy:  <a href=""https://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 



### Changelog
> 
>### 1.7

>---

>Bugfixes
>~~~~~~~~

>* Recursive template extension is now understood.
>* Deprecation warnings were fixed.
>* The SQL panel uses HMAC instead of simple hashes to verify that SQL
>  statements have not been changed. Also, the handling of bytes and text
>  for hashing has been hardened. Also, a bug with Python&#39;s division
>  handling has been fixed for improved Python 3 support.
>* An error with django-jinja has been fixed.
>* A few CSS classes have been prefixed with ``djdt-`` to avoid
>  conflicting class names.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10775,django-oscar,django-oscar,8,closed,2319,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2319/comments,https://github.com/django-oscar/django-oscar/issues/2319,[],CatalogueImportError will never being raised during catalogue import,"So, this code https://github.com/django-oscar/django-oscar/blob/master/src/oscar/management/commands/oscar_import_catalogue.py#L41 will never executed, because `CatalogueImportError` exception class didn't even imported in the `partner.importer` module. Instead of this, `ImportingError` used, but there are no places where it can be caught. 

It would be great to get explanations on this exceptions and how to use it properly."
10802,django-oscar,django-oscar,9,closed,2291,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2291/comments,https://github.com/django-oscar/django-oscar/issues/2291,[],possible dependancy error,"I was following the instructions on your readthedocs.io to install a new site

I used pip install Django-Oscar

looks like this is my version
django-oscar==1.4

when I ran python migrate.py

I get:

`  File ""C:\Users\mamwo\Desktop\frobshop\venv\lib\site-packages\oscar\apps\basket\abstract_models.py"", line 18, in <module>
    from oscar.templatetags.currency_filters import currency
ImportError: No module named templatetags.currency_filters`


when I look at venv/Lib/site-packages/Oscar/   I have no templatetags module

But if I look at GitHub it is there

this templatetags import is in a lot of places in the code but the template tags folder is nowhere to be found"
10804,django-oscar,django-oscar,9,closed,2289,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2289/comments,https://github.com/django-oscar/django-oscar/issues/2289,[],ProductImage display_order is broken if images are simultaneously added and deleted from the dashboard,"Using django oscar 1.1.1, I get the following error:
```
duplicate key value violates unique constraint ""catalogue_productimage_product_id_1ade50c7ba4a8344_uniq""
DETAIL:  Key (product_id, display_order)=(4746, 2) already exists.
```

This happens when I try to upload an image to a product, on which I have previously deleted and uploaded an image at the same time (successfully).
"
10830,django-oscar,django-oscar,9,closed,2263,8,https://api.github.com/repos/django-oscar/django-oscar/issues/2263/comments,https://github.com/django-oscar/django-oscar/issues/2263,[],Django Oscar doesn't see products,"I was added a new category, then I was added product type, then I was added a product. [*screenshoot](https://i.stack.imgur.com/FrkSU.png)

I can see my new category, but there is no products at all [*screenshoot](https://i.stack.imgur.com/tVOg3.png)

But, I can view it on my site follow link localhost:8080/catalogue/zelenaia-kraska_6/ 
I get this link from dashboard (product -> actions -> view on site)

How to fix this problem? 

CONSOLE:
```python
`Failed to query Solr using '*:*': Failed to connect to server at 'http://127.0.0.1:8983/solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1', are you sure that URL is correct? Checking it in a browser might help: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c746459e8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/connection.py"", line 83, in create_connection
    raise err
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/connection.py"", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 600, in urlopen
    chunked=chunked)
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 356, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File ""/usr/lib/python3.4/http/client.py"", line 1090, in request
    self._send_request(method, url, body, headers)
  File ""/usr/lib/python3.4/http/client.py"", line 1128, in _send_request
    self.endheaders(body)
  File ""/usr/lib/python3.4/http/client.py"", line 1086, in endheaders
    self._send_output(message_body)
  File ""/usr/lib/python3.4/http/client.py"", line 924, in _send_output
    self.send(msg)
  File ""/usr/lib/python3.4/http/client.py"", line 859, in send
    self.connect()
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 166, in connect
    conn = self._new_conn()
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 150, in _new_conn
    self, ""Failed to establish a new connection: %s"" % e)
requests.packages.urllib3.exceptions.NewConnectionError: <requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c746459e8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/adapters.py"", line 423, in send
    timeout=timeout
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 649, in urlopen
    _stacktrace=sys.exc_info()[2])
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/retry.py"", line 376, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
requests.packages.urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c746459e8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 366, in _send_request
    timeout=self.timeout)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 501, in get
    return self.request('GET', url, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 488, in request
    resp = self.send(prep, **send_kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 609, in send
    r = adapter.send(request, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/adapters.py"", line 487, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c746459e8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/haystack/backends/solr_backend.py"", line 134, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 720, in search
    response = self._select(params, handler=search_handler)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 418, in _select
    return self._send_request('get', path)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 375, in _send_request
    raise SolrError(error_message % params)
pysolr.SolrError: Failed to connect to server at 'http://127.0.0.1:8983/solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1', are you sure that URL is correct? Checking it in a browser might help: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=1&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c746459e8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Failed to query Solr using '*:*': Failed to connect to server at 'http://127.0.0.1:8983/solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1', are you sure that URL is correct? Checking it in a browser might help: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c745e16d8>: Failed to establish a new connection: [Errno 111] Connection refused',))
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 141, in _new_conn
    (self.host, self.port), self.timeout, **extra_kw)
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/connection.py"", line 83, in create_connection
    raise err
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/connection.py"", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 600, in urlopen
    chunked=chunked)
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 356, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File ""/usr/lib/python3.4/http/client.py"", line 1090, in request
    self._send_request(method, url, body, headers)
  File ""/usr/lib/python3.4/http/client.py"", line 1128, in _send_request
    self.endheaders(body)
  File ""/usr/lib/python3.4/http/client.py"", line 1086, in endheaders
    self._send_output(message_body)
  File ""/usr/lib/python3.4/http/client.py"", line 924, in _send_output
    self.send(msg)
  File ""/usr/lib/python3.4/http/client.py"", line 859, in send
    self.connect()
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 166, in connect
    conn = self._new_conn()
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connection.py"", line 150, in _new_conn
    self, ""Failed to establish a new connection: %s"" % e)
requests.packages.urllib3.exceptions.NewConnectionError: <requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c745e16d8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/requests/adapters.py"", line 423, in send
    timeout=timeout
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/connectionpool.py"", line 649, in urlopen
    _stacktrace=sys.exc_info()[2])
  File ""/usr/local/lib/python3.4/dist-packages/requests/packages/urllib3/util/retry.py"", line 376, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
requests.packages.urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c745e16d8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 366, in _send_request
    timeout=self.timeout)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 501, in get
    return self.request('GET', url, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 488, in request
    resp = self.send(prep, **send_kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/sessions.py"", line 609, in send
    r = adapter.send(request, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/requests/adapters.py"", line 487, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c745e16d8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/haystack/backends/solr_backend.py"", line 134, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 720, in search
    response = self._select(params, handler=search_handler)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 418, in _select
    return self._send_request('get', path)
  File ""/usr/local/lib/python3.4/dist-packages/pysolr.py"", line 375, in _send_request
    raise SolrError(error_message % params)
pysolr.SolrError: Failed to connect to server at 'http://127.0.0.1:8983/solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1', are you sure that URL is correct? Checking it in a browser might help: HTTPConnectionPool(host='127.0.0.1', port=8983): Max retries exceeded with url: /solr/select/?spellcheck=true&facet.query=price_exact%3A%5B0+TO+20%5D&facet.query=price_exact%3A%5B20+TO+40%5D&facet.query=price_exact%3A%5B40+TO+60%5D&facet.query=price_exact%3A%5B60+TO+%2A%5D&rows=0&fl=%2A+score&facet=on&facet.field=rating_exact&facet.field=product_class_exact&q=%2A%3A%2A&spellcheck.collate=true&wt=json&start=0&fq=category_exact%3A%28%22%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%22%29&fq=django_ct%3A%28catalogue.product%29&spellcheck.count=1 (Caused by NewConnectionError('<requests.packages.urllib3.connection.HTTPConnection object at 0x7f4c745e16d8>: Failed to establish a new connection: [Errno 111] Connection refused',))
/usr/lib/python3.4/importlib/_bootstrap.py:321: RemovedInDjango110Warning: django.core.context_processors is deprecated in favor of django.template.context_processors.
  return f(*args, **kwds)

[11/Mar/2017 20:34:38] ""GET /catalogue/category/glavnoe_2/ HTTP/1.1"" 200 25858
Not Found: /media/cache/17/d5/17d59725435216b0e455fcb9659a84f3.jpg
Internal Server Error: /media/cache/17/d5/17d59725435216b0e455fcb9659a84f3.jpg
Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/sites/models.py"", line 44, in _get_site_by_request
    SITE_CACHE[host] = self.get(domain__iexact=host)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/manager.py"", line 122, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/query.py"", line 387, in get
    self.model._meta.object_name
django.contrib.sites.models.DoesNotExist: Site matching query does not exist.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/usr/local/lib/python3.4/dist-packages/django/core/handlers/base.py"", line 235, in get_response
    response = middleware_method(request, response)
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/flatpages/middleware.py"", line 11, in process_response
    return flatpage(request, request.path_info)
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/flatpages/views.py"", line 35, in flatpage
    site_id = get_current_site(request).id
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/sites/shortcuts.py"", line 15, in get_current_site
    return Site.objects.get_current(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/sites/models.py"", line 67, in get_current
    return self._get_site_by_request(request)
  File ""/usr/local/lib/python3.4/dist-packages/django/contrib/sites/models.py"", line 52, in _get_site_by_request
    SITE_CACHE[domain] = self.get(domain__iexact=domain)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/manager.py"", line 122, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/usr/local/lib/python3.4/dist-packages/django/db/models/query.py"", line 387, in get
    self.model._meta.object_name
django.contrib.sites.models.DoesNotExist: Site matching query does not exist.
[11/Mar/2017 20:34:39] ""GET /media/cache/17/d5/17d59725435216b0e455fcb9659a84f3.jpg HTTP/1.1"" 500 128371
[11/Mar/2017 20:34:39] ""GET /static/oscar/favicon.ico HTTP/1.1"" 200 1150`
```"
10832,django-oscar,django-oscar,9,closed,2261,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2261/comments,https://github.com/django-oscar/django-oscar/pull/2261,[],Update django-debug-toolbar to 1.7,"
There's a new version of [django-debug-toolbar](https://pypi.python.org/pypi/django-debug-toolbar) available.
You are currently using **1.6**. I have updated it to **1.7**



These links might come in handy:  <a href=""http://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 



### Changelog
> 
>### 1.7

>---

>Bugfixes
>~~~~~~~~

>* Recursive template extension is now understood.
>* Deprecation warnings were fixed.
>* The SQL panel uses HMAC instead of simple hashes to verify that SQL
>  statements have not been changed. Also, the handling of bytes and text
>  for hashing has been hardened. Also, a bug with Python&#39;s division
>  handling has been fixed for improved Python 3 support.
>* An error with django-jinja has been fixed.
>* A few CSS classes have been prefixed with ``djdt-`` to avoid
>  conflicting class names.







*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10841,django-oscar,django-oscar,9,closed,2252,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2252/comments,https://github.com/django-oscar/django-oscar/pull/2252,[],Update django-extensions to 1.7.7,"
There's a new version of [django-extensions](https://pypi.python.org/pypi/django-extensions) available.
You are currently using **1.7.6**. I have updated it to **1.7.7**



These links might come in handy:  <a href=""http://pypi.python.org/pypi/django-extensions"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-extensions/"">Changelog</a> | <a href=""http://github.com/django-extensions/django-extensions"">Repo</a> | <a href=""http://pythonhosted.org/django-extensions/"">Docs</a> 



### Changelog
> 
>### 1.7.7

>-----

>Changes:
> - Improvement: admin_generator, use decorator style for registring ModelAdmins.
> - Improvement: sqldiff, quote tablename for PRAGMA in sqlite
> - Fix: graph_models, Fix `attributes` referenced before assignment
> - Fix: pipchecker, Fix AttributeError caused by missing method








*Got merge conflicts? Close this PR and delete the branch. I'll create a new PR for you.*

Happy merging! 🤖
"
10859,django-oscar,django-oscar,9,closed,2234,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2234/comments,https://github.com/django-oscar/django-oscar/issues/2234,[],build_submission error,"Hi,
You've changed ```get_order_totals``` call from (1.3)
```
total = self.get_order_totals( basket, shipping_charge=shipping_charge)
```
to (master branch)
```
total = self.get_order_totals( basket, shipping_charge=shipping_charge, **kwargs)
```
In apps.checkout.session.CheckoutSessionMixin.
So, the problem is when you call build_submission with basket passed in kwargs.
You are given ```django oscar get order_totals() got multiple values for argument 'basket'``` error when call ```get_order_totals``` because basek is passed twice ones as positional arg the second in kwargs.

For my own workaround I've just removed ``**kwargs```. The right way how to solve it is up to you.

Of course it is possible that I'm wrong and I try to use build_submission in strange way.

Regards
Jarek



```python
   def build_submission(self, **kwargs):
        """"""
        Return a dict of data that contains everything required for an order
        submission.  This includes payment details (if any).
        This can be the right place to perform tax lookups and apply them to
        the basket.
        """"""
--->        basket = kwargs.get('basket', self.request.basket)
        shipping_address = self.get_shipping_address(basket)
        shipping_method = self.get_shipping_method(
            basket, shipping_address)
        billing_address = self.get_billing_address(shipping_address)
        if not shipping_method:
            total = shipping_charge = None
        else:
            shipping_charge = shipping_method.calculate(basket)
--->            total = self.get_order_totals( basket, shipping_charge=shipping_charge, **kwargs)
```"
10864,django-oscar,django-oscar,9,closed,2229,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2229/comments,https://github.com/django-oscar/django-oscar/issues/2229,[],Unused settings feature,"For django-debug-toolbar 1.6 DEBUG_TOOLBAR_PATCH_SETTINGS unused.

So plz remove it from sandbox settings.py file

DEBUG_TOOLBAR_PATCH_SETTINGS = False
https://github.com/django-oscar/django-oscar/blob/master/sandbox/settings.py#L326

http://django-debug-toolbar.readthedocs.io/en/stable/changes.html?highlight=DEBUG_TOOLBAR_PATCH_SETTINGS#removed-features"
10869,django-oscar,django-oscar,9,closed,2223,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2223/comments,https://github.com/django-oscar/django-oscar/issues/2223,[],TypeError: 'dict_values' object is not subscriptable,"https://sentry.io/django-oscar/sandbox/issues/213918648/

```
TypeError: 'dict_values' object is not subscriptable
(6 additional frame(s) were not displayed)
...
  File ""oscar/apps/dashboard/reports/views.py"", line 51, in get
    context = self.get_context_data(object_list=self.queryset)

TypeError: 'dict_values' object is not subscriptable
```"
10872,django-oscar,django-oscar,9,closed,2220,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2220/comments,https://github.com/django-oscar/django-oscar/pull/2220,[],Initial Update,"
This is my first visit to this fine repo so I have bundled all updates in a single pull request to make things easier for you to merge. 

*Close this pull request and delete the branch if you want me to start with single pull requests right away*

Here's the executive summary:

## Updates
Here's a list of all the updates bundled in this pull request. I've added some links to make it easier for you to find all the information you need.
<table align=""center"">

<tr>
<td><b>django-debug-toolbar</b></td>
<td align=""center"">1.5.0</td>
<td align=""center"">&raquo;</td>
<td align=""center"">1.6</td>
<td>
     <a href=""http://pypi.python.org/pypi/django-debug-toolbar"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-debug-toolbar/"">Changelog</a> | <a href=""https://github.com/jazzband/django-debug-toolbar"">Repo</a> 

</td>

<tr>
<td><b>django-extensions</b></td>
<td align=""center"">1.6.1</td>
<td align=""center"">&raquo;</td>
<td align=""center"">1.7.6</td>
<td>
     <a href=""http://pypi.python.org/pypi/django-extensions"">PyPI</a> | <a href=""https://pyup.io/changelogs/django-extensions/"">Changelog</a> | <a href=""http://github.com/django-extensions/django-extensions"">Repo</a> | <a href=""http://pythonhosted.org/django-extensions/"">Docs</a> 

</td>

<tr>
<td><b>Werkzeug</b></td>
<td align=""center"">0.9.6</td>
<td align=""center"">&raquo;</td>
<td align=""center"">0.11.15</td>
<td>
     <a href=""http://pypi.python.org/pypi/Werkzeug"">PyPI</a> | <a href=""https://pyup.io/changelogs/werkzeug/"">Changelog</a> | <a href=""http://werkzeug.pocoo.org/"">Homepage</a> 

</td>

<tr>
<td><b>Whoosh</b></td>
<td align=""center"">2.6.0</td>
<td align=""center"">&raquo;</td>
<td align=""center"">2.7.4</td>
<td>
     <a href=""http://pypi.python.org/pypi/Whoosh"">PyPI</a> | <a href=""http://bitbucket.org/mchaput/whoosh"">Repo</a> | <a href=""http://pythonhosted.org/Whoosh/"">Docs</a> 

</td>

<tr>
<td><b>pysolr</b></td>
<td align=""center"">3.2.0</td>
<td align=""center"">&raquo;</td>
<td align=""center"">3.6.0</td>
<td>
     <a href=""http://pypi.python.org/pypi/pysolr"">PyPI</a> | <a href=""https://pyup.io/changelogs/pysolr/"">Changelog</a> | <a href=""https://github.com/django-haystack/pysolr/"">Repo</a> 

</td>

<tr>
<td><b>requests</b></td>
<td align=""center"">2.10.0</td>
<td align=""center"">&raquo;</td>
<td align=""center"">2.13.0</td>
<td>
     <a href=""http://pypi.python.org/pypi/requests"">PyPI</a> | <a href=""https://pyup.io/changelogs/requests/"">Changelog</a> | <a href=""http://python-requests.org"">Homepage</a> 

</td>

<tr>
<td><b>uWSGI</b></td>
<td align=""center"">2.0.13.1</td>
<td align=""center"">&raquo;</td>
<td align=""center"">2.0.14</td>
<td>
     <a href=""http://pypi.python.org/pypi/uWSGI"">PyPI</a> | <a href=""UNKNOWN"">Homepage</a> 

</td>

<tr>
<td><b>pyprof2calltree</b></td>
<td align=""center"">1.3.2</td>
<td align=""center"">&raquo;</td>
<td align=""center"">1.4.0</td>
<td>
     <a href=""http://pypi.python.org/pypi/pyprof2calltree"">PyPI</a> | <a href=""http://github.com/pwaller/pyprof2calltree/"">Repo</a> 

</td>

<tr>
<td><b>PyMySQL</b></td>
<td align=""center"">0.6.2</td>
<td align=""center"">&raquo;</td>
<td align=""center"">0.7.9</td>
<td>
     <a href=""http://pypi.python.org/pypi/PyMySQL"">PyPI</a> | <a href=""https://pyup.io/changelogs/pymysql/"">Changelog</a> | <a href=""https://github.com/PyMySQL/PyMySQL/"">Repo</a> 

</td>

<tr>
<td><b>psycopg2</b></td>
<td align=""center"">2.4.5</td>
<td align=""center"">&raquo;</td>
<td align=""center"">2.6.2</td>
<td>
     <a href=""http://pypi.python.org/pypi/psycopg2"">PyPI</a> | <a href=""https://pyup.io/changelogs/psycopg2/"">Changelog</a> | <a href=""http://initd.org/psycopg/"">Homepage</a> | <a href=""http://pythonhosted.org/psycopg2/"">Docs</a> 

</td>

</tr>
</table>



## Changelogs


### django-debug-toolbar 1.5.0 -> 1.6

>### 1.6

>---

>The debug toolbar was adopted by jazzband.

>Removed features
>~~~~~~~~~~~~~~~~

>* Support for automatic setup has been removed as it was frequently
>  problematic. Installation now requires explicit setup. The
>  ``DEBUG_TOOLBAR_PATCH_SETTINGS`` setting has also been removed as it is now
>  unused. See the :doc:`installation documentation &lt;installation&gt;` for details.

>Bugfixes
>~~~~~~~~

>* The ``DebugToolbarMiddleware`` now also supports Django 1.10&#39;s ``MIDDLEWARE``
>  setting.







### django-extensions 1.6.1 -> 1.7.6

>### 1.7.6

>-----

>Changes:
> - Improvement: sqldiff, ignore proxy models in diff (with cli option to include them if wanted)




>### 1.7.5

>-----

>Changes:
> - New: ForeignKeyAutocompleteAdmin, Add autocomplete for inline model admins
> - Improvement: graph_models, Rewrite modelviz module from method to class based processor
> - Improvement: db fields, make MAX_UNIQUE_QUERY_ATTEMPTS configurable per field and via settings
> - Improvement: runserver_plus, Added nopin option to disable pin
> - Fix: graph_models, Support PyDot 1.2.0 and higher
> - Fix: shell_plus, Fix that aliases from SHELL_PLUS_MODEL_ALIASES were not applied
> - Removed: validate_templatetags, remove support for pre django-1.5 style {% url %} tags
> - Cleanup: removing support for end-of-life Python 3.2
> - Docs: simplify installation instructions
> - Docs: fix example for NOTEBOOK_ARGUMENTS
> - Docs: Remove extraneous &#39;}&#39; characters from shell_plus docs




>### 1.7.4

>-----

>Changes:
> - Improvement: show_urls, support --no-color option
> - Fix: notes, Fix reading templates setting after django 1.8
> - Fix: create_app, Fixed typo in deprecation warning
> - Fix: shell_plus, Use new location for url reverse import
> - Docs: some commands where missing from the docs
> - Docs: runscript, added documentation for --traceback




>### 1.7.3

>-----

>Changes:
> - Fix: ForeignKeySearchInput, fix bug with constructing search_path urls
> - Docs: runscript, fix runscript example
> - Deprecation: JSONField, Django now includes JSONField our field is now deprecated




>### 1.7.2

>-----

>Changes:
> - Fix: passwd, Update passwd command up to Django&gt;=1.8
> - Improvement: shell_plus, add settings.SHELL_PLUS_PRINT_SQL config option
> - Improvement: shell_plus, allow to specifies the connection file to use if using the --kernel option




>### 1.7.1

>-----

>Changes:
> - Fix: sqldiff, fix optional app_label arguments
> - Fix: runscript, remove args from command class
> - Doc: runscript, remove = from --script-args example




>### 1.7.0

>-----

>The &quot;Letting go of the past&quot; release.

>From this moment on Django Extensions requires version 1.8 or higher.
>A lot of work has been done to remove old backwards compatibility code and
>make sure that Django Extensions uses the current Django API&#39;s. This should
>result in better and easier to maintain code (and hopefully less bugs :).

>This release touches a lot of code if you have any issues please report them
>at https://github.com/django-extensions/django-extensions/issues

>We still need more tests to make sure we don&#39;t break people&#39;s projects when
>refactoring. If you have some spare time please contribute tests !

>Changes:
> - Cleanup: removing backwards compatibility hacks for (now) unsupported versions of Django
> - Cleanup: use six instead of home grown functions
> - Fix: AutoSlugField, allow_duplicates didn&#39;t set slug value to model instance
> - Fix: MongoDB fields, verbose_name on mongoengine fields does not seem to be supported
> - Fix: MongoDB fields, fix relative import problem with json.py
> - Improvement: Start using pre-commit
> - Improvement: syncdata, Replace custom transaction logic with transaction.atomic
> - Improvement: Django 1.10, use from_db_value instead of models.SubfieldBase
> - Improvement: print_user_session, support for non standard user model
> - Improvement: widont, tests to work with py2 and py3
> - Improvement: runserver_plus, prevent 2nd reload of debugger on runserver_plus
> - Improvement: runserver_plus, prevent killing the server when request.META values are evaluated
> - Improvement: reset_db, add argument to make closing sessions optional
> - Improvement: print_settings, Fix positional arguments
> - Improvement: runscript, migrate to argparse and add_arguments
> - Improvement: graph_models, do not rely on .models_module for inclusion in output
> - Improvement: jsonfield, fix issues with mutable default
> - Docs: Convert readthedocs links for their .org -&gt; .io migration




>### 1.6.7

>-----

>Changes:
> - Fix: describe_form, fix No module named &#39;django.db.models.loading&#39; error
> - Improvement: shell_plus,  Add a setting to prefix all models in an application 887
> - Improvement: pipchecker, check for requirements-{dev,prod}.txt as well
> - Docs: pipchecker, update documentation



>### 1.6.6

>-----

>Changes:
> - Fix: admin_generator, fix for using all apps in Django &lt;1.7
> - Fix: dump_script, fix for using all apps in Django &lt;1.7
> - Fix: UniqueFieldMixin, resolve get_fields_with_model deprecation Django 1.10
> - Fix: runprofileserver, Fix call grind format to enable source code navigation in qcachegrind.
> - Docs: runserver_plus, add a little note about the debugger PIN.




>### 1.6.5

>-----

>Bumped version number since PyPi returns 500 errors while uploading packages :(




>### 1.6.4

>-----

>Changes:
> - Fix: jobs cache_cleanup, use `caches` instead of deprecated `get_cache`
> - Fix: ModificationDateTimeField, missing default value for `update_modified`
> - Fix: modelviz, use get_model_compat and look up missing app_label
> - Fix: modelviz, use get_models_for_app instead of get_models_compat
> - Fix: dumpscript, use `list_app_labels` instead of `get_apps` when no app_labels are given
> - Improvement: compat.py, move code from try to else block for Django 1.7+
> - Docstring: get_models_for_app, clearify argument




>### 1.6.3

>-----

>Bumped version number for incomplete PyPi uplaod



>### 1.6.2

>-----

>The long over due release :-)

>Changes:
> - Fix: JsonFields, do not parse floats as decimals. This fixes bugs that causes
>        them to be returned as strings after multiple saves. Note that this can
>        be backwards incompatible !
> - Fix: use add_arguments() instead of option_list (Django 1.10)
> - Fix: create_command, Django 1.9 fixes
> - Fix: create_jobs, Django 1.9 fixes
> - Fix: RandomCharField, when not unique get the first value from the generator
> - Fix: graph_models, render() must be called with a dict
> - Fix: graph_models, use force_bytes fixes command for Python 3
> - Fix: graph_models, fix django 1.6 compatibility for strings defined relation
> - Fix: graph_models, fix settings.GRAPH_MODELS breaking the command
> - Fix: graph_models, add support for lazy relationships
> - Fix: ForeignKeyAutocompleteAdmin, url_patterns is just a list (Django 1.9+)
> - Fix: ForeignKeySearchInput, use url reversing instead of hardcoded paths
> - Fix: find_template, Fix for Django 1.8+
> - Fix: admin_generator, incompatible &quot;default&quot; identifier raising TypeError
> - Improvement: show_urls, add json and pretty-json formatting
> - Improvement: runserver_plus, add support for whitenoise
> - Improvement: ModificationDateTimeField, add parameter to preserve timestamps on save
> - Improvement: runprofileserver, raise command error when hotspot is not available
> - Improvement: reset_db, better parsing of mysql cnf file
> - Improvement: restored coverage for Python 3.2
> - Improvement: pep8 fixes, remove unused shims &amp; imports &amp; commented code
> - Improvement: graph_models, JSON output
> - Improvement: graph_models, add wildcard filters
> - Docs: removed text on donations, the hope was that we could generate some
>         funds to have more consistent development and outreach.
> - Docs: runserver_plus, added some documentation about LOGGING
> - Docs: runscript, update documentation to match Django tutorial for Django 1.8+
> - Docs: runprofileserver, add documentation on profiler choices
> - Docs: update_permissions, add basic documentation for command








### Werkzeug 0.9.6 -> 0.11.15

>### 0.11.14

>---------------

>Released on December 30th 2016.

>- Check if platform can fork before importing ``ForkingMixIn``, raise exception
>  when creating ``ForkingWSGIServer`` on such a platform, see PR ``999``.



>### 0.11.13

>---------------

>Released on December 26th 2016.

>- Correct fix for the reloader issuer on certain Windows installations.



>### 0.11.12

>---------------

>Released on December 26th 2016.

>- Fix more bugs in multidicts regarding empty lists. See ``1000``.
>- Add some docstrings to some `EnvironBuilder` properties that were previously
>  unintentionally missing.
>- Added a workaround for the reloader on windows.



>### 0.11.11

>---------------

>Released on August 31st 2016.

>- Fix JSONRequestMixin for Python3. See 731
>- Fix broken string handling in test client when passing integers. See 852
>- Fix a bug in ``parse_options_header`` where an invalid content type
>  starting with comma or semi-colon would result in an invalid return value,
>  see issue ``995``.
>- Fix a bug in multidicts when passing empty lists as values, see issue
>  ``979``.
>- Fix a security issue that allows XSS on the Werkzeug debugger. See ``1001``.



>### 0.11.10

>---------------

>Released on May 24th 2016.

>- Fixed a bug that occurs when running on Python 2.6 and using a broken locale.
>  See pull request 912.
>- Fixed a crash when running the debugger on Google App Engine. See issue 925.
>- Fixed an issue with multipart parsing that could cause memory exhaustion.



>### 0.11.9

>--------------

>Released on April 24th 2016.

>- Corrected an issue that caused the debugger not to use the
>  machine GUID on POSIX systems.
>- Corrected a Unicode error on Python 3 for the debugger&#39;s
>  PIN usage.
>- Corrected the timestamp verification in the pin debug code.
>  Without this fix the pin was remembered for too long.



>### 0.11.8

>--------------

>Released on April 15th 2016.

>- fixed a problem with the machine GUID detection code on OS X
>  on Python 3.



>### 0.11.7

>--------------

>Released on April 14th 2016.

>- fixed a regression on Python 3 for the debugger.



>### 0.11.6

>--------------

>Released on April 14th 2016.

>- werkzeug.serving: Still show the client address on bad requests.
>- improved the PIN based protection for the debugger to make it harder to
>  brute force via trying cookies.  Please keep in mind that the debugger
>  *is not intended for running on production environments*
>- increased the pin timeout to a week to make it less annoying for people
>  which should decrease the chance that users disable the pin check
>  entirely.
>- werkzeug.serving: Fix broken HTTP_HOST when path starts with double slash.



>### 0.11.5

>--------------

>Released on March 22nd 2016.

>- werkzeug.serving: Fix crash when attempting SSL connection to HTTP server.



>### 0.11.4

>--------------

>Released on February 14th 2016.

>- Fixed werkzeug.serving not working from -m flag.
>- Fixed incorrect weak etag handling.



>### 0.11.3

>--------------

>Released on December 20th 2015.

>- Fixed an issue with copy operations not working against
>  proxies.
>- Changed the logging operations of the development server to
>  correctly log where the server is running in all situations
>  again.
>- Fixed another regression with SSL wrapping similar to the
>  fix in 0.11.2 but for a different code path.



>### 0.11.2

>--------------

>Released on November 12th 2015.

>- Fix inheritable sockets on Windows on Python 3.
>- Fixed an issue with the forking server not starting any longer.
>- Fixed SSL wrapping on platforms that supported opening sockets
>  by file descriptor.
>- No longer log from the watchdog reloader.
>- Unicode errors in hosts are now better caught or converted into
>  bad request errors.



>### 0.11.1

>--------------

>Released on November 10th 2015.

>- Fixed a regression on Python 3 in the debugger.



>### 0.11

>------------

>Released on November 8th 2015, codename Gleisbaumaschine.

>- Added ``reloader_paths`` option to ``run_simple`` and other functions in
>  ``werkzeug.serving``. This allows the user to completely override the Python
>  module watching of Werkzeug with custom paths.
>- Many custom cached properties of Werkzeug&#39;s classes are now subclasses of
>  Python&#39;s ``property`` type (issue ``616``).
>- ``bind_to_environ`` now doesn&#39;t differentiate between implicit and explicit
>  default port numbers in ``HTTP_HOST`` (pull request ``204``).
>- ``BuildErrors`` are now more informative. They come with a complete sentence
>  as error message, and also provide suggestions (pull request ``691``).
>- Fix a bug in the user agent parser where Safari&#39;s build number instead of
>  version would be extracted (pull request ``703``).
>- Fixed issue where RedisCache set_many was broken for twemproxy, which doesn&#39;t
>  support the default MULTI command (pull request ``702``).
>- ``mimetype`` parameters on request and response classes are now always
>  converted to lowercase.
>- Changed cache so that cache never expires if timeout is 0. This also fixes
>  an issue with redis setex (issue ``550``)
>- Werkzeug now assumes ``UTF-8`` as filesystem encoding on Unix if Python
>  detected it as ASCII.
>- New optional `has` method on caches.
>- Fixed various bugs in `parse_options_header` (pull request ``643``).
>- If the reloader is enabled the server will now open the socket in the parent
>  process if this is possible.  This means that when the reloader kicks in
>  the connection from client will wait instead of tearing down.  This does
>  not work on all Python versions.
>- Implemented PIN based authentication for the debugger.  This can optionally
>  be disabled but is discouraged.  This change was necessary as it has been
>  discovered that too many people run the debugger in production.
>- Devserver no longer requires SSL module to be installed.



>### 0.10.5

>--------------

>(bugfix release, release date yet to be decided)

>- Reloader: Correctly detect file changes made by moving temporary files over
>  the original, which is e.g. the case with PyCharm (pull request ``722``).
>- Fix bool behavior of ``werkzeug.datastructures.ETags`` under Python 3 (issue
>  ``744``).



>### 0.10.4

>--------------

>(bugfix release, released on March 26th 2015)

>- Re-release of 0.10.3 with packaging artifacts manually removed.



>### 0.10.3

>--------------

>(bugfix release, released on March 26th 2015)

>- Re-release of 0.10.2 without packaging artifacts.



>### 0.10.2

>--------------

>(bugfix release, released on March 26th 2015)

>- Fixed issue where ``empty`` could break third-party libraries that relied on
>  keyword arguments (pull request ``675``)
>- Improved ``Rule.empty`` by providing a ```get_empty_kwargs`` to allow setting
>  custom kwargs without having to override entire ``empty`` method. (pull
>  request ``675``)
>- Fixed ```extra_files``` parameter for reloader to not cause startup
>  to crash when included in server params
>- Using `MultiDict` when building URLs is now not supported again. The behavior
>  introduced several regressions.
>- Fix performance problems with stat-reloader (pull request ``715``).



>### 0.10.1

>--------------

>(bugfix release, released on February 3rd 2015)

>- Fixed regression with multiple query values for URLs (pull request ``667``).
>- Fix issues with eventlet&#39;s monkeypatching and the builtin server (pull
>  request ``663``).



>### 0.10

>------------

>Released on January 30th 2015, codename Bagger.

>- Changed the error handling of and improved testsuite for the caches in
>  ``contrib.cache``.
>- Fixed a bug on Python 3 when creating adhoc ssl contexts, due to `sys.maxint`
>  not being defined.
>- Fixed a bug on Python 3, that caused
>  :func:`~werkzeug.serving.make_ssl_devcert` to fail with an exception.
>- Added exceptions for 504 and 505.
>- Added support for ChromeOS detection.
>- Added UUID converter to the routing system.
>- Added message that explains how to quit the server.
>- Fixed a bug on Python 2, that caused ``len`` for
>  :class:`werkzeug.datastructures.CombinedMultiDict` to crash.
>- Added support for stdlib pbkdf2 hmac if a compatible digest
>  is found.
>- Ported testsuite to use ``py.test``.
>- Minor optimizations to various middlewares (pull requests ``496`` and
>  ``571``).
>- Use stdlib ``ssl`` module instead of ``OpenSSL`` for the builtin server
>  (issue ``434``). This means that OpenSSL contexts are not supported anymore,
>  but instead ``ssl.SSLContext`` from the stdlib.
>- Allow protocol-relative URLs when building external URLs.
>- Fixed Atom syndication to print time zone offset for tz-aware datetime
>  objects (pull request ``254``).
>- Improved reloader to track added files and to recover from broken
>  sys.modules setups with syntax errors in packages.
>- ``cache.RedisCache`` now supports arbitrary ``**kwargs`` for the redis
>  object.
>- ``werkzeug.test.Client`` now uses the original request method when resolving
>  307 redirects (pull request ``556``).
>- ``werkzeug.datastructures.MIMEAccept`` now properly deals with mimetype
>  parameters (pull request ``205``).
>- ``werkzeug.datastructures.Accept`` now handles a quality of ``0`` as
>  intolerable, as per RFC 2616 (pull request ``536``).
>- ``werkzeug.urls.url_fix`` now properly encodes hostnames with ``idna``
>  encoding (issue ``559``). It also doesn&#39;t crash on malformed URLs anymore
>  (issue ``582``).
>- ``werkzeug.routing.MapAdapter.match`` now recognizes the difference between
>  the path ``/`` and an empty one (issue ``360``).
>- The interactive debugger now tries to decode non-ascii filenames (issue
>  ``469``).
>- Increased default key size of generated SSL certificates to 1024 bits (issue
>  ``611``).
>- Added support for specifying a ``Response`` subclass to use when calling
>  :func:`~werkzeug.utils.redirect`\ .
>- ``werkzeug.test.EnvironBuilder`` now doesn&#39;t use the request method anymore
>  to guess the content type, and purely relies on the ``form``, ``files`` and
>  ``input_stream`` properties (issue ``620``).
>- Added Symbian to the user agent platform list.
>- Fixed make_conditional to respect automatically_set_content_length
>- Unset ``Content-Length`` when writing to response.stream (issue ``451``)
>- ``wrappers.Request.method`` is now always uppercase, eliminating
>  inconsistencies of the WSGI environment (issue ``647``).
>- ``routing.Rule.empty`` now works correctly with subclasses of ``Rule`` (pull
>  request ``645``).
>- Made map updating safe in light of concurrent updates.
>- Allow multiple values for the same field for url building (issue ``658``).



>### 0.9.7

>-------------

>- Fixed uri_to_iri() not re-encoding hashes in query string parameters.







### pysolr 3.2.0 -> 3.6.0

>### 3.5.0

>-------------------

>New
>~~~

>- Expose the full Solr response in `Results` [Chris Adams]

>  This makes life easier for anyone using custom extensions by
>  removing the need to create a `Results` subclass just to get
>  access to an extra dictionary key.

>- More flexible control of request handlers. [nuarhu]

>  This allows configuring the default search handler and overriding it for every query method

>  Thanks to nuarhu for the patch

>- Start maintaining a changelog from gitchangelog. [Chris Adams]

>- Overwrite flag for Solr.add (closes 182) [Chris Adams]

>  Thanks to robinsonkwame for the patch

>- SolrCloud support (see 138) [Chris Adams]

>  This optionally adds support for SolrCloud using the Kazoo client
>  library.

>  Thanks to upayavira

>Other
>~~~~~

>- V3.5.0. [Chris Adams]

>- Merge pull request 192 from dhruvpathak/optimize_commit_flag. [Chris
>  Adams]

>  chg: `optimize()` also accepts `commit` flag

>- Included commit flag in optimize() to let optimize call run with or
>  without commit. [dhruv.pathak]

>- Merge pull request 188 from TigorC/master. [Chris Adams]

>  Removed py26 from tox.ini

>- Removed py26 from tox.ini. [Igor Tokarev]

>- Tests: avoid timeout-based CI failures. [Chris Adams]

>  These caused sporadic CI build failures and weren't
>  otherwise testing actual functionality since we don't have a
>  test which does something like SIGSTOP the test Solr server
>  long enough to confirm a timeout.

>  We'll confirm that the timeout is passed through but
>  otherwise use the defaults.

>- Update Travis CI badge in the README. [Chris Adams]

>- Merge pull request 184 from atuljangra/master. [Chris Adams]

>  Correct documentation for `_update`

>  Thanks to atuljangra for the patch!

>- Merge branch &#39;master&#39; of https://github.com/atuljangra/pysolr.
>  [atuljangra]

>- Misleading comments. [atuljangra]

>- Travis: use build matrix for regular and SolrCloud tests. [Chris
>  Adams]

>- Test_cloud: remove dead code. [Chris Adams]

>  The first instance of test_custom_results_class was broken because it
>  used the wrong port but this wasn't failing because the same method name
>  was redefined further down in the file and that used the updated port
>  config.

>- PEP-8. [Chris Adams]

>- ZooKeeper: log unexpected format changes to watched aliases. [Chris
>  Adams]

>- ZooKeeper: restore JSON blob decoding. [Chris Adams]

>- PEP-8. [Chris Adams]

>- PEP-8 unused imports. [Chris Adams]

>- PEP-8. [Chris Adams]

>- PEP-8. [Chris Adams]

>- PEP-8. [Chris Adams]

>- Setup.cfg: add pep8 and isort config. [Chris Adams]

>- Tear down requests.Session instance at close. [Chris Adams]

>  This avoids log-spew on modern unittest implementations
>  which report unclosed file handles at the end of a run.

>- Remove Python 2.6 from Travis test matrix. [Chris Adams]

>- Add __future__ absolute_import. [Chris Adams]

>  This is currently moot but avoids any chance of regression
>  between Python 2.x and 3.x.

>- PEP-8. [Chris Adams]

>- Drop support for Python 2.6. [Chris Adams]

>  We have some old import dances and other overhead for Python
>  2.6 support, which the CPython developers dropped support
>  for in 2013:

>  http://www.curiousefficiency.org/posts/2015/04/stop-supporting-python26.html

>- Allow queries to be directed to different search handlers. [Chris
>  Adams]

>  The `search` method now allows you override the default `select` handler
>  when your Solr instance has multiple search handlers.

>  Thanks to k-patel for the patch.

>  Closes 174
>  Closes 175



>### 3.4.0

>-------------------

>- Update version numbers for v3.4.0. [Chris Adams]

>- Logging: better message for HTTP status != 200. [Chris Adams]

>  We already extract error message from Solr responses and that is
>  great. Unfortunately it can contain the data that may change with
>  every request (like document id).

>  This creates an issue when user uses Sentry or other solution
>  that captures logging or exceptions. Previous implementation
>  causes many duplicated events in Sentry if message extracted
>  using `self._extract_error(resp)` contained such variable data.

>  This change uses &#39;non-mutable&#39; message that is complemented
>  with extracted data that using string formatting option supplied
>  by Python logging. Thanks to this, Sentry and other solutions
>  can perform better grouping of loging messages (by status code).

>  This is approach that is already used in handling other errors.

>- Fix response error handling on Python 3 (closes 162) [Chris Adams]

>  Previously the error handling did not work correctly on Python 3 because
>  a byte-string response wasn&#39;t decoded before processing.

>  Thanks to Emmanuel Leblond (touilleMan) for the patch.

>- Merge pull request 167 from swistakm/master. [Chris Adams]

>  Refactor common response processing to Results class

>- Move response manipulation responsibility to Results class and allow
>  custom results classes. [mjaworski]

>- Add Python 3.5 to automated test matrix. [Chris Adams]



>### 3.3.3

>-------------------

>- V3.3.3. [Chris Adams]

>- Fix response error handling on Python 3 (closes 162) [Chris Adams]

>  Previously the error handling did not work correctly on Python 3 because
>  a byte-string response wasn&#39;t decoded before processing.

>  Thanks to Emmanuel Leblond (touilleMan) for the patch.

>- Tests: upgrade Solr to 4.10.4. [Chris Adams]

>  * Resync test Solar script with django-haystack
>    These are still not quite the same; at some point it would be nice to
>    look into a common tool which both projects could use
>  * Update Solr configuration script to set correct libpath for solr-cell
>    to avoid lazy-load failures during testing as was reported on e.g. 162

>- Tests: update Solr download script for recent API change. [Chris
>  Adams]

>- Merge pull request 142 from yspanchal/master. [Chris Adams]

>  Add support for cursormark pagination

>- Added cursormark deep pagination support. [Yogesh Panchal]



>### 3.3.2

>-------------------

>- Version 3.3.2. [Chris Adams]

>- Python 2.6 backwards compatibility. [Chris Adams]

>  Python 2.6 shipped with ElementTree 1.2.x. Among other differences, it
>  lacks support for the attribute selectors used to process valid XML
>  error messages, which was added in ElementTree 1.3.

>- Merge pull request 155 from domenkozar/solr4/exceptions. [Chris
>  Adams]

>  Support Solr 4 XML error format parsing

>  Thanks domenkozar for the patch

>- Overhaul Travis config. [Chris Adams]

>  * Sidestep use of Tox in favor of Travis-managed Python versions
>  * Enable container-based builds
>  * Enable caching for Solr server downloads

>- Use builtin unittest2 runner on Python 2.7 as well. [Chris Adams]

>- Simple error extraction. [Chris Adams]

>  Previously pysolr depended on lxml and cssselect to extract
>  text from Tomcat's error messages, which was unreliable.

>  This change uses regular expressions to deal with invalid
>  XML rather than lxml's salvaging parser and avoids having
>  to maintain the code which attempted to find the main error
>  message in tag soup

>  Closes 149

>- Update test Solr download script to work with default Python 3. [Chris
>  Adams]



>### 3.3.1

>-------------------

>- Version 3.3.1. [Chris Adams]

>- Prepare for 3.3.1 release. [Chris Adams]

>- Convert all HTTP client errors to SolrError. [Chris Adams]

>  This commit ensures that an outside caller can handle all HTTP-related errors by catching SolrError without knowing whether the exception class is owned by requests, urllib3, or httplib.

>- Merge pull request 146 from gryphius/fix_doc_typo. [Chris Adams]

>  Fix typo in ExtractingRequestHandler documentation

>  Thanks gryphius

>- Doc fix: a very simply model -&gt; a very simple model. [Oli]

>- Merge pull request 139 from upayavira/feature/no-optimize. [Daniel
>  Lindsley]

>  Optimize is no longer recommended

>- Optimize is no longer recommended. [Upayavira]

>  Since Solr 3.6, Solr has used the TieredMergePolicy which makes,
>  in most scenarios, optimization a harmful rather than beneficial
>  step.



>### 3.3.0

>-------------------

>- Bumped to v3.3.0! [Daniel Lindsley]

>- Added acdha to primaries for all his hard work. [Daniel Lindsley]

>- Support Solr 4+ individual field updates (closes 129) [Chris Adams]

>  Now fields can be updated individually:

>       conn.add(docs, fieldUpdates={&#39;myfield1_ss&#39;: &#39;add&#39;,
>                                    &#39;myfield2_s&#39;: &#39;set&#39;,
>                                    &#39;myfield3_i&#39;: &#39;inc&#39;})

>  Thanks to Çağatay Çallı (faraday) for the patch.

>- Merge pull request 137 from LuRsT/patch-1. [Chris Adams]

>  Fixed syntax error in README.rst example (thanks LuRsT)

>- Fixed syntax error in README.rst example. [Gil Gonçalves]

>- Add softCommit support (closes 98) [Chris Adams]

>  add() and commit() may now be called with softCommit=True

>  Thanks to sicarrots for the patch

>- Merge pull request 123 from ulivedit/master. [Chris Adams]

>  Python 3 compatibility for error message extraction (thanks ulivedit)

>- Fix python 3.4 error with forcing unicode strings. [Eric Hagman]

>- Merge pull request 135 from Grokzen/master. [Chris Adams]

>  Use DEBUG_PYSOLR environmental variable to configure logging

>  This offers an alternative to editing pysolr.py or reconfiguring logging elsewhere

>- Make it easier to debug pysolr via environment variable. [Johan
>  Andersson]

>- Merge pull request 131 from andreif/highlighted-readme. [Chris Adams]

>  Highlight Python code in README.rst (thanks andreif)

>- Highlight Python code in README.rst. [Andrei Fokau]

>- Add support for error responses in JSON format (closes 113) [Chris
>  Adams]

>  Thanks to andreif for the patch and tests

>- Merge pull request 125 from phill-tornroth/patch-1. [Chris Adams]

>  Fix get-solr-download-url.py for Python 2.6

>- Fixes &#39;zero field length&#39; error from `format()` [Phill Tornroth]

>  Unless I&#39;m missing something... :)

>- Travis: download Solr before starting tests. [Chris Adams]

>  This should avoid download errors being presented as test failures

>- Tests: increase Solr startup timeout. [Chris Adams]

>- Add test Solr tarball downloads to .gitignore. [Chris Adams]

>- Tests: add Python 3.4 targets. [Chris Adams]

>- Tests: use Solr 4.7.2 from nearest mirror (closes 115) [Chris Adams]

>- Tests: add a script to retrieve the closest Apache mirror. [Chris
>  Adams]

>  See 115

>- Merge pull request 111 from redjack/py26-tests. [Chris Adams]

>  Update &#39;run-tests.py&#39; to invoke unittest2 correctly on Python 2.6

>- Update &#39;run-tests.py&#39; to invoke unittest2 correctly on Python 2.6.
>  [Andy Freeland]

>- Expanded testing section of the README. [Chris Adams]

>- Merge pull request 36 from glenbot/master. [Chris Adams]

>  Update to SolrCoreAdmin.create to use correct action

>- Updated create command in SolrCoreAdmin to use correct action.
>  [glenbot]

>- Fix type in SolrAdmin.create default parameter. [Chris Adams]

>  See 36

>- Updated ignores. [Daniel Lindsley]







### requests 2.10.0 -> 2.13.0

>### 2.13.0

>+++++++++++++++++++

>**Features**

>- Only load the ``idna`` library when we&#39;ve determined we need it. This will
>  save some memory for users.

>**Miscellaneous**

>- Updated bundled urllib3 to 1.20.
>- Updated bundled idna to 2.2.



>### 2.12.5

>+++++++++++++++++++

>**Bugfixes**

>- Fixed an issue with JSON encoding detection, specifically detecting
>  big-endian UTF-32 with BOM.



>### 2.12.4

>+++++++++++++++++++

>**Bugfixes**

>- Fixed regression from 2.12.2 where non-string types were rejected in the
>  basic auth parameters. While support for this behaviour has been readded,
>  the behaviour is deprecated and will be removed in the future.



>### 2.12.3

>+++++++++++++++++++

>**Bugfixes**

>- Fixed regression from v2.12.1 for URLs with schemes that begin with &quot;http&quot;.
>  These URLs have historically been processed as though they were HTTP-schemed
>  URLs, and so have had parameters added. This was removed in v2.12.2 in an
>  overzealous attempt to resolve problems with IDNA-encoding those URLs. This
>  change was reverted: the other fixes for IDNA-encoding have been judged to
>  be sufficient to return to the behaviour Requests had before v2.12.0.



>### 2.12.2

>+++++++++++++++++++

>**Bugfixes**

>- Fixed several issues with IDNA-encoding URLs that are technically invalid but
>  which are widely accepted. Requests will now attempt to IDNA-encode a URL if
>  it can but, if it fails, and the host contains only ASCII characters, it will
>  be passed through optimistically. This will allow users to opt-in to using
>  IDNA2003 themselves if they want to, and will also allow technically invalid
>  but still common hostnames.
>- Fixed an issue where URLs with leading whitespace would raise
>  ``InvalidSchema`` errors.
>- Fixed an issue where some URLs without the HTTP or HTTPS schemes would still
>  have HTTP URL preparation applied to them.
>- Fixed an issue where Unicode strings could not be used in basic auth.
>- Fixed an issue encountered by some Requests plugins where constructing a
>  Response object would cause ``Response.content`` to raise an
>  ``AttributeError``.



>### 2.12.1

>+++++++++++++++++++

>**Bugfixes**

>- Updated setuptools &#39;security&#39; extra for the new PyOpenSSL backend in urllib3.

>**Miscellaneous**

>- Updated bundled urllib3 to 1.19.1.



>### 2.12.0

>+++++++++++++++++++

>**Improvements**

>- Updated support for internationalized domain names from IDNA2003 to IDNA2008.
>  This updated support is required for several forms of IDNs and is mandatory
>  for .de domains.
>- Much improved heuristics for guessing content lengths: Requests will no
>  longer read an entire ``StringIO`` into memory.
>- Much improved logic for recalculating ``Content-Length`` headers for
>  ``PreparedRequest`` objects.
>- Improved tolerance for file-like objects that have no ``tell`` method but
>  do have a ``seek`` method.
>- Anything that is a subclass of ``Mapping`` is now treated like a dictionary
>  by the ``data=`` keyword argument.
>- Requests now tolerates empty passwords in proxy credentials, rather than
>  stripping the credentials.
>- If a request is made with a file-like object as the body and that request is
>  redirected with a 307 or 308 status code, Requests will now attempt to
>  rewind the body object so it can be replayed.

>**Bugfixes**

>- When calling ``response.close``, the call to ``close`` will be propagated
>  through to non-urllib3 backends.
>- Fixed issue where the ``ALL_PROXY`` environment variable would be preferred
>  over scheme-specific variables like ``HTTP_PROXY``.
>- Fixed issue where non-UTF8 reason phrases got severely mangled by falling
>  back to decoding using ISO 8859-1 instead.
>- Fixed a bug where Requests would not correctly correlate cookies set when
>  using custom Host headers if those Host headers did not use the native
>  string type for the platform.

>**Miscellaneous**

>- Updated bundled urllib3 to 1.19.
>- Updated bundled certifi certs to 2016.09.26.



>### 2.11.1

>+++++++++++++++++++

>**Bugfixes**

>- Fixed a bug when using ``iter_content`` with ``decode_unicode=True`` for
>  streamed bodies would raise ``AttributeError``. This bug was introduced in
>  2.11.
>- Strip Content-Type and Transfer-Encoding headers from the header block when
>  following a redirect that transforms the verb from POST/PUT to GET.



>### 2.11.0

>+++++++++++++++++++

>**Improvements**

>- Added support for the ``ALL_PROXY`` environment variable.
>- Reject header values that contain leading whitespace or newline characters to
>  reduce risk of header smuggling.

>**Bugfixes**

>- Fixed occasional ``TypeError`` when attempting to decode a JSON response that
>  occurred in an error case. Now correctly returns a ``ValueError``.
>- Requests would incorrectly ignore a non-CIDR IP address in the ``NO_PROXY``
>  environment variables: Requests now treats it as a specific IP.
>- Fixed a bug when sending JSON data that could cause us to encounter obscure
>  OpenSSL errors in certain network conditions (yes, really).
>- Added type checks to ensure that ``iter_content`` only accepts integers and
>  ``None`` for chunk sizes.
>- Fixed issue where responses whose body had not been fully consumed would have
>  the underlying connection closed but not returned to the connection pool,
>  which could cause Requests to hang in situations where the ``HTTPAdapter``
>  had been configured to use a blocking connection pool.

>**Miscellaneous**

>- Updated bundled urllib3 to 1.16.
>- Some previous releases accidentally accepted non-strings as acceptable header values. This release does not.







### PyMySQL 0.6.2 -> 0.7.9

>### 0.7.9


>Release date: 2016-09-03

>* Fix PyMySQL stop reading rows when first column is empty string (513)
>  Reverts DEPRECATE_EOF introduced in 0.7.7.



>### 0.7.8


>Release date: 2016-09-01

>* Revert error message change in 0.7.7.
>  (SQLAlchemy parses error message, 507)



>### 0.7.7


>Release date: 2016-08-30

>* Add new unicode collation (498)
>* Fix conv option is not used for encoding objects.
>* Experimental support for DEPRECATE_EOF protocol.



>### 0.7.6


>Release date: 2016-07-29

>* Fix SELECT JSON type cause UnicodeError
>* Avoid float convertion while parsing microseconds
>* Warning has number
>* SSCursor supports warnings



>### 0.7.5


>Release date: 2016-06-28

>* Fix exception raised while importing when getpwuid() fails (472)
>* SSCursor supports LOAD DATA LOCAL INFILE (473)
>* Fix encoding error happen for JSON type (477)
>* Fix test fail on Python 2.7 and MySQL 5.7 (478)



>### 0.7.4


>Release date: 2016-05-26

>* Fix AttributeError may happen while Connection.__del__ (463)
>* Fix SyntaxError in test_cursor. (464)
>* frozenset support for query value. (461)
>* Start using readthedocs.io



>### 0.7.3


>Release date: 2016-05-19

>* Add read_timeout and write_timeout option.
>* Support serialization customization by `conv` option.
>* Unknown type is converted by `str()`, for MySQLdb compatibility.
>* Support &#39;%%&#39; in `Cursor.executemany()`
>* Support REPLACE statement in `Cursor.executemany()`
>* Fix handling incomplete row caused by &#39;SHOW SLAVE HOSTS&#39;.
>* Fix decode error when use_unicode=False on PY3
>* Fix port option in my.cnf file is ignored.




>### 0.7.2


>Release date: 2016-02-24

>* Fix misuse of `max_allowed_packet` parameter. (426, 407 and 397)
>* Add %(name)s plceholder support to `Cursor.executemany()`. (427, thanks to
>  WorldException)



>### 0.7.1


>Release date: 2016-01-14

>* Fix auth fail with MySQL 5.1
>* Fix escaping unicode fails on Python 2



>### 0.7


>Release date: 2016-01-10

>* Faster binary escaping
>* Add `&quot;_binary&quot; prefix` to string literal for binary types.
>  binary types are: `bytearray` on Python 2, `bytes` and `bytearray` on Python 3.
>  This is because recent MySQL show warnings when string literal is invalid for
>  connection encoding.
>* `pymysql.Binary()` returns `bytearray` on Python 2.  This is required to distinguish
>  binary and string.
>* Auth plugin support.
>* no_delay option is ignored.  It will be removed in PyMySQL 0.8.




>### 0.6.7


>Release date: 2015-09-30

>* Allow self signed certificate
>* Add max_allowed_packet option
>* Fix error when bytes in executemany
>* Support geometry type
>* Add coveralls badge to README
>* Fix some bugs relating to warnings
>* Add Cursor.mogrify() method
>* no_delay option is deprecated and True by default
>* Fix options from my.cnf overrides options from arguments
>* Allow socket like object.  (It&#39;s not feature for end users)
>* Strip quotes while reading options from my.cnf file
>* Fix encoding issue in executemany()



>### 0.6.6


>* Add context manager to cursor
>* Fix can&#39;t encode blob that is not utf-8 on PY3. (regression of 0.6.4,
>  Thanks to wiggzz)



>### 0.6.5

>Skipped



>### 0.6.4

>* Support &quot;LOAD LOCAL INFILE&quot;.  Thanks wraziens
>* Show MySQL warnings after execute query.
>* Fix MySQLError may be wrapped with OperationalError while connectiong. (274)
>* SSCursor no longer attempts to expire un-collected rows within __del__,
>  delaying termination of an interrupted program; cleanup of uncollected
>  rows is left to the Connection on next execute, which emits a
>  warning at that time. (287)
>* Support datetime and time with microsecond. (303)
>* Use surrogateescape to format bytes on Python 3.
>* OperationalError raised from connect() have information about original
>  exception. (304)
>* `init_command` now support multi statement.
>* `Connection.escape()` method now accepts second argument compatible to
>  MySQL-Python.



>### 0.6.3

>* Fixed multiple result sets with SSCursor.
>* Fixed connection timeout.
>* Fixed literal set syntax to work on Py2.6.
>* Allow for mysql negative values with 0 hour timedelta.
>* Added Connection.begin().







### psycopg2 2.4.5 -> 2.6.2

>### 2.6.2

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Report the server response status on errors (such as :ticket:`281`).
>- Raise `!NotSupportedError` on unhandled server response status
>  (:ticket:`352`).
>- Allow overriding string adapter encoding with no connection (:ticket:`331`).
>- The `~psycopg2.extras.wait_select` callback allows interrupting a
>  long-running query in an interactive shell using :kbd:`Ctrl-C`
>  (:ticket:`333`).
>- Fixed `!PersistentConnectionPool` on Python 3 (:ticket:`348`).
>- Fixed segfault on `repr()` of an unitialized connection (:ticket:`361`).
>- Allow adapting bytes using QuotedString on Python 3 too (:ticket:`365`).
>- Added support for setuptools/wheel (:ticket:`370`).
>- Fix build on Windows with Python 3.5, VS 2015 (:ticket:`380`).
>- Fixed `!errorcodes.lookup` initialization thread-safety (:ticket:`382`).
>- Fixed `!read()` exception propagation in copy_from (:ticket:`412`).
>- Fixed possible NULL TZ decref  (:ticket:`424`).
>- `~psycopg2.errorcodes` map updated to PostgreSQL 9.5.




>### 2.6.1

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Lists consisting of only `None` are escaped correctly (:ticket:`285`).
>- Fixed deadlock in multithread programs using OpenSSL (:ticket:`290`).
>- Correctly unlock the connection after error in flush (:ticket:`294`).
>- Fixed `!MinTimeLoggingCursor.callproc()` (:ticket:`309`).
>- Added support for MSVC 2015 compiler (:ticket:`350`).




>### 2.6

>-------------------------

>New features:

>- Added support for large objects larger than 2GB. Many thanks to Blake Rouse
>  and the MAAS Team for the feature development.
>- Python `time` objects with a tzinfo specified and PostgreSQL :sql:`timetz`
>  data are converted into each other (:ticket:`272`).

>Bug fixes:

>- Json adapter&#39;s `!str()` returns the adapted content instead of the `!repr()`
>  (:ticket:`191`).




>### 2.5.5

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Named cursors used as context manager don&#39;t swallow the exception on exit
>  (:ticket:`262`).
>- `cursor.description` can be pickled (:ticket:`265`).
>- Propagate read error messages in COPY FROM (:ticket:`270`).
>- PostgreSQL time 24:00 is converted to Python 00:00 (:ticket:`278`).




>### 2.5.4

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Added :sql:`jsonb` support for PostgreSQL 9.4 (:ticket:`226`).
>- Fixed segfault if COPY statements are passed to `~cursor.execute()` instead
>  of using the proper methods (:ticket:`219`).
>- Force conversion of pool arguments to integer to avoid potentially unbounded
>  pools (:ticket:`220`).
>- Cursors :sql:`WITH HOLD` don&#39;t begin a new transaction upon move/fetch/close
>  (:ticket:`228`).
>- Cursors :sql:`WITH HOLD` can be used in autocommit (:ticket:`229`).
>- `~cursor.callproc()` doesn&#39;t silently ignore an argument without a length.
>- Fixed memory leak with large objects (:ticket:`256`).
>- Make sure the internal ``_psycopg.so`` module can be imported stand-alone (to
>  allow modules juggling such as the one described in :ticket:`201`).




>### 2.5.3

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Work around `pip issue 1630 &lt;https://github.com/pypa/pip/issues/1630&gt;`__
>  making installation via ``pip -e git+url`` impossible (:ticket:`18`).
>- Copy operations correctly set the `cursor.rowcount` attribute
>  (:ticket:`180`).
>- It is now possible to call `get_transaction_status()` on closed connections.
>- Fixed unsafe access to object names causing assertion failures in
>  Python 3 debug builds (:ticket:`188`).
>- Mark the connection closed if found broken on `poll()` (from :ticket:`192`
>  discussion)
>- Fixed handling of dsn and closed attributes in connection subclasses
>  failing to connect (from :ticket:`192` discussion).
>- Added arbitrary but stable order to `Range` objects, thanks to
>  Chris Withers (:ticket:`193`).
>- Avoid blocking async connections on connect (:ticket:`194`). Thanks to
>  Adam Petrovich for the bug report and diagnosis.
>- Don&#39;t segfault using poorly defined cursor subclasses which forgot to call
>  the superclass init (:ticket:`195`).
>- Mark the connection closed when a Socket connection is broken, as it
>  happens for TCP connections instead (:ticket:`196`).
>- Fixed overflow opening a lobject with an oid not fitting in a signed int
>  (:ticket:`203`).
>- Fixed handling of explicit default ``cursor_factory=None`` in
>  `connection.cursor()` (:ticket:`210`).
>- Fixed possible segfault in named cursors creation.
>- Fixed debug build on Windows, thanks to James Emerton.




>### 2.5.2

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Fixed segfault pickling the exception raised on connection error
>  (:ticket:`170`).
>- Meaningful connection errors report a meaningful message, thanks to
>  Alexey Borzenkov (:ticket:`173`).
>- Manually creating `lobject` with the wrong parameter doesn&#39;t segfault
>  (:ticket:`187`).




>### 2.5.1

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Fixed build on Solaris 10 and 11 where the round() function is already
>  declared (:ticket:`146`).
>- Fixed comparison of `Range` with non-range objects (:ticket:`164`).
>  Thanks to Chris Withers for the patch.
>- Fixed double-free on connection dealloc (:ticket:`166`). Thanks to
>  Gangadharan S.A. for the report and fix suggestion.




>### 2.5

>-------------------------

>New features:

>- Added :ref:`JSON adaptation &lt;adapt-json&gt;`.
>- Added :ref:`support for PostgreSQL 9.2 range types &lt;adapt-range&gt;`.
>- `connection` and `cursor` objects can be used in ``with`` statements
>  as context managers as specified by recent |DBAPI|_ extension.
>- Added `~psycopg2.extensions.Diagnostics` object to get extended info
>  from a database error.  Many thanks to Matthew Woodcraft for the
>  implementation (:ticket:`149`).
>- Added `connection.cursor_factory` attribute to customize the default
>  object returned by `~connection.cursor()`.
>- Added support for backward scrollable cursors. Thanks to Jon Nelson
>  for the initial patch (:ticket:`108`).
>- Added a simple way to :ref:`customize casting of composite types
>  &lt;adapt-composite&gt;` into Python objects other than namedtuples.
>  Many thanks to Ronan Dunklau and Tobias Oberstein for the feature
>  development.
>- `connection.reset()` implemented using :sql:`DISCARD ALL` on server
>  versions supporting it.

>Bug fixes:

>- Properly cleanup memory of broken connections (:ticket:`148`).
>- Fixed bad interaction of ``setup.py`` with other dependencies in
>  Distribute projects on Python 3 (:ticket:`153`).

>Other changes:

>- Added support for Python 3.3.
>- Dropped support for Python 2.4. Please use Psycopg 2.4.x if you need it.
>- `~psycopg2.errorcodes` map updated to PostgreSQL 9.2.
>- Dropped Zope adapter from source repository. ZPsycopgDA now has its own
>  project at &lt;http://github.com/psycopg/ZPsycopgDA&gt;.




>### 2.4.6

>^^^^^^^^^^^^^^^^^^^^^^^^^^^

>- Fixed &#39;cursor()&#39; arguments propagation in connection subclasses
>  and overriding of the &#39;cursor_factory&#39; argument.  Thanks to
>  Corry Haines for the report and the initial patch (:ticket:`105`).
>- Dropped GIL release during string adaptation around a function call
>  invoking a Python API function, which could cause interpreter crash.
>  Thanks to Manu Cupcic for the report (:ticket:`110`).
>- Close a green connection if there is an error in the callback.
>  Maybe a harsh solution but it leaves the program responsive
>  (:ticket:`113`).
>- &#39;register_hstore()&#39;, &#39;register_composite()&#39;, &#39;tpc_recover()&#39; work with
>  RealDictConnection and Cursor (:ticket:`114`).
>- Fixed broken pool for Zope and connections re-init across ZSQL methods
>  in the same request (:tickets:`123, 125, 142`).
>- connect() raises an exception instead of swallowing keyword arguments
>  when a connection string is specified as well (:ticket:`131`).
>- Discard any result produced by &#39;executemany()&#39; (:ticket:`133`).
>- Fixed pickling of FixedOffsetTimezone objects (:ticket:`135`).
>- Release the GIL around PQgetResult calls after COPY (:ticket:`140`).
>- Fixed empty strings handling in composite caster (:ticket:`141`).
>- Fixed pickling of DictRow and RealDictRow objects.










Once you have closed this pull request, I'll create seperate pull requests for every update as soon as I find them.

That's it for now!

Happy merging! 🤖
"
10875,django-oscar,django-oscar,9,closed,2217,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2217/comments,https://github.com/django-oscar/django-oscar/issues/2217,[],New installation generates error when trying to access,"hi,
I am getting the following stack trace when trying to load a webpage (localhost:8000). I tried to search a lot on the internet but I couldn't find any solution.

Image Environment: Request Method: GET Request URL: http://localhost:8000/

Django Version: 1.9
Python Version: 3.5.2
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'compressor',
 'widget_tweaks',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'oscar.apps.dashboard.shipping',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']

Installed Middleware:<br>
['django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware']


Template error:
In template
/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/oscar/templates/oscar/promotions/home.html, error at line 0
   Failed lookup for key [%s] in %r   1 : {% extends ""layout_2_col.html"" %}
   2 : {% load i18n %}
   3 : 
   4 : {% block navigation %}
   5 :     {% include ""partials/nav_primary.html"" with expand_dropdown=1 %}
   6 : {% endblock %}
   7 : 
   8 : {% block header %}{% endblock %}
   9 : 
   10 : {% block column_left %}


Traceback:

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _resolve_lookup
  879.                     current = current[bit]

During handling of the above exception ('WSGIRequest' object is not subscriptable), another exception occurred:

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _resolve_lookup
  887.                         current = getattr(current, bit)

During handling of the above exception ('WSGIRequest' object has no attribute 'basket'), another exception occurred:

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _resolve_lookup
  894.                             current = current[int(bit)]

During handling of the above exception (invalid literal for int() with base 10: 'basket'), another exception occurred:

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  174.                     response = self.process_exception_by_middleware(e, request)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  172.                     response = response.render()

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/response.py"" in render
  160.             self.content = self.rendered_content

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/response.py"" in rendered_content
  137.         content = template.render(context, self._request)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/backends/django.py"" in render
  95.             return self.template.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  206.                     return self._render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  173.         return compiled_parent._render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  173.         return compiled_parent._render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  173.         return compiled_parent._render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  69.                 result = block.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/loader_tags.py"" in render
  209.                 return template.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  208.                 return self._render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _render
  197.         return self.nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/defaulttags.py"" in render
  326.                 return nodelist.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  988.                 bit = node.render_annotated(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render_annotated
  955.             return self.render(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in render
  1039.             output = self.filter_expression.resolve(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in resolve
  726.                     arg_vals.append(arg.resolve(context))

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in resolve
  846.             value = self._resolve_lookup(context)

File ""/Users/rohit.rawat/.virtualenvs/env/lib/python3.5/site-packages/django/template/base.py"" in _resolve_lookup
  901.                                                        (bit, current))  # missing attribute

Exception Type: VariableDoesNotExist at /
Exception Value: Failed lookup for key [basket] in ""<WSGIRequest: GET '/'>""


**My settings.py file is this**:
```
import os

import environ
from oscar.defaults import *
from oscar import OSCAR_MAIN_TEMPLATE_DIR, get_core_apps


env = environ.Env(DEBUG=(bool, False),)
environ.Env.read_env()

BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
SITE_ROOT = environ.Path() - 3

SECRET_KEY = env('SECRET_KEY')
DEBUG = env('DEBUG')
WSGI_APPLICATION = env('WSGI_APPLICATION')
ROOT_URLCONF = env('ROOT_URLCONF')
SITE_ID = 1

ALLOWED_HOSTS = ['*']

DEFAULT_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
]

THIRD_PARTY_APPS = [
    'django.contrib.sites',
    'django.contrib.flatpages',
    'compressor',
    'widget_tweaks',
]

USER_APPS = [

]

INSTALLED_APPS = DEFAULT_APPS + THIRD_PARTY_APPS + USER_APPS + get_core_apps()


MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',

    'oscar.apps.basket.middleware.BasketMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
]


TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            os.path.join(BASE_DIR, 'templates'),
            OSCAR_MAIN_TEMPLATE_DIR
        ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'django.core.context_processors.i18n',
                'django.core.context_processors.request',
                'oscar.apps.search.context_processors.search_form',
                'oscar.apps.promotions.context_processors.promotions',
                'oscar.apps.checkout.context_processors.checkout',
                'oscar.apps.customer.notifications.context_processors.notifications',
                'oscar.core.context_processors.metadata',
            ],
        },
    },
]


DATABASES = {
    'default': env.db()
}

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


AUTHENTICATION_BACKENDS = (
    'oscar.apps.customer.auth_backends.EmailBackend',
    'django.contrib.auth.backends.ModelBackend',
)


HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
    },
}

LANGUAGE_CODE = env('LANGUAGE_CODE')

TIME_ZONE = env('TIME_ZONE')

USE_I18N = True

USE_L10N = True

USE_TZ = True

STATIC_ROOT = os.path.join(BASE_DIR, 'static')
STATIC_URL = '/static/'

MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
MEDIA_URL = '/media/'
```"
10887,django-oscar,django-oscar,10,closed,2205,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2205/comments,https://github.com/django-oscar/django-oscar/issues/2205,"[{""default"": false, ""name"": ""Feedback wanted"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/Feedback%20wanted"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw1MzE3ODM0MTM="", ""id"": 531783413}]",Middleware object instantiation error in 1.10,"When starting the application using django 1.10 I get an error: 

```bash
Traceback (most recent call last):
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 142, in inner_run
    handler = self.get_handler(*args, **options)
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/runserver.py"", line 27, in get_handler
    handler = super(Command, self).get_handler(*args, **options)
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 64, in get_handler
    return get_internal_wsgi_application()
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/servers/basehttp.py"", line 49, in get_internal_wsgi_application
    return import_string(app_path)
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/utils/module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/moz/Documents/projects/duber/source/duber-web/config/wsgi.py"", line 31, in <module>
    application = get_wsgi_application()
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/wsgi.py"", line 14, in get_wsgi_application
    return WSGIHandler()
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 153, in __init__
    self.load_middleware()
  File ""/Users/moz/.virtualenvs/duber/lib/python2.7/site-packages/django/core/handlers/base.py"", line 82, in load_middleware
    mw_instance = middleware(handler)
TypeError: object() takes no parameters
```

I fixed the error by changing the instantiation of the middleware object to use the superclass
In oscar/apps/basket/middleware.py
Replaced 
`class BasketMiddleware(object):`
with 
`class BasketMiddleware(MiddlewareMixin):`

This was pulled off of master branch. 
I can patch and do a pull request shortly. 
"
10888,django-oscar,django-oscar,10,closed,2204,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2204/comments,https://github.com/django-oscar/django-oscar/issues/2204,[],manage.py oscar_populate_countries fails with AttributeError,"Using the management command `oscar_populate_countries` results in a messageless AttributeError:

```
Traceback (most recent call last):
  File ""/usr/lib64/python3.5/runpy.py"", line 184, in _run_module_as_main
    ""__main__"", mod_spec)
  File ""/usr/lib64/python3.5/runpy.py"", line 85, in _run_code
    exec(code, run_globals)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/pydevd.py"", line 1537, in <module>
    globals = debugger.run(setup['file'], None, None, is_module)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/pydevd.py"", line 976, in run
    pydev_imports.execfile(file, globals, locals)  # execute the script
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/_pydev_imps/_pydev_execfile.py"", line 25, in execfile
    exec(compile(contents+""\n"", file, 'exec'), glob, loc)
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/oscar/management/commands/oscar_populate_countries.py"", line 58, in handle
    for country in pycountry.countries]
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/oscar/management/commands/oscar_populate_countries.py"", line 58, in <listcomp>
    for country in pycountry.countries]
  File ""/home/vwfs/.virtualenvs/web-shop/lib/python3.5/site-packages/pycountry/db.py"", line 22, in __getattr__
    raise AttributeError
AttributeError
```
Environment:

Django (1.9.12), django-oscar (1.3), pycountry (16.11.27.1)

Cause:

The management command tries to access the attributes `alpha2` and `alpha3` of the data returned by `pycountry` but they are actually named `alpha_2` and `alpha_3`.
"
10897,django-oscar,django-oscar,10,closed,2195,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2195/comments,https://github.com/django-oscar/django-oscar/issues/2195,"[{""default"": false, ""name"": ""\u2753Support question"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9D%93Support%20question"", ""color"": ""fef2c0"", ""node_id"": ""MDU6TGFiZWw1MzI1NzMxOTQ="", ""id"": 532573194}]",Error when adding a block to page url,"I traced this error and tried to fix it on my setup.

apps/dashboard/promotions/forms.py

and edit:
```python
class PagePromotionForm(forms.ModelForm):
...
class Meta:
        model = PagePromotion
        fields = ['position']
```
to instead be:
```python
class Meta:
        model = PagePromotion
        fields = ['position', 'page_url']
```
it did not work.

actually, it is not writing urls into the db, so I had to write it throught django admin

any better solution?



debug bellow:

```python
NoReverseMatch at /dashboard/content-blocks/update/rawhtml/2/
Reverse for 'promotion-list-by-url' with arguments '()' and keyword arguments '{u'path': u''}' not found. 1 pattern(s) tried: [u'dashboard/content-blocks/page/(?P<path>/([\\w-]+(/[\\w-]+)*/)?)$']
Request Method:	GET
Request URL:	http://127.0.0.1:8000/dashboard/content-blocks/update/rawhtml/2/
Django Version:	1.8.17
Exception Type:	NoReverseMatch
Exception Value:	
Reverse for 'promotion-list-by-url' with arguments '()' and keyword arguments '{u'path': u''}' not found. 1 pattern(s) tried: [u'dashboard/content-blocks/page/(?P<path>/([\\w-]+(/[\\w-]+)*/)?)$']
Exception Location:	/home/tatu/.virtualenvs/recifegrafica/local/lib/python2.7/site-packages/django/core/urlresolvers.py in _reverse_with_prefix, line 495
Python Executable:	/home/tatu/.virtualenvs/recifegrafica/bin/python
Python Version:	2.7.10
Python Path:	
['/home/tatu/apps/recifegrafica',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7/plat-x86_64-linux-gnu',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7/lib-tk',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7/lib-old',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-x86_64-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/home/tatu/.virtualenvs/recifegrafica/local/lib/python2.7/site-packages',
 '/home/tatu/.virtualenvs/recifegrafica/lib/python2.7/site-packages']
Server time:	Qua, 4 Jan 2017 11:18:06 -0300
Error during template rendering

In template /home/tatu/.virtualenvs/recifegrafica/local/lib/python2.7/site-packages/oscar/templates/oscar/dashboard/promotions/form.html, error at line 64
Reverse for 'promotion-list-by-url' with arguments '()' and keyword arguments '{u'path': u''}' not found. 1 pattern(s) tried: [u'dashboard/content-blocks/page/(?P<path>/([\\w-]+(/[\\w-]+)*/)?)$']
54	                <tbody>
55	                    {% for link in links %}
56	                        <tr>
57	                            <td><a href=""{{ link.page_url }}"">{{ link.page_url }}</a></td>
58	                            <td>{{ link.position }}</td>
59	                            <td>
60	                                <form action=""."" method=""post"" >
61	                                    {% csrf_token %}
62	                                    <input type=""hidden"" name=""action"" value=""remove_from_page"" />
63	                                    <input type=""hidden"" name=""pagepromotion_id"" value=""{{ link.id }}"" />
64	
                                          <a href=""
      {% url 'dashboard:promotion-list-by-url' path=link.page_url %}
      "" class=""btn btn-info"">{% trans ""View all blocks on this page"" %}</a>

      
65	                                    <button class=""btn btn-default"" type=""submit"" data-loading-text=""{% trans 'Removing...' %}"">{% trans ""Remove from page"" %}</button>
66	                                </form>
67	                            </td>
68	                        </tr>
69	                    {% endfor %}
70	                </tbody>
71	            {% else %}
72	                <tr><td>{% trans ""This promotion is not displayed anywhere at the moment."" %}</td></tr>
73	            {% endif %}
74	        </table>```"
10908,django-oscar,django-oscar,10,closed,2183,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2183/comments,https://github.com/django-oscar/django-oscar/issues/2183,[],python manage.py oscar_populate_countries throws error -,"Hello,

while running the following command I get this error -



`./manage.py oscar_populate_countries`

or

`python manage.py oscar_populate_countries -
`

This' the log.

```
./manage.py oscar_populate_countries
/Users/akos/oscar/lib/python2.7/site-packages/django/utils/six.py:808: RemovedInDjango110Warning: SubfieldBase has been deprecated. Use Field.from_db_value instead.
  return meta(name, bases, d)

/Users/akos/oscar/lib/python2.7/site-packages/django/core/management/__init__.py:345: RemovedInDjango110Warning: OptionParser usage for Django management commands is deprecated, use ArgumentParser instead
  self.fetch_command(subcommand).run_from_argv(self.argv)

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/akos/oscar/lib/python2.7/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/Users/akos/oscar/lib/python2.7/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/akos/oscar/lib/python2.7/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/akos/oscar/lib/python2.7/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/Users/akos/oscar/lib/python2.7/site-packages/oscar/management/commands/oscar_populate_countries.py"", line 58, in handle
    for country in pycountry.countries]
  File ""/Users/akos/oscar/lib/python2.7/site-packages/pycountry/db.py"", line 22, in __getattr__
    raise AttributeError
AttributeError


```

I have been google to find the answer. And evening ended up creating a whole new project again. What Im I doing wrong?


Regards"
10912,django-oscar,django-oscar,10,closed,2179,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2179/comments,https://github.com/django-oscar/django-oscar/issues/2179,[],oscar_populate_countries command doesn't work,"Hi,
I am newbie with oscar. But next command doesn't work to me: `./manage.py oscar_populate_countries --no-shipping`, it returns: 

```
...
File ""/home/honza/workspace/.envs/oscar/local/lib/python2.7/site-packages/pycountry/db.py"", line 22, in __getattr__
    raise AttributeError
AttributeError
```
I found that new version of pycountry has some new [methods](https://bitbucket.org/flyingcircus/pycountry/src/ea961348f24dfbd382f285f3307782fc34c8e370/src/pycountry/db.py?at=default&fileviewer=file-view-default) and when I try to get non-existent attribute it will return an AttributeError.

I found a problem here:
https://github.com/django-oscar/django-oscar/blob/master/src/oscar/management/commands/oscar_populate_countries.py

For countries without  `official_name` attribute,  `name=getattr(country, 'official_name', country.name),` returns error instead of `country.name` because pycountry raise the error.
"
10913,django-oscar,django-oscar,10,closed,2178,6,https://api.github.com/repos/django-oscar/django-oscar/issues/2178/comments,https://github.com/django-oscar/django-oscar/issues/2178,[],LookupError: No installed app with label 'reviews'.,"After installing django, when i try to create a new project,the error is coming, 

```python
Unhandled exception in thread started by <function wrapper at 0x10910faa0>
Traceback (most recent call last):
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 116, in inner_run
    self.check(display_num_errors=True)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/management/base.py"", line 426, in check
    include_deployment_checks=include_deployment_checks,
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/checks/registry.py"", line 75, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/checks/urls.py"", line 13, in check_url_config
    return check_resolver(resolver)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/checks/urls.py"", line 23, in check_resolver
    for pattern in resolver.url_patterns:
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 417, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/utils/functional.py"", line 33, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 410, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/voonik/python_env/django-oscar/teeshop/teeshop/urls.py"", line 19, in <module>
    from oscar.app import application
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/app.py"", line 13, in <module>
    class Shop(Application):
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/app.py"", line 16, in Shop
    catalogue_app = get_class('catalogue.app', 'application')
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 29, in get_class
    return get_classes(module_label, [classname], module_prefix)[0]
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 86, in get_classes
    oscar_module = _import_module(oscar_module_label, classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 121, in _import_module
    return __import__(module_label, fromlist=classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/apps/catalogue/app.py"", line 3, in <module>
    from oscar.apps.catalogue.reviews.app import application as reviews_app
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/apps/catalogue/reviews/app.py"", line 8, in <module>
    class ProductReviewsApplication(Application):
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/apps/catalogue/reviews/app.py"", line 12, in ProductReviewsApplication
    detail_view = get_class('catalogue.reviews.views', 'ProductReviewDetail')
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 29, in get_class
    return get_classes(module_label, [classname], module_prefix)[0]
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 86, in get_classes
    oscar_module = _import_module(oscar_module_label, classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 121, in _import_module
    return __import__(module_label, fromlist=classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/apps/catalogue/reviews/views.py"", line 13, in <module>
    ['ProductReviewForm', 'VoteForm', 'SortReviewsForm'])
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 86, in get_classes
    oscar_module = _import_module(oscar_module_label, classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 121, in _import_module
    return __import__(module_label, fromlist=classnames)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/apps/catalogue/reviews/forms.py"", line 6, in <module>
    Vote = get_model('reviews', 'vote')
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/oscar/core/loading.py"", line 235, in get_model
    return apps.get_model(app_label, model_name)
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/apps/registry.py"", line 197, in get_model
    return self.get_app_config(app_label).get_model(model_name.lower())
  File ""/Users/voonik/python_env/lib/python2.7/site-packages/django/apps/registry.py"", line 155, in get_app_config
    raise LookupError(message)
LookupError: No installed app with label 'reviews'.
```"
10915,django-oscar,django-oscar,10,closed,2176,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2176/comments,https://github.com/django-oscar/django-oscar/issues/2176,"[{""default"": false, ""name"": ""Feedback wanted"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/Feedback%20wanted"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw1MzE3ODM0MTM="", ""id"": 531783413}, {""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Order filter form in profile throws UnicodeEncodeError,"Hi,

Order filtering form throws UnicodeEncodeError if site is displayed in language other than English. After debug I found that [mark_safe](https://github.com/django-oscar/django-oscar/blob/1.2.1/src/oscar/forms/widgets.py#L207) should accept unicode instead of string:

    return mark_safe(u'<div class=""form-inline"">'
                         ...
                         .format(div=div, input=input))"
10918,django-oscar,django-oscar,10,closed,2173,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2173/comments,https://github.com/django-oscar/django-oscar/issues/2173,"[{""default"": false, ""name"": ""\u2753Support question"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9D%93Support%20question"", ""color"": ""fef2c0"", ""node_id"": ""MDU6TGFiZWw1MzI1NzMxOTQ="", ""id"": 532573194}]",Django 1.9 upgrade migrations fail,"I am upgrading django to 1.9 and Oscar to 1.3(from 1.2.1) and migration gives following error 

``` Applying catalogue.0009_auto_20160902_1953...Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 200, in handle
    executor.migrate(targets, plan, fake=fake, fake_initial=fake_initial)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 92, in migrate
    self._migrate_all_forwards(plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 121, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 198, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/migrations/migration.py"", line 123, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/migrations/operations/models.py"", line 359, in database_forwards
    getattr(new_model._meta, self.option_name, set()),
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 318, in alter_unique_together
    self._delete_composed_index(model, fields, {'unique': True}, self.sql_delete_unique)
  File ""/Users/nuruddin/.virtualenvs/magaz/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 347, in _delete_composed_index
    "", "".join(columns),
ValueError: Found wrong number (3) of constraints for catalogue_attributeoption(group_id, option)
```"
10921,django-oscar,django-oscar,10,closed,2170,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2170/comments,https://github.com/django-oscar/django-oscar/issues/2170,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",wrong order while loading models of forked apps,"I have a strange problem where one of the forked apps model is loaded after the one from oscar instead other forked apps are loaded in the correct order; this is causing a RuntimeError because our app tries to register a model that is already registered.

I have checked the get_core_apps() return value and the oscar model is overridden by our custom UserAddress model.

does AbstractUserAddress require some additional work or different procedure?

for all our cusom models we have followed this guide http://django-oscar.readthedocs.io/en/releases-1.3/howto/how_to_customise_models.html but only the custom UserAddress has problems at load time."
10924,django-oscar,django-oscar,10,closed,2167,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2167/comments,https://github.com/django-oscar/django-oscar/issues/2167,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]","Error on ""incentive"" step of the offer wizard","When creating offer through the offer wizard and on the second step, ""Incentive"", select ""range"" and ""type"" but do not fill in ""value"" it gives next exception:

```python
Traceback (most recent call last):
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/Users/a1/projects/djangooscar/src/oscar/apps/dashboard/offers/views.py"", line 93, in dispatch
    **kwargs)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/views/generic/edit.py"", line 221, in post
    if form.is_valid():
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/forms/forms.py"", line 161, in is_valid
    return self.is_bound and not self.errors
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/forms/forms.py"", line 153, in errors
    self.full_clean()
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/forms/forms.py"", line 364, in full_clean
    self._post_clean()
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/forms/models.py"", line 396, in _post_clean
    self.instance.full_clean(exclude=exclude, validate_unique=False)
  File ""/Users/a1/projects/djangooscar/env3/lib/python3.5/site-packages/django/db/models/base.py"", line 1129, in full_clean
    self.clean()
  File ""/Users/a1/projects/djangooscar/src/oscar/apps/offer/abstract_models.py"", line 497, in clean
    getattr(self, method_name)()
  File ""/Users/a1/projects/djangooscar/src/oscar/apps/offer/abstract_models.py"", line 515, in clean_percentage
    if self.value > 100:
TypeError: unorderable types: NoneType() > int()
```"
10926,django-oscar,django-oscar,10,closed,2165,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2165/comments,https://github.com/django-oscar/django-oscar/issues/2165,"[{""default"": false, ""name"": ""Dashboard"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/Dashboard"", ""color"": ""5f33aa"", ""node_id"": ""MDU6TGFiZWw1OTYzNDI3MDU="", ""id"": 596342705}, {""default"": false, ""name"": ""\u2753Support question"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9D%93Support%20question"", ""color"": ""fef2c0"", ""node_id"": ""MDU6TGFiZWw1MzI1NzMxOTQ="", ""id"": 532573194}]",Oscar Dashboard requests /static/css/base.css instead of /static/oscar/css/,"Hello

I'm somewhat new to Django, but I have previously installed Django Oscar on it's own to test it out and it was working perfectly fine.

However I'm now building a project which uses Django-Allauth with a Custom User Model, and I have installed Django-Oscar, however when I launch the Dashboard it doesn't load in it's entirety, (screenshot attached below) I see from the Run log that it currently requests my static/css/base.css, however when I launched it before I see it goes to /static/oscar/css to get it's stylesheets. I believe that this may be the problem (please let me know if you think otherwise).

I've gone through my settings time and time again to see if there is an issue somewhere but I can't seem to pinpoint anything, so I wanted to post here in help of a resolution. 

Thanks in advance. 

Below is my settings.py posted:

``` 
from oscar.defaults import *
from oscar import OSCAR_MAIN_TEMPLATE_DIR
from oscar import get_core_apps


# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

ALLOWED_HOSTS = []


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',
    'django.contrib.flatpages',
    'Users',
    'crispy_forms',
    'widget_tweaks',
    'allauth',
    'allauth.account',
    'allauth.socialaccount',

    # ... include the providers you want to enable:

    'allauth.socialaccount.providers.facebook',
    'allauth.socialaccount.providers.google',
    'allauth.socialaccount.providers.linkedin',
    'allauth.socialaccount.providers.linkedin_oauth2',
    'allauth.socialaccount.providers.twitter',
] + get_core_apps()

HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
    },
}


MIDDLEWARE_CLASSES = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'oscar.apps.basket.middleware.BasketMiddleware',
    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
]

ROOT_URLCONF = 'Clip.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, 'templates'),
                 OSCAR_MAIN_TEMPLATE_DIR
                 ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'django.core.context_processors.i18n',
                'django.core.context_processors.media',
                'django.core.context_processors.static',

                'oscar.apps.search.context_processors.search_form',
                'oscar.apps.promotions.context_processors.promotions',
                'oscar.apps.checkout.context_processors.checkout',
                'oscar.apps.customer.notifications.context_processors.notifications',
                'oscar.core.context_processors.metadata',
            ],
        },
    },
]

WSGI_APPLICATION = 'Clip.wsgi.application'


# Database
# https://docs.djangoproject.com/en/1.10/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}


# Password validation
# https://docs.djangoproject.com/en/1.10/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/1.10/topics/i18n/

LANGUAGE_CODE = 'en-us'

TIME_ZONE = 'UTC'

USE_I18N = True

USE_L10N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/1.10/howto/static-files/

STATIC_URL = '/static/'
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

AUTHENTICATION_BACKENDS = (

    # Needed to login by username in Django admin, regardless of `allauth`
    'django.contrib.auth.backends.ModelBackend',

    # `allauth` specific authentication methods, such as login by e-mail
    'allauth.account.auth_backends.AuthenticationBackend',

    # Oscar-Django Authentication
    'oscar.apps.customer.auth_backends.EmailBackend',
    'django.contrib.auth.backends.ModelBackend',

)


AUTH_USER_MODEL = 'Users.User'

SITE_ID = 1


# AllAuth Settings

ACCOUNT_USER_MODEL_USERNAME_FIELD = None
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_USERNAME_REQUIRED = False
ACCOUNT_AUTHENTICATION_METHOD = 'email'
ACCOUNT_SIGNUP_FORM_CLASS = 'Users.forms.SignupForm'


LOGIN_REDIRECT_URL = '/'


CRISPY_TEMPLATE_PACK = ""bootstrap3""
``` 

![screen shot 2016-11-11 at 13 03 04](https://cloud.githubusercontent.com/assets/10997398/20215898/706bc442-a80f-11e6-9543-3e01225896fa.png)

"
10928,django-oscar,django-oscar,10,closed,2163,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2163/comments,https://github.com/django-oscar/django-oscar/issues/2163,"[{""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Not able to apply custom benefit,"I followed the following [http://django-oscar.readthedocs.io/en/releases-1.2/howto/how_to_create_a_custom_benefit.html](tutorial) I did the same and tried to apply the benefit using ```create_benefit``` present in the ```oscar.apps.offer.custom``` after appling I get a recursion error and the function also warns of recursion error if not applied ```__str__ ``` but even after that I am facing the same problem. Kindly help ASAP

I am using Oscar 1.3"
10945,django-oscar,django-oscar,10,closed,2146,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2146/comments,https://github.com/django-oscar/django-oscar/pull/2146,[],Feature/django 110,"some errors in testing, but doesnt seem to be django 1.10 related, sandbox on 1.10 works good
"
10965,django-oscar,django-oscar,10,closed,2125,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2125/comments,https://github.com/django-oscar/django-oscar/pull/2125,"[{""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Update getting_started.rst,"## Scope

As per https://docs.djangoproject.com/en/1.10/topics/http/middleware/ MIDDLEWARE_CLASSES has changed to MIDDLEWARE.

Oscar still uses MIDDLEWARE_CLASSES and it should be noted to avoid confusion during setup.

Alternatively if this change isn't made it throws the following error when running `python manage.py rusnerver`

`VariableDoesNotExist: Failed lookup for key [basket] in u""<WSGIRequest: GET '/'>""`
"
10972,django-oscar,django-oscar,10,closed,2118,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2118/comments,https://github.com/django-oscar/django-oscar/issues/2118,[],Broken sandbox gateway page,"The README states that dashboard users for the sandbox site could be created using [this gateway page](http://latest.oscarcommerce.com/gateway/) - however this link returns a django error page:

```
TemplateDoesNotExist at /de/gateway/
gateway/form.html
```
"
10982,django-oscar,django-oscar,11,closed,2108,1,https://api.github.com/repos/django-oscar/django-oscar/issues/2108/comments,https://github.com/django-oscar/django-oscar/issues/2108,[],Django 1.10 warnings in forms,"Hi guys, creating a Paymen Detail View i get this warning:

``` bash
/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/payment/forms.py:214: RemovedInDjango110Warning: The 'error_message' argument is deprecated. Use Field.error_messages['invalid'] instead.
  r'^\d{3,4}$', *args, **_kwargs)
```
"
10994,django-oscar,django-oscar,11,closed,2096,3,https://api.github.com/repos/django-oscar/django-oscar/issues/2096/comments,https://github.com/django-oscar/django-oscar/issues/2096,"[{""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Apache Solr integration documentation outdated,"Hi guys

As[ i couldn't integrate](https://github.com/django-oscar/django-oscar/issues/2089) Oscar with `elasticsearch` search engine, i had chosen use `apache solr` instead.

```
 I test it in the same way that i test `elasticsearch`: seeking in the home page all products, and i have this bug:
[13/Aug/2016 01:43:49] ""GET / HTTP/1.1"" 200 28031
Failed to query Solr using '*:*': Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
Traceback (most recent call last):
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/haystack/backends/solr_backend.py"", line 134, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 710, in search
    response = self._select(params, handler=search_handler)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 411, in _select
    return self._send_request('get', path)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 386, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
Failed to query Solr using '*:*': Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
Traceback (most recent call last):
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/haystack/backends/solr_backend.py"", line 134, in search
    raw_results = self.conn.search(query_string, **search_kwargs)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 710, in search
    response = self._select(params, handler=search_handler)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 411, in _select
    return self._send_request('get', path)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 386, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
```

So, i went to [integration docs](http://django-oscar.readthedocs.io/en/latest/howto/how_to_setup_solr.html) for know how i can integrate Oscar with `solr`. 
I had installed `solr` and i running it, i test this in browser with the url `http://localhost:8983/solr`, is `6.1.0` version.

Then i'd putted the concection setting:

``` python
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
        'URL': 'http://127.0.0.1:8983/solr',
        'INCLUDE_SPELLING': True,
        # 'INDEX_NAME': 'rosa-blanca',
    },
}
```

And then i tried to build the index, as step say `./manage.py rebuild_index --noinput`, but i get this error:

``` bash
 ./manage.py rebuild_index                                                                                         ✓  2031  00:47:57 
/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/utils/six.py:808: RemovedInDjango110Warning: SubfieldBase has been deprecated. Use Field.from_db_value instead.
  return meta(name, bases, d)

/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/treebeard/admin.py:62: RemovedInDjango110Warning: Support for string view arguments to url() is deprecated and will be removed in Django 1.10 (got django.views.i18n.javascript_catalog). Pass the callable instead.
  {'packages': ('treebeard',)}),

/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/treebeard/admin.py:62: RemovedInDjango110Warning: django.conf.urls.patterns() is deprecated and will be removed in Django 1.10. Update your urlpatterns to be a list of django.conf.urls.url() instances instead.
  {'packages': ('treebeard',)}),

WARNING: This will irreparably remove EVERYTHING from your search index in connection 'default'.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y
Removing all documents from your index because you said so.
Failed to clear Solr index: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
Traceback (most recent call last):
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/haystack/backends/solr_backend.py"", line 101, in clear
    self.conn.delete(q='*:*', commit=commit)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 906, in delete
    return self._update(m, commit=commit, waitFlush=waitFlush, waitSearcher=waitSearcher, handler=handler)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 471, in _update
    return self._send_request('post', path, message, {'Content-type': 'text/xml; charset=utf-8'})
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 386, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
All documents removed.
Indexing 1 Products
Failed to add documents to Solr: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
Traceback (most recent call last):
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/haystack/backends/solr_backend.py"", line 72, in update
    self.conn.add(docs, commit=commit, boost=index.get_field_weights())
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 875, in add
    overwrite=overwrite, handler=handler)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 471, in _update
    return self._send_request('post', path, message, {'Content-type': 'text/xml; charset=utf-8'})
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/pysolr.py"", line 386, in _send_request
    raise SolrError(error_message % (resp.status_code, solr_message))
pysolr.SolrError: Solr responded with an error (HTTP 404): [Reason: Error 404 Not Found]
```

So, seeking the documentation i can see that something is wrong:

> $ cd solr-4.7.2/example/solr/collection1
> $ mv conf conf.original
> $ ln -s <your_oscar_checkout>/sites/sandbox/deploy/solr conf

Here are at least two error:
- The first and the worst, in the current Oscar version, in the `sites` folder doesn't exist anymore the `deploy` folder. But, in the Oscar's demo i can find these folder, and the sorl folder, but i can't find the `conf` file.
  I haven't clear what have i do in this case, copy all folder? copy only the schema file? What?
- In the curren `solr` version doesn't exist one `solr` folder inside `examples` folder.
  `bash
  ~/solr-6.1.0  ls example/                                                                                                                     ✓  2026  01:55:59 
  cloud  example-DIH  exampledocs  files  films  README.txt  resources
  `

So, i don't know what i have to do here for integrate successfully Oscar with `Apache solr`.

Thank you!
"
11001,django-oscar,django-oscar,11,closed,2089,11,https://api.github.com/repos/django-oscar/django-oscar/issues/2089/comments,https://github.com/django-oscar/django-oscar/issues/2089,[],Facets are been deprecated in Elasticsearch 2.0,"Hi guys, i'm working with `haystack 2.5` and `elasticsearch 2.5.3` and i have this [bug](https://github.com/django-haystack/django-haystack/issues/1247#issuecomment-238462589).

This happen because ElasticSearch deprecated `facets` and doesn't matters if `haystack` branches support now the lastes ElasticSearch version, Oscar use faces for filters.

So, what solution we have here?

Is better use the latest Sorl version? 
"
11006,django-oscar,django-oscar,11,closed,2084,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2084/comments,https://github.com/django-oscar/django-oscar/issues/2084,"[{""default"": false, ""name"": ""\u263c Enhancement"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%BC%20Enhancement"", ""color"": ""D8E4FD"", ""node_id"": ""MDU6TGFiZWw5MDg1Mw=="", ""id"": 90853}]",Support django-tables 1.2,"I was trying to see the customers for my e-commerce web site project, and when i click in customers option in customers menu i got this error:
![valueerror at -dashboard-users- - mozilla firefox_141](https://cloud.githubusercontent.com/assets/5034215/17465633/b73b4282-5cc2-11e6-95b6-15e09a70ce9c.png)

Here are the traceback:

``` bash
Environment:


Request Method: GET
Request URL: http://localhost:8000/dashboard/users/

Django Version: 1.9.9
Python Version: 3.5.2
Installed Applications:
['jet.dashboard',
 'jet',
 'axes',
 'cashondelivery',
 'django_extensions',
 'oscarapi',
 'paypal',
 'payu',
 'rest_framework',
 'robots',
 'widget_tweaks',
 'webpack_loader',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'oscar.apps.dashboard.shipping',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2',
 'debug_toolbar']
Installed Middleware:
['debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.gzip.GZipMiddleware',
 'django.middleware.http.ConditionalGetMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware']



Traceback:

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  149.                     response = self.process_exception_by_middleware(e, request)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/core/handlers/base.py"" in get_response
  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  23.                 return view_func(request, *args, **kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/dashboard/users/views.py"" in dispatch
  41.         return super(IndexView, self).dispatch(request, *args, **kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/views/generic/base.py"" in dispatch
  88.         return handler(request, *args, **kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/views/generic/base.py"" in get
  157.         context = self.get_context_data(**kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/dashboard/users/views.py"" in get_context_data
  103.         context = super(IndexView, self).get_context_data(**kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django_tables2/views.py"" in get_context_data
  101.         table = self.get_table()

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/dashboard/users/views.py"" in get_table
  98.         table = super(IndexView, self).get_table(**kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django_tables2/views.py"" in get_table
  82.         table = table_class(self.get_table_data(), **kwargs)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django_tables2/tables.py"" in __init__
  348.         self.data = self.TableDataClass(data=data, table=self)

File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django_tables2/tables.py"" in __init__
  45.             ' list(data) -- {} has neither'.format(type(data).__name__)

Exception Type: ValueError at /dashboard/users/
Exception Value: data must be QuerySet-like (have count() and order_by()) or support list(data) -- NoneType has neither
```

Can anyone help me with this?

I have `django==1.9.9` and `django-oscar==1.2.2` and `django-tables2==1.2.5`.

Thanks!

Seems that problem is with lastest `django-tables2` version. 
Have you guys plans for make `django-oscar` compatible?
"
11018,django-oscar,django-oscar,11,closed,2072,15,https://api.github.com/repos/django-oscar/django-oscar/issues/2072/comments,https://github.com/django-oscar/django-oscar/issues/2072,[],Incompatibilities with django 1.10,"Hi guys, now i update `django` to `1.10` version and i have this problem:

``` bash
 salahaddin@TulipanROG  ~/Proyectos/demo-oscar/ecommerce   master ● ?  (demo-oscar)  ./manage.py runserver                                                                                               ✓  1685  18:14:32 
Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f7ed4947730>
Traceback (most recent call last):
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/core/management/commands/runserver.py"", line 113, in inner_run
    autoreload.raise_last_exception()
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/utils/autoreload.py"", line 249, in raise_last_exception
    six.reraise(*_exception)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/django/apps/config.py"", line 199, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 665, in exec_module
  File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/address/models.py"", line 1, in <module>
    from oscar.apps.address.abstract_models import (
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/apps/address/abstract_models.py"", line 13, in <module>
    from oscar.models.fields import PhoneNumberField, UppercaseCharField
  File ""/home/salahaddin/Proyectos/demo-oscar/lib/python3.5/site-packages/oscar/models/fields/__init__.py"", line 3, in <module>
    from django.db.models import SubfieldBase
ImportError: cannot import name 'SubfieldBase'

```

[Here ](https://github.com/omab/python-social-auth/issues/755) are a solution for this problem.

I'll report some problems with django 1.10.

Thanks you!
"
11026,django-oscar,django-oscar,11,closed,2064,7,https://api.github.com/repos/django-oscar/django-oscar/issues/2064/comments,https://github.com/django-oscar/django-oscar/issues/2064,[],Content Blocks deletion is not working,"1. Go to Oscar Dashboard
2. Create a new content block RawHTML
3. Try to delete it

TypeError at /oscar/dashboard/content-blocks/delete/rawhtml/1/
argument of type 'bool' is not iterable
Request Method: GET
Request URL:    http://pollux.local:8000/oscar/dashboard/content-blocks/delete/rawhtml/1/
Django Version: 1.9.7
Exception Type: TypeError
Exception Value:  
argument of type 'bool' is not iterable
Exception Location: /home/radevil/virtualenvs/pollux/lib/python3.4/site-packages/django/templatetags/i18n.py in render_value, line 162
Python Executable:  /home/radevil/virtualenvs/pollux/bin/python
Python Version: 3.4.3
"
11028,django-oscar,django-oscar,11,closed,2062,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2062/comments,https://github.com/django-oscar/django-oscar/pull/2062,[],Added a default ordering so get_queryset will not query the database again,"I tried customizing the basket view by adjusting the `basket_content.html` to display the discounts of each line. I encountered that the discounts were not there, however, the summary with the totals below it shows the discounts.

After some debugging I figured out that the queryset that is used (`basket.all_lines()`) contains the discounts applied as it uses a cached resultset with all offers applied:

``` python
# oscar/apps/basket/views.py
class BasketView(ModelFormSetView):
    model = get_model('basket', 'Line')
    ...
    def get_queryset(self):
        return self.request.basket.all_lines()
```

This Formset which is used in the view is using this queryset, so the question is why the discount values are empty:

``` python
# oscar/apps/basket/forms.py
class BaseBasketLineFormSet(BaseModelFormSet):

    def __init__(self, strategy, *args, **kwargs):
        self.strategy = strategy
        super(BaseBasketLineFormSet, self).__init__(*args, **kwargs)
        ...
```

The BaseModelFormSet is using the following code for getting the queryset:

``` python
# django/forms/models.py
class BaseModelFormSet(BaseFormSet):
    ...
    def get_queryset(self):
        if not hasattr(self, '_queryset'):
            if self.queryset is not None:
                qs = self.queryset
            else:
                qs = self.model._default_manager.get_queryset()

            # If the queryset isn't already ordered we need to add an
            # artificial ordering here to make sure that all formsets
            # constructed from this queryset have the same form order.
            if not qs.ordered:
                qs = qs.order_by(self.model._meta.pk.name)

            # Removed queryset limiting here. As per discussion re: #13023
            # on django-dev, max_num should not prevent existing
            # related objects/inlines from being displayed.
            self._queryset = qs
        return self._queryset
```

So when the queryset is not ordered, it will query the database again with an `order_by`, so then all discount values are lost. 

So that's the reason of this pull request :)
"
11037,django-oscar,django-oscar,11,closed,2053,4,https://api.github.com/repos/django-oscar/django-oscar/issues/2053/comments,https://github.com/django-oscar/django-oscar/issues/2053,"[{""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Adding custom node to the dashboard navigation error,"Hello,

I added a new custom node to dashboard navigation in settings.py:

`OSCAR_DASHBOARD_NAVIGATION += [
    {
        'label': _('New Admin'),
        'icon': 'icon-bar-chart',
        'url_name': 'admin:main_school_changelist',
    },
]`

but I get this error
`ImproperlyConfigured at /shop/dashboard/pages/
Please follow Oscar's default dashboard app layout or set a custom access_fn`

It seems like someone has the same problem: [https://groups.google.com/forum/#!msg/django-oscar/D96E15xcjPk/LGdHDhIgUXgJ](url)

I'm using Django Oscar 1.1.1 and Django 1.8.13.
"
11049,django-oscar,django-oscar,11,closed,2040,7,https://api.github.com/repos/django-oscar/django-oscar/issues/2040/comments,https://github.com/django-oscar/django-oscar/issues/2040,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",MultipleObjectsReturned is possible when logging in with duplicate email,"Related to #295 but that was marked fixed so maybe this is a regression. Same issue as before. Can be reproduced by
1. Create 2 users with the same email in django admin
2. Log in using /store/accounts/login/

```
MultipleObjectsReturned: There are multiple users with the given email address and password
  File ""django/views/generic/base.py"", line 89, in dispatch
    return handler(request, *args, **kwargs)
  File ""oscar/apps/customer/views.py"", line 125, in post
    return self.validate_login_form()
  File ""oscar/apps/customer/views.py"", line 152, in validate_login_form
    if form.is_valid():
  File ""django/forms/forms.py"", line 184, in is_valid
    return self.is_bound and not self.errors
  File ""django/forms/forms.py"", line 176, in errors
    self.full_clean()
  File ""django/forms/forms.py"", line 393, in full_clean
    self._clean_form()
  File ""django/forms/forms.py"", line 417, in _clean_form
    cleaned_data = self.clean()
  File ""django/contrib/auth/forms.py"", line 157, in clean
    password=password)
  File ""django/contrib/auth/__init__.py"", line 74, in authenticate
    user = backend.authenticate(**credentials)
  File ""oscar/apps/customer/auth_backends.py"", line 54, in authenticate
    ""There are multiple users with the given email address and ""
```
"
11063,django-oscar,django-oscar,11,closed,2026,0,https://api.github.com/repos/django-oscar/django-oscar/issues/2026/comments,https://github.com/django-oscar/django-oscar/issues/2026,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",UnicodeCSVWriter raises AttributeError: 'NoneType' object has no attribute 'writerows',"when it used in a second variant in the `with` statement and a filename has passed to the constructor.
I've tried smth like:

<pre>
from oscar.core.compat import UnicodeCSVWriter

data = [[1, 2, 3], [4, 5, 6]]
with UnicodeCSVWriter('test.csv') as writer:
    writer.writerows(data)`
</pre>

and have got AttributeError, while `test.csv` file was created but remains empty.

However, it works perfectly in the first variant: `writer = UnicodeCSVWriter(open_file=fhandler)`

It seems like `return self` should be in the end of the `__enter__` method (here: https://github.com/django-oscar/django-oscar/blob/master/src/oscar/core/compat.py#L154 )
"
11066,django-oscar,django-oscar,11,closed,2023,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2023/comments,https://github.com/django-oscar/django-oscar/issues/2023,[],Prices and availability (documentation),"Example : 

```
>>> product = Product.objects.get(id=1)
>>> product.price
Decimal('17.99')
```

It doesn't work (from sandbox)

`AttributeError: 'Product' object has no attribute 'price'`

http://django-oscar.readthedocs.org/en/releases-1.1/topics/prices_and_availability.html
"
11073,django-oscar,django-oscar,11,closed,2016,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2016/comments,https://github.com/django-oscar/django-oscar/issues/2016,[],Unable to override ProductImage and ProductImageForm classes,"I have been trying to override the `ProductImage` and `ProductImageForm` classes but I've run into an issue and can't figure out how to achieve this (or whether it's even possible). I've already successfully overridden the `Product` and `ProductForm` classes so I assumed I would be able to do something similar for `ProductImage` and `ProductImageForm`.

I wanted to make significant changes to the `ProductImage` class, so I've overridden this class and **not** inherited from `AbstractProductImage`, and this _seems_ to be working. My problem is that now I'm trying to override the `ProductImageForm` class so make it compatible with my new `ProductImage` class, and I keep getting the following error:

```
FieldError at /oscar-admin/dashboard/catalogue/products/1/
Unknown field(s) (caption, original) specified for ProductImage
```

This error comes from `class ProductImageForm(forms.ModelForm)` in `venv/lib/python3.5/site-packages/oscar/apps/dashboard/catalogue/forms.py`, which seems to imply that my customised `ProductImageForm` class is being ignored, but I have no idea why, especially since I am successfully overriding `ProductForm` in the very same file that I'm attempting to override `ProductImageForm`.

I'm using Django Oscar 1.1.1 and Django 1.8.9.

All the relevant code can be viewed here: https://gist.github.com/jordanmkoncz/9fe171eacc34ee83e996
"
11081,django-oscar,django-oscar,12,closed,2008,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2008/comments,https://github.com/django-oscar/django-oscar/issues/2008,[],ExpiryMonthField.clean raises AttributeError inappropriately,"Similar to https://github.com/django-oscar/django-oscar/issues/2006

If you create an `ExpiryMonthField` with `required=False` you can get into a situation where an `AttributeError` is raised where no error should be raised.

I'll submit a PR briefly.
"
11082,django-oscar,django-oscar,12,closed,2007,5,https://api.github.com/repos/django-oscar/django-oscar/issues/2007/comments,https://github.com/django-oscar/django-oscar/pull/2007,[],BankcardNumberField raise ValidationError instead of AttributeError,"Fix for https://github.com/django-oscar/django-oscar/issues/2006

If the form data doesn't include the credit card, it raises a `VadliationError` instead of the (less helpful) `AttributeError`.

Includes a test.
"
11084,django-oscar,django-oscar,12,closed,2005,2,https://api.github.com/repos/django-oscar/django-oscar/issues/2005/comments,https://github.com/django-oscar/django-oscar/issues/2005,[],Setting up django-oscar with Django 1.9,"When going through the ""Getting Started"" I get the following error:

`ImportError: No module named 'django.contrib.contenttypes.generic'`

It seems that in Django 1.9, [this module has been deprecated](https://docs.djangoproject.com/en/1.9/internals/deprecation/#deprecation-removed-in-1-9)

Are there any fixes to allow users to upgrade to Django 1.9?
"
11100,django-oscar,django-oscar,12,closed,1989,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1989/comments,https://github.com/django-oscar/django-oscar/issues/1989,[],Product.browsable.base_queryset() always chained with .browsable(),"Is this a bug or I couldn't understand something? 
`dashboard.catalogue.views.ProductListView` makes a list of products calling `Product.browsable.base_queryset()` [1] but BrowsableProductManager overrides parent's get_queryset method adding chain browsable() of ProductQuerySet [2] so base_queryset() method results something like `ProductQuerySet().browsable().base_queryset()`. 
Is this behavior correct and what is difference between `Product.browsable.base_queryset()` and `Product.browsable.all()`?
I'm trying to solve _relatively_ simple task about 'product hiding' without any views overriding and was going to customise `ProductQuerySet.browsable()` method with smth like `.filter(is_active=True)`. But I don't need this filters in dashboard views which uses base_queryset(). 

[1] https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/dashboard/catalogue/views.py#L108
[2] https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/catalogue/managers.py#L52
"
11101,django-oscar,django-oscar,12,closed,1988,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1988/comments,https://github.com/django-oscar/django-oscar/issues/1988,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",AttributeError at /shop/accounts/login/,"I have django-oscar being served at /shop/. I'm running Django 1.8.

When trying to register, I get this error:
```python
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/shop/accounts/login/

Django Version: 1.8.8
Python Version: 2.7.10
Installed Applications:
['modeltranslation',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.redirects',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'captcha',
 'compressor',
 'crequest',
 'debug_toolbar',
 'djcelery',
 'django_config_gen',
 'django_email_test',
 'django_mesh',
 'django_testmigrate',
 'dynamic_forms',
 'dynamic_forms.contrib.simple_captcha',
 'floppyforms',
 'imagekit',
 'macros',
 'rosetta',
 'social.apps.django_app.default',
 'settings_context_processor',
 'statici18n',
 'taggit',
 'widget_tweaks',
 'bluewonder.main',
 'bluewonder.giftcards',
 'bluewonder.shop',
 'bluewonder.quickcheckout',
 'oscar',
 'oscar.apps.analytics',
 'bluewonder.customoscar.checkout',
 'oscar.apps.address',
 'bluewonder.customoscar.shipping',
 'bluewonder.customoscar.catalogue',
 'oscar.apps.catalogue.reviews',
 'bluewonder.customoscar.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'oscar.apps.dashboard.shipping',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']
Installed Middleware:
('debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'crequest.middleware.CrequestMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'social.apps.django_app.middleware.SocialAuthExceptionMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'dynamic_forms.middlewares.FormModelMiddleware',
 'django.contrib.redirects.middleware.RedirectFallbackMiddleware')

Traceback:
File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/django/views/generic/base.py"" in view
2.             return self.dispatch(request, _args, *_kwargs)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
3.         return handler(request, _args, *_kwargs)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/oscar/apps/customer/views.py"" in post
4.             return self.validate_registration_form()
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/oscar/apps/customer/views.py"" in validate_registration_form
5.             self.register_user(form)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/oscar/apps/customer/mixins.py"" in register_user
6.         auth_login(self.request, user)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/django/contrib/auth/**init**.py"" in login
7.     request.session[SESSION_KEY] = user._meta.pk.value_to_string(user)
   File ""/home/sean/dev/myco/mysite/.venv/local/lib/python2.7/site-packages/django/utils/functional.py"" in inner
8.         return func(self._wrapped, *args)

Exception Type: AttributeError at /shop/accounts/login/
Exception Value: 'AnonymousUser' object has no attribute '_meta'
```
I haven't made any customization to that part of the code.
"
11104,django-oscar,django-oscar,12,closed,1985,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1985/comments,https://github.com/django-oscar/django-oscar/issues/1985,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",sandbox syntax errors,"Messages from command ""make sandbox"" display the following:

Compiling /tmp/pip-build-Mixix_/django/django/conf/app_template/apps.py ...
  File ""/tmp/pip-build-Mixix_/django/django/conf/app_template/apps.py"", line 1
    {{ unicode_literals }}from django.apps import AppConfig
                             ^
SyntaxError: invalid syntax

Compiling /tmp/pip-build-Mixix_/django/django/conf/app_template/models.py ...
  File ""/tmp/pip-build-Mixix_/django/django/conf/app_template/models.py"", line 1
    {{ unicode_literals }}from django.db import models
                             ^
SyntaxError: invalid syntax
"
11117,django-oscar,django-oscar,12,closed,1972,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1972/comments,https://github.com/django-oscar/django-oscar/issues/1972,[],ImportError: No module named 'django.utils.importlib',"Django 1.9.1 compatibility issue in following files : 
in file /oscar/apps/catalogue/abstract_models.py (line 20):
from django.contrib.contenttypes.generic import GenericForeignKey
should be 
from django.contrib.contenttypes.fields import GenericForeignKey

And in file /oscar/apps/offer/utils.py (line 3) : 
from django.utils.importlib import import_module
should be 
from importlib import import_module

  File ""/home/deepak/Documents/pyves/py34dj191/lib/python3.4/site-packages/oscar/apps/offer/models.py"", line 5, in <module>
    from oscar.apps.offer.abstract_models import (
  File ""/home/deepak/Documents/pyves/py34dj191/lib/python3.4/site-packages/oscar/apps/offer/abstract_models.py"", line 18, in <module>
    from oscar.apps.offer import results, utils
  File ""/home/deepak/Documents/pyves/py34dj191/lib/python3.4/site-packages/oscar/apps/offer/utils.py"", line 3, in <module>
    from django.utils.importlib import import_module
ImportError: No module named 'django.utils.importlib'
"
11125,django-oscar,django-oscar,12,closed,1961,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1961/comments,https://github.com/django-oscar/django-oscar/issues/1961,[],Compress not found,"Hello,

I was just starting to look into Django-Oscar, and by doing that I cloned the repo and tried to start running it.

However when I set up the sandbox site I get the following error:

```
TemplateSyntaxError at /en-gb/
'compress' is not a valid tag library: Template library compress not found, tried django.templatetags.compress,django.contrib.admin.templatetags.compress,django.contrib.flatpages.templatetags.compress,django.contrib.staticfiles.templatetags.compress,django_extensions.templatetags.compress,compress.templatetags.compress,debug_toolbar.templatetags.compress,widget_tweaks.templatetags.compress,oscar.templatetags.compress,haystack.templatetags.compress,treebeard.templatetags.compress,sorl.thumbnail.templatetags.compress,django_tables2.templatetags.compress
```

And the error is located in
In template /Documents/Django/django-oscar/oscar/lib/python2.7/site-packages/oscar/templates/oscar/layout.html, error at line 3

Would be great if someone can fix this so I can start looking into Django Oscar :+1: 

Thanks in advance!
"
11126,django-oscar,django-oscar,12,closed,1960,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1960/comments,https://github.com/django-oscar/django-oscar/issues/1960,[],Promotions template bug with OrderedProduct,"The sandbox site is choking at the moment with the following stacktrace:

```
ERROR 2016-01-03 22:45:12,349 base Internal Server Error: /en-gb/
Traceback (most recent call last):
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 164, in get_response
    response = response.render()
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/response.py"", line 158, in render
    self.content = self.rendered_content
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/response.py"", line 135, in rendered_content
    content = template.render(context, self._request)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/backends/django.py"", line 74, in render
    return self.template.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 210, in render
    return self._render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 135, in render
    return compiled_parent._render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 135, in render
    return compiled_parent._render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 135, in render
    return compiled_parent._render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/base.py"", line 905, in render
    bit = self.render_node(node, context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 217, in render
    nodelist.append(node.render(context))
  File ""/var/www/oscar/builds/latest/src/oscar/templatetags/promotion_tags.py"", line 13, in render
    template = select_template([promotion.template_name(),
AttributeError: 'OrderedProduct' object has no attribute 'template_name'
```

This `OrderedProduct` is loaded from `sites/_fixtures/promotions.json` but can't be rendered correctly. I imagine something has changed recently with how promotions are rendered within the `promotion_tags` module.
"
11131,django-oscar,django-oscar,12,closed,1955,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1955/comments,https://github.com/django-oscar/django-oscar/issues/1955,[],Can't install it!,"Hello,

When I run :  
`pip3 install django-oscar`

I've this error :  

```
Downloading/unpacking django<1.9,>=1.7.8 (from django-oscar)
  Could not find any downloads that satisfy the requirement django<1.9,>=1.7.8 (from django-oscar)
Cleaning up...
No distributions at all found for django<1.9,>=1.7.8 (from django-oscar)
```

Why? I'm running inside a virtualenv (Python 3). And I don't have any problem with Django usally...

Thanks for your help!
"
11134,django-oscar,django-oscar,12,closed,1952,8,https://api.github.com/repos/django-oscar/django-oscar/issues/1952/comments,https://github.com/django-oscar/django-oscar/issues/1952,[],Django-Oscar: Error extending base class “AbstractShippingAddress” from the app “address”,"Hello I have a problem that makes me crazy. I want to add one field ""company"" to the class ShippingAddress. I do the next:

Forking the app order of django-oscar.
In the file models.py of the order app I write the next code:

```
from oscar.apps.address.abstract_models import AbstractShippingAddress

class ShippingAddress(AbstractShippingAddress):
    company = models.CharField(""Empresa"", max_length=255)

from oscar.apps.order.models import *  # noqa*
```

I get the next error:

```
...lib/python3.3/site-packages/django/apps/registry.py"", line 221, in register_model
(model_name, app_label, app_models[model_name], model))
RuntimeError: Conflicting 'shippingaddress' models in application 'order': <class 'oscar.apps.order.models.ShippingAddress'> and <class 'apps.order.models.ShippingAddress'>.
```

I'm using Django==1.8.6, django-oscar==1.1.1 and python 3.3.

If you can help me I will be so grateful.
"
11150,django-oscar,django-oscar,12,closed,1936,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1936/comments,https://github.com/django-oscar/django-oscar/pull/1936,[],Issue/1935/duplicate attribute option raises exception,"Fix for https://github.com/django-oscar/django-oscar/issues/1935

If you have duplicate option values and try to perform the migration, you will get an exception: 
`django.db.utils.IntegrityError: UNIQUE constraint failed: catalogue_attributeoption__new.group_id, catalogue_attributeoption__new.option`

I have a data migration (with `RunPython`) that looks for and removes duplicates. I can include it if necessary.
"
11153,django-oscar,django-oscar,12,closed,1933,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1933/comments,https://github.com/django-oscar/django-oscar/issues/1933,[],ImportError raised when trying to load 'treebeard.templatetags.admin_tree': No module named util,"On MAC during the make sandbox
site-packages/django/template/backends/django.py"", line 148, in get_package_libraries
    ""trying to load '%s': %s"" % (entry[1], e)
django.template.library.InvalidTemplateLibrary: Invalid template library specified. ImportError raised when trying to load 'treebeard.templatetags.admin_tree': No module named util
make: **\* [build_sandbox] Error 1
"
11154,django-oscar,django-oscar,12,closed,1932,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1932/comments,https://github.com/django-oscar/django-oscar/issues/1932,[],nvalid template library specified. ImportError raised when trying to load 'treebeard.templatetags.admin_tree': No module named util,"The issue happens on Mac. Try to install the oscar on Mac, the issue happens when executing make sandbox.
..i/Projects/other/django-oscar/oscar/lib/python2.7/site-packages/django/template/backends/django.py"", line 148, in get_package_libraries
    ""trying to load '%s': %s"" % (entry[1], e)
django.template.library.InvalidTemplateLibrary: Invalid template library specified. ImportError raised when trying to load 'treebeard.templatetags.admin_tree': No module named util
make: **\* [build_sandbox] Error 1
"
11158,django-oscar,django-oscar,12,closed,1928,7,https://api.github.com/repos/django-oscar/django-oscar/issues/1928/comments,https://github.com/django-oscar/django-oscar/issues/1928,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Make sandbox installs Django 1.9,"To reproduce:

> `git clone https://github.com/django-oscar/django-oscar.git`
> `cd django-oscar`
> `virtualenv oscar`
> `source ./oscar/bin/activate`
>  `make sandbox`
> **......**
> **....**
> `Running migrations:`
> ...
> `Applying wishlists.0001_initial... OK`

```
Traceback (most recent call last):
  File ""sites/sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/management/__init__.py"", line 351, in execute_from_command_line
    utility.execute()
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/management/__init__.py"", line 343, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/management/base.py"", line 394, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/management/base.py"", line 445, in execute
    output = self.handle(*args, **options)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 208, in handle
    changes = autodetector.changes(graph=executor.loader.graph)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/db/migrations/autodetector.py"", line 43, in changes
    changes = self._detect_changes(convert_apps, graph)
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/db/migrations/autodetector.py"", line 186, in _detect_changes
    self.generate_altered_fields()
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/db/migrations/autodetector.py"", line 850, in generate_altered_fields
    if old_field_dec != new_field_dec:
  File ""/home/botir/Desktop/projects/dj-oscar/django-oscar/oscar/lib/python3.4/site-packages/django/core/validators.py"", line 55, in __eq__
    self.regex.pattern == other.regex.pattern and
AttributeError: 'bytes' object has no attribute 'pattern'
Makefile:8: recipe for target 'build_sandbox' failed
make: *** [build_sandbox] Error 1

```

**why make install doesn't install it.**
"
11168,django-oscar,django-oscar,12,closed,1918,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1918/comments,https://github.com/django-oscar/django-oscar/issues/1918,[],"Documentation Error: django.core.exceptions.ImproperlyConfigured: COMPRESS_ROOT defaults to STATIC_ROOT, please define either","After following Installation Instructions directly from the page: http://django-oscar.readthedocs.org/en/latest/internals/getting_started.html

Command <b>python manage.py migrate<b> fails with following traceback.

```
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/haystack/utils/__init__.py:12: RemovedInDjango19Warning: django.utils.importlib will be removed in Django 1.9.
  from django.utils import importlib

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 328, in execute
    django.setup()
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/compressor/models.py"", line 1, in <module>
    from compressor.conf import CompressorConf  # noqa
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/compressor/conf.py"", line 9, in <module>
    class CompressorConf(AppConf):
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/appconf/base.py"", line 75, in __new__
    new_class._configure()
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/appconf/base.py"", line 104, in _configure
    value = callback(value)
  File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/compressor/conf.py"", line 91, in configure_root
    'STATIC_ROOT, please define either')
django.core.exceptions.ImproperlyConfigured: COMPRESS_ROOT defaults to STATIC_ROOT, please define either
```

If i add `STATIC_ROOT = ""/home/static_files/""`

the migration is successful but runserver throws exception: 

```
Environment:


Request Method: GET
Request URL: http://127.0.0.1:8001/

Django Version: 1.8.6
Python Version: 2.7.6
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'compressor',
 'widget_tweaks',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'oscar.apps.dashboard.shipping',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

Template Loader Error:
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
Using loader django.template.loaders.app_directories.Loader:
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/contrib/admin/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/contrib/auth/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/compressor/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/oscar/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/haystack/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/treebeard/templates/promotions/home.html (File does not exist)
/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django_tables2/templates/promotions/home.html (File does not exist)



Traceback:
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  164.                 response = response.render()
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/template/response.py"" in render
  158.             self.content = self.rendered_content
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/template/response.py"" in rendered_content
  133.         template = self._resolve_template(self.template_name)
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/template/response.py"" in _resolve_template
  88.         new_template = self.resolve_template(template)
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/template/response.py"" in resolve_template
  78.             return loader.select_template(template, using=self.using)
File ""/home/env/virtualenvs/myenv/local/lib/python2.7/site-packages/django/template/loader.py"" in select_template
  76.         raise TemplateDoesNotExist(', '.join(template_name_list))

Exception Type: TemplateDoesNotExist at /
Exception Value: promotions/home.html
```

<b>pip freeze output: </b>

```
Babel==1.3
Django==1.8.6
django-appconf==1.0.1
django-compressor==1.6
django-extra-views==0.6.4
django-haystack==2.3.2
django-oscar==1.1.1
django-tables2==1.0.4
django-treebeard==3.0
django-widget-tweaks==1.3
factory-boy==2.4.1
mock==1.0.1
phonenumbers==6.3.0
Pillow==2.7.0
purl==1.1
pysolr==3.3.3
pytz==2015.7
requests==2.8.1
six==1.10.0
sorl-thumbnail==12.2
Unidecode==0.4.18
wheel==0.24.0

```

Is there anything which i am missing ?

I also did `python manage.py collectstatic`  but the issue is still there.
"
11169,django-oscar,django-oscar,12,closed,1917,7,https://api.github.com/repos/django-oscar/django-oscar/issues/1917/comments,https://github.com/django-oscar/django-oscar/pull/1917,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",Add missing end slash - fix error when APPEND_SLASH is set to True.,"RuntimeError: You called this URL via POST, but the URL doesn't end in a slash and you have APPEND_SLASH set. Django can't redirect to the slash URL while maintaining POST data. Change your form to point to host.cz/en/user-profile/orders/100030/1/ (note the trailing slash), or set APPEND_SLASH=False in your Django settings.
"
11215,django-oscar,django-oscar,13,closed,1870,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1870/comments,https://github.com/django-oscar/django-oscar/issues/1870,[],ImportError at /admin/products/productimage/9/ No module named PIL,"I successfully run my project in Pythonanywhere but when I tried to upload image in admin

Im getting this error:

ImportError at /admin/products/productimage/9/
No module named PIL
Request Method: POST
Request URL:    http://djangotest4010.pythonanywhere.com/admin/products/productimage/9/
Django Version: 1.8.4
Exception Type: ImportError
Exception Value:  
No module named PIL
Exception Location: /home/djangotest4010/.virtualenvs/env/local/lib/python2.7/site-packages/django/forms/fields.py in to_python, line 674
Python Executable:  /usr/local/bin/uwsgi
Python Version: 2.7.6
Python Path:  
['/var/www',
 '.',
 '',
 '/var/www',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7/plat-x86_64-linux-gnu',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7/lib-tk',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7/lib-old',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-x86_64-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/home/djangotest4010/.virtualenvs/env/local/lib/python2.7/site-packages',
 '/home/djangotest4010/.virtualenvs/env/lib/python2.7/site-packages',
 '/home/djangotest4010/src']
Server time:    Tue, 13 Oct 2015 20:44:00 +0000
"
11220,django-oscar,django-oscar,13,closed,1865,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1865/comments,https://github.com/django-oscar/django-oscar/issues/1865,[],ShippingAddressView.get_initial <Country: XXX> is not JSON serializable,"If you are to return back to the shipping address after you've reached further into the checkout process and you selected a country from the list, doing a GET request to the address /checkout/shipping-address/ would result in the following error:

`TypeError at /shop/checkout/shipping-address/ <Country: XXXXX> is not JSON serializable`

The issue is in here https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/checkout/views.py#L140

Modifying the initial dictionary in this function modifies the same reference that is going to be stored in the session.
"
11232,django-oscar,django-oscar,13,closed,1853,6,https://api.github.com/repos/django-oscar/django-oscar/issues/1853/comments,https://github.com/django-oscar/django-oscar/issues/1853,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Sortable on Range products_view broken,"JQuery UI was removed here: https://github.com/django-oscar/django-oscar/commit/1af6521ab5a6a1891e09f78f6cfd90a55f5e8020

If you go to `products_view` (`/dashboard/ranges/3/products/`) you get a javascript error: `$(...).sortable is not a function`
"
11241,django-oscar,django-oscar,13,closed,1843,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1843/comments,https://github.com/django-oscar/django-oscar/issues/1843,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",Override offers.Benefits and change TYPE_CHOICES,"Is there a conventional way to tackle this? My override model looks like:

```
class Benefit(AbstractBenefit):
    """"""
    Override Benefit model so we can inject our own Discount choice and model
    """"""

    # Benefit types
    MEMBERSHIP_DISCOUNT = (
        ""Membership Discount"")
    TYPE_CHOICES = (
        (MEMBERSHIP_DISCOUNT, ugettext(""Discount is as specified by the product's merchant membership settings"")),
    )
```

The problem is that setting the TYPE_CHOICES on the subclass is too late.

I can't override the `type` field directly lest I run into `django.core.exceptions.FieldError: Local field 'type' in class 'Benefit' clashes with field of similar name from base class 'AbstractBenefit'`

I've also tried the following solutions to no effect:

```
    def __init__(self, args, **kwargs):
        type_field = self._meta.get_field_by_name(""type"")[0]
        type_field.choices = self.TYPE_CHOICES
        super(Benefit, self).__init__(*args, **kwargs)
```

and

```
class Benefit:
   ...
Benefit._meta.get_field('type').choices = Benefit.TYPE_CHOICES
```

But both produce errors and I get the feeling they aren't the right solution here.
"
11246,django-oscar,django-oscar,13,closed,1838,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1838/comments,https://github.com/django-oscar/django-oscar/issues/1838,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",ImportError: No module named 'custom_apps\\promotions',"Hi, 

After forking app, It is giving this error:

ImportError: No module named 'custom_apps\promotions'

What I have done:

python manage.py oscar_fork_app promotions custom_apps

Creating package custom_apps\promotions

Creating admin.py

Creating app config

Creating models.py

Creating migrations folder

The final step is to add 'custom_apps\promotions' to INSTALLED_APPS
(replacing the equivalent Oscar app). This can be achieved using
Oscar's get_core_apps function - e.g.:

  # settings.py
  ...
  INSTALLED_APPS = [
      'django.contrib.auth',
      ...
  ]
  from oscar import get_core_apps
  INSTALLED_APPS = INSTALLED_APPS + get_core_apps(
      ['custom_apps\promotions'])

INSTALLED_APPS = [

```
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.flatpages',
'compressor',
""django.contrib.admin"",
'widget_tweaks',
""paypal"",
```

] + get_core_apps(['custom_apps.promotions'])
"
11263,django-oscar,django-oscar,13,closed,1820,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1820/comments,https://github.com/django-oscar/django-oscar/issues/1820,[],Problem with filtering vouchers in dashboard.,"Hi,

Trying to filter vouchers in dashboard gives this error:

""FieldError: Cannot resolve keyword 'start_date' into field. Choices are: applications, basket, code, date_created, end_datetime, id, name, num_basket_additions, num_orders, offers, start_datetime, total_discount, usage, users""

I'm gussing that this line:

`qs = qs.filter(start_date__lte=today, end_date__gte=today)`
should be:
`qs = qs.filter(start_datetime__lte=today, end_datetime__gte=today)`

https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/dashboard/vouchers/views.py#L62

At some point Voucher model fields `start_date` and `end_date` were renamed to `start_datetime` and `end_datetime`.

Cheers,
Wieslaw
"
11269,django-oscar,django-oscar,13,closed,1814,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1814/comments,https://github.com/django-oscar/django-oscar/issues/1814,[],Your models have changes that are not yet reflected in a migration,"On Django 1.7, oscar 1.1, after running `manage.py migrate` for the first time, it seems to run fine without error.

Subsequent runs of `managy.py migrate` give the following error:

```
...
Running migrations:
  No migrations to apply.
  Your models have changes that are not yet reflected in a migration, and so won't be applied.
  Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.
```

If I run `manage.py makemigrations` the following files are created:

**site-packages/oscar/apps/customer/migrations/0002_auto_20150723_2301.py**:

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals

from django.db import models, migrations
import oscar.models.fields.autoslugfield
import django.core.validators


class Migration(migrations.Migration):

    dependencies = [
        ('customer', '0001_initial'),
    ]

    operations = [
        migrations.AlterField(
            model_name='communicationeventtype',
            name='code',
            field=oscar.models.fields.autoslugfield.AutoSlugField(populate_from=b'name', validators=[django.core.validators.RegexValidator(regex=b'^[a-zA-Z_][0-9a-zA-Z_]*$', message=""Code can only contain the letters a-z, A-Z, digits, and underscores, and can't start with a digit."")], editable=False, max_length=128, separator='_', blank=True, help_text='Code used for looking up this event programmatically', unique=True, verbose_name='Code'),
            preserve_default=True,
        ),
    ]
```

**site-packages/oscar/apps/catalogue/migrations/0006_auto_20150723_2301.py**:

```
# -*- coding: utf-8 -*-
from __future__ import unicode_literals

from django.db import models, migrations
import django.core.validators
import oscar.core.validators


class Migration(migrations.Migration):

    dependencies = [
        ('catalogue', '0005_auto_20150604_1450'),
    ]

    operations = [
        migrations.AlterField(
            model_name='productattribute',
            name='code',
            field=models.SlugField(max_length=128, verbose_name='Code', validators=[django.core.validators.RegexValidator(regex=b'^[a-zA-Z_][0-9a-zA-Z_]*$', message=""Code can only contain the letters a-z, A-Z, digits, and underscores, and can't start with a digit""), oscar.core.validators.non_python_keyword]),
            preserve_default=True,
        ),
```
"
11275,django-oscar,django-oscar,13,closed,1808,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1808/comments,https://github.com/django-oscar/django-oscar/issues/1808,[],Squashing basket migrations raises CircularDependencyError,"Steps to reproduce:
1. Build the sandbox as described here: http://django-oscar.readthedocs.org/en/latest/internals/sandbox.html#run-the-sandbox-locally
2. Run `sites/sandbox/manage.py squashmigrations basket 0005`
3. Try to start the server back up `sites/sandbox/manage.py runserver`

As far as I can tell, it's because `basket.Basket` has a `ManyToManyField` to `voucher.Voucher`; `voucher.VoucherApplication` has a `ForeignKey` to `voucher.Voucher` and `order.Order`; and `order.Order` has a `ForeignKey` to `basket.Basket`.

I'm not sure how big of an issue this is, but it seems like there is a lot of complicated interdependence between those 3 apps at the model level.

I'll submit a PR with a proposed fix.

``` python
Traceback (most recent call last):
  File ""sites/sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
...
django.db.migrations.graph.CircularDependencyError: order.0001_initial, basket.0001_squashed_0005_auto_20150604_1450, voucher.0001_initial
```
"
11280,django-oscar,django-oscar,13,closed,1803,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1803/comments,https://github.com/django-oscar/django-oscar/issues/1803,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",currency filter fails if there's no active translation,"``` python
AttributeError: 'NoneType' object has no attribute 'find'
```

This is because Django 1.7 used to return LANGUAGE_CODE if there's no active translation. Modify line 25 in `templatetags.currency_filters` to restore old behavior:

``` python
        'locale': to_locale(get_language() or settings.LANGUAGE_CODE),
```
"
11281,django-oscar,django-oscar,14,closed,1802,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1802/comments,https://github.com/django-oscar/django-oscar/issues/1802,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Glyphicons font files missing but generated oscar/css/styles.css still references them,"The following 4 files are referenced in the generated `oscar/css/styles.css' file but aren't packaged with Oscar:
- glyphicons-halflings-regular.eot
- glyphicons-halflings-regular.svg
- glyphicons-halflings-regular.ttf
- glyphicons-halflings-regular.woff

I'm using a CSS post-processor (django-pipeline) and it complains that these files are missing while inspecting the CSS during post-processing for changing references to static files for versioned files (files with a hash in the name as a cache buster mechanism). This effectively crashes the `collectstatic` utility and prevents the build. I had to download these static files from the [bootstrap3](https://github.com/twbs/bootstrap/tree/master/fonts) project and include it in my project's static directory under `oscar/fonts/...` for the `collectstatic` utility to complete.

The stacktrace is as follows:

```
Post-processing 'oscar/css/styles.css' failed!

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python3.4/site-packages/django/core/management/base.py"", line 533, in handle
    return self.handle_noargs(**options)
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 168, in handle_noargs
    collected = self.collect()
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 120, in collect
    raise processed
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 242, in post_process
    content = pattern.sub(converter, content)
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 181, in converter
    hashed_url = self.url(unquote(joined_result), force=True)
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 128, in url
    hashed_name = self.stored_name(clean_name)
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 277, in stored_name
    cache_name = self.clean_name(self.hashed_name(name))
  File ""/usr/local/lib/python3.4/site-packages/django/contrib/staticfiles/storage.py"", line 91, in hashed_name
    (clean_name, self))
ValueError: The file 'oscar/fonts/glyphicons-halflings-regular.woff' could not be found with <pipeline.storage.PipelineCachedStorage object at 0x7f534c6068d0>.
```
"
11357,django-oscar,django-oscar,14,closed,1726,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1726/comments,https://github.com/django-oscar/django-oscar/issues/1726,[],Updating product without title throws error,"Emptying the title field for an existing product in dashboard raises <code>'NoneType' object has no attribute 'title'</code>.
The error happens in <code>apps.catalogue.views.ProductCreateUpdateView.get_page_title</code> as the view tries to set the page title by accessing a non-existing attribute.

Here's the traceback (tried on Oscar sandbox):

<pre>
Traceback:
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/core/handlers/base.py"" in get_response
  111.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/db/transaction.py"" in inner
  394.                 return func(*args, **kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/sandbox/django-oscar/src/oscar/apps/dashboard/catalogue/views.py"" in dispatch
  203.             request, *args, **kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/views/generic/base.py"" in dispatch
  87.         return handler(request, *args, **kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/views/generic/edit.py"" in post
  230.         return super(BaseUpdateView, self).post(request, *args, **kwargs)
File ""/sandbox/django-oscar/oscar/lib/python3.4/site-packages/django/views/generic/edit.py"" in post
  175.             return self.form_invalid(form)
File ""/sandbox/django-oscar/src/oscar/apps/dashboard/catalogue/views.py"" in process_all_forms
  316.             return self.forms_invalid(form, formsets)
File ""/sandbox/django-oscar/src/oscar/apps/dashboard/catalogue/views.py"" in forms_invalid
  375.         ctx = self.get_context_data(form=form, **formsets)
File ""/sandbox/django-oscar/src/oscar/apps/dashboard/catalogue/views.py"" in get_context_data
  261.         ctx['title'] = self.get_page_title()
File ""/sandbox/django-oscar/src/oscar/apps/dashboard/catalogue/views.py"" in get_page_title
  283.                     'parent_product': self.parent.title}

Exception Type: AttributeError at /en-gb/dashboard/catalogue/products/209/
Exception Value: 'NoneType' object has no attribute 'title'
</pre>
"
11364,django-oscar,django-oscar,14,closed,1719,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1719/comments,https://github.com/django-oscar/django-oscar/issues/1719,[],Basket View Error with Weight Based shipping and discount Applied ,"When a discount it's applied to shipping and the shipping method is WeightBased occurs the following error:

  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/django/core/handlers/base.py"", line 112, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/django/contrib/auth/decorators.py"", line 22, in _wrapped_view
    return view_func(request, _args, *_kwargs)
  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/django/views/generic/base.py"", line 87, in dispatch
    return handler(request, _args, *_kwargs)
  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/extra_views/formsets.py"", line 338, in get
    return super(BaseModelFormSetView, self).get(request, _args, *_kwargs)
  File ""/Users/christian/virtualenvs/webstores/lib/python2.7/site-packages/extra_views/formsets.py"", line 301, in get
    return self.render_to_response(self.get_context_data(formset=formset))
  File ""/Users/christian/virtualenvs/webstores/src/django-oscar/oscar/apps/basket/views.py"", line 150, in get_context_data
    excl_discount = method.calculate_excl_discount(shipping_charge)
  File ""/Users/christian/virtualenvs/webstores/src/django-oscar/oscar/apps/shipping/methods.py"", line 119, in calculate_excl_discount
    return self.method.calculate(basket)
  File ""/Users/christian/Documents/Projects/webstores/project/inti/oscarapp/shipping/models.py"", line 60, in calculate
    weight = scale.weigh_basket(basket)
  File ""/Users/christian/virtualenvs/webstores/src/django-oscar/oscar/apps/shipping/scales.py"", line 27, in weigh_basket
    for line in basket.lines.all():

apps/basket/views.py

``` python
        method = self.get_default_shipping_method(self.request.basket)
        context['shipping_method'] = method
        shipping_charge = method.calculate(self.request.basket)
        context['shipping_charge'] = shipping_charge
        if method.is_discounted:
            excl_discount = method.calculate_excl_discount(shipping_charge) # It's passing Price object type here not basket 
            context['shipping_charge_excl_discount'] = excl_discount
```

but in method weigh_basket in  
apps/shipping/scales.py line 25

``` python
    def weigh_basket(self, basket): #it requires  basket object not price object
        weight = 0.0
        for line in basket.lines.all(): 
            weight += self.weigh_product(line.product) * line.quantity
        return weight
```
"
11370,django-oscar,django-oscar,14,closed,1713,13,https://api.github.com/repos/django-oscar/django-oscar/issues/1713/comments,https://github.com/django-oscar/django-oscar/issues/1713,[],Product attribute's code generated with dashes,"Let's see in the following code:

``` python
>>> class Tmp(object):
...     pass
...     
>>> tmp = Tmp()
>>> setattr(tmp, 'temp-code', 123)
>>> tmp.temp-code
Traceback (most recent call last):
  File ""<input>"", line 1, in <module>
AttributeError: 'Tmp' object has no attribute 'temp'
>>> tmp.__dict__
{'temp-code': 123}
>>> getattr(tmp, 'temp-code')
123
```

Attribute was set, object have this attribute, but this attribute can not be accessed directly as `tmp.temp-code`. That's right, this is Python.
Product's attributes with spaces in their names have generated code with dashes. So, these attributes can not be accessed with `product.attr.some-attribute`, because of dash in attribute's codename is interpreted as minus sign in program's code. Documentation for `ProductAttributesContainer` offer this way to get attribute's values, but one way to get value is `getattr(product.attr, 'some-attribute')`.
This behavior can be fixed with using AutoSlugField with underscore as separator [here](https://github.com/django-oscar/django-oscar/blob/master/src%2Foscar%2Fapps%2Fcatalogue%2Fabstract_models.py#L780-L785):

``` python
class AbstractProductAttribute(models.Model):
    ...
    code = models.SlugField(
        _('Code'), max_length=128,
        validators=[RegexValidator(
            regex=r'^[a-zA-Z\-_][0-9a-zA-Z\-_]*$',
            message=_(""Code can only contain the letters a-z, A-Z, digits, ""
                      ""minus and underscores, and can't start with a digit""))])
    ...
```

Any thoughts?
"
11371,django-oscar,django-oscar,14,closed,1712,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1712/comments,https://github.com/django-oscar/django-oscar/pull/1712,[],[WIP] Django 1.8 support,"This pull request is a work in progress. Don't merge yet.

I was bored on a train, so I built upon @mbertheau and @mvantellingen's work of getting Django 1.8 to work. This PR supersedes #1711, and addressed #1710.

The commits should be self-explanatory. The only real issue is that tables2 is still failing two of our tests. @mbertheau, could you have a look at that? I fear we need to bug it's maintainer for a release, but maybe there's an easy workaround.
"
11374,django-oscar,django-oscar,14,closed,1709,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1709/comments,https://github.com/django-oscar/django-oscar/issues/1709,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",TypeError at /ru/dashboard/reports/: unsupported operand type(s),"Just leave date fields empty and click Generate report. For report types `report_type=order_report` and `report_type=conditional-offers` error will occur. Other reports works well.
Debug info:

```
Environment:

Request Method: GET
Request URL: http://XXXXXX/ru/dashboard/reports/?report_type=conditional-offers&date_from=&date_to=

Django Version: 1.7.7
Python Version: 2.7.3
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.flatpages',
 'django.contrib.staticfiles',
 'django.contrib.gis',
 'debug_toolbar',
 'django_extensions',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.facebook',
 'allauth.socialaccount.providers.google',
 'allauth.socialaccount.providers.twitter',
 'allauth.socialaccount.providers.vk',
 'compressor',
 'widget_tweaks',
 'stores',
 'datacash',
 'rosetta',
 'apps.user',
 'oscar_shipping',
 'kladr_api',
 'utils',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']
Installed Middleware:
('debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.transaction.TransactionMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')


Traceback:
File ""/home/projects/aquashop/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  111.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/projects/aquashop/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  21.                 return view_func(request, *args, **kwargs)
File ""/home/projects/aquashop/local/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/home/projects/aquashop/local/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  87.         return handler(request, *args, **kwargs)
File ""/home/fish/projects/AptanaWorkspace/django-oscar/src/oscar/apps/dashboard/reports/views.py"" in get
  43.                 report = generator.generate()
File ""/home/fish/projects/AptanaWorkspace/django-oscar/src/oscar/apps/offer/reports.py"" in generate
  48.             order__date_placed__lt=self.end_date + datetime.timedelta(days=1)

Exception Type: TypeError at /ru/dashboard/reports/
Exception Value: unsupported operand type(s) for +: 'NoneType' and 'datetime.timedelta'
```
"
11375,django-oscar,django-oscar,14,closed,1708,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1708/comments,https://github.com/django-oscar/django-oscar/issues/1708,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",basket/abstract_models.py: 'str' object has no attribute 'decode',"In description function of AbstractLine class, in this line:

``` python
d = ""%s (%s)"" % (d.decode('utf-8'), "", "".join(ops))
```

.decode('utf-8') should be dropped. It is not compatible with python 3.

This bug appeared since Django 1.8!
Django Version:       1.8.0
Python Version:     3.3.5
Oscar Version:        1.0.2

Error message and backtrack:
https://gist.github.com/foadnh/b69fcb91daf7cccf2cfc
"
11378,django-oscar,django-oscar,14,closed,1705,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1705/comments,https://github.com/django-oscar/django-oscar/pull/1705,[],Fix race condition when tracking num_basket_additions on a voucher,"### What is the problem / feature ?

The current implementation that maintains the counts for `Voucher.num_basket_addition` is subject to race conditions.  If two users apply the same voucher at approximately the same time, one of the additions can easily be lost.  The same applies to voucher removal.
### How did it get fixed / implemented ?

Instead of using `voucher.save()` change to use an `.update()` statement using an `F()` statement.

https://docs.djangoproject.com/en/1.7/ref/models/queries/#avoiding-race-conditions-using-f

This delegates the increment/decrement of this count to the database which allows for this operation to be safe from multiple concurrent updates.
### How can someone test / see it ?

I don't know how to write a test case that exposes this bug without some nasty mocking, `time.sleep()` and threading.  Ick.

_Here is a cute animal picture for your troubles..._

![cat-wearing-a-pointy-hat](https://cloud.githubusercontent.com/assets/824194/6943853/d6343ec8-d84d-11e4-9bdc-c624edb5658e.jpg)
"
11390,django-oscar,django-oscar,15,closed,1693,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1693/comments,https://github.com/django-oscar/django-oscar/issues/1693,[],django-oscar-paypal conversion from NoneType to Decimal is not supported,"TypeError at /checkout/paypal/preview/20/
conversion from NoneType to Decimal is not supported
Request Method: GET
Request URL:    http://127.0.0.1:8000/checkout/paypal/preview/20/?token=EC-4AK67334LD314125V&PayerID=XXWGZFWS36BP4
Django Version: 1.7.5
Exception Type: TypeError
Exception Value:  
conversion from NoneType to Decimal is not supported
Exception Location: c:\Users\murathuseyin\desktop\oscar\lib\site-packages\paypal\express\views.py in get_shipping_method, line 361
Python Executable:  c:\Users\murathuseyin\desktop\oscar\Scripts\python.exe
Python Version: 3.4.3
Python Path:  
['c:\Users\murathuseyin\desktop\oscar\proje',
 'C:\Windows\SYSTEM32\python34.zip',
 'c:\Users\murathuseyin\desktop\oscar\DLLs',
 'c:\Users\murathuseyin\desktop\oscar\lib',
 'c:\Users\murathuseyin\desktop\oscar\Scripts',
 'C:\Python34\Lib',
 'C:\Python34\DLLs',
 'c:\Users\murathuseyin\desktop\oscar',
 'c:\Users\murathuseyin\desktop\oscar\lib\site-packages']
Server time:    Sat, 7 Mar 2015 20:50:53 +0200

Any solution for this?
"
11394,django-oscar,django-oscar,15,closed,1689,8,https://api.github.com/repos/django-oscar/django-oscar/issues/1689/comments,https://github.com/django-oscar/django-oscar/issues/1689,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}, {""default"": false, ""name"": ""\u2691 High priority"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9A%91%20High%20priority"", ""color"": ""e11d21"", ""node_id"": ""MDU6TGFiZWw3MTIwNDg1MA=="", ""id"": 71204850}]",Category data migration throws an error,"I just migrated my local Oscar installation and the recent [data migration](https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/catalogue/migrations/0003_data_migration_slugs.py) on categories threw an AttributeError on `Category._slug_separator`. I think I don't fully understand what model I have at that point in time.

No stacktrace because I was on a train and writing down from memory.
"
11405,django-oscar,django-oscar,15,closed,1678,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1678/comments,https://github.com/django-oscar/django-oscar/pull/1678,[],Clerk,"This branch builds on #1677 and #1423. This PR is not meant for merging yet – at least documentation is missing, but also more complicated payment methods haven't been implemented yet and will most probably require API changes.

From the commit message of the first commit:

Introduce a friendly clerk to place an order

The clerk provides a pure python API to create an order, it doesn't need a request or a view. This is useful for creating orders in tests, factories, celery tasks or manually on the python command line.

The CheckoutFlow has been adapted to use the Clerk to place an order. To that end the payment has been extracted as a separate step to `Clerk.take_payment`.

Payment method implementations now don't have to know as many internals to plug into oscar as before. For payment methods without further user interaction it is now sufficient to return a list of `payment.api.PaymentSource` instances and a list of `payment.api.PaymentEvent` instances from `OrderPlacementMixin.handle_payment`. These classes are lightweight `namedtuples` that can be used without access to the Django ORM.

Other payment methods should raise `payment.exceptions.RedirectRequired` in `OrderPlacementMixin.handle_payment`.  The result view should mix in `checkout.flow.CheckoutFlow` and call `handle_payment_failed(message)` or `handle_payment_successful(basket_id, payment_sources, payment_events)`.  `handle_payment_successful` will care about restoring the basket and placing the order.

Here's the code we use to create an order in the tests:

``` python
Clerk = get_class('checkout.clerk', 'Clerk')
Basket = get_model('basket', 'Basket')
Selector = get_class('partner.strategy', 'Selector')

basket, __ = Basket.objects.get_or_create(owner=user)
basket.strategy = Selector().strategy(request=None, user=user)
basket.flush()
basket.add_product(product)
Applicator().apply(basket, user)

clerk = Clerk(user, basket)

clerk.receive_payment(payment_sources, payment_events)
clerk.place_order()
```

The shipping address and other data can be set on the clerk like it's done in `OrderPlacementMixin.get_clerk`.

I'm not completely happy with the API yet. Redirect payment method result views should have the possibility to just raise PaymentError or UnableToTakePayment just like non-redirect methods can do in `OrderPlacementMixin.handle_payment`. There's no inherent need for these APIs to differ. A dream would be if you could just put

``` python
OSCAR_PAYMENT_METHODS = ['django_oscar_paypal', 'django_oscar_stripe']
```

in the settings, without the need to override obscure mixins.

Example for the redirect:
https://github.com/machtfit/adyen/blob/eab53be6a35d246467580a587f5aa5436f9a63c2/oscar_adyen/mixins.py

Example for the result:
https://github.com/machtfit/adyen/blob/eab53be6a35d246467580a587f5aa5436f9a63c2/oscar_adyen/views.py
"
11422,django-oscar,django-oscar,15,closed,1659,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1659/comments,https://github.com/django-oscar/django-oscar/issues/1659,[],Template syntax error in range_products_saved.html,"To reproduce:

``` bash
$ sites/sandbox/manage.py validate_templates
/home/markus/src/django-oscar/src/oscar/templates/oscar/dashboard/ranges/messages/range_products_saved.html: TemplateSyntaxError ""count"" in u'blocktrans' tag expected exactly one keyword argument.
CommandError: 1 errors found
```
"
11423,django-oscar,django-oscar,15,closed,1658,11,https://api.github.com/repos/django-oscar/django-oscar/issues/1658/comments,https://github.com/django-oscar/django-oscar/issues/1658,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Sandbox build broken because django-widget-tweaks doesn't get installed,"To reproduce:

``` bash
$ mkvirtualenv oscar
(oscar) $ make sandbox
...
sites/sandbox/manage.py syncdb --noinput
Traceback (most recent call last):
  File ""sites/sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/markus/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/markus/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 354, in execute
    django.setup()
  File ""/home/markus/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/__init__.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/markus/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/home/markus/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/apps/config.py"", line 87, in create
    module = import_module(entry)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
ImportError: No module named widget_tweaks
make: *** [build_sandbox] Error 1
```

`django-widget-tweaks` is listed in https://github.com/django-oscar/django-oscar/blob/cd5bb8f741ec68a7f29b3c7379defd56d4774068/setup.py#L70 so it's not immediately obvious to me why make install doesn't install it.
"
11428,django-oscar,django-oscar,15,closed,1653,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1653/comments,https://github.com/django-oscar/django-oscar/issues/1653,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Dashboard email preview crashes on email templates with hyphen in code,"To reproduce, add a `CommunicationEventType` instance through the admin page with a hyphen in its code field (e.g. `TEST-DASH`). Open the dashboard and navigate to Content > Email Templates; an internal server error occurs.

Probably a good fix would be to add validation to the `code` field to ensure that it matches `\w+` as the regular expression in https://github.com/django-oscar/django-oscar/blob/master/src/oscar/apps/dashboard/communications/app.py#L17 suggests.
"
11436,django-oscar,django-oscar,15,closed,1645,7,https://api.github.com/repos/django-oscar/django-oscar/issues/1645/comments,https://github.com/django-oscar/django-oscar/pull/1645,[],Update checkout tests with new factories,"I  added fuctional tests to some checkout views: IndexView, ShippingAddressView, UserAddressUpdateView and DeleteUserAddressView.

There are some views left but in the meantime a test highlights that phonenumber is not working as expected with Python 3 and Django 1.6

``` python
    def test_submitting_valid_form_modifies_user_address(self):
        page = self.get(reverse('checkout:user-address-update', kwargs={'pk': self.user_address.pk}),
                        user=self.user)
        form = page.forms['update_user_address']
        form['first_name'] = 'Tom'
        response = form.submit()
        self.assertRedirectUrlName(response, 'checkout:shipping-address')
        self.assertEqual('Tom', UserAddress.objects.get().first_name)
```

This test will fail:

``` python
(Pdb) response
<200 OK text/html body=b'\n\n<!DO...l>\n'/14519>
(Pdb) response.form['phone_number'].value
'Country Code: 49 National Number: 3513296645 Country Code Source: 1 Preferred Domestic Carrier Code: '
```

It seems that the form is filled with the stringified  phone number object and so the submit fails.

``` python
(Pdb) response.html
'(...)<span class=""error-block""><i class=""icon-exclamation-sign""></i> This is not a valid local or international phone format.</span>(...)'
```

I still have to figure out why this happens
"
11453,django-oscar,django-oscar,15,closed,1628,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1628/comments,https://github.com/django-oscar/django-oscar/issues/1628,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}, {""default"": false, ""name"": ""\u270e Docs"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8E%20Docs"", ""color"": ""444444"", ""node_id"": ""MDU6TGFiZWwyMjYyNzgyMQ=="", ""id"": 22627821}]",Reverse for set_language not found,"New install of django-oscar 1.0.1 on Python 3.4.

Directly follow instructions here:

https://django-oscar.readthedocs.org/en/releases-1.0/internals/getting_started.html

Get to here to run the server:

https://django-oscar.readthedocs.org/en/releases-1.0/internals/getting_started.html#create-database

Error:

```
Template error:
In template /Users/paulwalsh/code/environments/hamigdalor/lib/python3.4/site-packages/oscar/templates/oscar/partials/nav_accounts.html, error at line 16
   Reverse for 'set_language' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []
```

I solved the error by doing the following (which I don't need):
- Adding a LANGUAGES setting
- Enabling the i18n urls

Not that only adding a LANGUAGES setting does not help - I had to do both.
"
11456,django-oscar,django-oscar,15,closed,1625,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1625/comments,https://github.com/django-oscar/django-oscar/issues/1625,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Sandbox: Advanced Search in dashboard/orders with date range results in attribute error,"1. Click on Advanced Search link next to Search button in /dashboard/orders
2. Enter date range 9/9/2014 - 12/12/2014
3. Click search
4. Django error page with below information is returned.

AttributeError at /en-gb/dashboard/orders/
'datetime.date' object has no attribute 'tzinfo'
Request Method: GET
Request URL:    http://127.0.0.1:5000/en-gb/dashboard/orders/?csrfmiddlewaretoken=13ipHmklGCwrfxXksC5k6MjBjxeqJBuy&order_number=&name=&product_title=&upc=&partner_sku=&status=&date_from=9%2F9%2F2014&date_to=12%2F12%2F2014&voucher=&payment_method=&response_format=html
Django Version: 1.7.1
Exception Type: AttributeError
Exception Value:  
'datetime.date' object has no attribute 'tzinfo'
Exception Location: /home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/utils/timezone.py in is_naive, line 349
# TRACEBACK

Environment:

Request Method: GET
Request URL: http://127.0.0.1:5000/en-gb/dashboard/orders/?csrfmiddlewaretoken=13ipHmklGCwrfxXksC5k6MjBjxeqJBuy&order_number=&name=&product_title=&upc=&partner_sku=&status=&date_from=9%2F9%2F2014&date_to=12%2F12%2F2014&voucher=&payment_method=&response_format=html

Django Version: 1.7.1
Python Version: 2.7.6
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.flatpages',
 'django.contrib.staticfiles',
 'django.contrib.sitemaps',
 'django_extensions',
 'debug_toolbar',
 'template_timings_panel',
 'compressor',
 'apps.gateway',
 'widget_tweaks',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'django_tables2']
Installed Middleware:
('debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.transaction.TransactionMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')

Traceback:
File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/db/transaction.py"" in inner
2.                 return func(_args, *_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
3.                 return view_func(request, _args, *_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
4.                 return view_func(request, _args, *_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/views/generic/base.py"" in view
5.             return self.dispatch(request, _args, *_kwargs)
   File ""/home/lijo/project/opensource/django-oscar/src/oscar/apps/dashboard/orders/views.py"" in dispatch
6.         return super(OrderListView, self).dispatch(request, _args, *_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
7.         return handler(request, _args, *_kwargs)
   File ""/home/lijo/project/opensource/django-oscar/src/oscar/apps/dashboard/orders/views.py"" in get
8.         return super(OrderListView, self).get(request, _args, *_kwargs)
   File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/views/generic/list.py"" in get
9.         self.object_list = self.get_queryset()
   File ""/home/lijo/project/opensource/django-oscar/src/oscar/apps/dashboard/orders/views.py"" in get_queryset
10.         self.description = self.desc_template % self.get_desc_context(data)
    File ""/home/lijo/project/opensource/django-oscar/src/oscar/apps/dashboard/orders/views.py"" in get_desc_context
11.                 % {'start_date': format_datetime(data['date_from']),
    File ""/home/lijo/project/opensource/django-oscar/src/oscar/core/utils.py"" in format_datetime
12.     if is_naive(dt):
    File ""/home/lijo/.virtualenvs/eshop1/local/lib/python2.7/site-packages/django/utils/timezone.py"" in is_naive
13.     return value.tzinfo is None or value.tzinfo.utcoffset(value) is None

Exception Type: AttributeError at /en-gb/dashboard/orders/
Exception Value: 'datetime.date' object has no attribute 'tzinfo'
"
11492,django-oscar,django-oscar,16,closed,1589,6,https://api.github.com/repos/django-oscar/django-oscar/issues/1589/comments,https://github.com/django-oscar/django-oscar/issues/1589,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",Country's name field should be blank=True,"pycountries does not have an official name for every country, so many get populated with an empty string:

```
Country.objects.filter(name='').count()      # 77
```

When you then try to edit one of them via django admin you will get an error on save when leaving the ""official name"" field blank since it does not have blank=True.
"
11524,django-oscar,django-oscar,16,closed,1555,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1555/comments,https://github.com/django-oscar/django-oscar/issues/1555,[],migration error,"Django 1.6.8 + SQLite

fresh install, first time running `migrate` after doing `syncdb`

```
Running migrations for address:
 - Migrating forwards to 0012_auto__del_index_country_iso_3166_1_a3__chg_field_country_iso_3166_1_nu.
 > address:0003_auto__add_field_country_display_order
 > address:0004_convert_is_highlighted
 - Migration 'address:0004_convert_is_highlighted' is marked for no-dry-run.
 > address:0005_auto__del_field_country_is_highlighted
 > address:0006_auto__add_unique_useraddress_hash_user
 > address:0007_auto__chg_field_useraddress_postcode
 > address:0008_auto__chg_field_useraddress_phone_number
 > address:0009_no_null_in_charfields
 - Migration 'address:0009_no_null_in_charfields' is marked for no-dry-run.
 > address:0010_auto__chg_field_useraddress_first_name__chg_field_useraddress_title__c
 > address:0011_auto__chg_field_useraddress_search_text
 > address:0012_auto__del_index_country_iso_3166_1_a3__chg_field_country_iso_3166_1_nu
FATAL ERROR - The following SQL query failed: DROP INDEX ""address_country_b5e16240""
The error was: no such index: address_country_b5e16240
 ! Error found during real run of migration! Aborting.

 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had
 ! to leave it in an interim state between migrations.

! You *might* be able to recover with:   = CREATE INDEX ""address_country_8b6fe3c8"" ON ""address_country"" (""iso_3166_1_numeric""); []
   = CREATE INDEX ""address_country_b5e16240"" ON ""address_country"" (""iso_3166_1_a3""); []

 ! The South developers regret this has happened, and would
 ! like to gently persuade you to consider a slightly
 ! easier-to-deal-with DBMS (one that supports DDL transactions)
 ! NOTE: The error which caused the migration to fail is further up.
```
"
11535,django-oscar,django-oscar,16,closed,1544,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1544/comments,https://github.com/django-oscar/django-oscar/issues/1544,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",oscar_fork_app command fails for dashboard,"version 0.8b3

```
 ./manage.py  oscar_fork_app dashboard apps
Creating folder apps/dashboard
Enabling Django admin integration
Inheriting app config
Creating models.py and copying South and native migrations
CommandError: [Errno 2] No such file or directory: '/home/slav0nic/work/cotti/local/lib/python2.7/site-packages/oscar/apps/dashboard/migrations'
```

Also i can't forking only one app from dashboard like `oscar_fork_app dashboard.catalogue` 
"
11537,django-oscar,django-oscar,16,closed,1542,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1542/comments,https://github.com/django-oscar/django-oscar/issues/1542,[],Cloned release 0.8 still couldn't install on Django 1.7.1,"I cloned the branch release 0.8, still getting this error when I am trying to make sandbox: 

Installed distribution Django 1.7.1 conflicts with requirement Django<1.7

Installed /Users/Tony/Documents/django-oscar/oscar/lib/python2.7/site-packages/django_appconf-0.6-py2.7.egg
Searching for pytz>=0a
Reading https://pypi.python.org/simple/pytz/
Best match: pytz 2014.7
Downloading https://pypi.python.org/packages/2.7/p/pytz/pytz-2014.7-py2.7.egg#md5=316ea05e4fd43ae88b2b559cacacf81b
Processing pytz-2014.7-py2.7.egg
Moving pytz-2014.7-py2.7.egg to /Users/Tony/Documents/django-oscar/oscar/lib/python2.7/site-packages
Adding pytz 2014.7 to easy-install.pth file

Installed /Users/Tony/Documents/django-oscar/oscar/lib/python2.7/site-packages/pytz-2014.7-py2.7.egg
error: Installed distribution Django 1.7.1 conflicts with requirement Django<1.7
make: **\* [install] Error 1
"
11541,django-oscar,django-oscar,16,closed,1538,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1538/comments,https://github.com/django-oscar/django-oscar/issues/1538,[],Cannot Create new Sandbox - Failed trying to install Django 1.7.1,"new clone of the github repo, typed make sandbox.

Processing dependencies for django-oscar==0.8-beta-2
error: Installed distribution Django 1.7 conflicts with requirement Django<1.7

Resolved by adding 

Django==1.6.8

to requirements.txt
"
11542,django-oscar,django-oscar,16,closed,1537,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1537/comments,https://github.com/django-oscar/django-oscar/issues/1537,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Hashing for addresses can break with customised models,"This is copy & paste from an [thread](https://groups.google.com/d/msgid/django-oscar/9882624b-c10a-410f-9fe3-b2f9e401b62d%40googlegroups.com?utm_medium=email&utm_source=footer) on the mailing list:
1. A customer places an order when the old (unmodified) hash code is in place. Their ShippingAddress and UserAddress get saved with a hash computed by Oscar, which is identical for both models.
2. We add a field on ShippingAddress and overload `active_address_fields` to take this field into account. As a side-effect, this changes how the hash is computed for ShippingAddress but not for UserAddress.
3. When the customer places an order with the same address as before, the system crashes with an IntegrityError, since ... Django looks up whether they already have an address in the db by computing the ShippingAddress' hash, which is different (and probably doesn't match anything). Django doesn't find a match, so it creates a UserAddress, saves that, and crashes, since the hash for the newly created UserAddress matches the one for the UserAddress that's already in the db.

Thinking about this in some more detail, it feels wrong to me that ""active_address_fields"" is used for two unrelated purposes (computing hashes and formatting addresses for display). It feels like Oscar should compute hashes using an internal mechanism that isn't easily corruptible by over-eager tweakers ;-)

---

Any fix for this should try to be backwards-compatible with existing deployments.
"
11544,django-oscar,django-oscar,16,closed,1535,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1535/comments,https://github.com/django-oscar/django-oscar/pull/1535,[],Add __all__ to models module of overridable apps,"Since the recommended way to override models within an app is to add
'from oscar.apps.order.models import *' we need to limit what is 
exported otherwise subtle bugs may occur in the users code.

Simply defining `__all__ = ['Model1', 'Model2']` doesn't work since Django
will raise an AppRegistryNotReady exception for all models listed in
the `__all__` list but are not available. Dynamically building the list
solves this.
"
11555,django-oscar,django-oscar,16,closed,1523,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1523/comments,https://github.com/django-oscar/django-oscar/issues/1523,[],django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No module named 'psycopg2._psycopg',"Hello.
I had such a issue.
When i building the demo site

```
(oscar) $ make demo
(oscar) $ sites/demo/manage.py runserver
```

I retrieved next exceptions

```
Happy hacking!
==================================================================================
# Install additional requirements
pip install -r requirements_demo.txt

bla bla bla


# Create database
# Breaks on Travis because of https://github.com/django-extensions/django-extensions/issues/489
if [ -z """" ]; then sites/demo/manage.py reset_db --router=default --noinput; fi
Traceback (most recent call last):
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/backends/postgresql_psycopg2/base.py"", line 23, in <module>
    import psycopg2 as Database
  File ""/usr/lib/python3.4/psycopg2/__init__.py"", line 50, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: No module named 'psycopg2._psycopg'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""sites/demo/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/core/management/__init__.py"", line 354, in execute
    django.setup()
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/__init__.py"", line 21, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/apps/config.py"", line 87, in create
    module = import_module(entry)
  File ""/opt/django-oscar/oscar/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2189, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/usr/lib/python3.4/raven/contrib/django/__init__.py"", line 10, in <module>
    from .client import DjangoClient  # NOQA
  File ""/usr/lib/python3.4/raven/contrib/django/client.py"", line 19, in <module>
    from django.contrib.auth.models import AbstractBaseUser as BaseUser
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/contrib/auth/models.py"", line 40, in <module>
    class Permission(models.Model):
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/models/base.py"", line 125, in __new__
    new_class.add_to_class('_meta', Options(meta, **kwargs))
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/models/base.py"", line 300, in add_to_class
    value.contribute_to_class(cls, name)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/models/options.py"", line 166, in contribute_to_class
    self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/__init__.py"", line 40, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/utils.py"", line 242, in __getitem__
    backend = load_backend(db['ENGINE'])
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/utils.py"", line 108, in load_backend
    return import_module('%s.base' % backend_name)
  File ""/opt/django-oscar/oscar/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/contrib/gis/db/backends/postgis/base.py"", line 2, in <module>
    from django.db.backends.postgresql_psycopg2.base import DatabaseWrapper as Psycopg2DatabaseWrapper
  File ""/opt/django-oscar/oscar/lib/python3.4/site-packages/Django-1.7-py3.4.egg/django/db/backends/postgresql_psycopg2/base.py"", line 27, in <module>
    raise ImproperlyConfigured(""Error loading psycopg2 module: %s"" % e)
django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No module named 'psycopg2._psycopg'
make: *** [demo] Error 1

```

How to fix this issue?
Thanks.
"
11557,django-oscar,django-oscar,16,closed,1521,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1521/comments,https://github.com/django-oscar/django-oscar/pull/1521,[],Address model loading regression in Django 1.7,"Under Django 1.7, if get_model gets called during app startup and the
models for the requested app just hasn't been loaded yet, our get_model
call fails with a LookupError.
Most of the time, it would be safe to just import the requested models,
and this is what this fix effectively does. This aligns the behaviour of
the old (pre-Django 1.7) and new get_model code again.

This was tracked as issue #1494, and then I messed up my PR.
"
11560,django-oscar,django-oscar,16,closed,1518,7,https://api.github.com/repos/django-oscar/django-oscar/issues/1518/comments,https://github.com/django-oscar/django-oscar/issues/1518,[],Running local demo site fails,"Hello,

I'm trying to launch local demo site using ""make demo"" command and getting following error:

Traceback (most recent call last):
  File ""sites/demo/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/**init**.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/**init**.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/base.py"", line 284, in execute
    self.validate()
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/base.py"", line 310, in validate
    num_errors = get_validation_errors(s, app)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/core/management/validation.py"", line 34, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 196, in get_app_errors
    self._populate()
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/var/www/django-oscar/oscar/apps/catalogue/models.py"", line 66, in <module>
    from . import receivers  # noqa
  File ""/var/www/django-oscar/oscar/apps/catalogue/receivers.py"", line 15, in <module>
    ProductImage = get_model('catalogue', 'ProductImage')
  File ""/var/www/django-oscar/oscar/core/loading.py"", line 290, in get_model
    model = django_get_model(app_label, model_name, _args, *_kwargs)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/.virtualenvs/oscar/lib/python2.6/site-packages/Django-1.6.7-py2.6.egg/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/var/www/django-oscar/oscar/apps/offer/models.py"", line 913
    return set(flat_iterable) - {None}
                                     ^
SyntaxError: invalid syntax
make: **\* [demo] Error 1

Python 2.6.6
"
11561,django-oscar,django-oscar,16,closed,1517,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1517/comments,https://github.com/django-oscar/django-oscar/issues/1517,[],`AbstractProductAttribute.save_value` does not support option groups,"I've run into an issue where something like the following doesn't work when the attribute uses an option group with Oscar 1.6.x:

``` python
my_attribute.save_value(my_product, 'example')
```

If this is a use case which is intended to be supported, then I believe that this issue [still exists in the most recent version of Oscar](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/catalogue/abstract_models.py#L841-L873) as well.

Since 'example' is a valid option for this option group in this example, I would expect the call to work. Looking at the code, it seems to not take option groups into account here. The code also does not throw an error in this case, but the attribute value will not be changed. So, it seems like an error should be thrown in the case that this is not an intended use case.

Is there a better method by which to solve this problem in Oscar, or is this possibly an oversight in the codebase?
"
11571,django-oscar,django-oscar,16,closed,1504,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1504/comments,https://github.com/django-oscar/django-oscar/issues/1504,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Adding a Review breaks when multiple ProductAttributeValue objects are present for a Product.,"I'm running into some problems with ProductAttributeValue. 

I'm not sure whether this is a bug or feature, so bare with me.

I'm building a store with books, and I'm storing the editor (as a ProductAttributeValue with an AttributeEntity) of a book alongside each book (which is a Product). It's possible for a book to have multiple editors.

When I started adding reviews to books, it turns out Oscar doesn't like this:

```
File ""/Users/simon/src/redseapress/app/management/commands/import.py"", line 496, in handle
    name=""Editorial Reviews""
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/django/db/models/manager.py"", line 154, in get_or_create
    return self.get_queryset().get_or_create(**kwargs)
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/django/db/models/query.py"", line 383, in get_or_create
    obj.save(force_insert=True, using=self.db)
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/oscar/apps/catalogue/reviews/abstract_models.py"", line 98, in save
    self.product.update_rating()
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/oscar/apps/catalogue/abstract_models.py"", line 525, in update_rating
    self.save()
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/oscar/apps/catalogue/abstract_models.py"", line 321, in save
    self.attr.save()
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/oscar/apps/catalogue/abstract_models.py"", line 648, in save
    attribute.save_value(self.product, value)
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/oscar/apps/catalogue/abstract_models.py"", line 782, in save_value
    value_obj = product.attribute_values.get(attribute=self)
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/django/db/models/manager.py"", line 151, in get
    return self.get_queryset().get(*args, **kwargs)
  File ""/Users/simon/src/virtualenvs/redseapress/lib/python2.7/site-packages/django/db/models/query.py"", line 313, in get
    (self.model._meta.object_name, num))
```

I went through the stack trace and found that for some reason, when a review gets added, a product rating gets updated, and a product gets saved as a result, all attributes get saved as well.

Is it necessary to save every attribute when a review gets added? Could this save process take multiple `ProductAttributeValue`s into account? Is there a reason it doesn't?

Cheers!
"
11572,django-oscar,django-oscar,16,closed,1503,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1503/comments,https://github.com/django-oscar/django-oscar/issues/1503,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Bug on Country selection and Phone Number validator,"Possible bug on Country selection and Phone Number validator.

![wrong_phone_validation](https://cloud.githubusercontent.com/assets/956388/4462615/40987118-48c4-11e4-8895-c5aa3d04c123.jpg)

-> Run the Sandbox
-> Add something to the Basket
-> Proceed to checkout

When filling the form, after selecting the country, the Phone Number field tries to validade the input with the 'Afghanistan format'.

Info:
Oscar cloned from trunk 30/set/2014. Python 2.7.3 Django 1.6.7
"
11580,django-oscar,django-oscar,16,closed,1495,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1495/comments,https://github.com/django-oscar/django-oscar/issues/1495,[],error: Installed distribution Django 1.7 conflicts with requirement Django<1.7,"On `make ***` getting this error :

```
Installed /var/www/oscar
Processing dependencies for django-oscar==0.8-beta-2
error: Installed distribution Django 1.7 conflicts with requirement Django<1.7
make: *** [install] Error 1
```

And then in setup.py need to change 

```
'django>=1.6.6,<1.8',
```

to 

```
'django>=1.6.6,<1.7',
```
"
11581,django-oscar,django-oscar,17,closed,1494,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1494/comments,https://github.com/django-oscar/django-oscar/pull/1494,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",'Model not registered' loading regression in Django 1.7,"C&P from an email:

I think a change to get_model for Django 1.7 might be in order. It currently uses get_registered_model, which we decided on because it doesn't choke if the registry is still being populated. But there's a regression: if a model has indeed not been loaded just because the application import process hasn't run over it, then it now fails where it didn't use to fail before. 
I'm not entirely sure what the right fix is. All other calls to load models would choke on the app registry not being ready. But we need a way to attempt to load the models in the specified app before we fail with a LookupError.

Hat tip to @metamatik for spotting the issue.
"
11583,django-oscar,django-oscar,17,closed,1492,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1492/comments,https://github.com/django-oscar/django-oscar/issues/1492,"[{""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",Oscar isn't picking up my checkout app override,"Hello all, 

Im trying to customize Oscar checkout for a Stripe payment integration by overriding the checkout app. I'm trying to implement what these guys have here : https://github.com/redpandalabs/django-oscar-stripe. When i ran their sandbox, it runs fine with no problem; oscar recognizes the override and we're good to go.

I am currently working with django-cms, zinnia, and oscar to make a super beefy ecommerce site with blogging and content management with django cms on top of zinnia and oscar as in Oscar and Zinnia are Pages in my cms.

The problem is that oscar isn't seeing my overridden checkout app, even though get_core_apps returns apps.checkout when i throw a print statement or two in there.

i've followed the docs to the letter and what the guys have done at redpandalabs isn't too far off even though its dated.

my traceback:

```
Traceback (most recent call last):
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py"", line 85, in run
    self.result = application(self.environ, self.start_response)
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/contrib/staticfiles/handlers.py"", line 67, in __call__
    return self.application(environ, start_response)
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 187, in __call__
    self.load_middleware()
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/core/handlers/base.py"", line 47, in load_middleware
    mw_instance = mw_class()
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/middleware/locale.py"", line 24, in __init__
    for url_pattern in get_resolver(None).url_patterns:
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 365, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 360, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/Users/jon/repos/amusement_wraps/amused/urls.py"", line 19, in <module>
    url(r'^store/', include(store.urls)),
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/oscar/core/application.py"", line 107, in urls
    return self.get_urls(), self.app_name, self.name
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/oscar/app.py"", line 30, in get_urls
    (r'^checkout/', include(self.checkout_app.urls)),
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/oscar/core/application.py"", line 107, in urls
    return self.get_urls(), self.app_name, self.name
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/oscar/apps/checkout/app.py"", line 43, in get_urls
    self.payment_details_view.as_view(), name='payment-details'),
  File ""/Users/jon/repos/amusement_wraps/venv/lib/python2.7/site-packages/django/utils/decorators.py"", line 11, in __get__
    raise AttributeError(""This method is available only on the view class."")
AttributeError: This method is available only on the view class.
[18/Sep/2014 23:18:31] ""GET / HTTP/1.1"" 500 59
```

i get this when i use the shop.urls (as in redpandalabs app) instead of the default application.urls.

and when i use the default application.urls everything works nicely until my overridden checkout.views never gets called so my Stripe authentication never works, thus a payment is never recieved until the order gets processed if/when I hard code my Stripe key into the form instead of using env variables.

So for now instead of just forking an app ill have to copy the entirety of oscar and edit it that way since it won't see my overrides.
"
11585,django-oscar,django-oscar,17,closed,1490,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1490/comments,https://github.com/django-oscar/django-oscar/issues/1490,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Search handler raises ValueError which isn't caught,"Eg:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/core/handlers/base.py"", line 112, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/contrib/auth/decorators.py"", line 22, in _wrapped_view
    return view_func(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/views/generic/base.py"", line 87, in dispatch
    return handler(request, *args, **kwargs)

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/views.py"", line 123, in get
    self.request.GET, request.get_full_path(), [])

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/views.py"", line 127, in get_search_handler
    return get_product_search_handler_class()(*args, **kwargs)

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/search_handlers.py"", line 38, in __init__
    super(ProductSearchHandler, self).__init__(request_data, full_path)

  File ""/var/www/oscar/builds/latest/oscar/apps/search/search_handlers.py"", line 54, in __init__
    self.results, request_data)

  File ""/var/www/oscar/builds/latest/oscar/apps/search/search_handlers.py"", line 119, in paginate_queryset
    'message': str(e)

ValueError: Invalid page (2): That page contains no results


<WSGIRequest
path:/en-gb/catalogue/,
GET:<QueryDict: {u'selected_facets': [u'price_exact:[60 TO *]'], u'page': [u'2']}>,
POST:<QueryDict: {}>,
COOKIES:{},
META:{'CONTENT_LENGTH': '',
 'CONTENT_TYPE': '',
 u'CSRF_COOKIE': u'LhkCNs5r9tuy3OMshbqaiyzbQXg31CHf',
 'DOCUMENT_ROOT': '/etc/nginx/html',
 'HTTP_ACCEPT': '*/*',
 'HTTP_ACCEPT_ENCODING': 'gzip, x-gzip',
 'HTTP_CONNECTION': 'close',
 'HTTP_HOST': 'latest.oscarcommerce.com',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (compatible; Yahoo! Slurp; http://help.yahoo.com/help/us/ysearch/slurp)',
 'HTTP_X_FORWARDED_FOR': '68.180.225.33',
 'HTTP_X_REAL_IP': '68.180.225.33',
 'PATH_INFO': u'/en-gb/catalogue/',
 'QUERY_STRING': 'selected_facets=price_exact%3A%5B60+TO+%2A%5D&page=2',
 'REMOTE_ADDR': '68.180.225.33',
 'REMOTE_PORT': '',
 'REQUEST_METHOD': 'GET',
 'REQUEST_URI': '/en-gb/catalogue/?selected_facets=price_exact%3A%5B60+TO+%2A%5D&page=2',
 u'SCRIPT_NAME': u'',
 'SERVER_NAME': 'sandbox.oscar.tangentlabs.co.uk',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'uwsgi.node': 'tangent-oscar-demo.tangentlabs.co.uk',
 'uwsgi.version': '1.9.21.1',
 'wsgi.errors': <open file 'wsgi_errors', mode 'w' at 0x14436f0>,
 'wsgi.file_wrapper': <built-in function uwsgi_sendfile>,
 'wsgi.input': <uwsgi._Input object at 0x36e8fd8>,
```
"
11590,django-oscar,django-oscar,17,closed,1485,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1485/comments,https://github.com/django-oscar/django-oscar/issues/1485,[],Cannot customize offer app,"When running `./manage.py migrate` with the offer app forked, the following error appears:

``` python
django.db.migrations.state.InvalidBasesError: Cannot resolve bases for [<ModelState: 'oscar.CountCondition'>, <ModelState: 'oscar.CoverageCondition'>, <ModelState: 'oscar.ValueCondition'>, <ModelState: 'oscar.PercentageDiscountBenefit'>, <ModelState: 'oscar.AbsoluteDiscountBenefit'>, <ModelState: 'oscar.FixedPriceBenefit'>, <ModelState: 'oscar.MultibuyDiscountBenefit'>, <ModelState: 'oscar.ShippingBenefit'>, <ModelState: 'oscar.ShippingAbsoluteDiscountBenefit'>, <ModelState: 'oscar.ShippingFixedPriceBenefit'>, <ModelState: 'oscar.ShippingPercentageDiscountBenefit'>]
```

Full output for reference is below.

To trigger the bug:

``` bash
$ django-admin startproject thebug
$ cd thebug/
$ cat >> thebug/settings.py
from oscar import get_core_apps

INSTALLED_APPS = list(INSTALLED_APPS) + [
    'django.contrib.sites',
] + get_core_apps()

HAYSTACK_CONNECTIONS = {
        'default': {
                    'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
                },
}

from oscar.defaults import *  # noqa
^D
$ mkdir apps
$ touch apps/__init__.py
$ ./manage.py oscar_fork_app offer apps
$ # add apps.offer to get_core_apps
$ ./manage.py migrate
```

Full output:

``` bash
~/src/oscar-bug/thebug $ ./manage.py migrate
/home/markus/.virtualenvs/oscar-sandbox/local/lib/python2.7/site-packages/django_treebeard-2.0-py2.7.egg/treebeard/mp_tree.py:102: RemovedInDjango18Warning: `MP_NodeManager.get_query_set` method should be renamed `get_queryset`.

/home/markus/src/django-oscar/oscar/apps/catalogue/reviews/managers.py:4: RemovedInDjango18Warning: `ApprovedReviewsManager.get_query_set` method should be renamed `get_queryset`.
  class ApprovedReviewsManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/catalogue/reviews/managers.py:10: RemovedInDjango18Warning: `RecentReviewsManager.get_query_set` method should be renamed `get_queryset`.
  class RecentReviewsManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/catalogue/reviews/managers.py:16: RemovedInDjango18Warning: `TopScoredReviewsManager.get_query_set` method should be renamed `get_queryset`.
  class TopScoredReviewsManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/catalogue/reviews/managers.py:22: RemovedInDjango18Warning: `TopVotedReviewsManager.get_query_set` method should be renamed `get_queryset`.
  class TopVotedReviewsManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/basket/managers.py:4: RemovedInDjango18Warning: `OpenBasketManager.get_query_set` method should be renamed `get_queryset`.
  class OpenBasketManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/basket/managers.py:17: RemovedInDjango18Warning: `SavedBasketManager.get_query_set` method should be renamed `get_queryset`.
  class SavedBasketManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/offer/managers.py:5: RemovedInDjango18Warning: `ActiveOfferManager.get_query_set` method should be renamed `get_queryset`.
  class ActiveOfferManager(models.Manager):

/home/markus/src/django-oscar/oscar/apps/offer/managers.py:16: RemovedInDjango18Warning: `BrowsableRangeManager.get_query_set` method should be renamed `get_queryset`.
  class BrowsableRangeManager(models.Manager):

/home/markus/.virtualenvs/oscar-sandbox/local/lib/python2.7/site-packages/django_treebeard-2.0-py2.7.egg/treebeard/al_tree.py:35: RemovedInDjango18Warning: `AL_NodeManager.get_query_set` method should be renamed `get_queryset`.

/home/markus/src/django/django/forms/widgets.py:143: RemovedInDjango18Warning: `TreeAdmin.queryset` method should be renamed `get_queryset`.
  .__new__(mcs, name, bases, attrs))

Operations to perform:
  Synchronize unmigrated apps: reports_dashboard, treebeard, oscar, communications_dashboard, reviews_dashboard, offers_dashboard, thumbnail, dashboard, haystack, ranges_dashboard, checkout, catalogue_dashboard, django_tables2
  Apply all migrations: customer, promotions, wishlists, offer, admin, sessions, contenttypes, auth, payment, reviews, analytics, catalogue, shipping, sites, address, basket, partner, order, voucher
Synchronizing apps without migrations:
  Creating tables...
    Creating table oscar_rangeproductfileupload
    Creating table thumbnail_kvstore
  Installing custom SQL...
  Installing indexes...
Running migrations:
  Applying contenttypes.0001_initial...Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/markus/src/django/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/home/markus/src/django/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/markus/src/django/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/markus/src/django/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/home/markus/src/django/django/core/management/commands/migrate.py"", line 160, in handle
    executor.migrate(targets, plan, fake=options.get(""fake"", False))
  File ""/home/markus/src/django/django/db/migrations/executor.py"", line 63, in migrate
    self.apply_migration(migration, fake=fake)
  File ""/home/markus/src/django/django/db/migrations/executor.py"", line 91, in apply_migration
    if self.detect_soft_applied(migration):
  File ""/home/markus/src/django/django/db/migrations/executor.py"", line 135, in detect_soft_applied
    apps = project_state.render()
  File ""/home/markus/src/django/django/db/migrations/state.py"", line 71, in render
    raise InvalidBasesError(""Cannot resolve bases for %r\nThis can happen if you are inheriting models from an app with migrations (e.g. contrib.auth)\n in an app with no migrations; see https://docs.djangoproject.com/en/1.7/topics/migrations/#dependencies for more"" % new_unrendered_models)
django.db.migrations.state.InvalidBasesError: Cannot resolve bases for [<ModelState: 'oscar.CountCondition'>, <ModelState: 'oscar.CoverageCondition'>, <ModelState: 'oscar.ValueCondition'>, <ModelState: 'oscar.PercentageDiscountBenefit'>, <ModelState: 'oscar.AbsoluteDiscountBenefit'>, <ModelState: 'oscar.FixedPriceBenefit'>, <ModelState: 'oscar.MultibuyDiscountBenefit'>, <ModelState: 'oscar.ShippingBenefit'>, <ModelState: 'oscar.ShippingAbsoluteDiscountBenefit'>, <ModelState: 'oscar.ShippingFixedPriceBenefit'>, <ModelState: 'oscar.ShippingPercentageDiscountBenefit'>]
This can happen if you are inheriting models from an app with migrations (e.g. contrib.auth)
 in an app with no migrations; see https://docs.djangoproject.com/en/1.7/topics/migrations/#dependencies for more
```
"
11592,django-oscar,django-oscar,17,closed,1483,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1483/comments,https://github.com/django-oscar/django-oscar/issues/1483,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Search pagination chokes on unicode,"See:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/core/handlers/base.py"", line 112, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/contrib/auth/decorators.py"", line 22, in _wrapped_view
    return view_func(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.6-py2.7.egg/django/views/generic/base.py"", line 87, in dispatch
    return handler(request, *args, **kwargs)

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/views.py"", line 123, in get
    self.request.GET, request.get_full_path(), [])

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/views.py"", line 127, in get_search_handler
    return get_product_search_handler_class()(*args, **kwargs)

  File ""/var/www/oscar/builds/latest/oscar/apps/catalogue/search_handlers.py"", line 38, in __init__
    super(ProductSearchHandler, self).__init__(request_data, full_path)

  File ""/var/www/oscar/builds/latest/oscar/apps/search/search_handlers.py"", line 54, in __init__
    self.results, request_data)

  File ""/var/www/oscar/builds/latest/oscar/apps/search/search_handlers.py"", line 119, in paginate_queryset
    'message': str(e)

ValueError: \u975e\u6cd5\u9875\u9762 (2): That page contains no results
```

We need to test with a query of `非法页面`
"
11594,django-oscar,django-oscar,17,closed,1481,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1481/comments,https://github.com/django-oscar/django-oscar/issues/1481,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Block content page and internationalization with language prefix,"Hello,

In reference to this post in the mailing-list:
https://groups.google.com/d/msg/django-oscar/ryo6IkzuThY/OHLqUjJgRyUJ

Using Django i18n_patterns to add language prefix to the URL makes things difficult to add block content to a page (for each language, you have to add the corresponding page with the correct language prefix).

It seems that it is related to a bug in Django core in which the django.core.urlresolvers.resolve only resolve URL with the current language prefix (even in other language prefix are correct).

A patch diff being worth a thousand words, here is a naive workaround for Oscar:

```diff
--- a/oscar/apps/promotions/context_processors.py   Fri Aug 29 01:57:26 2014 +0200
+++ b/oscar/apps/promotions/context_processors.py   Sat Sep 06 21:39:43 2014 +0200
@@ -1,6 +1,7 @@
 from itertools import chain

 from oscar.apps.promotions.models import PagePromotion, KeywordPromotion
+from django.utils.translation import get_language


 def promotions(request):
@@ -24,9 +25,14 @@
     """"""
     Return promotions relevant to this request
     """"""
+    language = get_language()
+    if language and request.path.startswith('/%s/' % language):
+        page_url = request.path[len('/%s/' % language)-1:]
+    else:
+        page_url = request.path
     promotions = PagePromotion._default_manager.select_related() \
         .prefetch_related('content_object') \
-        .filter(page_url=request.path) \
+        .filter(page_url=page_url) \
         .order_by('display_order')

     if 'q' in request.GET:
diff -r a1248ccfe775 oscar/core/validators.py
--- a/oscar/core/validators.py  Fri Aug 29 01:57:26 2014 +0200
+++ b/oscar/core/validators.py  Sat Sep 06 21:39:43 2014 +0200
@@ -4,7 +4,7 @@
 from oscar.core.loading import get_model
 from django.http import Http404
 from django.utils.translation import ugettext_lazy as _
-
+from django.utils.translation import get_language

 class ExtendedURLValidator(validators.URLValidator):

@@ -29,6 +29,9 @@

     def validate_local_url(self, value):
         value = self.clean_url(value)
+        language = get_language()
+        if language and not value.startswith('/%s/' % language):
+            value = '/%s%s' % (language, value)
         try:
             resolve(value)
         except Http404:
```
"
11596,django-oscar,django-oscar,17,closed,1479,5,https://api.github.com/repos/django-oscar/django-oscar/issues/1479/comments,https://github.com/django-oscar/django-oscar/issues/1479,[],django 1.7: sandbox installation error,"At the end of **sandbox** installation error raised.

Env: linux mint, python 2.7, virtualenv, virtualwrapper

**Reproducing flow**:
1. git clone https://github.com/tangentlabs/django-oscar.git
2. cd django-oscar
3. mkvirtualenv django-oscar
4. make sandbox

```
...
Reading https://pypi.python.org/simple/pytz/
Best match: pytz 2014.7
Downloading https://pypi.python.org/packages/2.7/p/pytz/pytz-2014.7-py2.7.egg#md5=316ea05e4fd43ae88b2b559cacacf81b
Processing pytz-2014.7-py2.7.egg
Moving pytz-2014.7-py2.7.egg to /home/ghost/.virtualenvs/django-oscar/lib/python2.7/site-packages
Adding pytz 2014.7 to easy-install.pth file

Installed /home/ghost/.virtualenvs/django-oscar/lib/python2.7/site-packages/pytz-2014.7-py2.7.egg
error: Installed distribution Django 1.7 conflicts with requirement Django<1.7
make: *** [install] Error 1
```

**Broken dependency**:
django_haystack-2.2.1-py2.7.egg/EGG-INFO/requires.txt

```
Django<1.7
```
"
11607,django-oscar,django-oscar,17,closed,1467,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1467/comments,https://github.com/django-oscar/django-oscar/issues/1467,[],Properties should not prevent query optimization,"There are many cases where the `property` decorator has been used on `Model` subclasses in Oscar. A potential problem with these (in many Django projects) is that they can often produce queries which are:
- Unexpected due to the interface of these being accessed as a property instead of a function call
- Hard to debug, because queries are happening in places where you are not expecting them

It is usually fair enough to solve these problems by analyzing the list of queries which execute on request, and `select_related` and/or `prefetch_related` as necessary. However, an issue occurs when queries are made in this cases which **can not** be optimized. For instance, we could look at some of the following examples:
- Calling into [.get on a queryset](https://github.com/tangentlabs/django-oscar/blob/ea9f244c3cf36b46790e9b8295035d32e47e08f7/oscar/apps/order/abstract_models.py#L634) (or other non-optimized calls) from within a property.
- Executing [select_related within a property](https://github.com/tangentlabs/django-oscar/blob/153fbe2f4c39914b7c7eb5a62b94d9684c3f2230/oscar/apps/catalogue/abstract_models.py#L475-L481) will cause new queries to occur - even if you've already fetched the related content on a higher-level queryset.

These cases and other similar cases can represent a difficult case where the only way to optimize further is to rewrite the property to not do these things, and can cause noteworthy slowdown during requests. These requests are made even more slow when needs require performing aggregate logic - such as often necessary in reporting cases.

In my experience, it seems that these issues can usually be avoided fairly easily at the framework level (within Oscar) by simply assuming that the person asking for the data to be used is selecting the necessary related items and using Python to perform the necessary actions. Solving these issues at the application level (outside of Oscar) is possible, but can require excessive rewriting of functions that Oscar already defines, which potentially means that the path to upgrading is hindered in the process.

It almost seems like it would be more difficult to support the current use-case than to fix these problems at the framework level. I'm wondering how the Oscar team feels about these situations?
"
11616,django-oscar,django-oscar,17,closed,1456,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1456/comments,https://github.com/django-oscar/django-oscar/issues/1456,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Slicing bug from django_tables2,"Saw this error from the sandbox:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/core/handlers/base.py"", line 112, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/contrib/auth/decorators.py"", line 22, in _wrapped_view
    return view_func(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/contrib/auth/decorators.py"", line 22, in _wrapped_view
    return view_func(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/views/generic/base.py"", line 87, in dispatch
    return handler(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/views/generic/base.py"", line 154, in get
    context = self.get_context_data(**kwargs)

  File ""/var/www/oscar/builds/latest/oscar/apps/dashboard/catalogue/views.py"", line 78, in get_context_data
    ctx = super(ProductListView, self).get_context_data(**kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django_tables2/views.py"", line 89, in get_context_data
    table = self.get_table()

  File ""/var/www/oscar/builds/latest/oscar/apps/dashboard/catalogue/views.py"", line 94, in get_table
    return super(ProductListView, self).get_table(**kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django_tables2/views.py"", line 41, in get_table
    table = table_class(self.get_table_data(), **kwargs)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django_tables2/tables.py"", line 438, in __init__
    self.order_by = order_by

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django_tables2/tables.py"", line 494, in order_by
    self.data.order_by(self._order_by)

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/django_tables2/tables.py"", line 100, in order_by
    self.queryset = self.queryset.order_by(*(translate(a) for a in accessors))

  File ""/var/www/oscar/virtualenvs/latest/local/lib/python2.7/site-packages/Django-1.6.5-py2.7.egg/django/db/models/query.py"", line 726, in order_by
    ""Cannot reorder a query once a slice has been taken.""

AssertionError: Cannot reorder a query once a slice has been taken.


<WSGIRequest
path:/en-gb/dashboard/catalogue/,
GET:<QueryDict: {u'recently_edited': [u'1']}>,
POST:<QueryDict: {}>,
COOKIES:{'__utma': '70169357.1075025463.1407401442.1407767201.1408094093.4',
 '__utmb': '70169357.3.10.1408094093',
 '__utmc': '70169357',
 '__utmz': '70169357.1407499266.2.2.utmcsr=django-oscar.readthedocs.org|utmccn=(referral)|utmcmd=referral|utmcct=/en/latest/internals/sandbox.html',
 '_ga': 'GA1.2.1019442410.1407401521',
 'csrftoken': 'VxKdLDg0Ku91BTor0q8NB3CZvu88k6Oe',
 'oscar_history': '[306, 226]',
 'sessionid': 'ezl8cu3se98sve7hbg4kot3z40voi0rs'},
META:{'CONTENT_LENGTH': '',
 'CONTENT_TYPE': '',
 u'CSRF_COOKIE': u'VxKdLDg0Ku91BTor0q8NB3CZvu88k6Oe',
 'DOCUMENT_ROOT': '/etc/nginx/html',
 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8,pl;q=0.6',
 'HTTP_CACHE_CONTROL': 'max-stale=0',
 'HTTP_CONNECTION': 'close',
 'HTTP_COOKIE': 'sessionid=ezl8cu3se98sve7hbg4kot3z40voi0rs; oscar_history=""[306\\054 226]""; _ga=GA1.2.1019442410.1407401521; csrftoken=VxKdLDg0Ku91BTor0q8NB3CZvu88k6Oe; __utma=70169357.1075025463.1407401442.1407767201.1408094093.4; __utmb=70169357.3.10.1408094093; __utmc=70169357; __utmz=70169357.1407499266.2.2.utmcsr=django-oscar.readthedocs.org|utmccn=(referral)|utmcmd=referral|utmcct=/en/latest/internals/sandbox.html',
 'HTTP_HOST': 'latest.oscarcommerce.com',
 'HTTP_REFERER': 'http://latest.oscarcommerce.com/en-gb/dashboard/catalogue/',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1985.125 Safari/537.36',
 'HTTP_X_BLUECOAT_VIA': '2ffaa7a6a37c669d',
 'HTTP_X_FORWARDED_FOR': '198.45.26.27',
 'HTTP_X_REAL_IP': '198.45.26.27',
 'PATH_INFO': u'/en-gb/dashboard/catalogue/',
 'QUERY_STRING': 'recently_edited=1',
 'REMOTE_ADDR': '198.45.26.27',
 'REMOTE_PORT': '',
 'REQUEST_METHOD': 'GET',
 'REQUEST_URI': '/en-gb/dashboard/catalogue/?recently_edited=1',
 u'SCRIPT_NAME': u'',
 'SERVER_NAME': 'sandbox.oscar.tangentlabs.co.uk',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'uwsgi.node': 'tangent-oscar-demo.tangentlabs.co.uk',
 'uwsgi.version': '1.9.21.1',
 'wsgi.errors': <open file 'wsgi_errors', mode 'w' at 0x268b810>,
 'wsgi.file_wrapper': <built-in function uwsgi_sendfile>,
 'wsgi.input': <uwsgi._Input object at 0x501ba50>,
 'wsgi.multiprocess': True,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}>
```

Looks like an issue with how django_tables2 is used within the catalogue dashboard.
@mbertheau Any thoughts?
"
11624,django-oscar,django-oscar,17,closed,1448,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1448/comments,https://github.com/django-oscar/django-oscar/issues/1448,[],Running Oscar with Django 1.7c ,"Starting with a fresh install of Django-Oscar results in the following error when upgrading from Django 1.6.5 to 1.7c

The error is thrown after running: `python manage.py syncdb --noinput`

```
/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/pytz/__init__.py:29: UserWarning: Module oscar was already imported from /Users/tylerkrebs/workspace/django_project/unwash_ecom/oscar/__init__.pyc, but /Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages is being added to sys.path
  from pkg_resources import resource_stream
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/core/management/base.py"", line 337, in execute
    output = self.handle(*args, **options)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/core/management/base.py"", line 532, in handle
    return self.handle_noargs(**options)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/south/management/commands/syncdb.py"", line 68, in handle_noargs
    migrations = migration.Migrations(app_label)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/south/migration/base.py"", line 64, in __call__
    self.instances[app_label] = super(MigrationsMetaclass, self).__call__(app_label_to_app_module(app_label), **kwds)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/south/migration/utils.py"", line 41, in app_label_to_app_module
    app = models.get_app(app_label)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/db/models/__init__.py"", line 54, in alias
    return getattr(loading, function_name)(*args, **kwargs)
  File ""/Users/tylerkrebs/.virtualenvs/unwash/lib/python2.7/site-packages/django/apps/registry.py"", line 367, in get_app
    raise ImproperlyConfigured(*exc.args)
django.core.exceptions.ImproperlyConfigured: No installed app with label 'reports'.
```

Using Django1.6.5 works as it should. 
"
11629,django-oscar,django-oscar,17,closed,1443,7,https://api.github.com/repos/django-oscar/django-oscar/issues/1443/comments,https://github.com/django-oscar/django-oscar/issues/1443,[],Shipping Methods Documentation and US Example Site,"The documentation (in both [latest](http://django-oscar.readthedocs.org/en/releases-0.7/ref/apps/shipping.html) and [0.7](http://django-oscar.readthedocs.org/en/latest/ref/apps/shipping.html)) makes no mention of multiple Shipping Methods from `oscar.apps.shipping.methods`, including: `Free`, `FixedPrice` and the `Tax(In/Ex)clusive` variants of `OfferDiscount`. I'm not sure if this is intended, but I was under the impression the docs were inclusive, and I am sure knowledge of these methods may be useful. Currently the only way of discovering these methods is through delving into the source code.

Also, why are the docs not defaulted to the latest full release, version 0.7, rather than the development docs? It might be helpful to at least add a warning to the 'latest' docs that they differ significantly from the current stable release, and some features may not work in 0.7.

---

The following isn't so much a ""bug"", but a problem I encountered when following the US site using Oscar 0.7, which I'm sure many people do, so perhaps it will be helpful to someone.

---

I was attempting to use the logic from the US Example Site, but I encountered code incompatible with 0.7.

``` python
from decimal import Decimal as D

from oscar.apps.shipping import repository, methods, models


class Standard(methods.FixedPrice):
    code = ""standard""
    name = ""Standard""
    charge_excl_tax = D('10.00')


class Express(methods.FixedPrice):
    code = ""express""
    name = ""Express""
    charge_excl_tax = D('20.00')


class Repository(repository.Repository):

    def get_available_shipping_methods(
            self, basket, shipping_addr=None, **kwargs):
        methods = [Standard(), Express()]
        if shipping_addr:
            item_methods = models.OrderAndItemCharges.objects.filter(
                countries=shipping_addr.country)
            methods.extend(list(item_methods))

        return methods
```

Here, `Standard()` and `Express()` are called with no arguments, however in 0.7 the `FixedPrice` method requires an argument specifying `charge_excl_tax`, rather then setting it in the class. 

Easy fix, of course. Either just set `charge_excl_tax` in the init call, or use 'Base' instead of 'FixedPrice'. However, the problem wasn't apparent at first, since I was looking at the current source code. 
"
11659,django-oscar,django-oscar,17,closed,1413,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1413/comments,https://github.com/django-oscar/django-oscar/pull/1413,"[{""default"": false, ""name"": ""\u263c Enhancement"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%BC%20Enhancement"", ""color"": ""D8E4FD"", ""node_id"": ""MDU6TGFiZWw5MDg1Mw=="", ""id"": 90853}]",Add Django 1.7 support,"This PR supersedes #1386, but is heavily based on @mvantellingen's excellent work. I've rebased some of his commits and commit messages to produce a cleaner commit history, but hopefully did not introduce any bugs along the way.

The main change is a more explicit approach to not registering models. Instead of basing the models on a custom `Model` class, we inspect the app registry to prevent models being registered twice. That approach is slightly more verbose, but feels less magic. 

The other improvement is adding app configs for dashboard applications. They are being relabelled to `<original_name>_dashboard` to avoid app label clashes. IMHO, dashboard apps should be moved into their related apps as suggested in #1383; but that's out-of-scope for this PR.

I think about 7 tests are still failing, mostly related to the app fork command and migrations. 

Issues remaining:
- [x] Migrations. Need to create a set of migrations created by the new migrations framework. Need to document how to upgrade. Probably need to drop South from requirements, and add documentation for supported South versions. Should we enforce South 1.0? Need to create a helper script that creates migrations both for South and the new system. Document that one needs to rename ones `migrations` directory to ``south_migrations`.
- [x] Decide what to do with `RangeProductFileUpload`. It's the only model living in dashboard apps at the moment. The renaming of the dashboard apps causes `get_model('ranges', 'RangeProductFileUpload')` to fail.
- [x] Need to write detailed upgrade instructions. 
- [x] There is an issue with the new `get_model` when called during initialisation; @mvantellingen worked around it in https://github.com/mvantellingen/django-oscar/commit/efdeda525978ca440704b2073fe5ba4d164effb5. Technically, that's a regression of Django, not Oscar. It could be fixed by lazy-loading models if the app cache isn't ready or adding an explicit lazy-loading model loading function, but is referencing models during app startup time even the right thing to do?
- [x] Do we require new tests?
- [x] A few tests still fail, mostly related to migrations. Address.
- [x] `config.py` is a non-standard location for the `AppConfig`. Need to weigh potential confusion against that.
- [x] Document that when forking an app, one should inherit from the Oscar's app `AppConfig`. The `fork_app` command should do it automatically.
- [x] `get_model` for Django 1.7 raises a `LookupError`; previously our loud `get_model` raised an `ImportError`. Should we align those; and if so, how? 
- [x] `receivers.py` have been using `get_class` to fetch the models. That feels wrong, but using `get_model` breaks it. Investigate & document. 
- [x] Do a feedback round with @codeinthehole and @aaugustin.
- [x] Decide if we drop support for Django 1.5. I'd argue for it; while there isn't a good technical reason for it, it gives us a clear roadmap to soon drop Django 1.6, which would remove a lot of special-casing.
"
11667,django-oscar,django-oscar,17,closed,1402,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1402/comments,https://github.com/django-oscar/django-oscar/issues/1402,[],Management command oscar_send_alerts errors,"traceback:

```
var/envs/superdrabuziai/lib/python2.7/site-packages/sorl/thumbnail/helpers.py:5: DeprecationWarning: django.utils.simplejson is deprecated; use json instead.
  from django.utils import simplejson

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/management/__init__.py"", line 272, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/management/__init__.py"", line 75, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/management/commands/oscar_send_alerts.py"", line 6, in <module>
    from oscar.apps.customer.alerts import utils
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/apps/customer/alerts/utils.py"", line 9, in <module>
    from oscar.apps.customer.notifications import services
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/apps/customer/notifications/services.py"", line 3, in <module>
    Notification = get_model('customer', 'Notification')
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/core/loading.py"", line 195, in get_model
    model = django_get_model(app_label, model_name, *args, **kwargs)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/db/models/loading.py"", line 78, in _populate
    self.load_app(app_name)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/debug_toolbar/models.py"", line 63, in <module>
    patch_root_urlconf()
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/debug_toolbar/models.py"", line 51, in patch_root_urlconf
    reverse('djdt:render_panel')
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 503, in reverse
    app_list = resolver.app_dict[ns]
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 329, in app_dict
    self._populate()
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 267, in _populate
    for pattern in reversed(self.url_patterns):
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 365, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 360, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/var/www/superdrabuziai/superdrabuziai/urls.py"", line 7, in <module>
    from .app import application
  File ""/var/www/superdrabuziai/superdrabuziai/app.py"", line 7, in <module>
    from oscar import app
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/app.py"", line 14, in <module>
    class Shop(Application):
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/app.py"", line 18, in Shop
    customer_app = get_class('customer.app', 'application')
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/core/loading.py"", line 26, in get_class
    return get_classes(module_label, [classname])[0]
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/core/loading.py"", line 79, in get_classes
    oscar_module = _import_module(oscar_module_label, classnames)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/core/loading.py"", line 112, in _import_module
    return __import__(module_label, fromlist=classnames)
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/apps/customer/app.py"", line 7, in <module>
    from oscar.apps.customer.alerts import views as alert_views
  File ""/var/envs/superdrabuziai/lib/python2.7/site-packages/oscar/apps/customer/alerts/views.py"", line 10, in <module>
    from oscar.apps.customer.alerts import utils
ImportError: cannot import name utils
```

```
# oscar_send_alerts.py

from oscar.apps.customer.alerts import utils

class Command(BaseCommand):
    """"""
    Check stock records of products for availability and send out alerts
    to customers that have registered for an alert.
    """"""
    help = _(""Check for products that are back in ""
             ""stock and send out alerts"")

    def handle(self, **options):
        """"""
        Check all products with active product alerts for
        availability and send out email alerts when a product is
        available to buy.
        """"""
        utils.send_alerts()
```

by adding ""from oscar.apps.customer.alerts import utils"" inside in ""handle"" method works fine

Is it a bug or something wrong with my app.py override ?

If you need more info please ask I will provide.
"
11681,django-oscar,django-oscar,18,closed,1388,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1388/comments,https://github.com/django-oscar/django-oscar/pull/1388,[],added -? to regex in urls to allow for anonymous users to show up and no...,"...t raise an error from the dashboard/users/index.html template.

This will make sure that having users with negative id/pk won't crash the page. There are probably other url regexes in django-oscar that could use this change. 
"
11683,django-oscar,django-oscar,18,closed,1386,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1386/comments,https://github.com/django-oscar/django-oscar/pull/1386,"[{""default"": false, ""name"": ""\u263c Enhancement"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%BC%20Enhancement"", ""color"": ""D8E4FD"", ""node_id"": ""MDU6TGFiZWw5MDg1Mw=="", ""id"": 90853}]",Django 1.7 support,"This is heavily work in progress. 

The changes include: 
- Add OSCAR_OVERRIDE_MODELS list to specify if a oscar model should be registered. In Django 1.7 we can't register models with the same name multiple times.
- Don't register various dashboard.\* modules as separate apps anymore. Duplicate app_labels aren't allowed. It might be a better idea to move the dashboard functionality for a specific app in the app itself (e.g. oscar.apps.catalogue.dashboard)
- Add AppConfig objects as <app>.config. Django documentation uses <app>.apps but that might cause confusion with the <app>.app module.

Current test status:
- unit: 4 errors, 1 failure
- integration: 7 errors
- functional: 169 errors 
"
11685,django-oscar,django-oscar,18,closed,1384,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1384/comments,https://github.com/django-oscar/django-oscar/issues/1384,[],AbstractAddress.search_text overflow causes DataError,"Hi,

most address fields accept a maximum length of 255 characters. If a user enters at least 4 fields (e.g. `first_name`, `last_name`, `line1` and `line4`), the `AbstractAddress._update_search_text` method will throw a DataError, as the maximum length of 1000 is exceeded::

```
Environment:


Request Method: POST
Request URL: http://localhost:8000/accounts/register/

Django Version: 1.6.5
Python Version: 2.7.3
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'south',
 'storages',
 'django_activeurl',
 'apps.help',
 'rest_framework',
 'hawkrest',
 'compressor',
 'apps.help',
 'apps.pages',
 'apps.topicpage',
 'apps.loadbalancer',
 'oscar',
 'oscar.apps.analytics',
 'apps.checkout',
 'apps.address',
 'apps.shipping',
 'apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'apps.partner',
 'apps.basket',
 'apps.payment',
 'oscar.apps.offer',
 'apps.order',
 'apps.customer',
 'apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'debug_toolbar',
 'template_timings_panel',
 'w3c_validator',
 'devserver']
Installed Middleware:
('debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'apps.customer.middleware.CustomerMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'hawkrest.middleware.HawkResponseMiddleware',
 'apps.pages.middleware.PageFallbackMiddleware',
 'galileo_django_extensions.cache.middleware.CachingMiddleware')


Traceback:
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  112.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  87.         return handler(request, *args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  171.             return self.form_valid(form)
File ""/mnt/henning/projekte/boscar/hg/redsox/apps/customer/views.py"" in form_valid
  17.         customer = create_customer(email, form.cleaned_data['password1'], form.instance)
File ""/mnt/henning/projekte/boscar/hg/redsox/apps/customer/services.py"" in create_customer
  22.     user_address.save()
File ""/mnt/henning/projekte/boscar/hg/redsox/apps/address/models.py"" in save
  78.         super(UserAddress, self).save(*args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/oscar/apps/address/abstract_models.py"" in save
  249.         super(AbstractAddress, self).save(*args, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/base.py"" in save
  545.                        force_update=force_update, update_fields=update_fields)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/base.py"" in save_base
  573.             updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/base.py"" in _save_table
  654.             result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/base.py"" in _do_insert
  687.                                using=using, raw=raw)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/manager.py"" in _insert
  232.         return insert_query(self.model, objs, fields, **kwargs)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/query.py"" in insert_query
  1514.     return query.get_compiler(using=using).execute_sql(return_id)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"" in execute_sql
  903.             cursor.execute(sql, params)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/debug_toolbar/panels/sql/tracking.py"" in execute
  174.         return self._record(self.cursor.execute, sql, params)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/debug_toolbar/panels/sql/tracking.py"" in _record
  104.             return method(sql, params)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/devserver/modules/sql.py"" in execute
  82.             return super(DatabaseStatTracker, self).execute(sql, params)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/backends/util.py"" in execute
  53.                 return self.cursor.execute(sql, params)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/utils.py"" in __exit__
  99.                 six.reraise(dj_exc_type, dj_exc_value, traceback)
File ""/home/henning/.virtualenvs/boscar/local/lib/python2.7/site-packages/django/db/backends/util.py"" in execute
  53.                 return self.cursor.execute(sql, params)

Exception Type: DataError at /accounts/register/
Exception Value: value too long for type character varying(1000)

```

As the search text field will be populated implicit, this error won't be covered by the form validation and makes no sense at all, as the user cannot enter the `search_text` value.

I will provide a pull request for this bug (based on release 0.7 we are using in our project).

With kind regards,
Henning
"
11686,django-oscar,django-oscar,18,closed,1382,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1382/comments,https://github.com/django-oscar/django-oscar/issues/1382,[],unable to add catalogue/category,"unable to add category in shop i just overwrite the all oscar app.

i go through the 
issue Demo site error #840 
follow steps but unable to fix this
..please help..

Request Method: POST
Request URL: http://127.0.0.1:8000/admin/catalogue/category/add/

Django Version: 1.6.5
Python Version: 2.7.6
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'south',
 'compressor',
 'debug_toolbar',
 'address',
 'analytics',
 'basket',
 'catalogue',
 'checkout',
 'customer',
 'dashboard',
 'offer',
 'order',
 'partner',
 'payment',
 'promotions',
 'search',
 'shipping',
 'voucher',
 'wishlists',
 'catalogue.reviews',
 'customer.alerts',
 'customer.notifications',
 'customer.wishlists',
 'dashboard.catalogue',
 'dashboard.communications',
 'dashboard.offers',
 'dashboard.orders',
 'dashboard.pages',
 'dashboard.partners',
 'dashboard.promotions',
 'dashboard.ranges',
 'dashboard.reports',
 'dashboard.reviews',
 'dashboard.users',
 'dashboard.vouchers',
 'temtegs',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail']
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/contrib/admin/options.py"" in wrapper
2.                 return self.admin_site.admin_view(view)(_args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
3.                     response = view_func(request, _args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/views/decorators/cache.py"" in _wrapped_view_func
4.         response = view_func(request, _args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/contrib/admin/sites.py"" in inner
5.             return view(request, _args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapper
6.             return bound_func(_args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
7.                     response = view_func(request, _args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/utils/decorators.py"" in bound_func
8.                 return func(self, _args2, *_kwargs2)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/db/transaction.py"" in inner
9.                 return func(_args, *_kwargs)
   File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/contrib/admin/options.py"" in add_view
10.                 self.save_model(request, new_object, form, False)
    File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/contrib/admin/options.py"" in save_model
11.         obj.save()
    File ""/home/starun64/shop/catalogue/abstract_models.py"" in save
12.             self.update_slug(commit=False)
    File ""/home/starun64/shop/catalogue/abstract_models.py"" in update_slug
13.         parent = self.get_parent()
    File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/treebeard/mp_tree.py"" in get_parent
14.             self.**class**).objects.get(path=parentpath)
    File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/db/models/manager.py"" in get
15.         return self.get_queryset().get(_args, *_kwargs)
    File ""/home/starun64/.virtualenvs/oscar2/local/lib/python2.7/site-packages/django/db/models/query.py"" in get
16.                 self.model._meta.object_name)

Exception Type: DoesNotExist at /admin/catalogue/category/add/
Exception Value: Category matching query does not exist.
"
11696,django-oscar,django-oscar,18,closed,1372,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1372/comments,https://github.com/django-oscar/django-oscar/issues/1372,"[{""default"": false, ""name"": ""\u263c Enhancement"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%BC%20Enhancement"", ""color"": ""D8E4FD"", ""node_id"": ""MDU6TGFiZWw5MDg1Mw=="", ""id"": 90853}]",Use django-compressor 1.4,"Django-compressor 1.3 contains a bug when lxml is installed.

See https://github.com/django-compressor/django-compressor/issues/261

(If the dependency was just django-compressor>= 1.3 then no new version was required :))
"
11730,django-oscar,django-oscar,18,closed,1338,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1338/comments,https://github.com/django-oscar/django-oscar/issues/1338,[],Notifications Context Processor assumes request.user which borks error handling,"When Django renders errors it goes through context and middleware in the reverse order to normal, so user isn't set.
"
11748,django-oscar,django-oscar,18,closed,1318,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1318/comments,https://github.com/django-oscar/django-oscar/issues/1318,[],"No handlers could be found for logger ""oscar.catalogue.import""","With django-oscar 0.7, when I try to import a directory of images, I get this error:

```
$ ./manage.py oscar_import_catalogue_images images
No handlers could be found for logger ""oscar.catalogue.import""
```

What's strange is that the `oscar_import_catalogue` command worked, but not the one for images.
"
11750,django-oscar,django-oscar,18,closed,1315,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1315/comments,https://github.com/django-oscar/django-oscar/issues/1315,[],TypeError: handle() got multiple values for keyword argument 'skip',"When I run `migrate reviews 0001 --fake` on a Django Oscar site that was previously 0.6 and is now running 0.7, I get the following error:

```
$ heroku run slstore/manage.py migrate reviews 0001 –-fake              
Running `slstore/manage.py migrate reviews 0001 –-fake` attached to terminal... up, run.2252
/app/.heroku/python/lib/python2.7/site-packages/sorl/thumbnail/helpers.py:5: DeprecationWarning: django.utils.simplejson is deprecated; use json instead.
  from django.utils import simplejson

Traceback (most recent call last):
  File ""slstore/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py"", line 285, in execute
    output = self.handle(*args, **options)
TypeError: handle() got multiple values for keyword argument 'skip'
```
"
11753,django-oscar,django-oscar,18,closed,1312,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1312/comments,https://github.com/django-oscar/django-oscar/issues/1312,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",ERROR: test_browsing_works (tests.functional.catalogue.catalogue_tests.TestProductCategoryView),"When I try to run the tests, I get this error:

```
(oscar)➜  oscar-smallslive git:(stripe) ✗ ./runtests.py 
nosetests --nocapture --stop --processes=8 --verbosity=1
Creating test database for alias 'default'...
E
======================================================================
ERROR: test_browsing_works (tests.functional.catalogue.catalogue_tests.TestProductCategoryView)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/Users/nateaune/Dropbox/code/oscar-smallslive/tests/functional/catalogue/catalogue_tests.py"", line 75, in test_browsing_works
    response = self.app.get(correct_url)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django_webtest/__init__.py"", line 106, in get
    url, params, headers, extra_environ, status, expect_errors, **kwargs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/webtest/app.py"", line 212, in get
    expect_errors=expect_errors)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django_webtest/__init__.py"", line 69, in do_request
    response = super(DjangoTestApp, self).do_request(req, status, expect_errors)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/webtest/app.py"", line 495, in do_request
    res = req.get_response(app, catch_exc_info=True)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/webob/request.py"", line 1316, in send
    application, catch_exc_info=True)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/webob/request.py"", line 1284, in call_application
    app_iter = application(self.environ, start_response)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/webtest/lint.py"", line 198, in lint_app
    iterator = application(environ, start_response_wrapper)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/contrib/staticfiles/handlers.py"", line 67, in __call__
    return self.application(environ, start_response)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 206, in __call__
    response = self.get_response(request)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/core/handlers/base.py"", line 196, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/core/handlers/base.py"", line 139, in get_response
    response = response.render()
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/response.py"", line 105, in render
    self.content = self.rendered_content
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/response.py"", line 82, in rendered_content
    content = template.render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 140, in render
    return self._render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/test/utils.py"", line 85, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 840, in render
    bit = self.render_node(node, context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 854, in render_node
    return node.render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/test/utils.py"", line 85, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 840, in render
    bit = self.render_node(node, context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 854, in render_node
    return node.render(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader_tags.py"", line 101, in render
    compiled_parent = self.get_parent(context)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader_tags.py"", line 98, in get_parent
    return get_template(parent)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 138, in get_template
    template, origin = find_template(template_name)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 127, in find_template
    source, display_name = loader(name, dirs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 43, in __call__
    return self.load_template(template_name, template_dirs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loaders/cached.py"", line 49, in load_template
    template, origin = self.find_template(template_name, template_dirs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loaders/cached.py"", line 34, in find_template
    template, display_name = loader(name, dirs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 43, in __call__
    return self.load_template(template_name, template_dirs)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 49, in load_template
    template = get_template_from_string(source, origin, template_name)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader.py"", line 149, in get_template_from_string
    return Template(source, origin, name)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 125, in __init__
    self.nodelist = compile_string(template_string, origin)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 153, in compile_string
    return parser.parse()
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 278, in parse
    compiled_result = compile_func(self, token)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/loader_tags.py"", line 215, in do_extends
    nodelist = parser.parse()
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 278, in parse
    compiled_result = compile_func(self, token)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/defaulttags.py"", line 1080, in load
    lib = get_library(taglib)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 1318, in get_library
    lib = import_library(taglib_module)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/template/base.py"", line 1257, in import_library
    mod = import_module(taglib_module)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django_compressor-1.3-py2.7.egg/compressor/templatetags/compress.py"", line 4, in <module>
    from compressor.cache import (cache_get, cache_set, get_offline_hexdigest,
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django_compressor-1.3-py2.7.egg/compressor/cache.py"", line 8, in <module>
    from django.utils import simplejson
  File ""/Users/nateaune/.virtualenvs/oscar/lib/python2.7/site-packages/django/utils/simplejson.py"", line 12, in <module>
    DeprecationWarning, stacklevel=2)
DeprecationWarning: django.utils.simplejson is deprecated; use json instead.

----------------------------------------------------------------------
Ran 1 test in 0.692s

FAILED (errors=1)
Destroying test database for alias 'default'...
```
"
11757,django-oscar,django-oscar,18,closed,1308,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1308/comments,https://github.com/django-oscar/django-oscar/issues/1308,[],ProductAttributeAdmin sometimes has trouble generating code.,"When adding a product attribute with a name that contains spaces, a form error occurs (see screenshot). This is because `prepopulated_fields` in https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/catalogue/admin.py#L54 slugifies `name` to arrive at `code`, which conflicts with the definition of the code field.

![screen shot 2014-04-23 at 15 29 57](https://cloud.githubusercontent.com/assets/537559/2794908/d5490b50-cbf2-11e3-8ffb-b7cfdb07678b.png)
"
11765,django-oscar,django-oscar,18,closed,1299,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1299/comments,https://github.com/django-oscar/django-oscar/issues/1299,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Type error on second review submited: not all arguments converted ,"I've got this error while posting the second review. Bug issued only with not default locales.

> TypeError at /ru/shop/catalogue/prilozhenie-voprosy-i-otvety_6/reviews/add/
> not all arguments converted during string formatting
> Request Method:    GET
> Request URL:   http://127.0.0.1:8000/ru/shop/catalogue/prilozhenie-voprosy-i-otvety_6/reviews/add/
> Django Version:    1.6.2
> Exception Type:    TypeError
> Exception Value:   not all arguments converted during string formatting

for example: http://latest.oscarcommerce.com/pl/catalogue/windows-28_286/reviews/add/#addreview

Traceback:

```
Environment:


Request Method: GET
Request URL: http://127.0.0.1:8000/ru/shop/catalogue/prilozhenie-voprosy-i-otvety_6/reviews/add/

Django Version: 1.6.2
Python Version: 2.7.3
Installed Applications:
['djangocms_admin_style',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.comments',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'registration',
 'south',
 'mptt',
 'smart_load_tag',
 'djangocms_text_ckeditor',
 'cms',
 'menus',
 'sekizai',
 'filer',
 'tagging',
 'djangocms_googlemap',
 'cmsplugin_filer_file',
 'cmsplugin_filer_folder',
 'cmsplugin_filer_image',
 'cmsplugin_filer_teaser',
 'cmsplugin_filer_video',
 'cmsplugin_zinnia',
 'reversion',
 'compressor',
 'post_office',
 'debug_toolbar',
 'analytical',
 'guardian',
 'accounts',
 'utils',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.dropbox',
 'allauth.socialaccount.providers.facebook',
 'allauth.socialaccount.providers.github',
 'allauth.socialaccount.providers.google',
 'allauth.socialaccount.providers.linkedin',
 'allauth.socialaccount.providers.openid',
 'allauth.socialaccount.providers.twitter',
 'allauth.socialaccount.providers.vk',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail',
 'zinnia',
 'userena',
 'easy_thumbnails']
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware',
 'cms.middleware.language.LanguageCookieMiddleware',
 'userena.middleware.UserenaLocaleMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')


Template error:
In template /home/projects/test-cms/src/django-oscar/oscar/templates/oscar/catalogue/detail.html, error at line 87
   not all arguments converted during string formatting
   77 :             {% iffeature ""reviews"" %}


   78 :                 {% if product.rating != None %}


   79 :                     <h4 class=""star-rating {{ product.rating|as_stars }}"">


   80 :                         <i class=""icon-star""></i>


   81 :                         <i class=""icon-star""></i>


   82 :                         <i class=""icon-star""></i>


   83 :                         <i class=""icon-star""></i>


   84 :                         <i class=""icon-star""></i>


   85 : 


   86 :                         <small><a href=""{% url 'catalogue:reviews-list' product_slug=product.slug product_pk=product.id %}"">


   87 :                              {% blocktrans count reviews_count as num_reviews %} 


   88 :                             1 customer review


   89 :                             {% plural %}


   90 :                             {{ num_reviews }} customer reviews


   91 :                             {% endblocktrans %}


   92 :                         </a></small>


   93 :                         &nbsp;


   94 :                 {% else %}


   95 :                     <h4>


   96 :                 {% endif %}


   97 :                 {% if product|is_review_permitted:user %}


Traceback:
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  139.                 response = response.render()
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/response.py"" in render
  105.             self.content = self.rendered_content
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/response.py"" in rendered_content
  82.         content = template.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  140.             return self._render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/test/utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  123.         return compiled_parent._render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/test/utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  123.         return compiled_parent._render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/test/utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  123.         return compiled_parent._render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/test/utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/classytags/core.py"" in render
  106.         return self.render_tag(context, **kwargs)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/sekizai/templatetags/sekizai_tags.py"" in render_tag
  76.         rendered_contents = nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/classytags/core.py"" in render
  106.         return self.render_tag(context, **kwargs)
File ""/home/projects/test-cms/src/django-cms/cms/templatetags/cms_tags.py"" in render_tag
  619.         rendered_contents = nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  62.             result = block.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  62.             result = block.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  62.             result = block.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/loader_tags.py"" in render
  62.             result = block.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/src/django-oscar/oscar/templatetags/display_tags.py"" in render
  66.             output = self.nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/defaulttags.py"" in render
  305.                 return nodelist.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
  78.             return node.render(context)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/templatetags/i18n.py"" in render
  140.                 result = translation.ungettext(singular, plural, count)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/utils/translation/__init__.py"" in ungettext
  79.     return _trans.ungettext(singular, plural, number)
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in ungettext
  328.         return do_ntranslate(singular, plural, number, 'ungettext')
File ""/home/projects/test-cms/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in do_ntranslate
  305.         return getattr(t, translation_function)(singular, plural, number)
File ""/usr/lib/python2.7/gettext.py"" in ungettext
  409.             tmsg = self._catalog[(msgid1, self.plural(n))]

Exception Type: TypeError at /ru/shop/catalogue/prilozhenie-voprosy-i-otvety_6/reviews/add/
Exception Value: not all arguments converted during string formatting
```
"
11774,django-oscar,django-oscar,18,closed,1289,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1289/comments,https://github.com/django-oscar/django-oscar/issues/1289,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Unable to de-select a second category,"Re https://groups.google.com/d/msgid/django-oscar/67f59c99-de93-4394-88af-e4b66cdc6e90%40googlegroups.com.
### Steps to recreate

Add a second category to a product and save. Then re-edit the product and try to unselect the second category. You get a validation error (but you shouldn't).
"
11779,django-oscar,django-oscar,18,closed,1284,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1284/comments,https://github.com/django-oscar/django-oscar/issues/1284,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Cannot syncdb if custom user model is used on releases/0.6 branch.,"@maikhoepfel & @alex-moon - Something in the recent backport [8459daf1639ecda0d72b7e9b22bc3927ec131ae7] merged into the releases/0.6 branch broke the ability to use a custom user model during the initial syncdb.

The custom model we are using is defined using:

```
from oscar.apps.customer import abstract_models
class User(abstract_models.AbstractUser):
    # other stuff
```

Simply doing the from oscar.apps.customer import abstract_models causes the following exception to be thrown:

```
(obfuscated)Tangent-Test-Tube:www oliverrandell$ ./manage.py syncdb
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/base.py"", line 284, in execute
    self.validate()
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/base.py"", line 310, in validate
    num_errors = get_validation_errors(s, app)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/core/management/validation.py"", line 34, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/db/models/loading.py"", line 196, in get_app_errors
    self._populate()
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/Users/oliverrandell/Projects/sites/obfuscated-matjaro/www/magrudy/user/models.py"", line 9, in <module>
    from oscar.apps.customer import abstract_models
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/src/django-oscar/oscar/apps/customer/abstract_models.py"", line 14, in <module>
    from oscar.core.compat import AUTH_USER_MODEL
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/src/django-oscar/oscar/core/compat.py"", line 46, in <module>
    _user_fields = get_user_model()._meta.fields
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/src/django-oscar/oscar/core/compat.py"", line 23, in get_user_model
    model = get_user_model()
  File ""/Users/oliverrandell/.virtualenvs/obfuscated/lib/python2.7/site-packages/django/contrib/auth/__init__.py"", line 129, in get_user_model
    raise ImproperlyConfigured(""AUTH_USER_MODEL refers to model '%s' that has not been installed"" % settings.AUTH_USER_MODEL)
django.core.exceptions.ImproperlyConfigured: AUTH_USER_MODEL refers to model 'user.User' that has not been installed
```

It looks like the call to: `_user_fields = get_user_model()._meta.fields` on line 46 is the culprit as it is call get_user_model() before the model actually exists, or at least before it exists in the DB.
"
11782,django-oscar,django-oscar,19,closed,1281,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1281/comments,https://github.com/django-oscar/django-oscar/issues/1281,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",ValidationError in validate_attributes during review saving,"I'd caught it while trying to add review on parent product with some ""required"" attributes defined.
It's seems like new condition ""validate_attributes"" has been used in the dashboard product update/create form (https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/dashboard/catalogue/forms.py#L362), but not in review's form.

Here is my solution ( just move is_group condition checking to catalogue.abstract_models.AbstractProduct.save method ( 46ff5e0c12c9e2cc3d11bb57c90b204e5a479306 )

Traceback:

<blockquote><pre>
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/reviews/views.py"" in dispatch
  38.             request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  87.         return handler(request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  205.         return super(BaseCreateView, self).post(request, *args, **kwargs)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  171.             return self.form_valid(form)
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/reviews/views.py"" in form_valid
  52.         response = super(CreateProductReview, self).form_valid(form)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/views/generic/edit.py"" in form_valid
  147.         self.object = form.save()
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/forms/models.py"" in save
  446.                              construct=False)
File ""/home/projects/butik-shop/lib/python2.7/site-packages/django/forms/models.py"" in save_instance
  99.         instance.save()
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/reviews/abstract_models.py"" in save
  98.         self.product.update_rating()
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/abstract_models.py"" in update_rating
  519.         self.save()
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/abstract_models.py"" in save
  315.             self.attr.validate_attributes()
File ""/home/projects/butik-shop/src/django-oscar/oscar/apps/catalogue/abstract_models.py"" in validate_attributes
  609.                         {'attr': attribute.code})

Exception Type: ValidationError at /catalogue/shtany-na-liamkakh_292/reviews/add/
Exception Value: [u'size \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c']
</pre></blockquote>
"
11793,django-oscar,django-oscar,19,closed,1270,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1270/comments,https://github.com/django-oscar/django-oscar/issues/1270,[],'NoneType' object has no attribute 'all_statuses',"Hello,

I've got an odd issue I can't seem to diagnose. Everything is running just dandy in my local virtualenv -- using Oscar 0.6.3 and Django 1.5.1.

However, when I run the app in Apache, outside of a virtualenv, on my web server VM, I'm getting an odd traceback:

```
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'django_crontab',
 'printables.core',
 'printables.core.templatetags',
 'printables.prints',
 'printables.quotes',
 'south',
 'social_auth',
 'registration',
 'compressor',
 'paypal',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'printables.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'printables.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'printables.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'printables.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')


Traceback:
File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in get_response
  103.                     resolver_match = resolver.resolve(request.path_info)
File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in resolve
  319.             for pattern in self.url_patterns:
File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in url_patterns
  347.         patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
File ""/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py"" in urlconf_module
  342.             self._urlconf_module = import_module(self.urlconf_name)
File ""/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py"" in import_module
  35.     __import__(name)
File ""/data/www/html/quoteprint/printables/urls.py"" in <module>
  9. from oscar.app import application as oscar_app
File ""/usr/local/lib/python2.7/dist-packages/oscar/app.py"" in <module>
  11. class Shop(Application):
File ""/usr/local/lib/python2.7/dist-packages/oscar/app.py"" in Shop
  20.     dashboard_app = get_class('dashboard.app', 'application')
File ""/usr/local/lib/python2.7/dist-packages/oscar/core/loading.py"" in get_class
  32.     return get_classes(module_label, [classname])[0]
File ""/usr/local/lib/python2.7/dist-packages/oscar/core/loading.py"" in get_classes
  85.         imported_module = __import__(module_path, fromlist=classnames)
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/app.py"" in <module>
  8. class DashboardApplication(Application):
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/app.py"" in DashboardApplication
  16.     orders_app = get_class('dashboard.orders.app', 'application')
File ""/usr/local/lib/python2.7/dist-packages/oscar/core/loading.py"" in get_class
  32.     return get_classes(module_label, [classname])[0]
File ""/usr/local/lib/python2.7/dist-packages/oscar/core/loading.py"" in get_classes
  120.         imported_oscar_module = __import__(oscar_app, fromlist=classnames)
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/orders/app.py"" in <module>
  4. from oscar.apps.dashboard.orders import views
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/orders/views.py"" in <module>
  18. from oscar.apps.dashboard.orders import forms
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/orders/forms.py"" in <module>
  61. class OrderSearchForm(forms.Form):
File ""/usr/local/lib/python2.7/dist-packages/oscar/apps/dashboard/orders/forms.py"" in OrderSearchForm
  70.                                                    in Order.all_statuses()])

Exception Type: AttributeError at /
Exception Value: 'NoneType' object has no attribute 'all_statuses'
```

I've read a bit about some issues with django's get_model() calls and Oscar, but I am not sure if this is the same issue. Our Order concrete model just looks like this:

``` python
from django.db import models
from oscar.apps.order.signals import order_placed
from oscar.apps.checkout.signals import post_checkout
from oscar.apps.order.abstract_models import AbstractOrder, AbstractLine
from printables.prints.models import Print
from oscar.apps.order.models import *

class Order(AbstractOrder):

    def test(self):
        pass
```

Any ideas on what might be causing this? Thanks much in advance!

-jay
"
11796,django-oscar,django-oscar,19,closed,1267,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1267/comments,https://github.com/django-oscar/django-oscar/issues/1267,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Deleting line in basket.AbstractLine.save() breaks with m2m fields,"The [code in question](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/basket/abstract_models.py#L601-605) looks like this:

``` python
        if self.quantity == 0:
            # 'using' is the only kwarg that save() and delete() share
            if 'using' in kwargs:
                return self.delete(using=kwargs['using'])
            return self.delete()
```

`instance.save()` is always assumed to result in its primary key being set but the above code breaks that promise. Django's own form handling code does the following:

``` python
def save_instance(form, instance, fields=None, fail_message='saved',
                  commit=True, exclude=None, construct=True):
    # ...
    if commit:
        # If we are committing, save the instance and the m2m data immediately.
        instance.save()
        save_m2m()
    else:
        # ...
    return instance
```

`save_m2m` is called on an instance that does not have a primary key and if your basket line happens to have a many-to-many relation (like ours has), you get the following (rather misleading) exception:

```
ValueError: ""<Line: ...>"" needs to have a value for field ""line"" before this many-to-many relationship can be used
```
"
11800,django-oscar,django-oscar,19,closed,1263,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1263/comments,https://github.com/django-oscar/django-oscar/issues/1263,[],Broken CommunicationEventType code creation after migration to AutoSlugField,"I saw [discussion](https://github.com/tangentlabs/django-oscar/commit/0a9e6d1e53449cf071241fd923f9fea7204ce204#commitcomment-5704798) about this bug, but doesn't find related issue.

After migration to AutoSlugField we have difference between letter case of codes of communication event types. Django's SlugField hasn't any conversions to lower letters, but AutoSlugField have. So if communication event type was created in Django admin with code like ""DELIVERED"", it will have a slug ""delivered"" (exactly, lowercase). But UpdateView in `dashboard/communication/views.py` try to get communication event type with uppercase code ([here](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/dashboard/communications/views.py#L32)):

``` python
def get_object(self, **kwargs):
        return get_object_or_404(self.model,
                                 code=self.kwargs['code'].upper())
```

And after fail on it throw 404.
"
11818,django-oscar,django-oscar,19,closed,1245,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1245/comments,https://github.com/django-oscar/django-oscar/issues/1245,[],Fresh install  is broken if there is an apphook,"``` Bash
$ python manage.py syncdb
Traceback (most recent call last):
  File ""manage.py"", line 12, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 272, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 75, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/management/commands/cms.py"", line 9, in <module>
    from cms.management.commands.subcommands.copy_lang import CopyLangCommand
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/management/commands/subcommands/copy_lang.py"", line 6, in <module>
    from cms.api import copy_plugins_to_language
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/api.py"", line 17, in <module>
    from cms.admin.forms import save_permissions
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/admin/__init__.py"", line 2, in <module>
    import cms.admin.pageadmin
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/admin/pageadmin.py"", line 35, in <module>
    from cms.admin.forms import (PageForm, AdvancedSettingsForm, PagePermissionForm,
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/admin/forms.py"", line 5, in <module>
    from cms.compat_forms import UserCreationForm
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/compat_forms.py"", line 41, in <module>
    from django.contrib.auth.admin import UserAdmin  # nopyflakes
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/contrib/auth/admin.py"", line 182, in <module>
    admin.site.register(Group, GroupAdmin)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/contrib/admin/sites.py"", line 92, in register
    admin_class.validate(model)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/contrib/admin/options.py"", line 105, in validate
    validator = cls.validator_class()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/contrib/admin/validation.py"", line 20, in __init__
    models.get_apps()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 139, in get_apps
    self._populate()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 78, in _populate
    self.load_app(app_name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/debug_toolbar/models.py"", line 63, in <module>
    patch_root_urlconf()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/debug_toolbar/models.py"", line 51, in patch_root_urlconf
    reverse('djdt:render_panel')
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 480, in reverse
    app_list = resolver.app_dict[ns]
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 310, in app_dict
    self._populate()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 262, in _populate
    for pattern in reversed(self.url_patterns):
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 346, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 341, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/marco/workspace/penta/pentaonline/pentaonline/pentaonline/urls.py"", line 27, in <module>
    url(r'^', include('cms.urls')),
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 26, in include
    urlconf_module = import_module(urlconf_module)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/urls.py"", line 23, in <module>
    urlpatterns = get_app_patterns() + urlpatterns
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/cms/appresolver.py"", line 189, in get_app_patterns
    current_site = Site.objects.get_current()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/contrib/sites/models.py"", line 47, in get_current
    current_site = self.get(pk=sid)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/manager.py"", line 151, in get
    return self.get_queryset().get(*args, **kwargs)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/query.py"", line 301, in get
    num = len(clone)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/query.py"", line 77, in __len__
    self._fetch_all()
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/query.py"", line 854, in _fetch_all
    self._result_cache = list(self.iterator())
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/query.py"", line 220, in iterator
    for row in compiler.results_iter():
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 709, in results_iter
    for rows in self.execute_sql(MULTI):
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 782, in execute_sql
    cursor.execute(sql, params)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/backends/util.py"", line 69, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/backends/util.py"", line 53, in execute
    return self.cursor.execute(sql, params)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/utils.py"", line 99, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/marco/.virtualenvs/test/local/lib/python2.7/site-packages/django/db/backends/util.py"", line 53, in execute
    return self.cursor.execute(sql, params)
django.db.utils.ProgrammingError: ERRORE:  la relazione ""django_site"" non esiste
LINE 1: ...""django_site"".""domain"", ""django_site"".""name"" FROM ""django_si...
```

This code is executed if there is an apphook:

``` Python
if apphook_pool.get_apphooks():
    """"""If there are some application urls, add special resolver, so we will
    have standard reverse support.
    """"""
    from cms.appresolver import get_app_patterns
    urlpatterns = get_app_patterns() + urlpatterns

urlpatterns = patterns('', *urlpatterns)
```

Then we reach `Site.objects.get_current()`.

So it's impossible to run syncdb/migrate
"
11833,django-oscar,django-oscar,19,closed,1226,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1226/comments,https://github.com/django-oscar/django-oscar/issues/1226,[],Fresh install of oscar fails in Err 500 ,"Hi,

I did the manual install of django-oscar today and I got to the point of getting into the django /admin/ interface, however, when i just go ""/"" - i get this : 
# Error

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.6.2
Python Version: 2.6.6
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.flatpages',
 'django.contrib.admin',
 'south',
 'compressor',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail']
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')

Template error:
In template #removed#/oscar/lib/python2.6/site-packages/oscar/templates/oscar/partials/mini_basket.html, error at line 10
   (Could not get exception message)
# Error Line

   10 :          {{ request.basket.total_excl_tax|currency:request.basket.currency }} 
# Trace

File ""#removed#/oscar/lib/python2.6/site-packages/django/template/debug.py"" in render
1.             output = self.filter_expression.resolve(context)
   File ""#removed#/oscar/lib/python2.6/site-packages/django/template/base.py"" in resolve
2.                     arg_vals.append(arg.resolve(context))
   File ""#removed#/oscar/lib/python2.6/site-packages/django/template/base.py"" in resolve
3.             value = self._resolve_lookup(context)
   File ""#removed#/oscar/lib/python2.6/site-packages/django/template/base.py"" in _resolve_lookup
4.                                                        (bit, current))  # missing attribute

Exception Type: VariableDoesNotExist at /
Exception Value: Failed lookup for key [basket] in u""<WSGIRequest\npath:/,\nGET:<QueryDict: {}>,\nPOST:<QueryDict: {}>,\nCOOKIES:{'csrftoken': 'rI07EEFoy5u6Z4O1yS8l1mr4duBuJA1Q',\n 'org.cups.sid': '6fabde3497ea232a1b3daea3dfd9089d',\n 'sessionid': 
"
11847,django-oscar,django-oscar,19,closed,1212,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1212/comments,https://github.com/django-oscar/django-oscar/issues/1212,[],Haystack simple_backend.py throws AttributeError at /search/,"It looks like the Haystack simple_backend.py is broken?

With a fresh checkout of master, just changing the sandbox to use haystack.backends.simple_backend.SimpleEngine :

```
git diff --no-prefix
diff --git sites/sandbox/settings.py sites/sandbox/settings.py
index 574b86c..665ba9c 100644
--- sites/sandbox/settings.py
+++ sites/sandbox/settings.py
@@ -324,8 +324,7 @@ APPEND_SLASH = True
 # Haystack settings
 HAYSTACK_CONNECTIONS = {
     'default': {
-        'ENGINE': 'haystack.backends.whoosh_backend.WhooshEngine',
-        'PATH': os.path.join(os.path.dirname(__file__), 'whoosh_index'),
+        'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
     },
 }
```

Then search (eg http://127.0.0.1:8000/search/?q=handbook ), and you get this exception:

```
AttributeError at /search/
'Options' object has no attribute '_fields'
Request Method: GET
Request URL:    http://127.0.0.1:8000/search/?q=handbook
Django Version: 1.6.2
Exception Type: AttributeError
Exception Value:    
'Options' object has no attribute '_fields'
Exception Location: /home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_haystack-2.1.0-py2.7.egg/haystack/backends/simple_backend.py in search, line 67
Python Executable:  /home/johnc/.virtualenvs/oscarbox/bin/python
Python Version: 2.7.3
Python Path:    
['/home/johnc/workspace/oscarbox/sites/sandbox',
 '/home/johnc/workspace/oscarbox',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/phonenumbers-5.9.2-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/Unidecode-0.04.14-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_compressor-1.3-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/Babel-1.3-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_treebeard-2.0b2-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_haystack-2.1.0-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_extra_views-0.6.4-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/South-0.8.4-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/Pillow-2.2.2-py2.7-linux-x86_64.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/django_appconf-0.6-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages/pytz-2013.9-py2.7.egg',
 '/home/johnc/.virtualenvs/oscarbox/lib/python2.7',
 '/home/johnc/.virtualenvs/oscarbox/lib/python2.7/plat-linux2',
 '/home/johnc/.virtualenvs/oscarbox/lib/python2.7/lib-tk',
 '/home/johnc/.virtualenvs/oscarbox/lib/python2.7/lib-old',
 '/home/johnc/.virtualenvs/oscarbox/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/johnc/.virtualenvs/oscarbox/local/lib/python2.7/site-packages']
Server time:    Thu, 20 Feb 2014 05:28:10 +0000
```
"
11854,django-oscar,django-oscar,19,closed,1205,41,https://api.github.com/repos/django-oscar/django-oscar/issues/1205/comments,https://github.com/django-oscar/django-oscar/issues/1205,[],get_model cannot load catalogue.Product,"For this code:

``` python
from oscar.core.loading import get_model
get_model('catalogue', 'Product')
```

I get the following traceback

``` python
Traceback (most recent call last):
  File ""trigger_bug.py"", line 2, in <module>
    get_model('catalogue', 'Product')
  File ""/home/markus/src/django-oscar/oscar/core/loading.py"", line 189, in get_model
    model = django_get_model(app_label, model_name, *args, **kwargs)
  File ""/home/markus/src/django/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/home/markus/src/django/django/db/models/loading.py"", line 78, in _populate
    self.load_app(app_name)
  File ""/home/markus/src/django/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/markus/src/django/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/markus/src/django-oscar/oscar/apps/customer/models.py"", line 20, in <module>
    from oscar.apps.customer.history import *  # noqa
  File ""/home/markus/src/django-oscar/oscar/apps/customer/history.py"", line 9, in <module>
    Product = get_model('catalogue', 'Product')
  File ""/home/markus/src/django-oscar/oscar/core/loading.py"", line 193, in get_model
    app_label=app_label, model_name=model_name))
ImportError: catalogue.Product could not be imported.
```

For a very simple oscar project that has been set up as follows:

``` bash
$ django-admin.py startproject thebug
$ cd thebug
$ mkdir -p apps/dashboard/catalogue
$ touch apps{,/dashboard{,/catalogue}}/__init__.py
$ cat >> thebug/settings.py
from oscar import get_core_apps

INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.flatpages',
    'south',
    'compressor',
] + get_core_apps(['apps.dashboard.catalogue'])

SITE_ID = 1

STATIC_ROOT = 'static'

HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
    },
}

from oscar.defaults import *  # noqa
^D
$ export DJANGO_SETTINGS_MODULE=thebug.settings
$ cat > trigger_bug.py
from oscar.core.loading import get_model
get_model('catalogue', 'Product')
^D
$ python ./trigger_bug.py
```
"
11859,django-oscar,django-oscar,19,closed,1200,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1200/comments,https://github.com/django-oscar/django-oscar/pull/1200,[],add_metaclass breaks Django 1.6 compatibilty,"Commit 0bdf1d3105d41276cea4b2ff65a60d988a620d88 adds `add_metaclass` that is not available for Django 1.6:

```
# Create database
sites/sandbox/manage.py syncdb --noinput
Traceback (most recent call last):
  File ""sites/sandbox/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 284, in execute
    self.validate()
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 310, in validate
    num_errors = get_validation_errors(s, app)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/management/validation.py"", line 34, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 196, in get_app_errors
    self._populate()
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 78, in _populate
    self.load_app(app_name)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/imatusov/workspace/oscar/oscar/apps/address/models.py"", line 1, in <module>
    from oscar.apps.address.abstract_models import (
  File ""/home/imatusov/workspace/oscar/oscar/apps/address/abstract_models.py"", line 9, in <module>
    from oscar.models.fields import UppercaseCharField, PhoneNumberField
  File ""/home/imatusov/workspace/oscar/oscar/models/fields.py"", line 1, in <module>
    from six import add_metaclass
ImportError: cannot import name add_metaclass
make: *** [sandbox] Error 1
(oscar)[2] 10:08 oscar > pip freeze | grep Django
Django==1.6.1
```
"
11866,django-oscar,django-oscar,19,closed,1191,6,https://api.github.com/repos/django-oscar/django-oscar/issues/1191/comments,https://github.com/django-oscar/django-oscar/pull/1191,[],[bug] bootstrap CSS older than bootstrap LESS,"In 7580a3592208 the bootstrap LESS files were updated to bootstrap 2.3.1. However, in https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/dashboard/layout.html?source=cc#L11 a minified bootstrap css is used that wasn't updated in 7580a3592208.

I'm thinking that the intention was for bootstrap 2.3.1 CSS to be used.

I also fixed a bug in the table striping in oscar's CSS. The old bootstrap CSS had the same bug. The bug occurs with nested tables. If the outer table is striped, the inner table's rows will all have the darker background, because they are in an odd row of the outer table. The fix is to restrict the background rule to direct descendants of the odd/even row.
"
11874,django-oscar,django-oscar,19,closed,1183,3,https://api.github.com/repos/django-oscar/django-oscar/issues/1183/comments,https://github.com/django-oscar/django-oscar/issues/1183,[],Overriding dashboard.catalogue makes get_model return None in some places,"After overriding dashboard.catalogue with a local app, I get the error `'NoneType' object has no attribute 'browsable'` (which is caused by [this line](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/customer/history.py#L20) from apps.customer.history) when rendering any template that makes use of the tag `{% recently_viewed_products %}`. To reproduce this error, you can use a fresh sandbox project, `make sandbox` and then create the local dashboard.catalogue and add it to installed apps (the app.py file doesn't even need to exist). That's all, runserver and then view the details for any product. I'm using python 2.7.6, django 1.6.1, and the issue is present in django-oscar 0.6, 0.6.2 and the latest 0.7dev (master) as at the time of writing this.
"
11884,django-oscar,django-oscar,20,closed,1173,9,https://api.github.com/repos/django-oscar/django-oscar/issues/1173/comments,https://github.com/django-oscar/django-oscar/pull/1173,"[{""default"": false, ""name"": ""\u273f Front-end"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%BF%20Front-end"", ""color"": ""F1E5A5"", ""node_id"": ""MDU6TGFiZWwxNjMwNzc2OQ=="", ""id"": 16307769}]",Move the dashboard tables to django-tables2,"Before you merge this I'd port over the other tables as well. This is primarily for review. A few things:
- Getting the sorting icon into the header is a little bit hacky, with an `<i class=""icon-"">` to trigger the necessary CSS rules for FontAwesome. Also the unicode character value for the chevrons up and down had to be copied. If FontAwesome had less mixins we could use that.
- Sorting and tab are kept when the title link is used (this was a bug in the original product list)
- You can sort by UPC, Product class, status or parent as well

Other than that I'm impressed with the `django-tables2` source code. The repository doesn't look very active, but the code is very high quality from what I've seen today.

Let's see what travis says :)

Advantages to the current approach to tables:
- If customizers want to remove or add columns dynamically in the code, they don't have to do that in two places (table header and table data in the template), but just in one.
- Higher level of expressiveness. Compare what you'd have to do to add another sortable column to the recently_edited tab. The header would have to duplicate the same `if` check as for title.
- Easier customizable: If you want to add or remove columns, you have to copy the whole table template even if you don't change most of the columns.
"
11888,django-oscar,django-oscar,20,closed,1169,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1169/comments,https://github.com/django-oscar/django-oscar/pull/1169,[],Fix JSON serialization in ObjectLookupView.,"Related products search field in dashboard (create product page) failed with following error:

```
Avoid TypeError: <itertools.imap object …> is not JSON serializable
```

(used master branch of django-oscar)
"
11890,django-oscar,django-oscar,20,closed,1167,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1167/comments,https://github.com/django-oscar/django-oscar/issues/1167,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}, {""default"": false, ""name"": ""\u2691 High priority"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9A%91%20High%20priority"", ""color"": ""e11d21"", ""node_id"": ""MDU6TGFiZWw3MTIwNDg1MA=="", ""id"": 71204850}]",Not able to create a new offer,"Steps to reproduce:
1. Run clean sandbox
2. Try to create a new offer

When submitting the new incentive, traceback is raised:

```
Environment:


Request Method: POST
Request URL: http://oscar:7070/dashboard/offers/new/incentive/

Django Version: 1.6.1
Python Version: 2.7.4
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.flatpages',
 'django.contrib.staticfiles',
 'django_extensions',
 'debug_toolbar',
 'template_timings_panel',
 'south',
 'rosetta',
 'compressor',
 'apps.gateway',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.checkout',
 'oscar.apps.address',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.partner',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.order',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.wishlists',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.partners',
 'oscar.apps.dashboard.pages',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.reviews',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail']
Installed Middleware:
(u'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.transaction.TransactionMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')


Traceback:
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/db/transaction.py"" in inner
  339.                 return func(*args, **kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  22.                 return view_func(request, *args, **kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/home/imatusov/workspace/oscar/oscar/apps/dashboard/offers/views.py"" in dispatch
  95.                                                          **kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  87.         return handler(request, *args, **kwargs)
File ""/home/imatusov/.virtualenvs/oscar/local/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  171.             return self.form_valid(form)
File ""/home/imatusov/workspace/oscar/oscar/apps/dashboard/offers/views.py"" in form_valid
  213.         self._store_form_kwargs(form)
File ""/home/imatusov/workspace/oscar/oscar/apps/dashboard/offers/views.py"" in _store_form_kwargs
  116.             form_data['range_id'] = form_data['range'].id

Exception Type: AttributeError at /dashboard/offers/new/incentive/
Exception Value: 'NoneType' object has no attribute 'id'
```
"
11897,django-oscar,django-oscar,20,closed,1160,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1160/comments,https://github.com/django-oscar/django-oscar/issues/1160,[],"[BUG, minor] _pluck_classes breaks when used with non-oscar module","`get_classes` allows `imported_oscar_module` to be `None`. `imported_oscar_module` ends up in `modules` in `_pluck_classes`, however the code is not prepared to handle `None` at that place.

Fix:

``` python
--- a/oscar/core/loading.py
+++ b/oscar/core/loading.py
@@ -135,7 +135,7 @@ def _pluck_classes(modules, classnames):
                 klass = getattr(module, classname)
                 break
         if not klass:
-            packages = [m.__name__ for m in modules]
+            packages = [m.__name__ for m in modules if m]
             raise ClassNotFoundError(""No class '%s' found in %s"" % (
                 classname, "", "".join(packages)))
         klasses.append(klass)
```

Without that patch, the error message is

```
  File ""/home/markus/src/django-oscar/oscar/core/loading.py"", line 138, in _pluck_classes
    packages = [m.__name__ for m in modules]
AttributeError: 'NoneType' object has no attribute '__name__'
```

With it, it's the more helpful

```
  File ""/home/markus/src/django-oscar/oscar/core/loading.py"", line 140, in _pluck_classes
    classname, "", "".join(packages)))
ClassNotFoundError: No class 'Employee' found in apps.company
```
"
11908,django-oscar,django-oscar,20,closed,1146,0,https://api.github.com/repos/django-oscar/django-oscar/issues/1146/comments,https://github.com/django-oscar/django-oscar/issues/1146,[],All templates should be aware that a product can be deleted.,"A user will get a 500 error on the order history page if I delete a product connected to his existing order.

_is_review_permitted_ doesn't handle `None`

https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/customer/order/order_detail.html#L33

`{% if  line.product and line.product|is_review_permitted:user %}` should fix it

Also the line related to a deleted product should be text [not a link](https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/customer/order/order_detail.html#L31).

The other product related templates should be checked (reviews, wishlist, dashboard... ?).
"
11918,django-oscar,django-oscar,20,closed,1134,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1134/comments,https://github.com/django-oscar/django-oscar/issues/1134,[],Unable to add non-ascii € character to a child product tittle,"UnicodeEncodeError at /catalogue/top-up_11/
'ascii' codec can't encode character u'\u20ac' in position 11: ordinal not in range(128)

Exception Type: UnicodeEncodeError
Exception Value:  
'ascii' codec can't encode character u'\u20ac' in position 11: ordinal not in range(128)
Exception Location: /usr/local/lib/python2.6/dist-packages/django/utils/html.py in format_html, line 82

Unicode error hint
The string that could not be encoded/decoded was: - 5 €

Error during template rendering
In template /usr/local/lib/python2.6/dist-packages/oscar/templates/oscar/partials/form_field.html, error at line 15
ascii
"
11921,django-oscar,django-oscar,20,closed,1131,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1131/comments,https://github.com/django-oscar/django-oscar/issues/1131,"[{""default"": false, ""name"": ""\u273f Front-end"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%BF%20Front-end"", ""color"": ""F1E5A5"", ""node_id"": ""MDU6TGFiZWwxNjMwNzc2OQ=="", ""id"": 16307769}]",Number form fields continue to increase in Chrome,"I have a very strange bug on my machine where quantity fields (verified both for adding products and in wishlists) keep increasing when the up-trigger is clicked. This happens both with Oscar's JQuery 1.9.2 and the latest release of the 1.x series, 1.10.2. It does happen when browsing using `localhost`, but _not_ when using my machine's IP.

There's no events attached to the input apart from jQuery ones. I attached a debugger and it seems to end in jQuery code, but my JS debugging skills are weak.

It's with Django 1.6, and a sandbox build of https://github.com/tangentlabs/django-oscar/commit/fc7a4d76f6bb03ee42bd1f297da6ddd508661c96, freshly restarted Chrome version 31.0.1650.63 with all extensions disabled.

![out](https://f.cloud.github.com/assets/509427/1911367/46f09028-7d2b-11e3-8c74-06567023bfcd.gif)
"
11925,django-oscar,django-oscar,20,closed,1127,20,https://api.github.com/repos/django-oscar/django-oscar/issues/1127/comments,https://github.com/django-oscar/django-oscar/pull/1127,[],Can't extend AbstractUser within customised customer app,"According to Django [documentation](https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#custom-users-and-signals) we cant' use `get_user_model` in [this](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/customer/alerts/receivers.py#L9) context.

Related Django bug - https://code.djangoproject.com/ticket/19218.

I'm still thinking it's a bug in Django, but it's always easier to document the limitations. :)
"
11926,django-oscar,django-oscar,20,closed,1126,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1126/comments,https://github.com/django-oscar/django-oscar/pull/1126,[],IOError at /dashboard/catalogue/products/create,"Django oscar 0.6 installed via pip

The error indicated below occurs when a variant product is created (pointing to a parent product) with product category selected and at least one image selected.

The bug does not occur when no category is selected.  Also if no image is selected and a product category is selected,  a correct warning is given that no category should be selected for creating variant product.

IOError at /dashboard/catalogue/products/create/1/

[Errno 2] No such file or directory: u'/home/administrator/git/winkel/media/P1040923.JPG'

Request Method:     POST
Request URL:    http://local.winkel.com/dashboard/catalogue/products/create/1/
Django Version:     1.6.1
Exception Type:     IOError
Exception Value:    

[Errno 2] No such file or directory: u'/home/administrator/git/winkel/media/P1040923.JPG'
"
11927,django-oscar,django-oscar,20,closed,1125,19,https://api.github.com/repos/django-oscar/django-oscar/issues/1125/comments,https://github.com/django-oscar/django-oscar/issues/1125,[],AttributeError: 'NoneType' object has no attribute 'STATUS_CHOICES',"Using  0.6 version this is happening to me.
I had to use 0.5.1 version, and the error disappeared.

``` bash
(test-oscar)user@foo:~/code/test-ecommerce/test$ ./manage.py syncdb --noinput --settings test.settings.local
/home/user/venv/test-oscar/local/lib/python2.7/site-packages/sorl/thumbnail/helpers.py:5: DeprecationWarning: django.utils.simplejson is deprecated; use json instead.
  from django.utils import simplejson

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 284, in execute
    self.validate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/base.py"", line 310, in validate
    num_errors = get_validation_errors(s, app)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/management/validation.py"", line 34, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 196, in get_app_errors
    self._populate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/catalogue/models.py"", line 66, in <module>
    from .receivers import *  # noqa
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/catalogue/receivers.py"", line 10, in <module>
    ProductImage = get_model('catalogue', 'ProductImage')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/customer/models.py"", line 20, in <module>
    from oscar.apps.customer.history import *  # noqa
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/customer/history.py"", line 9, in <module>
    Product = get_model('catalogue', 'Product')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/ranges/models.py"", line 8, in <module>
    Product = models.get_model('catalogue', 'Product')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 271, in get_model
    self._populate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
    self.load_app(app_name, True)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
    models = import_module('%s.models' % app_name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/debug_toolbar/models.py"", line 63, in <module>
    patch_root_urlconf()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/debug_toolbar/models.py"", line 51, in patch_root_urlconf
    reverse('djdt:render_panel')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 480, in reverse
    app_list = resolver.app_dict[ns]
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 310, in app_dict
    self._populate()
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 262, in _populate
    for pattern in reversed(self.url_patterns):
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 346, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 341, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
    __import__(name)
  File ""/home/user/code/test-ecommerce/test/test/urls.py"", line 2, in <module>
    from oscar.app import application
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/app.py"", line 11, in <module>
    class Shop(Application):
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/app.py"", line 20, in Shop
    dashboard_app = get_class('dashboard.app', 'application')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/core/loading.py"", line 32, in get_class
    return get_classes(module_label, [classname])[0]
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/core/loading.py"", line 85, in get_classes
    imported_module = __import__(module_path, fromlist=classnames)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/app.py"", line 8, in <module>
    class DashboardApplication(Application):
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/app.py"", line 17, in DashboardApplication
    users_app = get_class('dashboard.users.app', 'application')
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/core/loading.py"", line 32, in get_class
    return get_classes(module_label, [classname])[0]
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/core/loading.py"", line 85, in get_classes
    imported_module = __import__(module_path, fromlist=classnames)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/users/app.py"", line 4, in <module>
    from oscar.apps.dashboard.users import views
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/users/views.py"", line 17, in <module>
    'ProductAlertUpdateForm'))
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/core/loading.py"", line 85, in get_classes
    imported_module = __import__(module_path, fromlist=classnames)
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/users/forms.py"", line 32, in <module>
    class ProductAlertSearchForm(forms.Form):
  File ""/home/user/venv/test-oscar/local/lib/python2.7/site-packages/oscar/apps/dashboard/users/forms.py"", line 35, in ProductAlertSearchForm
    ) + ProductAlert.STATUS_CHOICES
AttributeError: 'NoneType' object has no attribute 'STATUS_CHOICES'
```
"
11947,django-oscar,django-oscar,20,closed,1102,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1102/comments,https://github.com/django-oscar/django-oscar/pull/1102,[],Update requirements.txt,"0.5.4 of django-debug-toolbar-template-timings is the last version to support DJDT<1.0 so I've modified requirements.txt to use that version. If you do modify django-oscar to support DJDT>=1.0 then just remove this :)
"
11957,django-oscar,django-oscar,20,closed,1092,1,https://api.github.com/repos/django-oscar/django-oscar/issues/1092/comments,https://github.com/django-oscar/django-oscar/issues/1092,[],URLField enforces external URL on Django 1.6,"As reported on [mailing list](https://groups.google.com/forum/#!msg/django-oscar/6-HIZoK9RSw/hLt_F3PcguUJ).

> I am using Oscar from master branch with Django-1.6. And I have two issues with creating of urls for Content Blocks:
> 
>    HTML5 url input requires external url.
>    URLField validation requires external url too.
> 
> As the result, I can't assign Content Block to any page.
> 
> Is this a bug or I am doing something wrong?
"
11964,django-oscar,django-oscar,20,closed,1084,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1084/comments,https://github.com/django-oscar/django-oscar/issues/1084,[],Compatibility issue : Trying oscar with Django 1.6 ,"While setting up django-oscar with exisiting Django 1.6 project I got this error :+1: 
"""""" 
 File ""/home/pradeep/python/wonderlao/venv/local/lib/python2.7/site-packages/oscar/apps/offer/models.py"", line 17, in <module>
    from oscar.models.fields import PositiveDecimalField, ExtendedURLField
  File ""/home/pradeep/python/wonderlao/venv/local/lib/python2.7/site-packages/oscar/models/fields.py"", line 5, in <module>
    from oscar.forms import fields
  File ""/home/pradeep/python/wonderlao/venv/local/lib/python2.7/site-packages/oscar/forms/fields.py"", line 2, in <module>
    from django.core.validators import URL_VALIDATOR_USER_AGENT
""""""
Please help , what options do I have to use Oscar ?  Do I have to migrate to Django1.4 or there is any patch where I can keep using Django1.6.
By the way I am planning to deploy the application to Heroku cedar.
Please help !!
Thanks
"
11980,django-oscar,django-oscar,21,closed,1067,4,https://api.github.com/repos/django-oscar/django-oscar/issues/1067/comments,https://github.com/django-oscar/django-oscar/issues/1067,"[{""default"": false, ""name"": ""\u270d For review"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%8D%20For%20review"", ""color"": ""009800"", ""node_id"": ""MDU6TGFiZWwxOTUwOTMwNg=="", ""id"": 19509306}]",PhoneNumberField breaks customer address registration,"On page /checkout/shipping-address/: 
- PhoneNumber cause TypeError on json encoding for saving the address in session:

```
ERROR:django.request:Internal Server Error: /checkout/shipping-address/
Traceback (most recent call last):
  File ""/home/gleber/.virtualenvs/ecommerce/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in get_response
    response = middleware_method(request, response)
  File ""/home/gleber/.virtualenvs/ecommerce/local/lib/python2.7/site-packages/django/contrib/sessions/middleware.py"", line 38, in process_response
    request.session.save()
  File ""/home/gleber/.virtualenvs/ecommerce/local/lib/python2.7/site-packages/django/contrib/sessions/backends/db.py"", line 51, in save
    session_data=self.encode(self._get_session(no_load=must_create)),
  File ""/home/gleber/.virtualenvs/ecommerce/local/lib/python2.7/site-packages/django/contrib/sessions/backends/base.py"", line 84, in encode
    serialized = self.serializer().dumps(session_dict)
  File ""/home/gleber/.virtualenvs/ecommerce/local/lib/python2.7/site-packages/django/core/signing.py"", line 100, in dumps
    return json.dumps(obj, separators=(',', ':')).encode('latin-1')
  File ""/usr/lib/python2.7/json/__init__.py"", line 250, in dumps
    sort_keys=sort_keys, **kw).encode(obj)
  File ""/usr/lib/python2.7/json/encoder.py"", line 207, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File ""/usr/lib/python2.7/json/encoder.py"", line 270, in iterencode
    return _iterencode(o, 0)
  File ""/usr/lib/python2.7/json/encoder.py"", line 184, in default
    raise TypeError(repr(o) + "" is not JSON serializable"")
TypeError: PhoneNumber(country_code=55, national_number=1193203290L, extension=None, italian_leading_zero=False, country_code_source=1, preferred_domestic_carrier_code=None) is not JSON serializable
```
"
11997,django-oscar,django-oscar,21,closed,1050,2,https://api.github.com/repos/django-oscar/django-oscar/issues/1050/comments,https://github.com/django-oscar/django-oscar/pull/1050,[],Strings not available for translation.,"- Postcode error message [here](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/address/abstract_models.py#L271). The underscore is missing.
- trans tag missing in the review template: https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/catalogue/partials/review.html#L59
"
12044,django-oscar,django-oscar,21,closed,999,2,https://api.github.com/repos/django-oscar/django-oscar/issues/999/comments,https://github.com/django-oscar/django-oscar/issues/999,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Checkout broken if all products don't require shipping,"From the [mailing list](https://groups.google.com/d/msgid/django-oscar/93d7e852-0d0d-4175-91f8-671d8a451df0%40googlegroups.com)

Reproduce as follows:
1. Use oscar master as of now (196cb5cc6156c7cf42d569eb08ea1ee92baf28cd)
2. merge fix/shipping_method_failure (#956)
3. syncdb and migrate sandbox
4. in the django admin, create a product class with requires_shipping=False
5. in the dashboard, create a partner, a category, then a product with a stock record for the product
6. try to buy the product

Result: at /checkout/payment-details/ AttributeError at /checkout/payment-details/
'NoneType' object has no attribute 'charge_excl_tax' is raised:

File ""/home/markus/src/django-oscar/oscar/apps/checkout/views.py"" in get_context_data
1.         ctx = self.build_submission(**kwargs)
   File ""/home/markus/src/django-oscar/oscar/apps/checkout/views.py"" in build_submission
2.             basket, shipping_method=shipping_method)
   File ""/home/markus/src/django-oscar/oscar/apps/checkout/session.py"" in get_order_totals
3.             basket, shipping_method, **kwargs)
   File ""/home/markus/src/django-oscar/oscar/apps/checkout/calculators.py"" in calculate
4.         excl_tax = basket.total_excl_tax + shipping_method.charge_excl_tax

The reason is that the PaymentDetailsView relies on CheckoutSessionMixin to retrieve the shipping_method, which in turn uses Repository.get_shipping_methods. This method, unlike Repository.find_by_code, does not include a special case to return NoShippingRequired. As a result, the shipping_method is None.

If oscar decides to support the use case of ""all product classes have requires_shipping=False"" without requiring to override the Repository class, then this is a bug.

I tried to find out why NoShippingRequired was added as a special case to find_by_code, but I couldn't find anything in the file's history. So, my approach would be to just add NoShippingRequired as an available shipping method to the default Repository and remove the special case in find_by_code. If I do that, a lot of tests fail, so before I adapt the tests I'd like to know what others think about the approach.
"
12055,django-oscar,django-oscar,21,closed,988,4,https://api.github.com/repos/django-oscar/django-oscar/issues/988/comments,https://github.com/django-oscar/django-oscar/issues/988,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}, {""default"": false, ""name"": ""\u2708 Low-hanging fruit"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%88%20Low-hanging%20fruit"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw1NjEwMDgxMA=="", ""id"": 56100810}]",Creating a payment event gives a 500 error page in the dashboard,"Where: 
in the dashboard order page inside the 'With selected lines' form

If a payment event with the given quantity is not permitted and we try to create a payment event we get a 500 error page.
This error should handled more more gracefully.

Here the full traceback:

```
Traceback:
File ""/home/marco/.virtualenvs/PCSHOP/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  115.                         response = callback(request, *callback_args, **callback_kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  25.                 return view_func(request, *args, **kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/lib/python2.7/site-packages/django/contrib/auth/decorators.py"" in _wrapped_view
  25.                 return view_func(request, *args, **kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  86.         return handler(request, *args, **kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/src/oscar/oscar/apps/dashboard/orders/views.py"" in post
  413.                 return getattr(self, line_action)(request, order, lines, line_quantities)
File ""/home/marco/.virtualenvs/PCSHOP/src/oscar/oscar/apps/dashboard/orders/views.py"" in create_payment_event
  564.                                           quantities)
File ""/home/marco/.virtualenvs/PCSHOP/src/oscar/oscar/apps/dashboard/orders/views.py"" in _create_payment_event
  541.                                                 lines, quantities)
File ""/home/marco/.virtualenvs/PCSHOP/src/oscar/oscar/apps/order/processing.py"" in handle_payment_event
  55.             order, event_type, amount, lines, line_quantities, **kwargs)
File ""/home/marco/.virtualenvs/PCSHOP/src/oscar/oscar/apps/order/processing.py"" in validate_payment_event
  100.             raise exceptions.InvalidPaymentEvent("", "".join(errors))

Exception Type: InvalidPaymentEvent at /dashboard/orders/100003/
Exception Value: The selected quantity for line #8 is too large, The selected quantity for line #7 is too large, The selected quantity for line #6 is too large
```
"
12057,django-oscar,django-oscar,21,closed,985,1,https://api.github.com/repos/django-oscar/django-oscar/issues/985/comments,https://github.com/django-oscar/django-oscar/issues/985,[],DB Table,"Hello,

I am new to Django Oscar, would like to ask couple questions. I used 1.4.9 django version and installed it and synced the db + migrate it + restarted the apache server.

I did it exactly by documentations and db was migrated successfully, not sure why it is missing...I installed django-oscar by pip

DatabaseError at /
no such table: promotions_pagepromotion

Screenshots:
https://www.dropbox.com/s/6knvbt2d08zdjpk/Screenshot%202013-11-13%2001.21.03.png

https://www.dropbox.com/s/bm6hvxeg9x7nl8y/Screenshot%202013-11-13%2001.21.39.png

Thanks
"
12063,django-oscar,django-oscar,21,closed,978,3,https://api.github.com/repos/django-oscar/django-oscar/issues/978/comments,https://github.com/django-oscar/django-oscar/issues/978,[],Data and schema migration in one migration in payment application causes DatabaseError,"Migrating data and schema in one migration: https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/payment/migrations/0002_auto__chg_field_source_reference__chg_field_source_label__chg_field_tr.py is a bad thing.

```
django.db.backends.postgresql_psycopg2.base in execute
DatabaseError: cannot ALTER TABLE ""payment_source"" because it has pending trigger events
```
"
12064,django-oscar,django-oscar,21,closed,977,4,https://api.github.com/repos/django-oscar/django-oscar/issues/977/comments,https://github.com/django-oscar/django-oscar/issues/977,[],Possible integrity error in offer migrations,"When trying to migrate one of our apps using oscar (to pre-0.6) we get an IntegrityError when executing migration:

```
  oscar/apps/offer/migrations/0020_auto__chg_field_benefit_type__chg_field_conditionaloffer_description.py 
```

on:

```
  db.alter_column('offer_conditionaloffer', 'description',   self.gf('django.db.models.fields.TextField')(default=''))
```

which gives:

```
  django.db.backends.postgresql_psycopg2.base in execute
  IntegrityError: column ""description"" contains null values
```

There was an old entry in that table (and we didn't override offers).
"
12081,django-oscar,django-oscar,22,closed,960,1,https://api.github.com/repos/django-oscar/django-oscar/issues/960/comments,https://github.com/django-oscar/django-oscar/pull/960,[],Travis: Migrations check fails & doesn't fail travis build,"There's two issues:

a) The test_migrations.sh script fails with a connection error. For example here: https://travis-ci.org/tangentlabs/django-oscar/jobs/13582285#L2421
b) The failing script does not cause travis to fail. That's likely an issue with return codes.
"
12082,django-oscar,django-oscar,22,closed,959,1,https://api.github.com/repos/django-oscar/django-oscar/issues/959/comments,https://github.com/django-oscar/django-oscar/issues/959,[],make demo failed : import error,"just cloned from repo. when i try to make demo, it always error.

here is stack trace from the console:

Traceback (most recent call last):
  File ""sites/demo/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 443, in execute_from_command_line
    utility.execute()
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/commands/test.py"", line 49, in run_from_argv
    super(Command, self).run_from_argv(argv)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/base.py"", line 196, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/base.py"", line 232, in execute
    output = self.handle(_args, *_options)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/south/management/commands/test.py"", line 8, in handle
    super(Command, self).handle(_args, *_kwargs)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/core/management/commands/test.py"", line 72, in handle
    failures = test_runner.run_tests(test_labels)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/test/simple.py"", line 380, in run_tests
    suite = self.build_suite(test_labels, extra_tests)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/test/simple.py"", line 266, in build_suite
    for app in get_apps():
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 126, in get_apps
    self._populate()
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 67, in _populate
    self.load_app(app_name)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 88, in load_app
    models = import_module('.models', app_name)
  File ""/home/hill/.virtualenvs/oscar_demo/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""/home/hill/Dev/py/django-oscar/sites/demo/apps/user/models.py"", line 2, in <module>
    from oscar.core import compat
ImportError: cannot import name compat
"
12091,django-oscar,django-oscar,22,closed,950,1,https://api.github.com/repos/django-oscar/django-oscar/issues/950/comments,https://github.com/django-oscar/django-oscar/issues/950,[],Error on save product: [Errno 61] Connection refused,"Hello!

Im a newbie to django-oscar, and I was following the getting started guide (http://django-oscar.readthedocs.org/en/latest/internals/getting_started.html) but I got stuck with an error when I tried to save a new product from the dashboard, product stock tab. The error goes:

```
error at /dashboard/catalogue/products/2/
[Errno 61] Connection refused
Request Method: POST
Request URL:    http://127.0.0.1:8000/dashboard/catalogue/products/2/
Django Version: 1.4.9
Exception Type: error
Exception Value:    
[Errno 61] Connection refused
Exception Location: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py in create_connection, line 571
Python Executable:  /Users/hpineda/oscar/bin/python
Python Version: 2.7.5
Python Path:    
...
Traceback:
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  111.                         response = callback(request, *callback_args, **callback_kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/views/decorators.py"" in _checklogin
  30.             return view_func(request, *args, **kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/views/decorators.py"" in _checklogin
  30.             return view_func(request, *args, **kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  48.             return self.dispatch(request, *args, **kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/views/generic/base.py"" in dispatch
  69.         return handler(request, *args, **kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  195.         return super(BaseUpdateView, self).post(request, *args, **kwargs)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/views/generic/edit.py"" in post
  138.             return self.form_valid(form)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/apps/dashboard/catalogue/views.py"" in form_valid
  179.         return self.process_all_forms(form)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/apps/dashboard/catalogue/views.py"" in process_all_forms
  214.                                     image_formset, recommended_formset)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/apps/dashboard/catalogue/views.py"" in forms_valid
  235.             stockrecord.save()
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/db/models/base.py"" in save
  463.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/db/models/base.py"" in save_base
  565.                 created=(not record_exists), raw=raw, using=using)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/dispatch/dispatcher.py"" in send
  172.             response = receiver(signal=self, sender=sender, **named)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/apps/customer/alerts/receivers.py"" in send_product_alerts
  12.     utils.send_product_alerts(instance.product)
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/oscar/apps/customer/alerts/utils.py"" in send_product_alerts
  99.     connection.open()
File ""/Users/hpineda/oscar/lib/python2.7/site-packages/django/core/mail/backends/smtp.py"" in open
  48.                                            local_hostname=DNS_NAME.get_fqdn())
File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in __init__
  250.             (code, msg) = self.connect(host, port)
File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in connect
  310.         self.sock = self._get_socket(host, port, self.timeout)
File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in _get_socket
  285.         return socket.create_connection((host, port), timeout)
File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py"" in create_connection
  571.         raise err

Exception Type: error at /dashboard/catalogue/products/2/
Exception Value: [Errno 61] Connection refused
```

Any idea what Im doing wrong?
"
12133,django-oscar,django-oscar,22,closed,908,2,https://api.github.com/repos/django-oscar/django-oscar/issues/908/comments,https://github.com/django-oscar/django-oscar/issues/908,[],Validation Error saving Products,"I'm pretty new in Django-Oscar, 
I see a problem validating my first product..
I created one ProductClass(mandatory for product creation) and 7 ProductCategory(i put a FK to one of it using the inlines on the left)
I see this screen but i don't see errors in the page!
![validation error](https://f.cloud.github.com/assets/2088831/1371873/c1e8eec6-3a44-11e3-8db2-bfd1f40c216b.png)
"
12134,django-oscar,django-oscar,22,closed,907,1,https://api.github.com/repos/django-oscar/django-oscar/issues/907/comments,https://github.com/django-oscar/django-oscar/issues/907,[],problem with wysihtml5  and Chrome,"I have problem with  wysihtml5
Chrome version : 30.0.1599.101
Django-Oscar version : (0, 6, 0, 'alpha', 0)
S.O. : Ubuntu 13.04

When I add a list in the editor and i go upward, i can't delete or access to the list item
no errors in console, and this problem not appears in the wysihtml5 example
(http://xing.github.io/wysihtml5/examples/simple.html)
This problem not appears with Firefox
![problemioscar](https://f.cloud.github.com/assets/2088831/1371802/f009825e-3a42-11e3-82b0-1624f7af8e54.png)
"
12137,django-oscar,django-oscar,22,closed,904,0,https://api.github.com/repos/django-oscar/django-oscar/issues/904/comments,https://github.com/django-oscar/django-oscar/pull/904,[],Use better exception for AUTH_USER_MODEL,"If AUTH_USER_MODEL is improperly configured as 'project.customer.User',
the error is:

`ValueError: too many values to unpack`

Use rather standard Django's error:

`ImproperlyConfigured: AUTH_USER_MODEL must be of the form 'app_label.model_name'`
"
12153,django-oscar,django-oscar,22,closed,887,4,https://api.github.com/repos/django-oscar/django-oscar/issues/887/comments,https://github.com/django-oscar/django-oscar/issues/887,[],"IOError ""decoder jpeg not available"" when accessing the product category","I am using Ubuntu 13.04 and installed the Django Oscar Commerce.

IOError at /catalogue/

decoder jpeg not available

Request Method:     GET
Request URL:    http://localhost:8000/catalogue/
Django Version:     1.5.4
Exception Type:     IOError
Exception Value:    

decoder jpeg not available

Exception Location:     /home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/Pillow-1.7.8-py2.7-linux-i686.egg/PIL/Image.py in _getdecoder, line 383
Python Executable:  /home/v512/Documents/django-oscar/oscar/bin/python
Python Version:     2.7.4
Python Path:    

['/home/v512/Documents/django-oscar/sites/sandbox',
 '/home/v512/Documents/django-oscar',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/Unidecode-0.04.14-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/django_compressor-1.3-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/Babel-0.9.6-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/python_memcached-1.51-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/django_treebeard-2.0b1-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/django_haystack-2.0.0_beta-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/django_extra_views-0.5.5-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/South-0.7.6-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/Pillow-1.7.8-py2.7-linux-i686.egg',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/django_appconf-0.6-py2.7.egg',
 '/home/v512/Documents/django-oscar/oscar/lib/python2.7',
 '/home/v512/Documents/django-oscar/oscar/lib/python2.7/plat-i386-linux-gnu',
 '/home/v512/Documents/django-oscar/oscar/lib/python2.7/lib-tk',
 '/home/v512/Documents/django-oscar/oscar/lib/python2.7/lib-old',
 '/home/v512/Documents/django-oscar/oscar/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-i386-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages']
"
12155,django-oscar,django-oscar,22,closed,885,2,https://api.github.com/repos/django-oscar/django-oscar/issues/885/comments,https://github.com/django-oscar/django-oscar/issues/885,[],greenlet.h:8:20: fatal error: Python.h: No such file or directory,"I am trying to install Django Oscar on Ubuntu 13.04. As per the documentation when I make sandbox its resulting a error.

In file included from greenlet.c:5:0:

greenlet.h:8:20: fatal error: Python.h: No such file or directory

compilation terminated.

error: command 'i686-linux-gnu-gcc' failed with exit status 1

---

Cleaning up...
Command /home/v512/Documents/django-oscar/oscar/bin/python -c ""import setuptools;**file**='/home/v512/Documents/django-oscar/oscar/build/greenlet/setup.py';exec(compile(open(**file**).read().replace('\r\n', '\n'), **file**, 'exec'))"" install --record /tmp/pip-hOikmU-record/install-record.txt --single-version-externally-managed --install-headers /home/v512/Documents/django-oscar/oscar/include/site/python2.7 failed with error code 1 in /home/v512/Documents/django-oscar/oscar/build/greenlet
Traceback (most recent call last):
  File ""/home/v512/Documents/django-oscar/oscar/bin/pip"", line 9, in <module>
    load_entry_point('pip==1.4.1', 'console_scripts', 'pip')()
  File ""/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/pip/**init**.py"", line 148, in main
    return command.main(args[1:], options)
  File ""/home/v512/Documents/django-oscar/oscar/local/lib/python2.7/site-packages/pip/basecommand.py"", line 169, in main
    text = '\n'.join(complete_log)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 66: ordinal not in range(128)
make: **\* [install] Error 1
"
12183,django-oscar,django-oscar,23,closed,857,1,https://api.github.com/repos/django-oscar/django-oscar/issues/857/comments,https://github.com/django-oscar/django-oscar/pull/857,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}, {""default"": false, ""name"": ""\u2708 Low-hanging fruit"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%9C%88%20Low-hanging%20fruit"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWw1NjEwMDgxMA=="", ""id"": 56100810}]",Handle sorl integrity error issues,"The sandbox site raises lots of exceptions like this one:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/handlers/base.py"", line 140, in get_response
    response = response.render()

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/response.py"", line 105, in render
    self.content = self.rendered_content

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/response.py"", line 82, in rendered_content
    content = template.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 140, in render
    return self._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/loader_tags.py"", line 124, in render
    return compiled_parent._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/loader_tags.py"", line 124, in render
    return compiled_parent._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/loader_tags.py"", line 63, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/loader_tags.py"", line 63, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/loader_tags.py"", line 63, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/defaulttags.py"", line 483, in render
    output = self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 830, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/template/base.py"", line 844, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/templatetags/thumbnail.py"", line 45, in render
    return self._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/templatetags/thumbnail.py"", line 97, in _render
    file_, geometry, **options

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/base.py"", line 65, in get_thumbnail
    default.kvstore.get_or_set(source)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/kvstores/base.py"", line 49, in get_or_set
    self.set(image_file)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/kvstores/base.py"", line 33, in set
    self._set(image_file.key, image_file)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/kvstores/base.py"", line 138, in _set
    self._set_raw(add_prefix(key, identity), s)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/sorl_thumbnail-11.12-py2.6.egg/sorl/thumbnail/kvstores/cached_db_kvstore.py"", line 36, in _set_raw
    kv = KVStoreModel.objects.get_or_create(key=key)[0]

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/manager.py"", line 146, in get_or_create
    return self.get_query_set().get_or_create(**kwargs)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/query.py"", line 501, in get_or_create
    six.reraise(*exc_info)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/query.py"", line 491, in get_or_create
    obj.save(force_insert=True, using=self.db)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/base.py"", line 546, in save
    force_update=force_update, update_fields=update_fields)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/base.py"", line 650, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/manager.py"", line 215, in _insert
    return insert_query(self.model, objs, fields, **kwargs)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/query.py"", line 1675, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/models/sql/compiler.py"", line 937, in execute_sql
    cursor.execute(sql, params)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/backends/mysql/base.py"", line 122, in execute
    six.reraise(utils.IntegrityError, utils.IntegrityError(*tuple(e.args)), sys.exc_info()[2])

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/db/backends/mysql/base.py"", line 120, in execute
    return self.cursor.execute(query, args)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/MySQLdb/cursors.py"", line 174, in execute
    self.errorhandler(self, exc, value)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/MySQLdb/connections.py"", line 36, in defaulterrorhandler
    raise errorclass, errorvalue

IntegrityError: (1062, ""Duplicate entry 'oscar-sandbox||image||54ae37ded22894b9f773ccaf7217e78e' for key 'PRIMARY'"")
```

I think this is a race condition that isn't handled in Sorl.  I suspect the right fix is to write our own sorl wrapper that catches this exception.  See https://github.com/sorl/sorl-thumbnail/issues/162
"
12184,django-oscar,django-oscar,23,closed,856,6,https://api.github.com/repos/django-oscar/django-oscar/issues/856/comments,https://github.com/django-oscar/django-oscar/pull/856,"[{""default"": false, ""name"": ""\u2612 Outdated"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%92%20Outdated"", ""color"": ""e99695"", ""node_id"": ""MDU6TGFiZWw0MTA2ODQ2NDQ="", ""id"": 410684644}]",Improve product image handling,"There's currently a few issues with the way the dashboard handles product images.

https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/partials/image_input_widget.html
- [ ] If no image is set, an empty `<img>` is rendered. It's not visible as it's overlaid by both a button and the <input> field, but at least in Chrome changes the mouse cursor
- [x] The inline(!) javascript uses relative addressing via `.next()` to hide or show the upload button
- [ ] Semantically, the button is never used, and merely for display purposes. Maybe one could remove it, and instead have an always visible `<img>` which looks something like this
  ![button](http://static4.depositphotos.com/1000993/391/v/450/dep_3913351-Single-Circle-upload-button.jpg)
- [ ] As everything else has an immediate reaction, it would be nice if deleting pictures would be instant as well. Or at least the image becoming grayed out when clicking 'Delete'
- [x] The input field is, at least in Chrome, 100 px to the right. That causes the mouse cursor to not display as expected in the left half of the area. This is caused by absolute positioning and some not widely supported transforming: https://github.com/tangentlabs/django-oscar/blob/master/oscar/static/oscar/less/dashboard.less#L771
- [ ] It would be nice if images could be dragged & dropped. Seems easy enough: http://djangosnippets.org/snippets/1053/
- [ ] ImageField validation errors need looking into, as per @mbertheau's comment below
- [ ] Uploaded images aren't saved if other validation fails, as reported on the [mailing list](https://groups.google.com/d/msgid/django-oscar/a1bf22d9-d674-43c9-a88b-3d6382a8c174%40googlegroups.com) and in https://github.com/tangentlabs/django-oscar/pull/1126
- [ ] Allow associating images with child products (as mentioned in https://github.com/tangentlabs/django-oscar/issues/675#issuecomment-48340506)

Possible enhancements:
- Allow image cropping with e.g. [django-image-cropping](https://github.com/jonasundderwolf/django-image-cropping)
"
12185,django-oscar,django-oscar,23,closed,855,0,https://api.github.com/repos/django-oscar/django-oscar/issues/855/comments,https://github.com/django-oscar/django-oscar/issues/855,[],IntegrityError when saving image order,"From [mailing list](https://groups.google.com/d/msgid/django-oscar/72a808cc-db5a-42c1-828a-faa0dee3d2fc%40googlegroups.com):

> I'm having a problem with display_order on product images.
> 
> Let's say we have three already uploaded images for a product, then we choose to remove the middle image and save the form. No problem so far.
> When the page is refreshed, there are two images and we decide to upload a new one and save the form. IntegrityError! 'display_order' of the new image collides with the old images. (In this case it collides with the old image which has display_order == 2)
> 
> Oscar uses the formset prefix to set the order, but when you delete an image.. the order isn't updated, so it will cause a conflict.
> 
> How can I solve this?
> 
> ```
> ```
"
12194,django-oscar,django-oscar,23,closed,844,3,https://api.github.com/repos/django-oscar/django-oscar/issues/844/comments,https://github.com/django-oscar/django-oscar/issues/844,[],Demo site Error (during make demo),"```
 DeserializationError: Problem installing fixture 'sites/demo/fixtures/shipping-event-     types.json': ShippingEventType has no field named u'is_required'
 make: *** [demo] Error 1
```

using: Django > 1.5
"
12215,django-oscar,django-oscar,23,closed,823,5,https://api.github.com/repos/django-oscar/django-oscar/issues/823/comments,https://github.com/django-oscar/django-oscar/pull/823,[],Fix for failing south migration on new oscar projects,"This is a re-opening of previously closed pull request (because I did not provide error message originally). https://github.com/tangentlabs/django-oscar/pull/786 

To illustrate the problem I have created a basic oscar project: https://github.com/eukreign/oscardepends

The only app this project overloads is the 'order' app. Below are the commands to create the initial schemamigration for order and then an attempt to syncdb --migrate.

This pull request fixes the error below and several other situations where the schema migration fails. I have three other projects that overload a different combination of oscar apps that all exhibited this problem, with this fix they all work fine.

```
(oscardepends)lex@ubuntu:~/projects/oscardepends$ ./manage.py schemamigration order --initial
Creating migrations directory at '/home/lex/projects/oscardepends/oscardepends/apps/order/migrations'...
Creating __init__.py in '/home/lex/projects/oscardepends/oscardepends/apps/order/migrations'...
 + Added model order.PaymentEventQuantity
 + Added model order.ShippingEventQuantity
 + Added model order.Order
 + Added model order.OrderNote
 + Added model order.CommunicationEvent
 + Added model order.ShippingAddress
 + Added model order.BillingAddress
 + Added model order.Line
 + Added model order.LinePrice
 + Added model order.LineAttribute
 + Added model order.ShippingEvent
 + Added model order.ShippingEventType
 + Added model order.PaymentEvent
 + Added model order.PaymentEventType
 + Added model order.OrderDiscount
Created 0001_initial.py. You can now apply this migration with: ./manage.py migrate order
(oscardepends)lex@ubuntu:~/projects/oscardepends$ ./manage.py syncdb --migrate
Syncing...
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_groups
Creating table auth_user_user_permissions
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table south_migrationhistory
Creating table reviews_productreview
Creating table reviews_vote
Creating table thumbnail_kvstore

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): 
Please enter either ""yes"" or ""no"": no
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)
Migrating...
Running migrations for analytics:
 - Migrating forwards to 0001_initial.
 > customer:0001_initial
 > catalogue:0001_initial
 > analytics:0001_initial
 - Loading initial data for analytics.
Installed 0 object(s) from 0 fixture(s)
Running migrations for order:
 - Migrating forwards to 0001_initial.
 > order:0001_initial
FATAL ERROR - The following SQL query failed: ALTER TABLE ""order_shippingaddress"" ADD CONSTRAINT ""country_id_refs_iso_3166_1_a2_6ed25861"" FOREIGN KEY (""country_id"") REFERENCES ""address_country"" (""iso_3166_1_a2"") DEFERRABLE INITIALLY DEFERRED;
The error was: relation ""address_country"" does not exist

Error in migration: order:0001_initial
DatabaseError: relation ""address_country"" does not exist
```
"
12221,django-oscar,django-oscar,23,closed,817,2,https://api.github.com/repos/django-oscar/django-oscar/issues/817/comments,https://github.com/django-oscar/django-oscar/issues/817,[],Sandbox unicode error when sending email,"Strangely, the sandbox sometimes raises a unicode error when an email is sent.  I haven't been able to create this - needs more investigation.

``` python
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/handlers/base.py"", line 115, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/session.py"", line 24, in dispatch
    return super(CheckoutSessionMixin, self).dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/views/generic/base.py"", line 86, in dispatch
    return handler(request, *args, **kwargs)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/views.py"", line 384, in post
    return self.submit(request.basket)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/views.py"", line 558, in submit
    **order_kwargs)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/mixins.py"", line 59, in handle_order_placement
    return self.handle_successful_order(order)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/mixins.py"", line 89, in handle_successful_order
    self.send_confirmation_message(order)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/checkout/mixins.py"", line 351, in send_confirmation_message
    event_type, **kwargs)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/customer/utils.py"", line 42, in dispatch_order_messages
    self.dispatch_user_messages(order.user, messages)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/customer/utils.py"", line 54, in dispatch_user_messages
    self.send_user_email_messages(user, messages)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/customer/utils.py"", line 68, in send_user_email_messages
    email = self.send_email_messages(user.email, messages)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/customer/utils.py"", line 99, in send_email_messages
    email.send()

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/mail/message.py"", line 255, in send
    return self.get_connection(fail_silently).send_messages([self])

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/mail/backends/smtp.py"", line 95, in send_messages
    sent = self._send(message)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/mail/backends/smtp.py"", line 113, in _send
    force_bytes(message.as_string(), charset))

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.5.2-py2.6.egg/django/core/mail/message.py"", line 169, in as_string
    g.flatten(self, unixfrom=unixfrom)

  File ""/usr/lib/python2.6/email/generator.py"", line 84, in flatten
    self._write(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 109, in _write
    self._dispatch(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 135, in _dispatch
    meth(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 201, in _handle_multipart
    g.flatten(part, unixfrom=False)

  File ""/usr/lib/python2.6/email/generator.py"", line 84, in flatten
    self._write(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 109, in _write
    self._dispatch(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 135, in _dispatch
    meth(msg)

  File ""/usr/lib/python2.6/email/generator.py"", line 178, in _handle_text
    self._fp.write(payload)

UnicodeEncodeError: 'ascii' codec can't encode characters in position 158-159: ordinal not in range(128)


<WSGIRequest
path:/checkout/preview/,
GET:<QueryDict: {}>,
POST:<QueryDict: {u'action': [u'place_order'], u'csrfmiddlewaretoken': [u'aulvLYkPdci6bcVeqixjpol1LmczY1Ut']}>,
COOKIES:{'csrftoken': 'aulvLYkPdci6bcVeqixjpol1LmczY1Ut',
 'oscar_recently_viewed_products': '[231]',
 'sessionid': 'nphzmehw8wh6t1ovbsayhjeooaoev6h9'},
META:{'CONTENT_LENGTH': '71',
 'CONTENT_TYPE': 'application/x-www-form-urlencoded',
 u'CSRF_COOKIE': u'aulvLYkPdci6bcVeqixjpol1LmczY1Ut',
 'DOCUMENT_ROOT': '/var/www/nginx-default',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.5',
 'HTTP_CONNECTION': 'close',
 'HTTP_COOKIE': 'csrftoken=aulvLYkPdci6bcVeqixjpol1LmczY1Ut; oscar_recently_viewed_products=""[231]""; sessionid=nphzmehw8wh6t1ovbsayhjeooaoev6h9',
 'HTTP_HOST': 'latest.oscarcommerce.com',
 'HTTP_REFERER': 'http://latest.oscarcommerce.com/checkout/preview/',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:23.0) Gecko/20100101 Firefox/23.0',
 'HTTP_X_FORWARDED_FOR': '37.191.99.202',
 'HTTP_X_REAL_IP': '37.191.99.202',
 'PATH': '/usr/local/bin:/usr/bin:/bin',
 'PATH_INFO': u'/checkout/preview/',
 'PATH_TRANSLATED': '/var/www/oscar/builds/sandbox/sites/sandbox/deploy/wsgi/sandbox.wsgi/checkout/preview/',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '37.191.99.202',
 'REMOTE_PORT': '38538',
 'REQUEST_METHOD': 'POST',
 'REQUEST_URI': '/checkout/preview/',
 'SCRIPT_FILENAME': '/var/www/oscar/builds/sandbox/sites/sandbox/deploy/wsgi/sandbox.wsgi',
 'SCRIPT_NAME': u'',
 'SERVER_ADDR': '127.0.0.1',
 'SERVER_ADMIN': '[no address given]',
 'SERVER_NAME': 'latest.oscarcommerce.com',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SIGNATURE': '',
 'SERVER_SOFTWARE': 'Apache/2.2.14 (Ubuntu) mod_wsgi/2.8 Python/2.6.5',
 'mod_wsgi.application_group': '',
 'mod_wsgi.callable_object': 'application',
 'mod_wsgi.listener_host': '',
 'mod_wsgi.listener_port': '81',
 'mod_wsgi.process_group': 'oscar',
 'mod_wsgi.reload_mechanism': '1',
 'mod_wsgi.script_reloading': '1',
 'mod_wsgi.version': (2, 8),
 'wsgi.errors': <mod_wsgi.Log object at 0x7f524d555090>,
 'wsgi.file_wrapper': <built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f524d707cd8>,
 'wsgi.input': <mod_wsgi.Input object at 0x7f524d5ecb70>,
 'wsgi.multiprocess': True,
 'wsgi.multithread': True,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}>
```
"
12267,django-oscar,django-oscar,23,closed,769,1,https://api.github.com/repos/django-oscar/django-oscar/issues/769/comments,https://github.com/django-oscar/django-oscar/pull/769,[],bugfix for https://github.com/tangentlabs/django-oscar/issues/767,"bugfix for https://github.com/tangentlabs/django-oscar/issues/767
"
12281,django-oscar,django-oscar,24,closed,755,5,https://api.github.com/repos/django-oscar/django-oscar/issues/755/comments,https://github.com/django-oscar/django-oscar/issues/755,[],URL_VALIDATOR_USER_AGENT," from oscar.forms import fields
  File ""/home/mbit/.virtualenvs/oscar/local/lib/python2.7/site-packages/oscar/forms/fields.py"", line 2, in <module>
    from django.core.validators import URL_VALIDATOR_USER_AGENT
ImportError: cannot import name URL_VALIDATOR_USER_AGENT
"
12310,django-oscar,django-oscar,24,closed,726,5,https://api.github.com/repos/django-oscar/django-oscar/issues/726/comments,https://github.com/django-oscar/django-oscar/issues/726,[],UnicodeEncodeError at /search/,"When input unicode symbols (for example `тест`) in search field in front end of Oscar and click ""Search"" an error occurred:

```
UnicodeEncodeError at /search/
'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)
Request Method:     GET
Request URL:    http://localhost:8000/search/?q=%D1%82%D0%B5%D1%81%D1%82
Django Version:     1.4.5
Exception Type:     UnicodeEncodeError
... etc.
```

With ASCII symbols search is working properly.

Traceback is here: http://dpaste.com/1247500/
"
12331,django-oscar,django-oscar,24,closed,704,1,https://api.github.com/repos/django-oscar/django-oscar/issues/704/comments,https://github.com/django-oscar/django-oscar/issues/704,[],Permission names can get to long for few Benefit models,"Models from ShippingAbsoluteDiscountBenefit to ShippingPercentageDiscountBenefit have quite long verbose_name and in some translations (like Polish) the translated names are even longer and generate permission names that are longer than the expected 50 chars - django.db.utils.DatabaseError: value too long for type character varying(50)

Looking at all permissions not all get translated. It's either lack of translation or something in the code. The best solution would be if no translatable string would be in the (permissions) database.... or at least the core English ones and do the translation on display.
"
12333,django-oscar,django-oscar,24,closed,702,2,https://api.github.com/repos/django-oscar/django-oscar/issues/702/comments,https://github.com/django-oscar/django-oscar/issues/702,[],Format date dashboard (datepicker) to format locale,"When my locale is not english, for example spanish or catalan, date fields in dashboard (reports and offers) don't work because date field is not availble en clean form and I get a python error (not get date key from a dict).
- In english date format is: YYYY-mm-dd
- In spanish or similar we need: dd/mm/YYYY

I review code and date format is added in hardcode:
- Dashboard js (1)
- Default date format to today (2)

If you change this values, it work fine :)

I don't know what is the best method to decided format date, I think in settings file but a shop it's possible to work in differents languages. The problem, is howto in dashboard.js file.

Maybe a solution in datepicker is about setDefaults (defaults)  (3). I try it but don't work me :(

Note:
I don't know why in inglish need ""-"" and spanish ""/"" charaters in a date.

(1) https://github.com/tangentlabs/django-oscar/blob/master/oscar/static/oscar/js/oscar/dashboard.js#L17
(2) https://github.com/tangentlabs/django-oscar/blob/master/oscar/static/oscar/js/oscar/dashboard.js#L17
(3) https://github.com/eternicode/bootstrap-datepicker/issues/288
"
12340,django-oscar,django-oscar,24,closed,695,2,https://api.github.com/repos/django-oscar/django-oscar/issues/695/comments,https://github.com/django-oscar/django-oscar/issues/695,[],Variant products don't need their own detail page,"At the moment, the detail page for a variant product can raise 500 (see trace from demo site below).  Variant products should redirect to the group product page.  Also the offending template lookup code should use `get_product_class` so that it picks up the parent's product class.

Trace:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/demo/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/core/handlers/base.py"", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File ""/var/www/oscar/virtualenvs/demo/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/views/generic/base.py"", line 48, in view
    return self.dispatch(request, *args, **kwargs)

  File ""/var/www/oscar/virtualenvs/demo/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/views/generic/base.py"", line 69, in dispatch
    return handler(request, *args, **kwargs)

  File ""/var/www/oscar/builds/demo/oscar/apps/catalogue/views.py"", line 62, in get
    response = super(ProductDetailView, self).get(request, **kwargs)

  File ""/var/www/oscar/virtualenvs/demo/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/views/generic/detail.py"", line 100, in get
    return self.render_to_response(context)

  File ""/var/www/oscar/virtualenvs/demo/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/views/generic/base.py"", line 95, in render_to_response
    template = self.get_template_names(),

  File ""/var/www/oscar/builds/demo/oscar/apps/catalogue/views.py"", line 83, in get_template_names
    '%s/detail-for-class-%s.html' % (self.template_folder, product.product_class.name.lower()),

AttributeError: 'NoneType' object has no attribute 'name'

```
"
12348,django-oscar,django-oscar,24,closed,687,3,https://api.github.com/repos/django-oscar/django-oscar/issues/687/comments,https://github.com/django-oscar/django-oscar/issues/687,[],Multi-process support for nosetests fails on two tests,"```
(tmp)(master) T530i:django-oscar $ ./runtests.py --processes=4
nosetests --verbosity 1 tests --processes=4
Creating test database for alias 'default'...
.......................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................E............E................................
======================================================================
ERROR: Failure: ValueError (no such test method in <class 'tests.unit.logging_tests.PciFormatterTests'>: execute_test_method_with_each_data_set)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/home/m/.virtualenvs/tmp/local/lib/python2.7/site-packages/nose/loader.py"", line 495, in makeTest
    return self._makeTest(obj, parent)
  File ""/home/m/.virtualenvs/tmp/local/lib/python2.7/site-packages/nose/loader.py"", line 549, in _makeTest
    return parent(obj.__name__)
  File ""/usr/lib/python2.7/unittest/case.py"", line 191, in __init__
    (self.__class__, methodName))
ValueError: no such test method in <class 'tests.unit.logging_tests.PciFormatterTests'>: execute_test_method_with_each_data_set

======================================================================
ERROR: Failure: ValueError (no such test method in <class 'tests.unit.shipping_tests.FixedPriceTest'>: execute_test_method_with_each_data_set)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/home/m/.virtualenvs/tmp/local/lib/python2.7/site-packages/nose/loader.py"", line 495, in makeTest
    return self._makeTest(obj, parent)
  File ""/home/m/.virtualenvs/tmp/local/lib/python2.7/site-packages/nose/loader.py"", line 549, in _makeTest
    return parent(obj.__name__)
  File ""/usr/lib/python2.7/unittest/case.py"", line 191, in __init__
    (self.__class__, methodName))
ValueError: no such test method in <class 'tests.unit.shipping_tests.FixedPriceTest'>: execute_test_method_with_each_data_set

----------------------------------------------------------------------
Ran 565 tests in 14.117s

FAILED (errors=2)
Destroying test database for alias 'default'...
```

Once this is fixed, I'd suggest enabling multi-process as a default. Unfortunately, it's [currently](https://github.com/erikrose/nose-progressive/issues/17) not supported by nose-progressive. It halved the time tests take on my dual core machine.
"
12372,django-oscar,django-oscar,24,closed,660,1,https://api.github.com/repos/django-oscar/django-oscar/issues/660/comments,https://github.com/django-oscar/django-oscar/issues/660,[],categories context variable clash,"I can't seem to get category drill down working under the ""BROWSE CATEGORIES"" section. Trying to debug this problem I discovered that there are some name clashes in the template context for the variable ""categories"".

The category view adds ""categories"" into the context [line 134](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/catalogue/views.py#L134):

``` python
class ProductCategoryView(ListView):
...
    def get_context_data(self, **kwargs):
        context = super(ProductCategoryView, self).get_context_data(**kwargs)
        context['categories'] = self.categories
        context['category'] = self.categories[-1]
        context['summary'] = self.categories[-1].name
        return context

```

Then the layout.html template also redefines ""categories"" [line 18](https://github.com/tangentlabs/django-oscar/blob/master/oscar/templates/oscar/layout.html#L18):

``` html+django
        {% category_tree depth=2 as categories %}
```

Is this a bug or am I misunderstanding how to get category drill down to work?
"
12373,django-oscar,django-oscar,24,closed,659,3,https://api.github.com/repos/django-oscar/django-oscar/issues/659/comments,https://github.com/django-oscar/django-oscar/issues/659,[],Allow to extend form_field.html,"I propose to wrap code in `partials/form_field.html` into block tags. This will allow to override parts of the field: the widget part, the errors part, the inine-help part, the label part, and maybe some other parts. This is useful when you want to create custom rendering for certain fields.

For example if I want to get custom html and put two fields under one label:
## partials/myfield.html:

``` htmldjango
{% extends ""partials/form_field.html"" %}

{% block widget %}
    <!-- very special html for my very-custom widget -->
    {{ field }}
    {{ otherfield }}
{% endblock %}
```
## myform.html:

```
{% include ""partials/myfield.html"" with field=myform.field1 otherfield=myform.field2 %}
```
"
12379,django-oscar,django-oscar,25,closed,652,1,https://api.github.com/repos/django-oscar/django-oscar/issues/652/comments,https://github.com/django-oscar/django-oscar/pull/652,[],Fix view name in oscar.apps.search.urls.,"SuggestionsView is incorrectly named in oscar.apps.search.urls.

I didn't use this view, an import error occured when my application searched all urls.py in every installed app for javascript settings (https://github.com/pozytywnie/django-javascript-settings). It's very special case, but the same error would occur if I just used those urls.

I know that this file would likely be revamped in 0.6, but I'd like to use this change right now in my project.
"
12383,django-oscar,django-oscar,25,closed,648,2,https://api.github.com/repos/django-oscar/django-oscar/issues/648/comments,https://github.com/django-oscar/django-oscar/issues/648,[],Sandbox error: no stockrecord on product,"Not quite sure how this happens.  Needs a little investigation:

```
Traceback (most recent call last):

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/core/handlers/base.py"", line 136, in get_response
    response = response.render()

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/response.py"", line 104, in render
    self._set_content(self.rendered_content)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/response.py"", line 81, in rendered_content
    content = template.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 140, in render
    return self._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 62, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 62, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 62, in render
    result = block.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/defaulttags.py"", line 281, in render
    return nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/defaulttags.py"", line 192, in render
    nodelist.append(node.render(context))

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 1107, in render
    return func(*resolved_args, **resolved_kwargs)

  File ""/var/www/oscar/builds/sandbox/oscar/templatetags/product_tags.py"", line 23, in render_product
    return template_.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 140, in render
    return self._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 53, in render
    result = self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/defaulttags.py"", line 281, in render
    return nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 155, in render
    return self.render_template(self.template, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader_tags.py"", line 137, in render_template
    output = template.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 140, in render
    return self._render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)

  File ""/var/www/oscar/virtualenvs/sandbox/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/base.py"", line 837, in render_node
    return node.render(context)

  File ""/var/www/oscar/builds/sandbox/oscar/templatetags/basket_tags.py"", line 61, in render
    product, 1)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/basket/forms.py"", line 132, in is_purchase_permitted
    return product.is_purchase_permitted(user=user, quantity=desired_qty)

  File ""/var/www/oscar/builds/sandbox/oscar/apps/catalogue/abstract_models.py"", line 396, in is_purchase_permitted
    return self.stockrecord.is_purchase_permitted(user, quantity)

AttributeError: 'NoneType' object has no attribute 'is_purchase_permitted'
```
"
12387,django-oscar,django-oscar,25,closed,644,3,https://api.github.com/repos/django-oscar/django-oscar/issues/644/comments,https://github.com/django-oscar/django-oscar/pull/644,[],"js fix for basket, in case shop doesnt start in the root url","I noticed a js error happening when pointing the shop root to something else than /, like /shop. The xhr post request should be on /shop/basket/ in that case. Changed the post to the current URL. Not sure if django provides uri resolving with js otherwise, but this works :)
"
12407,django-oscar,django-oscar,25,closed,624,2,https://api.github.com/repos/django-oscar/django-oscar/issues/624/comments,https://github.com/django-oscar/django-oscar/issues/624,[],UnicodeDecodeError when exporting orders as CSV,"My locale is pt_BR.

I'm trying to export a batch of orders, but I'm facing an UnicodeDecodeError on django-oscar/oscar/apps/dashboard/reports/csv_utils.py, line 26.

The order date placed is being encoded as:

'31 de Janeiro de 2013 \xc3\xa0s 14:31'

on django-oscar/oscar/apps/dashboard/orders/views.py, line 271.

The following seems to fix this bug, but it feels wrong for me.

```
diff --git a/oscar/apps/dashboard/reports/csv_utils.py b/oscar/apps/dashboard/reports/csv_utils.py
index 7855ddd..09d1f61 100644
--- a/oscar/apps/dashboard/reports/csv_utils.py
+++ b/oscar/apps/dashboard/reports/csv_utils.py
@@ -23,7 +23,14 @@ class CsvUnicodeWriter(object):
         self.stream.write(codecs.BOM_UTF8)

     def writerow(self, row):
-        self.writer.writerow([unicode(s).encode(""utf-8"") for s in row])
+        encoded_row = []
+        for s in row:
+            try:
+                encoded_row.append(unicode(s).encode('utf-8'))
+            except UnicodeDecodeError:
+                # I already have an utf-8 string
+                encoded_row.append(s)
+        self.writer.writerow(encoded_row)
         # Fetch UTF-8 output from the queue ...
         data = self.queue.getvalue()
         data = data.decode(""utf-8"")
```

I think that I can not test if the string is an unicode string because I could receive an ugettext_lazy instance.

What should I do?

Edit: correcting diff
"
12415,django-oscar,django-oscar,25,closed,616,3,https://api.github.com/repos/django-oscar/django-oscar/issues/616/comments,https://github.com/django-oscar/django-oscar/issues/616,[],'NoneType' object has no attribute 'groups',"AttributeError at /
'NoneType' object has no attribute 'groups'
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4.5
Exception Type: AttributeError
Exception Value:  
'NoneType' object has no attribute 'groups'
Exception Location: C:\Python27\lib\site-packages\babel\numbers.py in parse_pattern, line 383
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.3
Python Path:  
['C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit',
 'C:\Python27\lib\site-packages\pip-1.2.1-py2.7.egg',
 'C:\Python27\lib\site-packages\recaptcha_client-1.0.6-py2.7.egg',
 'C:\Python27\lib\site-packages\sorl_thumbnail-11.12-py2.7.egg',
 'C:\Python27\lib\site-packages\virtualenv-1.9.1-py2.7.egg',
 'C:\Python27\lib\site-packages\unidecode-0.04.12-py2.7.egg',
 'C:\Python27\lib\site-packages\pillow-1.7.8-py2.7-win32.egg',
 'C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg',
 'C:\Windows\system32\python27.zip',
 'C:\Python27\DLLs',
 'C:\Python27\lib',
 'C:\Python27\lib\plat-win',
 'C:\Python27\lib\lib-tk',
 'C:\Python27',
 'C:\Python27\lib\site-packages',
 'C:\Python27\lib\site-packages\PIL']
Server time:    Tue, 2 Apr 2013 18:18:33 +0530
Error during template rendering

In template C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\oscar\templates\oscar\partials\mini_basket.html, error at line 16
'NoneType' object has no attribute 'groups'
6           <div class=""btn-group"">
7               <a class=""btn"" href=""{% url basket:summary %}"">{% trans ""View Basket"" %}</a>
8               <button class=""btn dropdown-toggle"" data-toggle=""dropdown"">
9                   <span class=""caret""></span>
10              </button>
11              <ul class=""dropdown-menu pull-right"">
12                  <li>{% include ""basket/partials/basket_quick.html"" %}</li>
13              </ul>
14          </div>
15      </li>
16      <li class=""cart_summary""><strong>{% trans ""Basket total:"" %} <span>{{ request.basket.total_incl_tax|currency }}</span></strong></li>
17  </ul><!-- /cart -->
18  
Traceback Switch to copy-and-paste view

C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\core\handlers\base.py in get_response
                    response = response.render() ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\response.py in render
            self._set_content(self.rendered_content) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\response.py in rendered_content
        content = template.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
            return self._render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\test\utils.py in instrumented_test_render
    return self.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
        return compiled_parent._render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\test\utils.py in instrumented_test_render
    return self.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
        return compiled_parent._render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\test\utils.py in instrumented_test_render
    return self.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
        return compiled_parent._render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\test\utils.py in instrumented_test_render
    return self.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
            result = block.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
            result = block.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render
        return self.render_template(self.template, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\loader_tags.py in render_template
        output = template.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
            return self._render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\test\utils.py in instrumented_test_render
    return self.nodelist.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in render
                bit = self.render_node(node, context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render_node
            return node.render(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\debug.py in render
            output = self.filter_expression.resolve(context) ...
▶ Local vars
C:\Python27\lib\site-packages\django-1.4.5-py2.7.egg\django\template\base.py in resolve
                new_obj = func(obj, _arg_vals) ...
▶ Local vars
C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\oscar\templatetags\currency_filters.py in currency
    return format_currency(value, *_kwargs) ...
▶ Local vars
C:\Python27\lib\site-packages\babel\numbers.py in format_currency
    pattern = parse_pattern(format) ...
▶ Local vars
C:\Python27\lib\site-packages\babel\numbers.py in parse_pattern
        pos_prefix, number, pos_suffix = number_re.search(pattern).groups() ...
▶ Local vars
Request information

GET
No GET data
POST
No POST data
FILES
No FILES data
COOKIES
Variable    Value
**utmz  
'96992031.1363871893.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)'
mezzanine-rating  
',shop.product.1'
remember  
'1b307699b4b4c8aeae76d5891fa8f224eecb532bbcc1162f29ab92f991f0828326ac568a1ba5ad6537693f5e5025f7e78228075635ff10d3ac14f003d7429978:iyhy3nzw7w4sk3wfohvhuhqvgm4j02dx'
csrftoken  
'SZg6lfBvezLirpkxpSlpE3hFeF964Aw0'
__utma  
'96992031.902834875.1363871893.1363871893.1363881816.2'
wishlist  
''
META
Variable    Value
TMP 
'C:\Users\RADHEK~1\AppData\Local\Temp'
COMPUTERNAME  
'RADHEKRISHAN-PC'
wsgi.multiprocess  
False
RUN_MAIN  
'true'
HTTP_COOKIE 
'__utma=96992031.902834875.1363871893.1363871893.1363881816.2; __utmz=96992031.1363871893.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); mezzanine-rating=""\054shop.product.1""; remember=""1b307699b4b4c8aeae76d5891fa8f224eecb532bbcc1162f29ab92f991f0828326ac568a1ba5ad6537693f5e5025f7e78228075635ff10d3ac14f003d7429978:iyhy3nzw7w4sk3wfohvhuhqvgm4j02dx""; wishlist=; csrftoken=SZg6lfBvezLirpkxpSlpE3hFeF964Aw0'
USERDOMAIN  
'RadheKrishan-PC'
wsgi.multithread  
True
SERVER_PROTOCOL 
'HTTP/1.1'
SERVER_SOFTWARE 
'WSGIServer/0.1 Python/2.7.3'
PSMODULEPATH  
'C:\Windows\system32\WindowsPowerShell\v1.0\Modules\'
SCRIPT_NAME 
u''
COMMONPROGRAMFILES  
'C:\Program Files\Common Files'
QUERY_STRING  
''
PROCESSOR_IDENTIFIER  
'x86 Family 6 Model 23 Stepping 10, GenuineIntel'
REQUEST_METHOD  
'GET'
PROGRAMFILES  
'C:\Program Files'
PROCESSOR_REVISION  
'170a'
PATH  
'C:\Program Files\ActiveState Komodo IDE 6\;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files\PC Connectivity Solution\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Toshiba\Bluetooth Toshiba Stack\sys\;C:\Python27\Scripts;C:\Program Files\QuickTime\QTSystem\;C:\Python27;C:\Program Files\nodejs\;C:\Users\Radhe Krishan\AppData\Roaming\npm\;C:\Users\Radhe Krishan\AppData\Roaming\npm\node_modules\less\;C:\Program Files\Git\cmd;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Ruby193\bin;C:\Users\Radhe Krishan\AppData\Roaming\npm'
QTJAVA  
'C:\Program Files\Java\jre7\lib\ext\QTJava.zip'
SYSTEMROOT  
'C:\Windows'
wsgi.errors 
<open file '<stderr>', mode 'w' at 0x017850D0>
COMSPEC 
'C:\Windows\system32\cmd.exe'
CONTENT_LENGTH  
''
HTTP_ACCEPT_CHARSET 
'ISO-8859-1,utf-8;q=0.7,_;q=0.3'
HTTP_USER_AGENT 
'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31'
HTTP_CONNECTION 
'keep-alive'
TEMP  
'C:\Users\RADHEK~1\AppData\Local\Temp'
REMOTE_ADDR 
'127.0.0.1'
PROCESSOR_ARCHITECTURE  
'x86'
wsgi.url_scheme 
'http'
ALLUSERSPROFILE 
'C:\ProgramData'
PROTECTOR_ATTACH  
'true'
SERVER_PORT 
'8000'
LOCALAPPDATA  
'C:\Users\Radhe Krishan\AppData\Local'
HOMEPATH  
'\Users\Radhe Krishan'
PROCESSOR_LEVEL 
'6'
USERNAME  
'Radhe Krishan'
HTTP_ACCEPT 
'text/html,application/xhtml+xml,application/xml;q=0.9,_/*;q=0.8'
LOGONSERVER 
'\\RADHEKRISHAN-PC'
PROMPT  
'$P$G'
WINDOWS_TRACING_FLAGS  
'3'
PROGRAMDATA 
'C:\ProgramData'
PATH_INFO  
u'/'
CLASSPATH  
'.;C:\Program Files\Java\jre7\lib\ext\QTJava.zip'
CSRF_COOKIE 
'SZg6lfBvezLirpkxpSlpE3hFeF964Aw0'
wsgi.input  
<socket._fileobject object at 0x02F6FD70>
HTTP_HOST  
'127.0.0.1:8000'
SESSIONNAME 
'Console'
PATHEXT 
'.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.RB;.RBW'
CSRF_COOKIE_USED  
True
ASL.LOG 
'Destination=file'
FP_NO_HOST_CHECK  
'NO'
WINDIR  
'C:\Windows'
HTTP_ACCEPT_ENCODING  
'gzip,deflate,sdch'
wsgi.version  
(1, 0)
WINDOWS_TRACING_LOGFILE 
'C:\BVTBin\Tests\installpackage\csilogfile.log'
HOMEDRIVE  
'C:'
SERVER_NAME 
'RadheKrishan-PC'
wsgi.run_once  
False
REMOTE_HOST 
''
SYSTEMDRIVE 
'C:'
GATEWAY_INTERFACE  
'CGI/1.1'
HTTP_ACCEPT_LANGUAGE  
'en-US,en;q=0.8'
NUMBER_OF_PROCESSORS  
'2'
APPDATA 
'C:\Users\Radhe Krishan\AppData\Roaming'
DJANGO_SETTINGS_MODULE  
'meanit.settings'
CONTENT_TYPE  
'text/plain'
wsgi.file_wrapper  
''
OS  
'Windows_NT'
PUBLIC  
'C:\Users\Public'
USERPROFILE 
'C:\Users\Radhe Krishan'
Settings
Using settings module meanit.settings
Setting Value
DISPLAY_VERSION 
False
COMPRESS_URL  
'/static/'
OSCAR_RECENTLY_VIEWED_PRODUCTS  
20
COMPRESS_OUTPUT_DIR 
'CACHE'
OSCAR_PARTNER_WRAPPERS  
{}
COMPRESS_TEMPLATE_FILTER_CONTEXT  
{'MEDIA_URL': '/media/', 'STATIC_URL': '/static/'}
USE_L10N  
True
COMPRESS_DATA_URI_MAX_SIZE  
1024
OSCAR_MODERATE_REVIEWS  
False
CSRF_COOKIE_SECURE  
False
LANGUAGE_CODE  
'en-gb'
ROOT_URLCONF  
'meanit.urls'
MANAGERS  
(('Vaibhav Sharma', 'er.vaibhav008@gmail.com'),)
COMPRESS_CSS_HASHING_METHOD 
'mtime'
TABBED_BLOCK  
'TabbedBlock'
DEFAULT_CHARSET 
'utf-8'
IGNORABLE_404_URLS  
()
OSCAR_DASHBOARD_NAVIGATION  
[{'icon': 'icon-th-list',
  'label': <django.utils.functional.__proxy** object at 0x02140CD0>,
  'url_name': 'dashboard:index'},
 {'children': [{'label': <django.utils.functional.__proxy__ object at 0x02147EF0>,
                'url_name': 'dashboard:catalogue-product-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x02147F30>,
                'url_name': 'dashboard:catalogue-category-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C5B0>,
                'url_name': 'dashboard:range-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C5F0>,
                'url_name': 'dashboard:stock-alert-list'}],
  'icon': 'icon-sitemap',
  'label': <django.utils.functional.__proxy__ object at 0x02140FF0>},
 {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C670>,
                'url_name': 'dashboard:order-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C6B0>,
                'url_name': 'dashboard:order-stats'}],
  'icon': 'icon-shopping-cart',
  'label': <django.utils.functional.__proxy__ object at 0x0214C630>},
 {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C730>,
                'url_name': 'dashboard:users-index'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C770>,
                'url_name': 'dashboard:user-alert-list'}],
  'icon': 'icon-group',
  'label': <django.utils.functional.__proxy__ object at 0x0214C6F0>},
 {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C7F0>,
                'url_name': 'dashboard:offer-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C830>,
                'url_name': 'dashboard:voucher-list'}],
  'icon': 'icon-bullhorn',
  'label': <django.utils.functional.__proxy__ object at 0x0214C7B0>},
 {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C8B0>,
                'url_name': 'dashboard:promotion-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C8F0>,
                'url_name': 'dashboard:promotion-list-by-page'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C930>,
                'url_name': 'dashboard:page-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C970>,
                'url_name': 'dashboard:comms-list'},
               {'label': <django.utils.functional.__proxy__ object at 0x0214C9B0>,
                'url_name': 'dashboard:reviews-list'}],
  'icon': 'icon-folder-close',
  'label': <django.utils.functional.__proxy__ object at 0x0214C870>},
 {'icon': 'icon-bar-chart',
  'label': <django.utils.functional.__proxy__ object at 0x0214C9F0>,
  'url_name': 'dashboard:reports-index'}]
STATIC_ROOT 
'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\public/static'
OSCAR_IMAGE_FOLDER  
'images/products/%Y/%m/'
COMPRESS_CLOSURE_COMPILER_ARGUMENTS 
''
OSCAR_PROMOTION_FOLDER  
'images/promotions/'
OSCAR_OFFER_BLACKLIST_PRODUCT  
None
COMPRESS_OFFLINE_MANIFEST  
'manifest.json'
OSCAR_DEFAULT_CURRENCY  
'USD'
OSCAR_SHOP_TAGLINE  
'e-Commerce for Django'
ALLOWED_HOSTS  
['_']
MESSAGE_STORAGE 
'django.contrib.messages.storage.fallback.FallbackStorage'
COMPRESS_YUI_JS_ARGUMENTS  
''
SEND_BROKEN_LINK_EMAILS 
False
URL_VALIDATOR_USER_AGENT  
'Django/1.4.5 (https://www.djangoproject.com)'
STATICFILES_FINDERS 
('django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder',
 'compressor.finders.CompressorFinder')
USE_LESS  
False
COMPRESS_CSSTIDY_ARGUMENTS  
'--template=highest'
OSCAR_CURRENCY_FORMAT  
'INR'
SESSION_COOKIE_NAME 
'sessionid'
ADMIN_FOR  
()
TIME_INPUT_FORMATS  
('%H:%M:%S', '%H:%M')
OSCAR_UPLOAD_ROOT  
'/tmp'
DATABASES  
{'default': {'ENGINE': 'django.db.backends.sqlite3',
             'HOST': '',
             'NAME': 'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\db.sqlite',
             'OPTIONS': {},
             'PASSWORD': u'_******************_',
             'PORT': '',
             'TEST_CHARSET': None,
             'TEST_COLLATION': None,
             'TEST_MIRROR': None,
             'TEST_NAME': None,
             'TIME_ZONE': 'UTC',
             'USER': ''}}
COMPRESS_YUI_BINARY 
'java -jar yuicompressor.jar'
THUMBNAIL_DEBUG 
True
FILE_UPLOAD_PERMISSIONS 
None
FILE_UPLOAD_HANDLERS  
('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')
OSCAR_ALLOW_ANON_CHECKOUT  
True
DEFAULT_CONTENT_TYPE  
'text/html'
LOG_ROOT  
'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\logs'
COMPRESS_CSS_COMPRESSOR 
'compressor.css.CssCompressor'
TEST_RUNNER 
'django.test.simple.DjangoTestSuiteRunner'
APPEND_SLASH  
True
FIRST_DAY_OF_WEEK  
0
DATABASE_ROUTERS  
[]
OSCAR_SHOP_NAME 
'Oscar Sandbox'
YEAR_MONTH_FORMAT  
'F Y'
COMPRESS_OFFLINE_TIMEOUT  
31536000
STATICFILES_STORAGE 
'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES  
{'default': {'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
             'LOCATION': '127.0.0.1:11211'}}
X_FRAME_OPTIONS 
'SAMEORIGIN'
SERVER_EMAIL  
'root@localhost'
SESSION_COOKIE_PATH 
'/'
COMPRESS_PARSER 
'compressor.parser.AutoSelectParser'
COMPRESS_OFFLINE_CONTEXT  
{'MEDIA_URL': '/media/', 'STATIC_URL': '/static/'}
ROSETTA_REQUIRES_AUTH  
False
COMPRESS_CACHE_BACKEND  
'default'
MIDDLEWARE_CLASSES  
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.transaction.TransactionMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware')
USE_I18N  
True
THOUSAND_SEPARATOR  
','
SECRET_KEY  
u'**_****************_'
LANGUAGE_COOKIE_NAME  
'django_language'
DEFAULT_INDEX_TABLESPACE  
''
OSCAR_ALLOW_ANON_REVIEWS  
True
TRANSACTIONS_MANAGED  
False
LOGGING_CONFIG  
'django.utils.log.dictConfig'
SIGNING_BACKEND 
'django.core.signing.TimestampSigner'
TEMPLATE_LOADERS  
('django.template.loaders.filesystem.Loader',
 'django.template.loaders.app_directories.Loader')
WSGI_APPLICATION  
None
TEMPLATE_DEBUG  
True
OSCAR_INITIAL_LINE_STATUS  
'Pending'
CSRF_COOKIE_NAME  
'csrftoken'
HAYSTACK_CONNECTIONS  
{'default': {'ENGINE': 'haystack.backends.whoosh_backend.WhooshEngine',
             'PATH': 'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\whoosh_index'}}
FORCE_SCRIPT_NAME  
None
OSCAR_MAIN_TEMPLATE_DIR 
'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\oscar\templates/oscar'
COMPRESS_CSSTIDY_BINARY 
'csstidy'
USE_X_FORWARDED_HOST  
False
SESSION_COOKIE_SECURE  
False
COMPRESS_DEBUG_TOGGLE  
'None'
COMPRESS_VERBOSE  
False
CSRF_COOKIE_DOMAIN  
None
OSCAR_BASKET_COOKIE_OPEN  
'oscar_open_basket'
SINGLE_PRODUCT  
'SingleProduct'
FILE_CHARSET  
'utf-8'
DEBUG  
True
OSCAR_ORDER_STATUS_PIPELINE 
{'Being processed': ('Processed', 'Cancelled'),
 'Cancelled': (),
 'Pending': ('Being processed', 'Cancelled')}
SESSION_FILE_PATH  
None
COMPRESS_JS_FILTERS 
['compressor.filters.jsmin.JSMinFilter']
DEFAULT_FILE_STORAGE  
'django.core.files.storage.FileSystemStorage'
INSTALLED_APPS  
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'django.contrib.flatpages',
 'django.contrib.staticfiles',
 'django_extensions',
 'debug_toolbar',
 'south',
 'rosetta',
 'compressor',
 'apps.user',
 'apps.gateway',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.order',
 'oscar.apps.checkout',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.address',
 'oscar.apps.partner',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.vouchers',
 'oscar.apps.dashboard.communications',
 'haystack',
 'treebeard',
 'sorl.thumbnail']
LANGUAGES_BIDI  
('he', 'ar', 'fa')
COMMENTS_ALLOW_PROFANITIES  
False
COMPRESS_YUI_CSS_ARGUMENTS  
''
STATICFILES_DIRS  
()
OSCAR_CURRENCY_LOCALE  
'en_US'
PREPEND_WWW 
False
SECURE_PROXY_SSL_HEADER 
None
PASSWORD_RESET_TIMEOUT_DAYS 
u'**_****************_'
SESSION_COOKIE_HTTPONLY 
True
DEBUG_PROPAGATE_EXCEPTIONS  
False
OSCAR_FROM_EMAIL  
'oscar@example.com'
MONTH_DAY_FORMAT  
'F j'
OSCAR_SEARCH_SUGGEST_LIMIT  
10
LOGIN_URL  
'/accounts/login/'
SESSION_EXPIRE_AT_BROWSER_CLOSE 
False
OSCAR_INITIAL_ORDER_STATUS  
'Pending'
TIME_FORMAT 
'P'
ROSETTA_ENABLE_TRANSLATION_SUGGESTIONS  
True
COMPRESS_STORAGE  
'compressor.storage.CompressorFileStorage'
DATE_INPUT_FORMATS  
('%Y-%m-%d',
 '%m/%d/%Y',
 '%m/%d/%y',
 '%b %d %Y',
 '%b %d, %Y',
 '%d %b %Y',
 '%d %b, %Y',
 '%B %d %Y',
 '%B %d, %Y',
 '%d %B %Y',
 '%d %B, %Y')
COMPRESS_CSS_FILTERS  
['compressor.filters.css_default.CssAbsoluteFilter']
AUTHENTICATION_BACKENDS 
('oscar.apps.customer.auth_backends.Emailbackend',
 'django.contrib.auth.backends.ModelBackend')
EMAIL_HOST_PASSWORD 
u'**_****************_'
COMPRESS_REBUILD_TIMEOUT  
2592000
AUTH_PROFILE_MODULE 
'user.Profile'
CACHE_MIDDLEWARE_ALIAS  
'default'
SESSION_SAVE_EVERY_REQUEST  
False
NUMBER_GROUPING 
0
SESSION_ENGINE  
'django.contrib.sessions.backends.db'
CSRF_FAILURE_VIEW  
'django.views.csrf.csrf_failure'
CSRF_COOKIE_PATH  
'/'
COMPRESS_CACHE_KEY_FUNCTION 
u'**_****************_'
LOGIN_REDIRECT_URL  
'/accounts/'
DECIMAL_SEPARATOR  
'.'
COMPRESS_PRECOMPILERS  
(('text/less', 'lessc {infile} {outfile}'),)
COMPRESS_MTIME_DELAY  
10
SITE_ID 
1
LOCALE_PATHS  
()
TEMPLATE_STRING_IF_INVALID  
''
COUNTDOWN  
'Countdown'
LOGOUT_URL  
'/accounts/logout/'
EMAIL_USE_TLS  
False
TEMPLATE_DIRS  
('C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\templates',
 'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\oscar\templates/oscar')
FIXTURE_DIRS  
()
EMAIL_HOST  
'localhost'
DATE_FORMAT 
'N j, Y'
OSCAR_EAGER_ALERTS  
True
MEDIA_ROOT  
'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit\public/media'
OSCAR_BASKET_COOKIE_SAVED  
'oscar_saved_basket'
LIST  
'List'
DEFAULT_EXCEPTION_REPORTER_FILTER  
'django.views.debug.SafeExceptionReporterFilter'
ADMINS  
(('Vaibhav Sharma', 'er.vaibhav008@gmail.com'),)
FORMAT_MODULE_PATH  
None
DEFAULT_FROM_EMAIL  
'webmaster@localhost'
COMPRESS_ROOT  
'c:\users\radhe krishan\desktop\gg\wsgi\meanit\meanit\public\static'
OSCAR_PRODUCTS_PER_PAGE 
20
MEDIA_URL  
'/media/'
DATETIME_FORMAT 
'N j, Y, P'
EMAIL_SUBJECT_PREFIX  
'[Oscar sandbox] '
COMPRESS_JS_COMPRESSOR  
'compressor.js.JsCompressor'
DISALLOWED_USER_AGENTS  
()
ALLOWED_INCLUDE_ROOTS  
()
OSCAR_PROMOTION_MERCHANDISING_BLOCK_TYPES  
(('Countdown', 'Vertical list'),
 ('List', 'Horizontal list'),
 ('TabbedBlock', 'Tabbed block'),
 ('SingleProduct', 'Single product'))
USE_THOUSAND_SEPARATOR  
False
COMPRESS_MINT_DELAY 
30
LOGGING 
{'disable_existing_loggers': False,
 'filters': {'require_debug_false': {'()': 'django.utils.log.RequireDebugFalse'}},
 'formatters': {'simple': {'format': '[%(asctime)s] %(message)s'},
                'verbose': {'format': '%(levelname)s %(asctime)s %(module)s %(message)s'}},
 'handlers': {'checkout_file': {'class': 'oscar.core.logging.handlers.EnvFileHandler',
                                'filename': 'checkout.log',
                                'formatter': 'verbose',
                                'level': 'INFO'},
              'console': {'class': 'logging.StreamHandler',
                          'formatter': 'verbose',
                          'level': 'DEBUG'},
              'error_file': {'class': 'oscar.core.logging.handlers.EnvFileHandler',
                             'filename': 'errors.log',
                             'formatter': 'verbose',
                             'level': 'INFO'},
              'gateway_file': {'class': 'oscar.core.logging.handlers.EnvFileHandler',
                               'filename': 'gateway.log',
                               'formatter': 'simple',
                               'level': 'INFO'},
              'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',
                              'filters': ['require_debug_false'],
                              'level': 'ERROR'},
              'null': {'class': 'django.utils.log.NullHandler',
                       'level': 'DEBUG'},
              'sorl_file': {'class': 'oscar.core.logging.handlers.EnvFileHandler',
                            'filename': 'sorl.log',
                            'formatter': 'verbose',
                            'level': 'INFO'}},
 'loggers': {'django': {'handlers': ['null'],
                        'level': 'INFO',
                        'propagate': True},
             'django.db.backends': {'handlers': ['null'],
                                    'level': 'DEBUG',
                                    'propagate': False},
             'django.request': {'handlers': ['mail_admins', 'error_file'],
                                'level': 'ERROR',
                                'propagate': False},
             'gateway': {'handlers': ['gateway_file'],
                         'level': 'INFO',
                         'propagate': True},
             'oscar.checkout': {'handlers': ['console', 'checkout_file'],
                                'level': 'INFO',
                                'propagate': True},
             'sorl.thumbnail': {'handlers': ['sorl_file'],
                                'level': 'INFO',
                                'propagate': True}},
 'version': 1}
OSCAR_SETTINGS  
{'OSCAR_ALLOW_ANON_CHECKOUT': False,
 'OSCAR_ALLOW_ANON_REVIEWS': True,
 'OSCAR_BASKET_COOKIE_LIFETIME': 604800,
 'OSCAR_BASKET_COOKIE_OPEN': 'oscar_open_basket',
 'OSCAR_BASKET_COOKIE_SAVED': 'oscar_saved_basket',
 'OSCAR_COOKIES_DELETE_ON_LOGOUT': ['oscar_recently_viewed_products'],
 'OSCAR_DASHBOARD_NAVIGATION': [{'icon': 'icon-th-list',
                                 'label': <django.utils.functional.__proxy__ object at 0x02140CD0>,
                                 'url_name': 'dashboard:index'},
                                {'children': [{'label': <django.utils.functional.__proxy__ object at 0x02147EF0>,
                                               'url_name': 'dashboard:catalogue-product-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x02147F30>,
                                               'url_name': 'dashboard:catalogue-category-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C5B0>,
                                               'url_name': 'dashboard:range-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C5F0>,
                                               'url_name': 'dashboard:stock-alert-list'}],
                                 'icon': 'icon-sitemap',
                                 'label': <django.utils.functional.__proxy__ object at 0x02140FF0>},
                                {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C670>,
                                               'url_name': 'dashboard:order-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C6B0>,
                                               'url_name': 'dashboard:order-stats'}],
                                 'icon': 'icon-shopping-cart',
                                 'label': <django.utils.functional.__proxy__ object at 0x0214C630>},
                                {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C730>,
                                               'url_name': 'dashboard:users-index'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C770>,
                                               'url_name': 'dashboard:user-alert-list'}],
                                 'icon': 'icon-group',
                                 'label': <django.utils.functional.__proxy__ object at 0x0214C6F0>},
                                {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C7F0>,
                                               'url_name': 'dashboard:offer-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C830>,
                                               'url_name': 'dashboard:voucher-list'}],
                                 'icon': 'icon-bullhorn',
                                 'label': <django.utils.functional.__proxy__ object at 0x0214C7B0>},
                                {'children': [{'label': <django.utils.functional.__proxy__ object at 0x0214C8B0>,
                                               'url_name': 'dashboard:promotion-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C8F0>,
                                               'url_name': 'dashboard:promotion-list-by-page'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C930>,
                                               'url_name': 'dashboard:page-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C970>,
                                               'url_name': 'dashboard:comms-list'},
                                              {'label': <django.utils.functional.__proxy__ object at 0x0214C9B0>,
                                               'url_name': 'dashboard:reviews-list'}],
                                 'icon': 'icon-folder-close',
                                 'label': <django.utils.functional.__proxy__ object at 0x0214C870>},
                                {'icon': 'icon-bar-chart',
                                 'label': <django.utils.functional.__proxy__ object at 0x0214C9F0>,
                                 'url_name': 'dashboard:reports-index'}],
 'OSCAR_DEFAULT_CURRENCY': 'GBP',
 'OSCAR_EAGER_ALERTS': True,
 'OSCAR_FROM_EMAIL': 'oscar@example.com',
 'OSCAR_IMAGE_FOLDER': 'images/products/%Y/%m/',
 'OSCAR_MAX_BASKET_QUANTITY_THRESHOLD': 10000,
 'OSCAR_MISSING_IMAGE_URL': 'image_not_found.jpg',
 'OSCAR_MODERATE_REVIEWS': False,
 'OSCAR_OFFER_BLACKLIST_PRODUCT': None,
 'OSCAR_PARTNER_WRAPPERS': {},
 'OSCAR_PRODUCTS_PER_PAGE': 20,
 'OSCAR_PROMOTION_FOLDER': 'images/promotions/',
 'OSCAR_PROMOTION_MERCHANDISING_BLOCK_TYPES': (('Countdown', 'Vertical list'),
                                               ('List', 'Horizontal list'),
                                               ('TabbedBlock',
                                                'Tabbed block'),
                                               ('SingleProduct',
                                                'Single product')),
 'OSCAR_RECENTLY_VIEWED_PRODUCTS': 20,
 'OSCAR_SEARCH_SUGGEST_LIMIT': 10,
 'OSCAR_SEND_REGISTRATION_EMAIL': True,
 'OSCAR_SHOP_NAME': 'Oscar',
 'OSCAR_SHOP_TAGLINE': 'Domain-driven e-Commerce for Django',
 'OSCAR_UPLOAD_ROOT': '/tmp'}
PROJECT_DIR 
'C:\Users\Radhe Krishan\Desktop\gg\wsgi\meanit\meanit'
OSCAR_MAX_BASKET_QUANTITY_THRESHOLD 
10000
SQL_DEBUG  
True
COMPRESS_ENABLED  
True
SHORT_DATE_FORMAT  
'm/d/Y'
CACHE_MIDDLEWARE_KEY_PREFIX 
u'**_****************_'
COMPRESS_OFFLINE  
False
TIME_ZONE  
'Europe/London'
FILE_UPLOAD_MAX_MEMORY_SIZE 
2621440
EMAIL_BACKEND  
'django.core.mail.backends.console.EmailBackend'
DEFAULT_TABLESPACE  
''
TEMPLATE_CONTEXT_PROCESSORS 
('django.contrib.auth.context_processors.auth',
 'django.core.context_processors.request',
 'django.core.context_processors.debug',
 'django.core.context_processors.i18n',
 'django.core.context_processors.media',
 'django.core.context_processors.static',
 'django.contrib.messages.context_processors.messages',
 'oscar.apps.search.context_processors.search_form',
 'oscar.apps.promotions.context_processors.promotions',
 'oscar.apps.checkout.context_processors.checkout',
 'oscar.core.context_processors.metadata',
 'oscar.apps.customer.notifications.context_processors.notifications')
OSCAR_SEND_REGISTRATION_EMAIL  
True
SESSION_COOKIE_AGE  
1209600
SETTINGS_MODULE 
'meanit.settings'
USE_ETAGS  
False
SESSION_COOKIE_DOMAIN  
None
LANGUAGES  
(('en-gb', 'English'),
 ('da', 'Danish'),
 ('de', 'German'),
 ('el_GR', 'Greek'),
 ('en', 'English'),
 ('es', 'Spanish'),
 ('fr', 'French'),
 ('it', 'Italian'),
 ('ja', 'Japanese'),
 ('pl', 'Polish'),
 ('pt_BR', 'Portugese'),
 ('ru_RU', 'Russian'),
 ('sk', 'Slovakian'))
COMPRESS_CLOSURE_COMPILER_BINARY  
'java -jar compiler.jar'
FILE_UPLOAD_TEMP_DIR  
None
INTERNAL_IPS  
('127.0.0.1',)
STATIC_URL  
'/static/'
EMAIL_PORT  
25
USE_TZ  
True
SHORT_DATETIME_FORMAT  
'm/d/Y P'
PASSWORD_HASHERS  
u'**_****************_'
ABSOLUTE_URL_OVERRIDES  
{}
OSCAR_MISSING_IMAGE_URL 
'image_not_found.jpg'
OSCAR_COOKIES_DELETE_ON_LOGOUT  
['oscar_recently_viewed_products']
CACHE_MIDDLEWARE_SECONDS  
600
DEBUG_TOOLBAR_CONFIG  
{'INTERCEPT_REDIRECTS': False,
 'SHOW_TOOLBAR_CALLBACK': <function is_internal at 0x0213F7F0>}
DATETIME_INPUT_FORMATS  
('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M:%S.%f',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M:%S.%f',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M:%S.%f',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')
ROSETTA_STORAGE_CLASS  
'rosetta.storage.SessionRosettaStorage'
OSCAR_BASKET_COOKIE_LIFETIME  
604800
EMAIL_HOST_USER 
''
PROFANITIES_LIST  
u'**_*****************'
"
12431,django-oscar,django-oscar,25,closed,600,1,https://api.github.com/repos/django-oscar/django-oscar/issues/600/comments,https://github.com/django-oscar/django-oscar/issues/600,[],Tox can't handle double Django dependency,"Currently, tox doesn't launch because it gets conflicting version numbers for Django. This was introduced in https://github.com/tangentlabs/django-oscar/commit/b91b9e892b880bd4635d583e2790fe2c5c1c062e. 

The workaround is to temporarily remove the Django line from `requirements.txt`. 

```
py27-1.4 installdeps: -r/home/m/gits/tangent/django-oscar/requirements.txt, django==1.4.5
ERROR: invocation failed, logfile: /home/m/gits/tangent/django-oscar/.tox/py27-1.4/log/py27-1.4-1.log
ERROR: actionid=py27-1.4
msg=getenv
cmdargs= [ ... ]
Double requirement given: django<1.5 (from -r /home/m/gits/tangent/django-oscar/requirements.txt (line 19)) (already in django==1.4.5, name='django')
Storing complete log in /home/m/.pip/pip.log

ERROR: could not install deps [-r/home/m/gits/tangent/django-oscar/requirements.txt, django==1.4.5]
```
"
12445,django-oscar,django-oscar,25,closed,584,5,https://api.github.com/repos/django-oscar/django-oscar/issues/584/comments,https://github.com/django-oscar/django-oscar/pull/584,[],Many CharFields have null=True set,"That is [discouraged](https://docs.djangoproject.com/en/dev/ref/models/fields/#null) as it means two possible states for empty data. There's a limited amount of use cases for it, but given the widespread usage, I'd say that's a bug. 
"
12450,django-oscar,django-oscar,25,closed,579,1,https://api.github.com/repos/django-oscar/django-oscar/issues/579/comments,https://github.com/django-oscar/django-oscar/issues/579,[],Investigate single percent signs in .po files,"It seems that there's a subtle bug in our .po files regarding unescaped percent signs.

![Screenshot from 2013-03-13 215049](https://f.cloud.github.com/assets/509427/269622/c7df3f26-8fa2-11e2-963e-6b030a8a2b08.png)

A quick google revealed https://code.djangoproject.com/ticket/11240#comment:16

I'll have a look.
"
12475,django-oscar,django-oscar,26,closed,553,1,https://api.github.com/repos/django-oscar/django-oscar/issues/553/comments,https://github.com/django-oscar/django-oscar/issues/553,[],make puppet fails,"```
$ make puppet
# Install puppet modules required to set-up a Vagrant box
rm -rf sites/puppet/modules/*
puppet module install --target-dir sites/puppet/modules/ saz-memcached -v 2.0.2
Preparing to install into /tmp/django-oscar/sites/puppet/modules ...
Error: Could not install module 'saz-memcached' (2.0.2)
  Directory /tmp/django-oscar/sites/puppet/modules does not exist
make: *** [puppet] Error 1
$ puppet --version
2.7.18
```
"
12477,django-oscar,django-oscar,26,closed,551,1,https://api.github.com/repos/django-oscar/django-oscar/issues/551/comments,https://github.com/django-oscar/django-oscar/issues/551,[],apps partner error on first migration,"Hello,

I have an error when i migrate oscar for the first time on partner app.
I had the error for catalogue because of mysql restriction ( Fix #190 )

But this time however i found again some max length 1024 in partner files, which i change of course, i still have an error :

:1234: django.db.utils.DatabaseError: (1146, ""Table 'bzb_0_1.partner_stockrecord' doesn't exist"")

it seems that he try to create the table twice...

:1234:  Running migrations for partner:
- Migrating forwards to 0003_auto__add_unique_stockrecord_partner_partner_sku.
  > partner:0002_auto__add_stockalert__add_abstractstockalert__add_field_stockrecord_lo
  FATAL ERROR - The following SQL query failed: ALTER TABLE `partner_stockrecord` ADD COLUMN `low_stock_threshold` integer UNSIGNED   NULL;
  The error was: (1146, ""Table 'bzb_0_1.partner_stockrecord' doesn't exist"") 
"
12483,django-oscar,django-oscar,26,closed,544,1,https://api.github.com/repos/django-oscar/django-oscar/issues/544/comments,https://github.com/django-oscar/django-oscar/issues/544,[],Cannot find module '../lib/less',"```
# pwd
*************/django-oscar
```

```
# oscar/bin/lessc

module.js:340
    throw err;
          ^
Error: Cannot find module '../lib/less'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at Object.<anonymous> (/django-oscar/oscar/bin/lessc:8:12)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:499:10)
```
"
12488,django-oscar,django-oscar,26,closed,539,0,https://api.github.com/repos/django-oscar/django-oscar/issues/539/comments,https://github.com/django-oscar/django-oscar/issues/539,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Django dependency in requirements.txt,"As Django 1.5 has now been released, installing the dependencies for oscar by running a pip install on the requirements.txt file installs Django 1.5. This is because the entry for Django in the requirements.txt file is Django>=1.4 and not a fixed release.

This causes all management commands to fail with the following stack trace:

```
File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/apps/offer/models.py"",     line 16, in <module>
    from oscar.models.fields import PositiveDecimalField, ExtendedURLField
  File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/models/fields.py"", line     5, in <module>
    from oscar.forms import fields
  File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/forms/fields.py"", line     2, in <module>
    from django.core.validators import URL_VALIDATOR_USER_AGENT
ImportError: cannot import name URL_VALIDATOR_USER_AGENT
```
"
12489,django-oscar,django-oscar,26,closed,538,1,https://api.github.com/repos/django-oscar/django-oscar/issues/538/comments,https://github.com/django-oscar/django-oscar/issues/538,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Django dependency in requirements.txt,"As Django 1.5 has now been released, installing the dependencies for oscar by running a pip install on the requirements.txt file installs Django 1.5. This is because the entry for Django in the requirements.txt file is Django>=1.4 and not a fixed release.

This causes all management commands to fail with the following stack trace:

```
File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/apps/offer/models.py"",     line 16, in <module>
    from oscar.models.fields import PositiveDecimalField, ExtendedURLField
  File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/models/fields.py"", line     5, in <module>
    from oscar.forms import fields
  File ""/home/mohammad/Envs/anythinggift/src/django-oscar/oscar/forms/fields.py"", line     2, in <module>
    from django.core.validators import URL_VALIDATOR_USER_AGENT
ImportError: cannot import name URL_VALIDATOR_USER_AGENT
```
"
12493,django-oscar,django-oscar,26,closed,534,1,https://api.github.com/repos/django-oscar/django-oscar/issues/534/comments,https://github.com/django-oscar/django-oscar/pull/534,[],Fix bug when hiding related_products in ProductForm,"Sorry for not noticing this bug before the recent changes to the ProductUpdateView were merged.

I'm talking about https://github.com/tangentlabs/django-oscar/commit/99c0c87369369b8aafadc0625cfac86c2e953209#L2R158.

This pull requests checks if the `related_products` field is present before setting the queryset. I also refactored the queryset out into a separate function on `ProductForm` to make it overridable.

In a separate commit, I've changed the default queryset for the related products to the `BrowsableProductManager`. I'm not sure if it's intended behavior to be able to select non-canonical products. If so, please only cherry-pick the other commit across.

Tests run fine.
"
12504,django-oscar,django-oscar,26,closed,523,5,https://api.github.com/repos/django-oscar/django-oscar/issues/523/comments,https://github.com/django-oscar/django-oscar/issues/523,[],500 error running sandbox,"Traceback, I can provide more info, if needed:

```
FilterError at /
module.js:340
    throw err;
          ^
Error: Cannot find module '../lib/less'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/me/.virtualenvs/oscar/bin/lessc:8:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
Request Method: GET
Request URL:    http://localhost:8000/
Django Version: 1.4.4
Exception Type: FilterError
Exception Value:    
module.js:340
    throw err;
          ^
Error: Cannot find module '../lib/less'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/home/me/.virtualenvs/oscar/bin/lessc:8:12)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
Exception Location: /home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_compressor-1.2-py2.7.egg/compressor/filters/base.py in input, line 133
Python Executable:  /home/me/.virtualenvs/oscar/bin/python
Python Version: 2.7.3
Python Path:    
['/tmp/django-oscar/sites/sandbox',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/tmp/django-oscar',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/virtual_less-0.0.1_1.3.3-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/virtual_node-0.0.1-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_compressor-1.2-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/Babel-0.9.6-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/python_memcached-1.48-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/sorl_thumbnail-11.12-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_treebeard-1.61-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_haystack-2.0.0_beta-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_extra_views-0.5.5-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/South-0.7.6-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/PIL-1.1.7-py2.7-linux-x86_64.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/Django-1.4.4-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/django_appconf-0.6-py2.7.egg',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages/six-1.2.0-py2.7.egg',
 '/home/me/.virtualenvs/oscar/lib/python2.7',
 '/home/me/.virtualenvs/oscar/lib/python2.7/plat-linux2',
 '/home/me/.virtualenvs/oscar/lib/python2.7/lib-tk',
 '/home/me/.virtualenvs/oscar/lib/python2.7/lib-old',
 '/home/me/.virtualenvs/oscar/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/me/.virtualenvs/oscar/local/lib/python2.7/site-packages']
Server time:    Wed, 20 Feb 2013 03:47:37 +0000
```
"
12508,django-oscar,django-oscar,26,closed,519,2,https://api.github.com/repos/django-oscar/django-oscar/issues/519/comments,https://github.com/django-oscar/django-oscar/pull/519,[],AJAX update/remove in Basket throws 500,"File ""/Users/aibon/dev/django-oscar/oscar/apps/basket/views.py"", line 206, in formset_valid  **kwargs)
TypeError: type object got multiple values for keyword argument 'queryset'
"
12516,django-oscar,django-oscar,26,closed,511,5,https://api.github.com/repos/django-oscar/django-oscar/issues/511/comments,https://github.com/django-oscar/django-oscar/pull/511,[],make oscar to support django 1.5 AUTH_USER_MODEL feature,"Basically i just replace all 'auth.User' with settings.AUTH_USER_MODEL, and put AUTH_USER_MODEL default to 'auth.User' in oscar/defaults.py

all tests passed:

```
    (oscar)ayik:oscar-chenull (issue/472/django1.5)$ ./runtests.py 
    nosetests --verbosity 1 tests -s -x --with-progressive
    Creating test database for alias 'default'...

    OK!  520 tests, 0 failures, 0 errors in 20.8s
    Destroying test database for alias 'default'...
    (oscar)ayik:oscar-chenull (issue/472/django1.5)$ 
```

[link to original discussion at mailing list](https://groups.google.com/d/topic/django-oscar/JJwlin50RYM/discussion)
"
12524,django-oscar,django-oscar,26,closed,503,3,https://api.github.com/repos/django-oscar/django-oscar/issues/503/comments,https://github.com/django-oscar/django-oscar/pull/503,[],Fix installing haystack from github at specific commit using setuptools,"I just opened this issue to track the problem with installing haystack from github at a specific commit. This was thought to be fixed in #489 but there still seems to be an issue with that as [described at the end of the PR](https://github.com/tangentlabs/django-oscar/pull/489#commitcomment-2508241).

I can reproduce the issue locally from a fresh checkout. The setup that works with `make sandbox` (meaning `python setup.py develop` is:

```
      dependency_links=['https://github.com/toastdriven/django-haystack/tarball/0e95d8696f8ba770f9c60152136aba32f5591fd6#egg=django-haystack-2.0.0-beta'],
```

However, I haven't tested whether this works with `python setup.py install` as well. We had issues with installing from a tarball like this before so I am not sure if it will work with the above solution or not. This needs some additional testing before putting it up as a PR.
"
12525,django-oscar,django-oscar,26,closed,502,2,https://api.github.com/repos/django-oscar/django-oscar/issues/502/comments,https://github.com/django-oscar/django-oscar/pull/502,[],Fix template error for product class.,"templates/oscar/dashboard/catalogue/product_update.html tried to render the product class via `{{ product.product_class }}`. `product` is not in the template context, but `product_class` is. Altering the template code gives the expected result.

The bug is currently visible in the Oscar Sandbox.

Note: This was spotted because I have [TEMPLATE_STRING_IF_INVALID](https://docs.djangoproject.com/en/dev/ref/settings/#template-string-if-invalid) set to something obnoxious. Recommended.

dashboard/catalogue/views.py:

```
class ProductCreateView(generic.CreateView):
    [...]

    def get_context_data(self, **kwargs):
        ctx = super(ProductCreateView, self).get_context_data(**kwargs)
        pclass = self.get_product_class()
        if 'stockrecord_form' not in ctx:
            ctx['stockrecord_form'] = StockRecordForm(pclass)
        if 'category_formset' not in ctx:
            ctx['category_formset'] = ProductCategoryFormSet()
        if 'image_formset' not in ctx:
            ctx['image_formset'] = ProductImageFormSet()
        ctx['title'] = _('Create new %s product') % pclass.name
        ctx['product_class'] = pclass
        return ctx

    def get_product_class(self):
        return ProductClass.objects.get(id=self.kwargs['product_class_id'])

    def get_form_kwargs(self):
        kwargs = super(ProductCreateView, self).get_form_kwargs()
        kwargs['product_class'] = self.get_product_class()
        return kwargs
```
"
12552,django-oscar,django-oscar,26,closed,475,0,https://api.github.com/repos/django-oscar/django-oscar/issues/475/comments,https://github.com/django-oscar/django-oscar/issues/475,[],Post-save signal conflict with syncdb,"Found an issue when using django-oscar-stores in that a signal receiver errors when creating a superuser via syncdb:

```
...
File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py"", line 124, in handle
    User.objects.db_manager(database).create_superuser(username, email, password)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/contrib/auth/models.py"", line 164, in create_superuser
    u = self.create_user(username, email, password)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/contrib/auth/models.py"", line 160, in create_user
    user.save(using=self._db)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/models/base.py"", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/models/base.py"", line 565, in save_base
    created=(not record_exists), raw=raw, using=using)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/dispatch/dispatcher.py"", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/src/django-oscar/oscar/apps/customer/alerts/receivers.py"", line 20, in migrate_alerts_to_user
    alerts.update(user=instance, key=None, email=None)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/models/query.py"", line 536, in update
    rows = query.get_compiler(self.db).execute_sql(None)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 988, in execute_sql
    cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 818, in execute_sql
    cursor.execute(sql, params)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/backends/util.py"", line 40, in execute
    return self.cursor.execute(sql, params)
  File ""/Users/dwinterbottom/.virtualenvs/meridian/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation ""customer_productalert"" does not exist
LINE 1: UPDATE ""customer_productalert"" SET ""user_id"" = 1, ""key"" = NU...
```
"
12554,django-oscar,django-oscar,26,closed,473,8,https://api.github.com/repos/django-oscar/django-oscar/issues/473/comments,https://github.com/django-oscar/django-oscar/issues/473,[],Problem with django_sorting and templates,"Hi, I try to use app django_sorting on the products list of catalogue/browse.html template to order it by different fields.

This is my template recap:

{% load promotion_tags %}
{% load i18n %}
{% load sorting_tags %}
....
{% block content %}
    {% autosort products %}
    ....
                        <ul class=""dropdown-menu"">
                        <li>{% anchor title 'Productos por orden alfabético' %}</li>
                        <li>{% anchor score 'Productos mejor valorados' %}</li>
                    </ul>
                    </li>
                </ul>
....
    {% if page_obj %}
        {% include ""catalogue/partials/pagination.html"" %}
    % endif %}
    <ol class=""products four"">
        {% for product in products %}
            <li>{% include ""catalogue/partials/product.html"" %}</li>
        {% endfor %}
    </ol>
    {% if page_obj %}
        {% include ""catalogue/partials/pagination.html"" %}
    {% endif %}

When I use one of the sorting links, i get this:

AssertionError at /catalogue/
Cannot reorder a query once a slice has been taken.
Request Method: GET
Request URL:    http://localhost:8000/catalogue/?sort=title
Django Version: 1.4.2
Exception Type: AssertionError
Exception Value:  
Cannot reorder a query once a slice has been taken.
Exception Location: /home/lynde/www/oscar04/local/lib/python2.7/site-packages/django/db/models/query.py in order_by, line 756
Python Executable:  /home/lynde/www/oscar04/bin/python
Python Version: 2.7.3

Thanks!!
@gissues:{""order"":92.30769230769234,""status"":""backlog""}
"
12567,django-oscar,django-oscar,26,closed,460,3,https://api.github.com/repos/django-oscar/django-oscar/issues/460/comments,https://github.com/django-oscar/django-oscar/issues/460,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}, {""default"": false, ""name"": ""\u261b Needs more info"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%9B%20Needs%20more%20info"", ""color"": ""DDDDDD"", ""node_id"": ""MDU6TGFiZWwxNTMyMTc2NQ=="", ""id"": 15321765}]",get_model for Product in promotions apps fails with overridden catalogue app,"I just ran into an issue with Oscar and overriding apps. I am not sure if this is a bug or just a symptom for some incorrect configuration.

In project using Oscar, I have an override for the catalogue and customise the `Product` model. The settings to override the core app are as follows:

```
INSTALLED_APPS = [
     ...

    'myproject',
]

from oscar import get_core_apps
INSTALLED_APPS += get_core_apps([
    'myproject.catalogue',
])
```

In general, this works fine. The problem occurs when using the 'promotions' app. In `models.py`, it imports the Product model using get_model first thing, after importing all the required packages. This is in [line 12 of oscar.apps.promotions.models](https://github.com/tangentlabs/django-oscar/blob/master/oscar/apps/promotions/models.py#L12).

What happens now is that putting a promotion on a page, e.g. the home page, raises an Exception that Product is None when trying to access the browsable manager:

```
    return (Product.browsable.all()
                    .select_related('stockrecord__partner')
                    .prefetch_related('variants', 'images')
                    .order_by('-score'))
```

It seems that because I have overriden `oscar.apps.catalogue` the core models are not loaded (as expected) but the models from `myproject.catalogue` are further down in the list of installed apps and are **not yet** loaded. Hence, django's `get_model` cannot find the appropriate model. 

The way I fixed it for now is retrieving the model within the function it is called in which changes it to:

```
    return (get_model('catalogue', 'Product').browsable.all()
                    .select_related('stockrecord__partner')
                    .prefetch_related('variants', 'images')
                    .order_by('-score'))
```

If this is the only way to fix it, I'll submit it as a PR but I thought I'd post it first in case this needs fixing on a more fundamental level. I can see this being something that'll happen with other apps as well. 

Any thoughts on this?
"
12666,django-oscar,django-oscar,27,closed,359,2,https://api.github.com/repos/django-oscar/django-oscar/issues/359/comments,https://github.com/django-oscar/django-oscar/pull/359,[],Add email dashboard,"An admin cannot:
- Create new 'communication types'.  These have to be created by a developer.

An admin can:
- Edit subject, body, body HTML
- Preview a merged email after specifying an order
- Send a preview email to a user

The system will provide:
- Testing fixtures for the common emails: welcome, forgotten password, order confirmation

Notes:
- The HTML editor will show Django variables.  If the syntax is invalid when saved, an error will be shown.
"
12685,django-oscar,django-oscar,28,closed,340,1,https://api.github.com/repos/django-oscar/django-oscar/issues/340/comments,https://github.com/django-oscar/django-oscar/issues/340,"[{""default"": false, ""name"": ""\u2605 New feature"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%85%20New%20feature"", ""color"": ""9FE9A5"", ""node_id"": ""MDU6TGFiZWw4OTkzMw=="", ""id"": 89933}]",Email editing dashboard,"An admin cannot:
- Create new 'communication types'.  These have to be created by a developer.

An admin can:
- Edit subject, body, body HTML
- Preview a merged email after specifying an order
- Send a preview email to a user

The system will provide:
- Testing fixtures for the common emails: welcome, forgotten password, order confirmation

Notes:
- The HTML editor will show Django variables.  If the syntax is invalid when saved, an error will be shown.
"
12701,django-oscar,django-oscar,28,closed,324,4,https://api.github.com/repos/django-oscar/django-oscar/issues/324/comments,https://github.com/django-oscar/django-oscar/pull/324,[],Check for existing email when updating profile,"A user in Oscar is identified by email address instead of the
username. This is, however, not set as a `unique` constraint
in the user model in `django.contrib.auth.models.User`. Checks
if an email already exists are carried out when a user registers
but are ignored when a registered user changes their
profile. This can lead to multiple users having the same email
address which should not happen.

I provide a failing test with a mixin that can be used in both
the `UserForm` and `UserAndProfileForm` to clean the email
field when validating the form. A `ValidationError` is raised
when a user with this email address already exists and is not
the currently edited instance (makes sure that profile updates
with unchanged email work still).

I am not sure if this is the best way of handling the validation.
Feedback is welcome.

_Note:_ It might also be worth considering to change to a custom
`User` model when Oscar starts using Django 1.5 as it now
supports swappable user models. It would allow for making the
email field truely unique.
"
12719,django-oscar,django-oscar,28,closed,305,0,https://api.github.com/repos/django-oscar/django-oscar/issues/305/comments,https://github.com/django-oscar/django-oscar/issues/305,[],logs folder was not created by default,"After the following:

> make sandbox
> cd sites/sandbox
> ./manage.py runserver

I get:

> IOError: [Errno 2] No such file or directory: '/home/kepler/virtualenv-oscar/django-oscar/sites/sandbox/logs/errors.log'

Then I manually created logs directory, that was not created by default (maybe permission issue, probably).

And now it work properly, thank you.
"
12720,django-oscar,django-oscar,28,closed,304,1,https://api.github.com/repos/django-oscar/django-oscar/issues/304/comments,https://github.com/django-oscar/django-oscar/issues/304,[],Requirements and Tests Issues,"Hello, 

> commit 60c2c6cbb63a8d30070d1cebe5cb43fbf243d9cd

There're requirements missing inside the requirements.txt:

> sorl-thumbnail
> django-treebeard
> haystack
> PIL

the requirements.txt are important to install all dependencies directly using pip -r

and i'm getting error when running runtests.py:

http://bpaste.net/show/yqosJyH96EyoboeQZzWg/

Thank You!
"
12722,django-oscar,django-oscar,28,closed,302,4,https://api.github.com/repos/django-oscar/django-oscar/issues/302/comments,https://github.com/django-oscar/django-oscar/pull/302,"[{""default"": false, ""name"": ""\u2601 Bug"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%81%20Bug"", ""color"": ""F8C1C1"", ""node_id"": ""MDU6TGFiZWw5NzM0NA=="", ""id"": 97344}]",Attribute 'score' in Product model breaks the use of haystacks simple backend,"I just came across an issue where haystack's simple backend raises an exception:

`TypeError: ""__init__() got multiple values for keyword argument 'score'`

This is caused by Oscar's `Product` model and its attribute `score`. A corresponding issue is mentioned in [streeter's comment](https://github.com/toastdriven/django-haystack/issues/482#issuecomment-7473328).

I am aware that this might not be something that will be fixed as the only solution in Oscar that I can think of is changing the attribute `score` to something else. I thought, I'd put it in here though, in case some one comes across the same issue. 

The easiest solution seems to be to use  Mplsbeb/whoosh instead of the simple backend or patching the simple backend by removing the `score` attribute before passing it into the constructor of the result class in [line 74](https://github.com/toastdriven/django-haystack/blob/master/haystack/backends/simple_backend.py#L74).
"
12741,django-oscar,django-oscar,28,closed,283,3,https://api.github.com/repos/django-oscar/django-oscar/issues/283/comments,https://github.com/django-oscar/django-oscar/pull/283,[],Flatpages in OSCAR_CORE_APPS and fix in dashboard/pages/index.html,"Since we have this : #121 Managing flatpages from the dashboard without flatpages in oscar_core_apps django will rise error in http://host/dashboard/pages/.

More about the case :

``` python
'NoneType' object has no attribute 'objects'
```

This is cause by **oscar/apps/dashboard/pages/views.py** in those lines:

``` python
from django.db.models.loading import get_model
FlatPage = get_model('flatpages', 'FlatPage')
model = FlatPage # PageListView class
queryset = self.model.objects.all().order_by('title') # this line rises NoneType error
```

This came from ipdb (breakpoint directly befor rising exception):

ipdb> from django.db.models.loading import get_model
ipdb> FlatPage = get_model('flatpages', 'FlatPage')
ipdb> FlatPage
ipdb> FlatPage is None
True

Also i found a bug in **dashboard/pages/index.html**.
If there is not flatpages defined, there;s no ""create page"" button. So i moved it outside this if statement.
"
12759,django-oscar,django-oscar,28,closed,265,2,https://api.github.com/repos/django-oscar/django-oscar/issues/265/comments,https://github.com/django-oscar/django-oscar/pull/265,[],removed hardcoded imports in helpers module,"While executing unit tests using Django's test framework I came across the problem of `oscar.app.catalogue` models being imported instead of the overriding models. I tracked the error down to `oscar.test.helpers` where importing models directly instead of using `get_class` or `get_classes` loaded the Oscar models instead of the overriding ones. I fixed this issue by replacing the hardcoded imports with the equivalent calls to `get_class` and `get_classes`.
"
12764,django-oscar,django-oscar,28,closed,260,1,https://api.github.com/repos/django-oscar/django-oscar/issues/260/comments,https://github.com/django-oscar/django-oscar/issues/260,[],500 error on product pages,"I followed the 'Running the sandbox locally' instructions without any issues, I am able to run the server but can't view any pages with products on them?

```
Traceback (most recent call last):
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py"", line 85, in run
    self.result = application(self.environ, self.start_response)
  File ""/Users/Nneon/.virtualenvs/oscar/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/contrib/staticfiles/handlers.py"", line 67, in __call__
    return self.application(environ, start_response)
  File ""/Users/Nneon/.virtualenvs/oscar/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/wsgi.py"", line 241, in __call__
    response = self.get_response(request)
  File ""/Users/Nneon/.virtualenvs/oscar/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py"", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""/Users/Nneon/.virtualenvs/oscar/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py"", line 215, in handle_uncaught_exception
    'request': request
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 1158, in error
    self._log(ERROR, msg, args, **kwargs)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 1250, in _log
    self.handle(record)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 1260, in handle
    self.callHandlers(record)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 1300, in callHandlers
    hdlr.handle(record)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 744, in handle
    self.emit(record)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 925, in emit
    self.stream = self._open()
  File ""/Users/Nneon/.virtualenvs/django-oscar/oscar/core/logging/handlers.py"", line 26, in _open
    return BaseFileHandler._open(self)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/logging/__init__.py"", line 912, in _open
    stream = open(self.baseFilename, self.mode)
IOError: [Errno 2] No such file or directory: '/Users/Nneon/.virtualenvs/django-oscar/sandbox/logs/errors.log'
[30/Jul/2012 21:56:00] ""GET /products/books/ HTTP/1.1"" 500 59
```
"
12767,django-oscar,django-oscar,28,closed,257,0,https://api.github.com/repos/django-oscar/django-oscar/issues/257/comments,https://github.com/django-oscar/django-oscar/issues/257,[],http 500 on accessing /basket/ via curl,"I've got a multiple 500 errors. Initially they were generated by googlebot accessing `/basket/`, but it could be replicated by accesing same url via curl (no cookies etc.)

Reported error was:

```
File ""/home/alesklep/.virtualenvs/oscar/local/lib/python2.7/site-packages/Django-1.4-py2.7.egg/django/forms/models.py"", line 470, in get_queryset
if not qs.ordered:

AttributeError: 'list' object has no attribute 'ordered'
```

core root of the issue is in the `AbstractBasket.all_lines()` in `apps/basket/abstract_models.py` where it returns an empty list:

```
...
if self.id is None:
    return []
...
```

this function should return an empty queryset:

```
...
if self.id is None:
    return AbstractBasket.objects.none()
...
```
"
12778,django-oscar,django-oscar,29,closed,246,6,https://api.github.com/repos/django-oscar/django-oscar/issues/246/comments,https://github.com/django-oscar/django-oscar/pull/246,[],Don't include CSS files in package ,"Use less files directly so they can be modified in development without the extra step of compilation.

When in production, perhaps use compressor::

```
{% if DEBUG %}
    <link rel=""stylesheet/less"" type=""text/css"" href=""{{ STATIC_URL }}less/styles.less""> 
    <script src=""{{ STATIC_URL }}js/less-1.3.0.min.js""></script>
{% else %}
    <!-- use django compressor and lessc to compile and compress less files in production -->
    {% compress css %}
    <link rel=""stylesheet"" type=""text/less"" href=""{{ STATIC_URL }}less/styles.less"">
    {% endcompress %}
{% endif %}
```

See https://groups.google.com/forum/?fromgroups#!topic/django-oscar/3qlQV1qXCGA
"
12793,django-oscar,django-oscar,29,closed,231,1,https://api.github.com/repos/django-oscar/django-oscar/issues/231/comments,https://github.com/django-oscar/django-oscar/issues/231,[],DjangoUnicodeDecodeError in oscar.apps.order.abstract_models.py,"Hi,
first of all, sorry for my english; i'm italian :-)
When i try to delete an order in the admin site i've got this error:

**DjangoUnicodeDecodeError at /admin/order/order/**
'ascii' codec can't decode byte 0xe2 in position 21: ordinal not in range(128). You passed in <ShippingEventQuantity: [Bad Unicode data]> (<class 'oscar.apps.order.abstract_models.ShippingEventQuantity'>)

The solution is very simple; add an 'u' in the unicode function of ShippingEventQuantity model in oscar.apps.order.abstract_models.py

I saw an old issue about the unicode functions. Maybe is a little forgetfulness. :-)
Bye,
Marco
"
12809,django-oscar,django-oscar,29,closed,215,2,https://api.github.com/repos/django-oscar/django-oscar/issues/215/comments,https://github.com/django-oscar/django-oscar/issues/215,[],Unfinished transaction when accessing django /admin after clean installation,"Installed by hand by this guide: http://django-oscar.readthedocs.org/en/latest/getting_started.html
database backend is postgresql 8.4 via psycopg2

Environment:

Request Method: GET
Request URL: http://oobchod.progredior.yac/admin/

Django Version: 1.4
Python Version: 2.6.6
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'south',
 'oscar',
 'oscar.apps.analytics',
 'oscar.apps.order',
 'oscar.apps.checkout',
 'oscar.apps.shipping',
 'oscar.apps.catalogue',
 'oscar.apps.catalogue.reviews',
 'oscar.apps.basket',
 'oscar.apps.payment',
 'oscar.apps.offer',
 'oscar.apps.address',
 'oscar.apps.partner',
 'oscar.apps.customer',
 'oscar.apps.promotions',
 'oscar.apps.search',
 'oscar.apps.voucher',
 'oscar.apps.dashboard',
 'oscar.apps.dashboard.reports',
 'oscar.apps.dashboard.users',
 'oscar.apps.dashboard.orders',
 'oscar.apps.dashboard.promotions',
 'oscar.apps.dashboard.catalogue',
 'oscar.apps.dashboard.offers',
 'oscar.apps.dashboard.ranges',
 'oscar.apps.dashboard.vouchers',
 'debug_toolbar']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'oscar.apps.basket.middleware.BasketMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Traceback:
File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/core/handlers/base.py"" in get_response
1.                 response = middleware_method(request, response)
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/debug_toolbar/panels/template.py"" in process_response
2.                     pformat(k(self.request))) for k in get_standard_processors()
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/oscar/apps/promotions/context_processors.py"" in promotions
3.     split_by_position(promotions, context)
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/oscar/apps/promotions/context_processors.py"" in split_by_position
4.     for linked_promotion in linked_promotions:
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/models/query.py"" in _result_iter
5.                 self._fill_cache()
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/models/query.py"" in _fill_cache
6.                     self._result_cache.append(self._iter.next())
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/models/query.py"" in iterator
7.         for row in compiler.results_iter():
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/models/sql/compiler.py"" in results_iter
8.         for rows in self.execute_sql(MULTI):
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/models/sql/compiler.py"" in execute_sql
9.         cursor.execute(sql, params)
   File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/backends/util.py"" in execute
10.             return self.cursor.execute(sql, params)
    File ""/home/yac/.local/share/virtualenvs/oscar/pk-eshop/lib/python2.6/site-packages/django/db/backends/postgresql_psycopg2/base.py"" in execute
11.             return self.cursor.execute(query, args)

Exception Type: DatabaseError at /admin/
Exception Value: current transaction is aborted, commands ignored until end of transaction block
"
12844,django-oscar,django-oscar,29,closed,180,3,https://api.github.com/repos/django-oscar/django-oscar/issues/180/comments,https://github.com/django-oscar/django-oscar/issues/180,[],"Missing requirements in the ""Take a peek"" section","```
./manage.py loaddata countries.json fixtures/pages.json
```

in http://tangentlabs.github.com/django-oscar/#takeapeek requires the user to install debug_toolbar and django_extensions -- this is not installed via python setup.py develop!
"
12855,django-oscar,django-oscar,29,closed,169,1,https://api.github.com/repos/django-oscar/django-oscar/issues/169/comments,https://github.com/django-oscar/django-oscar/issues/169,[],"AppNotFoundError while following ""Take a peek"" instructions","At the final step of http://tangentlabs.github.com/django-oscar/#takeapeek, where you run Django's server: 

`./manage.py runserver --settings=settings_simple`

The server starts but the pages return:

 `AppNotFoundError: No app found matching 'dashboard.offers.forms'`.

In settings_simple.py, add `'oscar.apps.dashboard.offers'` and `'oscar.apps.dashboard.ranges'` ro `INSTALLED_APPS` and this is resolved.
"
12856,django-oscar,django-oscar,29,closed,168,1,https://api.github.com/repos/django-oscar/django-oscar/issues/168/comments,https://github.com/django-oscar/django-oscar/issues/168,[],PIL import error while following demo instructions,"Following the instructions at http://tangentlabs.github.com/django-oscar/#takeapeek, i ran into a problem with this line:

`./manage.py oscar_import_catalogue_images data/books-images.tar.gz --settings=settings_simple`

```
  File ""/home/.../django-oscar/oscar/apps/catalogue/utils.py"", line 7, in <module>
    from PIL import Image as PImage
ImportError: No module named PIL
```

Changed that line to `import Image as PImage` and it worked.
"
12911,django-oscar,django-oscar,30,closed,113,2,https://api.github.com/repos/django-oscar/django-oscar/issues/113/comments,https://github.com/django-oscar/django-oscar/issues/113,[],issue when i try to test the sandbox version,"at http://tangentlabs.github.com/django-oscar/#takeapeek

everything is ok during installation

but when i run server, i have an django error page with the message : 

Template error

In template /root/python_pj/oscarnew/django-oscar/oscar/templates/partials/brand.html, error at line 16
Caught Error while rendering: unsupported locale setting
6           <div class=""btn-group"">
7               <a class=""btn"" href=""{% url basket:summary %}"">View Basket</a>
8               <a class=""btn dropdown-toggle"" data-toggle=""dropdown"" href=""#""> <span class=""caret""></span> </a>
9               <ul class=""dropdown-menu span9"">
10                  <li>
11                      {% include ""basket/partials/basket_quick.html"" %}
12                  </li>
13              </ul>
14          </div>
15      </li>

error is here >>> 16        <li class=""cart_summary""><strong>Basket total: <span>{{ basket.total_incl_tax|currency }}</span></strong></li>

17  </ul><!-- /cart -->

any help would be appreciated, thx
"
12957,django-oscar,django-oscar,30,closed,67,1,https://api.github.com/repos/django-oscar/django-oscar/issues/67/comments,https://github.com/django-oscar/django-oscar/pull/67,[],Search faceting,"- Fixed version of django-haystack
- Added faceting capabilities (fixing a bug to do so)
- Added default facet for ItemClass
- Added default facet for price_range - adding a custom property method to retrieve this
- Added 2 variables to oscar.defaults for defining price_range and max range in price which is used when price is above any of the ranges defined
- Default oscar search template now comes with both default facets
- Added selected_facets hidden CharField to search.forms
"
12970,django-oscar,django-oscar,30,closed,54,1,https://api.github.com/repos/django-oscar/django-oscar/issues/54/comments,https://github.com/django-oscar/django-oscar/pull/54,[],Just an empty class,"Lack of this class was causing following error while trying to import sample data: 

(oscar)owad@owad:~/workspace/django-oscar/examples/vanilla$ ./manage.py import_catalogue ../sample-data/books.csv 
Traceback (most recent call last):
  File ""./manage.py"", line 11, in <module>
    execute_manager(settings)
  File ""/home/owad/.virtualenvs/oscar/lib/python2.6/site-packages/django/core/management/**init**.py"", line 438, in execute_manager
    utility.execute()
  File ""/home/owad/.virtualenvs/oscar/lib/python2.6/site-packages/django/core/management/**init**.py"", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/owad/.virtualenvs/oscar/lib/python2.6/site-packages/django/core/management/**init**.py"", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File ""/home/owad/.virtualenvs/oscar/lib/python2.6/site-packages/django/core/management/**init**.py"", line 67, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File ""/home/owad/.virtualenvs/oscar/lib/python2.6/site-packages/django/utils/importlib.py"", line 35, in import_module
    **import**(name)
  File ""/home/owad/workspace/django-oscar/oscar/apps/partner/management/commands/import_catalogue.py"", line 9, in <module>
    import_module('partner.exceptions', ['CatalogueImportException'], locals())
  File ""/home/owad/workspace/django-oscar/oscar/core/loading.py"", line 42, in import_module
    return _import_classes_from_module(""oscar.apps.%s"" % module_label, classes, namespace)
  File ""/home/owad/workspace/django-oscar/oscar/core/loading.py"", line 80, in _import_classes_from_module
    namespace[classname] = getattr(imported_module, classname)
AttributeError: 'module' object has no attribute 'CatalogueImportException'
"
13010,django-oscar,django-oscar,31,closed,14,10,https://api.github.com/repos/django-oscar/django-oscar/issues/14/comments,https://github.com/django-oscar/django-oscar/issues/14,"[{""default"": false, ""name"": ""\u2605 New feature"", ""url"": ""https://api.github.com/repos/django-oscar/django-oscar/labels/%E2%98%85%20New%20feature"", ""color"": ""9FE9A5"", ""node_id"": ""MDU6TGFiZWw4OTkzMw=="", ""id"": 89933}]",Reviews and voting,"Create a new `oscar.reviews` app which provides reviews and voting functionality. 
- Each product can have reviews attached to it.  Each review has a title, a body and a score from 1-5.
- Signed in users can always submit reviews, anonymous users can only submit reviews if a setting 
  `OSCAR_ALLOW_ANON_REVIEWS` is set to true - it should default to false.
- If anon users can submit reviews, then we require their name, email address and an (optional) URL.
- By default, reviews must be approved before they are live.  However, if a setting `OSCAR_MODERATE_REVIEWS`
  is set to false, then they don't need moderation.
- The product page should have a review form on it, any errors in the submission will be shown on the same product page
- The product page will show the most recent 5 reviews with a link to browse all reviews for that product.
- The URL for browsing a products offers should be the normal product URL with /reviews appended at the end
- The product page should show the average score based on the reviews 
- The review browsing page should allow reviews to be sorted by score, or recency.
- Each review should have a permalink, ie it has its own page.
- Each reviews can be voted up or down by other users
- Only signed in users can vote
- A user can only vote once on each product once

It might be possible to use the Django comments framework for this.
"
13024,GetBlimp,django-rest-framework-jwt,2,closed,481,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/481/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/481,[],WinError 123 after tutorial,"Hi.
 I tried to make this tutorial https://github.com/davesque/django-rest-framework-simplejwt.
Environment
Python 3.7.3
Django 2.2.1
djangorestframework 3.9.4 
djangorestframework-jwt 1.11.0
djangorestframework-simplejwt 4.3.0 
(I only make ""pip install djangorestframework_simplejwt"", I don't know where jwt 1.11.0 came from, when I try uninstall this I have:

```
> (restTutorial) C:\restTutorial>pip uninstall jwt 
> Skipping jwt as it is not installed.
```

Like in this tutorial, I have:
settings.py
```
> REST_FRAMEWORK = {
>     'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',
>     'PAGE_SIZE': 10,
>     'DEFAULT_AUTHENTICATION_CLASSES': (
>         'rest_framework_simplejwt.authentication.JWTAuthentication',
>     ),
> }
```
And I added to INSTALLED_APPS:

`> 'simplejwt'`

My restTutorial/urls.py

```
> from django.conf.urls import include, url
> from rest_framework.schemas import get_schema_view
> from rest_framework.documentation import include_docs_urls
> from rest_framework_simplejwt.views import (
>     TokenObtainPairView,
>     TokenRefreshView,
> )
> 
> API_TITLE = 'Pastebin API'
> API_DESCRIPTION = 'A Web API for creating and viewing highlighted code snippets.'
> schema_view = get_schema_view(title=API_TITLE)
> 
> urlpatterns = [
>     url(r'^api/token/$', TokenObtainPairView.as_view(), name='token_obtain_pair'),
>     url(r'^api/token/refresh/$', TokenRefreshView.as_view(), name='token_refresh'),
>     url(r'^', include('snippets.urls')),
>     url(r'^api-auth/', include('rest_framework.urls', namespace='rest_framework')),
>     url(r'^schema/$', schema_view),
>     url(r'^docs/', include_docs_urls(title=API_TITLE, description=API_DESCRIPTION))
> ]
```
And snippets/urls.py:
```
from django.conf.urls import url
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from snippets import views
from rest_framework.schemas import get_schema_view
from rest_framework_simplejwt.views import (
    TokenObtainPairView,
    TokenRefreshView,
)

schema_view = get_schema_view(title='Pastebin API')

router = DefaultRouter()
router.register(r'snippets', views.SnippetViewSet)
router.register(r'users', views.UserViewSet)

urlpatterns = [
    path('schema/', schema_view),
    path('', include(router.urls)),
    url(r'^api/token/$', TokenObtainPairView.as_view(), name='token_obtain_pair'),
    url(r'^api/token/refresh/$', TokenRefreshView.as_view(), name='token_refresh')
]
```
I tried add
```
from rest_framework_simplejwt.views import (
    TokenObtainPairView,
    TokenRefreshView,
)

urlpatterns = [
    ...
    url(r'^api/token/$', TokenObtainPairView.as_view(), name='token_obtain_pair'),
    url(r'^api/token/refresh/$', TokenRefreshView.as_view(), name='token_refresh'),
    ...
]
```
to only one of this urls.py, but have this same error.
When I try to runserver I have this:

![Screen Shot 05-30-19 at 09 59 AM](https://user-images.githubusercontent.com/47777344/58619031-44253200-82c4-11e9-8818-249ce7f44120.PNG)
![Screen Shot 05-30-19 at 09 59 AM 001](https://user-images.githubusercontent.com/47777344/58619045-49827c80-82c4-11e9-95f7-49dabd5c27a0.PNG)


"
13040,GetBlimp,django-rest-framework-jwt,2,closed,406,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/406/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/406,[],'ReverseManyToOneDescriptor' object has no attribute 'get_by_natural_key',"```ttributeError at /api/v0/lockers/
'ReverseManyToOneDescriptor' object has no attribute 'get_by_natural_key'

Request Method: GET
Request URL: http://172.16.0.89:8000/api/v0/lockers/
Django Version: 1.11.8
Python Executable: /var/webapps/locker_project/env/bin/python
Python Version: 3.5.2
Python Path: ['/var/webapps/locker_project/code', '/var/webapps/locker_project/env/lib/python35.zip', '/var/webapps/locker_project/env/lib/python3.5', '/var/webapps/locker_project/env/lib/python3.5/plat-x86_64-linux-gnu', '/var/webapps/locker_project/env/lib/python3.5/lib-dynload', '/usr/lib/python3.5', '/usr/lib/python3.5/plat-x86_64-linux-gnu', '/var/webapps/locker_project/env/lib/python3.5/site-packages']
Server time: Fri, 15 Dec 2017 12:43:02 +0000
Installed Applications:
['grappelli',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'ckeditor',
 'django_cleanup',
 'imagekit',
 'rest_framework',
 'rest_framework.authtoken',
 'locker_project.accounts',
 'locker_project.lockers',
 'locker_project.operations']
Installed Middleware:
['django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware']


Traceback:  

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/request.py"" in __getattribute__
  385.                 return getattr(self._request, attr)
  
    
      During handling of the above exception ('WSGIRequest' object has no attribute 'successful_authenticator'), another exception occurred:
    
  

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/views/decorators/csrf.py"" in wrapped_view
  58.         return view_func(*args, **kwargs)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in dispatch
  489.             response = self.handle_exception(exc)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in handle_exception
  449.             self.raise_uncaught_exception(exc)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in dispatch
  477.             self.initial(request, *args, **kwargs)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in initial
  395.         self.check_permissions(request)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in check_permissions
  330.                     request, message=getattr(permission, 'message', None)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/views.py"" in permission_denied
  169.         if request.authenticators and not request.successful_authenticator:

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/request.py"" in __getattribute__
  387.                 six.reraise(info[0], info[1], info[2].tb_next)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/django/utils/six.py"" in reraise
  685.             raise value.with_traceback(tb)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/request.py"" in successful_authenticator
  238.             self._authenticate()

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework/request.py"" in _authenticate
  345.                 user_auth_tuple = authenticator.authenticate(self)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework_jwt/authentication.py"" in authenticate
  43.         user = self.authenticate_credentials(payload)

File ""/var/webapps/locker_project/env/lib/python3.5/site-packages/rest_framework_jwt/authentication.py"" in authenticate_credentials
  59.             user = User.objects.get_by_natural_key(username)```"
13042,GetBlimp,django-rest-framework-jwt,2,closed,402,4,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/402/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/402,[],Refresh token is not working,"Django 1.11.7
djangorestframework-jwt==1.11.0
djangorestframework==3.7.3
pyjwt==1.5.3              # via djangorestframework-jwt

```python
JWT_AUTH = {
    'JWT_ENCODE_HANDLER':
        'rest_framework_jwt.utils.jwt_encode_handler',

    'JWT_DECODE_HANDLER':
        'rest_framework_jwt.utils.jwt_decode_handler',

    'JWT_PAYLOAD_HANDLER':
        'rest_framework_jwt.utils.jwt_payload_handler',

    'JWT_PAYLOAD_GET_USER_ID_HANDLER':
        'rest_framework_jwt.utils.jwt_get_user_id_from_payload_handler',

    'JWT_RESPONSE_PAYLOAD_HANDLER':
        'rest_framework_jwt.utils.jwt_response_payload_handler',

    'JWT_GET_USER_SECRET_KEY': None,
    'JWT_PUBLIC_KEY': None,
    'JWT_PRIVATE_KEY': None,
    'JWT_ALGORITHM': 'HS256',
    'JWT_VERIFY': True,
    'JWT_VERIFY_EXPIRATION': True,
    'JWT_LEEWAY': 0,
    'JWT_EXPIRATION_DELTA': datetime.timedelta(hours=8),
    'JWT_AUDIENCE': None,
    'JWT_ISSUER': None,

    'JWT_ALLOW_REFRESH': True,
    'JWT_REFRESH_EXPIRATION_DELTA': datetime.timedelta(days=7),

    'JWT_AUTH_HEADER_PREFIX': 'JWT',
    'JWT_AUTH_COOKIE': None,

}
```

**Error**
```bash
{
    ""non_field_errors"": [
        ""orig_iat field is required.""
    ]
}
```

Where am I wrong?
"
13043,GetBlimp,django-rest-framework-jwt,2,closed,394,3,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/394/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/394,[],Help configuring JWT_PRIVATE_KEY/JWT_PUBLIC_KEY,"I'm utilising `django-rest-framework-jwt` for an REST API authentication and i'd like to have the same web token authorize access to another http service (couchdb).

For creating a JWT enabled reverse proxy i'm looking at jwtproxy (https://github.com/coreos/jwtproxy) which 8afaik) can use a preshared RSA key, so i'm trying to configure RSA private/public keys on `django-rest-framework-jwt`.


Docs mention `JWT_PUBLIC_KEY`is an object of type cryptography.hazmat.primitives.asymmetric.rsa.RSAPublicKey and i'm utilising `cryptography` to try and load an private key file (<https://github.com/coreos/jwtproxy/blob/master/examples/httpserver/mykey.key>):

```
def load_private_key(filepath):
    from cryptography.hazmat.primitives import serialization
    from cryptography.hazmat.backends import default_backend
    with open(filepath, ""rb"") as key_file:
        private_key = serialization.load_pem_private_key(key_file.read(), password=None, backend=default_backend())
    return private_key

private_key = load_private_key('../../jwtproxy/examples/httpserver/mykey.key')


JWT_AUTH = {
    'JWT_ALLOW_REFRESH': True,
    'JWT_PRIVATE_KEY': private_key,
    'JWT_PUBLIC_KEY': private_key.public_key(),
    'JWT_ALGORITHM': 'HS256'
}
```

But i get an error about key not being a string type

```
value = <cryptography.hazmat.backends.openssl.rsa._RSAPrivateKey object at 0x10ca57f60>

    def force_bytes(value):
        if isinstance(value, text_type):
            return value.encode('utf-8')
        elif isinstance(value, binary_type):
            return value
        else:
>           raise TypeError('Expected a string value')
E           TypeError: Expected a string value
```

If i convert the key objet to bytes:

```
private_key.public_key().public_bytes(serialization.Encoding.PEM, serialization.PublicFormat.PKCS1)
```

i get an exception about the key format:

```
jwt.exceptions.InvalidKeyError: The specified key is an asymmetric key or x509 certificate and should not be used as an HMAC secret.
```

Could i get a nudge in the right direction on how to set proper values for JWT_PRIVATE_KEY/JWT_PUBLIC_KEY from a RSA key ?
"
13059,GetBlimp,django-rest-framework-jwt,2,closed,353,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/353/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/353,[],Travis does not run tests on various Python versions,"After going to https://travis-ci.org/GetBlimp/django-rest-framework-jwt/builds/246406709 I noticed that each  build is run under the same Python version (3.5), but the envs specify that tests should be run under Python 2.7, 3.3, 3.4, and 3.5. I know it's a minor bug, but it would be great to make sure that the tests work well under other Python versions than 3.5."
13061,GetBlimp,django-rest-framework-jwt,2,closed,349,3,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/349/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/349,[],DRF JWT without a UserModel," I am getting an error when i try to refresh the token or verify it on the endpoint.

```
 curl -X POST -H ""Content-Type: application/json"" -d '{""token"":""eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmlnX2lhdCI6MTUwMDI5OTUyNCwidXNlcl9pZCI6IlMxNjQxNzMiLCJleHAiOjE1MDAzODU5MjR9.mTNn44Xm9lBp1v8WkUrkp3kdYSCsOrqHACa7fVq2qi8""}' http://localhost:8000/api-token-verify/
 {""non_field_errors"":[""Invalid payload.""]}%
```

I did a print of my payload and here is what I get
```
{'orig_iat': 1500299524, 'user_id': u'S164173', 'exp': 1500385924}
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmlnX2lhdCI6MTUwMDI5OTUyNCwidXNlcl9pZCI6IlMxNjQxNzMiLCJleHAiOjE1MDAzODU5MjR9.mTNn44Xm9lBp1v8WkUrkp3kdYSCsOrqHACa7fVq2qi8
```


I am not using django's default auth mechanism, my auth works like this,  i pass in a user id to my api endpoint, it verifies it against an external db, and then sends an otp to the client after the verification of the otp i will return the jwt token to authenticate with other api endpoints.


```
 payload = jwt_payload_handler(client_id)
 token = jwt_encode_handler(payload)
if (result[0] == otp):
                payload = jwt_payload_handler(client_id)
                access_token = jwt_encode_handler(payload)
                print(payload)
                print(access_token)
                return Response({'message': 'Partner Verified',
                                'access_token': access_token}, 
                                status=status.HTTP_200_OK)
```


Here is the custom function i implemented based on what was suggested over here https://github.com/GetBlimp/django-rest-framework-jwt/issues/145


```
from datetime import datetime
from calendar import timegm
from rest_framework_jwt.settings import api_settings

def jwt_payload_handler(client_id):
    """""" Custom payload handler
    Token encrypts the dictionary returned by this function, and can be decoded by rest_framework_jwt.utils.jwt_decode_handler
    """"""
    return {
        'user_id': client_id,
        'exp': datetime.utcnow() + api_settings.JWT_EXPIRATION_DELTA,
        'orig_iat': timegm(
            datetime.utcnow().utctimetuple()
        )
    }

def jwt_response_payload_handler(token, user=None, request=None):
    """""" Custom response payload handler.

    This function controlls the custom payload after login or token refresh. This data is returned through the web API.
    """"""
    return {
        'token': token
    }
```
Can someone please point out what is happening here and what can i do to make it work, How can i override the default authentication so that it works without the user model in place and it validates against (say a client_id which exists in my external remote database) ?
"
13068,GetBlimp,django-rest-framework-jwt,2,closed,336,6,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/336/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/336,[],Custom authentication backend not working,"I have a custom user model and have created a custom authentication backend. I am using django rest framework JWT for token authentication.

User model:
```

class User(AbstractBaseUser, PermissionsMixin):
    email = models.EmailField(
        unique=True,
        max_length=254,
    )
    first_name = models.CharField(max_length=15)
    last_name = models.CharField(max_length=15)
    mobile = models.IntegerField(unique=True)
    date_joined = models.DateTimeField(default=timezone.now)
    is_active = models.BooleanField(default=True)
    is_admin = models.BooleanField(default=False)
    objects = UserManager()
    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = ['first_name', 'last_name', 'mobile']
```

Auth backend:

```
class EmailOrMobileAuthBackend(object):
    def authenticate(self, username=None, password=None):
        try:
            user = get_user_model().objects.get(email=username)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            if username.isdigit():
                try:
                    user = get_user_model().objects.get(mobile=username)
                    if user.check_password(password):
                        return user
                except User.DoesNotExist:
                    return None
            else:
                return None

    def get_user(self, user_id):
        try:
            return get_user_model().objects.get(pk=user_id)
        except User.DoesNotExist:
            return None
```

And have added in the settings.py:

`AUTHENTICATION_BACKENDS = ('accounts.email_mobile_auth_backend.EmailOrMobileAuthBackend',)`

I have also added the custom auth backend class in the Default authentication for Rest framework:

```
    REST_FRAMEWORK = {
        ...
        'DEFAULT_AUTHENTICATION_CLASSES': (
            'accounts.email_mobile_auth_backend.EmailOrMobileAuthBackend',
            'rest_framework_jwt.authentication.JSONWebTokenAuthentication',
        ),
    }
```

While to log in to django admin site, both the email and mobile number works fine in authenticating the user. However, when I try get the token for the user using django rest framework JWT, I get an error:

```
curl -X POST -d ""email=admin@gmail.com&password=123123"" http://localhost/api-token-auth/

""non_field_errors"": [
    ""Unable to log in with provided credentials.""
  ]
```

What am I missing? Any help would be great."
13083,GetBlimp,django-rest-framework-jwt,2,closed,314,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/314/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/314,[],AttributeError when using custom UserDetailsSerializer,"We have created a custom `UserDetailsSerializer` but when trying to run the application we get the error:

`AttributeError: module 'path.to.serializers' has no attribute 'MPUserDetailsSerializer'`

The full error is [pasted here](http://pastebin.com/c6NFpmFF).

The setup for REST_AUTH_SERIALIZERS and USER_DETAILS_SERIALIZER in the django settings is:
```
REST_AUTH_SERIALIZERS = {
    'LOGIN_SERIALIZER': 'questions.serializers.LoginSerializer',
    'JWT_SERIALIZER' : 'questions.serializers.JWTSerializer',
    'USER_DETAILS_SERIALIZER' : 'questions.serializers.MPUserDetailsSerializer',
}
```

The custom serializer is:

```
from rest_auth import serializers as auth_serializers

class MPUserDetailsSerializer(auth_serializers.UserDetailsSerializer):
""""""
User model w/o password
""""""
class Meta:
    model = User
    fields = ('pk', 'username', 'email', 'name')
    read_only_fields = ('username', )

def validate_email(self, email):
    email = get_adapter().clean_email(email)
    if allauth_settings.UNIQUE_EMAIL:
        if email and email_address_exists(email):
            raise serializers.ValidationError(
                _(""A user is already registered with this e-mail address.""))
    return email
```

The workaround that we did was to remove the following lines from our local virtualenv, in the file `/lib/python3.5/site-packages/rest-auth/serializers.py`:

```
# Required to allow using custom USER_DETAILS_SERIALIZER  in
# JWTSerializer. Defining it here to avoid circular imports
rest_auth_serializers = getattr(settings, 'REST_AUTH_SERIALIZERS', {})
JWTUserDetailsSerializer = import_callable(
  rest_auth_serializers.get('USER_DETAILS_SERIALIZER', UserDetailsSerializer)
)
```

And replacing `JWTUserDetailsSerializer` with `UserDetailsSerializer` in the same file. But that's a really bad solution since we are changing third parties code and it doesn't make any sense to remove specifically the lines that are told to be required to allow custom `USER_DETAILS_SERIALIZER`, but we don't know what else to do to make it work, are we missing something? a config maybe?

We're using django v1.10.1, djangorestframework v3.4.7 and django-rest-auth v0.9.0

(This issue was firstly created at [stackoverflow](http://stackoverflow.com/questions/41965340/attributeerror-when-using-custom-userdetailsserializer-in-django-rest-auth))
"
13113,GetBlimp,django-rest-framework-jwt,2,closed,266,3,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/266/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/266,[],'NoneType' object has no attribute '__getitem__',"I implemented it in my Django Rest project, but on every call with the attached JWT authorization token I get an error.

> 'NoneType' object has no attribute '__getitem__'

I used the bare minimum Users and Groups models from django
"
13156,GetBlimp,django-rest-framework-jwt,3,closed,203,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/203/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/203,[],Support users models that use uuids over pks: `UUID is not JSON serializable`,"Hey guys, 

I'm trying to implement `djangorestframework-jwt` with a user model that that has a uuid field as its primary key. I've installed and configured it as the docs detail but retrieving a jwt token fails with a `TypeError`. 

For example, posting to `/api-token-auth/` with:

``` bash
curl -X POST -d ""username=admin&password=abc123"" http://localhost:8000/api-token-auth/
```

raises:

``` bash
TypeError at /api/v1/api-token-auth/
UUID('69cc6104-2741-4728-9345-29b5aa587d65') is not JSON serializable
```

Given a user model: 

``` python
from __future__ import unicode_literals

import uuid
from django.db import models
from django.contrib.auth.models import AbstractUser
from django.utils.encoding import python_2_unicode_compatible


@python_2_unicode_compatible
class User(AbstractUser):
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)

    def __str__(self):
        return self.username
```

Any idea what might be going on here? After looking through this project's serializers it doesn't seem to be dependent on using a pk vs a uuid. Using djangorestframework-jwt version `1.7.2`, this can be reproduced by pulling https://github.com/agconti/cookiecutter-django-rest/pull/146. 

Full stack trace:

``` bash
TypeError at /api/v1/api-token-auth/
UUID('69cc6104-2741-4728-9345-29b5aa587d65') is not JSON serializable

Environment:


Request Method: POST
Request URL: http://localhost:8000/api/v1/api-token-auth/

Django Version: 1.9
Python Version: 2.7.11
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'rest_framework',
 'rest_framework.authtoken',
 'django_rq',
 'versatileimagefield',
 'authentication',
 'users',
 'django_nose')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')



Traceback:

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  149.                     response = self.process_exception_by_middleware(e, request)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/django/views/decorators/csrf.py"" in wrapped_view
  58.         return view_func(*args, **kwargs)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework/views.py"" in dispatch
  466.             response = self.handle_exception(exc)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework/views.py"" in dispatch
  463.             response = handler(request, *args, **kwargs)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework_jwt/views.py"" in post
  59.         if serializer.is_valid():

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework/serializers.py"" in is_valid
  213.                 self._validated_data = self.run_validation(self.initial_data)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework/serializers.py"" in run_validation
  410.             value = self.validate(value)

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework_jwt/serializers.py"" in validate
  62.                     'token': jwt_encode_handler(payload),

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/rest_framework_jwt/utils.py"" in jwt_encode_handler
  63.         api_settings.JWT_ALGORITHM

File ""/Users/conti/dev/cookiecutter-django-rest/{{cookiecutter.github_repository_name}}/env/lib/python2.7/site-packages/jwt/api_jwt.py"" in encode
  52.             cls=json_encoder

File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py"" in dumps
  251.         sort_keys=sort_keys, **kw).encode(obj)

File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py"" in encode
  207.         chunks = self.iterencode(o, _one_shot=True)

File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py"" in iterencode
  270.         return _iterencode(o, 0)

File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.py"" in default
  184.         raise TypeError(repr(o) + "" is not JSON serializable"")

Exception Type: TypeError at /api/v1/api-token-auth/
Exception Value: UUID('69cc6104-2741-4728-9345-29b5aa587d65') is not JSON serializable
```
"
13161,GetBlimp,django-rest-framework-jwt,3,closed,197,6,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/197/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/197,[],override payload settings fails,"I am using the native models.UUIDField as my primary key in my Custom User model (which also uses email address as the USERNAME_FIELD.)  

The default implementation calls `user_id = user.pk`, which returns a UUID Instance instead of the actual identifying string.

Now I can see that I should probably override `JWT_PAYLOAD_HANDLER` with a function that ignores the `user_id` key, but in trying I keep getting random errors like ""you need to set your SECRET_KEY"" even though it is set. 

So my question is: how best to override the payload handler?  Where should that function live?  It refers to the conf.settings, but then the function is also supposed to live (or be imported into) the settings file itself?  Doesn't that cause a circular dependency?  

This might be more a django issue than a DRF-JWT issue, but I'm truly lost...
"
13176,GetBlimp,django-rest-framework-jwt,3,closed,180,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/180/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/180,[],Django 1.9 issues,"It seems that the library isn't updated to 1.9 yet. At least deprecated `django.utils.importlib` is causing issues:

```
  File ""/Users/jorilallo/.virtualenvs/lemon_server/lib/python2.7/site-packages/jwt_auth/settings.py"", line 5, in <module>
    from jwt_auth.utils import import_from_string
  File ""/Users/jorilallo/.virtualenvs/lemon_server/lib/python2.7/site-packages/jwt_auth/utils.py"", line 5, in <module>
    from django.utils import importlib
ImportError: cannot import name importlib
```
"
13179,GetBlimp,django-rest-framework-jwt,3,closed,177,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/177/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/177,[],`django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.` when importing JSONWebTokenSerializer,"I'm trying to subclass JSONWebTokenSerializer (to override the `username_field`), and if I simply import `from rest_framework_jwt.serializers import JSONWebTokenSerializer` at the top of my `models.py` file, I get the following error:

```
Traceback (most recent call last):
  File ""./manage.py"", line 21, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/core/management/__init__.py"", line 312, in execute
    django.setup()
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/paul/.virtualenvs/app/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/paul/git/app/monolith/user/models.py"", line 5, in <module>
    from rest_framework_jwt.serializers import JSONWebTokenSerializer
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/rest_framework_jwt/serializers.py"", line 17, in <module>
    User = get_user_model()
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/rest_framework_jwt/compat.py"", line 32, in get_user_model
    User = get_user_model()
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/contrib/auth/__init__.py"", line 150, in get_user_model
    return django_apps.get_model(settings.AUTH_USER_MODEL)
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/apps/registry.py"", line 199, in get_model
    self.check_models_ready()
  File ""/home/paul/.virtualenvs/app/lib/python3.4/site-packages/django/apps/registry.py"", line 131, in check_models_ready
    raise AppRegistryNotReady(""Models aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.
```

Digging around a bit, there's a stackoverflow [answer](http://stackoverflow.com/a/25648427/37481) that suggests the `get_user_model()` usage in `rest_framework_jwt/serializers.py` might not be correct, but that is a shot in the dark.
"
13180,GetBlimp,django-rest-framework-jwt,3,closed,175,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/175/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/175,[],JSONWebTokenAPIView fails when content is not a valid JSON,"Eg.:

```
curl -X POST -H ""Content-Type: application/json"" -d '{' http://localhost:8000/api-token-auth/
```

In this case `compat.get_request_data` uses request.DATA which produces an error.

```
`request.DATA` has been deprecated in favor of `request.data` since version 3.0, and has been fully removed as of version 3.2.
```

django-rest-framework v.3+
django-rest-framework-jwt v.latest
"
13188,GetBlimp,django-rest-framework-jwt,3,closed,166,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/166/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/166,[],Question: behavior as remote wsgi app vs. local runserver,"Hi,

I have been using this lib for our JWT and it has worked great with `python manage.py runserver` and generating tokens / authenticating tokens with `localhost:8000` but am having problem with the exact same config running as a wsgi app on `mod_wsgi` on apache/2.2.

It basically is behaving like the authentication hook is not there. Config is all the same (and is using the required config settings per the djangorestframework-jwt docs in config.py), the only difference is that I have my django app running in a sub-directory `/django` vs. `/` in local.

In remote, I can POST to my url set with `url(r'^app/login','extensions.rest_framework_jwt.views.obtain_jwt_token')` and get a token issued, but when I use the same token i got back ($TOKEN) to try and access a protected resource ($MY_AUTH_REQUIRING_URL) like so:

```
curl -X GET -H ""Content-Type: application/json"" \
-H ""Authorization: JWT $TOKEN"" $MY_AUTH_REQUIRING_URL
```

I get:

```
{
  ""detail"": ""Authentication credentials were not provided.""
}
```

Not sure what I might be missing or how I might debug this...
"
13198,GetBlimp,django-rest-framework-jwt,3,closed,153,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/153/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/153,[],"""django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet"" when upgrading from 1.6.0 to 1.7.X","I'm on Django 1.8.4, DRF 3.2.2, DRF-JWT 1.6.0.

When trying to upgrade to 1.7.0 or 1.7.1 I get:

```
 Traceback (most recent call last):
   File ""manage.py"", line 10, in <module>
     execute_from_command_line(sys.argv)
   File ""lib/python2.7/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
     utility.execute()
   File ""lib/python2.7/site-packages/django/core/management/__init__.py"", line 312, in execute
     django.setup()
   File ""lib/python2.7/site-packages/django/__init__.py"", line 18, in setup
     apps.populate(settings.INSTALLED_APPS)
   File ""lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
     app_config.import_models(all_models)
   File ""lib/python2.7/site-packages/django/apps/config.py"", line 198, in import_models
     self.models_module = import_module(models_module_name)
   File ""/usr/local/lib/python2.7/importlib/__init__.py"", line 37, in import_module
     __import__(name)
   File ""/usr/home/snap/snap/conversations/models.py"", line 20, in <module>
     from snap.api.exceptions import SnapAPIError
   File ""/usr/home/snap/snap/api/exceptions.py"", line 8, in <module>
     from rest_framework.views import exception_handler
   File ""lib/python2.7/site-packages/rest_framework/views.py"", line 98, in <module>
     class APIView(View):
   File ""lib/python2.7/site-packages/rest_framework/views.py"", line 103, in APIView
     authentication_classes = api_settings.DEFAULT_AUTHENTICATION_CLASSES
   File ""lib/python2.7/site-packages/rest_framework/settings.py"", line 208, in __getattr__
     val = perform_import(val, attr)
   File ""lib/python2.7/site-packages/rest_framework/settings.py"", line 160, in perform_import
     return [import_from_string(item, setting_name) for item in val]
   File ""lib/python2.7/site-packages/rest_framework/settings.py"", line 172, in import_from_string
     module = importlib.import_module(module_path)
   File ""/usr/local/lib/python2.7/importlib/__init__.py"", line 37, in import_module
     __import__(name)
   File ""lib/python2.7/site-packages/rest_framework_jwt/authentication.py"", line 13, in <module>
     User = get_user_model()
   File ""lib/python2.7/site-packages/rest_framework_jwt/compat.py"", line 29, in get_user_model
     User = get_user_model()
   File ""lib/python2.7/site-packages/django/contrib/auth/__init__.py"", line 150, in get_user_model
     return django_apps.get_model(settings.AUTH_USER_MODEL)
   File ""lib/python2.7/site-packages/django/apps/registry.py"", line 199, in get_model
     self.check_models_ready()
   File ""lib/python2.7/site-packages/django/apps/registry.py"", line 131, in check_models_ready
     raise AppRegistryNotReady(""Models aren't loaded yet."")
 django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.
```
"
13199,GetBlimp,django-rest-framework-jwt,3,closed,152,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/152/comments,https://github.com/GetBlimp/django-rest-framework-jwt/pull/152,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw3NTI3OTE0Ng=="", ""id"": 75279146}]","Only get_user_model at runtime, avoiding AppRegistryNotReady error w. custom models","While using custom model, an error was throwed : django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet. This patch fixes it.
I think it's #70 that was not fully fixed (it's same symptoms at least)

Full stacktrace of fixed error:

```
$ ./manage runserver
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/core/management/__init__.py"", line 312, in execute
    django.setup()
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/jocelyn/owk/munch/utils/models.py"", line 4, in <module>
    from .mixins import (OwnedModelMixin, OptionnallyOwnedModelMixin,
  File ""/home/jocelyn/owk/munch/utils/mixins.py"", line 5, in <module>
    from rest_framework.generics import get_object_or_404
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/generics.py"", line 8, in <module>
    from rest_framework import views, mixins
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/views.py"", line 91, in <module>
    class APIView(View):
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/views.py"", line 96, in APIView
    authentication_classes = api_settings.DEFAULT_AUTHENTICATION_CLASSES
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/settings.py"", line 206, in __getattr__
    val = perform_import(val, attr)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/settings.py"", line 158, in perform_import
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/settings.py"", line 158, in <listcomp>
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/rest_framework/settings.py"", line 170, in import_from_string
    module = importlib.import_module(module_path)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""/home/jocelyn/owk/django-rest-framework-jwt/rest_framework_jwt/authentication.py"", line 13, in <module>
    User = get_user_model()
  File ""/home/jocelyn/owk/django-rest-framework-jwt/rest_framework_jwt/compat.py"", line 29, in get_user_model
    User = get_user_model()
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/contrib/auth/__init__.py"", line 150, in get_user_model
    return django_apps.get_model(settings.AUTH_USER_MODEL)
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/apps/registry.py"", line 199, in get_model
    self.check_models_ready()
  File ""/home/jocelyn/.virtualenvs/munch/lib/python3.4/site-packages/django/apps/registry.py"", line 131, in check_models_ready
    raise AppRegistryNotReady(""Models aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.
```
"
13201,GetBlimp,django-rest-framework-jwt,3,closed,150,0,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/150/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/150,[],Incompatible import of 'serializers' with DRF 3.2,"Using this library with django-rest-framework 3.2, I am getting an error when importing the settings which calls on compat.py. 

`from rest_framework_jwt.settings import api_settings`

Error is `AttributeError: 'module' object has no attribute 'serializers'` in compat.py:
`class Serializer(rest_framework.serializers.Serializer):`...

Not sure if DRF changed something but for this to work for me, I have to add an explicit import of:

`import rest_framework.serializers`

Will submit a pull request that fixes this shortly and keep the import in only the portion of code that references the >=3.0 DRF code.
"
13202,GetBlimp,django-rest-framework-jwt,3,closed,148,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/148/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/148,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw3NTI3OTE0Ng=="", ""id"": 75279146}]",1.7 python manage.py cry,"Hi,

it's 4:45am here, good time for a lil pip update  (and some tears) !

manage.py doesn't love me anymore

```
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/django/core/management/__init__.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/django/core/management/__init__.py"", line 312, in execute
    django.setup()
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib64/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/opt/projects/diagenv/diagproject/app/models.py"", line 13, in <module>
    from app import helpers
  File ""/opt/projects/diagenv/diagproject/app/helpers.py"", line 6, in <module>
    from rest_framework_jwt import utils
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/rest_framework_jwt/utils.py"", line 6, in <module>
    from rest_framework_jwt.compat import get_username, get_username_field
  File ""/opt/virtualenvs/diagenv/lib/python2.7/site-packages/rest_framework_jwt/compat.py"", line 12, in <module>
    class Serializer(rest_framework.serializers.Serializer):
AttributeError: 'module' object has no attribute 'serializers'
```

Any idea ?
"
13208,GetBlimp,django-rest-framework-jwt,3,closed,141,4,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/141/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/141,[],ImportError: cannot import name 'smart_text',"I'm getting

```
Traceback (most recent call last):
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 394, in urlconf_module
    return self._urlconf_module
AttributeError: 'RegexURLResolver' object has no attribute '_urlconf_module'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/settings.py"", line 172, in import_from_string
    module = importlib.import_module(module_path)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework_jwt/authentication.py"", line 4, in <module>
    from rest_framework.compat import smart_text
ImportError: cannot import name 'smart_text'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
Traceback (most recent call last):
  File ""/usr/lib/python3.4/wsgiref/handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/contrib/staticfiles/handlers.py"", line 63, in __call__
    return self.application(environ, start_response)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/core/handlers/wsgi.py"", line 170, in __call__
    self.load_middleware()
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/core/handlers/base.py"", line 52, in load_middleware
    mw_instance = mw_class()
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/middleware/locale.py"", line 24, in __init__
    for url_pattern in get_resolver(None).url_patterns:
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 402, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 396, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2231, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2214, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2203, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1448, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/vagrant/venv/urls.py"", line 8, in <module>
    from venv.apps.api.utils import SharedAPIRootRouter
  File ""/vagrant/venv/apps/api/utils.py"", line 2, in <module>
    from rest_framework.routers import DefaultRouter, SimpleRouter
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/routers.py"", line 25, in <module>
    from rest_framework import views
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/views.py"", line 96, in <module>
    class APIView(View):
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/views.py"", line 101, in APIView
    authentication_classes = api_settings.DEFAULT_AUTHENTICATION_CLASSES
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/settings.py"", line 208, in __getattr__
    val = perform_import(val, attr)
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/settings.py"", line 160, in perform_import
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/settings.py"", line 160, in <listcomp>
    return [import_from_string(item, setting_name) for item in val]
  File ""/home/vagrant/.virtualenvs/venv/lib/python3.4/site-packages/rest_framework/settings.py"", line 176, in import_from_string
    raise ImportError(msg)
ImportError: Could not import 'rest_framework_jwt.authentication.JSONWebTokenAuthentication' for API setting 'DEFAULT_AUTHENTICATION_CLASSES'. ImportError: cannot import name 'smart_text'.
```

using the fix in #140 (which resolves #139 )

Looks like https://github.com/tomchristie/django-rest-framework/commit/d54c67d79d0f5661ef33d860efe80a4272e22b3e removed smart_text from rest_framework.compat. (This was back in dec 2014, though?)

I'm using Django 1.8.3, with rest_framework 3.2.0 and the fix proposed in #140.

Anyone else experiencing this?

_EDIT:_ Forgot to change title before posting... my bad.
"
13209,GetBlimp,django-rest-framework-jwt,3,closed,140,3,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/140/comments,https://github.com/GetBlimp/django-rest-framework-jwt/pull/140,[],updated request handling to match new DRF 3.2 deprecations,"Release Notes: [http://www.django-rest-framework.org/topics/3.2-announcement/](http://www.django-rest-framework.org/topics/3.2-announcement/)

Relevant Error: [https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/request.py#L453](https://github.com/tomchristie/django-rest-framework/blob/master/rest_framework/request.py#L453)

The full deprecation of `request.DATA` in the main line of DRF was released today, which broke the views code in this app. I added a `try/except` block around the request handling and left `.DATA` as the try clause to support DRF versions under 3.
"
13210,GetBlimp,django-rest-framework-jwt,3,closed,139,20,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/139/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/139,[],`NotImplementedError` on accessing `request.DATA`,"From `django-rest-framework` v3.2, any attempts to access `request.DATA` will raise a `NotImplementedError` with the following message:

> `request.DATA` has been deprecated in favor of `request.data` since version 3.0, and has been fully removed as of version 3.2.

You can see the change [commit here](https://github.com/tomchristie/django-rest-framework/commit/f7d44dfae0d73a33373f62cf1905c10f89fcfb9e). The error originates [here in `views.py`](https://github.com/cgroner/django-rest-framework-jwt/blob/master/rest_framework_jwt/views.py#L56).

Note that the `request.data` property appears to have been added in `django-rest-framework` v3, so simply changing `request.DATA` to `request.data` may make this package incompatible with earlier versions.
"
13215,GetBlimp,django-rest-framework-jwt,3,closed,134,4,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/134/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/134,[],error: orig_iat field is required,"I getting this error `orig_iat field is required` while I try to refresh the token. Checking the code the error comes from the serializer [orig_iat](https://github.com/GetBlimp/django-rest-framework-jwt/blob/5cdc62cb817149ff5fb57b6a19a6980b98d0dba7/rest_framework_jwt/serializers.py#L149).

Decoding the payload I noticed the this field is not in the dictionary. The only fields in the dictionary are username, user_id, email and exp. The JWT_ALLOW_REFRESH is set to True.
"
13222,GetBlimp,django-rest-framework-jwt,3,closed,127,5,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/127/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/127,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw3NTI3OTE0Ng=="", ""id"": 75279146}]","1.6.0 - Getting error ""too many values to unpack"" ","Hey,

I updated from 1.5.0 to 1.6.0 and am now getting this strange error... Not sure why!

```
ValueError at /api/v1/auth-token/
too many values to unpack (expected 2)

Traceback:
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/django/core/handlers/base.py"" in get_response
  111.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/django/views/decorators/csrf.py"" in wrapped_view
  57.         return view_func(*args, **kwargs)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/django/views/generic/base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/rest_framework/views.py"" in dispatch
  456.             response = self.handle_exception(exc)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/rest_framework/views.py"" in dispatch
  453.             response = handler(request, *args, **kwargs)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/rest_framework_jwt/views.py"" in post
  65.         return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/rest_framework/serializers.py"" in errors
  476.         return ReturnDict(ret, serializer=self)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/site-packages/rest_framework/utils/serializer_helpers.py"" in __init__
  14.         super(ReturnDict, self).__init__(*args, **kwargs)
File ""/Users/eric/.virtualenvs/clandestine/lib/python3.4/collections/__init__.py"" in __init__
  56.         self.__update(*args, **kwds)
File ""/Users/eric/.virtualenvs/clandestine/bin/../lib/python3.4/_collections_abc.py"" in update
  602.             for key, value in other:
```

Seems like it originates in `serializer.errors` or with the serializer in general. I noticed the changes to match DRF generics but I didn't notice anything wrong with it at first glance...

Any ideas what could cause this?

Thanks!
"
13245,GetBlimp,django-rest-framework-jwt,4,closed,102,6,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/102/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/102,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw3NTI3OTE0Ng=="", ""id"": 75279146}]",FieldError when using custom user model,"Django docs suggest to inherit custom user model from AbstractBaseUser class:
https://docs.djangoproject.com/en/1.8/topics/auth/customizing/#specifying-a-custom-user-model

AbstractBaseUser has an attribute ""is_active"" that is True by default (it's not a database field)
https://github.com/django/django/blob/master/django/contrib/auth/models.py#L199

In this case django-rest-framework-jwt throws an error ""FieldError: Cannot resolve keyword 'is_active' into field."" when trying to do authentication:
https://github.com/GetBlimp/django-rest-framework-jwt/blob/deea4ad14dfd4611fb19ad3cab133b8dd3e8959c/rest_framework_jwt/authentication.py#L55

Also token verifycation and refresh fail:
https://github.com/GetBlimp/django-rest-framework-jwt/blob/faa772c53efe7123776206fa0513d597c5e2c368/rest_framework_jwt/serializers.py#L115
"
13247,GetBlimp,django-rest-framework-jwt,4,closed,100,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/100/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/100,[],InvalidAudienceError results in 500 Error Rather than 401/403,"Right now just `ExpiredSignature` and `DecodeError` are caught. ([See here](https://github.com/GetBlimp/django-rest-framework-jwt/blob/cb8fab26009767e4b85a882f9f6a169318c8114e/rest_framework_jwt/authentication.py#L31)) but  `InvalidAudienceError` extends `InvalidTokenError`.

`InvalidAudienceError` should be caught and then either return `None` or raise a 401 or 403.
"
13250,GetBlimp,django-rest-framework-jwt,4,closed,97,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/97/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/97,[],OperationalError: no such table: auth_user,"cloned the project, and run the test as the following with the following error. Can anyone shed some ligh on the issue?

$ ./runtests.py
==================================================================================================================================== test session starts =====================================================================================================================================
platform linux2 -- Python 2.7.2 -- py-1.4.26 -- pytest-2.6.4
collected 43 items 

tests/test_authentication.py FFFFFFFFFFss
tests/test_serializers.py FFsFFF
tests/test_utils.py FFFFFFFFFF
tests/test_views.py FFFFFFFFFFFFFFF

========================================================================================================================================== FAILURES ==========================================================================================================================================
_____________________________________________________________________________________________________________ JSONWebTokenAuthenticationTests.test_different_auth_header_prefix ______________________________________________________________________________________________________________

self = <tests.test_authentication.JSONWebTokenAuthenticationTests testMethod=test_different_auth_header_prefix>

```
def setUp(self):
    self.csrf_client = APIClient(enforce_csrf_checks=True)
    self.username = 'jpueblo'
    self.email = 'jpueblo@example.com'
```

> ```
>   self.user = User.objects.create_user(self.username, self.email)
> ```

tests/test_authentication.py:79: 

---

../../apps/python-2.7.2/lib/python2.7/site-packages/django/contrib/auth/models.py:187: in create_user
    *_extra_fields)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/contrib/auth/models.py:182: in _create_user
    user.save(using=self._db)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/base.py:710: in save
    force_update=force_update, update_fields=update_fields)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/base.py:738: in save_base
    updated = self._save_table(raw, cls, force_insert, force_update, using, update_fields)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/base.py:822: in _save_table
    result = self._do_insert(cls._base_manager, using, fields, update_pk, raw)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/base.py:861: in _do_insert
    using=using, raw=raw)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/manager.py:127: in manager_method
    return getattr(self.get_queryset(), name)(_args, **kwargs)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/query.py:920: in _insert
    return query.get_compiler(using=using).execute_sql(return_id)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/models/sql/compiler.py:963: in execute_sql
    cursor.execute(sql, params)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/backends/utils.py:64: in execute
    return self.cursor.execute(sql, params)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/utils.py:97: in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
../../apps/python-2.7.2/lib/python2.7/site-packages/django/db/backends/utils.py:64: in execute
    return self.cursor.execute(sql, params)

---

self = <django.db.backends.sqlite3.base.SQLiteCursorWrapper object at 0x2321510>, query = 'INSERT INTO ""auth_user"" (""password"", ""last_login"", ""is_superuser"", ""username"", ""first_name"", ""last_name"", ""email"", ""is_staff"", ""is_active"", ""date_joined"") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)'
params = ['!PFhnSZujHPvSBGh0Fi0a5cmMhZKvPzYfu3f4gzJO', None, False, 'jpueblo', '', '', ...]

```
def execute(self, query, params=None):
    if params is None:
        return Database.Cursor.execute(self, query)
    query = self.convert_query(query)
```

> ```
>   return Database.Cursor.execute(self, query, params)
> ```
> 
> E       OperationalError: no such table: auth_user
"
13254,GetBlimp,django-rest-framework-jwt,4,closed,93,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/93/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/93,[],TypeError: verify_signature() got an unexpected keyword argument 'algorithms',"I getting this error using version 1.4.0

``` sh
(jwt-auth) $>pip freeze
Django==1.7.5
djangorestframework==3.0.0
djangorestframework-jwt==1.4.0
PyJWT==0.4.3
```

and I've checked the code, sth should be related to this commit @jpadilla  57c63a525ac5d99c1fbfdb2cee511b067e333a70 `Set allowed algorithms when decoding`
"
13259,GetBlimp,django-rest-framework-jwt,4,closed,86,1,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/86/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/86,[],No packaged file at version 1.3.0,"When I try to download the latest version using pip, I receive the following error:

`Could not find a version that satisfies the requirement djangorestframework-jwt==1.3.0 (from -r requirements.txt (line 8)) (from versions: 0.1.0, 0.1.1, 0.1.2, 0.1.3, 0.1.4, 0.1.5, 1.0.1, 1.0.2, 1.1.0, 1.1.1, 1.2.0, 0.1.6, 1.0.0, 0.1.0, 0.1.1, 0.1.2, 0.1.3, 0.1.4, 0.1.5, 0.1.6, 1.0.0, 1.0.1, 1.0.2, 1.1.0, 1.1.1, 1.2.0)`

A simple Google search gives me [this question on SO](http://stackoverflow.com/questions/4620459/pip-cant-find-latest-versions-of-a-pypi-project).

Can you please properly package this version so I can install it using pip?
"
13275,GetBlimp,django-rest-framework-jwt,4,closed,70,6,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/70/comments,https://github.com/GetBlimp/django-rest-framework-jwt/pull/70,[],user import problem for custom users issue fixed,"if custom model used user model import create error like this:
.....
    raise AppRegistryNotReady(""Models aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.
"
13277,GetBlimp,django-rest-framework-jwt,4,closed,68,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/68/comments,https://github.com/GetBlimp/django-rest-framework-jwt/pull/68,[],Add translation utils,"Use translatable error strings using ugettext function and add `locale/en_US/LC_MESSAGES/django.po` file.
"
13287,GetBlimp,django-rest-framework-jwt,4,closed,57,2,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/57/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/57,[],Failure to import ,"Experiencing this same error described here ::  http://stackoverflow.com/questions/25830491/trying-to-implement-django-authentication-through-django-rest-framework-jwt-why
"
13292,GetBlimp,django-rest-framework-jwt,4,closed,52,3,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/52/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/52,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw3NTI3OTE0Ng=="", ""id"": 75279146}]",DRF 3.0.1: ImportError:  ImportError: cannot import name smart_text.,"Hi there, I've just upgraded to the latest Django Rest Framework, and am getting this error...

```
ImportError: Could not import 'rest_framework_jwt.authentication.JSONWebTokenAuthentication' for API setting 'DEFAULT_AUTHENTICATION_CLASSES'. ImportError: cannot import name smart_text.
```

I believe this will happen on a clean install of DRF and DRF-JWT, but if it doesn't let me know and I'll provide more details.
"
13299,GetBlimp,django-rest-framework-jwt,4,closed,45,27,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/45/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/45,[],request.user shows AnonymousUser in middleware,"I'm not sure if this is an issue or just because of the implementation, but I was using middleware to log user_id against records being edited, and I couldn't get request.user at the middleware level (and so of course request.user.is_authorized() returned False).

The middleware was the last one on the list, and authorization was working (I would get a 403 requesting assets without my token header). I tried putting `'rest_framework_jwt.authentication.JSONWebTokenAuthentication'` at the top of `DEFAULT_AUTHENTICATION_CLASSES`, and also making it the only item in the tuple; neither worked.

I've managed to work around my issue by accessing the header and using the tools directly in the app to retrieve the user; essentially I copied chunks of your code into my middleware, but I thought you should know :)

If you're interested, here's the middleware:

```
from django.db.models import signals
from django.utils.functional import curry
from django.utils import timezone
from threading import local

import jwt
from rest_framework.authentication import get_authorization_header
from rest_framework_jwt.settings import api_settings
from django.conf import settings
try:
    from django.contrib.auth import get_user_model
except ImportError:  # Django < 1.5
    from django.contrib.auth.models import User
else:
    User = get_user_model()

_user = local()

class AuditMiddleware(object):
    def process_request(self, request):
        if not request.method in ('GET', 'HEAD', 'OPTIONS', 'TRACE'):
            if hasattr(request, 'user') and request.user.is_authenticated():
                user = request.user
            else:
                user = self.get_user_from_auth_header(request)
                if user is not None:
                    request.user = user

            _user.value = user

            mark_whodid = curry(self.mark_whodid, _user.value)
            signals.pre_save.connect(mark_whodid,  dispatch_uid = (self.__class__, request,), weak = False)

    def process_response(self, request, response):
        signals.pre_save.disconnect(dispatch_uid =  (self.__class__, request,))
        return response

    def mark_whodid(self, user, sender, instance, **kwargs):
        # user logging here

    def get_user_from_auth_header(self, request):
        try:
            auth_keyword, token = get_authorization_header(request).split()
            jwt_header, claims, signature = token.split('.')

            try:
                payload = api_settings.JWT_DECODE_HANDLER(token)
                try:
                    user_id = api_settings.JWT_PAYLOAD_GET_USER_ID_HANDLER(payload)

                    if user_id:
                        user = User.objects.get(pk=user_id, is_active=True)
                        return user
                    else:
                        msg = 'Invalid payload'
                        return None
                except User.DoesNotExist:
                    msg = 'Invalid signature'
                    return None

            except jwt.ExpiredSignature:
                msg = 'Signature has expired.'
                return None
            except jwt.DecodeError:
                msg = 'Error decoding signature.'
                return None
        except ValueError:
            return None
```
"
13304,GetBlimp,django-rest-framework-jwt,4,closed,40,9,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/40/comments,https://github.com/GetBlimp/django-rest-framework-jwt/issues/40,[],Not compatible with pyjwt 0.3 because decode method signature has changed.,"This seems to happen because the pyjwt dependency is declared as PyJWT>=0.1.8, and PyJWT has since refactored the signature of the decode method in the following commit
https://github.com/progrium/pyjwt/commit/23d1293c8fed2c2aeb90a5c322c4bc222b7a0517

from
`def decode(jwt, key='', verify=True, verify_expiration=True, leeway=0)`

to
`def decode(jwt, key='', verify=True, **kwargs):`

This causes https://github.com/GetBlimp/django-rest-framework-jwt/blob/master/rest_framework_jwt/utils.py#L48 to fail because the args are passed positionally.

`TypeError: decode() takes at most 3 arguments (5 given)`

I'll probably fix this later today and put in a PR, just documenting this in case other people run into it between now and then.  
"
13327,GetBlimp,django-rest-framework-jwt,5,closed,17,7,https://api.github.com/repos/GetBlimp/django-rest-framework-jwt/issues/17/comments,https://github.com/GetBlimp/django-rest-framework-jwt/pull/17,[],Fix AttributeError for older Python/Django,"I was getting AttributeError when using Django 1.3.7 with Python 2.6.6.
This commit fixes this issue.

Error details:

```
Exception Type:AttributeError
Exception Value: 'User' object has no attribute 'get_username'
```

Thanks,
Ardy
"
13351,Seedstars,django-react-redux-base,2,closed,102,2,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/102/comments,https://github.com/Seedstars/django-react-redux-base/issues/102,[],"many settings are tuples instead of lists, which django recommends","Installed Apps, for instance, is a tuple, and when I went to extend it in dev.py with `INSTALLED_APPS += ['sslserver']`, I ran into an error about extending a tuple with a list. I will make a PR with these changes.
https://docs.djangoproject.com/en/1.11/ref/settings/#installed-apps"
13360,Seedstars,django-react-redux-base,2,closed,91,1,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/91/comments,https://github.com/Seedstars/django-react-redux-base/pull/91,[],pyopenssl has deprecated the OpenSSL.rand module,"If you install the python dependencies and run the django app, you'll get the following error: 

`ModuleNotFoundError: No module named 'OpenSSL.rand'`

This is because pyopenssl has deprecated the OpenSSL.rand module (details [here](https://github.com/pyca/pyopenssl/blob/1eac0e8f9b3829c5401151fabb3f78453ad772a4/CHANGELOG.rst#backward-incompatible-changes-1)).

The folks at django-rest-knox have published a new version that accounts for the change."
13363,Seedstars,django-react-redux-base,2,closed,87,2,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/87/comments,https://github.com/Seedstars/django-react-redux-base/issues/87,[],Error on migrations: ModuleNotFoundError: No module named 'OpenSSL.rand',"On the installation, when I ran `python manage.py migrate` I get this following error

```
  File ""/home/guinslym/Documents/Github/redux-tutorial/django-react-redux-base/env/lib/python3.6/site-packages/knox/models.py"", line 5, in <module>
    from knox import crypto
  File ""/home/guinslym/Documents/Github/redux-tutorial/django-react-redux-base/env/lib/python3.6/site-packages/knox/cryptpip install -U django-rest-knoxo.py"", line 5, in <module>
    from OpenSSL.rand import bytes as generate_bytes
ModuleNotFoundError: No module named 'OpenSSL.rand'
```
I did '`pip install -U django-rest-knox'` but the error is still there. any help?

Thanks"
13364,Seedstars,django-react-redux-base,2,closed,86,4,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/86/comments,https://github.com/Seedstars/django-react-redux-base/issues/86,[],"Logged in as superuser: Accessing admin/ gives error ""User object has no attribute has_module_perms"". Accessing api/v1/ api/v1/accounts/ gives ""Not Found"". Also, second browser tab shows ""Login"".","I installed Seedstars django-react-redux-base on Windows 7 64bit with Python 3.6 and it runs fine and looks great.

I'm impressed that there were no errors during the install - which is rare for a system built on top of this many JavaScript and Python components.

Now I'm able to login and see the ""protected content"".

---

However there may be something strange happening with ""authorization"".

I get errors when I try to access the following URLs:

- http://localhost:8000/admin/

```
AttributeError at /admin/

'User' object has no attribute 'has_module_perms'
```

---

- http://localhost:8000/api/v1/

- http://localhost:8000/api/v1/accounts/

```
Django React Redux Demo    Home  Login

NOT FOUND
```

---

I'm confused because these routes apparently do exist in the file:

```
src\djangoreactredux\urls.py
```

which says:

```
urlpatterns = [
    url(r'^api/v1/accounts/', include('accounts.urls', namespace='accounts')),
    url(r'^api/v1/getdata/', include('base.urls', namespace='base')),
    url(r'^admin/', admin.site.urls),

    # catch all others because of how history is handled by react router - cache this page because it will never change
    url(r'', cache_page(settings.PAGE_CACHE_SECONDS)(base_views.IndexView.as_view()), name='index'),
]
```

---

I checked the previous similar Issue here:

**Accessing the built-in Django admin area?**

https://github.com/Seedstars/django-react-redux-base/issues/62

They resolved this by making sure to put the ""/"" after ""admin"" - but this didn't work for me.

---

To explore the database, I installed [DB Browser for SQLite](http://sqlitebrowser.org/) and verified that user `a@a.com` (plus another ""superuser"" I created using `python manage.py createsuperuser` in my virtual environment) both have a value of `1` (true) for `is_staff` and `is_superuser`.

But I still get the errors when I go to the above URLs.

---

Finally, I did a different test:

I logged in as `a@a.com` - then I opened _another_ window (browser tab), in the same browser.

In the new window, it didn't say ""Logout"" - _it said ""Login"", as if I hadn't logged in yet._

In the _old_ window (browser tab), I could access the ""Protected Content"".

But in the _new_ window / tab (in the same browser), I couldn't access the ""Protected Content"".

This happened in both Chrome and Firefox. 

(By the way, if anyone cares, I remembered I had IE9 on my machine. For all URLs, IE9 showed a blank page. I never use IE, and I suppose [IE9 doesn't support React](https://stackoverflow.com/questions/29828561/react-js-not-working-with-internet-explorer-9).)

Anyways, isn't the browser supposed to ""remember"" that I'm logged in, no matter how many windows or tabs I open?

---

Seedstars django-react-redux-base seems like a great foundation for building web apps, so I'm eager to start using it.

Thanks for any help!"
13367,Seedstars,django-react-redux-base,2,closed,83,1,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/83/comments,https://github.com/Seedstars/django-react-redux-base/pull/83,[],Update settings init.py for improper import error of settings module that default by django search in app directory where manage.py file is.,Pull request for error solve.
13372,Seedstars,django-react-redux-base,2,closed,78,0,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/78/comments,https://github.com/Seedstars/django-react-redux-base/issues/78,[],CSS not loading on production,"I deployed this app on ec2, if i use dev settings, all working well.But when i am using production settings, css is not loading.I am getting this error, ""Resource interpreted as Stylesheet but transferred with MIME type text/html:""
""Uncaught SyntaxError: ""

`server {
    listen 80;
    server_name 13.xx.xx.xxx;

    location = /favicon.ico { access_log off; log_not_found off; }
    location /static_dist/ {
        root /home/ubuntu/studykarma/django-react-redux-base/src;
    }
    location / {
        include proxy_params;
        include  /etc/nginx/mime.types;
        proxy_pass http://unix:/home/ubuntu/studykarma/django-react-redux-base/src/djangoreactredux.sock;
    }
}`
This is my nginx config file"
13379,Seedstars,django-react-redux-base,2,closed,71,2,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/71/comments,https://github.com/Seedstars/django-react-redux-base/issues/71,[],Error installing fixture,"When the `backend` service spins up, it errors out as follows:

```
django.core.serializers.base.DeserializationError: Problem installing fixture '/django/src/fixtures.json': User has no field named 'username'
```

This looks to prevent the default user from being added which prevents me from logging in to the protected area."
13391,Seedstars,django-react-redux-base,2,closed,59,5,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/59/comments,https://github.com/Seedstars/django-react-redux-base/issues/59,[],login does not work,"Hi,

I've just installed this great boilerplate (thanks a lot by the way).
Unfortunatly, when I try to login, I have the following error message: ""Authentication Error: Connection Error - An error occurred while sending your data!""

Looking at the API requests, I see that an OPTIONS method is sent before POST can be executed (CORS preflight?) and Django responds with ""OPTIONS /api/v1/accounts/login/ HTTP/1.0"" 401 70

Do you have any idea how I could fix this problem?

Thanks!"
13414,Seedstars,django-react-redux-base,2,closed,36,4,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/36/comments,https://github.com/Seedstars/django-react-redux-base/issues/36,[],Why use arrays as object keys in your reducer?,"Hi,

Thanks for making this project. It's been a good learning experience for me to read through it.

However, I've been reading your reducer code and I've been scratching my head a little bit. Why use [arrays as object keys in your reducers](https://github.com/Seedstars/django-react-redux-base/blob/master/src/static/reducers/auth.js#L19)?

```javascript
export default createReducer(initialState, {
    [AUTH_LOGIN_USER_REQUEST]: (state, payload) => {
        return Object.assign({}, state, {
            isAuthenticating: true,
            statusText: null
        });
    },
    ...
```

Is there some benefit to doing this that I don't understand?

Thanks!

P.S. Wouldn't it be better for createReducer() to raise an error when it can't find the right reducer? [Right now, it'll silently fail and return the initial state](https://github.com/Seedstars/django-react-redux-base/blob/master/src/static/utils/index.js#L7).

"
13421,Seedstars,django-react-redux-base,2,closed,28,0,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/28/comments,https://github.com/Seedstars/django-react-redux-base/issues/28,[],pip install requirements,"```
virtualenv • ~/p/django-react-redux-jwt-base $ pip install -r py-requirements/dev.txt
```

```
Collecting git+https://github.com/Seedstars/django-rest-logger.git (from -r py-requirements/base.txt(line 22))
  Cloning https://github.com/Seedstars/django-rest-logger.git to /var/folders/td/f_yq56sx30v7gw7yrryk556r0000gn/T/pip-m0o2kw84-build
Collecting Django==1.8.15 (from -r py-requirements/base.txt (line 1))
  Downloading Django-1.8.15-py2.py3-none-any.whl (6.2MB)
    100% |████████████████████████████████| 6.2MB 238kB/s
Collecting django-extensions==1.7.4 (from -r py-requirements/base.txt (line 2))
  Downloading django_extensions-1.7.4-py2.py3-none-any.whl (200kB)
    100% |████████████████████████████████| 204kB 2.3MB/s
Collecting django-disposable-email-checker==1.2.1 (from -r py-requirements/base.txt (line 4))
  Downloading django_disposable_email_checker-1.2.1-py2.py3-none-any.whl
Collecting psycopg2==2.6.2 (from -r py-requirements/base.txt (line 7))
  Downloading psycopg2-2.6.2.tar.gz (376kB)
    100% |████████████████████████████████| 378kB 1.8MB/s
    Complete output from command python setup.py egg_info:
    running egg_info
    creating pip-egg-info/psycopg2.egg-info
    writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt
    writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.txt
    writing pip-egg-info/psycopg2.egg-info/PKG-INFO
    writing manifest file 'pip-egg-info/psycopg2.egg-info/SOURCES.txt'
    warning: manifest_maker: standard file '-c' not found

    Error: pg_config executable not found.

    Please add the directory containing pg_config to the PATH
    or specify the full executable path with the option:

        python setup.py build_ext --pg-config /path/to/pg_config build ...

    or with the pg_config option in 'setup.cfg'.

    ----------------------------------------
Command ""python setup.py egg_info"" failed with error code 1 in /private/var/folders/td/f_yq56sx30v7gw7yrryk556r0000gn/T/pip-build-kx_qtjqi/psycopg2/
```

_NOTE_: Last line is in red.

```
virtualenv • ~/p/django-react-redux-jwt-base $ uname -a
```

```
Darwin My-MacBook-Pro.local 16.1.0 Darwin Kernel Version 16.1.0: Thu Oct 13 21:26:57 PDT 2016; root:xnu-3789.21.3~60/RELEASE_X86_64 x86_64
```
"
13431,Seedstars,django-react-redux-base,2,closed,18,2,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/18/comments,https://github.com/Seedstars/django-react-redux-base/issues/18,[],No 'Access-Control-Allow-Origin' header is present on the requested resource.,"I had this error on Google Chrome (similar on firefox) when following readme:

`
Fetch API cannot load http://localhost:8000/api/v1/accounts/login/. Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://127.0.0.1:8000' is therefore not allowed access. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.
`

I had to install `django-cors-middleware` and append these lines to `djangoreactredux.settings.dev` to be able to make it work:

``` python
INSTALLED_APPS += ('corsheaders',)

MIDDLEWARE_CLASSES += (
    'corsheaders.middleware.CorsMiddleware',
    )

CORS_ORIGIN_ALLOW_ALL = True
CORS_ALLOW_CREDENTIALS = True
```

Since I don't have much experience with git, maybe someone wants to make a PR.

*Loved the example by the way!
"
13440,Seedstars,django-react-redux-base,2,closed,9,6,https://api.github.com/repos/Seedstars/django-react-redux-base/issues/9/comments,https://github.com/Seedstars/django-react-redux-base/issues/9,[],`npm run coverage` error.,"Hello, when I run `npm run coverage`, I got a error:

```
➜  django-react-redux-jwt-base git:(master) ✗ npm run coverage         

> django-react-redux-jwt-base@1.0.0 coverage /opt/django-react-redux-jwt-base
> istanbul cover node_modules/mocha/bin/_mocha -- --require tests/require --recursive --compilers js:babel-core/register --colors --reporter dot tests/js/

Warning: `valueLink` prop on `input` is deprecated; set `value` and `onChange` instead.


  ․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․․

  58 passing (341ms)

Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/containers/index.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/containers/Root/DevTools.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/containers/Root/Root.dev.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/containers/Root/Root.prod.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/index.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/reducers/index.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/routes.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/store/configureStore.dev.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/store/configureStore.prod.js
Unable to post-instrument: /opt/django-react-redux-jwt-base/src/static/utils/requireAuthentication.js
/opt/django-react-redux-jwt-base/node_modules/.npminstall/istanbul-api/1.0.0-aplha.1/istanbul-api/lib/reporter.js:80
        reportSource = libReport.createReportSource(coverageMap, opts);
                                 ^

TypeError: libReport.createReportSource is not a function
    at Object.Reporter.write (/opt/django-react-redux-jwt-base/node_modules/.npminstall/istanbul-api/1.0.0-aplha.1/istanbul-api/lib/reporter.js:80:34)
    at exitFn (/opt/django-react-redux-jwt-base/node_modules/.npminstall/istanbul-api/1.0.0-aplha.1/istanbul-api/lib/run-cover.js:127:18)
    at process.g (events.js:273:16)
    at emitOne (events.js:95:20)
    at process.emit (events.js:182:7)
    at process.exit (internal/process.js:79:15)
    at done (/opt/django-react-redux-jwt-base/node_modules/.npminstall/mocha/2.4.5/mocha/bin/_mocha:416:32)
    at afterWrite (_stream_writable.js:355:3)
    at _combinedTickCallback (internal/process/next_tick.js:80:20)
    at process._tickCallback (internal/process/next_tick.js:98:9)


npm ERR! Darwin 15.3.0
npm ERR! argv ""/Users/yie/.nvm/versions/node/v5.10.1/bin/node"" ""/Users/yie/.nvm/versions/node/v5.10.1/bin/npm"" ""run"" ""coverage""
npm ERR! node v5.10.1
npm ERR! npm  v3.8.3
npm ERR! code ELIFECYCLE
npm ERR! django-react-redux-jwt-base@1.0.0 coverage: `istanbul cover node_modules/mocha/bin/_mocha -- --require tests/require --recursive --compilers js:babel-core/register --colors --reporter dot tests/js/`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the django-react-redux-jwt-base@1.0.0 coverage script 'istanbul cover node_modules/mocha/bin/_mocha -- --require tests/require --recursive --compilers js:babel-core/register --colors --reporter dot tests/js/'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the django-react-redux-jwt-base package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     istanbul cover node_modules/mocha/bin/_mocha -- --require tests/require --recursive --compilers js:babel-core/register --colors --reporter dot tests/js/
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs django-react-redux-jwt-base
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls django-react-redux-jwt-base
```
"
13449,geex-arts,django-jet,2,closed,395,0,https://api.github.com/repos/geex-arts/django-jet/issues/395/comments,https://github.com/geex-arts/django-jet/issues/395,[],S3 static file error,"I can't load static file from s3 in admin.I use django version2.Please tell me how can i fix that error?
""Error""->got extra amp; from static tag
""static/jet/css/vendor.css?AWSAccessKeyId=AKIAJ73SAH6JC4LX2NIQ&amp;Signature=B1nx4%2FAGAxak0mn3v0C0evh8B3c%3D&amp;Expires=1559254061&v=1.0.8""
"
13451,geex-arts,django-jet,2,closed,389,24,https://api.github.com/repos/geex-arts/django-jet/issues/389/comments,https://github.com/geex-arts/django-jet/issues/389,[],New JET ?,"I don't understand what means the message on the main page

>We are proud to announce completely new Jet. Please check out Live Demo.
Developing of new features for Django Jet will be frozen, only critical bugs will be fixed

If there is a new version ongoing, where is the repo? Is it not open source? Is it gonna be a SaaS platform? "
13454,geex-arts,django-jet,2,closed,365,2,https://api.github.com/repos/geex-arts/django-jet/issues/365/comments,https://github.com/geex-arts/django-jet/issues/365,[],Jet template breaking in application running with apache and wsgi,"Python Version: Python3
Django-jet Version: django-jet==1.0.7
Django Version: Django==2.1.1
uWsgi Versio: uWSGI==2.0.17.1


My complete requirements.txt
![image](https://user-images.githubusercontent.com/26351465/46711555-30d53180-cc23-11e8-8479-f6d923968ccc.png)


My virtualhost config
![image](https://user-images.githubusercontent.com/26351465/46711328-40a04600-cc22-11e8-80a5-2f1838145aa0.png)

My settings config
![image](https://user-images.githubusercontent.com/26351465/46711370-7ba27980-cc22-11e8-992c-e47702ab7076.png)

incorrect template image
![image](https://user-images.githubusercontent.com/26351465/46711428-aab8eb00-cc22-11e8-8557-d6ef30f92060.png)

OBS: All files load successfull, but the template breaks
OBS2: None error in apache log
"
13462,geex-arts,django-jet,2,closed,343,3,https://api.github.com/repos/geex-arts/django-jet/issues/343/comments,https://github.com/geex-arts/django-jet/pull/343,[],Fix incompability bug with Django 2.1,For more information please check this issue: https://github.com/geex-arts/django-jet/issues/342
13463,geex-arts,django-jet,2,closed,342,8,https://api.github.com/repos/geex-arts/django-jet/issues/342/comments,https://github.com/geex-arts/django-jet/issues/342,[],utils.py -> get_model_queryset() missing 1 required positional argument: 'sortable_by',"This is an incompatible error when you install `django-jet==1.0.7` with `Django==2.1`

Traceback:
> Environment:
> 
> Request Method: GET
> Request URL: http://localhost:8000/admin/xxx/user/1/change/
> 
> Django Version: 2.1
> Python Version: 3.6.5
> Installed Applications:
> ['jet.dashboard',
>  'jet',
>  'django.contrib.admin',
>  'django.contrib.auth',
>  'django.contrib.contenttypes',
>  'django.contrib.sessions',
>  'django.contrib.messages',
>  'django.contrib.staticfiles',
>  'rest_framework',
>  'storages',
>  'mobijuce_general',
>  'mobijuce_util',
>  'mobijuce',
>  'mobijuce_admin',
>  'mobijuce_jwt',
>  'mobi_apis',
>  'rest_framework_swagger']
> Installed Middleware:
> ['django.middleware.security.SecurityMiddleware',
>  'django.contrib.sessions.middleware.SessionMiddleware',
>  'django.middleware.common.CommonMiddleware',
>  'django.middleware.csrf.CsrfViewMiddleware',
>  'django.contrib.auth.middleware.AuthenticationMiddleware',
>  'django.contrib.messages.middleware.MessageMiddleware',
>  'django.middleware.clickjacking.XFrameOptionsMiddleware',
>  'django.middleware.locale.LocaleMiddleware']
> 
> 
> Template error:
> In template /home/dang/Projects/python/mjapi/lib/python3.6/site-packages/jet/templates/admin/base.html, error at line 122
>    __init__() missing 1 required positional argument: 'sortable_by'
>    112 : 
>    113 :     {% block footer %}<div id=""footer""></div>{% endblock %}
>    114 : 
>    115 :     {% jet_delete_confirmation_context as delete_confirmation_context %}
>    116 :     {{ delete_confirmation_context }}
>    117 : 
>    118 :     {% jet_change_form_sibling_links_enabled as show_siblings %}
>    119 :     {% if change and show_siblings %}
>    120 :         <div class=""changeform-navigation"">
>    121 :             {% spaceless %}
>    122 :                  {% jet_previous_object as sibling %} 
>    123 :                 <a{% if sibling.url %} href=""{{ sibling.url }}""{% endif %} class=""changeform-navigation-button segmented-button left{% if not sibling %} disabled{% endif %}"" title=""{{ sibling.label }}"">
>    124 :                     <span class=""changeform-navigation-button-icon left icon-arrow-left""></span>
>    125 :                     <span class=""changeform-navigation-button-label"">
>    126 :                         {% if sibling %}
>    127 :                             {{ sibling.label }}
>    128 :                         {% else %}
>    129 :                             ---
>    130 :                         {% endif %}
>    131 :                     </span>
>    132 :                 </a>
> 
> 
> Traceback:
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
>   34.             response = get_response(request)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
>   156.                 response = self.process_exception_by_middleware(e, request)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
>   154.                 response = response.render()
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/response.py"" in render
>   106.             self.content = self.rendered_content
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/response.py"" in rendered_content
>   83.         content = template.render(context, self._request)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/backends/django.py"" in render
>   61.             return self.template.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   171.                     return self._render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in _render
>   163.         return self.nodelist.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
>   150.             return compiled_parent._render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in _render
>   163.         return self.nodelist.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
>   150.             return compiled_parent._render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in _render
>   163.         return self.nodelist.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/loader_tags.py"" in render
>   62.                 result = block.nodelist.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/defaulttags.py"" in render
>   309.                 return nodelist.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/defaulttags.py"" in render
>   398.         return strip_spaces_between_tags(self.nodelist.render(context).strip())
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render
>   937.                 bit = node.render_annotated(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/base.py"" in render_annotated
>   904.             return self.render(context)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/django/template/library.py"" in render
>   192.         output = self.func(*resolved_args, **resolved_kwargs)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/jet/templatetags/jet_tags.py"" in jet_previous_object
>   204.     return jet_sibling_object(context, False)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/jet/templatetags/jet_tags.py"" in jet_sibling_object
>   168.     queryset = get_model_queryset(admin_site, model, request, preserved_filters=preserved_filters)
> 
> File ""/home/dang/Projects/python/mjapi/lib/python3.6/site-packages/jet/utils.py"" in get_model_queryset
>   223.             model_admin)
> 
> Exception Type: TypeError at /admin/xxx/user/1/change/
> Exception Value: __init__() missing 1 required positional argument: 'sortable_by'
> "
13485,geex-arts,django-jet,2,closed,254,6,https://api.github.com/repos/geex-arts/django-jet/issues/254/comments,https://github.com/geex-arts/django-jet/issues/254,[],updateRelatedObjectLinks error at init and when selecting related obj,"Hello. I installed jet on existing big project. Everything works well, except selecting related object
```js
Uncaught ReferenceError: updateRelatedObjectLinks is not defined
    at HTMLSelectElement.<anonymous> ((index):306)
    at HTMLBodyElement.dispatch (jquery.js:4435)
    at HTMLBodyElement.elemData.handle (jquery.js:4121)
    at Object.trigger (jquery.js:4350)
    at HTMLSelectElement.<anonymous> (jquery.js:4901)
    at Function.each (jquery.js:374)
    at jQuery.fn.init.each (jquery.js:139)
    at jQuery.fn.init.trigger (jquery.js:4900)
    at HTMLDocument.<anonymous> ((index):309)
    at fire (jquery.js:3099)
```
```js
$('body').on('change', '.related-widget-wrapper select', function(e) {
    var event = $.Event('django:update-related');
    $(this).trigger(event);
    if (!event.isDefaultPrevented()) {
        updateRelatedObjectLinks(this);
    }
});
```
This error also reproduced on page load. With disabled jet everything works well. List of installed aps

```python
INSTALLED_DEPENDENCIES = [
    'jet',
    'jet.dashboard',
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'timezone_field',
    'rest_framework_swagger',
    'rest_framework',
    'rest_framework_jwt',
    'parler',
    'autofixture',
    'fixture_magic',
    'corsheaders',
    'django_extensions',
    'ckeditor',
    # 'oauth2_provider'
]
```
Django 1.9"
13506,geex-arts,django-jet,2,closed,171,5,https://api.github.com/repos/geex-arts/django-jet/issues/171/comments,https://github.com/geex-arts/django-jet/issues/171,[],Error when trying to add item with pk not of Integer type,"#I have a table that has pk of string and when I try to add an item to this table django-jet crashes with the error: 

```
ValueError: invalid literal for int() with base 10: ''
```

All the other tables with numeric PKs work fine. django-jet version 1.0.4

HEre is the complete stack trace

```
Internal Server Error: /admin/inventory/item/add/
Traceback (most recent call last):
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/core/handlers/exception.py"", line 39, in inner
    response = get_response(request)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/admin/options.py"", line 544, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/views/decorators/cache.py"", line 57, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/admin/sites.py"", line 211, in inner
    return view(request, *args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/admin/options.py"", line 1509, in add_view
    return self.changeform_view(request, None, form_url, extra_context)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/contextlib.py"", line 30, in inner
    return func(*args, **kwds)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/admin/options.py"", line 1464, in changeform_view
    formsets, inline_instances = self._create_formsets(request, form.instance, change=False)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/admin/options.py"", line 1815, in _create_formsets
    formsets.append(FormSet(**formset_params))
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/contrib/contenttypes/forms.py"", line 30, in __init__
    self.ct_fk_field.name: self.instance.pk,
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/query.py"", line 796, in filter
    return self._filter_or_exclude(False, *args, **kwargs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/query.py"", line 814, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/sql/query.py"", line 1227, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/sql/query.py"", line 1253, in _add_q
    allow_joins=allow_joins, split_subq=split_subq,
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/sql/query.py"", line 1187, in build_filter
    condition = self.build_lookup(lookups, col, value)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/sql/query.py"", line 1083, in build_lookup
    return final_lookup(lhs, rhs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/lookups.py"", line 19, in __init__
    self.rhs = self.get_prep_lookup()
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/lookups.py"", line 59, in get_prep_lookup
    return self.lhs.output_field.get_prep_value(self.rhs)
  File ""/Users/delio/.virtualenvs/inventory/lib/python3.5/site-packages/django/db/models/fields/__init__.py"", line 1832, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: ''
[30/Jan/2017 14:02:20] ""GET /admin/inventory/item/add/ HTTP/1.1"" 500 186330

```"
13509,geex-arts,django-jet,2,closed,160,4,https://api.github.com/repos/geex-arts/django-jet/issues/160/comments,https://github.com/geex-arts/django-jet/issues/160,[],Google analytics is not working,"I have double checked everything and they all seems fine.
However, I have this error on starting server.
Why it cannot find util from oauth2client?

```
python.exe .\manage.py runserver
Performing system checks...

Unhandled exception in thread started by <function wrapper at 0x03777030>
Traceback (most recent call last):
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\utils\autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\management\commands\runserver.py"", line 121, in inner_run
    self.check(display_num_errors=True)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\management\base.py"", line 374, in check
    include_deployment_checks=include_deployment_checks,
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\management\base.py"", line 361, in _run_checks
    return checks.run_checks(**kwargs)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\checks\registry.py"", line 81, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\checks\urls.py"", line 14, in check_url_config
    return check_resolver(resolver)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\core\checks\urls.py"", line 24, in check_resolver
    for pattern in resolver.url_patterns:
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\utils\functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\urls\resolvers.py"", line 313, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\utils\functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\django\urls\resolvers.py"", line 306, in urlconf_module
    return import_module(self.urlconf_name)
  File ""C:\Python27\Lib\importlib\__init__.py"", line 37, in import_module
    __import__(name)
  File ""C:\Users\creep\Code\Python\test\test\test\urls.py"", line 1, in <module>
    from jet.dashboard.dashboard_modules import google_analytics_views
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\jet\dashboard\dashboard_modules\google_analytics_views.py"", line 6, in <module>
    from jet.dashboard.dashboard_modules.google_analytics import GoogleAnalyticsClient, ModuleCredentialStorage
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\jet\dashboard\dashboard_modules\google_analytics.py"", line 11, in <module>
    from googleapiclient.discovery import build
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\googleapiclient\discovery.py"", line 53, in <module>
    from googleapiclient.errors import HttpError
  File ""C:\Users\creep\Code\Python\test\lib\site-packages\googleapiclient\errors.py"", line 26, in <module>
    from oauth2client import util
ImportError: cannot import name util```"
13511,geex-arts,django-jet,2,closed,147,2,https://api.github.com/repos/geex-arts/django-jet/issues/147/comments,https://github.com/geex-arts/django-jet/issues/147,[],Login for non superusers,"If I try to login with a non superuser I get this error:

```
KeyError at /admin/
u'admin_url'
Request Method:	GET
Request URL:	http://localhost:8000/admin/
Django Version:	1.10.3
Exception Type:	KeyError
Exception Value:	
u'admin_url'
```

```
/jet/templatetags/jet_tags.py in jet_get_menu
    all_aps = []
    apps = []
    pinned_apps = []
    for app in app_list:
        if not current_found:
            for model in app['models']:
                if context['request'].path.startswith(model['admin_url']): ...
                    model['current'] = True
                    current_found = True
                    break
            if not current_found and context['request'].path.startswith(app['app_url']):
                app['current'] = True
```"
13512,geex-arts,django-jet,2,closed,146,4,https://api.github.com/repos/geex-arts/django-jet/issues/146/comments,https://github.com/geex-arts/django-jet/issues/146,[],Possible DjangoCMS Issue,"I am trying to add Jet to my DjangoCMS site. Everything in the admin works fine and as expected. The issue I am having, however, is when editing a plugin. When trying to edit the content of a plugin on a page a get:

NoReverseMatch at /en/admin/cms/page/edit-plugin/2/
Reverse for 'djangocms_text_ckeditor_text_changelist' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []

Now, this error is because I clicked edit on a ckeditor plugin but I get the same NoReverseMatch for any plugin type I try to edit. For example:

NoReverseMatch at /en/admin/cms/page/edit-plugin/3/
Reverse for 'cmsplugin_filer_teaser_filerteaser_changelist' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []

Is Jet compatible with DjangoCMS? Am I missing something? Please let me know if there is any other information I can provide.

Thanks!

Brandon Culpepper"
13547,geex-arts,django-jet,2,closed,102,14,https://api.github.com/repos/geex-arts/django-jet/issues/102/comments,https://github.com/geex-arts/django-jet/issues/102,[],Possible problem with some many to many fields,"I created a repository  for shipping methods in `django-oscar`, so, i make the appropriate app and put this code in the admin:

``` python
from django.contrib import admin

from oscar.core.loading import get_model

OrderAndItemCharges = get_model('shipping', 'OrderAndItemCharges')
WeightBand = get_model('shipping', 'WeightBand')
WeightBased = get_model('shipping', 'WeightBased')


class OrderChargesAdmin(admin.ModelAdmin):
    filter_horizontal = [
        'countries',
    ]

    list_display = [
        'name',
        'description',
        'price_per_order',
        'price_per_item',
        'free_shipping_threshold'
    ]


class WeightBandInline(admin.TabularInline):
    model = WeightBand


class WeightBasedAdmin(admin.ModelAdmin):
    filter_horizontal = [
        'countries',
    ]

    list_display = [
        'code',
        'name',
        'default_weight'
    ]

    inlines = [WeightBandInline]


admin.site.register(OrderAndItemCharges, OrderChargesAdmin)
admin.site.register(WeightBased, WeightBasedAdmin)
```

So, i'll test the methods and i want add shipping countries for the existing methods.
![problem](https://cloud.githubusercontent.com/assets/5034215/17793654/9308b778-656e-11e6-8c2f-3f5269687817.gif)

You can see here that change the country field isn't saved by the admin module, and add other country replace the existing country. This problem isn't present with the other fields. In Partner models there aren't problem to add users to a partner.

Other case is this:
![seleccion_218](https://cloud.githubusercontent.com/assets/5034215/17795786/ead35d3e-6580-11e6-881f-a5ba9b5ed8be.png)
If a want delete one of theme, well, all are deleted,  but, again, doesn't save the change.

![out 04d](https://cloud.githubusercontent.com/assets/5034215/17793472/233cf018-656d-11e6-9b38-a7b94cc8acc1.gif)
But, when i do this changes in the dashboard module, i haven't problem for update the methods.

Can anyone help me to explain this?

I can't see errors in the browser console, so, i don't know which problem here.
"
13548,geex-arts,django-jet,2,closed,100,5,https://api.github.com/repos/geex-arts/django-jet/issues/100/comments,https://github.com/geex-arts/django-jet/issues/100,[],TemplateDoesNotExist: admin/breadcrumbs.html,"I updated from Django JET 0.1.4 (with Django 1.9.7) to JET 0.9.0 (Django 1.10) and I get this error:

> Environment:
> 
> Request Method: POST
> Request URL: http://127.0.0.1:8000/admin/manager/devices/2/
> 
> Django Version: 1.10
> Python Version: 2.7.9
> Installed Applications:
> ['manager',
>  'jet.dashboard',
>  'jet',
>  'django.contrib.admin',
>  'django.contrib.auth',
>  'django.contrib.contenttypes',
>  'django.contrib.sessions',
>  'django.contrib.messages',
>  'django.contrib.staticfiles']
> Installed Middleware:
> ['django.middleware.security.SecurityMiddleware',
>  'django.contrib.sessions.middleware.SessionMiddleware',
>  'django.middleware.common.CommonMiddleware',
>  'django.middleware.csrf.CsrfViewMiddleware',
>  'django.contrib.auth.middleware.AuthenticationMiddleware',
>  'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
>  'django.contrib.messages.middleware.MessageMiddleware',
>  'django.middleware.clickjacking.XFrameOptionsMiddleware']
> 
> Template loader postmortem
> Django tried loading these templates, in this order:
> 
> Using engine django:
>     \* django.template.loaders.app_directories.Loader: D:\Workspace\DeviceManager\dm-web\manager\templates\admin\breadcrumbs.html (Source does not exist)
>     \* django.template.loaders.app_directories.Loader: d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\jet\dashboard\templates\admin\breadcrumbs.html (Source does not exist)
>     \* django.template.loaders.app_directories.Loader: d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\jet\templates\admin\breadcrumbs.html (Source does not exist)
>     \* django.template.loaders.app_directories.Loader: d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\contrib\admin\templates\admin\breadcrumbs.html (Source does not exist)
>     \* django.template.loaders.app_directories.Loader: d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\contrib\auth\templates\admin\breadcrumbs.html (Source does not exist)
> 
> Template error:
> In template D:\Workspace\DeviceManager\dm-web\manager\templates\manager\view_device.html, error at line 0
>    admin/breadcrumbs.html   1 : {% extends ""admin/change_form.html"" %}
>    2 : {% load i18n admin_urls static admin_modify manager_tags %}
>    3 : 
>    4 : {% block extrahead %}{{ block.super }}
>    5 : <script type=""text/javascript"" src=""{% static 'js/plotly.min.js' %}""></script>
>    6 : {% endblock %}
>    7 : 
>    8 : {% if not is_popup %}
>    9 : {% block breadcrumbs %}
>    10 : <div class=""breadcrumbs"">
> 
> Traceback:
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\core\handlers\exception.py"" in inner
> 1.             response = get_response(request)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\core\handlers\base.py"" in _legacy_get_response
> 1.             response = self._get_response(request)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\core\handlers\base.py"" in _get_response
> 1.                 response = self.process_exception_by_middleware(e, request)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\core\handlers\base.py"" in _get_response
> 1.                 response = wrapped_callback(request, _callback_args, *_callback_kwargs)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\utils\decorators.py"" in _wrapped_view
> 1.                     response = view_func(request, _args, *_kwargs)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\views\decorators\cache.py"" in _wrapped_view_func
> 1.         response = view_func(request, _args, *_kwargs)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\contrib\admin\sites.py"" in inner
> 1.             return view(request, _args, *_kwargs)
> 
> File ""D:\Workspace\DeviceManager\dm-web\manager\admin.py"" in show_view
> 1.                                   RequestContext(request))
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\shortcuts.py"" in render_to_response
> 1.     content = loader.render_to_string(template_name, context, using=using)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader.py"" in render_to_string
> 1.     return template.render(context, request)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\backends\django.py"" in render
> 1.             reraise(exc, self.backend)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\backends\django.py"" in reraise
> 1.     six.reraise(exc.**class**, new, sys.exc_info()[2])
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\backends\django.py"" in render
> 1.             return self.template.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                     return self._render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in _render
> 1.         return self.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.         return compiled_parent._render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in _render
> 1.         return self.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.         return compiled_parent._render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in _render
> 1.         return self.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.         return compiled_parent._render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in _render
> 1.         return self.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.                 result = block.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.                 result = block.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\defaulttags.py"" in render
> 1.                 return nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader_tags.py"" in render
> 1.                 result = block.nodelist.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render
> 1.                 bit = node.render_annotated(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\base.py"" in render_annotated
> 1.             return self.render(context)
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\jet\templatetags\jet_tags.py"" in render
> 1.         t = loader.get_template('admin/breadcrumbs.html')
> 
> File ""d:\Workspace\DeviceManager\dm-web.env\lib\site-packages\django\template\loader.py"" in get_template
> 1.     raise TemplateDoesNotExist(template_name, chain=chain)
> 
> Exception Type: TemplateDoesNotExist at /admin/manager/devices/2/
> Exception Value: admin/breadcrumbs.html

As you can see, the template ""admin/breadcrumbs.html"" is loaded from FormatBreadcrumbsNode class, which is instanced in format_breadcrumbs.

I checked Django 1.9.7 and Django JET 0.1.4 templates looking for it. I found admin/breadcrumbs.html in JET 0.1.4. In JET 0.9.0 this template just disappeared (and it isn't in Django 1.10), turning the tag format_breadcrumbs unusable.

Please, can you check it?

PS: I just tried to copy the old template in my app's template directory and it just worked.
"
13549,geex-arts,django-jet,3,closed,99,8,https://api.github.com/repos/geex-arts/django-jet/issues/99/comments,https://github.com/geex-arts/django-jet/issues/99,[],Django Treebeard template bug,"Hi guys, i'm using a project that use `django-treebeard` as requirement, and when i go to his models i get this style issue:
![seleccion_160](https://cloud.githubusercontent.com/assets/5034215/17640956/97014494-60d2-11e6-86f7-6e5e9369ca88.png)

![seleccion_174](https://cloud.githubusercontent.com/assets/5034215/17640963/c3d20d82-60d2-11e6-834d-4bfd033297b2.png)

How can we solve this issue?
"
13554,geex-arts,django-jet,3,closed,94,1,https://api.github.com/repos/geex-arts/django-jet/issues/94/comments,https://github.com/geex-arts/django-jet/issues/94,[],Old IE tag incompatibilities with django 1.10,"Hi man, we have a problem with `django 1.10rc1` and `django-jet`tags.

![seleccion_135](https://cloud.githubusercontent.com/assets/5034215/17281396/b87e65ea-5761-11e6-97c8-8da425bac3e8.png)
![seleccion_136](https://cloud.githubusercontent.com/assets/5034215/17281395/b87a2d22-5761-11e6-9129-c91752551aaa.png)

You can see clearly the bug in this images.

Thanks.
"
13562,geex-arts,django-jet,3,closed,83,2,https://api.github.com/repos/geex-arts/django-jet/issues/83/comments,https://github.com/geex-arts/django-jet/issues/83,[],Bug with `jet_custom_dashboard` command with a custrom User model.,"In my  current project i have a custom User model and i try to test these command, i have then this bug:

``` bash
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.5/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.5/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/usr/local/lib/python3.5/site-packages/raven/contrib/django/management/__init__.py"", line 41, in new_execute
    return original_func(self, *args, **kwargs)
  File ""/usr/local/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/usr/local/lib/python3.5/site-packages/django/core/management/base.py"", line 584, in handle
    return self.handle_noargs(**options)
  File ""/usr/local/lib/python3.5/site-packages/jet/management/commands/jet_custom_apps_example.py"", line 25, in handle_noargs
    'user': None
  File ""/usr/local/lib/python3.5/site-packages/jet/utils.py"", line 56, in get_app_list
    perms = model_admin.get_model_perms(request)
  File ""/usr/local/lib/python3.5/site-packages/django/contrib/admin/options.py"", line 586, in get_model_perms
    'add': self.has_add_permission(request),
  File ""/code/user/admin.py"", line 137, in has_add_permission
    return request.user.is_superuser
AttributeError: 'User' object has no attribute 'is_superuser'

```

How can solve it?
"
13568,geex-arts,django-jet,3,closed,77,2,https://api.github.com/repos/geex-arts/django-jet/issues/77/comments,https://github.com/geex-arts/django-jet/issues/77,[],"""icon-deletelink.svg"" issue about Foreign Keys","When I want to add new record which has foreign key, delete icon next to the foreign key field gives a ""not found"" error because django-jet uses ""icon_deletelink.gif""(earlier 1.9) rather than ""icon-deletelink.svg""(1.9) on ""related_widget_wrapper.html"" file line 23. Add and Edit icons work well but delete icon gives a ""static/admin/img/icon_deletelink.gif"" not found error. When I changed that line to icon-deletelink.svg, it uses default django template's icon which is not so good. So any help would be great about that.
"
13578,geex-arts,django-jet,3,closed,62,5,https://api.github.com/repos/geex-arts/django-jet/issues/62/comments,https://github.com/geex-arts/django-jet/issues/62,[],"Cannot Reach Jet, Raises 404","I installed and correctly configured for `django-jet`. However, when I request for url `jet/` or `jet/dashboard`, it responses 404, saying:

> The current URL, jet/, didn't match any of these.

---
### settings.py
#### INSTALLED_APPS

```
INSTALLED_APPS = [
    # Outsource
    ""jet.dashboard"",
    ""jet"",

    # Main
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # Outsource
    ""rest_framework"",

    # Self
    ""api"",
    ""blog"",
    ""cvitae"",
    ""activities"",
]
```
#### TEMPLATES

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            os.path.join(BASE_DIR, ""templates""),
            os.path.join(BASE_DIR, ""templates/responses"")
        ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```
### urls.py

```
urlpatterns = [
    url(r'^jet/', include('jet.urls', 'jet')),
    url(r'^jet/dashboard/', include('jet.dashboard.urls', 'jet-dashboard')),
    url(r'^admin/', admin.site.urls),
    url(r""^api/"", include(""api.urls"")),
    url(r""^blog/"", include(""blog.urls"")),
] + static(settings.STATIC_URL, document_root=settings.STATIC_ROOT) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

I migrated and run server but could not help.

---
# Environment
- python 3.5.1
- django 1.9.5
- django-jet 0.1.4
"
13580,geex-arts,django-jet,3,closed,58,2,https://api.github.com/repos/geex-arts/django-jet/issues/58/comments,https://github.com/geex-arts/django-jet/issues/58,[],Missing/placeholder icons pose problems for static file serving,"There are a few a couple of icons that are loaded as such:

```
<img src=""{% static ""admin/img/icon-unknown.gif"" %}"" ..... />
```

The CSS and JS then matches that `src` path and then replaces the icon in many circumstances. However, these icons have been removed or change to be SVG files as of Django 1.9 and can throw exceptions depending in some circumstances (for me using whitenoise and with debug off).

I can probably do a pull request to fix that — in which case should I amend #45 to create a more generic ""django 1.9 or above"" tag and do a bunch of if/elses? Is there a more elegant solution?
"
13582,geex-arts,django-jet,3,closed,56,4,https://api.github.com/repos/geex-arts/django-jet/issues/56/comments,https://github.com/geex-arts/django-jet/pull/56,[],Fix django 1.9 related-widget-wrapper error issue #52,"Hi, 

This is the merge between django 1.9.4 branch and the changes you make in django-jet so it fixes the issue #52. 

Cheers and Kudos!
E.
"
13584,geex-arts,django-jet,3,closed,54,2,https://api.github.com/repos/geex-arts/django-jet/issues/54/comments,https://github.com/geex-arts/django-jet/issues/54,[],Autocomplete fails because of related_model property,"Hi, maybe is not a django-jet issue, but if I use `RelatedFieldAjaxListFilter` I get a server error because `related_model` is returning a string instead of a model instance.

I also reported this behaviour on stackoverflow because maybe is a Django issue:
http://stackoverflow.com/questions/35745607/why-djangos-related-model-property-is-returning-string-instead-of-model-instanc

A possible workaround is to directly get the related model through `field.remote_field.model`

```
app_label = field.remote_field.model._meta.app_label
model_name = field.remote_field.model._meta.object_name
```

I need to do this workaround for me and I can make a pull request if you think it is interesting to avoid future problems.

Thanks!
"
13613,geex-arts,django-jet,3,closed,18,2,https://api.github.com/repos/geex-arts/django-jet/issues/18/comments,https://github.com/geex-arts/django-jet/issues/18,[],jquery UI postprocessing issue. Image 'animated-overlay.gif' not found,"Hi, 
On production server, collectstatic is failing as it is unable to find 'animated-overlay.gif'

``` bash
Post-processed 'jet/vendor/jquery-ui-timepicker/include/ui-1.10.0/ui-lightness/images/ui-icons_222222_256x240.png' as 'jet/vendor/jquery-ui-timepicker/include/ui-1.10.0/ui-lightness/images/ui-icons_222222_256x240.ebe6b6902a40.png'
Post-processing 'jet/vendor/jquery-ui-timepicker/include/ui-1.10.0/ui-lightness/jquery-ui-1.10.0.custom.min.css' failed!

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
    utility.execute()
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 342, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 176, in handle
    collected = self.collect()
  File ""/home/dheerendra/.Envs/ldapsso/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 128, in collect
    raise processed
ValueError: The file 'jet/vendor/jquery-ui-timepicker/include/ui-1.10.0/ui-lightness/images/animated-overlay.gif' could not be found with <django.contrib.staticfiles.storage.CachedStaticFilesStorage object at 0x7f8d62ed6a50>
```
"
13620,geex-arts,django-jet,3,closed,11,1,https://api.github.com/repos/geex-arts/django-jet/issues/11/comments,https://github.com/geex-arts/django-jet/issues/11,[],UnicodeDecodeError with python 3.4.2,"When running pip install django-jet with python 3.4.2 i got the following error:
`UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 2496: ordinal not in range(128)`

Complete traceback is:

```
  Downloading django-jet-0.1.0.tar.gz (734kB): 734kB downloaded
  Running setup.py (path:/tmp/pip-build-s6sd7ah1/django-jet/setup.py) egg_info for package django-jet
    Traceback (most recent call last):
      File ""<string>"", line 17, in <module>
      File ""/tmp/pip-build-s6sd7ah1/django-jet/setup.py"", line 21, in <module>
        long_description=read('README.rst'),
      File ""/tmp/pip-build-s6sd7ah1/django-jet/setup.py"", line 6, in read
        return open(os.path.join(os.path.dirname(__file__), fname)).read()
      File ""/home/edvm/.virtualenvs/inmobiz/lib/python3.4/encodings/ascii.py"", line 26, in decode
        return codecs.ascii_decode(input, self.errors)[0]
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 2496: ordinal not in range(128)
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File ""<string>"", line 17, in <module>

  File ""/tmp/pip-build-s6sd7ah1/django-jet/setup.py"", line 21, in <module>

    long_description=read('README.rst'),

  File ""/tmp/pip-build-s6sd7ah1/django-jet/setup.py"", line 6, in read

    return open(os.path.join(os.path.dirname(__file__), fname)).read()

  File ""/home/edvm/.virtualenvs/inmobiz/lib/python3.4/encodings/ascii.py"", line 26, in decode

    return codecs.ascii_decode(input, self.errors)[0]

UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 2496: ordinal not in range(128)
```
"
13625,geex-arts,django-jet,3,closed,5,2,https://api.github.com/repos/geex-arts/django-jet/issues/5/comments,https://github.com/geex-arts/django-jet/issues/5,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/geex-arts/django-jet/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwyNDIxMjM2MzA="", ""id"": 242123630}]",force_unicode - py3 compatibility,"```
'jet_tags' is not a valid tag library: ImportError raised loading jet.templatetags.jet_tags: cannot import name 'force_unicode'
```

http://django.readthedocs.org/en/latest/topics/python3.html
"
13632,Fantomas42,django-blog-zinnia,2,closed,534,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/534/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/534,[],"error rendering main page,cause column zinnia_entry.publication_date does not exist LINE 1: SELECT DISTINCT DATE_TRUNC('year', ""zinnia_entry"".""publicati... error","<!--

Have you read the contributing guidelines ?

https://github.com/Fantomas42/django-blog-zinnia/blob/develop/.github/CONTRIBUTING.md

-->
# Actual behavior
Installed zinnia  to my django webapp .It runs fine on my local machine but when i hosted it on heroku and opened the link to the blog,It showed this exception.

`2018-03-27T20:56:12.638992+00:00 app[web.1]: Internal Server Error: /weblog/
2018-03-27T20:56:12.639010+00:00 app[web.1]: Traceback (most recent call last):
2018-03-27T20:56:12.639013+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
2018-03-27T20:56:12.639014+00:00 app[web.1]:     return self.cursor.execute(sql, params)
2018-03-27T20:56:12.639016+00:00 app[web.1]: psycopg2.ProgrammingError: column zinnia_entry.publication_date does not exist
2018-03-27T20:56:12.639018+00:00 app[web.1]: LINE 1: SELECT DISTINCT DATE_TRUNC('year', ""zinnia_entry"".""publicati...
2018-03-27T20:56:12.639020+00:00 app[web.1]:                                            ^
2018-03-27T20:56:12.639022+00:00 app[web.1]: 
2018-03-27T20:56:12.639025+00:00 app[web.1]: The above exception was the direct cause of the following exception:
2018-03-27T20:56:12.639023+00:00 app[web.1]: 
2018-03-27T20:56:12.639027+00:00 app[web.1]: 
2018-03-27T20:56:12.639029+00:00 app[web.1]: Traceback (most recent call last):
2018-03-27T20:56:12.639030+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/exception.py"", line 41, in inner
2018-03-27T20:56:12.639032+00:00 app[web.1]:     response = get_response(request)
2018-03-27T20:56:12.639034+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/base.py"", line 187, in _get_response
2018-03-27T20:56:12.639036+00:00 app[web.1]:     response = self.process_exception_by_middleware(e, request)
2018-03-27T20:56:12.639037+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/core/handlers/base.py"", line 185, in _get_response
2018-03-27T20:56:12.639039+00:00 app[web.1]:     response = wrapped_callback(request, *callback_args, **callback_kwargs)
2018-03-27T20:56:12.639041+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/views/generic/base.py"", line 68, in view
2018-03-27T20:56:12.639042+00:00 app[web.1]:     return self.dispatch(request, *args, **kwargs)
2018-03-27T20:56:12.639044+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/views/generic/base.py"", line 88, in dispatch
2018-03-27T20:56:12.639045+00:00 app[web.1]:     return handler(request, *args, **kwargs)
2018-03-27T20:56:12.639047+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/views/generic/dates.py"", line 339, in get
2018-03-27T20:56:12.639049+00:00 app[web.1]:     self.date_list, self.object_list, extra_context = self.get_dated_items()
2018-03-27T20:56:12.639050+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/views/generic/dates.py"", line 425, in get_dated_items
2018-03-27T20:56:12.639052+00:00 app[web.1]:     date_list = self.get_date_list(qs, ordering='DESC')
2018-03-27T20:56:12.639053+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/views/generic/dates.py"", line 404, in get_date_list
2018-03-27T20:56:12.639055+00:00 app[web.1]:     if date_list is not None and not date_list and not allow_empty:
2018-03-27T20:56:12.639057+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/query.py"", line 254, in __bool__
2018-03-27T20:56:12.639058+00:00 app[web.1]:     self._fetch_all()
2018-03-27T20:56:12.639060+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/query.py"", line 1102, in _fetch_all
2018-03-27T20:56:12.639061+00:00 app[web.1]:     self._result_cache = list(self._iterable_class(self))
2018-03-27T20:56:12.639063+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/query.py"", line 152, in __iter__
2018-03-27T20:56:12.639064+00:00 app[web.1]:     for row in compiler.results_iter():
2018-03-27T20:56:12.639066+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 828, in results_iter
2018-03-27T20:56:12.639067+00:00 app[web.1]:     results = self.execute_sql(MULTI)
2018-03-27T20:56:12.639069+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/models/sql/compiler.py"", line 876, in execute_sql
2018-03-27T20:56:12.639071+00:00 app[web.1]:     cursor.execute(sql, params)
2018-03-27T20:56:12.639072+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/backends/utils.py"", line 80, in execute
2018-03-27T20:56:12.639074+00:00 app[web.1]:     return super(CursorDebugWrapper, self).execute(sql, params)
2018-03-27T20:56:12.639075+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
2018-03-27T20:56:12.639077+00:00 app[web.1]:     return self.cursor.execute(sql, params)
2018-03-27T20:56:12.639078+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/utils.py"", line 94, in __exit__
2018-03-27T20:56:12.639080+00:00 app[web.1]:     six.reraise(dj_exc_type, dj_exc_value, traceback)
2018-03-27T20:56:12.639081+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/utils/six.py"", line 685, in reraise
2018-03-27T20:56:12.639083+00:00 app[web.1]:     raise value.with_traceback(tb)
2018-03-27T20:56:12.639085+00:00 app[web.1]:   File ""/app/.heroku/python/lib/python3.6/site-packages/django/db/backends/utils.py"", line 65, in execute
2018-03-27T20:56:12.639086+00:00 app[web.1]:     return self.cursor.execute(sql, params)
2018-03-27T20:56:12.639090+00:00 app[web.1]: LINE 1: SELECT DISTINCT DATE_TRUNC('year', ""zinnia_entry"".""publicati...
2018-03-27T20:56:12.824826+00:00 app[web.1]: 10.136.187.237 - - [28/Mar/2018:02:26:12 +0530] ""GET /weblog/ HTTP/1.1"" 500 133513 ""-"" ""Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/64.0.3282.167 Chrome/64.0.3282.167 Safari/537.36""
2018-03-27T20:56:12.639092+00:00 app[web.1]:                                            ^
2018-03-27T20:56:12.639099+00:00 app[web.1]: 
2018-03-27T20:56:12.639088+00:00 app[web.1]: django.db.utils.ProgrammingError: column zinnia_entry.publication_date does not exist
2018-03-27T20:56:12.831728+00:00 heroku[router]: at=info method=GET path=""/weblog/"" host=blooming-headland-11176.herokuapp.com request_id=67cbd1e4-80b8-4de0-a962-21fd7305ef1f fwd=""103.211.18.64"" dyno=web.1 connect=1ms service=202ms status=500 bytes=133724 protocol=https
`

# Expected behavior
It should not raise such exception.

# Steps to reproduce the issue

  1.Add zinnia to settings.INSTALLED_APPS
  2.push source code on heroku and open the url link.
  

# Specifications

 - Zinnia version:0.20
 - Django version:1.11
 - Python version:3.5
 - Operating system:ubuntu 16.04

# Disclaimer

<!--

Please read these points carefully and answer honestly with an `X`
into all the boxes. Example : [X]

-->

Before submitting an *issue* make sure you have:

 - [ X] Read the guidelines for contributing.
 - [ X] Checked for duplicate issues.
 - [ X] Not a support request.
"
13633,Fantomas42,django-blog-zinnia,2,closed,532,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/532/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/532,[],migrate fails when installing zinnia for the first time on a production database,"# Actual behavior

Installing zinnia to a production system, fails on `zinnia.0003_publication_date` migration with some timeout. 

It looks that `fill_publication_date()` function in ""/zinnia/migrations/0003_publication_date.py"" timeouts when trying to access entries with: `for entry in entry_klass.objects.all()`, but zinnia database is empty.

Exception follows:

```
(env) user@host:~/project_root$ ./manage.py migrate zinnia
Operations to perform:
  Apply all migrations: zinnia
Running migrations:
  Applying zinnia.0002_lead_paragraph_and_image_caption... OK
  Applying zinnia.0003_publication_date...Traceback (most recent call last):
  File ""./manage.py"", line 28, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
 line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/migrations/operations/special.py"", line 193, in database_forwards
    self.code(from_state.apps, schema_editor)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/zinnia/migrations/0003_publication_date.py"", line 7, in fill_publication_date
    for entry in entry_klass.objects.all():
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/models/query.py"", line 250, in __iter__
    self._fetch_all()
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/models/query.py"", line 1118, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/models/query.py"", line 53, in __iter__
    results = compiler.execute_sql(chunked_fetch=self.chunked_fetch)
  File ""/home/user/project_root/env/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 899, in execute_sql
    raise original_exception
django.db.utils.OperationalError: canceling statement due to statement timeout
```

# Expected behavior

Migrations, especially for a fresh zinnia installation without entries in database, should not raise time out exceptions, breaking also a deployment.

# Workaround

Edited ""0003_publication_date.py"" file and added a `return` in `fill_publication_date()` so function body does not execute. Note that this may be ok only for a fresh - empty zinnia database.

# Steps to reproduce the issue

  1. Add `zinnia` to settings.INSTALLED_APPS
  2. python manage.py migrate (or python manage.py migrate zinnia, same output).

# Specifications

 - Database: PostgreSQL 9.6.8
 - Zinnia version: 0.19
 - Django version: 1.11.9
 - Python version: 2.7.12
 - Operating system: Ubuntu 16.04

# Disclaimer

<!--

Please read these points carefully and answer honestly with an `X`
into all the boxes. Example : [X]

-->

Before submitting an *issue* make sure you have:

 - [X] Read the guidelines for contributing.
 - [X] Checked for duplicate issues.
 - [X] Not a support request.
"
13634,Fantomas42,django-blog-zinnia,2,closed,530,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/530/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/530,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",ImportError: cannot import name 'HTMLCalendar',"[root@test zinnia]# python managers.py migrate
Traceback (most recent call last):
  File ""managers.py"", line 2, in <module>
    from django.contrib.sites.models import Site
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/contrib/sites/models.py"", line 4, in <module>
    from django.db import models
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/db/models/__init__.py"", line 3, in <module>
    from django.db.models.aggregates import *  # NOQA
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/db/models/aggregates.py"", line 5, in <module>
    from django.db.models.expressions import Case, Func, Star, When
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/db/models/expressions.py"", line 7, in <module>
    from django.db.models import fields
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/db/models/fields/__init__.py"", line 11, in <module>
    from django import forms
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/forms/__init__.py"", line 6, in <module>
    from django.forms.boundfield import *  # NOQA
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/forms/boundfield.py"", line 4, in <module>
    from django.forms.utils import flatatt, pretty_name
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/forms/utils.py"", line 7, in <module>
    from django.utils.html import escape, format_html, format_html_join, html_safe
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/utils/html.py"", line 10, in <module>
    from django.utils.http import RFC3986_GENDELIMS, RFC3986_SUBDELIMS
  File ""/usr/local/python36/lib/python3.6/site-packages/Django-2.0.1-py3.6.egg/django/utils/http.py"", line 2, in <module>
    import calendar
  File ""/root/zhangpanfeng/django-blog-zinnia/zinnia/calendar.py"", line 4, in <module>
    from zinnia.calendar import HTMLCalendar
  File ""/usr/local/python36/lib/python3.6/site-packages/django_blog_zinnia-0.19.1.dev0-py3.6.egg/zinnia/calendar.py"", line 4, in <module>
    from calendar import HTMLCalendar
ImportError: cannot import name 'HTMLCalendar'
"
13635,Fantomas42,django-blog-zinnia,2,closed,529,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/529/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/529,[],add doc line for importing django.donf.urls.include,"# What is the purpose of your *pull request*?

 - [X] Bug fix
 - [ ] New feature

# Proposed changes
Simple addition to the documentation. The import statement may eliminate a small stumbling block for people new to django. It is not added by default as of Django 1.11, though I believe it once was.

There's no code changing here, though I appreciate that this project adheres to PEP 8.

# Warning

Before submitting a *pull request* make sure you have:

 - [X] Read the guidelines for contributing.
 - [X] Wrote some tests.
 - [X] Respected the [PEP 8](https://www.python.org/dev/peps/pep-0008).
"
13641,Fantomas42,django-blog-zinnia,2,closed,522,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/522/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/522,[],Error rendering MPTT categories,"# Actual behavior

Loading the change form in django admin crashes with an exception:

```
Internal Server Error: /da/admin/zinnia/entry/111/change/
Traceback (most recent call last):
  File ""django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""django/template/response.py"", line 109, in render
    self.content = self.rendered_content
  File ""django/template/response.py"", line 86, in rendered_content
    content = template.render(context, self._request)
  File ""django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""django/template/base.py"", line 208, in render
    return self._render(context)
  File ""django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 174, in render
    return compiled_parent._render(context)
  File ""django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 174, in render
    return compiled_parent._render(context)
  File ""django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 70, in render
    result = block.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 70, in render
    result = block.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 70, in render
    result = block.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 70, in render
    result = block.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 209, in render
    nodelist.append(node.render_annotated(context))
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/loader_tags.py"", line 210, in render
    return template.render(context)
  File ""django/template/base.py"", line 210, in render
    return self._render(context)
  File ""django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 209, in render
    nodelist.append(node.render_annotated(context))
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 510, in render
    return self.nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 209, in render
    nodelist.append(node.render_annotated(context))
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 392, in render
    return strip_spaces_between_tags(self.nodelist.render(context).strip())
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/defaulttags.py"", line 315, in render
    return nodelist.render(context)
  File ""django/template/base.py"", line 994, in render
    bit = node.render_annotated(context)
  File ""django/template/base.py"", line 961, in render_annotated
    return self.render(context)
  File ""django/template/base.py"", line 1050, in render
    return render_value_in_context(output, context)
  File ""django/template/base.py"", line 1028, in render_value_in_context
    value = force_text(value)
  File ""django/utils/encoding.py"", line 76, in force_text
    s = six.text_type(s)
  File ""django/utils/html.py"", line 391, in <lambda>
    klass.__str__ = lambda self: mark_safe(klass_str(self))
  File ""django/forms/boundfield.py"", line 43, in __str__
    return self.as_widget()
  File ""django/forms/boundfield.py"", line 101, in as_widget
    return force_text(widget.render(name, self.value(), attrs=attrs))
  File ""django/contrib/admin/widgets.py"", line 307, in render
    'widget': self.widget.render(name, value, *args, **kwargs),
  File ""django/contrib/admin/widgets.py"", line 49, in render
    output = super(FilteredSelectMultiple, self).render(name, value, attrs)
  File ""django/forms/widgets.py"", line 626, in render
    options = self.render_options(value)
  File ""django/forms/widgets.py"", line 576, in render_options
    for option_value, option_label in self.choices:
ValueError: too many values to unpack (expected 2)
```

# Possible fix

Do not »*Overload the choice method to add the position of the object in the tree for future sorting.*«, just leave as is:

```
class MPTTModelChoiceIterator(forms.models.ModelChoiceIterator):
    """"""
    MPTT version of ModelChoiceIterator.
    """"""

    def choice(self, obj):
        """"""
        Overloads the choice method to add the position
        of the object in the tree for future sorting.
        """"""
        tree_id = getattr(obj, self.queryset.model._mptt_meta.tree_id_attr, 0)
        left = getattr(obj, self.queryset.model._mptt_meta.left_attr, 0)
        return super(MPTTModelChoiceIterator,
                     self).choice(obj)

```

# Expected behavior

No crash

# Steps to reproduce the issue

  1. You need to have categories
  2. Navigate to the change/create of an entry

# Specifications

 - Zinnia version: 0.19
 - django-mptt==0.8.7
 - Django version: 1.10
 - Python version: 3
 - Operating system: Ubuntu Xenial

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.
"
13647,Fantomas42,django-blog-zinnia,2,closed,515,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/515/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/515,"[{""default"": false, ""name"": ""Question"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Question"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0OTQ3Nzc4Mg=="", ""id"": 49477782}]",Performance best practices,"I need some input on performance tweaking for the blog. I would like everything but the comments cached or maybe just have the cache refresh if there are comments added.  But I am not sure the best way to go about it. 

Are there examples of the blog running < .5 sec? 



# Actual behavior

Site performs normally, but is slow. 

Average site response time with all other main pages is < 500 ms
Average site response on blog pages is 3-5 seconds

# Expected behavior

Blog is built as AMP enabled and based on their requirements it should be < 1s fully rendered so best expectation is server response should be around 400ms. 

# Steps to reproduce the issue

Normal operation.

# Specifications

 - Zinnia version: django-blog-zinnia (0.18.1)
 - Django version: 1.10.3
 - Python version: 2.7
 - Operating system: CentOS 7

I have tried various forms of caching. Here is what I have now. None seems to make a difference so I might be doing something wrong there. 

settings: 

CACHES = {
    'default': django_cache_url.config(),
    'comparison': django_cache_url.config()
}
CACHES['comparison']['LOCATION'] = 'comparison'
CACHES['comparison']['TIMEOUT'] = None

Debug: 
print django_cache_url.config()
{'LOCATION': '', 'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}


# Disclaimer

 - [X] I have read the guidelines for contributing linked to above.
 - [X] I have checked for duplicate issues.
 - [x] This is not a support request.
"
13650,Fantomas42,django-blog-zinnia,2,closed,512,12,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/512/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/512,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""MPTT"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/MPTT"", ""color"": ""08d6ff"", ""node_id"": ""MDU6TGFiZWw1NjIwNw=="", ""id"": 56207}]",ValueError: too many values to unpack when accessing entry via admin,"# Actual behavior
I created one entry in the admin and when i tried to change it i couldn't anymore. I can view the entry as a user on the page, but i can not create new entries nor edit the created. see below the traceback (form which I can't get any useful information what happend):

# Expected behavior
Just tryng to change the created entry or creating a new one in the admin.

# Steps to reproduce the issue

No idea what happend. I created one entry and tried to change it. Don't understand this.

# Specifications

 - Zinnia version: 0.18.1
 - Django version: 1.11.2
 - Python version: 2.7
 - Operating system: Ubuntu

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.

  File ""/usr/lib/python2.7/wsgiref/handlers.py"", line 85, in run
    self.result = application(self.environ, self.start_response)
  File ""/home/ubuntu/workspace/project/apps/django/contrib/staticfiles/handlers.py"", line 63, in __call__
    return self.application(environ, start_response)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/exception.py"", line 93, in response_for_exception
    response = handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/ubuntu/workspace/project/apps/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/ubuntu/workspace/project/apps/django/template/response.py"", line 107, in render
    self.content = self.rendered_content
  File ""/home/ubuntu/workspace/project/apps/django/template/response.py"", line 84, in rendered_content
    content = template.render(context, self._request)
  File ""/home/ubuntu/workspace/project/apps/django/template/backends/django.py"", line 66, in render
    return self.template.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 207, in render
    return self._render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/defaulttags.py"", line 216, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/loader_tags.py"", line 216, in render
    return template.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 209, in render
    return self._render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/defaulttags.py"", line 216, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/defaulttags.py"", line 216, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/defaulttags.py"", line 322, in render
    return nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/defaulttags.py"", line 322, in render
    return nodelist.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 957, in render_annotated
    return self.render(context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 1046, in render
    return render_value_in_context(output, context)
  File ""/home/ubuntu/workspace/project/apps/django/template/base.py"", line 1024, in render_value_in_context
    value = force_text(value)
  File ""/home/ubuntu/workspace/project/apps/django/utils/encoding.py"", line 78, in force_text
    s = six.text_type(s)
  File ""/home/ubuntu/workspace/project/apps/django/utils/html.py"", line 376, in <lambda>
    klass.__unicode__ = lambda self: mark_safe(klass_unicode(self))
  File ""/home/ubuntu/workspace/project/apps/django/forms/boundfield.py"", line 41, in __str__
    return self.as_widget()
  File ""/home/ubuntu/workspace/project/apps/django/forms/boundfield.py"", line 127, in as_widget
    **kwargs
  File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 220, in render
    context = self.get_context(name, value, attrs)
  File ""/home/ubuntu/workspace/project/apps/django/contrib/admin/widgets.py"", line 281, in get_context
    'rendered_widget': self.widget.render(name, value, attrs),
  File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 220, in render
    context = self.get_context(name, value, attrs)
  File ""/home/ubuntu/workspace/project/apps/django/contrib/admin/widgets.py"", line 38, in get_context
    context = super(FilteredSelectMultiple, self).get_context(name, value, attrs)
  File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 667, in get_context
    context = super(Select, self).get_context(name, value, attrs)
  File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 629, in get_context
    context['widget']['optgroups'] = self.optgroups(name, context['widget']['value'], attrs)
  File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 577, in optgroups
    for index, (option_value, option_label) in enumerate(chain(self.choices)):
ValueError: too many values to unpack

Also I found the forms modules in django that started to throw this error and placed a print in it, here is what I got:

    def optgroups(self, name, value, attrs=None):
        """"""Return a list of optgroups for this widget.""""""
        groups = []
        has_selected = False
        print ""name"",name
        print ""value"",value
        print ""attrs"",attrs
        print self.choices

        for index, (option_value, option_label) in enumerate(chain(self.choices)):
            if option_value is None:
                option_value = ''

            subgroup = []
            if isinstance(option_label, (list, tuple)):
                group_name = option_value
                subindex = 0
                choices = option_label
            else:
                group_name = None
                subindex = None
                choices = [(option_value, option_label)]
            groups.append((group_name, subgroup, index))

            for subvalue, sublabel in choices:
                selected = (
                    force_text(subvalue) in value and
                    (has_selected is False or self.allow_multiple_selected)
                )
                if selected is True and has_selected is False:
                    has_selected = True
                subgroup.append(self.create_option(
                    name, subvalue, sublabel, selected, index,
                    subindex=subindex, attrs=attrs,
                ))
                if subindex is not None:
                    subindex += 1
        return groups
----------------------------
value [u'0']
attrs {u'id': u'id_status'}
[(0, u'draft'), (1, u'hidden'), (2, u'published')]
name sites
value [u'2']
attrs {u'required': True, u'id': u'id_sites'}
<django.forms.models.ModelChoiceIterator object at 0x7f0980bf5450>
name content_template
value [u'zinnia/_entry_detail.html']
attrs {u'required': True, u'id': u'id_content_template'}
[('zinnia/_entry_detail.html', u'Default template')]
name detail_template
value [u'entry_detail.html']
attrs {u'required': True, u'id': u'id_detail_template'}
[('entry_detail.html', u'Default template')]
name authors
value [u'66']
attrs {u'id': u'id_authors'}
<django.forms.models.ModelChoiceIterator object at 0x7f0980bf5f10>
name related
value [u'']
attrs {u'id': u'id_related'}
<django.forms.models.ModelChoiceIterator object at 0x7f0980b7d150>
name categories
value [u'']
attrs {u'id': u'id_categories'}
<zinnia.admin.fields.MPTTModelChoiceIterator object at 0x7f0980b7d310>
Traceback (most recent call last): and here comes the error traceback

EDIT: I reinstalled the whole package and the issue persists ... 

EDIT2:
Another couple of trys in File ""/home/ubuntu/workspace/project/apps/django/forms/widgets.py"", line 577, in optgroups, iadded this to see values:

    def optgroups(self, name, value, attrs=None):
        """"""Return a list of optgroups for this widget.""""""
        groups = []
        has_selected = False
        print name
        print value
        print attrs
        
        try:
            print enumerate(chain(self.choices))
        except:
            print enumerate(chain(self.choices.items()))

        for item in enumerate(chain(self.choices)):
            print item

        for index, (option_value, option_label) in enumerate(chain(self.choices)):

And these are the results:

related
[]
{u'id': u'id_related'}
<enumerate object at 0x7f32eea2adc0>
(0, (2, u'fff: published'))
categories
[]
{u'id': u'id_categories'}
<enumerate object at 0x7f32eea2ad70>
(0, (1, u'Test123', (1, 1)))

Obviously it breaks beacuse of categories. My category Test123 does for some reason arrive with four values instead of the expected three. Once I deleted the category everything started to workout fine. I still consider this a zinnia bug. I currently can not use Categories because they break the entry admin."
13651,Fantomas42,django-blog-zinnia,2,closed,511,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/511/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/511,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",when setup the test server HTMLCalendar go wrong. ,"# Actual behavior
  File ""/root/my7788/django-blog-zinnia/zinnia/calendar.py"", line 4, in <module>
    from calendar import HTMLCalendar
ImportError: cannot import name HTMLCalendar

# Expected behavior
no problem set up the test server

# Steps to reproduce the issue

  1.
  2.
  3.

# Specifications

 - Zinnia version:
 - Django version:1.9
 - Python version:2.7
 - Operating system:entos 6 2.6.32-042stab123.3

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [ ] I have read the guidelines for contributing linked to above.
 - [ ] I have checked for duplicate issues.
 - [ ] This is not a support request.
"
13652,Fantomas42,django-blog-zinnia,2,closed,510,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/510/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/510,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]",Tag with special character not found,"# Actual behavior
When I add tag with special character (""bezpieczeństwo"") to my entry, it can't find the webpage with this tag: https://programeria.pl/tags/bezpiecze%C5%84stwo/
Error log says: 
Not Found: /tags/bezpiecze%C5%84stwo/

However when I test it on my local environment, everything works as expected:
[19/May/2017 12:20:37] ""GET /tags/bezpiecze%C5%84stwo/ HTTP/1.1"" 200 20027

# Specifications

 - Zinnia version: 0.18.1
 - Django version: 1.10
 - Python version: 3.5.2
 - Operating system: FreeBSD

Any ideas what could be wrong with that? I was trying to investigate the issue, but I haven't found anything yet. This would be super useful for my site."
13653,Fantomas42,django-blog-zinnia,2,closed,508,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/508/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/508,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",Migration error,"# Actual behavior
throwing error on `./manage.py migrate`
```
  Applying zinnia.0001_initial... OK
  Applying zinnia.0002_lead_paragraph_and_image_caption... OK
  Applying zinnia.0003_publication_date...Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 363, in execute_from_command_line
    utility.execute()
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 355, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/commands/test.py"", line 29, in run_from_argv
    super(Command, self).run_from_argv(argv)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/commands/test.py"", line 62, in handle
    failures = test_runner.run_tests(test_labels)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django_nose/runner.py"", line 303, in run_tests
    result = self.run_suite(nose_argv)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django_nose/runner.py"", line 241, in run_suite
    addplugins=plugins_to_add)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/nose/core.py"", line 121, in __init__
    **extra_args)
  File ""/usr/lib/python2.7/unittest/main.py"", line 95, in __init__
    self.runTests()
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/nose/core.py"", line 207, in runTests
    result = self.testRunner.run(self.test)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/nose/core.py"", line 50, in run
    wrapper = self.config.plugins.prepareTest(test)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/nose/plugins/manager.py"", line 99, in __call__
    return self.call(*arg, **kw)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/nose/plugins/manager.py"", line 167, in simple
    result = meth(*arg, **kw)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django_nose/plugin.py"", line 82, in prepareTest
    return super(NoseTestSuiteRunner, self).setup_databases()
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/test/runner.py"", line 546, in setup_databases
    self.old_names = self.runner.setup_databases()
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django_nose/runner.py"", line 490, in setup_databases
    self.parallel, **kwargs
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/test/utils.py"", line 187, in setup_databases
    serialize=connection.settings_dict.get('TEST', {}).get('SERIALIZE', True),
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/backends/base/creation.py"", line 69, in create_test_db
    run_syncdb=True,
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 130, in call_command
    return command.execute(*args, **defaults)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/migrations/migration.py"", line 129, in apply
    getattr(new_model._meta, self.option_name, set()),
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 364, in alter_index_together
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/migrations/operations/models.py"", line 590, in database_forwards
    self._delete_composed_index(model, fields, {'index': True}, self.sql_delete_index)
  File ""/home/runner/aktienregister/.ve/local/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 377, in _delete_composed_index
    "", "".join(columns),
ValueError: Found wrong number (0) of constraints for zinnia_entry(status, creation_date, start_publication, end_publication)
```
# Expected behavior

no exception :)

This is happening on my CI only, on dev servers/ local instances I cannot reproduce it. 

I fully understand that there are good chances that it's caused by some env setup. But I have no clue how to debug that. Hence this ticket with the question if there is anything known like that... just close and ignore if there is nothing you can help with...

# Steps to reproduce the issue

it's happening on my CI env after installing all required dependencies

# Specifications

 - Zinnia version: 0.18.1
 - Django version: 1.11
 - Python version: 2.7.3
 - Operating system: Ubuntu 16.04

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.
"
13654,Fantomas42,django-blog-zinnia,2,closed,506,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/506/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/506,[],Catch error with circular categories nesting,"# Actual behavior
I tried it in the demo site. If it's not up-to-date, maybe it has already been corrected.
If you edit category 1 (https://demo.django-blog-zinnia.com/admin/zinnia/category/1/change/) and define its mother category to Templates (for example), you get an error 500 (as Templates is a child of category 1).

# Expected behavior
You should get a ValidationError or ValueError (like the one you have when setting the mother category to the category itself), with an error messagedisplayed in the admin, instead of getting out of the admin with the error 500. 

# Steps to reproduce the issue
Go to https://demo.django-blog-zinnia.com/admin/zinnia/category/1/change/
  1. Set parent/mother category to Template
  2. Save
  3. -> error 500 (and lose the other changes you made during in the form)

# Specifications

 - Zinnia version: The one on the demo server
 - Django version: The one on the demo server
 - Python version: The one on the demo server
 - Operating system: The one on the demo server

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.

# More info
I'm not (yet) a user, I've just played with the demo site and the admin, and looked a bit in the code. And I'll probably use it as it seems a good solution to what I need.
If I do chose it, I'll probably write a test case for this issue, and make the correction if it hasn't been done already, but I might not be able to do that before some weeks.

- Brice"
13655,Fantomas42,django-blog-zinnia,2,closed,505,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/505/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/505,[],Entry change error render_options() takes exactly 2 arguments (3 given),"# Actual behavior
in admin =>  blog section => entries => select entry
In admin section when select entry to edit receive next error:
**render_options() takes exactly 2 arguments (3 given)**

# Expected behavior
in admin =>  blog section => entries => select entry => edit entry

# Steps to reproduce the issue

  1. login blog **http://localhost:8000/admin/**
  2. in blog section select entries **http://localhost:8000/admin/zinnia/entry/**
  3. select entry to edit **http://localhost:8000/admin/zinnia/entry/8/change**


# Specifications

 - Zinnia version: 0.18.1
 - Django version: 1.9
 - Python version: 2.7.12
 - Operating system: linux mint

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [X] I have read the guidelines for contributing linked to above.
 - [X] I have checked for duplicate issues.
 - [ ] This is not a support request.

# Proposed solution:

For django 1.9 I found that the problem is in zinnia/admin/widgets.py in the MPTTFilteredSelectMultiple, line number 49
def render_options(self, selected_choices):

in django/forms/widgets.py line 550:
def render_options(self, choices, selected_choices):

replace def render_options(self, selected_choices):
 with 
def render_options(self, choices=None, selected_choices=None):


"
13660,Fantomas42,django-blog-zinnia,2,closed,500,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/500/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/500,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Unabled customizing zinnia blog,"# Actual behavior
When I copy both  zinnia folder from git, my application producing following error:
Invalid block tag: 'zinnia_loop_template', expected 'empty' or 'endfor'

# Expected behavior
- Blog page should contain my header, footer and added blog post's.

# Steps to reproduce the issue

  1. Install django-blog-zinnia==0.15.2 using 'pip' command.
  2. Copy zinnia/base.html from git to existing django project's templates directory.
  3. Extend zinnia/base.html by your project's base.html


# Specifications
 - Zinnia version: 0.15.2
 - Django version: 1.7.1
 - Python version: 2.7.6
 - Operating system: Ubuntu-14.04

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [X ] I have read the guidelines for contributing linked to above.
 - [ X] I have checked for duplicate issues.
 - [ X] This is not a support request.
"
13661,Fantomas42,django-blog-zinnia,2,closed,499,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/499/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/499,"[{""default"": false, ""name"": ""Feeds"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Feeds"", ""color"": ""0033CC"", ""node_id"": ""MDU6TGFiZWwxOTA2Mzc="", ""id"": 190637}]",Attribute error when EntryFeeds demanding for image size,"Hi,
Implementing a FileBrowser (basically a CharField) image field property to Entry model I got an AttributeError exception when feeds.

I guess you should amend adding this exception too:

```
class EntryFeed(ZinniaFeed):
...
    def item_enclosure_length(self, item):
        ...
        try:
            return str(item.image.size)
        except (os.error, NotImplementedError, AttributeError):
            pass
        ...
```
Thanks,
Filippo

 - Zinnia version: 0.18.1
 - Django version: 1.10.5
 - Python version: 2.7
 - Operating system: Mac osx

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.
"
13662,Fantomas42,django-blog-zinnia,2,closed,498,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/498/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/498,[],Modernize documentation on sitemaps,"The previous documentation on Zinnia support for sitemaps used the old patterns function for URL handling.


# What is the purpose of your *pull request*?

 - [X ] Bug fix

# Proposed changes

This pull request replaces that example with code that works on Django 1.10.

# Warning

Before submitting a *pull request* make sure you have:

 - [ ] Wrote some tests.
 - [ ] Respected the [PEP 8](https://www.python.org/dev/peps/pep-0008).
 - [ ] Read the guidelines for contributing linked to above.

I don't see anything in the guidelines for contributing that apply to documentation improvements."
13665,Fantomas42,django-blog-zinnia,2,closed,495,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/495/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/495,[],AttributeError at /admin/zinnia/category/add/ 'TreeForeignKey' object has no attribute 'remote_field',"# Actual behavior

AttributeError at /admin/zinnia/category/add/
'TreeForeignKey' object has no attribute 'remote_field'
# Expected behavior
Category should be added exactly as it should had.

# Steps to reproduce the issue

  1.Install django==1.8/9/10 (Tried all versions, current version==1.9
  2.After makemigrations/migrate when runserver si executed, It won't let me add a category.
  3. Updated django-mptt and checked in detail if there is something I am doing wrong or any mismatched version but everything is perfect to my knowledge.

# Specifications

 - Zinnia version:0.18.1
 - Django version:1.9
 - Python version:2.7.11
 - Operating system:Windows

# Disclaimer
I have read all the documentation and double checked the settings needed for django-blog-zinnia. Following is the check list.

 - [x ] I have read the guidelines for contributing linked to above.
 - [x ] I have checked for duplicate issues.
 - [x ] This is not a support request.

Regards,
Shamaila"
13667,Fantomas42,django-blog-zinnia,2,closed,493,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/493/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/493,"[{""default"": false, ""name"": ""Templates"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Templates"", ""color"": ""a8ff1c"", ""node_id"": ""MDU6TGFiZWw1MDExNw=="", ""id"": 50117}]",Blog post slug with the same name as template file renders the template file instead,"# Actual behavior
When I was testing my zinnia install, I created a post called 'test'. When I wanted to view the post, it rendered a template file called 'test.html' instead, which was located in my templates folder but displayed the expected URL. I tried again, using a slug name called 'base' and it rendered base.html.

I also took the liberty of trying this on the zinnia live demo site with the slug 'base' and it again redirected me to 'base.html' from the zinnia project but showed the url as 'http://demo.django-blog-zinnia.com/blog/2016/12/05/base/' but there was no error message.

# Expected behavior
Even if the filename matches the slug, I was under the impression that the blog-post is identified with a combination of information (i.e. year, month, date) more than just the slug and so would always show the post even if there was a potential conflict.

# Steps to reproduce the issue

  1. Create blog post with a slug with the same name as a html file in your django project, e.g. 'test' --> 'test.html' in templates, 'base' --> 'base.html' in templates
  2. Open blog post called 'test', 'base' etc. and see the attempt to render 'test.hml' or 'base.html' in the blog post. 

# Specifications

 - Zinnia version: 0.17
 - Django version: 1.9
 - Python version: 3.5
 - Operating system: Mac OS X

# Disclaimer

Please read these questions **carefully** and answer honestly with an `x`
into all the boxes `[ ]`:

 - [x] I have read the guidelines for contributing linked to above.
 - [x] I have checked for duplicate issues.
 - [x] This is not a support request.
"
13670,Fantomas42,django-blog-zinnia,2,closed,490,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/490/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/490,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]","Zinnia0.18, Django 1.9.4 - TypeError: render_options() takes 2 positional arguments but 3 were given","When adding new entry got an error.

Comment 

```
    parent = TreeNodeChoiceField(
    label=_('Parent category'),
    empty_label=_('No parent category'),
    level_indicator='|--', required=False,
    queryset=Category.objects.all())
```

in `admin/forms.py` helps, but it is not write design.
"
13675,Fantomas42,django-blog-zinnia,2,closed,484,39,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/484/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/484,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]","Zinnia0.18, in Python3 venv, DEBUG on, Cannot resolve keyword 'entries' into field. Choices are:avatar, comment_comments,...","Hi!
I'm using **Django 1.10** and I'm trying to deploy blog Zinnia in a **Python 3 virtualenv**. 
I installed **Zinnia 0.18** using pip, and followed the ""get started"" guide to set everything in my site settings.py and urls.py, then made the migrations.
However, when I went to 127.0.0.1/weblog , the exception raised.

> django.core.exceptions.FieldError: Cannot resolve keyword 'entries' into field. Choices are: avatar, comment_comments, comment_flags, date_joined, email, first_name, groups, id, is_active, is_staff, is_superuser, last_login, last_name, logentry, password, user_permissions, username

I looked up issues solved (or closed) before, but unluckily none of them works for me.

Apps I installed:

Django==1.10
Pillow==3.3.1
PyMySQL==0.7.6
beautifulsoup4==4.5.1
django-appconf==1.0.2
django-avatar==3.0.0
django-blog-zinnia==0.18
django-contrib-comments==1.7.2
django-mptt==0.8.6
django-tagging==0.4.5
django-xmlrpc==0.1.5
mots-vides==2015.5.11
pyparsing==2.1.9
pytz==2016.6.1
regex==2016.08.27
"
13677,Fantomas42,django-blog-zinnia,2,closed,482,7,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/482/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/482,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]","(help) I follow the installation section of the docs,but got an error when I run the project.","I follow this docs: http://docs.django-blog-zinnia.com/en/develop/getting-started/install.html to start my project, everything were setted, but when I visit the index page, I got this error:

> FieldError at /weblog/
> Cannot resolve keyword 'entries' into field. Choices are: comment_comments, comment_flags, date_joined, email, first_name, groups, id, is_active, is_staff, is_superuser, last_login, last_name, logentry, password, user_permissions, username

and this is the traceback:

> Internal Server Error: /weblog/
> Traceback (most recent call last):
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\core\handlers\exception.py"", line 39, in inner
>     response = get_response(request)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\core\handlers\base.py"", line 217, in _get_response
>     response = self.process_exception_by_middleware(e, request)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\core\handlers\base.py"", line 215, in _get_response
>     response = response.render()
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\response.py"", line 109, in render
>     self.content = self.rendered_content
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\response.py"", line 86, in rendered_content
>     content = template.render(context, self._request)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\backends\django.py"", line 66, in render
>     return self.template.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 208, in render
>     return self._render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 199, in _render
>     return self.nodelist.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 994, in render
>     bit = node.render_annotated(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 961, in render_annotated
>     return self.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\loader_tags.py"", line 174, in render
>     return compiled_parent._render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 199, in _render
>     return self.nodelist.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 994, in render
>     bit = node.render_annotated(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 961, in render_annotated
>     return self.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\loader_tags.py"", line 174, in render
>     return compiled_parent._render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 199, in _render
>     return self.nodelist.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 994, in render
>     bit = node.render_annotated(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 961, in render_annotated
>     return self.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\loader_tags.py"", line 174, in render
>     return compiled_parent._render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 199, in _render
>     return self.nodelist.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 994, in render
>     bit = node.render_annotated(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 961, in render_annotated
>     return self.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\loader_tags.py"", line 70, in render
>     result = block.nodelist.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 994, in render
>     bit = node.render_annotated(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\base.py"", line 961, in render_annotated
>     return self.render(context)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\template\library.py"", line 225, in render
>     _dict = self.func(_resolved_args, *_resolved_kwargs)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\zinnia\templatetags\zinnia.py"", line 84, in get_authors
>     'authors': Author.published.all().annotate(
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\manager.py"", line 160, in all
>     return self.get_queryset()
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\zinnia\managers.py"", line 107, in get_queryset
>     entries__sites=Site.objects.get_current()
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\query.py"", line 794, in filter
>     return self._filter_or_exclude(False, _args, *_kwargs)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\query.py"", line 812, in _filter_or_exclude
>     clone.query.add_q(Q(_args, *_kwargs))
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1227, in add_q
>     clause, _ = self._add_q(q_object, self.used_aliases)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1247, in _add_q
>     current_negated, allow_joins, split_subq)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1253, in _add_q
>     allow_joins=allow_joins, split_subq=split_subq,
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1133, in build_filter
>     lookups, parts, reffed_expression = self.solve_lookup_type(arg)
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1019, in solve_lookup_type
>     _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
>   File ""D:\Users\zmrenwu\Envs\zinnia_env\lib\site-packages\django\db\models\sql\query.py"", line 1327, in names_to_path
>     ""Choices are: %s"" % (name, "", "".join(available)))
> django.core.exceptions.FieldError: Cannot resolve keyword 'entries' into field. Choices are: comment_comments, comment_flags, date_joined, email, first_name, groups, id, is_active, is_staff, is_superuser, last_login, last_name, logentry, password, user_permissions, username
> [24/Aug/2016 16:44:13] ""GET /weblog/ HTTP/1.1"" 500 248632

How to fix it? With this error I can't publish any entry. But I can create other items in admin.
"
13679,Fantomas42,django-blog-zinnia,2,closed,480,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/480/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/480,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]","{% get_tags as entry_tags %} is broken in 0.17, with Django 1.8","In Django 1.8 with Zinnia 0.17, this `zinnia/base.html` template:

```
{% load zinnia %}
{% get_tags as entry_tags %}
```

seems to be causing this error:

```
TemplateSyntaxError: 'get_tags' received too many positional arguments
```

I have not tested with other versions of Django, but I have confirmed that this error does not occur with Zinnia 0.16.
"
13680,Fantomas42,django-blog-zinnia,2,closed,479,8,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/479/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/479,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",ProgrammingError at /admin/zinnia/entry/,"Hi, 

Been trying to get zinnia to work with the latest version of Django (1.9) and hitting numerous problems. Here is the one I haven't been able to fix. Any ideas what is going on?

Internal Server Error: /admin/zinnia/entry/

ProgrammingError at /admin/zinnia/entry/
column ""zinnia_category.title"" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT DISTINCT ""zinnia_category"".""id"", ""zinnia_category"".""t...
                                               ^

Request Method: GET
Request URL: http://127.0.0.1:8000/admin/zinnia/entry/
Django Version: 1.9.7
Python Executable: /Users/kennethmarritt/.virtualenvs/stickpin/bin/python
Python Version: 2.7.11
Python Path: ['/Users/kennethmarritt/stickpin', '/Users/kennethmarritt/.virtualenvs/stickpin/src/inflect', '/Users/kennethmarritt/.virtualenvs/stickpin/src/django-blog-zinnia', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python27.zip', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/plat-darwin', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/plat-mac', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/plat-mac/lib-scriptpackages', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/lib-tk', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/lib-old', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/lib-dynload', '/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages', '/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/newrelic-2.50.0.39']
Server time: Wed, 8 Jun 2016 15:10:38 +0000
Installed Applications:
(u'django.contrib.admin',
u'django.contrib.auth',
u'django.contrib.contenttypes',
u'django.contrib.sessions',
u'django.contrib.messages',
u'django.contrib.staticfiles',
u'django.contrib.sites',
u'django.contrib.sitemaps',
u'stickpin',
u'odds',
u'rest_framework',
u'details',
u'selections',
u'scraper',
u'heatmap',
u'betturtle',
u'unfriendly',
u'storages',
u'robots',
u'webmaster_verification',
u'ckeditor',
u'ckeditor_uploader',
u'django_ajax',
u'django_comments',
u'mptt',
u'tagging',
u'zinnia_bootstrap',
u'zinnia',
u'zinnia_twitter',
u'zinnia_ckeditor',
u'offers',
u'newsletter',
u'collectfast',
u'debug_toolbar',
u'debug_panel',
u'django_stormpath',
u'django_social_share')
Installed Middleware:
(u'htmlmin.middleware.MarkRequestMiddleware',
u'django.contrib.sessions.middleware.SessionMiddleware',
u'django.middleware.common.CommonMiddleware',
u'django.middleware.csrf.CsrfViewMiddleware',
u'django.contrib.auth.middleware.AuthenticationMiddleware',
u'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
u'django.contrib.messages.middleware.MessageMiddleware',
u'django.middleware.clickjacking.XFrameOptionsMiddleware',
u'django.middleware.security.SecurityMiddleware',
u'django_ajax.middleware.AJAXMiddleware')

Traceback:  

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = self.process_exception_by_middleware(e, request)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/options.py"" in wrapper
1.                 return self.admin_site.admin_view(view)(_args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
1.                     response = view_func(request, _args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/views/decorators/cache.py"" in _wrapped_view_func
1.         response = view_func(request, _args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/sites.py"" in inner
1.             return view(request, _args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapper
1.             return bound_func(_args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
1.                     response = view_func(request, _args, *_kwargs)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/utils/decorators.py"" in bound_func
1.                 return func.**get**(self, type(self))(_args2, *_kwargs2)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/options.py"" in changelist_view
1.                 self.list_max_show_all, self.list_editable, self)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/views/main.py"" in **init**
1.         self.queryset = self.get_queryset(request)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/views/main.py"" in get_queryset
1.          filters_use_distinct) = self.get_filters(request)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/views/main.py"" in get_filters
1.                         self.model, self.model_admin)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/contrib/admin/filters.py"" in **init**
1.         self.lookup_choices = list(lookup_choices)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/src/django-blog-zinnia/zinnia/admin/filters.py"" in lookups
1.         for active_object in active_objects:

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/models/query.py"" in **iter**
1.         self._fetch_all()

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/models/query.py"" in _fetch_all
1.             self._result_cache = list(self.iterator())

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/models/query.py"" in **iter**
1.         results = compiler.execute_sql()

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/models/sql/compiler.py"" in execute_sql
1.             cursor.execute(sql, params)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/backends/utils.py"" in execute
1.                 return self.cursor.execute(sql, params)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/utils.py"" in **exit**
1.                 six.reraise(dj_exc_type, dj_exc_value, traceback)

File ""/Users/kennethmarritt/.virtualenvs/stickpin/lib/python2.7/site-packages/django/db/backends/utils.py"" in execute
1.                 return self.cursor.execute(sql, params)

Exception Type: ProgrammingError at /admin/zinnia/entry/
Exception Value: column ""zinnia_category.title"" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT DISTINCT ""zinnia_category"".""id"", ""zinnia_category"".""t...
"
13681,Fantomas42,django-blog-zinnia,2,closed,478,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/478/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/478,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]","TypeError ""sequence index must be integer, not 'slice'"" in 0.16","While it has been addressed in <a href=""https://github.com/Fantomas42/django-blog-zinnia/pull/465"">#465</a>, latest version in master (0.16) still has this bug, making app unusable with Django 1.9 despite what documentation claims. While one can simply install zinnia from development branch, I wouldn't feel safe using it in production.
Same goes for the package on PyPi.
"
13683,Fantomas42,django-blog-zinnia,2,closed,476,10,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/476/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/476,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Tests"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests"", ""color"": ""b50000"", ""node_id"": ""MDU6TGFiZWw1Mzc0NA=="", ""id"": 53744}]","When running the tests, I am obtaining ""There is 1 other session using the database"" with Postgresql","Hello!

As the title says, almost everytime I run the tests I get

```
OperationalError: database ""database_name"" is being accessed by other users
DETAIL:  There is 1 other session using the database
```

I was not getting it until I start using django-blog-zinnia in my project.

Searching through internet, I found https://code.djangoproject.com/ticket/22420#comment:8

according to that comment, that person was also using django-blog-zinnia. Is there a chance that this error is produced by blog-zinnia?

Thank you!
"
13684,Fantomas42,django-blog-zinnia,2,closed,475,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/475/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/475,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Exception Value: 	  Reverse for 'humans' with arguments '()' and keyword arguments '{}' not found. 1 pattern(s) tried: ['$humans.txt$'],"Hi,

I got the urls.py from+ https://github.com/Fantomas42/django-blog-zinnia/blob/develop/demo/urls.py,  and  edited these lines:

> urlpatterns = [
>     url(r'^$', RedirectView.as_view(url='/blog/', permanent=True)),
>     url(r'^blog/', include('zinnia.urls')),
>     url(r'^comments/', include('django_comments.urls')),
>     url(r'^xmlrpc/$', handle_xmlrpc),
>     url(r'^i18n/', include('django.conf.urls.i18n')),
>     url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
>     url(r'^admin/', admin.site.urls),
> ]

to  below:

> urlpatterns = [
>     # url(r'^$', RedirectView.as_view(url='/blog/', permanent=True)),
>     url(r'^$', include('zinnia.urls', namespace='zinnia')),
>     url(r'^comments/', include('django_comments.urls')),
>     url(r'^xmlrpc/$', handle_xmlrpc),
>     url(r'^i18n/', include('django.conf.urls.i18n')),
>     url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
>     url(r'^admin/', admin.site.urls),
> ]

then visited the http://127.0.0.1:8000/ ,  i got errors:

```
Environment:


Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.8.13
Python Version: 3.4.2
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'django_comments',
 'mptt',
 'tagging',
 'zinnia')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')


Template error:
In template /opt/py34_django18_env/lib/python3.4/site-packages/django_blog_zinnia-0.16-py3.4.egg/zinnia/templates/zinnia/base.html, error at line 13
   Reverse for 'humans' with arguments '()' and keyword arguments '{}' not found. 1 pattern(s) tried: ['$humans.txt$']

   3 : {% load zinnia %}



   4 : 



   5 : {% block meta-keywords %}{% get_tags as entry_tags %}{{ entry_tags|join:"", ""}}{% endblock meta-keywords %}



   6 : 



   7 : {% block meta %}



   8 :     <meta name=""generator"" content=""Zinnia {{ ZINNIA_VERSION }}"" />



   9 : {% endblock meta %}



   10 : 



   11 : {% block link %}




   12 :     <link rel=""index"" href=""{% url 'zinnia:entry_archive_index' %}"" />



   13 :     <link rel=""author"" type=""text/plain"" href="" {% url 'zinnia:humans' %} "" />



   14 :     <link rel=""EditURI"" type=""application/rsd+xml"" href=""{% url 'zinnia:rsd' %}"" />



   15 :     <link rel=""wlwmanifest"" type=""application/wlwmanifest+xml"" href=""{% url 'zinnia:wlwmanifest' %}"" />



   16 :     <link rel=""search"" type=""application/opensearchdescription+xml"" title=""Zinnia's Weblog"" href=""{% url 'zinnia:opensearch' %}"" />



   17 :     <link rel=""alternate"" type=""application/rss+xml"" title=""{% trans ""RSS feed of last entries"" %}"" href=""{% url 'zinnia:entry_feed' %}"" />



   18 :     <link rel=""alternate"" type=""application/rss+xml"" title=""{% trans ""RSS feed of last discussions"" %}"" href=""{% url 'zinnia:discussion_feed' %}"" />



   19 :     {% get_archives_entries ""zinnia/tags/entries_archives_link.html"" %}




   20 : {% endblock link %}



   21 : 



   22 : {% block breadcrumbs %}



   23 :   {% zinnia_breadcrumbs %}


Traceback:
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/core/handlers/base.py"" in get_response
  164.                 response = response.render()
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/response.py"" in render
  158.             self.content = self.rendered_content
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/response.py"" in rendered_content
  135.         content = template.render(context, self._request)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/backends/django.py"" in render
  74.         return self.template.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  210.                     return self._render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in _render
  202.         return self.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in render
  135.         return compiled_parent._render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in _render
  202.         return self.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in render
  135.         return compiled_parent._render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in _render
  202.         return self.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in render
  135.         return compiled_parent._render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in _render
  202.         return self.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in render
  65.                 result = block.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render
  89.             output = self.filter_expression.resolve(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in resolve
  648.                 obj = self.var.resolve(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in resolve
  789.             value = self._resolve_lookup(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in _resolve_lookup
  849.                             current = current()
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in super
  79.             return mark_safe(self.render(self.context))
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/loader_tags.py"" in render
  65.                 result = block.nodelist.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/base.py"" in render
  905.                 bit = self.render_node(node, context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/debug.py"" in render_node
  79.             return node.render(context)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/defaulttags.py"" in render
  507.                         six.reraise(*exc_info)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/utils/six.py"" in reraise
  686.         raise value
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/template/defaulttags.py"" in render
  493.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/core/urlresolvers.py"" in reverse
  578.     return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
File ""/opt/py34_django18_env/lib/python3.4/site-packages/django/core/urlresolvers.py"" in _reverse_with_prefix
  495.                              (lookup_view_s, args, kwargs, len(patterns), patterns))

Exception Type: NoReverseMatch at /
Exception Value: Reverse for 'humans' with arguments '()' and keyword arguments '{}' not found. 1 pattern(s) tried: ['$humans.txt$']
```

Anyone help? 
Thanks.
"
13689,Fantomas42,django-blog-zinnia,2,closed,470,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/470/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/470,"[{""default"": false, ""name"": ""MPTT"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/MPTT"", ""color"": ""08d6ff"", ""node_id"": ""MDU6TGFiZWw1NjIwNw=="", ""id"": 56207}]",Attribute error when trying to create a Category,"I'm getting an Attribute Error when I try to add a Category that says: 'Category' object has no attribute 'get_deferred_fields'

Here's the complete traceback:

```
Traceback:
File ""/Library/Python/2.7/site-packages/django/core/handlers/base.py"" in get_response
  111.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""/Library/Python/2.7/site-packages/django/contrib/admin/options.py"" in wrapper
  583.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
  105.                     response = view_func(request, *args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/views/decorators/cache.py"" in _wrapped_view_func
  52.         response = view_func(request, *args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/contrib/admin/sites.py"" in inner
  206.             return view(request, *args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/contrib/admin/options.py"" in add_view
  1453.         return self.changeform_view(request, None, form_url, extra_context)
File ""/Library/Python/2.7/site-packages/django/utils/decorators.py"" in _wrapper
  29.             return bound_func(*args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
  105.                     response = view_func(request, *args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/utils/decorators.py"" in bound_func
  25.                 return func.__get__(self, type(self))(*args2, **kwargs2)
File ""/Library/Python/2.7/site-packages/django/db/transaction.py"" in inner
  394.                 return func(*args, **kwargs)
File ""/Library/Python/2.7/site-packages/django/contrib/admin/options.py"" in changeform_view
  1404.                 self.save_model(request, new_object, form, not add)
File ""/Library/Python/2.7/site-packages/django/contrib/admin/options.py"" in save_model
  1045.         obj.save()
File ""/Library/Python/2.7/site-packages/mptt/models.py"" in save
  858.         deferred_fields = self.get_deferred_fields()

Exception Type: AttributeError at /admin/zinnia/category/add/
Exception Value: 'Category' object has no attribute 'get_deferred_fields'
```

Any help will be much appreciated
"
13695,Fantomas42,django-blog-zinnia,2,closed,464,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/464/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/464,[],System check identified issue fields.E300:,"Hi,

I installed zinnia verison 0.15.2 on existing Django 1.9 project.

When I run manage.py runserver it ouputs:

System check identified some issues:
ERRORS:
zinnia.Entry.authors: (fields.E300) Field defines a relation with model 'zinnia.Author', which is either not installed, or is abstract.

Am able to silence this check but would like to know what's causing this error.

Any ideas?

Thanks
"
13696,Fantomas42,django-blog-zinnia,2,closed,463,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/463/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/463,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]","Prevent TypeError: sequence index must be integer, not 'slice'","When using django-blog-zinnia==0.15.2 I'd get ""TypeError: sequence index must be integer, not 'slice'"" because page.paginator.page_range is a xrange.
"
13703,Fantomas42,django-blog-zinnia,2,closed,456,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/456/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/456,[],Pickling errors,"Hi, I am new to Django and just added zinnia to my AWS instance. 
Everything used to be fine.
But today, all the entries are crashed. 
The error  is:
"" 
PicklingError at /weblog/2015/12/10/hello-world-playgroud/

Can't pickle <type 'function'>: attribute lookup **builtin**.function failed
""
And you can check the detailed information in
http://lizyplus.ddns.net/weblog/2015/12/10/hello-world-playgroud/

It seems that the entry_detail_base.html has a problem with the get_similar_entries().
But when I started the website in Dec 10th, everything is OK. How did this problem happen?

I am using the Unbuntu 14.04 OS supported by AWS and Django version is 1.8. 
Apache2 and zinnia are installed by apt-get. So I guess that they are newest version. 
Is that caused by cache? 
"
13705,Fantomas42,django-blog-zinnia,2,closed,454,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/454/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/454,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",Bug: NoReverseMatch at /admin/zinnia/,"On django with CustomUser (AUTH_USER_MODEL = 'users.CustomUser') exception raised.
url: /admin/zinnia/

```
Reverse for 'users_customuser_changelist' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/zinnia/
Django Version: 1.8.6
Exception Type: NoReverseMatch
Exception Value:    
Reverse for 'users_customuser_changelist' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []
...
In template /home/ghost/.virtualenvs/neighbors/local/lib/python2.7/site-packages/zinnia/templates/admin/zinnia/widgets/_content_stats.html, error at line 36
{% url 'changelist'|user_admin_urlname %}
```
"
13709,Fantomas42,django-blog-zinnia,2,closed,450,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/450/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/450,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Issue about comments,"hi,
When i trying to comment an example entry ,it happened to an error,i just start to learn django,so i need your help.Below is the error infomation.

error at /comments/post/
[Errno 111] Connection refused
Request Method: POST
Request URL:    http://127.0.0.1:8000/comments/post/
Django Version: 1.8.5
Exception Type: error
Exception Value:  
[Errno 111] Connection refused
Exception Location: /usr/lib/python2.7/socket.py in create_connection, line 571
Python Executable:  /usr/bin/python
"
13711,Fantomas42,django-blog-zinnia,2,closed,448,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/448/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/448,[],zinnia.models_bases.entry.AbstractEntry cannot be imported,"I wanted to install zinnia in a virtual env on my webserver. Unfortunately I get an error. Here is the traceback:

File ""/var/www/blog/blog/wsgi.py"", line 20, in <module>
     application = get_wsgi_application()
File ""/var/www/blog/env/lib/python3.4/site-packages/django/core/wsgi.py"", line 14, in get_wsgi_application
     django.setup()
File ""/var/www/blog/env/lib/python3.4/site-packages/django/**init**.py"", line 18, in setup
     apps.populate(settings.INSTALLED_APPS)
File ""/var/www/blog/env/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
     app_config.import_models(all_models)
File ""/var/www/blog/env/lib/python3.4/site-packages/django/apps/config.py"", line 198, in import_models
     self.models_module = import_module(models_module_name)
File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
     **import**(name)
File ""/var/www/blog/env/lib/python3.4/site-packages/zinnia/models/**init**.py"", line 4, in <module>
     from zinnia.models.entry import Entry
File ""/var/www/blog/env/lib/python3.4/site-packages/zinnia/models/entry.py"", line 6, in <module>
     class Entry(load_model_class(ENTRY_BASE_MODEL)):
File ""/var/www/blog/env/lib/python3.4/site-packages/zinnia/models_bases/**init**.py"", line 21, in load_model_class
     raise ImproperlyConfigured('%s cannot be imported' % model_path)
ImproperlyConfigured: zinnia.models_bases.entry.AbstractEntry cannot be imported

pip freeze output:
Django==1.8.5
Pillow==3.0.0
beautifulsoup4==4.4.1
django-blog-zinnia==0.15.2
django-contrib-comments==1.6.1
django-mptt==0.7.4
django-tagging==0.4
django-xmlrpc==0.1.5
mots-vides==2015.5.11
pyparsing==2.0.3
pytz==2015.7

Any help appreciated!

Martin
"
13715,Fantomas42,django-blog-zinnia,2,closed,444,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/444/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/444,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Custom User"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Custom%20User"", ""color"": ""0052cc"", ""node_id"": ""MDU6TGFiZWw4MTExODgyNQ=="", ""id"": 81118825}]",Add author to an entry using custom user model,"Hi,
I'm trying to bind an author to an entry using the django admin add form. When I save django throws an exception:
'Author' instance expected, got CustomModel.

Debuggin I see that the method _add_items of ManyRelatedManager class throws the exception because isinstance(obj, self.model) returns False. obj is my custom model class and self.model is zinnia.models.author.Author.
"
13716,Fantomas42,django-blog-zinnia,2,closed,443,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/443/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/443,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",window function call requires an OVER clause,"I don't know when this error started happening. 

I don't understand why it's happening either - when I try to debug, it seems endless?

This is the error I get on the front page of the blog:

Environment:
Django Version: 1.8.4
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.sites',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.contenttypes',
 'django_comments',
 'mptt',
 'tagging',
 'zinnia')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')

Template error:
In template /home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/zinnia/templates/zinnia/tags/entries_slider.html, error at line 2
   window function call requires an OVER clause
LINE 1: ...ingback_count"", ""zinnia_entry"".""trackback_count"", ""zinnia_en...
                                                             ^
...
   2 :  {% if entries %} 
... 

Exception Type: ProgrammingError at /
Exception Value: window function call requires an OVER clause
LINE 1: ...ingback_count"", ""zinnia_entry"".""trackback_count"", ""zinnia_en...
                                                             ^

I can see the admin site no problem, until I start trying to look at the entries, edit a particular entry or save a tagged entry?

On those occasions, I get the same error, except the problem is located at:

lib/python2.7/site-packages/django/db/backends/utils.py in execute, line 64
"
13721,Fantomas42,django-blog-zinnia,2,closed,438,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/438/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/438,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",UnicodeEncodeError: 'ascii' codec can't encode characters in position 6-8: ordinal not in range(128),"I´m getting the following error when using wp2zinnia. I´m able to import tags, categories and the first 4 posts before it crashes.

``` python
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/django/core/management/base.py"", line 503, in handle
    label_output = self.handle_label(label, **options)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/zinnia_wordpress/management/commands/wp2zinnia.py"", line 115, in handle_label
    self.import_entries(tree.findall('channel/item'))
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/zinnia_wordpress/management/commands/wp2zinnia.py"", line 359, in import_entries
    self.write_out('> %s... ' % title)
  File ""/opt/python/run/venv/local/lib/python3.4/site-packages/zinnia_wordpress/management/commands/wp2zinnia.py"", line 87, in write_out
    sys.stdout.write(smart_str(message))
UnicodeEncodeError: 'ascii' codec can't encode characters in position 6-8: ordinal not in range(128)
```
"
13724,Fantomas42,django-blog-zinnia,2,closed,435,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/435/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/435,[],New installation Django 1.8 - Models not loaded,"I apologize if this is a duplicate. I looked around the blogs to see if this has been addressed already. I have tried multiple installations of Zinnia and all fail with the same error. When running syncdb I recieve the error: 
File ""/usr/local/lib/python2.7/dist-packages/django/apps/registry.py"", line 131, in check_models_ready
    raise AppRegistryNotReady(""Models aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.

INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django_comments',
    'django.contrib.sitemaps',
    'django.contrib.sites',
    'markdown_deux',
    'mptt',
    'tagging',
    'zinnia',
)

I have attempted to use pip install -U django-blog-zinnia and this completes successfully; but errors when running syncdb. I have made the tweaks mentioned in previous posts to the authors.py and **init**.py files but still receive the same error. 

Am I missing a work around somewhere? 
"
13726,Fantomas42,django-blog-zinnia,2,closed,433,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/433/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/433,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",NoReverseMatch exception after Entry's model extention,"Despite the fact that I've done everything exactly the same as described in [documentation](http://docs.django-blog-zinnia.com/en/develop/how-to/extending_entry_model.html), I'm getting `NoReverseMatch` exception with my new custom `get_absolute_url` property on all pages  with references on another entries. 

```
NoReverseMatch at /blog/1/
Reverse for 'entry_detail' with arguments '()' and keyword arguments '{'pk': '1'}' not found. 1 pattern(s) tried: ['weblog/(?P<year>\\d{4})/(?P<month>\\d{2})/(?P<day>\\d{2})/(?P<slug>[-\\w]+)/$']
```

Here is the part of the template that cause error:

```
<a href=""{{ object.get_absolute_url }}""></a>
```

zinnia_customized.models

``` python
from django.db import models
from zinnia.models_bases.entry import AbstractEntry

class EntryWithNewUrl(AbstractEntry):
    """"""Entry with '/blog/<id>/' URL""""""

    @models.permalink
    def get_absolute_url(self):
        return ('zinnia:entry_detail', (),
                {'pk': self.id})

    class Meta(AbstractEntry.Meta):
        abstract = True
```

zinnia_customized.views

``` python
from django.views.generic.detail import DetailView

from zinnia.models.entry import Entry
from zinnia.views.mixins.entry_preview import EntryPreviewMixin
from zinnia.views.mixins.entry_protection import EntryProtectionMixin

class EntryDetail(EntryPreviewMixin,
                  EntryProtectionMixin,
                  DetailView):
    queryset = Entry.published.on_site()
    template_name_field = 'template'
```

urls.py

``` python
from zinnia_customized.views import EntryDetail

url(r'^blog/(?P<pk>\d+)/$', EntryDetail.as_view(),  name='entry_detail'),
```

Project's settings.py:

``` python
ZINNIA_ENTRY_BASE_MODEL = 'zinnia_customized.models.EntryWithNewUrl'
```

If I remove `ZINNIA_ENTRY_BASE_MODEL` from the settings file I could actually reach the entry with new url pattern, but  urls to other entries have standart `weblog/<year>/<month>/<day>/<slug>` format. (That's because custom `get_absolute_url()` is not registered, after all)

Is that some kind of bug or am I actually missing something?
Thanks in advance.

....  
Django 1.8.2
Zinnia 0.15.2.dev0
Python 3.4
"
13727,Fantomas42,django-blog-zinnia,3,closed,432,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/432/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/432,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",TypeError: unorderable types: Entry() < Entry(),"Hello,
I'm getting an error and I'm still not able to reproduce it in my localhost, so I'll try dump my PostgreSQL production database and mount it locally.
I'm using python 3.4 and latest zinnia version.

Here the traceback:

``` bash
Internal Server Error: /blog/2014/06/06/fatturazione-pa/
Traceback (most recent call last):
  File ""/opt/website/lib/python3.4/site-packages/django/core/handlers/base.py"", line 137, in get_response
    response = response.render()
  File ""/opt/website/lib/python3.4/site-packages/django/template/response.py"", line 103, in render
    self.content = self.rendered_content
  File ""/opt/website/lib/python3.4/site-packages/django/template/response.py"", line 80, in rendered_content
    content = template.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 148, in render
    return self._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 126, in render
    return compiled_parent._render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 142, in _render
    return self.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/classytags/core.py"", line 106, in render
    return self.render_tag(context, **kwargs)
  File ""/opt/website/lib/python3.4/site-packages/sekizai/templatetags/sekizai_tags.py"", line 79, in render_tag
    rendered_contents = nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/classytags/core.py"", line 106, in render
    return self.render_tag(context, **kwargs)
  File ""/opt/website/lib/python3.4/site-packages/cms/templatetags/cms_tags.py"", line 673, in render_tag
    rendered_contents = nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/defaulttags.py"", line 402, in render
    return strip_spaces_between_tags(self.nodelist.render(context).strip())
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/loader_tags.py"", line 65, in render
    result = block.nodelist.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 844, in render
    bit = self.render_node(node, context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 858, in render_node
    return node.render(context)
  File ""/opt/website/lib/python3.4/site-packages/django/template/base.py"", line 1207, in render
    _dict = func(*resolved_args, **resolved_kwargs)
  File ""/opt/website/lib/python3.4/site-packages/zinnia/templatetags/zinnia.py"", line 179, in get_similar_entries
    CACHE_ENTRIES_RELATED[key] = compute_related(object_id, dataset)
  File ""/opt/website/lib/python3.4/site-packages/zinnia/templatetags/zinnia.py"", line 172, in compute_related
    key=lambda k_v: (k_v[1], k_v[0]))
TypeError: unorderable types: Entry() < Entry()
```
"
13731,Fantomas42,django-blog-zinnia,3,closed,428,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/428/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/428,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",'str' object has no attribute '_meta',"I thought this had been fixed in the newest version, but I keep getting this error on my local install.

'str' object has no attribute '_meta'

the location: /Users/brad2/Sites/bradweb/lib/python3.4/site-packages/django/contrib/admin/widgets.py in render, line 284

This is how I installed zinnia:

pip install -e git://github.com/Fantomas42/django-blog-zinnia.git#egg=django-blog-zinnia
"
13732,Fantomas42,django-blog-zinnia,3,closed,427,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/427/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/427,"[{""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",search throwing error on development version,"I'm getting tis on my search:

NoReverseMatch at /blog/search/

This is what I have for blog in urls: 

url(r'^blog/', include('zinnia.urls', namespace='zinnia')),
    url(r'^comments/', include('django_comments.urls')),
    url(r'^ckeditor/', include('ckeditor.urls')),

Here is my site:

http://www.bradrice.com/blog/

Can you tell me if this is a bug or if I need to configure my installation?
"
13734,Fantomas42,django-blog-zinnia,3,closed,425,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/425/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/425,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]",Syncdb / Migrate with psycopg2,"./bin/demo syncdb

django.db.utils.ProgrammingError: relation ""django_content_type"" does not exist

Related to #408
"
13736,Fantomas42,django-blog-zinnia,3,closed,423,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/423/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/423,"[{""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",Make templatetags more generally usable,"Zinnia's [template tags](/Fantomas42/django-blog-zinnia/blob/develop/zinnia/templatetags/zinnia.py#L52) are very useful for customized solutions. Though, some limitations are maybe unnecessary and could be removed.

We found this as we were integrating Zinnia into another web project.
## More generic context

The functions `get_categories`, `get_categories_tree`, `get_authors` have an additional `context_category` and `context_author`. Unfortunately, `category` and `author` are not always available in the context, e.g. in a blog entry detail. (In this case the `context_*` value is `None`, of course.)

The singular of the words `context_author` and `context_category` suggests that the tags are designed for the following use cases:
1. Highlight the currently visited category (or author page) in a list of categories or authors.
2. Show a list of all published, non-empty categories (or authors) anywhere, no highlighting of any item implied.

However, there is an additional, maybe not too uncommon use case that is not yet covered:
- Show a list of categories (or authors) on a blog **entry detail** ~~or blog **entry list** page~~,
- and highlight **all categories** (or authors) used in the entry ~~or entry list~~.

The values missing in the context for this use case can be provided by:

```
    try:
        entry_categories = context.get('object').categories.all()
    except AttributeError:  # no object in the context
        entry_categories = None
```

There may be other, similar use cases also for the other tags.
"
13739,Fantomas42,django-blog-zinnia,3,closed,420,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/420/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/420,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",Entries not filtered correctly on Entry.published.on_site,"[These lines](https://github.com/Fantomas42/django-blog-zinnia/blob/develop/zinnia/managers.py#L54-L55) call the super-implementation of `get_queryset` and therefore do **not** call the method on the `EntryPublishedManager` class itself – thus skipping the check on `status` and start/end of publication, leading to the availability of unpublished entries when calling `Entry.published.on_site()`.

In the tests [this assert](https://github.com/Fantomas42/django-blog-zinnia/blob/develop/zinnia/tests/test_managers.py#L119) should return `1` as `entry_2` in the test is not published! There are some other test cases that begin to fail when fixing this bug.

As I discovered while tryin to fix it, this bug has some bigger consequences:
- the `on_site` call is used [in `EntryDetail`](https://github.com/Fantomas42/django-blog-zinnia/blob/develop/zinnia/views/entries.py#L26).
- a correct checking of publication status in `on_site` would mean that non-published objects do not appear in the queryset anymore
- this breaks the [EntryPreviewMixin](https://github.com/Fantomas42/django-blog-zinnia/blob/develop/zinnia/views/mixins/entry_preview.py) which expects to check the resulting object individually (however, no unpublished object will ever get there).

This needs some design decisions, so I opened an issue rather than a PR.
"
13740,Fantomas42,django-blog-zinnia,3,closed,419,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/419/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/419,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}]","zinnia add new entry error,pls help me","AttributeError at /admin/zinnia/entry/add/
'NoneType' object has no attribute '_meta'
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin/zinnia/entry/add/
Django Version: 1.8
Exception Type: AttributeError
Exception Value:  
'NoneType' object has no attribute '_meta'
Exception Location: /Library/Python/2.7/site-packages/Django-1.8-py2.7.egg/django/db/models/fields/related.py in get_related_field, line 1354
Python Executable:  /usr/bin/python
Python Version: 2.7.6
Python Path:  
['/Users/yanggz/myPython/blog',
 '/Applications/PyCharm.app/Contents/helpers/pydev',
 '/Library/Python/2.7/site-packages/Scrapy-0.24.4-py2.7.egg',
 '/Library/Python/2.7/site-packages/six-1.8.0-py2.7.egg',
 '/Library/Python/2.7/site-packages/cssselect-0.9.1-py2.7.egg',
 '/Library/Python/2.7/site-packages/w3lib-1.10.0-py2.7.egg',
 '/Library/Python/2.7/site-packages/lxml-3.4.1-py2.7-macosx-10.10-intel.egg',
 '/Library/Python/2.7/site-packages/Django-1.8-py2.7.egg',
 '/Library/Python/2.7/site-packages/distribute-0.6.28-py2.7.egg',
 '/Library/Python/2.7/site-packages/MySQL_python-1.2.4b4-py2.7-macosx-10.10-intel.egg',
 '/Library/Python/2.7/site-packages/queuelib-1.2.2-py2.7.egg',
 '/Library/Python/2.7/site-packages/Pillow-2.7.0-py2.7-macosx-10.10-intel.egg',
 '/Library/Python/2.7/site-packages/Cython-0.21.2-py2.7-macosx-10.10-intel.egg',
 '/Library/Python/2.7/site-packages/pip-6.0.6-py2.7.egg',
 '/Library/Python/2.7/site-packages/django_cassandra_engine-0.2.2-py2.7.egg',
 '/Library/Python/2.7/site-packages/cqlengine-0.21.0-py2.7.egg',
 '/Library/Python/2.7/site-packages/djangotoolbox-1.6.2-py2.7.egg',
 '/Library/Python/2.7/site-packages/cassandra_driver-2.1.4-py2.7-macosx-10.10-intel.egg',
 '/Library/Python/2.7/site-packages/futures-2.2.0-py2.7.egg',
 '/Users/yanggz/myPython/blog',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Library/Python/2.7/site-packages',
 '/Library/Python/2.7/site-packages/PIL']
Server time:    星期五, 24 四月 2015 19:48:29 +0800
Error during template rendering

In template /Library/Python/2.7/site-packages/Django-1.8-py2.7.egg/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19
'NoneType' object has no attribute '_meta'
9               {% for field in line %}
10                  <div{% if not line.fields|length_is:'1' %} class=""field-box{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% if not field.is_readonly and field.errors %} errors{% endif %}{% if field.field.is_hidden %} hidden{% endif %}""{% elif field.is_checkbox %} class=""checkbox-row""{% endif %}>
11                      {% if not line.fields|length_is:'1' and not field.is_readonly %}{{ field.errors }}{% endif %}
12                      {% if field.is_checkbox %}
13                          {{ field.field }}{{ field.label_tag }}
14                      {% else %}
15                          {{ field.label_tag }}
16                          {% if field.is_readonly %}
17                              <p>{{ field.contents }}</p>
18                          {% else %}
19  

```
  {{ field.field }}
```

20                          {% endif %}
21                      {% endif %}
22                      {% if field.field.help_text %}
23                          <p class=""help"">{{ field.field.help_text|safe }}</p>
24                      {% endif %}
25                  </div>
26              {% endfor %}
27          </div>
28      {% endfor %}
29  </fieldset>
"
13742,Fantomas42,django-blog-zinnia,3,closed,417,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/417/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/417,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Django 1.7 with new install problem,"Django 1.7.7
zinnia 0.15.1

django-admin.py startproject
I begin to write a new project
and I only install zinnia on INSTALLED_APP
when I run ./manage.py migrate
it prompt:

Operations to perform:
  Synchronize unmigrated apps: zinnia, mptt, django_comments, tagging
  Apply all migrations: admin, contenttypes, sites, auth, sessions
Synchronizing apps without migrations:
  Creating tables...
  Installing custom SQL...
  Installing indexes...
Running migrations:
  Applying contenttypes.0001_initial...Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/core/management/**init**.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/core/management/**init**.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/core/management/base.py"", line 338, in execute
    output = self.handle(_args, *_options)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/core/management/commands/migrate.py"", line 161, in handle
    executor.migrate(targets, plan, fake=options.get(""fake"", False))
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/db/migrations/executor.py"", line 68, in migrate
    self.apply_migration(migration, fake=fake)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/db/migrations/executor.py"", line 96, in apply_migration
    if self.detect_soft_applied(migration):
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/db/migrations/executor.py"", line 140, in detect_soft_applied
    apps = project_state.render()
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.7.7-py2.7.egg/django/db/migrations/state.py"", line 75, in render
    ""for more"" % new_unrendered_models
django.db.migrations.state.InvalidBasesError: Cannot resolve bases for [<ModelState: 'zinnia.Author'>]
This can happen if you are inheriting models from an app with migrations (e.g. contrib.auth)
 in an app with no migrations; see https://docs.djangoproject.com/en/1.7/topics/migrations/#dependencies for more
"
13746,Fantomas42,django-blog-zinnia,3,closed,413,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/413/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/413,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Timezones"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Timezones"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWwzNzQ2ODgwNg=="", ""id"": 37468806}]",Does not work with MySQL with zinnia.views.archives.EntryIndex,"Error:
ValueError at /testing
Database returned an invalid value in QuerySet.datetimes(). Are time zone definitions for your database and pytz installed?

Steps to reproduce:
Use MySQL as django db backend.
Set urls to go to EntryIndex from archives.
Add a blog.
Refresh to list new content. -- fails.

The MySQL passed into django contains an error:
SELECT DISTINCT CAST(DATE_FORMAT(CONVERT_TZ(`zinnia_entry`.`creation_date`, 'UTC', UTC), '%Y-01-01 00:00:00') AS DATETIME) FROM `zinnia_entry` INNER JOIN `zinnia_entry_sites` ON ( `zinnia_entry`.`id` = `zinnia_entry_sites`.`entry_id` ) WHERE ((`zinnia_entry`.`start_publication` <= 2015-04-13 09:51:27  OR `zinnia_entry`.`start_publication` IS NULL) AND (`zinnia_entry`.`end_publication` > 2015-04-13 09:51:27  OR `zinnia_entry`.`end_publication` IS NULL) AND `zinnia_entry`.`status` = 2  AND `zinnia_entry_sites`.`site_id` = 1 ) ORDER BY 1 DESC LIMIT 21

I have migrated, set the timezone etc.  This also fails if the timezone is ""Europe/London"". I've not found a timezone that works yet, even if that were to be the problem.
"
13748,Fantomas42,django-blog-zinnia,3,closed,411,11,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/411/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/411,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}]",Django 1.8 throws AttributeError at /admin/zinnia/entry/add/  'str' object has no attribute '_meta',"I'm getting an error when I try to add a new entry in a fresh installation. I have no idea where to even start with this. 

Here is the traceback:

```
Environment:

Request Method: GET
Request URL: http://url.org/admin/zinnia/entry/add/

Django Version: 1.8
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.sites',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.contenttypes',
 'django_comments',
 'mptt',
 'tagging',
 'zinnia_bootstrap',
 'zinnia')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')

Template error:
In template /path/to/.virtualenvs/df/local/lib/python2.7/site-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19

   'str' object has no attribute '_meta'

   9 :             {% for field in line %}
   10 :                 <div{% if not line.fields|length_is:'1' %} class=""field-box{% if field.field.name %} field-{{ field.field.name }}{% endif %}{% if not field.is_readonly and field.errors %} errors{% endif %}{% if field.field.is_hidden %} hidden{% endif %}""{% elif field.is_checkbox %} class=""checkbox-row""{% endif %}>
   11 :                     {% if not line.fields|length_is:'1' and not field.is_readonly %}{{ field.errors }}{% endif %}
   12 :                     {% if field.is_checkbox %}
   13 :                         {{ field.field }}{{ field.label_tag }}
   14 :                     {% else %}
   15 :                         {{ field.label_tag }}
   16 :                         {% if field.is_readonly %}
   17 :                             <p>{{ field.contents }}</p>
   18 :                         {% else %}
   19 :                              {{ field.field }} 
   20 :                         {% endif %}
   21 :                     {% endif %}
   22 :                     {% if field.field.help_text %}
   23 :                         <p class=""help"">{{ field.field.help_text|safe }}</p>
   24 :                     {% endif %}
   25 :                 </div>
   26 :             {% endfor %}
   27 :         </div>
   28 :     {% endfor %}
   29 : </fieldset>
```
"
13751,Fantomas42,django-blog-zinnia,3,closed,408,13,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/408/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/408,"[{""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]","""django_content_type"" does not exist","I've got a fresh Django 1.8 installation,  in a virtualenv with all deps successful. Running on Ubuntu 14.04.2 fwiw.

The settings is pretty much default - apart from the db settings and the zinnia needs I've not added anything (actually, not true - Django 1.8 has no 'django.contrib.sites' in INSTALLED_APPS - needed to add that).  'django.contrib.contenttypes' is in INSTALLED_APPS by default.

But I'm getting the error:

django.db.utils.ProgrammingError: relation ""django_content_type"" does not exist

?

Full output below:

(df)datakid@coburg:~/www/df/df-site$ python manage.py migrate
/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django_comments/**init**.py:4: RemovedInDjango19Warning: django.utils.importlib will be removed in Django 1.9.
  from django.utils.importlib import import_module

/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django_comments/models.py:2: RemovedInDjango19Warning: django.contrib.contenttypes.generic is deprecated and will be removed in Django 1.9. Its contents have been moved to the fields, forms, and admin submodules of django.contrib.contenttypes.
  from django.contrib.contenttypes import generic

/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django_comments/models.py:46: RemovedInDjango19Warning: Model class django_comments.models.Comment doesn't declare an explicit app_label and either isn't in an application in INSTALLED_APPS or else was imported before its application was loaded. This will no longer be supported in Django 1.9.
  class Comment(BaseCommentAbstractModel):

/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django_comments/models.py:165: RemovedInDjango19Warning: Model class django_comments.models.CommentFlag doesn't declare an explicit app_label and either isn't in an application in INSTALLED_APPS or else was imported before its application was loaded. This will no longer be supported in Django 1.9.
  class CommentFlag(models.Model):

/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django_comments/forms.py:3: RemovedInDjango19Warning: The django.forms.util module has been renamed. Use django.forms.utils instead.
  from django.forms.util import ErrorDict

System check identified some issues:

WARNINGS:
zinnia.Entry.categories: (fields.W340) null has no effect on ManyToManyField.
zinnia.Entry.related: (fields.W340) null has no effect on ManyToManyField.
Operations to perform:
  Synchronize unmigrated apps: staticfiles, mptt, messages, django_comments, tagging
  Apply all migrations: sessions, admin, sites, auth, contenttypes, zinnia
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_comments
    Creating table django_comment_flags
    Creating table tagging_tag
    Creating table tagging_taggeditem
    Running deferred SQL...
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 338, in execute_from_command_line
    utility.execute()
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 330, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/base.py"", line 390, in run_from_argv
    self.execute(_args, *_cmd_options)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/base.py"", line 441, in execute
    output = self.handle(_args, *_options)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 179, in handle
    created_models = self.sync_apps(connection, executor.loader.unmigrated_apps)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 317, in sync_apps
    cursor.execute(statement)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/db/utils.py"", line 97, in **exit**
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/home/datakid/.virtualenvs/df/local/lib/python2.7/site-packages/django/db/backends/utils.py"", line 62, in execute
    return self.cursor.execute(sql)
django.db.utils.ProgrammingError: relation ""django_content_type"" does not exist
"
13754,Fantomas42,django-blog-zinnia,3,closed,405,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/405/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/405,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}]",Zinnia on django 1.8,"My stack is django 1.8beta, python 3.4.
When I visit page /backoffice/zinnia/entry/add/ I get:

```
env/lib/python3.4/site-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19:

19: {{ field.field }}

Exception Type: AttributeError at /backoffice/zinnia/entry/add/
Exception Value: 'str' object has no attribute '_meta'
```

Full traceback is on http://dpaste.com/05EDN5Q

Thanks 
Martin
"
13759,Fantomas42,django-blog-zinnia,3,closed,400,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/400/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/400,"[{""default"": false, ""name"": ""Custom User"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Custom%20User"", ""color"": ""0052cc"", ""node_id"": ""MDU6TGFiZWw4MTExODgyNQ=="", ""id"": 81118825}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]","Fix: adding migrations.swappable_dependency(settings.AUTH_USER_MODEL),","for apps with <b>existing user migrations</b>, When zinna is added and `python manage.py migrate` runs, zinna fails to migrate.

```
Running migrations:
  Applying zinnia.0001_initial...Traceback (most recent call last):
  File ""tuteria/manage.py"", line 11, in <module>
    execute_from_command_line(sys.argv)
  File ""f:\python-env\production-django\lib\site-packages\django\core\management
\__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""f:\python-env\production-django\lib\site-packages\django\core\management
\__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""f:\python-env\production-django\lib\site-packages\django\core\management
\base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""f:\python-env\production-django\lib\site-packages\django\core\management
\base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""f:\python-env\production-django\lib\site-packages\django\core\management
\commands\migrate.py"", line 161, in handle
    executor.migrate(targets, plan, fake=options.get(""fake"", False))
  File ""f:\python-env\production-django\lib\site-packages\django\db\migrations\e
xecutor.py"", line 68, in migrate
    self.apply_migration(migration, fake=fake)
  File ""f:\python-env\production-django\lib\site-packages\django\db\migrations\e
xecutor.py"", line 96, in apply_migration
    if self.detect_soft_applied(migration):
  File ""f:\python-env\production-django\lib\site-packages\django\db\migrations\e
xecutor.py"", line 140, in detect_soft_applied
    apps = project_state.render()
  File ""f:\python-env\production-django\lib\site-packages\django\db\migrations\s
tate.py"", line 75, in render
    ""for more"" % new_unrendered_models
django.db.migrations.state.InvalidBasesError: Cannot resolve bases for [<ModelSt
ate: 'zinnia.Author'>]
This can happen if you are inheriting models from an app with migrations (e.g. c
ontrib.auth)
 in an app with no migrations; see https://docs.djangoproject.com/en/1.7/topics/
migrations/#dependencies for more
```

after adding `migrations.swappable_dependency(settings.AUTH_USER_MODEL` to zinna migration dependency, the migration ran successfully.
"
13762,Fantomas42,django-blog-zinnia,3,closed,397,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/397/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/397,"[{""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}]",Posting comment causes error 500 - [Errno 61] Connection refused,"I am getting a 500 error when posting a comment. I also have some deprecation warnings from django-contrib-comments which may explain something on the issue.

Here is the django runserver log I get:

> python2.7/site-packages/django_comments/managers.py:19: RemovedInDjango18Warning: `BaseManager.get_query_set` is deprecated, use `get_queryset` instead.
>   qs = self.get_query_set().filter(content_type=ct)
> 
> python2.7/site-packages/django_comments/views/comments.py:89: RemovedInDjango18Warning: Options.module_name has been deprecated in favor of model_name
>   ""comments/%s_%s_preview.html"" % (model._meta.app_label, model._meta.module_name),
> 
> python2.7/site-packages/django_comments/views/comments.py:92: RemovedInDjango18Warning: Options.module_name has been deprecated in favor of model_name
>   ""comments/%s/%s/preview.html"" % (model._meta.app_label, model._meta.module_name),
> 
> ""POST /comments/post/ HTTP/1.1"" 200 21711 // Preview
> 
> ""POST /comments/post/ HTTP/1.1"" 500 195984 // Post

I have reported those warnings in a django-contrib-comments' ticket: https://github.com/django/django-contrib-comments/issues/22.

Here is the full traceback:

> Environment:
> Request Method: POST
> Request URL: http://localhost:8000/comments/post/
> 
> Django Version: 1.7.3
> Python Version: 2.7.6
> Installed Applications:
> ('django_admin_bootstrapped',
>  'django.contrib.admin',
>  'django.contrib.auth',
>  'django.contrib.sites',
>  'django.contrib.contenttypes',
>  'django.contrib.sessions',
>  'django.contrib.messages',
>  'django.contrib.staticfiles',
>  'django_comments',
>  'mptt',
>  'tagging',
>  'zinnia',
>  'myapp')
> Installed Middleware:
> ('django.contrib.sessions.middleware.SessionMiddleware',
>  'django.middleware.common.CommonMiddleware',
>  'django.middleware.csrf.CsrfViewMiddleware',
>  'django.contrib.auth.middleware.AuthenticationMiddleware',
>  'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
>  'django.contrib.messages.middleware.MessageMiddleware',  
>  'django.middleware.clickjacking.XFrameOptionsMiddleware')
> 
> Traceback:
> File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/core/handlers/base.py"" in get_response
> 1.                     response = wrapped_callback(request, _callback_args, *_callback_kwargs)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/utils/decorators.py"" in _wrapped_view
> 2.                     response = view_func(request, _args, *_kwargs)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/views/decorators/http.py"" in inner
> 3.             return func(request, _args, *_kwargs)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django_comments/views/comments.py"" in post_comment
> 4.         request=request
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/dispatch/dispatcher.py"" in send
> 5.             response = receiver(signal=self, sender=sender, **named)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django_comments/moderation.py"" in post_save_moderation
> 6.         self._registry[model].email(comment, comment.content_object, request)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/zinnia/moderator.py"" in email
> 7.                                           request)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/zinnia/moderator.py"" in do_email_authors
> 8.                       recipient_list, fail_silently=not settings.DEBUG)
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/core/mail/**init**.py"" in send_mail
> 9.     return mail.send()
>    File ""/Users/quentin/Python/virtualenvs/myapp/lib/python2.7/site-packages/django/core/mail/message.py"" in send
> 10.         return self.get_connection(fail_silently).send_messages([self])
>     File ""/Users/quentin/Python/virtualenvs/mtanalytics/lib/python2.7/site-packages/django/core/mail/backends/smtp.py"" in send_messages
> 11.             new_conn_created = self.open()
>     File ""/Users/quentin/Python/virtualenvs/mtanalytics/lib/python2.7/site-packages/django/core/mail/backends/smtp.py"" in open
> 12.             self.connection = connection_class(self.host, self.port, **connection_params)
>     File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in **init**
> 13.             (code, msg) = self.connect(host, port)
>     File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in connect
> 14.         self.sock = self._get_socket(host, port, self.timeout)
>     File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py"" in _get_socket
> 15.         return socket.create_connection((host, port), timeout)
>     File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py"" in create_connection
> 16.         raise err
> 
> Exception Type: error at /comments/post/
> Exception Value: [Errno 61] Connection refused

And my full pip freeze if needed:
- beautifulsoup4==4.3.2
- Django==1.7.3
- django-admin-bootstrapped==2.3.2
- django-blog-zinnia==0.15.1
- django-contrib-comments==1.5
- django-mptt==0.6.1
- django-tagging==0.3.4
- django-xmlrpc==0.1.5
- futures==2.2.0
- gnureadline==6.3.3
- ipython==2.3.1
- Pillow==2.7.0
- psycopg2==2.5.4
- pyparsing==2.0.3
- pytz==2014.10
- six==1.9.0

Cheers,
Quentin
"
13768,Fantomas42,django-blog-zinnia,3,closed,391,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/391/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/391,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",Exception 'admin/js/core.js' could not be found with CachedStaticFilesStorage,"During update to django 1.7.3 and django-blog-zinnia 0.15.1 I find out that if 

```
DEBUG = False
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.CachedStaticFilesStorage'
```

then any management command fails with error

```
The file 'admin/js/core.js' could not be found with <django.contrib.staticfiles.storage.CachedStaticFilesStorage object at 0x108213450>.
```

With default storage or in debug mode all works fine. Seems like the problem with staticfiles_storage.url() in admin/widgets.py in that case.
"
13769,Fantomas42,django-blog-zinnia,3,closed,390,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/390/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/390,[],Refactored image_upload_to.,"Adding image_upload_to to the Entry class resulted in an django serialization error. Add code to check Python version (somewhat unnecessary, but will prevent future bugs).
"
13770,Fantomas42,django-blog-zinnia,3,closed,388,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/388/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/388,[],Installation problem,"I try to install Zinnia but when syncdb I get an error, and I don't find solution:

> Traceback (most recent call last):
>  File ""manage.py"", line 10, in <module>
>     execute_from_command_line(sys.argv)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 399, in execute_from_command_line
>     utility.execute()
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 392, in execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
>     self.execute(_args, *_options.**dict**)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 284, in execute
>     self.validate()
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/base.py"", line 310, in validate
>     num_errors = get_validation_errors(s, app)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/core/management/validation.py"", line 34, in get_validation_errors
>     for (app_name, error) in get_app_errors().items():
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 196, in get_app_errors
>     self._populate()
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 75, in _populate
>     self.load_app(app_name, True)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/db/models/loading.py"", line 99, in load_app
>     models = import_module('%s.models' % app_name)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 40, in import_module
>     __import__(name)
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/zinnia/models/**init**.py"", line 4, in <module>
>     from zinnia.models.entry import Entry
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/zinnia/models/entry.py"", line 6, in <module>
>     class Entry(load_model_class(ENTRY_BASE_MODEL)):
>   File ""/srv/www/django/venv/local/lib/python2.7/site-packages/zinnia/models_bases/**init**.py"", line 20, in load_model_class
>     raise ImproperlyConfigured('%s cannot be imported' % model_path)
> django.core.exceptions.ImproperlyConfigured: zinnia.models_bases.entry.AbstractEntry cannot be imported
"
13771,Fantomas42,django-blog-zinnia,3,closed,387,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/387/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/387,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",Missing migration for Entry model in django 1.7,"I am using Zinnia 0.15 with Django 1.7. There are two related problems here:
1. Django trys to create an extra migration for zinnia when running `makemigrations`. It trys to create a migration to alter the `image` field on `Entry`, changing the `upload_to` param.
2. Django crashes when trying to create said migration because it cannot find `image_upload_to_dispatcher`. Here is the stack trace:

```
Migrations for 'zinnia':
  0002_auto_20141223_1714.py:
    - Alter field image on entry
Traceback (most recent call last):
  File ""manage.py"", line 8, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/__init__.py"", line 385, in execute_from_command_line
    utility.execute()
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/__init__.py"", line 377, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/base.py"", line 338, in execute
    output = self.handle(*args, **options)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/commands/makemigrations.py"", line 124, in handle
    self.write_migration_files(changes)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/core/management/commands/makemigrations.py"", line 152, in write_migration_files
    migration_string = writer.as_string()
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 130, in as_string
    operation_string, operation_imports = OperationWriter(operation).serialize()
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 87, in serialize
    arg_string, arg_imports = MigrationWriter.serialize(arg_value)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 324, in serialize
    return cls.serialize_deconstructed(path, args, kwargs)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 236, in serialize_deconstructed
    arg_string, arg_imports = cls.serialize(arg)
  File ""/Users/jproffitt/.virtualenvs/jproffitt/lib/python2.7/site-packages/django/db/migrations/writer.py"", line 356, in serialize
    % (value.__name__, module_name))
ValueError: Could not find function image_upload_to_dispatcher in zinnia.models_bases.entry.
Please note that due to Python 2 limitations, you cannot serialize unbound method functions (e.g. a method declared
and used in the same class body). Please move the function into the main module body to use migrations.
For more information, see https://docs.djangoproject.com/en/1.7/topics/migrations/#serializing-values
```
"
13772,Fantomas42,django-blog-zinnia,3,closed,386,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/386/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/386,"[{""default"": false, ""name"": ""Packaging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Packaging"", ""color"": ""e80598"", ""node_id"": ""MDU6TGFiZWw0NjY1Mg=="", ""id"": 46652}]",Problem with 0.14.3 package in PyPi,"There is a problem with 0.14.3 version in PyPi. After this commit https://github.com/Fantomas42/django-blog-zinnia/commit/8b8aa16a540c35c40a9a2de047c0ec21e9fb9264 static files are in separate directory but old files are left in old location in the uploaded package in PyPi. When using `CachedStaticFilesStorage` and do collectstatic then it fails with this error:

```
ValueError: The file 'zinnia/prev.png' could not be found with <django.contrib.staticfiles.storage.CachedStaticFilesStorage object at 0x7f1a1fc60a90>.
```

If I install the package directly from GitHub there is no problem:

```
pip install https://github.com/Fantomas42/django-blog-zinnia/archive/v0.14.3.zip
```
"
13778,Fantomas42,django-blog-zinnia,3,closed,380,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/380/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/380,"[{""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}, {""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]",Cannot delete unicode tag through admin,"```
Exception Type: DjangoUnicodeDecodeError at /admin/tagging/tag/4/delete/
Exception Value: 'ascii' codec can't decode byte 0xc3 in position 18: ordinal not in range(128). You passed in <TaggedItem: [Bad Unicode data]> (<class 'tagging.models.TaggedItem'>)
```

Reason is broken unicode handling in django-tagging, and fortunately there's already a [pull request](https://github.com/Fantomas42/django-tagging/pull/1) addressing this. Now it only needs to be merged...
"
13779,Fantomas42,django-blog-zinnia,3,closed,379,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/379/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/379,[],Difficulty extending Entry - Can't override ModelAdmin successfully,"I would like to extend the Entry model to add a few fields and remove a bunch more.  When following the configuration instructions I end up with errors such as `django.core.exceptions.ImproperlyConfigured
ImproperlyConfigured: 'EntryAdmin.filter_horizontal' refers to field 'related' that is missing from model 'zinnia.Entry'.` as a result of my model not having fields that the built-in ModelAdmin references.

Here is blog/models.py:

``` python
from django.db import models
from filer.fields.file import FilerFileField
from filer.fields.image import FilerImageField
from zinnia.models_bases import entry


class Entry(entry.CoreEntry, entry.ContentEntry, entry.FeaturedEntry, entry.AuthorsEntry, entry.CategoriesEntry):
    document = FilerFileField(related_name=""entry_document"", null=True, on_delete=models.SET_NULL)
    image = FilerImageField(related_name=""entry_image"", null=True, on_delete=models.SET_NULL)

    class Meta(entry.CoreEntry.Meta):
        abstract = True

```

and blog/admin.py:

``` python
from django.contrib import admin
from zinnia.models.entry import Entry
from zinnia.admin.entry import EntryAdmin
from zinnia.admin.filters import AuthorListFilter, CategoryListFilter


class CustomEntryAdmin(EntryAdmin):
    fieldsets = (
        ('Content', {
            'fields': (('title', 'status'), 'content',)}),
        ('Publication', {
            'fields': (('start_publication', 'end_publication'),
                       'creation_date', 'sites'),
            'classes': ('collapse', 'collapse-closed')}),
        ('Metadatas', {
            'fields': ('featured', 'authors', 'related'),
            'classes': ('collapse', 'collapse-closed')}),
        (None, {'fields': ('categories', 'tags', 'slug')}))

    filter_horizontal = ('categories', 'authors')
    list_filter = (CategoryListFilter, AuthorListFilter, 'status', 'featured',
                   'creation_date', 'start_publication',
                   'end_publication', 'sites')
    list_display = ('get_title', 'get_authors', 'get_categories',
                    'get_sites', 'get_is_visible', 'featured',
                    'get_short_url', 'creation_date')
    search_fields = ('title', 'content')
    actions = []


# Unregister the default EntryAdmin
admin.site.unregister(Entry)
# then register the EntryGalleryAdmin class
admin.site.register(Entry, CustomEntryAdmin)
```

Lastly, I point Zinnia to the new Entry model in settings.py:

``` python
ZINNIA_ENTRY_BASE_MODEL = 'blog.models.Entry'
```

What am I doing wrong here?  I'm not understanding how I will prevent the zinnia ModelAdmin from being loaded before mine in this case.
"
13781,Fantomas42,django-blog-zinnia,3,closed,377,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/377/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/377,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",relative instead of absolute url in screen.css,"solves the following error while post-processing 'zinnia/css/screen.css':

ValueError: The file 'zinnia/prev.png' could not be found with django.contrib.staticfiles.storage.CachedStaticFilesStorage object at 0x11018b850.
"
13782,Fantomas42,django-blog-zinnia,3,closed,376,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/376/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/376,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Syncdb issues errors,"Hello,

I've created a new ""blog"" project using django-admin.py and then installed zinnia. Once i execute manage.py syncdb the following errors occur:

```
CommandError: One or more models did not validate:
comments.comment: Accessor for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
comments.comment: Reverse query name for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
comments.comment: Accessor for field 'site' clashes with related field 'Site.comment_set'. Add a related_name argument to the definition for 'site'.
comments.comment: Accessor for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
comments.comment: Reverse query name for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
comments.commentflag: Accessor for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
comments.commentflag: Reverse query name for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
```

Part of my settings file looks as follows:

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.sites',
    'django.contrib.comments',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.contenttypes',
    'tagging',
    'mptt',
    'zinnia',
    'south'
)


DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME':'zinnia_blog',
        'USER': 'root',
        'password': ''
    }
}
```

Here are the installed packages in my virtualenv:

```
Django==1.6
MySQL-python==1.2.5
Pillow==2.6.0
South==1.0
argparse==1.2.1
beautifulsoup4==4.3.2
django-blog-zinnia==0.14.2
django-contrib-comments==1.5
django-mptt==0.6.1
django-tagging==0.3.2
django-xmlrpc==0.1.5
pyparsing==2.0.2
pytz==2014.7
wsgiref==0.1.2
```
"
13783,Fantomas42,django-blog-zinnia,3,closed,375,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/375/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/375,"[{""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}, {""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]",Issue with Django 1.7: AttributeError: 'function' object has no attribute 'compile',"I just made a fresh checkout of Zinnia to check Django 1.7 compatibility.
I'm happy to report that it works with a few patches !

First you have to syncdb/migrate on a Django 1.6 installation with South in INSTALLED_APPS, because Zinnia doesn't have the new migrations fro Django 1.7.
Then you have to remove South from the INSTALLED_APPS and apply the patch given here:
https://github.com/Fantomas42/django-blog-zinnia/pull/372

It seems that there is one more remaining problem in the template:
zinnia/templates/zinnia/base.html

```
File ""/home/user/zinnia/templatetags/zinnia_tags.py"", line 383, in get_tags
    Entry.published.all())
  File ""/home/user/.virtualenvs/zinnia/local/lib/python2.7/site-packages/tagging/models.py"", line 166, in usage_for_queryset
    compiler.quote_name_unless_alias, compiler.connection
  File ""/home/user/.virtualenvs/zinnia/local/lib/python2.7/site-packages/django/db/models/sql/where.py"", line 106, in as_sql
    sql, params = qn.compile(child)
AttributeError: 'function' object has no attribute 'compile'
```

If we remove the line:

```
{% block meta-keywords %}{% get_tags as entry_tags %}{{ entry_tags|join:"", ""}}{% endblock meta-keywords %}
```

Then it seems that Zinnia works.

Hope that helps.
"
13784,Fantomas42,django-blog-zinnia,3,closed,374,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/374/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/374,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Duplicate"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Duplicate"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzc0NA=="", ""id"": 15187744}]",New install of zinnia is broken,"I wanted to try django-blog-zinnia, and made a virtualenv for it and tried a fresh install, but it didn't install:

  Running setup.py install for django-blog-zinnia

```
warning: no previously-included files found matching 'demo/demo.db'
no previously-included directories found matching 'docs/build'
no previously-included directories found matching 'docs/coverage'
no previously-included directories found matching 'zinnia/static/zinnia/.sass-cache'
  File ""/usr/local/pythonenv/ZINNIA/lib/python3.2/site-packages/zinnia/migrations/0018_more_indexes.py"", line 32
    u'auth.group': {
                ^
SyntaxError: invalid syntax
```

I see there are some issues in your tracker that say zinnia isn't compatible with django 1.7, maybe you could put that into the requirements?  limit django to be less than 1.7 until you become compatible.  Otherwise, new people wanting to try it will not succeed.
"
13787,Fantomas42,django-blog-zinnia,3,closed,371,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/371/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/371,"[{""default"": false, ""name"": ""Custom User"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Custom%20User"", ""color"": ""0052cc"", ""node_id"": ""MDU6TGFiZWw4MTExODgyNQ=="", ""id"": 81118825}, {""default"": false, ""name"": ""Duplicate"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Duplicate"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzc0NA=="", ""id"": 15187744}]",Broken after updating to Django 1.7,"The following error is being thrown:

`django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.`

originates from `models/author.py` use of `get_user_model()`

Should either be put inside an Author class method or use `settings.AUTH_USER_MODEL = 'auth.User'` I believe to most simply resolve the problem

[1] http://www.caktusgroup.com/blog/2013/08/07/migrating-custom-user-model-django/
"
13796,Fantomas42,django-blog-zinnia,3,closed,361,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/361/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/361,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Remove usage of forms.ALL_FIELDS,"Doesn't work in django 1.5:

```
Traceback (most recent call last):
  File ""local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 90, in get_response
    response = middleware_method(request)
  File ""local/lib/python2.7/site-packages/django/middleware/locale.py"", line 21, in process_request
    check_path = self.is_language_prefix_patterns_used()
  File ""local/lib/python2.7/site-packages/django/middleware/locale.py"", line 56, in is_language_prefix_patterns_used
    for url_pattern in get_resolver(None).url_patterns:
  File ""local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 366, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 361, in urlconf_module
    self._urlconf_module = import_module(self.urlconf_name)
  File ""local/lib/python2.7/site-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""/media/archive/documents/code/skifergas/skifergas/urls.py"", line 9, in <module>
    admin.autodiscover()
  File ""local/lib/python2.7/site-packages/django/contrib/admin/__init__.py"", line 29, in autodiscover
    import_module('%s.admin' % app)
  File ""local/lib/python2.7/site-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""local/lib/python2.7/site-packages/zinnia/admin/__init__.py"", line 6, in <module>
    from zinnia.admin.entry import EntryAdmin
  File ""local/lib/python2.7/site-packages/zinnia/admin/entry.py"", line 25, in <module>
    from zinnia.admin.forms import EntryAdminForm
  File ""local/lib/python2.7/site-packages/zinnia/admin/forms.py"", line 52, in <module>
    class EntryAdminForm(forms.ModelForm):
  File ""local/lib/python2.7/site-packages/zinnia/admin/forms.py"", line 69, in EntryAdminForm
    class Meta:
  File ""local/lib/python2.7/site-packages/zinnia/admin/forms.py"", line 74, in Meta
    fields = forms.ALL_FIELDS
AttributeError: 'module' object has no attribute 'ALL_FIELDS'
```
"
13797,Fantomas42,django-blog-zinnia,3,closed,360,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/360/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/360,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Migrations broken in Django 1.5?,"This introduces Django 1.4 compat and fixes a problem migrating in South 1.0 + Django 1.5.x:

```
-> % python manage.py migrate --traceback
Traceback (most recent call last):
  File ""local/lib/python2.7/site-packages/django/core/management/base.py"", line 222, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""local/lib/python2.7/site-packages/django/core/management/base.py"", line 255, in execute
    output = self.handle(*args, **options)
  File ""local/lib/python2.7/site-packages/south/management/commands/migrate.py"", line 87, in handle
    apps = list(migration.all_migrations())
  File ""local/lib/python2.7/site-packages/south/migration/base.py"", line 33, in all_migrations
    yield Migrations(app)
  File ""local/lib/python2.7/site-packages/south/migration/base.py"", line 64, in __call__
    self.instances[app_label] = super(MigrationsMetaclass, self).__call__(app_label_to_app_module(app_label), **kwds)
  File ""local/lib/python2.7/site-packages/south/migration/base.py"", line 90, in __init__
    self.set_application(application, force_creation, verbose_creation)
  File ""local/lib/python2.7/site-packages/south/migration/base.py"", line 162, in set_application
    module = importlib.import_module(self.migrations_module())
  File ""local/lib/python2.7/site-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""local/lib/python2.7/site-packages/zinnia/migrations/__init__.py"", line 8, in <module>
    user_model_label = '%s.%s' % (User._meta.app_label, User._meta.model_name)
AttributeError: 'Options' object has no attribute 'model_name'
```
"
13798,Fantomas42,django-blog-zinnia,3,closed,359,7,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/359/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/359,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Overriding templates,"I've been trying to a bit to get Zinnia working on an existing Django website. Everything is finally up and running but I'm having trouble overriding the templates. For example, Zinnia uses `base.html` and that includes the `{% block sidebar %}` but when I go to override it, the changes I make are never rendered on the page.   

I've installed the `apptemplates` loader and added `'apptemplates.Loader',` to my `TEMPLATE_LOADERS`.  I've also tried using the `django-app-namespace-template-loader` the same way, with no results.

Additionally I have tried extending them using django overextends.

I've also ensured that I have the template directory I'm working with (`templates/`) added to my `TEMPLATE_DIRS`, and the directory structure looks like this:

```
templates/

       classfied/                             <- Another custom app
             some_other_templates.html

       zinnia/
             base.html
```

My base.html looks like this:

```
{% extends ""zinnia:zinnia/base.html"" %}
{% load zinnia_tags i18n %}

{% block sidebar %} 

  <p> OVERRIDED SIDEBAR </p>

{% endblock sidebar %}
```

But alas, the sidebar is not changed. It's probably something small that I've missed, but I'm having a hard time debugging it. Any help is greatly appreciated. Let me know if you need any more information!

This isn't really an issue but hopefully it gets flagged as a question. 

Thank you!
"
13799,Fantomas42,django-blog-zinnia,3,closed,358,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/358/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/358,"[{""default"": false, ""name"": ""Custom User"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Custom%20User"", ""color"": ""0052cc"", ""node_id"": ""MDU6TGFiZWw4MTExODgyNQ=="", ""id"": 81118825}]",Working,"1. For now make class Author inherit from django.contrib.auth.models.User instead of get_user_model, since it does not work properly at model level. Looks like get_user_model does not work with proxy models very well. That seems to be a subtle Django question; not sure how to fix it properly. 
2. Now catching exceptions in zinnia/ping.py when retrieving a list of categories. In tests or before doing syncdb the table zinnia_categories sometimes does not exist yet when this code is executed, so it keeps showing annoying errors.
"
13801,Fantomas42,django-blog-zinnia,3,closed,356,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/356/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/356,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]","User can not view his entries from admin, when zinnia.can_view_all is disabled","As admin, i can view all entries, and all is fine. If i create user, which has right ""can_view_all"", all is fine also. But without this right, error appears on line 200 from get_queryset function in admin/entry.py file:

if not request.user.has_perm('zinnia.can_view_all'):
  queryset = request.user.entries.all()               <--- here

Django says, 'User' object has no attribute 'entries'.
I've changed this to queryset = self.model.objects.filter(authors__id=request.user.id) and all works. But i don't think, that's right way of doing things.
"
13802,Fantomas42,django-blog-zinnia,3,closed,355,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/355/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/355,"[{""default"": false, ""name"": ""Tests needed"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests%20needed"", ""color"": ""02d7e1"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzg2Mg=="", ""id"": 15187862}]",Unicode error when using strip_tags,"It seems that using strip_tags function directly on the entries content result in Unicode error (if entry contains non-ascii characters).

I'm not sure about how to correct properly the mistake but it works with this patch:

```
diff -r aafe7aed2251 zinnia/models_bases/entry.py
--- a/zinnia/models_bases/entry.py  Mon Jun 23 15:42:27 2014 +0200
+++ b/zinnia/models_bases/entry.py  Sat Jul 05 19:07:48 2014 +0200
@@ -7,6 +7,7 @@
 from django.contrib.sites.models import Site
 from django.utils.translation import ugettext_lazy as _
 from django.utils.encoding import python_2_unicode_compatible
+from django.utils.encoding import smart_unicode

 import django_comments as comments
 from django_comments.models import CommentFlag
@@ -223,7 +224,7 @@
         """"""
         Counts the number of words used in the content.
         """"""
-        return len(strip_tags(self.html_content).split())
+        return len(strip_tags(smart_unicode(self.html_content)).split())

     class Meta:
         abstract = True
diff -r aafe7aed2251 zinnia/preview.py
--- a/zinnia/preview.py Mon Jun 23 15:42:27 2014 +0200
+++ b/zinnia/preview.py Sat Jul 05 19:07:48 2014 +0200
@@ -6,6 +6,7 @@
 from django.utils.html import strip_tags
 from django.utils.functional import cached_property
 from django.utils.encoding import python_2_unicode_compatible
+from django.utils.encoding import smart_unicode

 from bs4 import BeautifulSoup

@@ -88,14 +89,14 @@
         """"""
         Return the total of words contained in the content.
         """"""
-        return len(strip_tags(self.content).split())
+        return len(strip_tags(smart_unicode(self.content)).split())

     @cached_property
     def displayed_words(self):
         """"""
         Return the number of words displayed in the preview.
         """"""
-        return (len(strip_tags(self.preview).split()) -
+        return (len(strip_tags(smart_unicode(self.preview)).split()) -
                 len(self.more_string.split()))

     @cached_property
```
"
13805,Fantomas42,django-blog-zinnia,3,closed,352,10,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/352/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/352,"[{""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}, {""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",One or more models did not validate,"manage.py runserver 8000
Validating models...

Unhandled exception in thread started by <function wrapper at 0x1262c88>
Traceback (most recent call last):
  File ""/usr/local/lib/python3.2/dist-packages/django/utils/autoreload.py"", line 93, in wrapper
    fn(_args, *_kwargs)
  File ""/usr/local/lib/python3.2/dist-packages/django/core/management/commands/runserver.py"", line 101, in inner_run
    self.validate(display_num_errors=True)
  File ""/usr/local/lib/python3.2/dist-packages/django/core/management/base.py"", line 314, in validate
    raise CommandError(""One or more models did not validate:\n%s"" % error_text)
django.core.management.base.CommandError: One or more models did not validate:
comments.comment: Accessor for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
comments.comment: Reverse query name for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
comments.comment: Accessor for field 'site' clashes with related field 'Site.comment_set'. Add a related_name argument to the definition for 'site'.
comments.comment: Accessor for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
comments.comment: Reverse query name for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
comments.commentflag: Accessor for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
comments.commentflag: Reverse query name for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
"
13807,Fantomas42,django-blog-zinnia,3,closed,350,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/350/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/350,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Fixing excerpt gathering when excerpt is empty,"This is to fix this: 
https://github.com/Fantomas42/django-blog-zinnia/issues/296

That issue is marked as closed, but the bug still exists in the latest version.
"
13809,Fantomas42,django-blog-zinnia,3,closed,348,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/348/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/348,"[{""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}]",Support for Django 1.6 django.contrib.comments deprecation,"Adds support for projects using django_comments to Zinnia. django.contrib.comments was deprecated as of Django 1.6.

This patch should make Zinnia work with both the old django.contrib.comments and the new django_comments package.

To reproduce the error without the patch, just update the demo project using the following instructions and then run syncdb or some tests. You should get the exact error mentioned in #267. Which this patch addresses.
http://django-contrib-comments.readthedocs.org/en/latest/porting.html
"
13810,Fantomas42,django-blog-zinnia,3,closed,347,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/347/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/347,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Buildout/ bootstrap not installing all deps?,"http://django-blog-zinnia.readthedocs.org/en/v0.10.1/development/buildout.html#demo-project

Possibly I'm going wrong somewhere but following the instructions above I'm having trouble getting the demo running.

``` bash
./bin/demo syncdb
```

``` python
django.core.exceptions.ImproperlyConfigured: ImportError categories: No module named categories
```

This can be installed via

``` bash
pip install django-categories
```

 but crumbs, debug_toolbar etc. are all missing
"
13812,Fantomas42,django-blog-zinnia,3,closed,345,9,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/345/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/345,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}]",NoReverseMatch at /webmaster/zinnia/,"I'm using both django comments and zinnia-threaded-comments (django 1.5, zinnia 0.13)
When I tried to open page /admin/zinnia/, Error occured as follows:
Reverse for 'zinnia_threaded_comments_comment_changelist' with arguments '()' and keyword arguments '{}' not found.
In template zinnia\templates\admin\zinnia\widgets_content_stats.html, error at line 13
<a href=""{% url 'admin:zinnia_threaded_comments_comment_changelist' %}?is_public__exact=1"">
Same issue posted here https://groups.google.com/forum/#!topic/django-blog-zinnia/hNukuy9e88U
"
13820,Fantomas42,django-blog-zinnia,3,closed,337,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/337/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/337,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]","TypeError __nonzero__ should return bool or int, returned instancemethod","Hi

I am using django-cms 3.0beta and zinnia 0.15.dev. I got following error when I am trying to access it from the admin page. 

```
TypeError at /weblog/2014/03/13/test-123/
__nonzero__ should return bool or int, returned instancemethod
Request Method: GET
Request URL:    http://tourguide-test.triosky.com/weblog/2014/03/13/test-123/
Django Version: 1.6.2
Exception Type: TypeError
Exception Value:    
__nonzero__ should return bool or int, returned instancemethod
Exception Location: /sites/.virtualenvs/tour/local/lib/python2.7/site-packages/django/template/defaulttags.py in render, line 304
Python Executable:  /sites/.virtualenvs/tour/bin/python
Python Version: 2.7.3
Python Path:    
['/sites/trip/code/django-tourguide',
 '/sites/.virtualenvs/tour/bin',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/translate_toolkit-1.11.0-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/djangocms_admin_style-0.2.0-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/django_sekizai-0.7-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/html5lib-1.0b3-py2.7.egg',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages/django_classy_tags-0.5-py2.7.egg',
 '/sites/.virtualenvs/tour/lib/python2.7',
 '/sites/.virtualenvs/tour/lib/python2.7/plat-linux2',
 '/sites/.virtualenvs/tour/lib/python2.7/lib-tk',
 '/sites/.virtualenvs/tour/lib/python2.7/lib-old',
 '/sites/.virtualenvs/tour/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/sites/.virtualenvs/tour/local/lib/python2.7/site-packages']
Server time:    Thu, 13 Mar 2014 02:54:44 +0000
```
"
13826,Fantomas42,django-blog-zinnia,4,closed,331,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/331/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/331,"[{""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}]",Templates for entries error in documentation?,"I think there is error in http://django-blog-zinnia.readthedocs.org/en/latest/getting-started/configuration.html#templates-for-entries where it says we are setting ZINNIA_ENTRY_DETAIL_TEMPLATES to entry folder instead of zinnia, right? But on the other hand if I use zinnia folder the right sidebar goes away but the page width is not set to 100%. I checked in source and the body tag does not get class no-sidebar set as in this example http://demo.django-blog-zinnia.com/blog/2012/12/15/entry-fullwidth/

EDIT:
I think I found the issue. The block for setting the body class is named {% block sidebar-class %}right-sidebar{% endblock sidebar-class %}, where in example for setting no-sidebar class the block {% block zinnia-sidebar %}no-sidebar{% endblock %} is referenced which does not exist anywhere.
"
13833,Fantomas42,django-blog-zinnia,4,closed,324,9,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/324/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/324,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]","u""Your dictionary lacks key '1'.","KeyError: u""Your dictionary lacks key '1'. Please provide it, because it is required to determine whether string is singular or plural.""
(35 additional frame(s) were not displayed)
...
  File ""suit/templatetags/suit_list.py"", line 188, in result_list_with_context
    res = result_list(cl)
  File ""zinnia/admin/entry.py"", line 93, in get_title
    'reactions': reaction_count}

Thought it was SUIT causing this. So i removed SUIT from Django setting and:
KeyError: u""Your dictionary lacks key '1'. Please provide it, because it is required to determine whether string is singular or plural.""

Same error. This just happened. No idea way.
"
13841,Fantomas42,django-blog-zinnia,4,closed,316,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/316/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/316,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Unicode Error in blogger2zinnia,"Trying to import a blog from blogger to zinnia, the result is:

<pre>- Importing entries
Traceback (most recent call last):
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/bin/django-admin.py"", line 5, in <module>
    management.execute_from_command_line()
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/lib/python2.7/site-packages/django/core/management/base.py"", line 285, in execute
    output = self.handle(*args, **options)
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/lib/python2.7/site-packages/django/core/management/base.py"", line 415, in handle
    return self.handle_noargs(**options)
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/src/django-blog-zinnia/zinnia/management/commands/blogger2zinnia.py"", line 128, in handle_noargs
    self.import_posts()
  File ""/home/kev/.dotfiles/.virtualenvs/ff-py2/src/django-blog-zinnia/zinnia/management/commands/blogger2zinnia.py"", line 171, in import_posts
    strip_tags(unicode(content))).words(50) or ''
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 19: ordinal not in range(128)
</pre>
"
13843,Fantomas42,django-blog-zinnia,4,closed,314,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/314/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/314,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Unicode error when displaying preview,"Hello,

It seems that this commit on file zinnia/preview.py is causing a regression:
https://github.com/Fantomas42/django-blog-zinnia/commit/652ec47d0d3875bceaf7a28c4845118ea9118bd9

Indeed using str on self.preview doesn't work if self.preview contains non-ascii characters:

``` python
     def __str__(self):
        """"""
        Method used to render the preview in templates.
        """"""
        #Python really doesn't like __str__ returning non-strings
        #In python 3.3 (perhaps earlier), it raises a TypeError
        return str(self.preview)
```
"
13846,Fantomas42,django-blog-zinnia,4,closed,311,7,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/311/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/311,"[{""default"": false, ""name"": ""Tests needed"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests%20needed"", ""color"": ""02d7e1"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzg2Mg=="", ""id"": 15187862}, {""default"": false, ""name"": ""Timezones"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Timezones"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWwzNzQ2ODgwNg=="", ""id"": 37468806}]",Invalid value in QuerySet.dates(),"```
ValueError: Database returned an invalid value in QuerySet.dates(). Are time zone definitions and pytz installed?
```

This error is being thrown every time I visit a page that has Zinnia on it (both the /news namespace and in cmsplugin_zinnia). It first began showing up on December 18th, 2013 (I updated to the develop branch to try and get Django 1.6 support). 

I have already attempted to run timezone updates on our database, but that table is fine. I think the answer lies somewhere [in this Django doc](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/).
"
13852,Fantomas42,django-blog-zinnia,4,closed,305,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/305/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/305,"[{""default"": false, ""name"": ""Duplicate"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Duplicate"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzc0NA=="", ""id"": 15187744}]",loaddata (both JSON and Yaml versions) leads to broken database,"As a way to overcome #296 I have tried to load WordPress data on my workstation (with python 2.7 and sqlite database), dumpdata and then loaddata on my server (with python 2.6 and PostgreSQL ... it is RHEL-6; yes, I work for Red Hat, so no, I haven't paid for the license for my home server ;)). The result is broken data. I can open /admin/, but when trying to display the blog itself (which works on my workstation), I get this error https://gist.github.com/mcepl/8011111

Bloody Github cannot display HTML ... http://mcepl.fedorapeople.org/tmp/AssertionError%20at%20_.html

I guess it may be an issue with Django itself (using 1.6.1 from PyPI on both machines installed via pip), but certainly it doesn't help to zinnia users. Any idea what Django ticket it could be?

Any thoughts?
"
13861,Fantomas42,django-blog-zinnia,4,closed,296,12,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/296/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/296,[],wp2zinnia fails with TypeError: cannot concatenate 'str' and 'NoneType' objects,"With pull request #281 merged and django 1.6 (and python 2.7) I got this error when running `wp2zinnia` management command:

```
> Jetpack which turned into a medium range missile... Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/core/management/__init__.py"", line 399, in execute_from_command_line
    utility.execute()
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/core/management/__init__.py"", line 392, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/core/management/base.py"", line 242, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/core/management/base.py"", line 285, in execute
    output = self.handle(*args, **options)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/core/management/base.py"", line 385, in handle
    label_output = self.handle_label(label, **options)
  File ""/home/matej/archiv/2013/projekty/django-blog/src/django-blog-zinnia/zinnia/management/commands/wp2zinnia.py"", line 107, in handle_label
    self.import_entries(tree.findall('channel/item'))
  File ""/home/matej/archiv/2013/projekty/django-blog/src/django-blog-zinnia/zinnia/management/commands/wp2zinnia.py"", line 331, in import_entries
    entry, created = self.import_entry(title, content, item_node)
  File ""/home/matej/archiv/2013/projekty/django-blog/src/django-blog-zinnia/zinnia/management/commands/wp2zinnia.py"", line 268, in import_entry
    '{%sexcerpt/}encoded' % WP_NS).text)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/utils/functional.py"", line 203, in wrapper
    return func(*args, **kwargs)
  File ""/home/matej/archiv/2013/projekty/django-blog/lib/python2.7/site-packages/django/utils/html.py"", line 134, in strip_tags
    s.feed(value)
  File ""/usr/lib64/python2.7/HTMLParser.py"", line 113, in feed
    self.rawdata = self.rawdata + data
TypeError: cannot concatenate 'str' and 'NoneType' objects
(django-blog)matej@wycliff: myblog$ 
```
"
13865,Fantomas42,django-blog-zinnia,4,closed,292,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/292/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/292,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}, {""default"": false, ""name"": ""Duplicate"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Duplicate"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzc0NA=="", ""id"": 15187744}]","'HTTP_FORWARDED_REQUEST_URI': '/blog/comments/success/?c=blablabla.php',","On my website i setup a blog on my website with zinnia but for some weird reason i'm getting these 500 Errors. if i type ""website.com/blog/comments/success/?c=blablabla.php"" it displays an error on my email for support, once a day something more i've received some email showing me the error

Traceback (most recent call last):

 File ""/home/username/webapplication/duranjo/lib/python2.7/django/core/handlers/base.py"", line 115, in get_response
    response = callback(request, _callback_args, *_callback_kwargs)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, _args, *_kwargs)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/views/generic/base.py"", line 86, in dispatch
    return handler(request, _args, *_kwargs)

  File ""/home/username/lib/python2.7/django_blog_zinnia-0.12.3-py2.7.egg/zinnia/views/comments.py"", line 25, in get
    pk=request.GET['c'])

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/manager.py"", line 143, in get
    return self.get_query_set().get(_args, *_kwargs)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/query.py"", line 395, in get
    clone = self.filter(_args, *_kwargs)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/query.py"", line 669, in filter
    return self._filter_or_exclude(False, _args, *_kwargs)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/query.py"", line 687, in _filter_or_exclude
    clone.query.add_q(Q(_args, *_kwargs))

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/sql/query.py"", line 1271, in add_q
    can_reuse=used_aliases, force_having=force_having)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/sql/query.py"", line 1202, in add_filter
    connector)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/sql/where.py"", line 71, in add
    value = obj.prepare(lookup_type, value)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/sql/where.py"", line 339, in prepare
    return self.field.get_prep_lookup(lookup_type, value)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/fields/**init**.py"", line 322, in get_prep_lookup
    return self.get_prep_value(value)

  File ""/home/username/webapplication/duranjo/lib/python2.7/django/db/models/fields/**init**.py"", line 555, in get_prep_value
    return int(value)

ValueError: invalid literal for int() with base 10: 'blablabla.php'

<WSGIRequest
path:/blog/comments/success/,
GET:<QueryDict: {u'c': [u'blablabla.php']}>,
POST:<QueryDict: {}>,
COOKIES:{'

---

  'HTTP_FORWARDED_REQUEST_URI': '/blog/comments/success/?c=blablabla.php',
"
13867,Fantomas42,django-blog-zinnia,4,closed,290,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/290/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/290,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",value too long for type character varying(100),"When adding an article with an image that has exactly 100 character this exception is raised. For example an image with this name 7459_7_573507459_7_573507459_7_573507459_7_570556464545454545414-545454454-54545_mounir_test_img.jpg

value too long for type character varying(100)
Request Method: POST
Request URL:    http://127.0.0.1:8000/admin/zinnia/entry/add/
Django Version: 1.5.4
Exception Type: DatabaseError
Exception Value:  
value too long for type character varying(100)
"
13868,Fantomas42,django-blog-zinnia,4,closed,289,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/289/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/289,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",Templates still refer to auth_user,"I have found a few template references to 'auth_user' that cause issues when using a custom user.

Here are the scenarios:
1. When the 'Zinnia' category/dashboard is viewed in the admin. The following produces a NoReverseMatch error.
`<a href=""{% url 'admin:auth_user_changelist' %}""> in _content_stats.html, ln 36`
2. When an Author's entries are listed on the site using Zinia. The following produces a NoReverseMatch error.
`<a href=""{% url 'admin:auth_user_change' author.pk %}"" title=""{% trans ""Edit the author"" %}""> in entry_list.html, ln 84`

This can be reproduced by adding a custom user object and walking through the scenarios.

What I have tried:
1. (Mixed) I was able to get Zinnia working with my own app by replacing 'auth_user' with 'myapp_myuser' but obviously that wouldn't be suitably generic.
2. (Fail) Building off 1. I tried replacing 'auth_user' with 'zinnia_author' with no luck.
3. Double checking django docs. They only seem to confirm 1. but don't talk about what to put if you are writing a re-usable app. https://docs.djangoproject.com/en/dev/ref/contrib/admin/#reversing-admin-urls
4. (Fail) I have asked the django-users group how to use that template tag in a reusable way and someone suggested a custom tag. Here is my attempt at that approach. The main reason it doesn't work is because I don't know what I am doing. :P 
https://groups.google.com/forum/#!topic/django-users/lhd9EkC0qNk
https://dpaste.de/Cwt2

Related:
https://github.com/Fantomas42/django-blog-zinnia/pull/217
"
13870,Fantomas42,django-blog-zinnia,4,closed,287,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/287/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/287,"[{""default"": false, ""name"": ""Duplicate"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Duplicate"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzc0NA=="", ""id"": 15187744}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",RSS Feed does not work with django-cms,"I am using django 1.5, zinnia .12.3 and django-cms 2.4.2

I am attempting to follow the trackback and seeing if I can pinpoint the exact problem.   

AttributeError at /en/weblog/feeds/

'NoneType' object has no attribute 'push'

Request Method:     GET
Request URL:    http://50.116.47.120:8000/en/weblog/feeds/
Django Version:     1.5.1
Exception Type:     AttributeError
Exception Value:    

'NoneType' object has no attribute 'push'

Exception Location:     /usr/lib/python2.6/site-packages/cms/plugin_rendering.py in render_placeholder, line 92
Python Executable:  /usr/bin/python
Python Version:     2.6.6
Python Path:    

['/srv/www/arkpointcapital.com/arkpoint',
 '/usr/lib/python2.6/site-packages/distribute-0.6.48-py2.6.egg',
 '/usr/lib/python26.zip',
 '/usr/lib/python2.6',
 '/usr/lib/python2.6/plat-linux2',
 '/usr/lib/python2.6/lib-tk',
 '/usr/lib/python2.6/lib-old',
 '/usr/lib/python2.6/lib-dynload',
 '/usr/lib/python2.6/site-packages',
 '/usr/lib/python2.6/site-packages/PIL',
 '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info']

Server time:    Sat, 19 Oct 2013 16:28:44 -0500

Traceback Switch to copy-and-paste view

```
/usr/lib/python2.6/site-packages/django/core/handlers/base.py in get_response

                            response = callback(request, *callback_args, **callback_kwargs)

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/django/contrib/syndication/views.py in __call__

            feedgen = self.get_feed(obj, request)

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/django/contrib/syndication/views.py in get_feed

                enc_url = self.__get_dynamic_attr('item_enclosure_url', item)

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/django/contrib/syndication/views.py in __get_dynamic_attr

                    return attr(obj)

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/zinnia/feeds.py in item_enclosure_url

                img = BeautifulSoup(item.html_content).find('img')

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/cmsplugin_zinnia/placeholder.py in html_content

            return render_placeholder(self.content_placeholder, context)

    ...
▶ Local vars
/usr/lib/python2.6/site-packages/cms/plugin_rendering.py in render_placeholder

        context.push()

    ...
▶ Local vars
```

Request information
GET

No GET data
POST

No POST data
FILES

No FILES data
COOKIES
Variable    Value
csrftoken   

'mp6XbbXubV6m1cHxCaBY8ijDi5BR4VTM'

sessionid   

'mh2awxhuii6xdgupt78lpia1pvsbntwd'

messages    

'481ff3b8a5ff55802e21396bbe2b76d0ef34caad$[[""__json_message"",0,20,""The entry \""test: draft\"" was added successfully.""],[""__json_message"",0,20,""The file \""Did this just work??\"" was added successfully. You may edit it again below.""],[""__json_message"",0,20,""The entry \""test: draft\"" was changed successfully.""],[""__json_message"",0,20,""The page \""test\"" was added successfully. You may edit it again below.""],[""__json_message"",0,20,""The category \""Quarterly Reports\"" was added successfully.""],[""__json_message"",0,20,""The entry \""test: draft\"" was changed successfully.""],[""__json_message"",0,20,""The csv import \""csv/PRICELST_21-12-2012.csv\"" was added successfully.""],[""__json_message"",0,20,""Successfully deleted 1 csv import.""],[""__json_message"",0,20,""The csv import \""csv/PRICELST_21-12-2012.csv\"" was added successfully.""],[""__json_message"",0,20,""The csv import \""csv/PRICELST_21-12-2012_1.csv\"" was changed successfully.""],[""__json_message"",0,20,""The site \""50.116.47.120:8000\"" was changed successfully.""],[""__json_message"",0,20,""The entry \""test: draft\"" was changed successfully.""],[""__json_message"",0,20,""The entry \""test: published\"" was changed successfully.""],[""__json_message"",0,20,""The text \""test\"" was added successfully. You may edit it again below.""],[""__json_message"",0,20,""The entry \""test: published\"" was changed successfully.""]]'

django_language     

'en'

CMS_toolbar-collapsed   

'false'

META
Variable    Value
wsgi.multiprocess   

False

RUN_MAIN    

'true'

HTTP_REFERER    

'http://50.116.47.120:8000/en/weblog/categories/quarterly-reports/'

SERVER_PROTOCOL     

'HTTP/1.1'

SERVER_SOFTWARE     

'WSGIServer/0.1 Python/2.6.6'

SCRIPT_NAME     

u''

LESSOPEN    

'|/usr/bin/lesspipe.sh %s'

SSH_CLIENT  

'66.56.35.151 58365 46220'

CVS_RSH     

'ssh'

LOGNAME     

'tareq'

USER    

'tareq'

HOME    

'/home/tareq'

QUERY_STRING    

''

PATH    

'/usr/local/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/tareq/bin'

wsgi.errors     

<open file '<stderr>', mode 'w' at 0xb77760d0>

LANG    

'en_US.UTF-8'

TERM    

'xterm-256color'

SHELL   

'/bin/bash'

TZ  

'America/Chicago'

HTTP_COOKIE     

'csrftoken=mp6XbbXubV6m1cHxCaBY8ijDi5BR4VTM; sessionid=mh2awxhuii6xdgupt78lpia1pvsbntwd; django_language=en; CMS_toolbar-collapsed=false; messages=""481ff3b8a5ff55802e21396bbe2b76d0ef34caad$[[\""__json_message\""\0540\05420\054\""The entry \\\""test: draft\\\"" was added successfully.\""]\054[\""__json_message\""\0540\05420\054\""The file \\\""Did this just work??\\\"" was added successfully. You may edit it again below.\""]\054[\""__json_message\""\0540\05420\054\""The entry \\\""test: draft\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The page \\\""test\\\"" was added successfully. You may edit it again below.\""]\054[\""__json_message\""\0540\05420\054\""The category \\\""Quarterly Reports\\\"" was added successfully.\""]\054[\""__json_message\""\0540\05420\054\""The entry \\\""test: draft\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The csv import \\\""csv/PRICELST_21-12-2012.csv\\\"" was added successfully.\""]\054[\""__json_message\""\0540\05420\054\""Successfully deleted 1 csv import.\""]\054[\""__json_message\""\0540\05420\054\""The csv import \\\""csv/PRICELST_21-12-2012.csv\\\"" was added successfully.\""]\054[\""__json_message\""\0540\05420\054\""The csv import \\\""csv/PRICELST_21-12-2012_1.csv\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The site \\\""50.116.47.120:8000\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The entry \\\""test: draft\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The entry \\\""test: published\\\"" was changed successfully.\""]\054[\""__json_message\""\0540\05420\054\""The text \\\""test\\\"" was added successfully. You may edit it again below.\""]\054[\""__json_message\""\0540\05420\054\""The entry \\\""test: published\\\"" was changed successfully.\""]]""'

SERVER_NAME     

'dotacommentaries.com'

REMOTE_ADDR     

'66.56.35.151'

SHLVL   

'1'

G_BROKEN_FILENAMES  

'1'

HISTSIZE    

'1000'

wsgi.url_scheme     

'http'

SERVER_PORT     

'8000'

CONTENT_LENGTH  

''

wsgi.file_wrapper   

''

CSRF_COOKIE     

u'mp6XbbXubV6m1cHxCaBY8ijDi5BR4VTM'

wsgi.input  

<socket._fileobject object at 0xb59094ec>

HTTP_USER_AGENT     

'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:24.0) Gecko/20100101 Firefox/24.0'

HTTP_HOST   

'50.116.47.120:8000'

wsgi.multithread    

True

HTTP_CONNECTION     

'keep-alive'

_   

'/usr/bin/python'

HTTP_ACCEPT     

'text/html,application/xhtml+xml,application/xml;q=0.9,_/_;q=0.8'

LS_COLORS   

'rs=0:di=38;5;27:ln=38;5;51:mh=44;38;5;15:pi=40;38;5;11:so=38;5;13:do=38;5;5:bd=48;5;232;38;5;11:cd=48;5;232;38;5;3:or=48;5;232;38;5;9:mi=05;48;5;232;38;5;15:su=48;5;196;38;5;15:sg=48;5;11;38;5;16:ca=48;5;196;38;5;226:tw=48;5;10;38;5;16:ow=48;5;10;38;5;21:st=48;5;21;38;5;15:ex=38;5;34:_.tar=38;5;9:_.tgz=38;5;9:_.arj=38;5;9:_.taz=38;5;9:_.lzh=38;5;9:_.lzma=38;5;9:_.tlz=38;5;9:_.txz=38;5;9:_.zip=38;5;9:_.z=38;5;9:_.Z=38;5;9:_.dz=38;5;9:_.gz=38;5;9:_.lz=38;5;9:_.xz=38;5;9:_.bz2=38;5;9:_.tbz=38;5;9:_.tbz2=38;5;9:_.bz=38;5;9:_.tz=38;5;9:_.deb=38;5;9:_.rpm=38;5;9:_.jar=38;5;9:_.rar=38;5;9:_.ace=38;5;9:_.zoo=38;5;9:_.cpio=38;5;9:_.7z=38;5;9:_.rz=38;5;9:_.jpg=38;5;13:_.jpeg=38;5;13:_.gif=38;5;13:_.bmp=38;5;13:_.pbm=38;5;13:_.pgm=38;5;13:_.ppm=38;5;13:_.tga=38;5;13:_.xbm=38;5;13:_.xpm=38;5;13:_.tif=38;5;13:_.tiff=38;5;13:_.png=38;5;13:_.svg=38;5;13:_.svgz=38;5;13:_.mng=38;5;13:_.pcx=38;5;13:_.mov=38;5;13:_.mpg=38;5;13:_.mpeg=38;5;13:_.m2v=38;5;13:_.mkv=38;5;13:_.ogm=38;5;13:_.mp4=38;5;13:_.m4v=38;5;13:_.mp4v=38;5;13:_.vob=38;5;13:_.qt=38;5;13:_.nuv=38;5;13:_.wmv=38;5;13:_.asf=38;5;13:_.rm=38;5;13:_.rmvb=38;5;13:_.flc=38;5;13:_.avi=38;5;13:_.fli=38;5;13:_.flv=38;5;13:_.gl=38;5;13:_.dl=38;5;13:_.xcf=38;5;13:_.xwd=38;5;13:_.yuv=38;5;13:_.cgm=38;5;13:_.emf=38;5;13:_.axv=38;5;13:_.anx=38;5;13:_.ogv=38;5;13:_.ogx=38;5;13:_.aac=38;5;45:_.au=38;5;45:_.flac=38;5;45:_.mid=38;5;45:_.midi=38;5;45:_.mka=38;5;45:_.mp3=38;5;45:_.mpc=38;5;45:_.ogg=38;5;45:_.ra=38;5;45:_.wav=38;5;45:_.axa=38;5;45:_.oga=38;5;45:_.spx=38;5;45:_.xspf=38;5;45:'

wsgi.version    

(1, 0)

GATEWAY_INTERFACE   

'CGI/1.1'

wsgi.run_once   

False

SSH_TTY     

'/dev/pts/1'

OLDPWD  

'/home/tareq'

HOSTNAME    

'hobbes3.com'

HTTP_ACCEPT_LANGUAGE    

'en-US,en;q=0.5'

HISTCONTROL     

'ignoredups'

PWD     

'/srv/www/arkpointcapital.com/arkpoint'

REQUEST_METHOD  

'GET'

DJANGO_SETTINGS_MODULE  

'arkpoint.settings'

CONTENT_TYPE    

'text/plain'

MAIL    

'/var/spool/mail/tareq'

SSH_CONNECTION  

'66.56.35.151 58365 50.116.47.120 46220'

REMOTE_HOST     

''

HTTP_ACCEPT_ENCODING    

'gzip, deflate'

PATH_INFO   

u'/en/weblog/feeds/'

Settings
Using settings module arkpoint.settings
Setting     Value
USE_L10N    

True

USE_THOUSAND_SEPARATOR  

False

CSRF_COOKIE_SECURE  

False

LANGUAGE_CODE   

'en-us'

ROOT_URLCONF    

'arkpoint.urls'

MANAGERS    

()

DEFAULT_CHARSET     

'utf-8'

STATIC_ROOT     

'/srv/www/arkpointcapital.com/arkpoint/static/'

ALLOWED_HOSTS   

[]

MESSAGE_STORAGE     

'django.contrib.messages.storage.fallback.FallbackStorage'

EMAIL_SUBJECT_PREFIX    

'[Django] '

FILE_UPLOAD_PERMISSIONS     

None

STATICFILES_FINDERS     

('django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder')

SESSION_CACHE_ALIAS     

'default'

SESSION_COOKIE_DOMAIN   

None

SESSION_COOKIE_NAME     

'sessionid'

ADMIN_FOR   

()

TIME_INPUT_FORMATS  

('%H:%M:%S', '%H:%M')

DATABASES   

{'default': {'ENGINE': 'django.db.backends.mysql',
             'HOST': '',
             'NAME': 'arkpoint',
             'OPTIONS': {},
             'PASSWORD': u'********************',
             'PORT': '',
             'TEST_CHARSET': None,
             'TEST_COLLATION': None,
             'TEST_MIRROR': None,
             'TEST_NAME': None,
             'TIME_ZONE': 'UTC',
             'USER': 'tareq'}}

SERVER_EMAIL    

'root@localhost'

FILE_UPLOAD_HANDLERS    

('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')

DEFAULT_CONTENT_TYPE    

'text/html'

APPEND_SLASH    

True

LOCALE_PATHS    

()

DATABASE_ROUTERS    

[]

YEAR_MONTH_FORMAT   

'F Y'

STATICFILES_STORAGE     

'django.contrib.staticfiles.storage.StaticFilesStorage'

CACHES  

{'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}

ZINNIA_ENTRY_BASE_MODEL     

'cmsplugin_zinnia.placeholder.EntryPlaceholder'

SESSION_COOKIE_PATH     

'/'

CMS_TEMPLATES   

(('template_1.html', 'Template One'), ('template_2.html', 'Template Two'))

MIDDLEWARE_CLASSES  

('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.doc.XViewMiddleware',
 'django.middleware.common.CommonMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware',
 'cms.middleware.language.LanguageCookieMiddleware')

USE_I18N    

True

THOUSAND_SEPARATOR  

','

SECRET_KEY  

u'********************'

LANGUAGE_COOKIE_NAME    

'django_language'

DEFAULT_INDEX_TABLESPACE    

''

TRANSACTIONS_MANAGED    

False

LOGGING_CONFIG  

'django.utils.log.dictConfig'

SEND_BROKEN_LINK_EMAILS     

False

TEMPLATE_LOADERS    

('django.template.loaders.filesystem.Loader',
 'django.template.loaders.app_directories.Loader')

CSVIMPORT_MEDIA_ROOT    

'/srv/www/arkpointcapital.com/arkpoint/media/'

FIRST_DAY_OF_WEEK   

0

WSGI_APPLICATION    

'arkpoint.wsgi.application'

TEMPLATE_DEBUG  

True

X_FRAME_OPTIONS     

'SAMEORIGIN'

AUTHENTICATION_BACKENDS     

('django.contrib.auth.backends.ModelBackend',)

FORCE_SCRIPT_NAME   

None

USE_X_FORWARDED_HOST    

False

SIGNING_BACKEND     

'django.core.signing.TimestampSigner'

SESSION_COOKIE_SECURE   

False

CSRF_COOKIE_DOMAIN  

None

FILE_CHARSET    

'utf-8'

DEBUG   

True

SESSION_FILE_PATH   

None

DEFAULT_FILE_STORAGE    

'django.core.files.storage.FileSystemStorage'

INSTALLED_APPS  

('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.comments',
 'cms',
 'mptt',
 'menus',
 'sekizai',
 'cms.plugins.file',
 'cms.plugins.flash',
 'cms.plugins.googlemap',
 'cms.plugins.link',
 'cms.plugins.picture',
 'cms.plugins.snippet',
 'cms.plugins.teaser',
 'cms.plugins.text',
 'cms.plugins.video',
 'cms.plugins.twitter',
 'cmsplugin_zinnia',
 'reversion',
 'tagging',
 'zinnia',
 'csvimport',
 'stocklist')

LANGUAGES   

[('en', 'English')]

COMMENTS_ALLOW_PROFANITIES  

False

STATICFILES_DIRS    

()

PREPEND_WWW     

False

SECURE_PROXY_SSL_HEADER     

None

SESSION_COOKIE_HTTPONLY     

True

DEBUG_PROPAGATE_EXCEPTIONS  

False

MONTH_DAY_FORMAT    

'F j'

LOGIN_URL   

'/accounts/login/'

SESSION_EXPIRE_AT_BROWSER_CLOSE     

False

TIME_FORMAT     

'P'

AUTH_USER_MODEL     

'auth.User'

DATE_INPUT_FORMATS  

('%Y-%m-%d',
 '%m/%d/%Y',
 '%m/%d/%y',
 '%b %d %Y',
 '%b %d, %Y',
 '%d %b %Y',
 '%d %b, %Y',
 '%B %d %Y',
 '%B %d, %Y',
 '%d %B %Y',
 '%d %B, %Y')

CSRF_COOKIE_NAME    

'csrftoken'

EMAIL_HOST_PASSWORD     

u'********************'

PASSWORD_RESET_TIMEOUT_DAYS     

u'********************'

CACHE_MIDDLEWARE_ALIAS  

'default'

SESSION_SAVE_EVERY_REQUEST  

False

NUMBER_GROUPING     

0

SESSION_ENGINE  

'django.contrib.sessions.backends.db'

CSRF_FAILURE_VIEW   

'django.views.csrf.csrf_failure'

CSRF_COOKIE_PATH    

'/'

LOGIN_REDIRECT_URL  

'/accounts/profile/'

DECIMAL_SEPARATOR   

'.'

IGNORABLE_404_URLS  

()

PROJECT_PATH    

'/srv/www/arkpointcapital.com/arkpoint'

TEMPLATE_STRING_IF_INVALID  

''

LOGOUT_URL  

'/accounts/logout/'

EMAIL_USE_TLS   

False

FIXTURE_DIRS    

()

EMAIL_HOST  

'localhost'

DATE_FORMAT     

'N j, Y'

MEDIA_ROOT  

'/srv/www/arkpointcapital.com/arkpoint/media/'

DEFAULT_EXCEPTION_REPORTER_FILTER   

'django.views.debug.SafeExceptionReporterFilter'

ADMINS  

()

FORMAT_MODULE_PATH  

None

DEFAULT_FROM_EMAIL  

'webmaster@localhost'

CSVIMPORT_MODELS    

[]

MEDIA_URL   

'/media/'

DATETIME_FORMAT     

'N j, Y, P'

TEMPLATE_DIRS   

('/srv/www/arkpointcapital.com/arkpoint/templates',)

SITE_ID     

1

DISALLOWED_USER_AGENTS  

()

ALLOWED_INCLUDE_ROOTS   

()

LOGGING     

{'disable_existing_loggers': False,
 'filters': {'require_debug_false': {'()': 'django.utils.log.RequireDebugFalse'}},
 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',
                              'filters': ['require_debug_false'],
                              'level': 'ERROR'}},
 'loggers': {'django.request': {'handlers': ['mail_admins'],
                                'level': 'ERROR',
                                'propagate': True}},
 'version': 1}

SHORT_DATE_FORMAT   

'm/d/Y'

TEST_RUNNER     

'django.test.simple.DjangoTestSuiteRunner'

CACHE_MIDDLEWARE_KEY_PREFIX     

u'********************'

TIME_ZONE   

'America/Chicago'

FILE_UPLOAD_MAX_MEMORY_SIZE     

2621440

EMAIL_BACKEND   

'django.core.mail.backends.smtp.EmailBackend'

DEFAULT_TABLESPACE  

''

TEMPLATE_CONTEXT_PROCESSORS     

('django.contrib.auth.context_processors.auth',
 'django.core.context_processors.i18n',
 'django.core.context_processors.request',
 'django.core.context_processors.media',
 'django.core.context_processors.static',
 'zinnia.context_processors.version',
 'cms.context_processors.media',
 'sekizai.context_processors.sekizai')

SESSION_COOKIE_AGE  

1209600

SETTINGS_MODULE     

'arkpoint.settings'

USE_ETAGS   

False

LANGUAGES_BIDI  

('he', 'ar', 'fa')

FILE_UPLOAD_TEMP_DIR    

None

INTERNAL_IPS    

()

STATIC_URL  

'/static/'

EMAIL_PORT  

25

USE_TZ  

True

SHORT_DATETIME_FORMAT   

'm/d/Y P'

PASSWORD_HASHERS    

u'********************'

ABSOLUTE_URL_OVERRIDES  

{}

CACHE_MIDDLEWARE_SECONDS    

600

DATETIME_INPUT_FORMATS  

('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M:%S.%f',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M:%S.%f',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M:%S.%f',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')

EMAIL_HOST_USER     

''

PROFANITIES_LIST    

u'********************'
"
13877,Fantomas42,django-blog-zinnia,4,closed,280,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/280/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/280,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",ImproperlyConfigured: field 'x' that is missing from the form.,"# Error:

`ImproperlyConfigured: 'EntryGalleryAdmin.fieldsets[0][1]['fields']' refers to field 'gallery' that is missing from the form.`
# Env:

Zinnia v(0.12.3), Django 1.5.4, Django CMS (2.4.2)
# Structure:

`PROJECT
├── django_webapp
│   ├── __init__.py
│   ├── apps
│   │   ├── __init__.py
│   │   └── zinnia_gallery
│   │       ├── __init__.py
│   │       ├── admin.py      <- customizes the EntryAdmin
│   │       └── models.py     <- has 2 classes: Picture and Gallery(M2M to Picture)
│   ├── libs
│   │   ├── __init__.py
│   │   └── zinnia_gallery_extension
│   │       ├── __init__.py
│   │       └── entry_with_gallery.py   <- Extending the Abstract
│   ├── urls.py
│   └── wsgi.py
├── manage.py
├── settings.py
├── requirements
│   ├── common.txt
│   ├── dev.txt
│   ├── prod.txt
│   └── test.txt
└── requirements.txt
`
# Settings:

`ZINNIA_ENTRY_BASE_MODEL = 'django_webapp.lib.zinnia_gallery_extension.entry_with_gallery.EntryWithGallery'`

---

entry_with_gallery.py:

`
from django.db import models
from zinnia_gallery.models import Gallery
from zinnia.models.entry import EntryAbstractClass
class EntryWithGallery(EntryAbstractClass):
    gallery = models.ForeignKey(Gallery)
    def __unicode__(self):
        return u'EntryWithGallery %s' % self.title
    class Meta(EntryAbstractClass.Meta):
        abstract = True
`

---

admin.py:

`
from django.contrib import admin
from django.utils.translation import ugettext_lazy as _
from zinnia.models.entry import Entry
from zinnia.admin.entry import EntryAdmin
class EntryGalleryAdmin(EntryAdmin):
    fieldsets = ((_('Content'), {'fields': ('title', 'content', 'image', 'status', 'gallery')}),) +EntryAdmin.fieldsets[1:]
admin.site.unregister(Entry)
admin.site.register(Entry, EntryGalleryAdmin)
`
# Question:

Where am i wrong ?
"
13881,Fantomas42,django-blog-zinnia,4,closed,276,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/276/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/276,"[{""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",NoReverseMatch at /en/weblog/2013/09/16/new-web,"Hi,
seems to be related to a recent django version 1.5.1 (installed with pip) and the  django.contrib.comments app.

may be due to the comments framework  has removed from django dev version 
https://docs.djangoproject.com/en/dev/ref/contrib/comments/

zinnia version 0.12.3

Reverse for 'django.contrib.comments.views.comments.post_comment' with arguments '()' and keyword arguments '{}' not found.
Template:
zinnia/templates/comments/zinnia/entry/form.html, error at line 3
<form action=""{% comment_form_target %}"" method=""post"" id=""comment-form"">

File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/contrib/comments/templatetags/comments.py"" in render
1.             formstr = render_to_string(template_search_list, {""form"" : self.get_form(context)}, context)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/loader.py"" in render_to_string
2.         return t.render(context_instance)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/base.py"" in render
3.             return self._render(context)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/base.py"" in _render
4.         return self.nodelist.render(context)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/base.py"" in render
5.                 bit = self.render_node(node, context)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/debug.py"" in render_node
6.             return node.render(context)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/template/base.py"" in render
7.                     return func(_resolved_args, *_resolved_kwargs)
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/contrib/comments/templatetags/comments.py"" in comment_form_target
8.     return comments.get_form_target()
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/contrib/comments/**init**.py"" in get_form_target
9.         return urlresolvers.reverse(""django.contrib.comments.views.comments.post_comment"")
   File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/core/urlresolvers.py"" in reverse
10.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, _args, *_kwargs))
    File ""/home/foooo/.virtualenvs/cms3/local/lib/python2.7/site-packages/django/core/urlresolvers.py"" in _reverse_with_prefix
11.                 ""arguments '%s' not found."" % (lookup_view_s, args, kwargs))

Exception Type: NoReverseMatch at /en/weblog/2013/09/16/new-web-site-bloc/
Exception Value: Reverse for 'django.contrib.comments.views.comments.post_comment' with arguments '()' and keyword arguments '{}' not found.
"
13883,Fantomas42,django-blog-zinnia,4,closed,274,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/274/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/274,[],ForeignKey to extended Entry,"Hi! At first, thank you for your amazin blog engine!
In my case I'd like to extend the entry model and attach some photos to an entry. I find using m2m table (like in your instruction) unreasonable and I'd like to use something like this

from django.db import models
from zinnia.models.entry import Entry

class Picture(models.Model):
    entry = models.ForeignKey(Entry)
    title = models.CharField(max_length=50)
    image = models.ImageField(upload_to='gallery')

but I'm clashing at migration against:

NameError: name 'Entry' is not defined

Do you know a really good solution to use ForeignKey with Entry model?
Thanks!
"
13890,Fantomas42,django-blog-zinnia,4,closed,267,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/267/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/267,"[{""default"": false, ""name"": ""Comments"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Comments"", ""color"": ""006b75"", ""node_id"": ""MDU6TGFiZWw0MjYyMDY5Mw=="", ""id"": 42620693}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",django-contrib-comments support,"I get the following errors when trying to use with new django-contrib-comments reusable app:

```
CommandError: One or more models did not validate:
django_comments.comment: Accessor for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
django_comments.comment: Reverse query name for field 'content_type' clashes with related field 'ContentType.content_type_set_for_comment'. Add a related_name argument to the definition for 'content_type'.
django_comments.comment: Accessor for field 'site' clashes with related field 'Site.comment_set'. Add a related_name argument to the definition for 'site'.
django_comments.comment: Accessor for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
django_comments.comment: Reverse query name for field 'user' clashes with related field 'User.comment_comments'. Add a related_name argument to the definition for 'user'.
django_comments.commentflag: Accessor for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
django_comments.commentflag: Reverse query name for field 'user' clashes with related field 'User.comment_flags'. Add a related_name argument to the definition for 'user'.
```
"
13896,Fantomas42,django-blog-zinnia,4,closed,261,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/261/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/261,"[{""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",metaweblog getPageList not supported,"Thank You!! for what you have closed the bug 259 https://github.com/Fantomas42/django-blog-zinnia/issues/259

I'm new so I can hardly help. Now Emacs org2blog reports the following

> XML-RPC fault `<type 'exceptions.Exception'>:method ""wp.getPageList"" is not supported'
"
13897,Fantomas42,django-blog-zinnia,4,closed,260,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/260/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/260,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",wp2zinnia 'KeyError' when importing XML File (WP 3.4.2),"When importing an XML file from a Wordpress 3.4.2 installation that contains entries with a Category named 'Blog', I get:

```
$ python manage.py wp2zinnia --traceback wordpress.xml

  File ""/home/project_dir/src/django-blog-zinnia/zinnia/management/commands/wp2zinnia.py"", line 253, in get_entry_categories
categories.append(self.categories[category_node.text])
KeyError: 'Blog'
```

I was able to get a temporary workaround for this by doing some commenting out on my wp2zinnia.py file (line 253...) However, the workaround will not import the Categories assicated with your entries:

```
def get_entry_categories(self, category_nodes):
    """"""Return a list of entry's categories
    based of imported categories""""""
    categories = []
    '''for category_node in category_nodes:
        domain = category_node.attrib.get('domain')
        if domain == 'category':
            categories.append(self.categories[category_node.text])'''
    return categories
```
"
13898,Fantomas42,django-blog-zinnia,4,closed,259,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/259/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/259,"[{""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",Emacs metaweblog getTags not supported,"I would like to use for Emaсs org-mode (via org2blog https://github.com/punchagan/org2blog ). Connected xmlrpc as written here http://django-blog-zinnia.readthedocs.org/en/latest/getting-started/configuration.html#module-zinnia.xmlrpc 

but the connection is an error

XML-RPC fault '<type 'exception.Exception'>: method ""wp.getTags"" is not supported

The problem on the client side, or need an additional decorator xmlrpc_func?
"
13902,Fantomas42,django-blog-zinnia,4,closed,255,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/255/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/255,"[{""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",Disable Comment Notification Emails when DEBUG==True,"I was playing with a comment moderator backend using the development server and ran into a Connection Refused error from the socket module when Zinnia went to send the notification email.

This was easily enough side-stepped by setting the email backend...

```
EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'
```

... but it strikes me that emails just shouldn't be sent here. (I guess they could be optional.)
"
13903,Fantomas42,django-blog-zinnia,4,closed,254,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/254/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/254,"[{""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",Values instance has no attribute 'default_reference_context',"Using the latest version, when I try to go to /admin/zinnia/entry/, I get the following:

AttributeError at /admin/zinnia/entry/
Values instance has no attribute 'default_reference_context'
Request Method: GET
Request URL:    http://www.samraker.com/admin/zinnia/entry/
Django Version: 1.5.1
Exception Type: AttributeError
Exception Value:  
Values instance has no attribute 'default_reference_context'
Exception Location: /home/samraker/Python27/lib/python2.7/site-packages/django/contrib/admindocs/utils.py in default_reference_role, line 97
Python Executable:  /usr/bin/python
Python Version: 2.6.6
Python Path:  
['/usr/local/dh/passenger/lib/phusion_passenger/wsgi',
 '/home/samraker/Python27/lib/python2.7/site-packages',
 '/home/samraker/samraker.com/public/samrakerdotcom/zinnia',
 '/home/samraker/samraker.com/public/samrakerdotcom',
 '/home/samraker/samraker.com/public',
 '/home/samraker/samraker.com',
 '/django-trunk/django',
 '/usr/local/lib/python2.6/dist-packages/MySQL_python-1.2.3-py2.6-linux-x86_64.egg',
 '/django-trunk',
 '/usr/local/lib/python2.6/dist-packages/pyodbc-3.0.6-py2.6-linux-x86_64.egg',
 '/root/opt/python-2.7.3/lib',
 '/usr/lib/python2.6',
 '/usr/lib/python2.6/plat-linux2',
 '/usr/lib/python2.6/lib-tk',
 '/usr/lib/python2.6/lib-old',
 '/usr/lib/python2.6/lib-dynload',
 '/usr/local/lib/python2.6/dist-packages',
 '/usr/lib/python2.6/dist-packages',
 '/usr/lib/python2.6/dist-packages/PIL',
 '/usr/lib/pymodules/python2.6',
 '/home/samraker/samraker.com',
 '/home/samraker/samraker.com/public']

 /admin/zinnia/category/ seems to be working fine.
"
13907,Fantomas42,django-blog-zinnia,4,closed,250,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/250/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/250,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",migration error,"When I try to set up a new project which uses django zinnia and run a `syncdb --migrate` the syncdb succeeds, but the migration gives the following error:

`> zinnia:0018_initial
FailedDryRun:  ! Error found during dry run of '0018_initial'! Aborting.
Traceback (most recent call last):
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 175, in _run_migration
    migration_function()
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 57, in <lambda>
    return (lambda: direction(orm))
  File ""/home/django/blog/django-blog-zinnia/zinnia/migrations/0018_initial.py"", line 59, in forwards
    ('author', models.ForeignKey(orm['zinnia.author'], null=False))
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/orm.py"", line 169, in __getitem__
    raise KeyError(""The model '%s' from the app '%s' is not available in this migration."" % (model, app))
KeyError: ""The model 'author' from the app 'zinnia' is not available in this migration.""`
"
13921,Fantomas42,django-blog-zinnia,4,closed,236,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/236/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/236,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Templates"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Templates"", ""color"": ""a8ff1c"", ""node_id"": ""MDU6TGFiZWw1MDExNw=="", ""id"": 50117}]",column zinnia_entry.template does not exist,"I upgraded from zinnia 0.12.dev (Oct. 16, 2012) to 0.13.dev (head today April 20).

I used the instructions here:

http://docs.django-blog-zinnia.com/en/latest/getting-started/upgrading.html

I upgraded to django-1.5

I believe I have all of my templates updated.

Everything went fine, but when I browse my blog I get this error:

```
Traceback (most recent call last):    
  File ""/usr/lib/python2.7/dist-packages/django/core/handlers/base.py"", line 136, in get_response
    # response middleware and the render the response
  File ""/usr/lib/python2.7/dist-packages/django/template/response.py"", line 104, in render
    if not self._is_rendered:
  File ""/usr/lib/python2.7/dist-packages/django/template/response.py"", line 81, in rendered_content
    context = self.resolve_context(self.context_data)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 140, in render
    return self._render(context)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 123, in render
    # the same.
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 123, in render
    # the same.
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 123, in render
    # the same.
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 134, in _render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 62, in render
    context['block'] = block
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 874, in render
    self.filter_expression = filter_expression
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 571, in resolve
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 721, in resolve
    var)
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 772, in _resolve_lookup
    if callable(current):
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 72, in super
    render_context[BLOCK_CONTEXT_KEY].get_block(self.name) is not None):
  File ""/usr/lib/python2.7/dist-packages/django/template/loader_tags.py"", line 62, in render
    context['block'] = block
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 823, in render
    # extend_nodelist().
  File ""/usr/lib/python2.7/dist-packages/django/template/base.py"", line 837, in render_node
    ""Return a list of all nodes of the given type""
  File ""/usr/lib/python2.7/dist-packages/django/template/defaulttags.py"", line 280, in render
    else:                               # else clause
  File ""/usr/lib/python2.7/dist-packages/django/core/paginator.py"", line 88, in __len__
    return '<Page %s of %s>' % (self.number, self.paginator.num_pages)
  File ""/usr/lib/python2.7/dist-packages/django/db/models/query.py"", line 85, in __len__
    # whilst not messing up any existing iterators against the QuerySet.
  File ""/usr/lib/python2.7/dist-packages/django/db/models/query.py"", line 291, in iterator
    init_list.append(field.attname)
  File ""/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py"", line 763, in results_iter
    def results_iter(self):
  File ""/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py"", line 818, in execute_sql
    Run the query against the database and returns the result(s). The
  File ""/usr/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py"", line 52, in execute
    def execute(self, query, args=None):

DatabaseError: column zinnia_entry.template does not exist
LINE 1: ...try"".""login_required"", ""zinnia_entry"".""password"", ""zinnia_en...
```

Output from South:

```
Syncing...
Creating tables ...
Installing custom SQL ...
Installing indexes ...
Installed 0 object(s) from 0 fixture(s)
Migrating...
Running migrations for zinnia:
 - Migrating forwards to 0017_index_together.
 > zinnia:0011_author_proxy
 > zinnia:0012_discussion_count
 > zinnia:0013_compute_discussion_count
 > zinnia:0014_trackback_enabled
 > zinnia:0015_rename_template
 > zinnia:0016_entry_content_template
 > zinnia:0017_index_together
 - Loading initial data for zinnia.
Installed 0 object(s) from 0 fixture(s)

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.staticfiles
 > django.contrib.admin
 > django.contrib.admindocs
 > django.contrib.comments
 > django.contrib.sitemaps
 > tagging
 > mptt
 > south

Migrated:
 - zinnia
```

The schema for zinnia_entry is:

```
Table ""public.zinnia_entry""
      Column       |           Type           |                                 Modifiers                                  
-------------------+--------------------------+----------------------------------------------------------------------------
 status            | integer                  | not null default 0
 last_update       | timestamp with time zone | not null default '2012-10-14 03:01:31.532296-06'::timestamp with time zone
 comment_enabled   | boolean                  | not null default true
 tags              | character varying(255)   | not null
 image             | character varying(100)   | not null
 title             | character varying(255)   | not null
 excerpt           | text                     | not null
 slug              | character varying(255)   | not null
 content           | text                     | not null
 end_publication   | timestamp with time zone | 
 start_publication | timestamp with time zone | 
 creation_date     | timestamp with time zone | not null default '2012-10-14 03:01:31.537093-06'::timestamp with time zone
 id                | integer                  | not null default nextval('zinnia_entry_id_seq'::regclass)
 pingback_enabled  | boolean                  | not null default true
 login_required    | boolean                  | not null
 password          | character varying(50)    | not null
 detail_template   | character varying(250)   | not null
 featured          | boolean                  | not null
 comment_count     | integer                  | not null
 pingback_count    | integer                  | not null
 trackback_count   | integer                  | not null
 trackback_enabled | boolean                  | not null
 content_template  | character varying(250)   | not null
Indexes:
    ""zinnia_entry_pkey"" PRIMARY KEY, btree (id)
    ""zinnia_entry_slug"" btree (slug)
    ""zinnia_entry_slug_2b17fcf59b18c4f4"" btree (slug, creation_date)
    ""zinnia_entry_slug_like"" btree (slug varchar_pattern_ops)
Referenced by:
    TABLE ""zinnia_entry_sites"" CONSTRAINT ""entry_id_refs_id_2ca8c253350895b0"" FOREIGN KEY (entry_id) REFERENCES zinnia_entry(id) DEFERRABLE INITIALLY DEFERRED
    TABLE ""zinnia_entry_categories"" CONSTRAINT ""entry_id_refs_id_2e8e58e6fb6ebd9"" FOREIGN KEY (entry_id) REFERENCES zinnia_entry(id) DEFERRABLE INITIALLY DEFERRED
    TABLE ""zinnia_entry_authors"" CONSTRAINT ""entry_id_refs_id_456b2b7ada51dea2"" FOREIGN KEY (entry_id) REFERENCES zinnia_entry(id) DEFERRABLE INITIALLY DEFERRED
    TABLE ""zinnia_entry_related"" CONSTRAINT ""from_entry_id_refs_id_233a09ab4d833995"" FOREIGN KEY (from_entry_id) REFERENCES zinnia_entry(id) DEFERRABLE INITIALLY DEFERRED
    TABLE ""zinnia_entry_related"" CONSTRAINT ""to_entry_id_refs_id_233a09ab4d833995"" FOREIGN KEY (to_entry_id) REFERENCES zinnia_entry(id) DEFERRABLE INITIALLY DEFERRED
```
"
13922,Fantomas42,django-blog-zinnia,4,closed,235,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/235/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/235,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",IntegrityError at /blog/quick-entry/,"Python 2.6
Django 1.5.0
Zinnia 0.12.3

When I submit a new post(from quick entry form or normal form) is raised this error:

IntegrityError at /blog/quick-entry/
(1452, 'Cannot add or update a child row: a foreign key constraint fails (`my_database`.`zinnia_entry_sites`, CONSTRAINT `site_id_refs_id_250ed0b2ebd96f36` FOREIGN KEY (`site_id`) REFERENCES `django_site` (`id`))')

but I see the post was created

I recently installed Zinnia, all tables are empty

| zinnia_entry_authors                 |
| zinnia_entry_categories              |
| zinnia_entry_related                 |
| zinnia_entry_sites 

except zinnia_entry, there exists only one entry the post that I created.

django_site has only one entry.

+----+----------------------------------------+-----------+
| id | domain                                 | name      |
+----+----------------------------------------+-----------+
|  1 | my_site.local | Testing Zinnia |
+----+----------------------------------------+-----------+

Entry:
MariaDB [my_database]> select \* from zinnia_entry;
+--------+---------------------+-----------------+------+-------+-------+---------+------+--------------+-----------------+-------------------+---------------------+----+------------------+----------------+----------+-------------------+----------+---------------+----------------+-----------------+-------------------+---------------------------+
| status | last_update         | comment_enabled | tags | image | title | excerpt | slug | content      | end_publication | start_publication | creation_date       | id | pingback_enabled | login_required | password | detail_template   | featured | comment_count | pingback_count | trackback_count | trackback_enabled | content_template          |
+--------+---------------------+-----------------+------+-------+-------+---------+------+--------------+-----------------+-------------------+---------------------+----+------------------+----------------+----------+-------------------+----------+---------------+----------------+-----------------+-------------------+---------------------------+
|      2 | 2013-04-17 16:18:55 |               0 |      |       | test  |         | test | <p>nueva</p> | NULL            | NULL              | 2013-04-17 16:18:55 |  5 |                0 |              0 |          | entry_detail.html |        0 |             0 |              0 |               0 |                 0 | zinnia/_entry_detail.html |
+--------+---------------------+-----------------+------+-------+-------+---------+------+--------------+-----------------+-------------------+---------------------+----+------------------+----------------+----------+-------------------+----------+---------------+----------------+-----------------+-------------------+---------------------------+
"
13924,Fantomas42,django-blog-zinnia,4,closed,233,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/233/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/233,"[{""default"": false, ""name"": ""Templates"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Templates"", ""color"": ""a8ff1c"", ""node_id"": ""MDU6TGFiZWw1MDExNw=="", ""id"": 50117}, {""default"": false, ""name"": ""Tests needed"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests%20needed"", ""color"": ""02d7e1"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzg2Mg=="", ""id"": 15187862}, {""default"": false, ""name"": ""Timezones"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Timezones"", ""color"": ""d4c5f9"", ""node_id"": ""MDU6TGFiZWwzNzQ2ODgwNg=="", ""id"": 37468806}]",astimezone() cannot be applied to a naive datetime,"I upgraded to the latest blog zinnia and to Django 1.5.1 from 1.4.x and receive the following error:

astimezone() cannot be applied to a naive datetime

Copy and pasted:

Environment:

Request Method: GET
Request URL: http://givity.coml:8000/blog/

Django Version: 1.5.1
Python Version: 2.7.4
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'tagging',
 'mptt',
 'zinnia',
 'django_extensions',
 'django.contrib.formtools',
 'sorl.thumbnail',
 'base',
 'accounts')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'base.middleware.subdomain.SubdomainMiddleware')

Traceback:
File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\core\handlers\base.py"" in get_response
1.                         response = callback(request, _callback_args, *_callback_kwargs)
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\views\generic\base.py"" in view
2.             return self.dispatch(request, _args, *_kwargs)
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\views\generic\base.py"" in dispatch
3.         return handler(request, _args, *_kwargs)
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\views\generic\dates.py"" in get
4.         return self.render_to_response(context)
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\views\generic\base.py"" in render_to_response
5.             template = self.get_template_names(),
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\zinnia\views\mixins\templates.py"" in get_template_names
6.         year = self.get_archive_part_value('year')
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\zinnia\views\mixins\templates.py"" in get_archive_part_value
7.             self.today = timezone.localtime(timezone.now()).date()
   File ""C:\Users\coderam\Envs\givity\lib\site-packages\django\utils\timezone.py"" in localtime
8.     value = value.astimezone(timezone)

Exception Type: ValueError at /blog/
Exception Value: astimezone() cannot be applied to a naive datetime
"
13925,Fantomas42,django-blog-zinnia,5,closed,232,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/232/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/232,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}]",I can't migrate zinnia migrations,"I'm back.. trying to install zinnia again.
Now I'm using postgresql as a db backend, and to start, I run:
`manage.py migrate zinnia`
Fist error I get is in 0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca.py
and I managed to pass it by reversing two lines:

```
    # Changing field 'Category.slug'
    db.alter_column('zinnia_category', 'slug', self.gf('django.db.models.fields.SlugField')(unique=True, max_length=255))

    # Adding unique constraint on 'Category', fields ['slug']
    db.create_unique('zinnia_category', ['slug'])
```

If create_unique gets before alter_column will work, if not will get an error.
I don't have the specific error now, but was something like 'already exists'.

The next error I get is in 0009_change_mptt_field.

```
Running migrations for zinnia:
 - Migrating forwards to 0010_publication_dates_unrequired.
 > zinnia:0009_change_mptt_field
FATAL ERROR - The following SQL query failed: ALTER TABLE ""zinnia_category"" ADD CONSTRAINT ""parent_id_refs_id_31e754fd"" FOREIGN KEY (""parent_id"") REFERENCES ""zinnia_categ
ory"" (""id"") DEFERRABLE INITIALLY DEFERRED;
The error was: constraint ""parent_id_refs_id_31e754fd"" for relation ""zinnia_category"" already exists

Error in migration: zinnia:0009_change_mptt_field
DatabaseError: constraint ""parent_id_refs_id_31e754fd"" for relation ""zinnia_category"" already exists
```

I'm using django 1.5, I tested with django 1.4.3 and gets same error.
I remember testing zinnia long time ago and I didn't have this problems, but by that time I was testing with sqlite, now I'm testing with postgresql.
The version of south I'm using is 0.7.4.

I don't know exactly what the problem is with this alter_column command, but it doesn't work in my environment.
"
13942,Fantomas42,django-blog-zinnia,5,closed,215,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/215/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/215,"[{""default"": false, ""name"": ""Tests needed"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests%20needed"", ""color"": ""02d7e1"", ""node_id"": ""MDU6TGFiZWwxNTE4Nzg2Mg=="", ""id"": 15187862}]",TypeError: Author cannot proxy the swapped model 'app.User',"Using Django 1.5, I have implemented a custom user model. Installing Zinnia then triggers the following exception:

```
TypeError: Author cannot proxy the swapped model 'app.User'
```

I also found this is a known limitation of Django: https://docs.djangoproject.com/en/dev/topics/auth/customizing/#custom-users-and-proxy-models. 

Any resolution would be appreciated.
"
13960,Fantomas42,django-blog-zinnia,5,closed,197,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/197/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/197,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",South Migration doesn't work,"I use a fresh empty MariaDB database and I did remove all old migrations before. After doing a syncdb and a `./manage.py schemamigration --initial zinnia`, I get a

```
./manage.py migrate zinnia
Running migrations for zinnia:
 - Migrating forwards to 0001_initial.
 > zinnia:0001_initial
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/django/core/management/__init__.py"", line 443, in execute_from_command_line
    utility.execute()
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/django/core/management/__init__.py"", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/django/core/management/base.py"", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/django/core/management/base.py"", line 232, in execute
    output = self.handle(*args, **options)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/management/commands/migrate.py"", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/__init__.py"", line 213, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 310, in migrate_many
    result = self.migrate(migration, database)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 133, in migrate
    result = self.run(migration)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 106, in run
    dry_run.run_migration(migration)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 191, in run_migration
    self._run_migration(migration)
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 178, in _run_migration
    raise exceptions.FailedDryRun(migration, sys.exc_info())
south.exceptions.FailedDryRun:  ! Error found during dry run of '0001_initial'! Aborting.
Traceback (most recent call last):
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 175, in _run_migration
    migration_function()
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/migration/migrators.py"", line 57, in <lambda>
    return (lambda: direction(orm))
  File ""/home/django/.virtualenvs/blog/src/django-blog-zinnia/zinnia/migrations/0001_initial.py"", line 73, in forwards
    ('author', models.ForeignKey(orm['zinnia.author'], null=False))
  File ""/home/django/.virtualenvs/blog/lib/python2.7/site-packages/south/orm.py"", line 169, in __getitem__
    raise KeyError(""The model '%s' from the app '%s' is not available in this migration."" % (model, app))
KeyError: ""The model 'author' from the app 'zinnia' is not available in this migration.""
```

when I try to `./manage.py migrate`
"
13963,Fantomas42,django-blog-zinnia,5,closed,194,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/194/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/194,"[{""default"": false, ""name"": ""Tests"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests"", ""color"": ""b50000"", ""node_id"": ""MDU6TGFiZWw1Mzc0NA=="", ""id"": 53744}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",tests failing with python 2.7,"While we are in the cleaning of python-2.7-related failiures (thank you, again!), I have this as well:

```
matej@wycliff: zinnia_blog$ python manage.py test
Creating test database for alias 'default'...
....F............................................................................................................................................................................................................................................................................F......EFF...F..........F......EFF......F.........F...EFF...F...............................................................................................................................................................................................................................
======================================================================
ERROR: test_middleware_disabled (django.contrib.messages.tests.cookie.CookieTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 235, in test_middleware_disabled
    data, follow=True)
  File ""/home/matej/.local/lib/python2.7/site-packages/unittest2/case.py"", line 475, in assertRaises
    callableObj(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 262, in post
    return self.request(**r)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 381, in request
    response = self.handler(environ)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 84, in __call__
    response = self.get_response(request)
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""/usr/lib/python2.7/site-packages/django/utils/decorators.py"", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/views/defaults.py"", line 33, in server_error
    return http.HttpResponseServerError(t.render(Context({})))
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 140, in render
    return self._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/defaulttags.py"", line 427, in render
    raise e
NoReverseMatch: Reverse for 'zinnia_entry_archive_index' with arguments '()' and keyword arguments '{}' not found.

======================================================================
ERROR: test_middleware_disabled (django.contrib.messages.tests.fallback.FallbackTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 235, in test_middleware_disabled
    data, follow=True)
  File ""/home/matej/.local/lib/python2.7/site-packages/unittest2/case.py"", line 475, in assertRaises
    callableObj(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 262, in post
    return self.request(**r)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 381, in request
    response = self.handler(environ)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 84, in __call__
    response = self.get_response(request)
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""/usr/lib/python2.7/site-packages/django/utils/decorators.py"", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/views/defaults.py"", line 33, in server_error
    return http.HttpResponseServerError(t.render(Context({})))
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 140, in render
    return self._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/defaulttags.py"", line 427, in render
    raise e
NoReverseMatch: Reverse for 'zinnia_entry_archive_index' with arguments '()' and keyword arguments '{}' not found.

======================================================================
ERROR: test_middleware_disabled (django.contrib.messages.tests.session.SessionTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 235, in test_middleware_disabled
    data, follow=True)
  File ""/home/matej/.local/lib/python2.7/site-packages/unittest2/case.py"", line 475, in assertRaises
    callableObj(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 262, in post
    return self.request(**r)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 381, in request
    response = self.handler(environ)
  File ""/usr/lib/python2.7/site-packages/django/test/client.py"", line 84, in __call__
    response = self.get_response(request)
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 179, in get_response
    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""/usr/lib/python2.7/site-packages/django/core/handlers/base.py"", line 228, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""/usr/lib/python2.7/site-packages/django/utils/decorators.py"", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/views/defaults.py"", line 33, in server_error
    return http.HttpResponseServerError(t.render(Context({})))
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 140, in render
    return self._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/loader_tags.py"", line 123, in render
    return compiled_parent._render(context)
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 62, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/base.py"", line 823, in render
    bit = self.render_node(node, context)
  File ""/usr/lib/python2.7/site-packages/django/template/debug.py"", line 74, in render_node
    return node.render(context)
  File ""/usr/lib/python2.7/site-packages/django/template/defaulttags.py"", line 427, in render
    raise e
NoReverseMatch: Reverse for 'zinnia_entry_archive_index' with arguments '()' and keyword arguments '{}' not found.

======================================================================
FAIL: test_message_attrs (django.contrib.auth.tests.context_processors.AuthContextProcessorTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/contrib/auth/tests/context_processors.py"", line 58, in test_message_attrs
    self.assertContains(response, ""Message 1"")
  File ""/usr/lib/python2.7/site-packages/django/test/testcases.py"", line 637, in assertContains
    msg_prefix + ""Couldn't find '%s' in response"" % text)
AssertionError: False is not True : Couldn't find 'Message 1' in response

======================================================================
FAIL: test_full_request_response_cycle (django.contrib.messages.tests.cookie.CookieTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 162, in test_full_request_response_cycle
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_middleware_disabled_fail_silently (django.contrib.messages.tests.cookie.CookieTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 262, in test_middleware_disabled_fail_silently
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_multiple_posts (django.contrib.messages.tests.cookie.CookieTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 207, in test_multiple_posts
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_with_template_response (django.contrib.messages.tests.cookie.CookieTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 180, in test_with_template_response
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_full_request_response_cycle (django.contrib.messages.tests.fallback.FallbackTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 162, in test_full_request_response_cycle
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_middleware_disabled_fail_silently (django.contrib.messages.tests.fallback.FallbackTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 262, in test_middleware_disabled_fail_silently
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_multiple_posts (django.contrib.messages.tests.fallback.FallbackTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 207, in test_multiple_posts
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_with_template_response (django.contrib.messages.tests.fallback.FallbackTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 180, in test_with_template_response
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_full_request_response_cycle (django.contrib.messages.tests.session.SessionTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 162, in test_full_request_response_cycle
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_middleware_disabled_fail_silently (django.contrib.messages.tests.session.SessionTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 262, in test_middleware_disabled_fail_silently
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_multiple_posts (django.contrib.messages.tests.session.SessionTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 207, in test_multiple_posts
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

======================================================================
FAIL: test_with_template_response (django.contrib.messages.tests.session.SessionTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/usr/lib/python2.7/site-packages/django/test/utils.py"", line 205, in inner
    return test_func(*args, **kwargs)
  File ""/usr/lib/python2.7/site-packages/django/contrib/messages/tests/base.py"", line 180, in test_with_template_response
    self.assertTrue('messages' in response.context)
AssertionError: False is not True

----------------------------------------------------------------------
Ran 557 tests in 20.231s

FAILED (failures=13, errors=3)
Destroying test database for alias 'default'...
matej@wycliff: zinnia_blog$ 
```

What more information you need for debugging?
"
13965,Fantomas42,django-blog-zinnia,5,closed,192,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/192/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/192,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",django-blog-zinnia trunk,"I am using the trunk version and it appears that I am the url call to `zinnia_entry_archive_month` breaks on the YEAR page whenever there's an entry in that month.

For instance, when I access http://127.0.0.1/webblogs/2012/

I get this template error -

```
Template error:
In template /Users/calvin/.virtualenvs/myproject/src/django-blog-zinnia/zinnia/templates/zinnia/entry_archive_year.html, error at line 20
   Reverse for 'zinnia_entry_archive_month' with arguments '(datetime.date(2012, 1, 1), u'12')' and keyword arguments '{}' not found.
   10 : 


   11 : {% block content-title %}


   12 : <h1>{% trans ""Archives"" %} {{ year }}</h1>


   13 : {% endblock %}


   14 : 


   15 : {% block content-related %}


   16 : <h2>{% trans ""Monthly archives"" %}</h2>


   17 : <ul>


   18 :   {% for date in date_list %}


   19 :   <li>


   20 :     <a href="" {% url 'zinnia_entry_archive_month' year date|date:""m"" %} "" rel=""archives"">{{ date|date:""YEAR_MONTH_FORMAT"" }}</a>


   21 :   </li>


   22 :   {% endfor %}


   23 : </ul>


   24 : {% endblock %}


   25 : 

Traceback:
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/core/handlers/base.py"" in get_response
  141.                     response = response.render()
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/response.py"" in render
  105.             self.content = self.rendered_content
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/response.py"" in rendered_content
  82.         content = template.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  140.             return self._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  124.         return compiled_parent._render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/test/utils.py"" in instrumented_test_render
  64.     return self.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  63.             result = block.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  63.             result = block.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/loader_tags.py"" in render
  63.             result = block.nodelist.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/base.py"" in render
  830.                 bit = self.render_node(node, context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/debug.py"" in render_node
  74.             return node.render(context)
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/defaulttags.py"" in render
  188.                         nodelist.append(node.render(context))
File ""/Users/calvin/.virtualenvs/myproject/src/django/django/template/defaulttags.py"" in render
  424.                         raise e

Exception Type: NoReverseMatch at /weblogs/2012/
Exception Value: Reverse for 'zinnia_entry_archive_month' with arguments '(datetime.date(2012, 1, 1), u'12')' and keyword arguments '{}' not found.
```
"
13971,Fantomas42,django-blog-zinnia,5,closed,186,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/186/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/186,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",entry.__dict__['title'] doesn't exist when using django-modeltranslation,"I bring this here because modeltranslation is the official-ish way of getting multilanguage entries with zinnia. This line: https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/comparison.py#L39 fails when modeltranslation is on. It raises `KeyError: 'title'`.

Changing this line to 

``` python

dataset[item] = ' '.join([unicode(getattr(item, field) for field in self.fields])

```

is both cleaner, and it works.
"
13972,Fantomas42,django-blog-zinnia,5,closed,185,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/185/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/185,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",autocomplete use of jQuery is not coherent,"Compare

https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/static/zinnia/js/jquery.autocomplete.js

with

https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/templates/admin/zinnia/entry/autocomplete_tags.js

notice the first file uses the `jQuery` variable and the second one uses `$` directly, which may not be the same jQuery instance, depending on what different installed apps do.

I recommend using the

```
(function ($) {
...
})(jQuery)
```

pattern everywhere, it's what I did to fix my issue.

On a sidenote, for some reason I don't fathom, https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/templates/admin/zinnia/entry/wymeditor.js didn't present this problem until I made this fix on `autocomplete_tags.js`. From this moment it started throwing ""#Object doesn't have a .wymeditor method"" error, which was silenced by using the mentioned pattern in that file as well.

The funny thing is that wymeditor worked nevertheless.
"
13973,Fantomas42,django-blog-zinnia,5,closed,184,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/184/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/184,"[{""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Got a Exception when run zinnia:NoReverseMatch at /weblog/  ,"NoReverseMatch at /weblog/

u'admin' is not a registered namespace

some details are:

Error during template rendering

In template /root/Envs/yuetu_zinnia2/lib/python2.7/site-packages/zinnia/templates/zinnia/entry_list.html, error at line 50
u'admin' is not a registered namespace
49  <p class=""notice"">
50  <a href=""{% url 'admin:zinnia_entry_add' %}"">{% trans ""No entries yet."" %}</a>
51  </p>

Part of my setting.py 
INSTALLED_APPS = (
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.sites',
    'django.contrib.comments',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.contenttypes',
    'tagging',
    'mptt',
    'zinnia',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'zinnia.context_processors.version',
)

I run the python manage.py validate/syncdb/runserver with 0 errors.
but when I browse 127.0.0.1:8000/weblog    I  got that error above. I strictly followed the installation document. 

I've  tried twice with reinstall zinnia. Same error.  Please help me .
"
13977,Fantomas42,django-blog-zinnia,5,closed,180,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/180/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/180,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Error after adding variable ZINNIA_AUTO_CLOSE_COMMENTS_AFTER,"Hello, I began posting into my site without the variable ZINNIA_AUTO_CLOSE_COMMENTS_AFTER, and later I wanted add her into settings.py.

I added ZINNIA_AUTO_CLOSE_COMMENTS_AFTER = 10, and, when I try call list of Zinnia-entries (Zinnia->Entries) in Dashboard I get this result:

Error during template rendering
In template /usr/local/lib/python2.7/site-packages/django/contrib/admin/templates/admin/change_list.html, error at line 93
unsupported operand type(s) for -: 'datetime.datetime' and 'NoneType'

That is a traceback: http://pastebin.com/y5E58Ur6

I use Django-Blog-Zinnia in Django-CMS with cmsplugin_zinnia.
"
13980,Fantomas42,django-blog-zinnia,5,closed,177,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/177/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/177,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Recent entries emitted in random order,"Ok, well, perhaps not literally random, but not in the supposed order '-creation_date' either.  And this appears to be less to do with the template tag and more to do with the EntryPublishedManager as evidenced by this shell session.  Why is the Entry._meta.ordering ignored?

Used with Django:

``` python
./manage.py shell
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
(InteractiveConsole)
>>> from zinnia import __version__
>>> __version__
'0.11.2'
>>> from zinnia.models import Entry
>>> entries = Entry.published.all()[:5]
>>> for entry in entries:
...   print entry.creation_date
... 
2012-11-01 13:02:11+00:00
2012-10-17 13:42:35+00:00
2012-10-27 13:46:49+00:00
2012-10-19 13:55:47+00:00
2012-11-10 07:10:35+00:00
>>> entries = Entry.published.order_by('-creation_date')[:5]
>>> for entry in entries:
...   print entry.creation_date
... 
2012-11-11 02:37:27+00:00
2012-11-10 07:10:35+00:00
2012-11-01 13:02:11+00:00
2012-10-27 13:46:49+00:00
2012-10-19 13:55:47+00:00
```

Is this a bug or a feature?

If its a feature in the EntryPublishedManager, shouldn't the recent entries template tag explicitly use order_by('-creation_date')?  This is a genuine question as perhaps there are use-cases I am not aware of, but it seems to me that using the slice ([:5] in the example above) will yield rather unpredictable results.
"
13981,Fantomas42,django-blog-zinnia,5,closed,176,13,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/176/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/176,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",This error again!? Cannot resolve keyword 'entries' into field.,"`FieldError: Cannot resolve keyword 'entries' into field.`

I made sure I had the right changes to `site`, made sure I had a site set.

It works locally, but on my server I can't add any posts?!

```
 File ""/...../zinnia/managers.py"", line 35, in get_query_set
    entries__sites=Site.objects.get_current()
```

I can do this on my server

```
>>> from django.contrib.sites.models import Site
>>> Site.objects.get_current()
<Site: the name of me site!.org>
```

I verified tables are in the db

```
public | zinnia_category                  | table
public | zinnia_entry                     | table
public | zinnia_entry_authors             | table
public | zinnia_entry_categories          | table
public | zinnia_entry_related             | table
public | zinnia_entry_sites               | table
```

It's gotta be something silly im doing, I think....
"
13984,Fantomas42,django-blog-zinnia,5,closed,173,0,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/173/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/173,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Moderator"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Moderator"", ""color"": ""ff8503"", ""node_id"": ""MDU6TGFiZWwzNzYzNg=="", ""id"": 37636}]",Zinnia + Django CMS comments evade moderation,"Hi there,

I''ve (pip) installed the following:

cmsplugin-zinnia==0.3
django-blog-zinnia==0.11.2
django-cms==2.3.1
Django==1.4.1

Am sure that ZINNIA_AUTO_MODERATE_COMMENTS hasn't accidentally been set to True. But, I'm finding that comments go straight to public.. nothing special going on in my config so not sure what else to add to bug report o_0

_Doubtful; but the posts came from a wordpress migration if that provides any clues... ? Let me know what else I can provide._
"
13989,Fantomas42,django-blog-zinnia,5,closed,168,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/168/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/168,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Trackback on entry w/o authors,"Hi great blog maker!

Found this...

https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/views/trackback.py#L59

```
File ""virtualenv/lib/python2.5/site-packages/zinnia/views/trackback.py"", line 59, in post
    user = entry.authors.all()[0]

File ""virtualenv/lib/python2.5/site-packages/django/db/models/query.py"", line 207, in __getitem__
    return list(qs)[0]

IndexError: list index out of range
```

Should perhaps be `(qs[0] if qs else """")`

My trackbacks are failing because I don't put authors on everything.
"
14000,Fantomas42,django-blog-zinnia,5,closed,157,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/157/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/157,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]","Migration 0003 fails with zinnia_category_a951d5d6"" already exists","python manage.py syncdb --migrate fails stack trace below: 

L12 

```
       # Changing field 'Category.slug'
        db.alter_column('zinnia_category', 'slug', self.gf('django.db.models.fields.SlugField')(unique=True, max_length=255))

        # Adding unique constraint on 'Category', fields ['slug']
        db.create_unique('zinnia_category', ['slug'])
```

L17

```

Error in migration: zinnia:0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca
Traceback (most recent call last):
  File ""manage.py"", line 20, in <module>
    execute_from_command_line()
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/core/management/__init__.py"", line 443, in execute_from_command_line
    utility.execute()
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/core/management/__init__.py"", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/core/management/base.py"", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/core/management/base.py"", line 232, in execute
    output = self.handle(*args, **options)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/management/commands/migrate.py"", line 107, in handle
    ignore_ghosts = ignore_ghosts,
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/__init__.py"", line 219, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 310, in migrate_many
    result = self.migrate(migration, database)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 133, in migrate
    result = self.run(migration)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 107, in run
    return self.run_migration(migration)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 81, in run_migration
    migration_function()
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/migration/migrators.py"", line 57, in <lambda>
    return (lambda: direction(orm))
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/zinnia/migrations/0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca.py"", line 16, in forwards
    db.create_unique('zinnia_category', ['slug'])
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/db/generic.py"", line 46, in _cache_clear
    return func(self, table, *args, **opts)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/db/generic.py"", line 612, in create_unique
    cols,
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/south/db/generic.py"", line 264, in execute
    cursor.execute(sql, params)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/db/backends/util.py"", line 40, in execute
    return self.cursor.execute(sql, params)
  File ""/home/madteckhead/.virtualenvs/synergy/lib/python2.6/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 52, in execute
    return self.cursor.execute(query, args)
django.db.utils.DatabaseError: relation ""zinnia_category_a951d5d6"" already exists
```
"
14006,Fantomas42,django-blog-zinnia,5,closed,151,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/151/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/151,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}]",Missing file indicator.gif makes collectstatic fail,"`manage.py collectstatic` fails with latest Zinnia (0.11.1) because the file `static/zinnia/css/indicator.gif` doesn't exist, but it's referenced by `zinnia/css/jquery.autocomplete.css`. The image file should either be included or the reference removed from the _jquery.autocomplete.css_ file.

The _collectstatic_ error:

```
Post-processed 'zinnia/js/wymeditor/iframe/default/wymiframe.css' as 'zinnia/js/wymeditor/iframe/default/wymiframe.bb4ed9368fc1.css
Post-processed 'zinnia/js/wymeditor/skins/compact/skin.css' as 'zinnia/js/wymeditor/skins/compact/skin.85d1cb084ccc.css
Post-processed 'zinnia/js/wymeditor/skins/twopanels/skin.css' as 'zinnia/js/wymeditor/skins/twopanels/skin.5da884f15370.css
Post-processed 'zinnia/js/wymeditor/skins/silver/skin.css' as 'zinnia/js/wymeditor/skins/silver/skin.4af1f9844350.css
Post-processed 'zinnia/js/wymeditor/skins/default/skin.css' as 'zinnia/js/wymeditor/skins/default/skin.c8b6d612f048.css
Post-processed 'zinnia/js/wymeditor/skins/django/skin.css' as 'zinnia/js/wymeditor/skins/django/skin.9d60a4ec0a85.css
Post-processed 'zinnia/js/wymeditor/skins/minimal/skin.css' as 'zinnia/js/wymeditor/skins/minimal/skin.b24eafed148e.css
Post-processed 'zinnia/js/markitup/sets/restructuredtext/style.css' as 'zinnia/js/markitup/sets/restructuredtext/style.74b8b0b9b8cb.css
Post-processed 'zinnia/js/markitup/sets/textile/style.css' as 'zinnia/js/markitup/sets/textile/style.9f2378d6a65e.css
Post-processed 'zinnia/js/markitup/sets/markdown/style.css' as 'zinnia/js/markitup/sets/markdown/style.37549c9fd682.css
Post-processed 'zinnia/js/markitup/sets/html/style.css' as 'zinnia/js/markitup/sets/html/style.2b6de00f2260.css
Post-processed 'zinnia/js/markitup/skins/django/style.css' as 'zinnia/js/markitup/skins/django/style.cf6277a8533d.css
Post-processed 'admin/css/base.css' as 'admin/css/base.b11ab56ec487.css
Post-processed 'admin/css/forms.css' as 'admin/css/forms.526c46800ad7.css
Post-processed 'admin/css/widgets.css' as 'admin/css/widgets.3d88f960dfb5.css
Post-processed 'admin/css/dashboard.css' as 'admin/css/dashboard.7e0a4929eabe.css
Post-processed 'admin/css/changelists.css' as 'admin/css/changelists.c92d4e11bae4.css
Post-processed 'admin/css/ie.css' as 'admin/css/ie.80b276584663.css
Post-processed 'admin/css/rtl.css' as 'admin/css/rtl.480f8e879aef.css
Post-processed 'admin/css/login.css' as 'admin/css/login.e51e4c8d6400.css
Post-processed 'zinnia/css/screen.css' as 'zinnia/css/screen.9f30733dfc8d.css
Post-processed 'zinnia/css/print.css' as 'zinnia/css/print.7b685f0c4924.css
Traceback (most recent call last):
  File ""manage.py"", line 9, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 443, in execute_from_command_line
    utility.execute()
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/core/management/base.py"", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/core/management/base.py"", line 232, in execute
    output = self.handle(*args, **options)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/core/management/base.py"", line 371, in handle
    return self.handle_noargs(**options)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 163, in handle_noargs
    collected = self.collect()
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py"", line 120, in collect
    for original_path, processed_path, processed in processor:
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/storage.py"", line 226, in post_process
    content = pattern.sub(converter, content)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/storage.py"", line 167, in converter
    hashed_url = self.url(unquote(joined_result), force=True)
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/storage.py"", line 114, in url
    hashed_name = self.hashed_name(clean_name).replace('\\', '/')
  File ""/home/haplo/.virtualenvs/vestidia/local/lib/python2.7/site-packages/django/contrib/staticfiles/storage.py"", line 74, in hashed_name
    (clean_name, self))
ValueError: The file 'zinnia/css/indicator.gif' could not be found with <django.contrib.staticfiles.storage.CachedStaticFilesStorage object at 0x1c38210>.
```
"
14007,Fantomas42,django-blog-zinnia,5,closed,150,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/150/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/150,[],Docs/Example site throwing HTTP 500,"Hi,

Incase you didnt know already, http://www.django-blog-zinnia.com/ was throwing a 503 for most of yesterday (some dedibox page) and today is throwing just 500 errors (Apache error page)
"
14011,Fantomas42,django-blog-zinnia,5,closed,146,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/146/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/146,"[{""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",Customizing URLs,"I tried to follow the instructions here (I am proficient as a django developer)
http://django-blog-zinnia.com/documentation/how-to/rewriting_entry_url/

But I received an error:

`Error: One or more models did not validate:
zinnia.entry: 'entrywithnewurl_ptr' has a relation with model <class 'zinnia_foo.zinnia_foo.EntryWithNewUrl'>, which has either not been installed or is abstract.`

whenever I add `ZINNIA_ENTRY_BASE_MODEL = 'zinnia_foo.zinnia_foo.EntryWithNewUrl'` to my settings

I have this file in `zinnia_foo/zinnia_foo.py`:

```
from django.db import models
from zinnia.models import EntryAbstractClass

class EntryWithNewUrl(EntryAbstractClass):
    """"""Entry with '/blog/<id>/' URL""""""

    @models.permalink
    def get_absolute_url(self):
        return ('zinnia_entry_detail', (),
                {'pk': self.id})
```

I installed zinnia via pip and am putting my customizations in `zinnia_foo/`

Am I doing something wrong, or is the documentation out of date now?
## 

Actually, the above error doesn't come up if I delete `zinnia_foo/__init__.py`. But without a `__init__.py` I get an error when trying to setup my URLs like `url(r'^blog/', include('zinnia_foo.urls')),`.... `ImportError at /blog/
No module named zinnia_foo.urls`.
"
14013,Fantomas42,django-blog-zinnia,5,closed,144,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/144/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/144,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]","NoReverseMatch at /admin/zinnia/entry/, using MySQL UTF-8 database ","Hi,
I can add a new entry when use default DB under MySQL, but I need to save UTF-8 words so I create the database as following:
CREATE DATABASE mydb
  DEFAULT CHARACTER SET utf8
  DEFAULT COLLATE utf8_general_ci; 

After sending the a new entry, I caught the error NoReverseMatch at /admin/zinnia/entry/
Reverse for 'zinnia_entry_detail' with arguments '()' and keyword arguments '{'year': '2012', 'slug': u'', 'day': '01', 'month': '05'}' not found. I also name the slug, but the slug shows nothing in the error.

Thanks your help!

My urls.py:

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',

     url(r'^admin/doc/', include('django.contrib.admindocs.urls')), 

     url(r'^admin/', include(admin.site.urls)),

     url(r'^$', include('zinnia.urls.entries')),
     url(r'^search/', include('zinnia.urls.search')),
     url(r'^sitemap/', include('zinnia.urls.sitemap')),
     url(r'^trackback/', include('zinnia.urls.trackback')),
     url(r'^weblog/tags/', include('zinnia.urls.tags')),
     url(r'^weblog/feeds/', include('zinnia.urls.feeds')),
     url(r'^weblog/authors/', include('zinnia.urls.authors')),
     url(r'^weblog/categories/', include('zinnia.urls.categories')),
     url(r'^weblog/discussions/', include('zinnia.urls.discussions')),
     url(r'^weblog/', include('zinnia.urls.entries')),
     url(r'^weblog/', include('zinnia.urls.archives')),
     url(r'^weblog/', include('zinnia.urls.shortlink')),
     url(r'^weblog/', include('zinnia.urls.quick_entry')),
     url(r'^comments/', include('django.contrib.comments.urls')),


)
```
"
14022,Fantomas42,django-blog-zinnia,5,closed,135,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/135/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/135,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",Unable to migrate using latest south tip and Django 1.4c1,"I had to comment out this line in order to migrate all the way through:

https://github.com/Fantomas42/django-blog-zinnia/blob/master/zinnia/migrations/0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca.py#L16

Here was the traceback from the error:

Running migrations for zinnia:
- Migrating forwards to 0007_entry_featured.
  
  > zinnia:0002_auto__add_field_entry_pingback_enabled
  > zinnia:0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca
  > FATAL ERROR - The following SQL query failed: ALTER TABLE ""zinnia_category"" ADD CONSTRAINT ""zinnia_category_a951d5d6"" UNIQUE (""slug"")
  > The error was: relation ""zinnia_category_a951d5d6"" already exists
  
  ! Error found during real run of migration! Aborting.
  
  ! Since you have a database that does not support running
  ! schema-altering statements in transactions, we have had 
  ! to leave it in an interim state between migrations.

! You _might_ be able to recover with:   - no dry run output for alter_column() due to dynamic DDL, sorry
- no dry run output for alter_column() due to dynamic DDL, sorry
- no dry run output for delete_unique_column() due to dynamic DDL, sorry
- no dry run output for alter_column() due to dynamic DDL, sorry
- no dry run output for alter_column() due to dynamic DDL, sorry
  
  ! The South developers regret this has happened, and would
  ! like to gently persuade you to consider a slightly
  ! easier-to-deal-with DBMS (one that supports DDL transactions)
  ! NOTE: The error which caused the migration to fail is further up.
  Error in migration: zinnia:0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca
  Traceback (most recent call last):
  File ""./manage.py"", line 9, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/jaddison/projects/phonesite/src/django/django/core/management/**init**.py"", line 443, in execute_from_command_line
    utility.execute()
  File ""/Users/jaddison/projects/phonesite/src/django/django/core/management/**init**.py"", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/jaddison/projects/phonesite/src/django/django/core/management/base.py"", line 196, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/Users/jaddison/projects/phonesite/src/django/django/core/management/base.py"", line 232, in execute
    output = self.handle(_args, *_options)
  File ""/Users/jaddison/projects/phonesite/src/south/south/management/commands/migrate.py"", line 107, in handle
    ignore_ghosts = ignore_ghosts,
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/**init**.py"", line 219, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 235, in migrate_many
    result = migrator.**class**.migrate_many(migrator, target, migrations, database)
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 310, in migrate_many
    result = self.migrate(migration, database)
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 133, in migrate
    result = self.run(migration)
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 107, in run
    return self.run_migration(migration)
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 81, in run_migration
    migration_function()
  File ""/Users/jaddison/projects/phonesite/src/south/south/migration/migrators.py"", line 57, in <lambda>
    return (lambda: direction(orm))
  File ""/Users/jaddison/projects/phonesite/lib/python2.7/site-packages/zinnia/migrations/0003_auto__chg_field_category_title__chg_field_category_slug__add_unique_ca.py"", line 16, in forwards
    db.create_unique('zinnia_category', ['slug'])
  File ""/Users/jaddison/projects/phonesite/src/south/south/db/generic.py"", line 46, in _cache_clear
    return func(self, table, _args, *_opts)
  File ""/Users/jaddison/projects/phonesite/src/south/south/db/generic.py"", line 612, in create_unique
    cols,
  File ""/Users/jaddison/projects/phonesite/src/south/south/db/generic.py"", line 264, in execute
    cursor.execute(sql, params)
  File ""/Users/jaddison/projects/phonesite/src/django/django/db/backends/util.py"", line 40, in execute
    return self.cursor.execute(sql, params)
  File ""/Users/jaddison/projects/phonesite/src/django/django/db/backends/postgresql_psycopg2/base.py"", line 52, in execute
    return self.cursor.execute(query, args)
  django.db.utils.DatabaseError: relation ""zinnia_category_a951d5d6"" already exists
"
14029,Fantomas42,django-blog-zinnia,6,closed,128,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/128/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/128,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",photo uploads for blog posts,"I keep getting the following error when attempting to upload a photo:

""'FileSystemStorage' object has no attribute 'rindex'"" -- any ideas?

Tested on Django 1.4 alpha
"
14031,Fantomas42,django-blog-zinnia,6,closed,126,15,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/126/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/126,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Caught AssertionError while rendering: latest(),"I am getting the following message.  ""TemplateSyntaxError at /admin/zinnia/ - Caught AssertionError while rendering: latest() requires either a field_name parameter or 'get_latest_by' in the model""  Here is the Traceback: http://pastebin.com/2EqzPb84 I have installed Zinnia using ""pip install -e git:/..."", which means I have version 0.10. I get this error when I visit /en/admin/zinnia/. I tried executing ""Entry.published.latest()"" in the django shell and I get the same message.
"
14041,Fantomas42,django-blog-zinnia,6,closed,116,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/116/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/116,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Caught KeyError when save an Entry,"I got following error message when save an Entry

Caught KeyError while rendering: u'T\xedtulo'
Request Method: GET
Request URL:    http://192.168.233.129:8888/admin/zinnia/entry/
Django Version: 1.3
Exception Type: TemplateSyntaxError
Exception Value:  
Caught KeyError while rendering: u'T\xedtulo'
Exception Location: /usr/local/lib/python2.7/dist-packages/django/utils/functional.py in **mod**, line 227

....

and the same when try to view a newly created entry getting : 

TemplateSyntaxError at /not/2011/11/21/titulo/
Caught KeyError while rendering: u'autor'
Request Method: GET
Request URL:    http://192.168.233.129:8888/not/2011/11/21/titulo/
Django Version: 1.3
Exception Type: TemplateSyntaxError
Exception Value:  
Caught KeyError while rendering: u'autor'
Exception Location: /usr/local/lib/python2.7/dist-packages/django/templatetags/i18n.py in render, line 118
Python Executable:  /usr/bin/python
Python Version: 2.7.1

It seems to be related to encoding but I can't find a solution. Please,help !! :)
"
14045,Fantomas42,django-blog-zinnia,6,closed,112,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/112/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/112,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""MPTT"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/MPTT"", ""color"": ""08d6ff"", ""node_id"": ""MDU6TGFiZWw1NjIwNw=="", ""id"": 56207}]","question about django.db.models import F, MAX","When  I run python manage.py runserver one error ""cannot import name F"" which is related with mptt's managers.py is shown to me. Then I checked managers.py I found this F is in django.db.models. But when I checked django.db.models in django's file I couldn't find it. What's wrong with it? Thanks
"
14048,Fantomas42,django-blog-zinnia,6,closed,109,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/109/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/109,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Error after django-blog-zinnia installation,"Before django-blog-zinnia installation, python manage.py syncdb is ok.

I try ""pip and easy_install method"" . It's same result.

In virtualenv , I install Django1.3, django-mptt, django tagging, BeautifulSoup.

After django-blog-zinnia installation:

python manage.py syncdb
Traceback (most recent call last):
  File ""manage.py"", line 11, in <module>
    execute_manager(settings)
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/**init**.py"", line 438, in execute_manager
    utility.execute()
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/**init**.py"", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/base.py"", line 191, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/base.py"", line 220, in execute
    output = self.handle(_args, *_options)
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/base.py"", line 351, in handle
    return self.handle_noargs(**options)
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/core/management/commands/syncdb.py"", line 56, in handle_noargs
    cursor = connection.cursor()
  File ""/home/sam/virtual_env/zinnia/lib/python2.7/site-packages/django/db/backends/dummy/base.py"", line 15, in complain
    raise ImproperlyConfigured(""You haven't set the database ENGINE setting yet."")
django.core.exceptions.ImproperlyConfigured: You haven't set the database ENGINE setting yet.
"
14050,Fantomas42,django-blog-zinnia,6,closed,107,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/107/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/107,"[{""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}, {""default"": false, ""name"": ""Documentation"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Documentation"", ""color"": ""8800ff"", ""node_id"": ""MDU6TGFiZWw1Mzc0Mw=="", ""id"": 53743}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Using 'zinnia.plugins.placeholder.EntryPlaceholder' as Entry Base Model causes DatabaseError,"When using ''zinnia.plugins.placeholder.EntryPlaceholder', as ZINNIA_ENTRY_BASE_MODEL as suggested [in the configuration docs](http://django-blog-zinnia.com/documentation/configuration/#django-cms), a DatabaseError is generated when visiting http://localhost:8000/admin/zinnia/. (0.8.1 release).

Examination reveals that the column zinnia_entry.content_placeholder_id does not get created by either the `syncdb` or `migrate` commands.

Creating the column manually (`ALTER TABLE zinnia_entry ADD COLUMN content_placeholder_id integer` on PostgreSQL) is an interim fix.
"
14057,Fantomas42,django-blog-zinnia,6,closed,100,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/100/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/100,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}, {""default"": false, ""name"": ""Wont fix"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Wont%20fix"", ""color"": ""e10c02"", ""node_id"": ""MDU6TGFiZWw5NzAyNQ=="", ""id"": 97025}]",Placeholder issue,"Im using with django-cms and have noticed a small error.

I themed and wrote my own templates for the blog, they worked fine for the admin user. however when another user accessed the pages, there was a rendering saying ""add plugins"" then gave a list of plugins etc.

I have reverted back to the stock templates supplied with zinnia and the issue is still the same.

This is what I see when I access the blog as a non admin (normal user)

http://ompldr.org/vOW5qeQ

Im sure its something simple, but i cant figure out what,

Thanks :)
"
14063,Fantomas42,django-blog-zinnia,6,closed,94,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/94/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/94,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",Encoding error on save,"When I save a blog entry in the admin interface I get the following message in my log file:

Exception in thread Thread-3:
Traceback (most recent call last):
  File ""C:\prg\prg\Python27\Lib\threading.py"", line 532, in **bootstrap_inner
    self.run()
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\ping.py"", line 99, in r
un
    external_urls_pingable = self.find_pingback_urls(external_urls)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\ping.py"", line 140, in
find_pingback_urls
    self.find_pingback_href(page.read())
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\ping.py"", line 125, in
find_pingback_href
    soup = BeautifulSoup(content)
  File ""c:\src\projects\goughmap\gdjango\BeautifulSoup.py"", line 1519, in __init**
    BeautifulStoneSoup.**init**(self, _args, *_kwargs)
  File ""c:\src\projects\goughmap\gdjango\BeautifulSoup.py"", line 1144, in **init**
    self._feed(isHTML=isHTML)
  File ""c:\src\projects\goughmap\gdjango\BeautifulSoup.py"", line 1186, in _feed
    SGMLParser.feed(self, markup)
  File ""C:\prg\prg\Python27\Lib\sgmllib.py"", line 104, in feed
    self.goahead(0)
  File ""C:\prg\prg\Python27\Lib\sgmllib.py"", line 143, in goahead
    k = self.parse_endtag(i)
  File ""C:\prg\prg\Python27\Lib\sgmllib.py"", line 320, in parse_endtag
    self.finish_endtag(tag)
  File ""C:\prg\prg\Python27\Lib\sgmllib.py"", line 358, in finish_endtag
    method = getattr(self, 'end_' + tag)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 5-8: ordinal not in range(128)

Why do I get this error? Is this a bug?

Thanks,

GL
"
14064,Fantomas42,django-blog-zinnia,6,closed,93,11,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/93/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/93,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",wp2zinnia fails on comments,"When I try to import a Wordpress XML (1.1) with wp2xinnia, import_comments() crashes while trying to read the comment_type.

'''
Traceback (most recent call last):
  File ""manage.py"", line 11, in <module>
    execute_manager(settings)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django\core\management__init__.py"", line 438, in execute_manager
    utility.execute()
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django\core\management__init__.py"", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django\core\management\base.py"", line 191, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django\core\management\base.py"", line 220, in execute
    output = self.handle(_args, *_options)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django\core\management\base.py"", line 322, in handle
    label_output = self.handle_label(label, **options)
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\management\commands\wp2
zinnia.py"", line 95, in handle_label
    self.import_entries(tree.findall('channel/item'))
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\management\commands\wp2
zinnia.py"", line 279, in import_entries
    '{%s}comment/' % WP_NS))
  File ""c:\src\projects\goughmap\env\dj1.2\lib\site-packages\django_blog_zinnia-0.9.dev-py2.7.egg\zinnia\management\commands\wp2
zinnia.py"", line 291, in import_comments
    '{%s}comment_type' % WP_NS).text == 'pingback'
AttributeError: 'NoneType' object has no attribute 'text'
'''

I have zinnia 0.9 installed.

The problem seems to be that comment_nodes is the list of all the elements under a particular comment rather than the list of all comments under the item. This explains why comment_type is not found as it tries to find it under wp:comment_id.
"
14070,Fantomas42,django-blog-zinnia,6,closed,87,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/87/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/87,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}, {""default"": false, ""name"": ""Tagging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tagging"", ""color"": ""0b02e1"", ""node_id"": ""MDU6TGFiZWwxMDg5ODM="", ""id"": 108983}]",Tag clouds leak across sites,"Because the tag cloud generation is done by the django-tagging functions, it is unaware of an entry's sites attribute, and so the tag cloud shows tags and counts for all sites.

I realize this isn't directly your bug, but you kind of expect something that is designed to work multi-site to fully isolate them everywhere.

robert.
"
14082,Fantomas42,django-blog-zinnia,6,closed,75,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/75/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/75,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]",no attribute get_ancestors when installed under django-cms,"I installed django-cms and it seemed OK. Added Zinnia, installed with easy_install and syncdb fails. Here is the end of the traceback.
  File ""/usr/local/lib/python2.6/dist-packages/publisher/mptt_support.py"", line 141, in install_mptt
    attrs[method_name] = getattr(mptt_models, method_name)
AttributeError: 'module' object has no attribute 'get_ancestors'
"
14094,Fantomas42,django-blog-zinnia,6,closed,63,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/63/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/63,"[{""default"": false, ""name"": ""Packaging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Packaging"", ""color"": ""e80598"", ""node_id"": ""MDU6TGFiZWw0NjY1Mg=="", ""id"": 46652}, {""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",0.7 release doesn't work,"Hi,

I tried installing the 0.7 release in two different ways:

```
pip install django-blog-zinnia==0.7
```

and

```
pip install https://github.com/Fantomas42/django-blog-zinnia/zipball/v0.7
```

In both cases I was getting errors when trying to run Django commands like:

```
File ""/home/brian/.virtualenvs/straus/lib/python2.6/site-packages/zinnia/models.py"", line 214, in <module>
for attr in dir(Category.MPTTMeta)
AttributeError: type object 'Category' has no attribute 'MPTTMeta'
```

There was another problem as well which is that the django_xmlrpc dependency wasn't being included and had to be manually installed (now fixed I see)

Installing to the latest commit resolved the crash. You may want to bump your version number to 0.8a for example so that `pip freeze` won't report a package version that isn't working properly.
"
14095,Fantomas42,django-blog-zinnia,6,closed,62,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/62/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/62,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",NoReverseMatch error-new install,"Hi, installed zinnia cebfe88 with django 1.3 beta1 and mptt 0.4.2
Cannot post a comment. Have one category and one entry. 
I've tried zinnia 0.7, and various django and mptt combos without success.
The error is a template syntax error while rendering reverse for 'django.contrib.comments.views.comments.post_comment' with args() and keyword args {} not found
Any ideas?
I am incorporating zinnia into a production site. Not using django cms. 
Thanks, john
"
14103,Fantomas42,django-blog-zinnia,6,closed,54,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/54/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/54,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Error: errors happened while running xgettext  When I django-admin.py makemessages -l,"F:\Python27\Lib\site-packages\django-blog-zinnia\zinnia>django-admin.py makemessages -l
 km
processing language km
Error: errors happened while running xgettext on **init**.py
'xgettext' is not recognized as an internal or external command,
operable program or batch file.

How to fixed this problems

thanks
"
14104,Fantomas42,django-blog-zinnia,6,closed,53,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/53/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/53,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Error: errors happened while running xgettext  When I django-admin.py makemessages -l,"F:\Python27\Lib\site-packages\django-blog-zinnia\zinnia>django-admin.py makemessages -l
 km
processing language km
Error: errors happened while running xgettext on **init**.py
'xgettext' is not recognized as an internal or external command,
operable program or batch file.

How to fixed this problems

thanks
"
14106,Fantomas42,django-blog-zinnia,6,closed,51,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/51/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/51,"[{""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",python manage.py wp2zinnia got error message BUT CAN python manage.py zinnia2wp > export.xml ,"python manage.py wp2zinnia wordpress.2010-12-05.xml

> Starting migration from Wordpress to Zinnia 0.7:
> Traceback (most recent call last):
>   File ""manage.py"", line 11, in <module>
>     execute_manager(settings)
>   File ""F:\Python27\lib\site-packages\django\core\management__init__.py"", line 438, in
>  execute_manager
>     utility.execute()
>   File ""F:\Python27\lib\site-packages\django\core\management__init__.py"", line 379, in
>  execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)
>   File ""F:\Python27\lib\site-packages\django\core\management\base.py"", line 191, in run
> _from_argv
>     self.execute(_args, *_options.__dict__)
>   File ""F:\Python27\lib\site-packages\django\core\management\base.py"", line 220, in exe
> cute
>     output = self.handle(_args, *_options)
>   File ""F:\Python27\lib\site-packages\django\core\management\base.py"", line 322, in han
> dle
>     label_output = self.handle_label(label, **options)
>   File ""F:\Python27\lib\site-packages\django_blog_zinnia-0.7-py2.7.egg\zinnia\managemen
> t\commands\wp2zinnia.py"", line 75, in handle_label
>     tree = ET.parse(wxr_file)
>   File ""F:\Python27\lib\xml\etree\ElementTree.py"", line 1176, in parse
>     tree.parse(source, parser)
>   File ""F:\Python27\lib\xml\etree\ElementTree.py"", line 653, in parse
>     parser.feed(data)
>   File ""F:\Python27\lib\xml\etree\ElementTree.py"", line 1623, in feed
>     self._raiseerror(v)
>   File ""F:\Python27\lib\xml\etree\ElementTree.py"", line 1487, in _raiseerror
>     raise err
> xml.etree.ElementTree.ParseError: unbound prefix: line 62, column 1

How Can I Fix?

Thanks
"
14107,Fantomas42,django-blog-zinnia,6,closed,50,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/50/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/50,"[{""default"": false, ""name"": ""Admin"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Admin"", ""color"": ""2af786"", ""node_id"": ""MDU6TGFiZWw1MDA2OQ=="", ""id"": 50069}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",FieldError: Cannot resolve keyword 'entry' into field. ,"The blog is running all good but when I change debug to False I'm getting this error when I try to view all posts(on admin).

 File ""/home/kleverson/webapps/bcec/lib/python2.6/django/db/models/sql/query.py"", line 1026, in add_filter
   negate=negate, process_extras=process_extras)

 File ""/home/kleverson/webapps/bcec/lib/python2.6/django/db/models/sql/query.py"", line 1191, in setup_joins
   ""Choices are: %s"" % (name, "", "".join(names)))

FieldError: Cannot resolve keyword 'entry' into field. Choices are: comment, domain, id, name

Any ideas? I'm lost on this one.
"
14109,Fantomas42,django-blog-zinnia,6,closed,48,3,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/48/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/48,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",When Added entry I got NoReverseMatch at /admin/zinnia/entry/add/,"(Djano-cms+django-blog-zinnia)

After I added category 
I go to added entry >>>> click button SAVE 

I got the message error.

NoReverseMatch at /admin/zinnia/entry/add/

Reverse for 'zinnia_entry_detail' with arguments '()' and keyword arguments '{'year': '2010', 'slug': u'lesson1', 'day': '14', 'month': '12'}' not found.

Request Method:     POST
Request URL:    http://127.0.0.1:8000/admin/zinnia/entry/add/
Django Version:     1.2.3
Exception Type:     NoReverseMatch
Exception Value:  
Reverse for 'zinnia_entry_detail' with arguments '()' and keyword arguments '{'year': '2010', 'slug': u'lesson1', 'day': '14', 'month': '12'}' not found.

Exception Location:     F:\Python27\lib\site-packages\django_cms-2.1.0.beta3-py2.7.egg\cms\models__init__.py in new_reverse, line 63
Python Executable:  F:\Python27\python.exe
Python Version:     2.7.0

Please Help me to solve this problem !
thanks
"
14110,Fantomas42,django-blog-zinnia,6,closed,47,5,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/47/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/47,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Django-cms AND django-blog-zinnia plugin,"I have to tried many time to install the blog plug in to django-cms but all the time unsuccessful.(i am using django 1.2.3 and python 2.7)
This is my setting.py
https://github.com/pykhmer/pykhmerWEB/blob/master/settings.py
or whole here (git@github.com:pykhmer/pykhmerWEB.git)
But when I run: 
   python manage.py syncdb ==>Okay [no error message]
   python manage.py server ==>Okay [no error message]
   python manage.py migrate --fake ==>Okay [no error message]
And I have tried comment south or uncomment south.
But when go to django-cms admin
and add the category
   or add entry
## I got the error messge

Request Method:     GET
Request URL:    http://127.0.0.1:8000/admin/zinnia/category/
Django Version:     1.2.3
Exception Type:     DatabaseError
Exception Value:    

no such table: zinnia_category

Exception Location:     F:\Python27\lib\site-packages\django\db\backends\sqlite3\base.py in execute, line 200
Python Executable:  F:\Python27\python.exe
Python Version:     2.7.0
.....................

What is the problems here?How can I fixed it?

Thanks.
"
14121,Fantomas42,django-blog-zinnia,6,closed,36,12,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/36/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/36,"[{""default"": false, ""name"": ""MPTT"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/MPTT"", ""color"": ""08d6ff"", ""node_id"": ""MDU6TGFiZWw1NjIwNw=="", ""id"": 56207}]",AttributeError: type object 'Category' has no attribute 'MPTTMeta',"Hi

I am retrieving the following stack trace after following the install instructions:

Traceback (most recent call last):
  File ""/virtualenvs/cmsscope/bin/django-admin.py"", line 5, in <module>
    management.execute_from_command_line()
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/**init**.py"", line 429, in execute_from_command_line
    utility.execute()
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/**init**.py"", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/base.py"", line 191, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/base.py"", line 220, in execute
    output = self.handle(_args, *_options)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/base.py"", line 351, in handle
    return self.handle_noargs(**options)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/core/management/commands/shell.py"", line 18, in handle_noargs
    loaded_models = get_models()
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/db/models/loading.py"", line 167, in get_models
    self._populate()
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/db/models/loading.py"", line 61, in _populate
    self.load_app(app_name, True)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/db/models/loading.py"", line 78, in load_app
    models = import_module('.models', app_name)
  File ""/virtualenvs/cmsscope/lib/python2.6/site-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""/virtualenvs/cmsscope/src/django-blog-zinnia/zinnia/models.py"", line 253, in <module>
    for attr in dir(Category.MPTTMeta)
AttributeError: type object 'Category' has no attribute 'MPTTMeta'
"
14122,Fantomas42,django-blog-zinnia,6,closed,35,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/35/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/35,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",missing _ import,"In django_blog_zinnia-0.6-py2.6.egg/zinnia/views/search.py there is a missing import for the lazy translation

so lines 16 and 20 cause a fatal error if searching the blog for a string like ""_"" or pattern that is not valid or too short.

Adding this import solves the problem:
from django.utils.translation import ugettext_lazy as _

Regards,
Rok
"
14124,Fantomas42,django-blog-zinnia,6,closed,33,6,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/33/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/33,"[{""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}, {""default"": false, ""name"": ""Tests"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Tests"", ""color"": ""b50000"", ""node_id"": ""MDU6TGFiZWw1Mzc0NA=="", ""id"": 53744}]","django_xmlrpc not required to use blog, but required to run tests","I tried running all tests after installing zinna, and I got this error:

ImportError: No module named django_xmlrpc.decorators

Mind you it doesn't just fail, it prevents me from running my other tests. Is there a way you could make it not run those tests if I don't have xmlrpc in my installed apps, perhaps?
"
14128,Fantomas42,django-blog-zinnia,7,closed,29,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/29/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/29,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}, {""default"": false, ""name"": ""MPTT"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/MPTT"", ""color"": ""08d6ff"", ""node_id"": ""MDU6TGFiZWw1NjIwNw=="", ""id"": 56207}, {""default"": false, ""name"": ""Packaging"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Packaging"", ""color"": ""e80598"", ""node_id"": ""MDU6TGFiZWw0NjY1Mg=="", ""id"": 46652}, {""default"": false, ""name"": ""Perimeter"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Perimeter"", ""color"": ""fffb08"", ""node_id"": ""MDU6TGFiZWw1MDA3Mw=="", ""id"": 50073}]","which version of django-mptt, the latest just wont work .. "," File ""/mnt/hgfs/Projects/.virenv/cats/lib/python2.5/site-packages/django/utils/importlib.py"", line 35, in import_module
    **import**(name)
  File ""/mnt/hgfs/Projects/.virenv/cats/src/django-blog-zinnia/zinnia/models.py"", line 204, in <module>
    mptt.register(Category, order_insertion_by=['title',])
AttributeError: 'module' object has no attribute 'register'
"
14129,Fantomas42,django-blog-zinnia,7,closed,28,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/28/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/28,"[{""default"": false, ""name"": ""Buildout"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Buildout"", ""color"": ""bd4504"", ""node_id"": ""MDU6TGFiZWw1MDIxNA=="", ""id"": 50214}, {""default"": false, ""name"": ""Suggestion"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Suggestion"", ""color"": ""30148c"", ""node_id"": ""MDU6TGFiZWw0MDI5Mw=="", ""id"": 40293}]",buildout problem --Can't find Django settings file!,"in  buildout, bin/test results in settings not found error.
Can't find Django settings file!
"
14138,Fantomas42,django-blog-zinnia,7,closed,19,1,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/19/comments,https://github.com/Fantomas42/django-blog-zinnia/pull/19,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}]",Patch to fix unicode casting error with postgres 8.4 and django 1.2.2,"Without this fix, I get this error when trying to run zinnia:

```
Template error

In template <my-virtualenv>/site-packages/django_blog_zinnia-0.6-py2.7.egg/zinnia/templates/zinnia/tags/recent_comments.html, error at line 4
Caught DatabaseError while rendering: operator does not exist: text = integer LINE 1: ...comment_id"") WHERE (""django_comments"".""object_pk"" IN (SELECT... ^ HINT: No operator matches the given name and argument type(s). You might need to add explicit type casts.
```

Some research showed this error to be related to this ticket: http://code.djangoproject.com/ticket/8554 . So I converted the entry pks using smart_unicode, and bam everything worked.
"
14143,Fantomas42,django-blog-zinnia,7,closed,14,2,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/14/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/14,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Database"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Database"", ""color"": ""a858ba"", ""node_id"": ""MDU6TGFiZWw0NTQzNg=="", ""id"": 45436}]",postgresql error in get_popular_entries,"In get_popular_entries there is a sql query on django_comments with `is_public = 1` in the where condition.  With postgres is_public is a boolean and not an integer, so comparison to an integer raises an exception.

Screenshot from Django error page:
http://k40.nfshost.com/skitch/zinnia-postgres-error-20100824-180144.png
"
14152,Fantomas42,django-blog-zinnia,7,closed,5,14,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/5/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/5,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Improvement"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Improvement"", ""color"": ""8ac728"", ""node_id"": ""MDU6TGFiZWwzNTA0Mg=="", ""id"": 35042}]",unsupported locale setting,"Just added zinnia to my django-cms. When trying the /weblog/ url it fails with the below debug information. This is on Windows 7.

TemplateSyntaxError at /weblog/

Caught Error while rendering: unsupported locale setting

Request Method:     GET
Request URL:    http://127.0.0.1:8000/weblog/
Django Version:     1.2.1
Exception Type:     TemplateSyntaxError
Exception Value:    

Caught Error while rendering: unsupported locale setting

Exception Location:     C:\dropbox\Dev\virtenvs\redmule\lib\locale.py in setlocale, line 513
Python Executable:  C:\dropbox\Dev\virtenvs\redmule\Scripts\python.exe
Python Version:     2.6.4
Python Path:    ['C:\dropbox\Dev\stable', 'C:\dropbox\Dev\stable\redmule', 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\distribute-0.6.10-py2.6.egg', 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\pip-0.6.3-py2.6.egg', 'c:\dropbox\dev\virtenvs\redmule\src\django-blog-zinnia', 'C:\Windows\system32\python26.zip', 'C:\dropbox\Dev\virtenvs\redmule\DLLs', 'C:\dropbox\Dev\virtenvs\redmule\lib', 'C:\dropbox\Dev\virtenvs\redmule\lib\plat-win', 'C:\dropbox\Dev\virtenvs\redmule\lib\lib-tk', 'C:\dropbox\Dev\virtenvs\redmule\Scripts', 'C:\Python26\Lib', 'C:\Python26\DLLs', 'C:\Python26\Lib\lib-tk', 'C:\dropbox\Dev\virtenvs\redmule', 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages', 'C:\Python26\lib\site-packages\pip-0.6.1-py2.6.egg', 'C:\Python26', 'C:\Python26\lib\site-packages', 'C:\Python26\lib\site-packages\PIL', 'C:\Python26\lib\site-packages', 'c:\dev', 'c:\dev\stable', 'c:\oss', 'c:\oss\django-cms-2.0', 'c:\oss\geraldo', 'C:\Python26\lib\site-packages\win32', 'C:\Python26\lib\site-packages\win32\lib', 'C:\Python26\lib\site-packages\Pythonwin', 'C:\Python26\lib\site-packages\wx-2.8-msw-ansi']
Server time:    Sat, 3 Jul 2010 22:14:34 -0500
Template error

In template c:\dropbox\dev\virtenvs\redmule\src\django-blog-zinnia\zinnia\templates\zinnia\base.html, error at line 24
Caught Error while rendering: unsupported locale setting
14  <input type=""submit"" class=""submitbutton"" value=""OK"" />
15  </p>
16  </form>
17  </div>
18  <div class=""categories"">
19  <h3>{% trans ""Categories"" %}</h3>
20  {% get_categories %}
21  </div>
22  <div class=""calendar"">
23  <h3>{% trans ""Calendar"" %}</h3>
24  {% get_calendar_entries %}
25  </div>
26  <div class=""tags"">
27  <h3>{% trans ""Tags"" %}</h3>
28  {% tag_cloud_for_model zinnia.entry as tag_cloud with steps=6 %}
29  <ul>
30  {% for tag in tag_cloud %}
31  <li>
32  <a href=""{% url zinnia_tag_detail tag.name %}"" title=""{{ tag.count }} {% trans ""entries"" %}"" class=""tag_{{ tag.font_size }}"">
33  {{ tag }}
34  </a>
Traceback Switch back to interactive view

```
* C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\core\handlers\base.py in get_response
    93. # Apply view middleware
    94. for middleware_method in self._view_middleware:
    95. response = middleware_method(request, callback, callback_args, callback_kwargs)
    96. if response:
    97. return response
    98.
    99. try:
   100. response = callback(request, *callback_args, **callback_kwargs) ...
   101. except Exception, e:
   102. # If the view raised an exception, run it through exception
   103. # middleware, and if the exception middleware returns a
   104. # response, use that. Otherwise, reraise the exception.
   105. for middleware_method in self._exception_middleware:
   106. response = middleware_method(request, e)
  ▶ Local vars
  Variable  Value
  callback  
  <function wrap at 0x02AD1B30>
  callback_args     
  ()
  callback_kwargs   
  {'paginate_by': 10, 'queryset': []}
  e     
  TemplateSyntaxError(u'Caught Error while rendering: unsupported locale setting',)
  exc_info  
  (<class 'django.template.TemplateSyntaxError'>, TemplateSyntaxError(u'Caught Error while rendering: unsupported locale setting',), <traceback object at 0x0329B9B8>)
  exceptions    
  <module 'django.core.exceptions' from 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\core\exceptions.pyc'>
  middleware_method     
  <bound method XViewMiddleware.process_view of <django.middleware.doc.XViewMiddleware object at 0x027C9710>>
  receivers     
  [(<function _rollback_on_exception at 0x02118E70>, None)]
  request   
  <WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=1423670a13dabcfae6851db0dc8509e8', 'HTTP_HOST': '127.0.0.1:8000', 'HTTP_KEEP_ALIVE': '115', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6', 'LOCALAPPDATA': 'C:\\Users\\michael\\AppData\\Local', 'LOGONSERVER': '\\\\MRHLAPTOP', 'NUMBER_OF_PROCESSORS': '1', 'OS': 'Windows_NT', 'PATH': 'C:\\dropbox\\Dev\\virtenvs\\redmule\\\\Scripts;C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.py', 'PATH_INFO': u'/weblog/', 'PIP_REQUIRE_VIRTUALENV': 'true', 'PIP_RESPECT_VIRTUALENV': 'true', 'PIP_VIRTUALENV_BASE': 'c:\\dev\\virtenvs', 'PROCESSOR_ARCHITECTURE': 'x86', 'PROCESSOR_IDENTIFIER': 'x86 Family 6 Model 22 Stepping 1, GenuineIntel', 'PROCESSOR_LEVEL': '6', 'PROCESSOR_REVISION': '1601', 'PROGRAMDATA': 'C:\\ProgramData', 'PROGRAMFILES': 'C:\\Program Files', 'PROMPT': '(redmule) $P$G', 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\', 'PUBLIC': 'C:\\Users\\Public', 'QTJAVA': 'C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '', 'REQUEST_METHOD': 'GET', 'RUN_MAIN': 'true', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'mrhlaptop', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.6.4', 'SESSIONNAME': 'Console', 'SVN_SSH': 'c:/pgms/putty/plink.exe -P 40022', 'SYSTEMDRIVE': 'C:', 'SYSTEMROOT': 'C:\\Windows', 'TEMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'TMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'USERDOMAIN': 'mrhlaptop', 'USERNAME': 'michael', 'USERPROFILE': 'C:\\Users\\michael', 'VIRTENV': 'c:\\dev\\virtenvs', 'VIRTUAL_ENV': 'C:\\dropbox\\Dev\\virtenvs\\redmule', 'WINDIR': 'C:\\Windows', 'WORKON_HOME': 'c:\\dev\\virtenvs', '_OLD_VIRTUAL_PATH': 'C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', '_OLD_VIRTUAL_PROMPT': '$P$G', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x013740C0>, 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>, 'wsgi.input': <socket._fileobject object at 0x02AD5D70>, 'wsgi.multiprocess': False, 'wsgi.multithread': True, 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>
  resolver  
  <RegexURLResolver redmule.urls (None:None) ^/>
  response  
  None
  self  
  <django.core.handlers.wsgi.WSGIHandler object at 0x02474330>
  settings  
  <django.conf.LazySettings object at 0x01E7DA30>
  urlconf   
  'redmule.urls'
  urlresolvers  
  <module 'django.core.urlresolvers' from 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\core\urlresolvers.pyc'>
* c:\dropbox\dev\virtenvs\redmule\src\django-blog-zinnia\zinnia\views\decorators.py in wrap
     6. passed in parameter, who will force the update
     7. of the queryset before executing the view.
     8. Related to issue http://code.djangoproject.com/ticket/8378""""""
     9.
    10. def wrap(*args, **kwargs):
    11. """"""Regenerate the queryset before passing it to the view.""""""
    12. kwargs[queryset_parameter] = queryset()
    13. return view(*args, **kwargs) ...
    14.
    15. return wrap
  ▶ Local vars
  Variable  Value
  args  
  (<WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=1423670a13dabcfae6851db0dc8509e8', 'HTTP_HOST': '127.0.0.1:8000', 'HTTP_KEEP_ALIVE': '115', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6', 'LOCALAPPDATA': 'C:\\Users\\michael\\AppData\\Local', 'LOGONSERVER': '\\\\MRHLAPTOP', 'NUMBER_OF_PROCESSORS': '1', 'OS': 'Windows_NT', 'PATH': 'C:\\dropbox\\Dev\\virtenvs\\redmule\\\\Scripts;C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.py', 'PATH_INFO': u'/weblog/', 'PIP_REQUIRE_VIRTUALENV': 'true', 'PIP_RESPECT_VIRTUALENV': 'true', 'PIP_VIRTUALENV_BASE': 'c:\\dev\\virtenvs', 'PROCESSOR_ARCHITECTURE': 'x86', 'PROCESSOR_IDENTIFIER': 'x86 Family 6 Model 22 Stepping 1, GenuineIntel', 'PROCESSOR_LEVEL': '6', 'PROCESSOR_REVISION': '1601', 'PROGRAMDATA': 'C:\\ProgramData', 'PROGRAMFILES': 'C:\\Program Files', 'PROMPT': '(redmule) $P$G', 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\', 'PUBLIC': 'C:\\Users\\Public', 'QTJAVA': 'C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '', 'REQUEST_METHOD': 'GET', 'RUN_MAIN': 'true', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'mrhlaptop', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.6.4', 'SESSIONNAME': 'Console', 'SVN_SSH': 'c:/pgms/putty/plink.exe -P 40022', 'SYSTEMDRIVE': 'C:', 'SYSTEMROOT': 'C:\\Windows', 'TEMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'TMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'USERDOMAIN': 'mrhlaptop', 'USERNAME': 'michael', 'USERPROFILE': 'C:\\Users\\michael', 'VIRTENV': 'c:\\dev\\virtenvs', 'VIRTUAL_ENV': 'C:\\dropbox\\Dev\\virtenvs\\redmule', 'WINDIR': 'C:\\Windows', 'WORKON_HOME': 'c:\\dev\\virtenvs', '_OLD_VIRTUAL_PATH': 'C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', '_OLD_VIRTUAL_PROMPT': '$P$G', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x013740C0>, 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>, 'wsgi.input': <socket._fileobject object at 0x02AD5D70>, 'wsgi.multiprocess': False, 'wsgi.multithread': True, 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>,)
  kwargs    
  {'paginate_by': 10, 'queryset': []}
  queryset  
  <bound method EntryPublishedManager.all of <zinnia.managers.EntryPublishedManager object at 0x0274C130>>
  queryset_parameter    
  'queryset'
  view  
  <function object_list at 0x02AD1A70>
* C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\views\generic\list_detail.py in object_list
    94. c[key] = value()
    95. else:
    96. c[key] = value
    97. if not template_name:
    98. model = queryset.model
    99. template_name = ""%s/%s_list.html"" % (model._meta.app_label, model._meta.object_name.lower())
   100. t = template_loader.get_template(template_name)
   101. return HttpResponse(t.render(c), mimetype=mimetype) ...
   102.
   103. def object_detail(request, queryset, object_id=None, slug=None,
   104. slug_field='slug', template_name=None, template_name_field=None,
   105. template_loader=loader, extra_context=None,
   106. context_processors=None, template_object_name='object',
   107. mimetype=None):
  ▶ Local vars
  Variable  Value
  allow_empty   
  True
  c     
  [{'has_next': False, 'page_range': [1], 'page_obj': <Page 1 of 1>, 'results_per_page': 10, 'is_paginated': False, 'pages': 1, 'previous': 0, 'paginator': <django.core.paginator.Paginator object at 0x0323B9D0>, 'hits': 0, 'object_list': [], 'next': 2, 'first_on_page': 0, 'has_previous': False, 'page': 1, 'last_on_page': 0}, {'csrf_token': <django.utils.functional.__proxy__ object at 0x03268550>}, {'perms': <django.utils.functional.__proxy__ object at 0x03268FB0>, 'messages': <django.utils.functional.__proxy__ object at 0x03268830>, 'user': <django.utils.functional.SimpleLazyObject object at 0x03268E90>}, {'debug': True, 'sql_queries': [{'time': '0.008', 'sql': 'SELECT ""django_session"".""session_key"", ""django_session"".""session_data"", ""django_session"".""expire_date"" FROM ""django_session"" WHERE (""django_session"".""session_key"" = E\'1423670a13dabcfae6851db0dc8509e8\' AND ""django_session"".""expire_date"" > E\'2010-07-03 22:14:33.506000\' )'}, {'time': '0.006', 'sql': 'SELECT ""auth_user"".""id"", ""auth_user"".""username"", ""auth_user"".""first_name"", ""auth_user"".""last_name"", ""auth_user"".""email"", ""auth_user"".""password"", ""auth_user"".""is_staff"", ""auth_user"".""is_active"", ""auth_user"".""is_superuser"", ""auth_user"".""last_login"", ""auth_user"".""date_joined"" FROM ""auth_user"" WHERE ""auth_user"".""id"" = 1 '}, {'time': '0.010', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.004', 'sql': 'SELECT ""wisdom_wisdom"".""id"", ""wisdom_wisdom"".""content"", ""wisdom_wisdom"".""attribution"", ""wisdom_wisdom"".""link"", ""wisdom_wisdom"".""category"", ""wisdom_wisdom"".""updated"" FROM ""wisdom_wisdom""'}, {'time': '0.004', 'sql': 'SELECT ""advocacy_advocacy"".""id"", ""advocacy_advocacy"".""comment"", ""advocacy_advocacy"".""href"", ""advocacy_advocacy"".""link"", ""advocacy_advocacy"".""graphic"", ""advocacy_advocacy"".""updated"" FROM ""advocacy_advocacy""'}, {'time': '0.007', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.006', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.007', 'sql': '\n SELECT DISTINCT ""tagging_tag"".id, ""tagging_tag"".name\n FROM\n ""tagging_tag""\n INNER JOIN ""tagging_taggeditem""\n ON ""tagging_tag"".id = ""tagging_taggeditem"".tag_id\n INNER JOIN ""zinnia_entry""\n ON ""tagging_taggeditem"".object_id = ""zinnia_entry"".""id""\n \n WHERE ""tagging_taggeditem"".content_type_id = 43\n \n GROUP BY ""tagging_tag"".id, ""tagging_tag"".name\n \n ORDER BY ""tagging_tag"".name ASC'}, {'time': '0.042', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 DESC'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 0'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_category"".""id"", ""zinnia_category"".""title"", ""zinnia_category"".""slug"", ""zinnia_category"".""description"" FROM ""zinnia_category"" ORDER BY ""zinnia_category"".""title"" ASC'}, {'time': '0.008', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 ASC'}, {'time': '0.029', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry_sites"".""site_id"" = 1 AND EXTRACT(\'month\' FROM ""zinnia_entry"".""creation_date"") = 7 AND ""zinnia_entry"".""creation_date"" BETWEEN E\'2010-01-01 00:00:00\' and E\'2010-12-31 23:59:59.999999\') ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.008', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}]}, {'request': <WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=1423670a13dabcfae6851db0dc8509e8', 'HTTP_HOST': '127.0.0.1:8000', 'HTTP_KEEP_ALIVE': '115', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6', 'LOCALAPPDATA': 'C:\\Users\\michael\\AppData\\Local', 'LOGONSERVER': '\\\\MRHLAPTOP', 'NUMBER_OF_PROCESSORS': '1', 'OS': 'Windows_NT', 'PATH': 'C:\\dropbox\\Dev\\virtenvs\\redmule\\\\Scripts;C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.py', 'PATH_INFO': u'/weblog/', 'PIP_REQUIRE_VIRTUALENV': 'true', 'PIP_RESPECT_VIRTUALENV': 'true', 'PIP_VIRTUALENV_BASE': 'c:\\dev\\virtenvs', 'PROCESSOR_ARCHITECTURE': 'x86', 'PROCESSOR_IDENTIFIER': 'x86 Family 6 Model 22 Stepping 1, GenuineIntel', 'PROCESSOR_LEVEL': '6', 'PROCESSOR_REVISION': '1601', 'PROGRAMDATA': 'C:\\ProgramData', 'PROGRAMFILES': 'C:\\Program Files', 'PROMPT': '(redmule) $P$G', 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\', 'PUBLIC': 'C:\\Users\\Public', 'QTJAVA': 'C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '', 'REQUEST_METHOD': 'GET', 'RUN_MAIN': 'true', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'mrhlaptop', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.6.4', 'SESSIONNAME': 'Console', 'SVN_SSH': 'c:/pgms/putty/plink.exe -P 40022', 'SYSTEMDRIVE': 'C:', 'SYSTEMROOT': 'C:\\Windows', 'TEMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'TMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'USERDOMAIN': 'mrhlaptop', 'USERNAME': 'michael', 'USERPROFILE': 'C:\\Users\\michael', 'VIRTENV': 'c:\\dev\\virtenvs', 'VIRTUAL_ENV': 'C:\\dropbox\\Dev\\virtenvs\\redmule', 'WINDIR': 'C:\\Windows', 'WORKON_HOME': 'c:\\dev\\virtenvs', '_OLD_VIRTUAL_PATH': 'C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', '_OLD_VIRTUAL_PROMPT': '$P$G', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x013740C0>, 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>, 'wsgi.input': <socket._fileobject object at 0x02AD5D70>, 'wsgi.multiprocess': False, 'wsgi.multithread': True, 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>}, {'MEDIA_URL': '/media/'}, {'CMS_MEDIA_URL': '/media/cms/'}, {'wisdom_attribution': '', 'wisdom_text': '', 'wisdom_link': ''}, {'advocacy_comment': '', 'advocacy_href': '', 'advocacy_link': '', 'advocacy_graphic': ''}, {'ZINNIA_MEDIA_URL': '/zinnia/'}, {u'tag_entry': [], 'ZINNIA_VERSION': '0.5'}, {'block': <Block Node: sidebar. Contents: [<Text Node: ' <div class=""search""> <'>, <django.templatetags.i18n.TranslateNode object at 0x03263750>, <Text Node: '</h3> <form method=""get'>, <django.template.defaulttags.URLNode object at 0x032636D0>, <Text Node: '""> <p> <input t'>, <django.templatetags.i18n.TranslateNode object at 0x03263ED0>, <Text Node: '"" name=""pattern"" id=""sear'>, <django.templatetags.i18n.TranslateNode object at 0x03263CD0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263D50>, <Text Node: ' </div> <div class=""calen'>, <django.templatetags.i18n.TranslateNode object at 0x03263070>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x032634B0>, <Text Node: ' </div> <div class=""tags""'>, <django.templatetags.i18n.TranslateNode object at 0x03263E70>, <Text Node: '</h3> '>, <tagging.templatetags.tagging_tags.TagCloudForModelNode object at 0x03263430>, <Text Node: ' <ul> '>, <For Node: for tag in tag_cloud, tail_len: 11>, <Text Node: ' </ul> </div> <div clas'>, <django.templatetags.i18n.TranslateNode object at 0x03263130>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x032630F0>, <Text Node: ' </div> <div class=""rando'>, <django.templatetags.i18n.TranslateNode object at 0x02B84DF0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263050>, <Text Node: ' </div> <div class=""popul'>, <django.templatetags.i18n.TranslateNode object at 0x02B841F0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263F90>, <Text Node: ' </div> <div class=""archi'>, <django.templatetags.i18n.TranslateNode object at 0x02B84350>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263FD0>, <Text Node: ' </div> '>]>}]
  context_processors    
  None
  extra_context     
  {}
  mimetype  
  None
  model     
  <class 'zinnia.models.Entry'>
  page  
  1
  page_number   
  1
  page_obj  
  <Page 1 of 1>
  paginate_by   
  10
  paginator     
  <django.core.paginator.Paginator object at 0x0323B9D0>
  queryset  
  []
  request   
  <WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=1423670a13dabcfae6851db0dc8509e8', 'HTTP_HOST': '127.0.0.1:8000', 'HTTP_KEEP_ALIVE': '115', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6', 'LOCALAPPDATA': 'C:\\Users\\michael\\AppData\\Local', 'LOGONSERVER': '\\\\MRHLAPTOP', 'NUMBER_OF_PROCESSORS': '1', 'OS': 'Windows_NT', 'PATH': 'C:\\dropbox\\Dev\\virtenvs\\redmule\\\\Scripts;C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.py', 'PATH_INFO': u'/weblog/', 'PIP_REQUIRE_VIRTUALENV': 'true', 'PIP_RESPECT_VIRTUALENV': 'true', 'PIP_VIRTUALENV_BASE': 'c:\\dev\\virtenvs', 'PROCESSOR_ARCHITECTURE': 'x86', 'PROCESSOR_IDENTIFIER': 'x86 Family 6 Model 22 Stepping 1, GenuineIntel', 'PROCESSOR_LEVEL': '6', 'PROCESSOR_REVISION': '1601', 'PROGRAMDATA': 'C:\\ProgramData', 'PROGRAMFILES': 'C:\\Program Files', 'PROMPT': '(redmule) $P$G', 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\', 'PUBLIC': 'C:\\Users\\Public', 'QTJAVA': 'C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '', 'REQUEST_METHOD': 'GET', 'RUN_MAIN': 'true', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'mrhlaptop', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.6.4', 'SESSIONNAME': 'Console', 'SVN_SSH': 'c:/pgms/putty/plink.exe -P 40022', 'SYSTEMDRIVE': 'C:', 'SYSTEMROOT': 'C:\\Windows', 'TEMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'TMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'USERDOMAIN': 'mrhlaptop', 'USERNAME': 'michael', 'USERPROFILE': 'C:\\Users\\michael', 'VIRTENV': 'c:\\dev\\virtenvs', 'VIRTUAL_ENV': 'C:\\dropbox\\Dev\\virtenvs\\redmule', 'WINDIR': 'C:\\Windows', 'WORKON_HOME': 'c:\\dev\\virtenvs', '_OLD_VIRTUAL_PATH': 'C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', '_OLD_VIRTUAL_PROMPT': '$P$G', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x013740C0>, 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>, 'wsgi.input': <socket._fileobject object at 0x02AD5D70>, 'wsgi.multiprocess': False, 'wsgi.multithread': True, 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>
  t     
  <django.template.Template object at 0x03268290>
  template_loader   
  <module 'django.template.loader' from 'C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\template\loader.pyc'>
  template_name     
  'zinnia/entry_list.html'
  template_object_name  
  'object'
* C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\template\__init__.py in render
   166. def _render(self, context):
   167. return self.nodelist.render(context)
   168.
   169. def render(self, context):
   170. ""Display stage -- can be called many times""
   171. context.render_context.push()
   172. try:
   173. return self._render(context) ...
   174. finally:
   175. context.render_context.pop()
   176.
   177. def compile_string(template_string, origin):
   178. ""Compiles template_string into NodeList ready for rendering""
   179. if settings.TEMPLATE_DEBUG:
  ▶ Local vars
  Variable  Value
  context   
  [{'has_next': False, 'page_range': [1], 'page_obj': <Page 1 of 1>, 'results_per_page': 10, 'is_paginated': False, 'pages': 1, 'previous': 0, 'paginator': <django.core.paginator.Paginator object at 0x0323B9D0>, 'hits': 0, 'object_list': [], 'next': 2, 'first_on_page': 0, 'has_previous': False, 'page': 1, 'last_on_page': 0}, {'csrf_token': <django.utils.functional.__proxy__ object at 0x03268550>}, {'perms': <django.utils.functional.__proxy__ object at 0x03268FB0>, 'messages': <django.utils.functional.__proxy__ object at 0x03268830>, 'user': <django.utils.functional.SimpleLazyObject object at 0x03268E90>}, {'debug': True, 'sql_queries': [{'time': '0.008', 'sql': 'SELECT ""django_session"".""session_key"", ""django_session"".""session_data"", ""django_session"".""expire_date"" FROM ""django_session"" WHERE (""django_session"".""session_key"" = E\'1423670a13dabcfae6851db0dc8509e8\' AND ""django_session"".""expire_date"" > E\'2010-07-03 22:14:33.506000\' )'}, {'time': '0.006', 'sql': 'SELECT ""auth_user"".""id"", ""auth_user"".""username"", ""auth_user"".""first_name"", ""auth_user"".""last_name"", ""auth_user"".""email"", ""auth_user"".""password"", ""auth_user"".""is_staff"", ""auth_user"".""is_active"", ""auth_user"".""is_superuser"", ""auth_user"".""last_login"", ""auth_user"".""date_joined"" FROM ""auth_user"" WHERE ""auth_user"".""id"" = 1 '}, {'time': '0.010', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.004', 'sql': 'SELECT ""wisdom_wisdom"".""id"", ""wisdom_wisdom"".""content"", ""wisdom_wisdom"".""attribution"", ""wisdom_wisdom"".""link"", ""wisdom_wisdom"".""category"", ""wisdom_wisdom"".""updated"" FROM ""wisdom_wisdom""'}, {'time': '0.004', 'sql': 'SELECT ""advocacy_advocacy"".""id"", ""advocacy_advocacy"".""comment"", ""advocacy_advocacy"".""href"", ""advocacy_advocacy"".""link"", ""advocacy_advocacy"".""graphic"", ""advocacy_advocacy"".""updated"" FROM ""advocacy_advocacy""'}, {'time': '0.007', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.006', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.007', 'sql': '\n SELECT DISTINCT ""tagging_tag"".id, ""tagging_tag"".name\n FROM\n ""tagging_tag""\n INNER JOIN ""tagging_taggeditem""\n ON ""tagging_tag"".id = ""tagging_taggeditem"".tag_id\n INNER JOIN ""zinnia_entry""\n ON ""tagging_taggeditem"".object_id = ""zinnia_entry"".""id""\n \n WHERE ""tagging_taggeditem"".content_type_id = 43\n \n GROUP BY ""tagging_tag"".id, ""tagging_tag"".name\n \n ORDER BY ""tagging_tag"".name ASC'}, {'time': '0.042', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 DESC'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 0'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_category"".""id"", ""zinnia_category"".""title"", ""zinnia_category"".""slug"", ""zinnia_category"".""description"" FROM ""zinnia_category"" ORDER BY ""zinnia_category"".""title"" ASC'}, {'time': '0.008', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 ASC'}, {'time': '0.029', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry_sites"".""site_id"" = 1 AND EXTRACT(\'month\' FROM ""zinnia_entry"".""creation_date"") = 7 AND ""zinnia_entry"".""creation_date"" BETWEEN E\'2010-01-01 00:00:00\' and E\'2010-12-31 23:59:59.999999\') ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.008', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.007', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}]}, {'request': <WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=1423670a13dabcfae6851db0dc8509e8', 'HTTP_HOST': '127.0.0.1:8000', 'HTTP_KEEP_ALIVE': '115', 'HTTP_USER_AGENT': 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6', 'LOCALAPPDATA': 'C:\\Users\\michael\\AppData\\Local', 'LOGONSERVER': '\\\\MRHLAPTOP', 'NUMBER_OF_PROCESSORS': '1', 'OS': 'Windows_NT', 'PATH': 'C:\\dropbox\\Dev\\virtenvs\\redmule\\\\Scripts;C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.py', 'PATH_INFO': u'/weblog/', 'PIP_REQUIRE_VIRTUALENV': 'true', 'PIP_RESPECT_VIRTUALENV': 'true', 'PIP_VIRTUALENV_BASE': 'c:\\dev\\virtenvs', 'PROCESSOR_ARCHITECTURE': 'x86', 'PROCESSOR_IDENTIFIER': 'x86 Family 6 Model 22 Stepping 1, GenuineIntel', 'PROCESSOR_LEVEL': '6', 'PROCESSOR_REVISION': '1601', 'PROGRAMDATA': 'C:\\ProgramData', 'PROGRAMFILES': 'C:\\Program Files', 'PROMPT': '(redmule) $P$G', 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\', 'PUBLIC': 'C:\\Users\\Public', 'QTJAVA': 'C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'QUERY_STRING': '', 'REMOTE_ADDR': '127.0.0.1', 'REMOTE_HOST': '', 'REQUEST_METHOD': 'GET', 'RUN_MAIN': 'true', 'SCRIPT_NAME': u'', 'SERVER_NAME': 'mrhlaptop', 'SERVER_PORT': '8000', 'SERVER_PROTOCOL': 'HTTP/1.1', 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.6.4', 'SESSIONNAME': 'Console', 'SVN_SSH': 'c:/pgms/putty/plink.exe -P 40022', 'SYSTEMDRIVE': 'C:', 'SYSTEMROOT': 'C:\\Windows', 'TEMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'TMP': 'C:\\Users\\michael\\AppData\\Local\\Temp', 'USERDOMAIN': 'mrhlaptop', 'USERNAME': 'michael', 'USERPROFILE': 'C:\\Users\\michael', 'VIRTENV': 'c:\\dev\\virtenvs', 'VIRTUAL_ENV': 'C:\\dropbox\\Dev\\virtenvs\\redmule', 'WINDIR': 'C:\\Windows', 'WORKON_HOME': 'c:\\dev\\virtenvs', '_OLD_VIRTUAL_PATH': 'C:\\Program Files\\PC Connectivity Solution\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Common Files\\Intuit\\QBPOSSDKRuntime;C:\\Program Files\\jEdit;C:\\Program Files\\Mercurial\\;C:\\Program Files\\QuickTime\\QTSystem\\;.\\bin;c:\\bin;c:\\bin\\subversion\\bin;c:\\msysgit\\cmd;c:\\bin\\pstools;c:\\oss;c:\\python26;c:\\pgms\\vim\\vim72;c:\\pgms\\putty;C:\\pgms\\Mercurial;C:\\Python26\\Scripts;C:\\pgms\\OpenVPNTech\\bin;C:\\pgms\\Mercurial', '_OLD_VIRTUAL_PROMPT': '$P$G', 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x013740C0>, 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>, 'wsgi.input': <socket._fileobject object at 0x02AD5D70>, 'wsgi.multiprocess': False, 'wsgi.multithread': True, 'wsgi.run_once': False, 'wsgi.url_scheme': 'http', 'wsgi.version': (1, 0)}>}, {'MEDIA_URL': '/media/'}, {'CMS_MEDIA_URL': '/media/cms/'}, {'wisdom_attribution': '', 'wisdom_text': '', 'wisdom_link': ''}, {'advocacy_comment': '', 'advocacy_href': '', 'advocacy_link': '', 'advocacy_graphic': ''}, {'ZINNIA_MEDIA_URL': '/zinnia/'}, {u'tag_entry': [], 'ZINNIA_VERSION': '0.5'}, {'block': <Block Node: sidebar. Contents: [<Text Node: ' <div class=""search""> <'>, <django.templatetags.i18n.TranslateNode object at 0x03263750>, <Text Node: '</h3> <form method=""get'>, <django.template.defaulttags.URLNode object at 0x032636D0>, <Text Node: '""> <p> <input t'>, <django.templatetags.i18n.TranslateNode object at 0x03263ED0>, <Text Node: '"" name=""pattern"" id=""sear'>, <django.templatetags.i18n.TranslateNode object at 0x03263CD0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263D50>, <Text Node: ' </div> <div class=""calen'>, <django.templatetags.i18n.TranslateNode object at 0x03263070>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x032634B0>, <Text Node: ' </div> <div class=""tags""'>, <django.templatetags.i18n.TranslateNode object at 0x03263E70>, <Text Node: '</h3> '>, <tagging.templatetags.tagging_tags.TagCloudForModelNode object at 0x03263430>, <Text Node: ' <ul> '>, <For Node: for tag in tag_cloud, tail_len: 11>, <Text Node: ' </ul> </div> <div clas'>, <django.templatetags.i18n.TranslateNode object at 0x03263130>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x032630F0>, <Text Node: ' </div> <div class=""rando'>, <django.templatetags.i18n.TranslateNode object at 0x02B84DF0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263050>, <Text Node: ' </div> <div class=""popul'>, <django.templatetags.i18n.TranslateNode object at 0x02B841F0>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263F90>, <Text Node: ' </div> <div class=""archi'>, <django.templatetags.i18n.TranslateNode object at 0x02B84350>, <Text Node: '</h3> '>, <django.template.InclusionNode object at 0x03263FD0>, <Text Node: ' </div> '>]>}]
  self  
  <django.template.Template object at 0x03268290>
* C:\dropbox\Dev\virtenvs\redmule\lib\site-packages\django\template\__init__.py in _render
   160.
   161. def __iter__(self):
   162. for node in self.nodelist:
   163. for subnode in node:
   164. yield subnode
   165.
   166. def _render(self, context):
   167. return self.nodelist.render(context) ...
   168.
   169. def render(self, context):
   170. ""Display stage -- can be called many times""
   171. context.render_context.push()
   172. try:
   173. return self._render(context)
  ▶ Local vars
  Variable  Value
  context   
  [{'has_next': False, 'page_range': [1], 'page_obj': <Page 1 of 1>, 'results_per_page': 10, 'is_paginated': False, 'pages': 1, 'previous': 0, 'paginator': <django.core.paginator.Paginator object at 0x0323B9D0>, 'hits': 0, 'object_list': [], 'next': 2, 'first_on_page': 0, 'has_previous': False, 'page': 1, 'last_on_page': 0}, {'csrf_token': <django.utils.functional.__proxy__ object at 0x03268550>}, {'perms': <django.utils.functional.__proxy__ object at 0x03268FB0>, 'messages': <django.utils.functional.__proxy__ object at 0x03268830>, 'user': <django.utils.functional.SimpleLazyObject object at 0x03268E90>}, {'debug': True, 'sql_queries': [{'time': '0.008', 'sql': 'SELECT ""django_session"".""session_key"", ""django_session"".""session_data"", ""django_session"".""expire_date"" FROM ""django_session"" WHERE (""django_session"".""session_key"" = E\'1423670a13dabcfae6851db0dc8509e8\' AND ""django_session"".""expire_date"" > E\'2010-07-03 22:14:33.506000\' )'}, {'time': '0.006', 'sql': 'SELECT ""auth_user"".""id"", ""auth_user"".""username"", ""auth_user"".""first_name"", ""auth_user"".""last_name"", ""auth_user"".""email"", ""auth_user"".""password"", ""auth_user"".""is_staff"", ""auth_user"".""is_active"", ""auth_user"".""is_superuser"", ""auth_user"".""last_login"", ""auth_user"".""date_joined"" FROM ""auth_user"" WHERE ""auth_user"".""id"" = 1 '}, {'time': '0.010', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.004', 'sql': 'SELECT ""wisdom_wisdom"".""id"", ""wisdom_wisdom"".""content"", ""wisdom_wisdom"".""attribution"", ""wisdom_wisdom"".""link"", ""wisdom_wisdom"".""category"", ""wisdom_wisdom"".""updated"" FROM ""wisdom_wisdom""'}, {'time': '0.004', 'sql': 'SELECT ""advocacy_advocacy"".""id"", ""advocacy_advocacy"".""comment"", ""advocacy_advocacy"".""href"", ""advocacy_advocacy"".""link"", ""advocacy_advocacy"".""graphic"", ""advocacy_advocacy"".""updated"" FROM ""advocacy_advocacy""'}, {'time': '0.007', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.006', 'sql': 'SELECT COUNT(*) FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.879000\' AND ""zinnia_entry_sites"".""site_id"" = 1 )'}, {'time': '0.007', 'sql': '\n SELECT DISTINCT ""tagging_tag"".id, ""tagging_tag"".name\n FROM\n ""tagging_tag""\n INNER JOIN ""tagging_taggeditem""\n ON ""tagging_tag"".id = ""tagging_taggeditem"".tag_id\n INNER JOIN ""zinnia_entry""\n ON ""tagging_taggeditem"".object_id = ""zinnia_entry"".""id""\n \n WHERE ""tagging_taggeditem"".content_type_id = 43\n \n GROUP BY ""tagging_tag"".id, ""tagging_tag"".name\n \n ORDER BY ""tagging_tag"".name ASC'}, {'time': '0.042', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.988000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 DESC'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 0'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_category"".""id"", ""zinnia_category"".""title"", ""zinnia_category"".""slug"", ""zinnia_category"".""description"" FROM ""zinnia_category"" ORDER BY ""zinnia_category"".""title"" ASC'}, {'time': '0.008', 'sql': 'SELECT DISTINCT DATE_TRUNC(\'month\', ""zinnia_entry"".""creation_date"") FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.104000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY 1 ASC'}, {'time': '0.029', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:34.117000\' AND ""zinnia_entry_sites"".""site_id"" = 1 AND EXTRACT(\'month\' FROM ""zinnia_entry"".""creation_date"") = 7 AND ""zinnia_entry"".""creation_date"" BETWEEN E\'2010-01-01 00:00:00\' and E\'2010-12-31 23:59:59.999999\') ORDER BY ""zinnia_entry"".""creation_date"" DESC'}, {'time': '0.008', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.006', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:01.481000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.005', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}, {'time': '0.007', 'sql': 'SELECT ""zinnia_entry"".""id"", ""zinnia_entry"".""title"", ""zinnia_entry"".""image"", ""zinnia_entry"".""content"", ""zinnia_entry"".""excerpt"", ""zinnia_entry"".""tags"", ""zinnia_entry"".""slug"", ""zinnia_entry"".""status"", ""zinnia_entry"".""comment_enabled"", ""zinnia_entry"".""creation_date"", ""zinnia_entry"".""last_update"", ""zinnia_entry"".""start_publication"", ""zinnia_entry"".""end_publication"" FROM ""zinnia_entry"" INNER JOIN ""zinnia_entry_sites"" ON (""zinnia_entry"".""id"" = ""zinnia_entry_sites"".""entry_id"") WHERE (""zinnia_entry"".""status"" = 2 AND ""zinnia_entry"".""end_publication"" > E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry"".""start_publication"" <= E\'2010-07-03 22:14:33.816000\' AND ""zinnia_entry_sites"".""site_id"" = 1 ) ORDER BY ""zinnia_entry"".""creation_date"" DESC LIMIT 21'}]}, {'request': <WSGIRequest GET:<QueryDict: {}>, POST:<QueryDict: {}>, COOKIES:{'csrftoken': '64a6273c0290fbcade485902f62562b8', 'sessionid': '1423670a13dabcfae6851db0dc8509e8'}, META:{'ALLUSERSPROFILE': 'C:\\ProgramData', 'APPDATA': 'C:\\Users\\michael\\AppData\\Roaming', 'CLASSPATH': '.;C:\\Program Files\\Java\\jre6\\lib\\ext\\QTJava.zip', 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files', 'COMPUTERNAME': 'MRHLAPTOP', 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'text/plain', 'DJANGO_SETTINGS_MODULE': 'redmule.settings', 'EDITOR': 'gvim', 'FP_NO_HOST_CHECK': 'NO', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HOMEDRIVE': 'C:', 'HOMEPATH': '\\Users\\michael', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7', 'HTTP_ACCEPT_ENCODING': 'gzip,deflate', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'csrftoken=64a6273c0290fbcade485902f62562b8; sessionid=142
```
"
14153,Fantomas42,django-blog-zinnia,7,closed,4,4,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/4/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/4,"[{""default"": false, ""name"": ""Bug"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Bug"", ""color"": ""3c7496"", ""node_id"": ""MDU6TGFiZWwzNTA0MQ=="", ""id"": 35041}, {""default"": false, ""name"": ""Moderator"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/Moderator"", ""color"": ""ff8503"", ""node_id"": ""MDU6TGFiZWwzNzYzNg=="", ""id"": 37636}]",Unicode problem with names in comments,"I believe this is a bug:

With this variables in settings.py checked:

USE_I18N = True
TEST_DATABASE_CHARSET = ""utf8""

If a new comment is made with a unicode name (for example) ""Álvaro"" it won't work, yielding this error:

Environment:

Request Method: POST
Request URL: http://blog.castrocastilla.com/comments/post/
Django Version: 1.2.1
Python Version: 2.6.0
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.comments',
 'django.contrib.sites',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.sitemaps',
 'tagging',
 'zinnia']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File ""/home4/castroca/.local/lib/python2.6/site-packages/django/core/handlers/base.py"" in get_response
1.                     response = callback(request, _callback_args, *_callback_kwargs)
   File ""/home4/castroca/.local/lib/python2.6/site-packages/django/utils/decorators.py"" in _wrapped_view
2.                     response = view_func(request, _args, *\_kwargs)
   File ""/home4/castroca/.local/lib/python2.6/site-packages/django/views/decorators/http.py"" in inner
3.             return func(request, _args, *\_kwargs)
   File ""/home4/castroca/.local/lib/python2.6/site-packages/django/contrib/comments/views/comments.py"" in post_comment
4.         request = request
   File ""/home4/castroca/.local/lib/python2.6/site-packages/django/dispatch/dispatcher.py"" in send
5.             response = receiver(signal=self, sender=sender, **named)
   File ""/home4/castroca/.local/lib/python2.6/site-packages/django/contrib/comments/moderation.py"" in pre_save_moderation
6.         if moderation_class.moderate(comment, content_object, request):
   File ""/home4/castroca/public_html/blog/blog/akismet.py"" in comment_check
7.         resp = self._safeRequest(url, urlencode(data), headers)
   File ""/usr/lib/python2.6/urllib.py"" in urlencode
8.             v = quote_plus(str(v))

Exception Type: UnicodeEncodeError at /comments/post/
Exception Value: ('ascii', u'\xc1lvaro', 0, 1, 'ordinal not in range(128)')

////////////////////////////////////

**Note that this won't happen if the comment is previewed, or if using the same characters in the Comment field.**
"
14156,Fantomas42,django-blog-zinnia,7,closed,1,7,https://api.github.com/repos/Fantomas42/django-blog-zinnia/issues/1/comments,https://github.com/Fantomas42/django-blog-zinnia/issues/1,"[{""default"": false, ""name"": ""ICC"", ""url"": ""https://api.github.com/repos/Fantomas42/django-blog-zinnia/labels/ICC"", ""color"": ""fffeb8"", ""node_id"": ""MDU6TGFiZWwzOTY1OQ=="", ""id"": 39659}]",Entry detail URL not resolving,"After adding a new entry in admin, I get an exception:

TemplateSyntaxError at /admin/zinnia/entry/
Caught an exception while rendering: Reverse for 'zinnia_entry_detail' with arguments '()' and keyword arguments '{'year': '2010', 'slug': u'test-entry', 'day': '11', 'month': '05'}' not found.

My base urls.py for zinnia patterns is:

urlpatterns += patterns('',
    url(r'^comments/', include('django.contrib.comments.urls')),
    url(r'^feeds/', include('zinnia.urls.feeds')),
    url(r'^authors/', include('zinnia.urls.authors')),
    url(r'^categories/', include('zinnia.urls.categories')),
    url(r'^search/', include('zinnia.urls.search')),
    (r'^$', include('zinnia.urls')),
)

Thoughts?
"
14158,awesto,django-shop,2,closed,766,5,https://api.github.com/repos/awesto/django-shop/issues/766/comments,https://github.com/awesto/django-shop/issues/766,[],Field `OrderItem.quantity` must be of same type as `CartItem.quantity`,"when starting django pipenv :

```
django.core.management.base.SystemCheckError: SystemCheckError: System check identified some issues:
ERRORS:
?: Field `OrderItem.quantity` must be of same type as `CartItem.quantity`.
```"
14159,awesto,django-shop,2,closed,765,3,https://api.github.com/repos/awesto/django-shop/issues/765/comments,https://github.com/awesto/django-shop/issues/765,[],Error with add CustomizedProductSerializer,"in doc:

```
from shop.serializers.bases import ProductSerializer

class CustomizedProductSerializer(ProductSerializer):
        class Meta:
            model = Product
            fields = [all-the-fields-required-for-the-list-view]
```

and add in url.py


```
    from django.conf.urls import url
    from shop.views.catalog import ProductListView
    from myshop.serializers import CustomizedProductSerializer

    urlpatterns = [
        url(ProductListView.as_view(
            serializer_class=CustomizedProductSerializer,
        )),
        # other patterns
    ]
```

I get an error
File ""/web/garantum/urls.py"", line 31, in <module>
webapp_1_d116d9535b47 |     serializer_class=CustomizedProductSerializer,
webapp_1_d116d9535b47 | TypeError: url() missing 1 required positional argument: 'view'

my code in garantum/serializers.py:
```
class CustomizedProductSerializer(ProductSerializer):
        class Meta:
            model = Programm1c
             fields = ['id', 'product_name', 'product_code', 'product_url',
                  'product_type', 'product_model', 'price']
```

url.py

```
urlpatterns = [
           
     url(ProductListView.as_view(
                serializer_class=CustomizedProductSerializer,
        )),
      url(r'^robots\.txt$', render_robots),
      url(r'^sitemap\.xml$', sitemap, {'sitemaps': sitemaps}, name='sitemap'),
       url(r'^shop/', include('shop.urls', namespace='shop')),
       url(r'^', include('myapp.urls')),
    ]
```

Could not add the product_code field to the product list
"
14161,awesto,django-shop,2,closed,763,1,https://api.github.com/repos/awesto/django-shop/issues/763/comments,https://github.com/awesto/django-shop/issues/763,[],Error in the notification menu,"TypeError at /admin/shop/notification/
__str__ returned non-string (type __proxy__)
Request Method: GET
http://127.0.0.1:8000/admin/shop/notification/
Error during template rendering
In template /home/leo/.local/share/virtualenvs/ga-JBWdJ7V9/lib/python3.6/site-packages/django/contrib/admin/templates/admin/base.html, error at line 75
__str__ returned non-string (type __proxy__)

### {% block object-tools %}{% endblock %}
`
Traceback (most recent call last):
  File ""/home/leo/.local/share/virtualenvs/garantum-JBWdJ7V9/lib/python3.6/site-packages/django/contrib/admin/utils.py"", line 283, in lookup_field

    f = _get_non_gfk_field(opts, name)

  File ""/home/leo/.local/share/virtualenvs/garantum-JBWdJ7V9/lib/python3.6/site-packages/django/contrib/admin/utils.py"", line 317, in _get_non_gfk_field

    field = opts.get_field(name)

  File ""/home/leo/.local/share/virtualenvs/garantum-JBWdJ7V9/lib/python3.6/site-packages/django/db/models/options.py"", line 619, in get_field

    raise FieldDoesNotExist(""%s has no field named '%s'"" % (self.object_name, field_name))
django.core.exceptions.FieldDoesNotExist: Notification has no field named 'get_recipient'
`"
14166,awesto,django-shop,2,closed,755,2,https://api.github.com/repos/awesto/django-shop/issues/755/comments,https://github.com/awesto/django-shop/pull/755,[],WIP Bootstrap-4,"To test I proceeded as in your tutorial:


```
mkdir Tutorial; cd Tutorial
virtualenv -p python3.6 shoptutorial
source shoptutorial/bin/activate
pip install -U pip setuptools
git clone --depth 1 https://github.com/haricot/django-shop -b patch-5
cd django-shop
pip install 'Django<2.0' 'django-select2<6.1' 'django-angular<2.1'
pip install -r requirements/common.txt
pip install --no-deps -e .
pip install djangoshop-stripe
cd example
npm install
export DJANGO_SHOP_TUTORIAL=polymorphic DJANGO_DEBUG=1
./manage.py initialize_shop_demo
./manage.py  cms  uninstall  plugins CarouselPlugin BootstrapPanelPlugin BootstrapAccordionPanelPlugin
./manage.py runserver
```
I think I have reproduced the menu in the same way, but maybe you want to do otherwise."
14167,awesto,django-shop,2,closed,754,2,https://api.github.com/repos/awesto/django-shop/issues/754/comments,https://github.com/awesto/django-shop/issues/754,[],RecursionError occuring when running ./manage.py check,"- Hi, I'm rather new to django and I'm learning it making an ecom store using the django-shop framework. I have edited all the models I need to initially use and switched all media with my own but when I try run ./manage.py check I get a RecursionError : maximum recursion depth exceeded while calling a Python object. I don't know how to resolve this as all methods available aren't particularly working. 

Here's my traceback...

# python manage.py check
c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\admin\product.py:109: UserWarning:
Your caching backend does not support deletion by key patterns.
Please use 'django-redis-cache', or wait until the product's HTML
snippet cache expires by itself.
  warnings.warn(""\n""
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\core\management\__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\core\management\__init__.py"", line 338, in execute
    django.setup()
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\apps\registry.py"", line 116, in populate
    app_config.ready()
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\cmsplugin_cascade\apps.py"", line 21, in ready
    stylesSet = force_text(settings.CKEDITOR_SETTINGS.get('stylesSet'))
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\encoding.py"", line 76, in force_text
    s = six.text_type(s)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\functional.py"", line 119, in __text_cast
    return func(*self.__args, **self.__kw)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\cmsplugin_cascade\utils.py"", line 43, in format_lazy
    return format_string.format(*args, **kwargs)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\functional.py"", line 119, in __text_cast
    return func(*self.__args, **self.__kw)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\urls\base.py"", line 60, in reverse
    app_list = resolver.app_dict[ns]
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\urls\resolvers.py"", line 350, in app_dict
    self._populate()
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\urls\resolvers.py"", line 290, in _populate
    for pattern in reversed(self.url_patterns):
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\urls\resolvers.py"", line 407, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\urls\resolvers.py"", line 400, in urlconf_module
    return import_module(self.urlconf_name)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\importlib\__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""C:\Users\kaukau\AnacondaProjects\Django_projects\web_project00h\nuttyhoggz_var8\django-shop\example\myshop\urls\__init__.py"", line 28, in <module>
    url(r'^', include('cms.urls')),
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\conf\urls\__init__.py"", line 50, in include
    urlconf_module = import_module(urlconf_module)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\importlib\__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\cms\urls.py"", line 16, in <module>
    if apphook_pool.get_apphooks():
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\cms\apphook_pool.py"", line 75, in get_apphooks
    if app.get_urls():
  File ""C:\Users\kaukau\AnacondaProjects\Django_projects\web_project00h\nuttyhoggz_var8\django-shop\example\myshop\cms_apps.py"", line 28, in get_urls
    from shop.search.views import SearchView
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\search\views.py"", line 16, in <module>
    from shop.views.catalog import ProductListView, AddFilterContextMixin
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\views\catalog.py"", line 30, in <module>
    class ProductListView(generics.ListAPIView):
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\views\catalog.py"", line 64, in ProductListView
    serializer_class = app_settings.PRODUCT_SUMMARY_SERIALIZER
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\conf.py"", line 290, in __getattr__
    return getattr(self, key)
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\conf.py"", line 290, in __getattr__
    return getattr(self, key)
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\conf.py"", line 290, in __getattr__
    return getattr(self, key)
  [Previous line repeated 298 more times]
  File ""c:\users\kaukau\anacondaprojects\django_projects\web_project00h\nuttyhoggz_var8\django-shop\shop\conf.py"", line 109, in SHOP_PRODUCT_SUMMARY_SERIALIZER
    ProductSummarySerializer = import_string(pss)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\site-packages\django\utils\module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""C:\Users\kaukau\Anaconda3\envs\ENV_NH_var8\lib\importlib\__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""C:\Users\kaukau\AnacondaProjects\Django_projects\web_project00h\nuttyhoggz_var8\django-shop\example\myshop\serializers\__init__.py"", line 12, in <module>
    from myshop.search_indexes import myshop_search_index_classes
  File ""C:\Users\kaukau\AnacondaProjects\Django_projects\web_project00h\nuttyhoggz_var8\django-shop\example\myshop\search_indexes.py"", line 16, in <module>
    from myshop.models import *
  File ""<frozen importlib._bootstrap>"", line 968, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 148, in __enter__
  File ""<frozen importlib._bootstrap>"", line 174, in _get_module_lock
RecursionError: maximum recursion depth exceeded while calling a Python object
#

Please help me. "
14170,awesto,django-shop,2,closed,750,4,https://api.github.com/repos/awesto/django-shop/issues/750/comments,https://github.com/awesto/django-shop/issues/750,[],Improperly configured error,"So I have tried windows, Linux and ever a production server. Every time I tried all the steps and when I try to migrate this error pops up.
""raise ImproperlyConfigured(""Environment variable DJANGO_SHOP_TUTORIAL is not set"")
django.core.exceptions.ImproperlyConfigured: Environment variable DJANGO_SHOP_TUTORIAL is not set
""
I can assure that I have export the DJANGO_SHOP_TUTORIAL as commodity and DJANGO_DEBUG=1
I also checked the env using ""env"" command and also checked export using ""export"" command. Both of them displays the env properly.
Please send help. "
14173,awesto,django-shop,2,closed,747,3,https://api.github.com/repos/awesto/django-shop/issues/747/comments,https://github.com/awesto/django-shop/issues/747,[],Cannot filter product by category,"Hi,

For some reasons django shop start showing all products regardless of selected CMS page. Can somebody help me to debug this problem? I cannot find a place where filtering should happen."
14178,awesto,django-shop,2,closed,739,1,https://api.github.com/repos/awesto/django-shop/issues/739/comments,https://github.com/awesto/django-shop/issues/739,[],TemplateSyntaxError at /shop/smart-phones/apple-iphone-5,"Unable to locate file node_modules/angular-bootstrap-plus/src/scrollpanel/scrollpanel.scss while rendering tag 'sass_src' in template myshop\catalog\smartphonemodel-detail.html
Bootsrap plus is installed along with everything else. For some reason the directory is unresolved. 

 Here is the Directory I am using for the project (same as tutorial instructions):
C:\Users\Kevin\Desktop\DeskTop\Tutorial\django-shop\

These are the two lines that are marked as unresolved in the myshop/templates/myshop/catalog/smartphonemodel-detail.html (dont mind the ' ' around href. Github was blocking the line without them):

{% addtoblock ""css"" %} <link 'href'=""{% sass_src 'node_modules/angular-bootstrap-plus/src/scrollpanel/scrollpanel.scss' %}"" rel=""stylesheet"" type=""text/css"" />{% endaddtoblock %}

{% addtoblock ""js"" %}<script src=""{% static 'node_modules/angular-bootstrap-plus/src/scrollpanel/scrollpanel.js' %}"" type=""text/javascript""></script>{% endaddtoblock %}

![error](https://user-images.githubusercontent.com/20022106/41941302-2fc308fe-7961-11e8-83f6-a75933642b9e.png)
"
14182,awesto,django-shop,2,closed,732,6,https://api.github.com/repos/awesto/django-shop/issues/732/comments,https://github.com/awesto/django-shop/issues/732,[],ImportError: No module named 'polymorphic.manager',"Hi,

Today i got import error: File ""/home/.../shop/models/product.py"", line 12, in <module>
    from polymorphic.manager import PolymorphicManager

I installed _django-polymorphic==2.0.2_

It seems this issue related to [django-polymorphic's issue](https://github.com/django-polymorphic/django-polymorphic-tree/issues/61). [Patch](https://github.com/django-polymorphic/django-polymorphic-tree/pull/62/files) from there also works in my case.

"
14186,awesto,django-shop,2,closed,728,1,https://api.github.com/repos/awesto/django-shop/issues/728/comments,https://github.com/awesto/django-shop/issues/728,[],what are the actuall requirements for your example shop? ,"I am in the directory: ~/Tutorial/django-shop/example$ 
when I am going to: pip3 install -r requirements.txt, I got some version complexity. It shows me some errors like: django-shop 0.12.1 has requirement Django<2.0,>=1.9.12, but you'll have django 1.9 which is incompatible.
django-allauth 0.35.0 has requirement Django>=1.11, but you'll have django 1.9 which is incompatible.

So, I'm getting bored actually.and wanna really know what are the actual requirements? 

N.B:I did this before: 
(myenv)$ cd django-shop
(myenv)$ pip install -e ."
14194,awesto,django-shop,2,closed,719,3,https://api.github.com/repos/awesto/django-shop/issues/719/comments,https://github.com/awesto/django-shop/issues/719,[],Failed building wheel for rcssmin,"----------------------------------------
  Failed building wheel for hiredis
  Running setup.py clean for hiredis
  Running setup.py bdist_wheel for rcssmin ... error
  Complete output from command /home/c013ra/Desktop/django-shop/myenv/bin/python3 -u -c ""import setuptools, tokenize;__file__='/tmp/pip-install-24x5vmdv/rcssmin/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))"" bdist_wheel -d /tmp/pip-wheel-ip9ie3jm --python-tag cp35:
  running bdist_wheel
  running build
  running build_py
  creating build
  creating build/lib.linux-x86_64-3.5
  copying ./rcssmin.py -> build/lib.linux-x86_64-3.5
  running build_ext
  building '_rcssmin' extension
  creating build/temp.linux-x86_64-3.5
  x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DEXT_MODULE=_rcssmin -UEXT_PACKAGE -I_setup/include -I/usr/include/python3.5m -I/home/c013ra/Desktop/django-shop/myenv/include/python3.5m -c rcssmin.c -o build/temp.linux-x86_64-3.5/rcssmin.o
  In file included from rcssmin.c:18:0:
  _setup/include/cext.h:34:20: fatal error: Python.h: No such file or directory
  compilation terminated.
  error: command 'x86_64-linux-gnu-gcc' failed with exit status 1
  
  ----------------------------------------
  Failed building wheel for rcssmin
  Running setup.py clean for rcssmin
  Running setup.py bdist_wheel for rjsmin ... error
  Complete output from command /home/c013ra/Desktop/django-shop/myenv/bin/python3 -u -c ""import setuptools, tokenize;__file__='/tmp/pip-install-24x5vmdv/rjsmin/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))"" bdist_wheel -d /tmp/pip-wheel-fe4qkzhn --python-tag cp35:
  running bdist_wheel
  running build
  running build_py
  creating build
  creating build/lib.linux-x86_64-3.5
  copying ./rjsmin.py -> build/lib.linux-x86_64-3.5
  running build_ext
  building '_rjsmin' extension
  creating build/temp.linux-x86_64-3.5
  x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DEXT_MODULE=_rjsmin -UEXT_PACKAGE -I_setup/include -I/usr/include/python3.5m -I/home/c013ra/Desktop/django-shop/myenv/include/python3.5m -c rjsmin.c -o build/temp.linux-x86_64-3.5/rjsmin.o
  In file included from rjsmin.c:18:0:
  _setup/include/cext.h:34:20: fatal error: Python.h: No such file or directory
  compilation terminated.
  error: command 'x86_64-linux-gnu-gcc' failed with exit status 1
  
  ----------------------------------------
  Failed building wheel for rjsmin
  Running setup.py clean for rjsmin
Failed to build hiredis rcssmin rjsmin
django-filer 1.3.0 has requirement easy-thumbnails<2.5,>=2, but you'll have easy-thumbnails 2.5 which is incompatible.
django-haystack 2.5.0 has requirement Django<1.10, but you'll have django 1.10 which is incompatible.
django-allauth 0.35.0 has requirement Django>=1.11, but you'll have django 1.10 which is incompatible.
Installing collected packages: rcssmin, rjsmin, django-compressor, Unidecode, django-polymorphic, olefile, Pillow, easy-thumbnails, django-mptt, django-filer, django-filter, django-fsm, django-fsm-admin, django-haystack, django-ipware, django-parler, jsonfield, django-post-office, redis, django-redis-cache, django-redis-sessions, djangorestframework, six, django-rest-auth, django-sass-processor, djangocms-bootstrap3, html5lib, djangocms-text-ckeditor, djangocms-cascade, python-dateutil, drf-haystack, elasticsearch, hiredis, libsass, python-openid, pytz, virtualenv, wheel, beautifulsoup4, bs4
  Running setup.py install for rcssmin ... error
    Complete output from command /home/c013ra/Desktop/django-shop/myenv/bin/python3 -u -c ""import setuptools, tokenize;__file__='/tmp/pip-install-24x5vmdv/rcssmin/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))"" install --record /tmp/pip-record-y8abyajq/install-record.txt --single-version-externally-managed --compile --install-headers /home/c013ra/Desktop/django-shop/myenv/include/site/python3.5/rcssmin:
    running install
    running build
    running build_py
    creating build
    creating build/lib.linux-x86_64-3.5
    copying ./rcssmin.py -> build/lib.linux-x86_64-3.5
    running build_ext
    building '_rcssmin' extension
    creating build/temp.linux-x86_64-3.5
    x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DEXT_MODULE=_rcssmin -UEXT_PACKAGE -I_setup/include -I/usr/include/python3.5m -I/home/c013ra/Desktop/django-shop/myenv/include/python3.5m -c rcssmin.c -o build/temp.linux-x86_64-3.5/rcssmin.o
    In file included from rcssmin.c:18:0:
    _setup/include/cext.h:34:20: fatal error: Python.h: No such file or directory
    compilation terminated.
    error: command 'x86_64-linux-gnu-gcc' failed with exit status 1
    
    ----------------------------------------
Command ""/home/c013ra/Desktop/django-shop/myenv/bin/python3 -u -c ""import setuptools, tokenize;__file__='/tmp/pip-install-24x5vmdv/rcssmin/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\r\n', '\n');f.close();exec(compile(code, __file__, 'exec'))"" install --record /tmp/pip-record-y8abyajq/install-record.txt --single-version-externally-managed --compile --install-headers /home/c013ra/Desktop/django-shop/myenv/include/site/python3.5/rcssmin"" failed with error code 1 in /tmp/pip-install-24x5vmdv/rcssmin/
"
14196,awesto,django-shop,2,closed,716,3,https://api.github.com/repos/awesto/django-shop/issues/716/comments,https://github.com/awesto/django-shop/issues/716,[],User model (AUTH_USER_MODEL) customization impossible  ,"Impossible de override the AUTH_USER_MODEL.
If I do it, the migrate process fails with this stack trace:

```
Applying shop.0001_initial...Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 356, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/core/management/base.py"", line 283, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/core/management/base.py"", line 330, in execute
    output = self.handle(*args, **options)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/migration.py"", line 119, in apply
    operation.state_forwards(self.app_label, project_state)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/operations/models.py"", line 91, in state_forwards
    list(self.managers),
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/state.py"", line 105, in add_model
    self.reload_model(app_label, model_name)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/state.py"", line 166, in reload_model
    self._reload(related_models)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/state.py"", line 199, in _reload
    self.apps.render_multiple(states_to_be_rendered)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/state.py"", line 323, in render_multiple
    model.render(self)
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/migrations/state.py"", line 626, in render
    body,
  File ""/home/myproject/website/venv/lib/python3.6/site-packages/django/db/models/base.py"", line 158, in __new__
    raise TypeError(""%s cannot proxy the swapped model '%s'."" % (name, base_meta.swapped))
TypeError: CustomerProxy cannot proxy the swapped model 'website_auth.User'.
```
This is due to this code in shop.0001_initial.py migration

```
if 'email_auth' in settings.INSTALLED_APPS:
   dependencies.append(('email_auth', '0001_initial'))
   customer_bases = ('email_auth.user',)
else:
   dependencies.append(('auth', '0001_initial'))
   customer_bases = ('auth.user',)
```
Unless there is an alternative I missed, that make impossible:

1.  to embed django-shop to an existing project who already override the Django User model.
2.  to customize the django user model by AUTH_USER_MODEL setting"
14200,awesto,django-shop,2,closed,712,1,https://api.github.com/repos/awesto/django-shop/issues/712/comments,https://github.com/awesto/django-shop/issues/712,[],ModuleNotFoundError: No module named X,"I'm trying to set up django-SHOP in a virtual environment on my Mac (using python 3.6.4 installed by [Homebrew](https://brew.sh)). I followed the instructions found in [the tutorial](http://django-shop.readthedocs.io/en/latest/tutorial/intro.html) and everything goes well until I try to do the first migration (cf. [§1.2.1](http://django-shop.readthedocs.io/en/latest/tutorial/intro.html#create-a-database-for-the-demo)), when I get errors like this:

    [venv] rob@carbon in ~/projects/django-shop-gh/django-shop/example
    % ./manage.py migrate
    Traceback (most recent call last):
      File ""./manage.py"", line 10, in <module>
        execute_from_command_line(sys.argv)
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
        utility.execute()
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/site-packages/django/core/management/__init__.py"", line 327, in execute
        django.setup()
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/site-packages/django/__init__.py"", line 18, in setup
        apps.populate(settings.INSTALLED_APPS)
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/site-packages/django/apps/registry.py"", line 85, in populate
        app_config = AppConfig.create(entry)
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/site-packages/django/apps/config.py"", line 90, in create
        module = import_module(entry)
      File ""/Users/rob/projects/django-shop-gh/django-shop/venv/lib/python3.6/importlib/__init__.py"", line 126, in import_module
        return _bootstrap._gcd_import(name[level:], package, level)
      File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 953, in _find_and_load_unlocked
    ModuleNotFoundError: No module named 'django_select2'

I thought that the requirements file would have installed this, but that's OK. I run `pip install django_select2` and re-run the migration:

    [venv] rob@carbon in ~/projects/django-shop-gh/django-shop/example
    % ./manage.py migrate
    Traceback (most recent call last):
      File ""./manage.py"", line 10, in <module>
        execute_from_command_line(sys.argv)
      [...]
      File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 953, in _find_and_load_unlocked
    ModuleNotFoundError: No module named 'djng'

Unfortunately, when I try running `pip install djng`, I get an error: ""No matching distribution found for djng"". A bit of Googling found that this is because `django-angular` isn't installed. I install that with `pip` and re-run:

    [venv] rob@carbon in ~/projects/django-shop-gh/django-shop/example
    % ./manage.py migrate
    Traceback (most recent call last):
      File ""./manage.py"", line 10, in <module>
        execute_from_command_line(sys.argv)
      [...]
      File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 953, in _find_and_load_unlocked
    ModuleNotFoundError: No module named 'shop_stripe'

This is getting ridiculous. How come the requirements aren't being installed automatically?

If this helps, here's the results of `pip list`:

    [venv] rob@carbon in ~/projects/django-shop-gh/django-shop/example
    % pip list
    DEPRECATION: The default format will switch to columns in the future. You can use --format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning.
    beautifulsoup4 (4.6.0)
    bs4 (0.0.1)
    certifi (2017.11.5)
    chardet (3.0.4)
    defusedxml (0.5.0)
    Django (1.10.8)
    django-admin-sortable2 (0.6.19)
    django-allauth (0.23.0)
    django-angular (2.0.2)
    django-appconf (1.0.2)
    django-classy-tags (0.8.0)
    django-cms (3.4.5)
    django-compressor (2.2)
    django-extensions (2.0.3)
    django-filer (1.3.0)
    django-filter (1.1.0)
    django-formtools (2.1)
    django-fsm (2.6.0)
    django-fsm-admin (1.2.4)
    django-haystack (2.5.0)
    django-ipware (1.1.1)
    django-mptt (0.8.7)
    django-parler (1.8)
    django-polymorphic (1.3)
    django-post-office (3.0.3)
    django-redis-cache (1.7.1)
    django-redis-sessions (0.6.1)
    django-rest-auth (0.9.2)
    django-sass-processor (0.5.5)
    django-sekizai (0.10.0)
    django-select2 (6.0.2)
    django-shop (0.11.7, /Users/rob/projects/django-shop-gh/django-shop)
    django-treebeard (4.1.1)
    djangocms-admin-style (1.2.7)
    djangocms-bootstrap3 (0.3.1)
    djangocms-cascade (0.15.5)
    djangocms-text-ckeditor (3.4.0)
    djangorestframework (3.7.3)
    drf-haystack (1.6.1)
    easy-thumbnails (2.4.2)
    elasticsearch (1.7.0)
    hiredis (0.2.0)
    html5lib (0.9999999)
    idna (2.6)
    jsonfield (1.0.3)
    libsass (0.12.3)
    oauthlib (1.0.3)
    olefile (0.45.1)
    Pillow (4.3.0)
    pip (9.0.1)
    pygraphviz (1.3.1)
    python-dateutil (2.6.0)
    python-openid (2.2.5)
    python3-openid (3.1.0)
    pytz (2015.7)
    rcssmin (1.0.6)
    redis (2.10.6)
    requests (2.18.4)
    requests-oauthlib (0.5.0)
    rjsmin (1.0.12)
    setuptools (38.5.2)
    six (1.11.0)
    Unidecode (0.4.18)
    urllib3 (1.22)
    virtualenv (13.1.2)
    wheel (0.24.0)

**Note:** I've also installed `pygraphviz` and `django-extensions` because I want to graph the models, [like so](https://gist.github.com/perrygeo/5380196). 

EDIT: updated to fix a few minor things."
14204,awesto,django-shop,2,closed,708,4,https://api.github.com/repos/awesto/django-shop/issues/708/comments,https://github.com/awesto/django-shop/issues/708,[],Passing 'None' when calling `django.template.loader.select_template` in 'cascade/catalog.py',"This is the offending piece of code on line 66 of 'cascade/catalog.py':

```
    def get_render_template(self, context, instance, placeholder):
        template = select_template([
            instance.glossary.get('render_template') or None,
            '{}/catalog/product-add2cart.html'.format(app_settings.APP_LABEL),
            'shop/catalog/product-add2cart.html',
        ])

        return template
```

If the instance doesn't have a template in its glossary then `None` is passed to `select_template(...)` which causes a 500 ISE with the following traceback:

```
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/cms/plugin_base.py"", line 155, in _get_render_template
    template = self.get_render_template(context, instance, placeholder)
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/shop/cascade/catalog.py"", line 68, in get_render_template
    'shop/catalog/product-add2cart.html',
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/loader.py"", line 48, in select_template
    return engine.get_template(template_name)
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/backends/django.py"", line 39, in get_template
    return Template(self.engine.get_template(template_name), self)
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/engine.py"", line 162, in get_template
    template, origin = self.find_template(template_name)
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/engine.py"", line 136, in find_template
    name, template_dirs=dirs, skip=skip,
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/loaders/base.py"", line 32, in get_template
    for origin in self.get_template_sources(*args):
  File ""/Users/mliu/.virtualenvs/session-aws/lib/python2.7/site-packages/django/template/loaders/eggs.py"", line 48, in get_template_sources
    pkg_name = 'templates/' + template_name
TypeError: coercing to Unicode: need string or buffer, NoneType found
```

`None` should not be passed `select_template(...)`.

I think the fix here is to create the list before sending it to `select_template(...)` without any references to `None`. I can make a PR if this sounds correct. This problem currently affects version 0.11.4 and up."
14224,awesto,django-shop,2,closed,682,3,https://api.github.com/repos/awesto/django-shop/issues/682/comments,https://github.com/awesto/django-shop/issues/682,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}]",Plugin left_extension is missing,"After an error/warningless installation of django-Shop, choosing i18n_commodity and creating the approriate pages, I get the following error after clicking on the cart icon:
TemplateSyntaxError at /en/cart/
Plugin is missing
Error during template rendering
In template /home/frank/test/django-shop/example/myshop/templates/myshop/cart/editable.html, error at line 0

Exactly the same error occurs when installing the i18n_commodity demo with initialize_shop_demo.

A slightly different error occurs after installing i18n_polymorphic and clicking on view orders in the footer.

As far as i have been able to trace back they are all related to a missing plugin left_extension."
14228,awesto,django-shop,2,closed,678,0,https://api.github.com/repos/awesto/django-shop/issues/678/comments,https://github.com/awesto/django-shop/issues/678,[],dumpdata in sqlite. ,"I want dumpdata from sqlite. Data was loaded with DJANGO_SHOP_TUTORIAL=polymorphic

./dumpdata.sh 
CommandError: Unable to serialize database: Value must be of type <enum 'CustomerState'>
"
14229,awesto,django-shop,2,closed,677,6,https://api.github.com/repos/awesto/django-shop/issues/677/comments,https://github.com/awesto/django-shop/issues/677,[],error when migrate in postgres,"i do ./manage.py migrate
in migration shop.0008_notification_recipient.py happends error 
 
```python
File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/migrations/operations/fields.py"", line 204, in database_forwards
    schema_editor.alter_field(from_model, from_field, to_field)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 495, in alter_field
    old_db_params, new_db_params, strict)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/backends/postgresql/schema.py"", line 117, in _alter_field
    new_db_params, strict,
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 578, in _alter_field
    new_default = self.effective_default(new_field)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/backends/base/schema.py"", line 221, in effective_default
    default = field.get_db_prep_save(default, self.connection)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/models/fields/__init__.py"", line 755, in get_db_prep_save
    prepared=False)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.5/site-packages/django/db/models/fields/__init__.py"", line 747, in get_db_prep_value
    value = self.get_prep_value(value)
  File ""/home/inzem/sites/django_shop/django-shop/shop/models/fields.py"", line 99, in get_prep_value
    raise ValueError(""Value must be of type {}"".format(self.enum_type))
ValueError: Value must be of type <enum 'ChoiceEnum'>

```
"
14236,awesto,django-shop,2,closed,670,5,https://api.github.com/repos/awesto/django-shop/issues/670/comments,https://github.com/awesto/django-shop/issues/670,[],The error is happend when populate a database using fixtures,"i read documentation and do as read here [https://django-shop.readthedocs.io/en/latest/tutorial/intro.html#populate-the-database-using-fixtures](url)

`(ENV) inzem@inzem-notebook: export DJANGO_SHOP_TUTORIAL=polymorphic DJANGO_DEBUG=1
(ENV) inzem@inzem-notebook: ./manage.py initialize_shop_demo
.....
Traceback (most recent call last):
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/python.py"", line 179, in Deserializer
    data[field.name] = field.to_python(field_value)
  File ""/home/inzem/sites/django_shop/django-shop/shop/models/fields.py"", line 110, in to_python
    return self.enum_type(state)
  File ""/usr/local/lib/python3.6/enum.py"", line 291, in __call__
    return cls.__new__(cls, value)
  File ""/usr/local/lib/python3.6/enum.py"", line 533, in __new__
    return cls._missing_(value)
  File ""/usr/local/lib/python3.6/enum.py"", line 546, in _missing_
    raise ValueError(""%r is not a valid %s"" % (value, cls.__name__))
ValueError: 'REGISTERED' is not a valid CustomerState

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/json.py"", line 80, in Deserializer
    for obj in PythonDeserializer(objects, **options):
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/python.py"", line 181, in Deserializer
    raise base.DeserializationError.WithData(e, d['model'], d.get('pk'), field_value)
django.core.serializers.base.DeserializationError: 'REGISTERED' is not a valid CustomerState: (myshop.customer:pk=1) field_value was 'REGISTERED'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/home/inzem/sites/django_shop/django-shop/example/myshop/management/commands/initialize_shop_demo.py"", line 62, in handle
    call_command('loaddata', fixture)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/__init__.py"", line 130, in call_command
    return command.execute(*args, **defaults)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/commands/loaddata.py"", line 64, in handle
    self.loaddata(fixture_labels)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/commands/loaddata.py"", line 104, in loaddata
    self.load_label(fixture_label)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/management/commands/loaddata.py"", line 161, in load_label
    for obj in objects:
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/json.py"", line 86, in Deserializer
    six.reraise(DeserializationError, DeserializationError(e), sys.exc_info()[2])
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/json.py"", line 80, in Deserializer
    for obj in PythonDeserializer(objects, **options):
  File ""/home/inzem/sites/django_shop/ENV/lib/python3.6/site-packages/django/core/serializers/python.py"", line 181, in Deserializer
    raise base.DeserializationError.WithData(e, d['model'], d.get('pk'), field_value)
django.core.serializers.base.DeserializationError: Problem installing fixture '/home/inzem/sites/django_shop/django-shop/workdir/polymorphic/fixtures/myshop.json': 'REGISTERED' is not a valid CustomerState: (myshop.customer:pk=1) field_value was 'REGISTERED'
`
Also it happens when i am using different DJANGO_SHOP_TUTORIAL environment variable"
14243,awesto,django-shop,2,closed,659,3,https://api.github.com/repos/awesto/django-shop/issues/659/comments,https://github.com/awesto/django-shop/issues/659,[],deploy,"I was following the tutorial http://django-shop.readthedocs.io/en/latest/tutorial/intro.html
I went up to the point 
_export DJANGO_SHOP_TUTORIAL=i18n_polymorphic DJANGO_DEBUG=1_
_./manage.py initialize_shop_demo_
_./manage.py runserver_
And it works well while I use the development server
but when i run the same using uwsgi
_uwsgi --http :8000 --wsgi-file wsgi.py_ 
it does not find static files and gives a lot of Not Found warnings
for instance **WARNING: Not Found: /en/static/myshop/js/navbar.js/**
As a result the web site looks ugly.
Sorry if the issue is stupid.
"
14251,awesto,django-shop,2,closed,651,14,https://api.github.com/repos/awesto/django-shop/issues/651/comments,https://github.com/awesto/django-shop/issues/651,[],Error if email field is not unique,"The [docs](http://django-shop.readthedocs.io/en/latest/reference/customer-model.html?highlight=user_email#caveat-when-using-this-alternative-user-model) quote:
> The savvy reader may have noticed that in email_auth.models.User, the email field is not declared as unique. This by the way causes Django to complain during startup with:

However, I see that this is not a warning, it is an error:

```
$./manage.py makemigrations
SystemCheckError: System check identified some issues:

ERRORS:
email_auth.User: (auth.E003) 'User.email' must be unique because it is named as the 'USERNAME_FIELD'.
```
settings.py
```
AUTH_USER_MODEL = 'email_auth.User'
HOP_GUEST_IS_ACTIVE_USER = True
SILENCED_SYSTEM_CHECKS = ['auth.W004']
```
Shall I make it unique or did I miss a setting?"
14252,awesto,django-shop,2,closed,650,7,https://api.github.com/repos/awesto/django-shop/issues/650/comments,https://github.com/awesto/django-shop/issues/650,[],Error running shop.0007_notification_recipient migration using MySQL.,"Hi,

I am getting this error while trying to migrate an existing project to django-shop 0.11 - using MySQL.
This only happens trying to migrate existing data, starting a fresh database works fine.

```bash
Applying shop.0007_notification_recipient...Traceback (most recent call last):
  File ""manage.py"", line 23, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/management/__init__.py"", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/management/base.py"", line 294, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/management/base.py"", line 345, in execute
    output = self.handle(*args, **options)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
    fake_initial=fake_initial,
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 115, in migrate
    state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
    state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
    state = migration.apply(state, schema_editor)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/migrations/migration.py"", line 129, in apply
    operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/migrations/operations/fields.py"", line 204, in database_forwards
    schema_editor.alter_field(from_model, from_field, to_field)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 495, in alter_field
    old_db_params, new_db_params, strict)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 732, in _alter_field
    self.execute(self._create_fk_sql(model, new_field, ""_fk_%(to_table)s_%(to_column)s""))
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/base/schema.py"", line 112, in execute
    cursor.execute(sql, params)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/utils.py"", line 79, in execute
    return super(CursorDebugWrapper, self).execute(sql, params)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/utils.py"", line 94, in __exit__
    six.reraise(dj_exc_type, dj_exc_value, traceback)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/backends/mysql/base.py"", line 110, in execute
    return self.cursor.execute(query, args)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/MySQLdb/cursors.py"", line 205, in execute
    self.errorhandler(self, exc, value)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/MySQLdb/connections.py"", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
django.db.utils.IntegrityError: (1452, 'Cannot add or update a child row: a foreign key constraint fails (`ecuga_site`.`#sql-2a3_2e2`, CONSTRAINT `shop_notification_recipient_id_81184845_fk_auth_user_id` FOREIGN KEY (`recipient_id`) REFERENCES `auth_user` (`id`))')
```"
14256,awesto,django-shop,2,closed,646,3,https://api.github.com/repos/awesto/django-shop/issues/646/comments,https://github.com/awesto/django-shop/issues/646,[],Order thank you page changed from 0.10.2 in 0.11,"We've recently upgraded to django-shop 0.11 which caused some of our checkout tests to fail because the expected ""Thank you page"" no longer exists. After doing some debugging I think the actual bug is in 0.10.2 but was fixed by the order plugin refactoring in 0.11.

In 0.10.2 the thank you page would show the Order list view instead of the detail view. This is confusing because the url here in order_last.py indicates that 'many' should be False: https://github.com/awesto/django-shop/blob/0.10.2/shop/urls/order_last.py#L8. However 'many' is always true when the code reaches the 'OrderView' and so the thank you page shows the list view.

![screen shot 2017-08-30 at 12 28 59 pm](https://user-images.githubusercontent.com/11674155/29883597-d40b4cfc-8d7e-11e7-92dd-f6ca94a6547b.png)

You can also verify this by using debug statements within the OrderView.

In 0.11 the thank you page is correct according to the code and show the order detail page, but there is no thank you message. 

![screen shot 2017-08-30 at 12 27 51 pm](https://user-images.githubusercontent.com/11674155/29883564-bb364786-8d7e-11e7-807f-f014d5ef2969.png)

There are a couple questions that I have regarding this behavior. What is the intended thank you page? Should that page show the thank you message?"
14261,awesto,django-shop,3,closed,640,3,https://api.github.com/repos/awesto/django-shop/issues/640/comments,https://github.com/awesto/django-shop/issues/640,[],ValueError with migration 0007_notification_recipient from tag 0.11,"I just got this error when migrating using the new release. I'm not sure where it's getting the '9' from, there's nothing in the shop_notification table with that number..

>   Applying shop.0007_notification_recipient...Traceback (most recent call last):
>   File ""./manage.py"", line 22, in <module>
>     execute_from_command_line(sys.argv)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
>     utility.execute()
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 359, in execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/core/management/base.py"", line 294, in run_from_argv
>     self.execute(*args, **cmd_options)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/core/management/base.py"", line 345, in execute
>     output = self.handle(*args, **options)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/core/management/commands/migrate.py"", line 204, in handle
>     fake_initial=fake_initial,
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 115, in migrate
>     state = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 145, in _migrate_all_forwards
>     state = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/migrations/executor.py"", line 244, in apply_migration
>     state = migration.apply(state, schema_editor)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/migrations/migration.py"", line 129, in apply
>     operation.database_forwards(self.app_label, schema_editor, old_state, project_state)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/migrations/operations/special.py"", line 189, in database_forwards
>     self.code(from_state.apps, schema_editor)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/shop/migrations/0007_notification_recipient.py"", line 16, in forwards
>     for row in Notification.objects.all():
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/models/query.py"", line 256, in __iter__
>     self._fetch_all()
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/models/query.py"", line 1087, in _fetch_all
>     self._result_cache = list(self.iterator())
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/models/query.py"", line 65, in __iter__
>     for row in compiler.results_iter(results):
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 795, in results_iter
>     row = self.apply_converters(row, converters)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/django/db/models/sql/compiler.py"", line 779, in apply_converters
>     value = converter(value, expression, self.connection, self.query.context)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/shop/models/fields.py"", line 95, in from_db_value
>     return self.enum_type(value)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/site-packages/shop/models/fields.py"", line 49, in __call__
>     return super(ChoiceEnumMeta, cls).__call__(value, *args, **kwargs)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/enum.py"", line 241, in __call__
>     return cls.__new__(cls, value)
>   File ""/Users/rich/.pyenv/versions/3.5.2/lib/python3.5/enum.py"", line 476, in __new__
>     raise ValueError(""%r is not a valid %s"" % (value, cls.__name__))
> ValueError: 9 is not a valid ChoiceEnum"
14264,awesto,django-shop,3,closed,637,0,https://api.github.com/repos/awesto/django-shop/issues/637/comments,https://github.com/awesto/django-shop/issues/637,[],AttributeError: module 'shop.models.customer' has no attribute 'CustomerStateField',"When upgrading to version `0.11.dev0` I received this error due to my `0001_initial.py` migration referring to the `recognized` field according to django-SHOP version 0.10.2.

I was forced to modify my `0001_initial.py` migration with this:

`('recognized', shop.models.fields.ChoiceEnumField(enum_type=shop.models.customer.CustomerState, help_text='Designates the state the customer is recognized as.', verbose_name='Recognized as'))`

They are compatible configurations since both fields derive from `models.PositiveSmallIntegerField` and CustomerState has not changed"
14271,awesto,django-shop,3,closed,628,2,https://api.github.com/repos/awesto/django-shop/issues/628/comments,https://github.com/awesto/django-shop/issues/628,[],Error when applying Media Configuration settings,"I am using Python 3.4.2 on a Debian 8 Jessie box.

When applying the settings included in the [Media Configuration](https://django-shop.readthedocs.io/en/latest/reference/configuration.html#media-assets-handling) chapter, I receive the following error:

```
Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f59e03f9d90>
Traceback (most recent call last):
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/utils.py"", line 65, in __getitem__
    return self._engines[alias]
KeyError: 'django'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/core/management/commands/runserver.py"", line 113, in inner_run
    autoreload.raise_last_exception()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 249, in raise_last_exception
    six.reraise(*_exception)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/contrib/admin/apps.py"", line 23, in ready
    self.module.autodiscover()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/contrib/admin/__init__.py"", line 26, in autodiscover
    autodiscover_modules('admin', register_to=site)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/module_loading.py"", line 50, in autodiscover_modules
    import_module('%s.%s' % (app_config.name, module_to_search))
  File "".virtualenvs/etisd/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File "".virtualenvs/etisd/lib/python3.4/site-packages/cmsplugin_cascade/sharable/admin.py"", line 10, in <module>
    from cmsplugin_cascade.plugin_base import CascadePluginMixinMetaclass
  File "".virtualenvs/etisd/lib/python3.4/site-packages/cmsplugin_cascade/plugin_base.py"", line 27, in <module>
    from .hide_plugins import HidePluginMixin
  File "".virtualenvs/etisd/lib/python3.4/site-packages/cmsplugin_cascade/hide_plugins.py"", line 12, in <module>
    class HidePluginMixin(object):
  File "".virtualenvs/etisd/lib/python3.4/site-packages/cmsplugin_cascade/hide_plugins.py"", line 17, in HidePluginMixin
    suppress_template = engines['django'].from_string('')
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/utils.py"", line 80, in __getitem__
    engine = engine_cls(params)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/backends/django.py"", line 30, in __init__
    options['libraries'] = self.get_templatetag_libraries(libraries)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/backends/django.py"", line 48, in get_templatetag_libraries
    libraries = get_installed_libraries()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/backends/django.py"", line 113, in get_installed_libraries
    for name in get_package_libraries(pkg):
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/template/backends/django.py"", line 126, in get_package_libraries
    module = import_module(entry[1])
  File "".virtualenvs/etisd/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/templatetags/thumbnail.py"", line 19, in <module>
    VALID_OPTIONS = utils.valid_processor_options()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/utils.py"", line 53, in valid_processor_options
    settings.THUMBNAIL_SOURCE_GENERATORS]
TypeError: can only concatenate list (not ""tuple"") to list

```
When updating `django-sekizai` as per [this post](https://github.com/divio/django-cms/issues/5160), another error appears:
```


Unhandled exception in thread started by <function check_errors.<locals>.wrapper at 0x7f0d91156840>
Traceback (most recent call last):
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 228, in wrapper
    fn(*args, **kwargs)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/core/management/commands/runserver.py"", line 117, in inner_run
    autoreload.raise_last_exception()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 251, in raise_last_exception
    six.reraise(*_exception)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/six.py"", line 685, in reraise
    raise value.with_traceback(tb)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/utils/autoreload.py"", line 228, in wrapper
    fn(*args, **kwargs)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/apps/registry.py"", line 85, in populate
    app_config = AppConfig.create(entry)
  File "".virtualenvs/etisd/lib/python3.4/site-packages/django/apps/config.py"", line 94, in create
    module = import_module(entry)
  File "".virtualenvs/etisd/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/optimize/__init__.py"", line 3, in <module>
    from easy_thumbnails.optimize.post_processor import optimize_thumbnail
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/optimize/post_processor.py"", line 7, in <module>
    from easy_thumbnails.optimize.conf import settings
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/optimize/conf.py"", line 2, in <module>
    from easy_thumbnails.conf import Settings
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/conf.py"", line 334, in <module>
    settings = Settings()
  File "".virtualenvs/etisd/lib/python3.4/site-packages/easy_thumbnails/conf.py"", line 21, in __init__
    super(AppSettings, self).__init__(*args, **kwargs)
TypeError: __init__() missing 1 required positional argument: 'settings_module'
```
Commenting out all the media configuration lines, everything returns to normal.
"
14277,awesto,django-shop,3,closed,622,1,https://api.github.com/repos/awesto/django-shop/issues/622/comments,https://github.com/awesto/django-shop/issues/622,"[{""default"": false, ""name"": ""easy-picking"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/easy-picking"", ""color"": ""fef2c0"", ""node_id"": ""MDU6TGFiZWw0MzE0Mzg5NjU="", ""id"": 431438965}]",CMSPageRenderer shall add data to context only once,"Currently the method `shop.rest.renderers.CMSPageRenderer.render` merges the serialized data, once into the `template_context` and once as extra attribute `template_context['data']`.

This is confusing and may cause errors by polluting the global context namespace. Instead the serialized data shall only be added to `template_context['data']`.

Additionally, the View class using that renderer shall be allowed to override the attribute name `data`. I would propose to add `context_data_name = 'my_data'` to the View class (in analogy to `context_object_name` in Django View classes)."
14283,awesto,django-shop,3,closed,616,4,https://api.github.com/repos/awesto/django-shop/issues/616/comments,https://github.com/awesto/django-shop/issues/616,[],"TypeError: new enumerations must be created as `ClassName([mixin_type,] enum_type)`","step by step  (django 1.9 python3.6)
1.2.1. Create a database for the demo
(shoptutorial)$ cd django-shop/example
(shoptutorial)$ export DJANGO_SHOP_TUTORIAL=commodity DJANGO_DEBUG=1
(shoptutorial)$ ./manage.py migrate

then occur this eoor"
14290,awesto,django-shop,3,closed,608,3,https://api.github.com/repos/awesto/django-shop/issues/608/comments,https://github.com/awesto/django-shop/issues/608,[],angular scope not updating with plugin_order & plugin_id,"I'm overriding the GuestForm plugin and form like below, but when put on a CMS page with a Proceed Button I get the following error because the angular scope does not contain plugin_order & plugin_id, hence the upload() request doesn't either.
The normal Guest Form seems to work fine in the same way.

Any idea why?

```
File ""/Users/rich/Documents/source/django-shop/shop/views/checkout.py"", line 65, in <lambda>
    dialog_data = sorted(dialog_data, key=lambda tpl: int(tpl[1]['plugin_order']))
TypeError: string indices must be integers
```

```
class RegisterSubscriptionFormPlugin(CustomerFormPluginBase):
    name = _(""Register Subscription Form"")
    form_class = 'shop_subscribe.forms.RegisterSubscriptionForm'
DialogFormPluginBase.register_plugin(RegisterSubscriptionFormPlugin)
```

```
class RegisterSubscriptionForm(GuestForm):
    legend = _(""Subscribe to product updates"")
```"
14297,awesto,django-shop,3,closed,601,3,https://api.github.com/repos/awesto/django-shop/issues/601/comments,https://github.com/awesto/django-shop/issues/601,[],How I allow user to register without items in cart?,"Now I need to allow user to register without items in cart, but if I use AuthFormsView (by default) I see warning: ""Unable to proceed to the checkout page without items in the cart.""

I try to use custom AuthFormsView like this:
```
class CustomAuthFormsView(GenericAPIView):
    serializer_class = None
    form_class = None

    def post(self, request, *args, **kwargs):
        # if request.customer.is_visitor():
        #     errmsg = _(""Unable to proceed to the checkout page without items in the cart."")
        #     errors = {NON_FIELD_ERRORS: errmsg}
        #     return Response(errors, status=status.HTTP_400_BAD_REQUEST)
        form = self.form_class(data=request.data, instance=request.customer)
        if form.is_valid():
            form.save(request=request)
            return Response(form.data, status=status.HTTP_200_OK)
        return Response(dict(form.errors), status=status.HTTP_400_BAD_REQUEST)
```

But I get error:
```
Traceback (most recent call last):
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/rest_framework/views.py"", line 477, in dispatch
    response = self.handle_exception(exc)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/rest_framework/views.py"", line 437, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/rest_framework/views.py"", line 474, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/home/vivazzi/projects/lonx/spec/forms.py"", line 21, in post
    form = self.form_class(data=request.data, instance=request.customer)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/shop/forms/auth.py"", line 55, in __init__
    super(RegisterUserForm, self).__init__(data=data, instance=instance, *args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/djng/forms/angular_model.py"", line 41, in __init__
    super(NgModelFormMixin, self).__init__(data, *args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/djng/forms/angular_validation.py"", line 17, in __init__
    super(NgFormValidationMixin, self).__init__(*args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/djng/forms/angular_base.py"", line 252, in __init__
    super(NgFormBaseMixin, self).__init__(data=data, *args, **kwargs)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/forms/models.py"", line 282, in __init__
    object_data = model_to_dict(instance, opts.fields, opts.exclude)
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/forms/models.py"", line 87, in model_to_dict
    opts = instance._meta
  File ""/home/vivazzi/projects/lonx/env/local/lib/python2.7/site-packages/django/utils/functional.py"", line 235, in inner
    return func(self._wrapped, *args)
AttributeError: 'VisitingCustomer' object has no attribute '_meta'
```

It is important to me to allow user, because some users register as partner on our site, which don't buy anything from our shop."
14304,awesto,django-shop,3,closed,593,10,https://api.github.com/repos/awesto/django-shop/issues/593/comments,https://github.com/awesto/django-shop/issues/593,[],Error trying to login if cart has been touched beforehand.,"Adding and removing the product from cart, with cart quantity=0 also causes this.

```bash
Traceback (most recent call last):
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/contrib/staticfiles/handlers.py"", line 63, in __call__
    return self.application(environ, start_response)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 170, in __call__
    response = self.get_response(request)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/handlers/base.py"", line 140, in get_response
    response = self.handle_uncaught_exception(request, get_resolver(get_urlconf()), sys.exc_info())
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/handlers/base.py"", line 234, in handle_uncaught_exception
    return handle_uncaught_exception(request, resolver, exc_info)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 136, in handle_uncaught_exception
    return debug.technical_500_response(request, *exc_info)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django_extensions/management/technical_response.py"", line 6, in null_technical_500_response
    six.reraise(exc_type, exc_value, tb)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/core/handlers/base.py"", line 131, in get_response
    response = middleware_method(request, response)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/shop/middleware.py"", line 35, in process_response
    request.customer.save(update_fields=['last_access'])
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/shop/models/customer.py"", line 367, in save
    super(BaseCustomer, self).save(**kwargs)
  File ""/Users/dino/.virtualenvs/ecuga.com/lib/python2.7/site-packages/django/db/models/base.py"", line 752, in save
    ""unsaved related object '%s'."" % field.name
ValueError: save() prohibited to prevent data loss due to unsaved related object 'user'.
```

When this happens the cart contents are merged with the customer's cart that's trying to login.
Re-submitting the login form after this happens allows login without errors."
14316,awesto,django-shop,3,closed,580,3,https://api.github.com/repos/awesto/django-shop/issues/580/comments,https://github.com/awesto/django-shop/issues/580,[],upgrade node modules in version >=0.10.0,"Hi,

I notice the `package.json` required by npm has been moved into the subfolder `example` as of version 0.10.
It appears according to [this thread](https://github.com/npm/npm/issues/2974) that npm does not have the ability to install from a package file in a subfolder of a repo. I used to use `npm install git://github.com/awesto/django-shop.git#0.9.2` which now fails with an error.

Is there a workaround for this or could the `package.json` be moved back to the repo root? I consider the npm packages a requirement of the framework, not just of the example anyway..."
14340,awesto,django-shop,3,closed,550,2,https://api.github.com/repos/awesto/django-shop/issues/550/comments,https://github.com/awesto/django-shop/issues/550,[],Error applying shop.0004_ckeditor31 migration.,"I get this error trying to run `shop.0004_ckeditor` migration, using MySQL:

```zsh
django.db.utils.OperationalError: (1093, ""You can't specify target table 'cms_cmsplugin' for update in FROM clause"")
```
Maybe has to do with this?
http://stackoverflow.com/questions/4429319/you-cant-specify-target-table-for-update-in-from-clause

When I Changed:
```python
""SELECT id FROM  cms_cmsplugin WHERE plugin_type='AcceptConditionFormPlugin');""
```
to:
```python
""SELECT id FROM (SELECT * FROM cms_cmsplugin) AS plugins WHERE plugin_type='AcceptConditionFormPlugin');""
```

the migrations ran fine."
14342,awesto,django-shop,3,closed,548,3,https://api.github.com/repos/awesto/django-shop/issues/548/comments,https://github.com/awesto/django-shop/issues/548,[],Error unexpected keyword argument 'request' when visit your-orders page,"Error If user is not authntificate and tries visit page http://localhost:8000/info/your-orders/ :
```
Traceback (most recent call last):
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/django/core/handlers/exception.py"", line 42, in inner
    response = get_response(request)
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 217, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 215, in _get_response
    response = response.render()
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/django/template/response.py"", line 109, in render
    self.content = self.rendered_content
  File ""/home/vivazzi/.virtualenvs/django-shop-2/local/lib/python2.7/site-packages/rest_framework/response.py"", line 72, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
  File ""/home/vivazzi/projects/OTHERS/django-shop-2/django-shop/shop/rest/renderers.py"", line 35, in render
    return template.render(template_context, request=request)
TypeError: render() got an unexpected keyword argument 'request'
```"
14378,awesto,django-shop,4,closed,504,3,https://api.github.com/repos/awesto/django-shop/issues/504/comments,https://github.com/awesto/django-shop/issues/504,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}]",AcceptConditionFormPlugin is not compatible with current djangocms-text-ckeditor,"https://github.com/awesto/django-shop/blob/master/shop/cascade/checkout.py#L280

```
html_content = plugin_tags_to_user_html(html_content, context, placeholder)
```

```
TypeError: plugin_tags_to_user_html() takes 2 positional arguments but 3 were given
```
"
14380,awesto,django-shop,4,closed,502,2,https://api.github.com/repos/awesto/django-shop/issues/502/comments,https://github.com/awesto/django-shop/issues/502,[],Tutorial Issue,"Running the tutorial breaks for me on the migration part. When I `./manage.py migrate`I get the following error:

```
Unhandled exception in thread started by <function wrapper at 0x111d0f6e0>
Traceback (most recent call last):
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 109, in inner_run
    autoreload.raise_last_exception()
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/utils/autoreload.py"", line 249, in raise_last_exception
    six.reraise(*_exception)
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/utils/autoreload.py"", line 226, in wrapper
    fn(*args, **kwargs)
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/Users/test/shoptutorial/lib/python2.7/site-packages/django/apps/config.py"", line 202, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/test/shoptutorial/Tutorial/django-shop/shop/models/__init__.py"", line 2, in <module>
    from .notification import Notification, NotificationAttachment
  File ""/Users/test/shoptutorial/Tutorial/django-shop/shop/models/notification.py"", line 18, in <module>
    from .customer import CustomerModel
  File ""/Users/test/shoptutorial/Tutorial/django-shop/shop/models/customer.py"", line 23, in <module>
    from .related import ChoiceEnum
  File ""/Users/test/shoptutorial/Tutorial/django-shop/shop/models/related.py"", line 4, in <module>
    import enum
ImportError: No module named enum

```"
14381,awesto,django-shop,4,closed,501,3,https://api.github.com/repos/awesto/django-shop/issues/501/comments,https://github.com/awesto/django-shop/issues/501,[],Error while runing manage.py,"Hi! 

I have an error while running manage.py in ""example"" folder. I use python3.6 on MacOS Sierra.

Here is command:
(mytest) ➜  /Users/andrey/sites/shop/django-shop/example git:(master) ✗ python3 manage.py

Here is error:
`File ""/Users/andrey/.envs/mytest/lib/python3.6/enum.py"", line 439, in _get_mixins_
    raise TypeError(""new enumerations must be created as ""
TypeError: new enumerations must be created as ""ClassName([mixin_type,] enum_type)""'`

Maybe someone know what is it? 

Thanks!
"
14387,awesto,django-shop,4,closed,495,2,https://api.github.com/repos/awesto/django-shop/issues/495/comments,https://github.com/awesto/django-shop/issues/495,[],"Install 0.9.3 - python 3 ClassName([mixin_type,] enum_type)","Hi, I try to do new installations using python 3.6 and after:
(shoptutorial)$ cd example
(shoptutorial)$ export DJANGO_SHOP_TUTORIAL=commodity DJANGO_DEBUG=1
(shoptutorial)$ ./manage.py migrate

I got the following error:
`TypeError: new enumerations must be created as `ClassName([mixin_type,] enum_type)``

The problem does not occur with python2."
14394,awesto,django-shop,4,closed,487,1,https://api.github.com/repos/awesto/django-shop/issues/487/comments,https://github.com/awesto/django-shop/issues/487,[],Error when I run ./manage.py compilescss,"```
.......................................Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/django/core/management/__init__.py"", line 350, in execute_from_command_line
    utility.execute()
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/django/core/management/__init__.py"", line 342, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/sass_processor/management/commands/compilescss.py"", line 102, in handle
    self.parse_template(template_name)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/sass_processor/management/commands/compilescss.py"", line 268, in parse_template
    self.compile_sass(sass_filename)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/sass_processor/management/commands/compilescss.py"", line 286, in compile_sass
    content = sass.compile(**compile_kwargs)
  File ""/Users/korablevop/.virtualenvs/djangoshop/lib/python3.5/site-packages/sass.py"", line 517, in compile
    raise CompileError(v)
sass.CompileError: b'Error: file to import not found or unreadable: bootstrap-sass/assets/stylesheets/bootstrap\n       Current dir: /Users/korablevop/PycharmProjects/testshop/django-shop/shop/static/shop/css/\n        on line 2 of ../shop/static/shop/css/_django-shop.scss\n>> @import ""bootstrap-sass/assets/stylesheets/bootstrap"";\n   --------^\n'
```
"
14403,awesto,django-shop,4,closed,477,5,https://api.github.com/repos/awesto/django-shop/issues/477/comments,https://github.com/awesto/django-shop/issues/477,[],'OrderPayment.order' has not been mapped,"Hi,

I am trying to install Django Shop by hand.

I first installed and configured Django CMS which is working fine. Then I installed Django Shop with pip along with its dependencies and the required apps and some of the recommended ones. I configured it following the steps on that page: http://django-shop.readthedocs.io/en/latest/reference/configuration.html

But I am getting the following error when I try to migrate:

> django.core.exceptions.ImproperlyConfigured: Deferred foreign key 'OrderPayment.order' has not been mapped

Here is the content of my settings.py file:
[settings.py.txt](https://github.com/awesto/django-shop/files/625497/settings.py.txt)

Here are the apps I installed:

> beautifulsoup4==4.5.1
> Django==1.9.10
> django-admin-sortable2==0.6.6
> django-angular==0.8.4
> django-appconf==1.0.2
> django-classy-tags==0.8.0
> django-cms==3.3.3
> django-filer==1.2.5
> django-formtools==1.0
> django-fsm==2.4.0
> django-fsm-admin==1.2.4
> django-ipware==1.1.6
> django-mptt==0.8.6
> django-polymorphic==0.8.1
> django-post-office==2.0.8
> django-rest-auth==0.8.2
> django-sekizai==0.10.0
> Django-Select2==5.8.9
> django-shop==0.9.3
> django-treebeard==4.1.0
> djangocms-admin-style==1.2.6.2
> djangocms-cascade==0.11.0
> djangocms-text-ckeditor==3.3.1
> djangorestframework==3.5.3
> easy-thumbnails==2.3
> enum34==1.1.6
> html5lib==0.9999999
> jsonfield==1.0.3
> Pillow==3.4.2
> psycopg2==2.6.2
> six==1.10.0
> Unidecode==0.4.19

Do you have any idea how to solve this issue?

Do I have to code the models of my shop implementation first?
Do I have to copy the migration file of one of your examples to my shop implementation and customize it?

Thanks,

Olivier"
14419,awesto,django-shop,4,closed,453,2,https://api.github.com/repos/awesto/django-shop/issues/453/comments,https://github.com/awesto/django-shop/issues/453,[],Page calls fail when the shop instance is behind HTTP basic auth,"I have an additional temporary layer of protection in form of a HTTP basic auth in front of the shop instance and noticed that certain calls (login, product list, search) fail with responses similar to:

```
<Response status_code=403, ""text/html; charset=utf-8"">
{'detail': 'Invalid username/password.'}
```

The error only appeas when you are not logged in to the shop already, as soon as a valid session has been established, this does not occur anymore.

It might be related to django-allauth using the basic auth headers to identify users, but I haven't investigated further but instead replaced the basic auth with a VPN.

While investigating this issue, I also noticed #452 "
14427,awesto,django-shop,4,closed,444,5,https://api.github.com/repos/awesto/django-shop/issues/444/comments,https://github.com/awesto/django-shop/issues/444,[],0.9.3 upgrade issue with djangocms-cascade==0.11.0,"After upgrading to 0.9.3 i get an error regarding djangocms-cascade.

In my setup I'm not using any cascade plugins so my settings for djangocms-cascade is `CMSPLUGIN_CASCADE = {}` since it's required to specify.

```
Traceback (most recent call last):
  File ""manage.py"", line 14, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/core/management/__init__.py"", line 327, in execute
    django.setup()
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/contrib/admin/apps.py"", line 22, in ready
    self.module.autodiscover()
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/contrib/admin/__init__.py"", line 26, in autodiscover
    autodiscover_modules('admin', register_to=site)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/django/utils/module_loading.py"", line 50, in autodiscover_modules
    import_module('%s.%s' % (app_config.name, module_to_search))
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cms/admin/__init__.py"", line 11, in <module>
    plugin_pool.plugin_pool.discover_plugins()
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cms/plugin_pool.py"", line 32, in discover_plugins
    load('cms_plugins')
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cms/utils/django_load.py"", line 57, in load
    get_module(app, modname, verbose, failfast)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cms/utils/django_load.py"", line 41, in get_module
    module = import_module(module_name)
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cmsplugin_cascade/cms_plugins.py"", line 23, in <module>
    import_module('{}.cms_plugins'.format(module))
  File ""/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cmsplugin_cascade/generic/cms_plugins.py"", line 160, in <module>
    class FontIconPlugin(CascadePluginBase):
  File ""/Users/dino/.virtualenvs/gibi-trieste.com/lib/python2.7/site-packages/cmsplugin_cascade/plugin_base.py"", line 125, in __new__
    attrs['fields'] += (('save_shared_glossary', 'save_as_identifier'), 'shared_glossary',)
KeyError: u'fields'
```"
14439,awesto,django-shop,4,closed,431,9,https://api.github.com/repos/awesto/django-shop/issues/431/comments,https://github.com/awesto/django-shop/issues/431,"[{""default"": false, ""name"": ""accepted"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/accepted"", ""color"": ""0052cc"", ""node_id"": ""MDU6TGFiZWwzMjc2ODYwOTA="", ""id"": 327686090}, {""default"": false, ""name"": ""blocker"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/blocker"", ""color"": ""e11d21"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwMzI="", ""id"": 318797032}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}, {""default"": true, ""name"": ""documentation"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/documentation"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWw0NTIxODA5MTY="", ""id"": 452180916}]",Demo store not building or running,"I am trying to build a new django-shop app, as per the instructions at http://django-shop.readthedocs.io/en/latest/tutorial/intro.html and http://django-shop.readthedocs.io/en/latest/tutorial/quickstart.html#tutorial-quickstart

Here is my initial installation log.

```
(heroku) vagrant@vagrant:/vagrant/projects$ mkvirtualenv django-shop
Using base prefix '/usr'
New python executable in /home/vagrant/virtualenvs/django-shop/bin/python3.4
Also creating executable in /home/vagrant/virtualenvs/django-shop/bin/python
Installing setuptools, pip, wheel...done.
(django-shop) vagrant@vagrant:/vagrant/projects$ mkdir shop
(django-shop) vagrant@vagrant:/vagrant/projects$ cd shop
(django-shop) vagrant@vagrant:/vagrant/projects/shop$ git clone --depth 1 https://github.com/awesto/django-shop
Cloning into 'django-shop'...
remote: Counting objects: 521, done.
remote: Compressing objects: 100% (461/461), done.
remote: Total 521 (delta 52), reused 208 (delta 25), pack-reused 0
Receiving objects: 100% (521/521), 1.82 MiB | 87.00 KiB/s, done.
Resolving deltas: 100% (52/52), done.
Checking connectivity... done.
(django-shop) vagrant@vagrant:/vagrant/projects/shop$ cd django-shop
(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop$ pip install -e .
Obtaining file:///vagrant/projects/shop/django-shop
Collecting Django>=1.9 (from django-shop==0.9.2)
  Using cached Django-1.10.1-py2.py3-none-any.whl
Collecting djangocms-cascade>=0.10.2 (from django-shop==0.9.2)
Collecting beautifulsoup4>=4.4.0 (from django-shop==0.9.2)
  Using cached beautifulsoup4-4.5.1-py3-none-any.whl
Collecting django-cms>=3.3.2 (from django-shop==0.9.2)
  Using cached django_cms-3.4.0-py2.py3-none-any.whl
Collecting django-post-office>=2.0.8 (from django-shop==0.9.2)
  Using cached django_post_office-2.0.8-py2.py3-none-any.whl
Collecting django-filer>=1.2.5 (from django-shop==0.9.2)
  Using cached django_filer-1.2.5-py2.py3-none-any.whl
Collecting django-ipware>=1.1.1 (from django-shop==0.9.2)
Collecting django-fsm>=2.4.0 (from django-shop==0.9.2)
Collecting django-fsm-admin>=1.2.3 (from django-shop==0.9.2)
Collecting djangorestframework>=3.2.5 (from django-shop==0.9.2)
  Using cached djangorestframework-3.4.7-py2.py3-none-any.whl
Collecting django-angular>=0.8.4 (from django-shop==0.9.2)
Collecting Django-Select2>=5.8.9 (from django-shop==0.9.2)
Collecting django-rest-auth>=0.5.0 (from django-shop==0.9.2)
Collecting django-admin-sortable2>=0.6.4 (from django-shop==0.9.2)
Collecting jsonfield (from djangocms-cascade>=0.10.2->django-shop==0.9.2)
Collecting django-formtools>=1.0 (from django-cms>=3.3.2->django-shop==0.9.2)
  Using cached django_formtools-1.0-py2.py3-none-any.whl
Collecting django-sekizai>=0.7 (from django-cms>=3.3.2->django-shop==0.9.2)
  Using cached django_sekizai-0.10.0-py2.py3-none-any.whl
Collecting django-treebeard>=4.0.1 (from django-cms>=3.3.2->django-shop==0.9.2)
Collecting djangocms-admin-style>=1.0 (from django-cms>=3.3.2->django-shop==0.9.2)
Collecting django-classy-tags>=0.7.2 (from django-cms>=3.3.2->django-shop==0.9.2)
  Using cached django_classy_tags-0.8.0-py2.py3-none-any.whl
Collecting Unidecode<0.05,>=0.04 (from django-filer>=1.2.5->django-shop==0.9.2)
Collecting django-mptt<0.9,>=0.6 (from django-filer>=1.2.5->django-shop==0.9.2)
  Using cached django_mptt-0.8.6-py2.py3-none-any.whl
Collecting django-polymorphic<0.9,>=0.7 (from django-filer>=1.2.5->django-shop==0.9.2)
  Using cached django_polymorphic-0.8.1-py2.py3-none-any.whl
Collecting easy-thumbnails<2.4,>=1.0 (from django-filer>=1.2.5->django-shop==0.9.2)
  Using cached easy_thumbnails-2.3-py2.py3-none-any.whl
Collecting django-appconf>=0.6.0 (from Django-Select2>=5.8.9->django-shop==0.9.2)
  Using cached django_appconf-1.0.2-py2.py3-none-any.whl
Collecting six>=1.9.0 (from django-rest-auth>=0.5.0->django-shop==0.9.2)
  Using cached six-1.10.0-py2.py3-none-any.whl
Requirement already satisfied (use --upgrade to upgrade): setuptools in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from django-polymorphic<0.9,>=0.7->django-filer>=1.2.5->django-shop==0.9.2)
Collecting pillow (from easy-thumbnails<2.4,>=1.0->django-filer>=1.2.5->django-shop==0.9.2)
  Using cached Pillow-3.3.1-cp34-cp34m-manylinux1_x86_64.whl
Installing collected packages: Django, jsonfield, djangocms-cascade, beautifulsoup4, django-formtools, django-classy-tags, django-sekizai, django-treebeard, djangocms-admin-style, django-cms, django-post-office, Unidecode, django-mptt, django-polymorphic, pillow, easy-thumbnails, django-filer, django-ipware, django-fsm, django-fsm-admin, djangorestframework, django-angular, django-appconf, Django-Select2, six, django-rest-auth, django-admin-sortable2, django-shop
  Running setup.py develop for django-shop
Successfully installed Django-1.10.1 Django-Select2-5.8.9 Unidecode-0.4.19 beautifulsoup4-4.5.1 django-admin-sortable2-0.6.4 django-angular-0.8.4 django-appconf-1.0.2 django-classy-tags-0.8.0 django-cms-3.4.0 django-filer-1.2.5 django-formtools-1.0 django-fsm-2.4.0 django-fsm-admin-1.2.3 django-ipware-1.1.6 django-mptt-0.8.6 django-polymorphic-0.8.1 django-post-office-2.0.8 django-rest-auth-0.8.1 django-sekizai-0.10.0 django-shop django-treebeard-4.0.1 djangocms-admin-style-1.2.4 djangocms-cascade-0.10.2 djangorestframework-3.4.7 easy-thumbnails-2.3 jsonfield-1.0.3 pillow-3.3.1 six-1.10.0
(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop$ pip install -r requirements/common.txt
Collecting beautifulsoup4==4.4.0 (from -r requirements/common.txt (line 1))
  Using cached beautifulsoup4-4.4.0-py3-none-any.whl
Requirement already satisfied (use --upgrade to upgrade): django-admin-sortable2==0.6.4 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 2))
Collecting django-allauth==0.23.0 (from -r requirements/common.txt (line 3))
Requirement already satisfied (use --upgrade to upgrade): django-angular==0.8.4 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 4))
Collecting django-appconf==1.0.1 (from -r requirements/common.txt (line 5))
  Using cached django_appconf-1.0.1-py2.py3-none-any.whl
Collecting django-classy-tags==0.7.2 (from -r requirements/common.txt (line 6))
  Using cached django_classy_tags-0.7.2-py2.py3-none-any.whl
Collecting django-cms==3.3.2 (from -r requirements/common.txt (line 7))
  Using cached django_cms-3.3.2-py2.py3-none-any.whl
Collecting django-compressor==1.6 (from -r requirements/common.txt (line 8))
  Using cached django_compressor-1.6-py2.py3-none-any.whl
Requirement already satisfied (use --upgrade to upgrade): django-filer==1.2.5 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 9))
Collecting django-filter==0.13.0 (from -r requirements/common.txt (line 10))
  Using cached django_filter-0.13.0-py2.py3-none-any.whl
Requirement already satisfied (use --upgrade to upgrade): django-fsm==2.4.0 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 11))
Requirement already satisfied (use --upgrade to upgrade): django-fsm-admin==1.2.3 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 12))
Collecting django-haystack==2.5.0 (from -r requirements/common.txt (line 13))
Collecting django-ipware==1.1.1 (from -r requirements/common.txt (line 14))
Requirement already satisfied (use --upgrade to upgrade): django-mptt==0.8.6 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 15))
Collecting django-parler==1.6.4 (from -r requirements/common.txt (line 16))
  Using cached django_parler-1.6.4-py2.py3-none-any.whl
Collecting django-polymorphic==1.0.1 (from -r requirements/common.txt (line 17))
  Using cached django_polymorphic-1.0.1-py2.py3-none-any.whl
Requirement already satisfied (use --upgrade to upgrade): django-post-office==2.0.8 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 18))
Collecting django-rest-auth==0.5.0 (from -r requirements/common.txt (line 19))
Collecting django-sass-processor==0.5.1 (from -r requirements/common.txt (line 20))
Requirement already satisfied (use --upgrade to upgrade): django-sekizai==0.10.0 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 21))
Requirement already satisfied (use --upgrade to upgrade): Django-Select2==5.8.9 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 22))
Collecting djangoshop-stripe==0.2.0 (from -r requirements/common.txt (line 23))
Collecting django-treebeard==4.0 (from -r requirements/common.txt (line 24))
Collecting djangocms-bootstrap3==0.1.1 (from -r requirements/common.txt (line 25))
Collecting djangocms-cascade==0.10.1 (from -r requirements/common.txt (line 26))
Collecting djangocms-text-ckeditor==3.0.1 (from -r requirements/common.txt (line 27))
  Using cached djangocms_text_ckeditor-3.0.1-py2.py3-none-any.whl
Collecting djangorestframework==3.2.5 (from -r requirements/common.txt (line 28))
  Using cached djangorestframework-3.2.5-py2.py3-none-any.whl
Collecting drf-haystack==1.5.6 (from -r requirements/common.txt (line 29))
Requirement already satisfied (use --upgrade to upgrade): easy-thumbnails==2.3 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 30))
Collecting elasticsearch==1.7.0 (from -r requirements/common.txt (line 31))
  Using cached elasticsearch-1.7.0-py2.py3-none-any.whl
Collecting html5lib==0.9999999 (from -r requirements/common.txt (line 32))
Requirement already satisfied (use --upgrade to upgrade): jsonfield==1.0.3 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from -r requirements/common.txt (line 33))
Collecting libsass==0.8.3 (from -r requirements/common.txt (line 34))
Collecting oauthlib==1.0.3 (from -r requirements/common.txt (line 35))
Collecting Pillow==3.3.0 (from -r requirements/common.txt (line 36))
  Using cached Pillow-3.3.0-cp34-cp34m-manylinux1_x86_64.whl
Collecting pluggy==0.3.1 (from -r requirements/common.txt (line 37))
  Using cached pluggy-0.3.1-py2.py3-none-any.whl
Collecting py==1.4.30 (from -r requirements/common.txt (line 38))
  Using cached py-1.4.30-py2.py3-none-any.whl
Collecting Pygments==2.0.2 (from -r requirements/common.txt (line 39))
  Using cached Pygments-2.0.2-py3-none-any.whl
Collecting python-openid==2.2.5 (from -r requirements/common.txt (line 40))
Collecting pytz==2015.7 (from -r requirements/common.txt (line 41))
  Using cached pytz-2015.7-py2.py3-none-any.whl
Collecting requests==2.7.0 (from -r requirements/common.txt (line 42))
  Using cached requests-2.7.0-py2.py3-none-any.whl
Collecting requests-oauthlib==0.5.0 (from -r requirements/common.txt (line 43))
  Using cached requests_oauthlib-0.5.0-py2.py3-none-any.whl
Collecting six==1.9.0 (from -r requirements/common.txt (line 44))
  Using cached six-1.9.0-py2.py3-none-any.whl
Collecting stripe==1.37.0 (from -r requirements/common.txt (line 45))
  Using cached stripe-1.37.0-py3-none-any.whl
Collecting Unidecode==0.4.18 (from -r requirements/common.txt (line 46))
Collecting urllib3==1.12 (from -r requirements/common.txt (line 47))
  Using cached urllib3-1.12-py2.py3-none-any.whl
Collecting virtualenv==13.1.2 (from -r requirements/common.txt (line 48))
  Using cached virtualenv-13.1.2-py2.py3-none-any.whl
Collecting wheel==0.24.0 (from -r requirements/common.txt (line 49))
  Using cached wheel-0.24.0-py2.py3-none-any.whl
Collecting python3-openid>=3.0.1 (from django-allauth==0.23.0->-r requirements/common.txt (line 3))
Requirement already satisfied (use --upgrade to upgrade): Django>=1.6 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from django-allauth==0.23.0->-r requirements/common.txt (line 3))
Requirement already satisfied (use --upgrade to upgrade): djangocms-admin-style>=1.0 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from django-cms==3.3.2->-r requirements/common.txt (line 7))
Requirement already satisfied (use --upgrade to upgrade): django-formtools>=1.0 in /home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages (from django-cms==3.3.2->-r requirements/common.txt (line 7))
Collecting python-dateutil (from drf-haystack==1.5.6->-r requirements/common.txt (line 29))
  Using cached python_dateutil-2.5.3-py2.py3-none-any.whl
Collecting defusedxml (from python3-openid>=3.0.1->django-allauth==0.23.0->-r requirements/common.txt (line 3))
Installing collected packages: beautifulsoup4, defusedxml, python3-openid, oauthlib, requests, requests-oauthlib, django-allauth, six, django-appconf, django-classy-tags, django-treebeard, django-cms, django-compressor, django-filter, django-haystack, django-ipware, django-parler, django-polymorphic, djangorestframework, django-rest-auth, libsass, django-sass-processor, stripe, djangoshop-stripe, djangocms-bootstrap3, djangocms-cascade, Pillow, html5lib, djangocms-text-ckeditor, python-dateutil, drf-haystack, urllib3, elasticsearch, pluggy, py, Pygments, python-openid, pytz, Unidecode, virtualenv, wheel
  Found existing installation: beautifulsoup4 4.5.1
    Uninstalling beautifulsoup4-4.5.1:
      Successfully uninstalled beautifulsoup4-4.5.1
  Found existing installation: six 1.10.0
    Uninstalling six-1.10.0:
      Successfully uninstalled six-1.10.0
  Found existing installation: django-appconf 1.0.2
    Uninstalling django-appconf-1.0.2:
      Successfully uninstalled django-appconf-1.0.2
  Found existing installation: django-classy-tags 0.8.0
    Uninstalling django-classy-tags-0.8.0:
      Successfully uninstalled django-classy-tags-0.8.0
  Found existing installation: django-treebeard 4.0.1
    Uninstalling django-treebeard-4.0.1:
      Successfully uninstalled django-treebeard-4.0.1
  Found existing installation: django-cms 3.4.0
    Uninstalling django-cms-3.4.0:
      Successfully uninstalled django-cms-3.4.0
  Found existing installation: django-ipware 1.1.6
    Uninstalling django-ipware-1.1.6:
      Successfully uninstalled django-ipware-1.1.6
  Found existing installation: django-polymorphic 0.8.1
    Uninstalling django-polymorphic-0.8.1:
      Successfully uninstalled django-polymorphic-0.8.1
  Found existing installation: djangorestframework 3.4.7
    Uninstalling djangorestframework-3.4.7:
      Successfully uninstalled djangorestframework-3.4.7
  Found existing installation: django-rest-auth 0.8.1
    Uninstalling django-rest-auth-0.8.1:
      Successfully uninstalled django-rest-auth-0.8.1
  Found existing installation: djangocms-cascade 0.10.2
    Uninstalling djangocms-cascade-0.10.2:
      Successfully uninstalled djangocms-cascade-0.10.2
  Found existing installation: Pillow 3.3.1
    Uninstalling Pillow-3.3.1:
      Successfully uninstalled Pillow-3.3.1
  Found existing installation: Unidecode 0.4.19
    Uninstalling Unidecode-0.4.19:
      Successfully uninstalled Unidecode-0.4.19
  Found existing installation: wheel 0.30.0a0
    Uninstalling wheel-0.30.0a0:
      Successfully uninstalled wheel-0.30.0a0
Successfully installed Pillow-3.3.0 Pygments-2.0.2 Unidecode-0.4.18 beautifulsoup4-4.4.0 defusedxml-0.4.1 django-allauth-0.23.0 django-appconf-1.0.1 django-classy-tags-0.7.2 django-cms-3.3.2 django-compressor-1.6 django-filter-0.13.0 django-haystack-2.5.0 django-ipware-1.1.1 django-parler-1.6.4 django-polymorphic-1.0.1 django-rest-auth-0.5.0 django-sass-processor-0.5.1 django-treebeard-4.0 djangocms-bootstrap3-0.1.1 djangocms-cascade-0.10.1 djangocms-text-ckeditor-3.0.1 djangorestframework-3.2.5 djangoshop-stripe-0.2.0 drf-haystack-1.5.6 elasticsearch-1.7.0 html5lib-0.9999999 libsass-0.8.3 oauthlib-1.0.3 pluggy-0.3.1 py-1.4.30 python-dateutil-2.5.3 python-openid-2.2.5 python3-openid-3.0.10 pytz-2015.7 requests-2.7.0 requests-oauthlib-0.5.0 six-1.9.0 stripe-1.37.0 urllib3-1.12 virtualenv-13.1.2 wheel-0.24.0
(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop$ npm install
django-shop@0.9.2 /vagrant/projects/shop/django-shop
├── angular@1.3.20
├── angular-animate@1.3.20
├── angular-bootstrap-plus@0.6.3
├── angular-i18n@1.3.20
├── angular-inview@1.5.7
├── angular-messages@1.3.20
├── angular-sanitize@1.3.20
├── angular-ui-bootstrap@0.13.4
├── bootstrap@3.3.7
├── bootstrap-sass@3.3.7
├── font-awesome@4.6.3
├── picturefill@3.0.2
└─┬ select2@4.0.3
  ├── almond@0.3.3
  └── jquery-mousewheel@3.1.13

(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop$ cd example/
(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop/example$ export DJANGO_SHOP_TUTORIAL=commodity
```

After this I run the `./manage.py initialize_shop_demo` and get the following error:

```
(django-shop) vagrant@vagrant:/vagrant/projects/shop/django-shop/example$ ./manage.py initialize_shop_demo
Traceback (most recent call last):
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cmsplugin_cascade/cms_plugins.py"", line 11, in <module>
    module_settings = import_module('{}.settings'.format(module))
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2224, in _find_and_load_unlocked
ImportError: No module named 'cmsplugin_cascade.segmentation.settings'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/utils.py"", line 65, in __getitem__
    return self._engines[alias]
KeyError: 'django'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/backends/django.py"", line 126, in get_package_libraries
    module = import_module(entry[1])
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/treebeard/templatetags/admin_tree_list.py"", line 7, in <module>
    from treebeard.admin import TO_FIELD_VAR
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/treebeard/admin.py"", line 6, in <module>
    from django.conf.urls import patterns, url
ImportError: cannot import name 'patterns'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/core/management/__init__.py"", line 341, in execute
    django.setup()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/contrib/admin/apps.py"", line 23, in ready
    self.module.autodiscover()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/contrib/admin/__init__.py"", line 26, in autodiscover
    autodiscover_modules('admin', register_to=site)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/utils/module_loading.py"", line 50, in autodiscover_modules
    import_module('%s.%s' % (app_config.name, module_to_search))
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cms/admin/__init__.py"", line 11, in <module>
    plugin_pool.plugin_pool.discover_plugins()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cms/plugin_pool.py"", line 32, in discover_plugins
    load('cms_plugins')
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cms/utils/django_load.py"", line 57, in load
    get_module(app, modname, verbose, failfast)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cms/utils/django_load.py"", line 41, in get_module
    module = import_module(module_name)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cmsplugin_cascade/cms_plugins.py"", line 22, in <module>
    import_module('{}.cms_plugins'.format(module))
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cmsplugin_cascade/segmentation/cms_plugins.py"", line 19, in <module>
    class SegmentPlugin(TransparentMixin, CascadePluginBase):
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/cmsplugin_cascade/segmentation/cms_plugins.py"", line 40, in SegmentPlugin
    default_template = Template('{% load cms_tags %}{% for plugin in instance.child_plugin_instances %}{% render_plugin plugin %}{% endfor %}')
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/base.py"", line 184, in __init__
    engine = Engine.get_default()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/functools.py"", line 472, in wrapper
    result = user_function(*args, **kwds)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/engine.py"", line 74, in get_default
    django_engines = [engine for engine in engines.all()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/utils.py"", line 89, in all
    return [self[alias] for alias in self]
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/utils.py"", line 89, in <listcomp>
    return [self[alias] for alias in self]
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/utils.py"", line 80, in __getitem__
    engine = engine_cls(params)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/backends/django.py"", line 30, in __init__
    options['libraries'] = self.get_templatetag_libraries(libraries)
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/backends/django.py"", line 48, in get_templatetag_libraries
    libraries = get_installed_libraries()
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/backends/django.py"", line 113, in get_installed_libraries
    for name in get_package_libraries(pkg):
  File ""/home/vagrant/virtualenvs/django-shop/lib/python3.4/site-packages/django/template/backends/django.py"", line 130, in get_package_libraries
    ""trying to load '%s': %s"" % (entry[1], e)
django.template.library.InvalidTemplateLibrary: Invalid template library specified. ImportError raised when trying to load 'treebeard.templatetags.admin_tree_list': cannot import name 'patterns'
```
"
14441,awesto,django-shop,4,closed,427,2,https://api.github.com/repos/awesto/django-shop/issues/427/comments,https://github.com/awesto/django-shop/issues/427,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}]",demo does not work,"I'm trying to follow the documentaion:
https://django-shop.readthedocs.io/en/latest/tutorial/intro.html#create-a-database-for-the-demo

(shopdemo)stefano@stefan:~/project/shopdemo/django-shop$ cd example
(shopdemo)stefano@stefan:~/project/shopdemo/django-shop/example$ export DJANGO_SHOP_TUTORIAL=polymorphic DJANGO_DEBUG=1
(shopdemo)stefano@stefan:~/project/shopdemo/django-shop/example$ ./manage.py migrate
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 341, in execute
    django.setup()
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/**init**.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/apps/config.py"", line 199, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/polymorphic/models.py"", line 30, in <module>
    class PolymorphicModel(six.with_metaclass(PolymorphicModelBase, models.Model)):
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/django/utils/six.py"", line 808, in **new**
    return meta(name, bases, d)
  File ""/home/stefano/.virtualenvs/shopdemo/local/lib/python2.7/site-packages/polymorphic/base.py"", line 90, in **new**
    new_class._default_manager = user_manager._copy_to_model(new_class)
AttributeError: 'PolymorphicManager' object has no attribute '_copy_to_model'
"
14442,awesto,django-shop,4,closed,426,0,https://api.github.com/repos/awesto/django-shop/issues/426/comments,https://github.com/awesto/django-shop/issues/426,[],Ploblems with run tutorial project,"I try run tutorial step by step and I get some problems:
1 - I use python 2.7 and run `pip install -r requirements/py2.txt` and see error:

```
Double requirement given: enum34==1.1.6 (from -r requirements/py2.txt (line 2)) (already in enum34==1.1.6 (from -r requirements/common.txt (line 2)), name='enum34')
```

My solution: I run `pip install -r requirements/common.txt`.

2 - Next, I get error `'PolymorphicManager' object has no attribute '_copy_to_model'`.
My solution: in requirements/common.txt I use `django-polymorphic==1.0.1` instead of 0.9.2

3 - Next, I get error:

```
(shoptutorial)vivazzi@vivazzi-mint-pc ~/projects/shop/Tutorial/django-shop/example $ ./manage.py migrate
Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 341, in execute
    django.setup()
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/__init__.py"", line 27, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/apps/config.py"", line 199, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/cmsplugin_cascade/models.py"", line 14, in <module>
    from filer.fields.file import FilerFileField
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/filer/fields/file.py"", line 17, in <module>
    from ..models import File
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/filer/models/__init__.py"", line 3, in <module>
    from .clipboardmodels import *  # flake8: noqa
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/filer/models/clipboardmodels.py"", line 9, in <module>
    from . import filemodels
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/filer/models/filemodels.py"", line 18, in <module>
    from .foldermodels import Folder
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/filer/models/foldermodels.py"", line 240, in <module>
    mptt.register(Folder)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/mptt/__init__.py"", line 11, in register
    from mptt.models import MPTTModelBase
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/mptt/models.py"", line 383, in <module>
    class MPTTModel(six.with_metaclass(MPTTModelBase, models.Model)):
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/utils/six.py"", line 808, in __new__
    return meta(name, bases, d)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/mptt/models.py"", line 253, in __new__
    cls = super_new(meta, class_name, bases, class_dict)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/db/models/base.py"", line 157, in __new__
    new_class.add_to_class(obj_name, obj)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/db/models/base.py"", line 316, in add_to_class
    value.contribute_to_class(cls, name)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/mptt/managers.py"", line 73, in contribute_to_class
    super(TreeManager, self).contribute_to_class(model, name)
  File ""/home/vivazzi/projects/shop/shoptutorial/local/lib/python2.7/site-packages/django/db/models/manager.py"", line 120, in contribute_to_class
    setattr(model, name, ManagerDescriptor(self))
AttributeError: can't set attribute
```

I find this issue https://github.com/django-mptt/django-mptt/issues/469 which I think this help to decide this bug (I'm not sure), but I can't resolve this problem. Maybe I do something wrong? 
Temporary solution:  in requirements/common.txt I use `django-polymorphic==1.8.4`

4 - I try load demo data `(shoptutorial)$ ./manage.py loaddata fixtures/myshop-commodity.json`
I try `(shoptutorial)$ ./manage.py loaddata fixtures/myshop-smartcard.json` but I get bug described in #402 . I understand that problem is old fixtures. How long time to correct fixtures? if it's fast, then maybe I need wait new fixtures? Certainly, I can fill database independently. It's not hard.
"
14443,awesto,django-shop,4,closed,425,4,https://api.github.com/repos/awesto/django-shop/issues/425/comments,https://github.com/awesto/django-shop/issues/425,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}]",CustomerStateField permanent validation failure,"Hi I appear to have found a bug with the CustomerStateField in django-shop c8b7f1fe0db4aa0e16c39e0ceff736a964fa7a3a

On loading the customer page in the admin interface and trying to save, I get the error below.
It doesn't matter what value I choose I still get the error.
I get this with both the example shop and the shop I am building.

Hope you can help and let me know if there's anything I can do to help! :)

![screen shot 2016-09-27 at 04 32 13](https://cloud.githubusercontent.com/assets/18157195/18859382/802abe8c-846b-11e6-8712-f882fbf435b8.png)
"
14464,awesto,django-shop,5,closed,402,4,https://api.github.com/repos/awesto/django-shop/issues/402/comments,https://github.com/awesto/django-shop/issues/402,[],Not able to load demo data from fixture,"I plan to develop a relatively simple e-commerce application on Ubuntu, but, as I did in many other cases, I'm starting the development on my Windows notebook (Windows 10, Python 3.5, Django 1.9.7).
To get acquainted with django-shop (and with django-cms), I'm willing to run its demos from the example project.

Following the documentation, in steps 1.1 to 1.3, I found only some minor problems: had to remove the ^ character from package.json file and to install with pip a few missing packages.
Then I tried to run the demos of the example project, starting from step 2.2.
I found that, in the online doc (django-shop.readthedocs.io/en/latest) and in the PDF version of the documentation, the demos and their names are not aligned with the 3 fixtures actually available in the example/fixtures folder and with the 5 SHOP_TUTORIAL options in the example/myshop settings module.
But even for a demo such as i18n_smartcard, which is consistently mentioned in the documentation and in the software, I wasn't able to populate the database with the fixture data.
Here are the first lines of the traceback, in some context:

```
(django19) C:\django19\Tutorial\django-shop\example>SET DJANGO_DEBUG=1
(django19) C:\django19\Tutorial\django-shop\example>SET DJANGO_SHOP_TUTORIAL=i18n_smartcard
(django19) C:\django19\Tutorial\django-shop\example>python manage.py migrate
... (ok)
(django19) C:\django19\Tutorial\django-shop\example>python manage.py loaddata fixtures/myshop-i18n_smartcard.json
Traceback (most recent call last):
  File ""C:\django19\lib\site-packages\django\db\backends\utils.py"", line 64, in execute
    return self.cursor.execute(sql, params)
  File ""C:\django19\lib\site-packages\django\db\backends\sqlite3\base.py"", line 323, in execute
    return Database.Cursor.execute(self, query, params)
sqlite3.IntegrityError: NOT NULL constraint failed: cms_cmsplugin.position
...
```
"
14465,awesto,django-shop,5,closed,400,1,https://api.github.com/repos/awesto/django-shop/issues/400/comments,https://github.com/awesto/django-shop/pull/400,[],Error during installation,"In case of no indication of a template products (smartcard, i18n_smartcard and polymorphic) get the error: Environment variable is not set DJANGO_SHOP_TUTORIAL
"
14471,awesto,django-shop,5,closed,393,2,https://api.github.com/repos/awesto/django-shop/issues/393/comments,https://github.com/awesto/django-shop/issues/393,[],npm install fails: peerinvalid,"Hello,

I got stuck during installing Django Shop: When it comes to „npm install“ i get

> $ npm install
> npm ERR! peerinvalid The package angular does not satisfy its siblings' peerDependencies requirements!
> npm ERR! peerinvalid Peer angular-stripe@4.2.12 wants angular@>=1.3 <=1.5
> 
> npm ERR! System Linux 3.16.0-4-amd64
> npm ERR! command ""/usr/bin/nodejs"" ""/usr/bin/npm"" ""install""
> npm ERR! cwd /home/jens/django/Tutorial/django-shop
> npm ERR! node -v v0.10.29
> npm ERR! npm -v 1.4.21
> npm ERR! code EPEERINVALID
> npm ERR! 
> npm ERR! Additional logging details can be found in:
> npm ERR!     /home/jens/django/Tutorial/django-shop/npm-debug.log
> npm ERR! not ok code 0

on my Debian Jessie with Python 3.4.2. Any hints how I resolve this would be appreciated.
"
14482,awesto,django-shop,5,closed,381,1,https://api.github.com/repos/awesto/django-shop/issues/381/comments,https://github.com/awesto/django-shop/issues/381,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/bug"", ""color"": ""eb6420"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcwOTY="", ""id"": 318797096}]",Cannot edit products in admin,"In my current project, trying to edit a product in the admin raises 500.

We have this code in `shop/money/fields.py`:

```
    def prepare_value(self, value):
        raise NotImplemented(""This method is gone"")
        if isinstance(value, AbstractMoney):
            return Decimal(value)
        return value
```

Is there a reason why we raise `NotImplemented` here instead of just removing the method? If I just remove the method, things seem to work.

Traceback:

```
Internal Server Error: /de/admin/newshop/product/375/change/
Traceback (most recent call last):
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 174, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 172, in get_response
    response = response.render()
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/response.py"", line 160, in render
    self.content = self.rendered_content
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/response.py"", line 137, in rendered_content
    content = template.render(context, self._request)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/backends/django.py"", line 95, in render
    return self.template.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 206, in render
    return self._render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/test/utils.py"", line 92, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 173, in render
    return compiled_parent._render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/test/utils.py"", line 92, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 173, in render
    return compiled_parent._render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/test/utils.py"", line 92, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 69, in render
    result = block.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 69, in render
    result = block.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 220, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/loader_tags.py"", line 209, in render
    return template.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 208, in render
    return self._render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/test/utils.py"", line 92, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 220, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 220, in render
    nodelist.append(node.render_annotated(context))
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 326, in render
    return nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/defaulttags.py"", line 326, in render
    return nodelist.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 992, in render
    bit = node.render_annotated(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 959, in render_annotated
    return self.render(context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 1049, in render
    return render_value_in_context(output, context)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/template/base.py"", line 1026, in render_value_in_context
    value = force_text(value)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/utils/encoding.py"", line 78, in force_text
    s = six.text_type(s)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/utils/html.py"", line 381, in <lambda>
    klass.__unicode__ = lambda self: mark_safe(klass_unicode(self))
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/forms/boundfield.py"", line 43, in __str__
    return self.as_widget()
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/forms/boundfield.py"", line 101, in as_widget
    return force_text(widget.render(name, self.value(), attrs=attrs))
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/django/forms/boundfield.py"", line 148, in value
    return self.field.prepare_value(data)
  File ""/home/rene/.virtualenvs/newshop/local/lib/python2.7/site-packages/shop/money/fields.py"", line 43, in prepare_value
    raise NotImplemented(""This method is gone"")
TypeError: 'NotImplementedType' object is not callable
```
"
14483,awesto,django-shop,5,closed,380,1,https://api.github.com/repos/awesto/django-shop/issues/380/comments,https://github.com/awesto/django-shop/issues/380,"[{""default"": true, ""name"": ""question"", ""url"": ""https://api.github.com/repos/awesto/django-shop/labels/question"", ""color"": ""000000"", ""node_id"": ""MDU6TGFiZWwzMTg3OTcyNTI="", ""id"": 318797252}]",setuptools requirement,"We have a requirement that we only need on Python 2. So I added this to setup.py:

```
    extras_require={
        ':python_version<""3.4""': ['enum34'],
    },
```

Background information: https://hynek.me/articles/conditional-python-dependencies/

The drawback is that installing django-shop now requires a setuptools version >= 18.0.

My preferred solution to this is documentation, and maybe a setuptools version check in setup.py that aborts with a nice error message. But I would like to hear other opinions. What do you think?
"
14498,awesto,django-shop,5,closed,364,2,https://api.github.com/repos/awesto/django-shop/issues/364/comments,https://github.com/awesto/django-shop/issues/364,[],Django Shop Causing problem with Custom User model,"I am getting below error when I try to run makemigrations command.

TypeError: CustomerProxy cannot proxy the swapped model 'accounts.User'.
I am using custom user model so I think it might be an issue because of that.

Full StackTrace:

```
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/core/management/__init__.py"", line 345, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/core/management/base.py"", line 348, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/core/management/base.py"", line 399, in execute
    output = self.handle(*args, **options)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/core/management/commands/makemigrations.py"", line 132, in handle
    migration_name=self.migration_name,
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/autodetector.py"", line 46, in changes
    changes = self._detect_changes(convert_apps, graph)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/autodetector.py"", line 131, in _detect_changes
    self.old_apps = self.from_state.concrete_apps
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/state.py"", line 166, in concrete_apps
    self.apps = StateApps(self.real_apps, self.models, ignore_swappable=True)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/state.py"", line 228, in __init__
    self.render_multiple(list(models.values()) + self.real_models)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/state.py"", line 296, in render_multiple
    model.render(self)
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/migrations/state.py"", line 585, in render
    body,
  File ""/Users/hamza/.virtualenvs/localites/lib/python2.7/site-packages/django/db/models/base.py"", line 142, in __new__
    raise TypeError(""%s cannot proxy the swapped model '%s'."" % (name, base_meta.swapped))
TypeError: CustomerProxy cannot proxy the swapped model 'accounts.User'.
```

```
INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',
    'formtools',

    # my apps
    'account',
    'apps.accounts',
    'apps.services',
    'social.apps.django_app.default',

    # django-cms and it's dependecies
    'cms',
    'treebeard',
    'menus',
    'sekizai',
    'djangocms_admin_style',
    'djangocms_text_ckeditor',

    'filer',
    'easy_thumbnails',
    'easy_thumbnails.optimize',
    'post_office',
    'shop',
    'apps.myshop',
]
```

Custom user model in accounts.models:

```
class User(AbstractBaseUser, PermissionsMixin):
    first_name = models.CharField(max_length=30, verbose_name=_('First Name'), blank=True, null=True)
    last_name = models.CharField(max_length=30, verbose_name=_('Last Name'), blank=True, null=True)
    email = models.EmailField(verbose_name=_('Email Address'), unique=True)
    date_of_birth = models.DateField(verbose_name=""Date of Birth"", blank=True, null=True)
    is_active = models.BooleanField(default=False)
    is_staff = models.BooleanField(default=False)
    # is_superuser = models.BooleanField(default=False)
    # group = models.ForeignKey(Group, on_delete=models.CASCADE, default=1)
    username = models.CharField(
        _('username'),
        max_length=30,
        unique=True,
        help_text=_('Required. 30 characters or fewer. Letters, digits and @/./+/-/_ only.'),
        validators=[
            validators.RegexValidator(
                r'^[\w.@+-]+$',
                _('Enter a valid username. This value may contain only '
                  'letters, numbers ' 'and @/./+/-/_ characters.')
            ),
        ],
        error_messages={
            'unique': _(""A user with that username already exists.""),
        },
    )
    date_joined = models.DateTimeField(_('date joined'), default=timezone.now)

    objects = UserManager()

    class Meta:
        swappable = 'AUTH_USER_MODEL'
        db_table = 'accounts_user'
        verbose_name = _(""Customer"")
        verbose_name_plural = _(""Customers"")

    USERNAME_FIELD = 'email'
    REQUIRED_FIELDS = []
```
"
14499,awesto,django-shop,5,closed,363,8,https://api.github.com/repos/awesto/django-shop/issues/363/comments,https://github.com/awesto/django-shop/issues/363,[],Add more examples of using of adding products in cart,"I need more examples of work with cart and REST framework to DjangoShop docs. I don't use angular and I need extend the logic of adding products in cart.

I have cloth shop. One product has one or more sizes and colors. 

Firstly, I need store more atributes for CartItem. I extended default CartItem:

```
class CartItem(cart.BaseCartItem):
    quantity = models.IntegerField(validators=[MinValueValidator(0)])
    color = models.CharField('Color', null=True, blank=True)
    size = models.CharField('Size', max_length=5, null=True, blank=True)
```

In product-detail.html I use next code to add product in cart:

```
$(function(){
    var d = {
        'quantity': 1,
        'unit_price': '120',
        'subtotal': '120',
        'product': 1,
        'color': 'white',
        'size': 'XL'
    };
    $('.buy').click(function(){
        $.post('{% url 'shop:cart-list' %}', d, function() {
            alert('product is added to cart')
        });
    });
});
```

But color and size don't save in my CartItem.

Secondly, I want see my cart as like:

```
name           color   size   quantity
product_1   white   XL   1
product_1   black   S   2
```

product_1 has same id. Now if I add product_1 product in cart then I get:

```
name           color   size   quantity
product_1   white   XL   3
```

How I add product to cart separately if size or color different?

Please, help me. I think I need customize serializer but I can't it bacause I get errors.

I think DjangoShop docs need more examples to developers could be understand how they can extend their shop logic.
"
14514,awesto,django-shop,5,closed,347,5,https://api.github.com/repos/awesto/django-shop/issues/347/comments,https://github.com/awesto/django-shop/issues/347,[],Environment DJANGO_SHOP_TUTORIAL has an invalid value,"Hi there!

I would like to run the Simple Product Demo, however I get an error when I run the following:

(shoptutorial)$ cd example
(shoptutorial)$ export DJANGO_SHOP_TUTORIAL=simple DJANGO_DEBUG=1
(shoptutorial)$ ./manage.py migrate     # this is where I get the error of:

File ""D:\Tutorial\django-shop\example\myshop\settings.py"", line 23, in <module>
    raise ImproperlyConfigured(""Environment DJANGO_SHOP_TUTORIAL has an invalid value `{}`"".format(SHOP_TUTORIAL))
django.core.exceptions.ImproperlyConfigured: Environment DJANGO_SHOP_TUTORIAL has an invalid value `simple DJANGO_DEBUG=1`

Do you have have any suggestions? 

Thanks!
"
14521,awesto,django-shop,5,closed,340,1,https://api.github.com/repos/awesto/django-shop/issues/340/comments,https://github.com/awesto/django-shop/issues/340,[],MoneyField breaks copy.deepcopy,"With the example shop:

```
>>> import copy
>>> from myshop.models import SmartCard
>>> copy.deepcopy(SmartCard.objects.first())
Traceback (most recent call last):
  File ""<console>"", line 1, in <module>
  File ""/usr/lib/python2.7/copy.py"", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File ""/usr/lib/python2.7/copy.py"", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File ""/usr/lib/python2.7/copy.py"", line 163, in deepcopy
    y = copier(x, memo)
  File ""/usr/lib/python2.7/copy.py"", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File ""/usr/lib/python2.7/copy.py"", line 174, in deepcopy
    y = copier(memo)
  File ""/usr/lib/python2.7/decimal.py"", line 3639, in __deepcopy__
    return self.__class__(str(self))
  File ""/home/rene/django-shop/shop/money/money_maker.py"", line 210, in new_money
    raise ValueError(err)
ValueError: Invalid literal for Decimal: '\xe2\x82\xac 3.99'
>>> 
```
"
14537,awesto,django-shop,5,closed,323,5,https://api.github.com/repos/awesto/django-shop/issues/323/comments,https://github.com/awesto/django-shop/issues/323,[],ImproperlyConfigured error when defining a new product,"Hi there.
Just created an example app and trying to define a new product in the smartcard.py file, but when i start the server i get the following error:

> shop/models/product.py"", line 64, in **new**
>     .format(name, Model, baseclass._materialized_model))
> django.core.exceptions.ImproperlyConfigured: Abstract base class TestProduct has already been associated with a model <class 'myshop.models.simple.smartcard.TestProduct'>, which is different or not a submodel of <class 'myshop.models.simple.smartcard.SmartCard'>.

Is it only possible to define one product that extends baseproduct for the shop?
How do i create a new product for my shop.. ?
My test product class is almost the same as the smartcart but with less attributes.

```

@python_2_unicode_compatible
class TestProduct(BaseProduct):
    # common product fields
    product_name = models.CharField(max_length=255, verbose_name=_(""Product Name""))
    slug = models.SlugField(verbose_name=_(""Slug""))
    unit_price = MoneyField(_(""Unit price""), decimal_places=3,
        help_text=_(""Net price for this product""))
    description = HTMLField(verbose_name=_(""Description""),
                            help_text=_(""Description for the list view of products.""))

    # product properties
    manufacturer = models.ForeignKey(Manufacturer, verbose_name=_(""Manufacturer""))
    # some attr
    color = ['red', 'green']
    product_code = models.CharField(_(""Product code""), max_length=255, unique=True)

    # controlling the catalog
    order = models.PositiveIntegerField(verbose_name=_(""Sort by""), db_index=True)
    cms_pages = models.ManyToManyField('cms.Page', through=ProductPage,
        help_text=_(""Choose list view this product shall appear on.""))
    images = models.ManyToManyField('filer.Image', through=ProductImage)

    objects = BaseProductManager()

    # filter expression used to search for a product item using the Select2 widget
    lookup_fields = ('product_code__startswith', 'product_name__icontains',)

    class Meta:
        verbose_name = _(""Vibra"")
        verbose_name_plural = _(""Vibras"")
        ordering = ('order',)

    def __str__(self):
        return self.product_name

    @property
    def sample_image(self):
        return self.images.first()

    def get_price(self, request):
        return self.unit_price

    def get_absolute_url(self):
        # sorting by highest level, so that the canonical URL associates with the
        # most generic category
        cms_page = self.cms_pages.order_by('depth').last()
        if cms_page is None:
            return urljoin('category-not-assigned', self.slug)
        return urljoin(cms_page.get_absolute_url(), self.slug)
```

Any help appreciated!
"
14542,awesto,django-shop,5,closed,318,3,https://api.github.com/repos/awesto/django-shop/issues/318/comments,https://github.com/awesto/django-shop/issues/318,[],customer context processor breaks aldryn-search indexing,"_From @febsn on October 13, 2015 13:32_

The customer context processor raises an error when trying to update the `aldryn-search` index, because, apparently, `aldryn-search` doesn't emulate middleware behaviour:
`AssertionError: The request object does not contain a customer. Edit your MIDDLEWARE_CLASSES setting to insert 'shop.middlerware.CustomerMiddleware'.`
Creating separate settings for index creation/update without the `customer` context processor enabled and setting `search_fulltext = False` on `shop.cascade.plugin_base.ShopPluginBase` works as a workaround. Customer-specific data should obviously not be included in a search index anyway, but there might be also plugins with output suitable for indexing, so this solution is probably not fine-grained enough.

_Copied from original issue: jrief/django-shop#18_
"
14544,awesto,django-shop,5,closed,316,12,https://api.github.com/repos/awesto/django-shop/issues/316/comments,https://github.com/awesto/django-shop/issues/316,[],AttributeError: 'mappingproxy' object has no attribute 'iteritems',"_From @quater on February 2, 2016 15:53_

As of writing this here, the Django Shop documentation http://django-shop.readthedocs.org/en/latest/tutorial/intro.html does not specify any Python version requirements. Since Django CMS supports Python 3.4 I thought that I can use Python 3.4 for Django Shop as well.

However it appears that parts of Django Shop are not yet compatible with Python 3.x.

While dealing with issue https://github.com/jrief/django-shop/issues/48 I was using Python 3.4  and encountered the below error:

```
(shoptutorial) vagrant@vagrant:~/django-shop/example$ ./manage.py migrate
/home/vagrant/django-shop/shop/models/order.py:95: RemovedInDjango19Warning: import_by_path() has been deprecated. Use import_string() instead.
  bases = tuple(import_by_path(mc) for mc in shop_settings.ORDER_WORKFLOWS) + bases

Traceback (most recent call last):
  File ""./manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/vagrant/shoptutorial/lib/python3.4/site-packages/django/core/management/__init__.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/home/vagrant/shoptutorial/lib/python3.4/site-packages/django/core/management/__init__.py"", line 328, in execute
    django.setup()
  File ""/home/vagrant/shoptutorial/lib/python3.4/site-packages/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/vagrant/shoptutorial/lib/python3.4/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/vagrant/shoptutorial/lib/python3.4/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/home/vagrant/shoptutorial/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/home/vagrant/django-shop/example/myshop/models/__init__.py"", line 9, in <module>
    from shop.models.defaults.order import Order
  File ""/home/vagrant/django-shop/shop/models/defaults/order.py"", line 9, in <module>
    class Order(order.BaseOrder):
  File ""/home/vagrant/django-shop/shop/models/order.py"", line 105, in __new__
    attrs['_auto_transitions'].update(cls.add_to_auto_transitions(b))
  File ""/home/vagrant/django-shop/shop/models/order.py"", line 112, in add_to_auto_transitions
    for name, method in base.__dict__.iteritems():
AttributeError: 'mappingproxy' object has no attribute 'iteritems'
```

As of the Python documentation this error is due to `iteritems` having been deprecated with the introduction of Python 3.x.

https://wiki.python.org/moin/Python3.0

> Remove dict.iteritems(), dict.iterkeys(), and dict.itervalues().
> Instead: use dict.items(), dict.keys(), and dict.values() respectively.

This problem is not observed while Python 2.7.6 is used.

_Copied from original issue: jrief/django-shop#50_
"
14558,awesto,django-shop,6,closed,302,1,https://api.github.com/repos/awesto/django-shop/issues/302/comments,https://github.com/awesto/django-shop/issues/302,[],"ValueError(""No JSON object could be decoded"")","Polymorphic Products Shop DEMO:

./manage.py loaddata fixtures/myshop-polymorphic.json

returns:

ValueError(""No JSON object could be decoded"")
django.core.serializers.base.DeserializationError: Problem installing fixture 'Django/django-shop/example/fixtures/myshop-polymorphic.json': No JSON object could be decoded
"
14564,awesto,django-shop,6,closed,296,1,https://api.github.com/repos/awesto/django-shop/issues/296/comments,https://github.com/awesto/django-shop/issues/296,[],django-shop,"please help me when i add product to cart that error throw

ImproperlyConfigured at /shop/cart/

Error importing modifier discount.cart_modifiers: ""No module named 'models'""

Request Method:     GET
Request URL:    http://srit.com/shop/cart/
Django Version:     1.8
Exception Type:     ImproperlyConfigured
Exception Value:    

Error importing modifier discount.cart_modifiers: ""No module named 'models'""

Exception Location:     /var/www/srit/shop/cart/modifiers_pool.py in _load_modifiers_list, line 37
Python Executable:  /usr/bin/python3
Python Version:     3.4.3
Python Path:    
"
14566,awesto,django-shop,6,closed,294,2,https://api.github.com/repos/awesto/django-shop/issues/294/comments,https://github.com/awesto/django-shop/issues/294,[],django-shop,"OperationalError at /shop/products/

no such table: shop_product

Request Method:     GET
Request URL:    http://127.0.0.1:8000/shop/products/
Django Version:     1.8.5
Exception Type:     OperationalError
Exception Value:    

no such table: shop_product

Exception Location:     /home/pradeep/.local/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py in execute, line 318
Python Executable:  /usr/bin/python2.7
Python Version:     2.7.6
Python Path:    

['/home/pradeep/Desktop/srit',
 '/usr/local/lib/python2.7/dist-packages/setuptools-5.7-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/pip-1.5.6-py2.7.egg',
 '/home/pradeep/Desktop/srit',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-i386-linux-gnu',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/home/pradeep/.local/lib/python2.7/site-packages',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PILcompat',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client']

Server time:    Wed, 25 Nov 2015 08:33:43 +0000
Error during template rendering

In template /home/pradeep/.local/lib/python2.7/site-packages/shop/templates/shop/product_list.html, error at line 7
"
14567,awesto,django-shop,6,closed,293,4,https://api.github.com/repos/awesto/django-shop/issues/293/comments,https://github.com/awesto/django-shop/issues/293,[],AttributeError when using Django 1.8 (  'module' object has no attribute 'commit_on_success' ),"when I run ./manage.py runserver or ./manage.py migrate with django 1.8 and python2.7 it raises an exception and exits.

What i am missing ?

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 354, in execute_from_command_line
    utility.execute()
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/core/management/**init**.py"", line 328, in execute
    django.setup()
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/**init**.py"", line 4, in <module>
    from ordermodel import \*  # NOQA
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/ordermodel.py"", line 8, in <module>
    from shop.models.productmodel import Product
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/productmodel.py"", line 15, in <module>
    Product = load_class(PRODUCT_MODEL, 'SHOP_PRODUCT_MODEL')
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/util/loader.py"", line 43, in load_class
    mod = import_module(class_module)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 45, in import_module
    **import**(name)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/defaults/product.py"", line 4, in <module>
    from shop.models_bases.managers import (
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models_bases/managers.py"", line 59, in <module>
    class OrderManager(models.Manager):
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models_bases/managers.py"", line 93, in OrderManager

Unhandled exception in thread started by <function wrapper at 0x7fec3a7572a8>
Traceback (most recent call last):
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 229, in wrapper
    fn(_args, *_kwargs)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 107, in inner_run
    autoreload.raise_last_exception()
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 252, in raise_last_exception
    six.reraise(__exception)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/utils/autoreload.py"", line 229, in wrapper
    fn(_args, **kwargs)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/**init**.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/apps/registry.py"", line 108, in populate
    app_config.import_models(all_models)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/**init**.py"", line 4, in <module>
    from ordermodel import \*  # NOQA
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/ordermodel.py"", line 8, in <module>
    from shop.models.productmodel import Product
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/productmodel.py"", line 15, in <module>
    Product = load_class(PRODUCT_MODEL, 'SHOP_PRODUCT_MODEL')
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/util/loader.py"", line 43, in load_class
    mod = import_module(class_module)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/django/utils/importlib.py"", line 45, in import_module
    **import**(name)
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models/defaults/product.py"", line 4, in <module>
    from shop.models_bases.managers import (
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models_bases/managers.py"", line 59, in <module>
    class OrderManager(models.Manager):
  File ""/home/yogesh/base_store/local/lib/python2.7/site-packages/shop/models_bases/managers.py"", line 93, in OrderManager
    @transaction.commit_on_success
AttributeError: 'module' object has no attribute 'commit_on_success'
"
14588,awesto,django-shop,6,closed,272,1,https://api.github.com/repos/awesto/django-shop/issues/272/comments,https://github.com/awesto/django-shop/pull/272,[],change for django 1.6+,"i changed manage.py so as for those who are using django 1.5+ can run the example project. 
because unless you get error that you cant import name execute_manager.  because execute_manage was deprecated after django 1.4 (https://docs.djangoproject.com/en/1.4/internals/deprecation/#id3) and  execute_from_command_line() took place.
"
14614,awesto,django-shop,6,closed,246,10,https://api.github.com/repos/awesto/django-shop/issues/246/comments,https://github.com/awesto/django-shop/issues/246,[],Can't change order status from admin,"Admins cannot change the order status to ""shipped"" when an order was completed and paid. The bug was introduced in 0.2.0 by #227 

@jrief can you provide more reasoning behind https://github.com/divio/django-shop/pull/227/files#L0R55? Wouldn't just setting the order status manually cover your use case?
"
14637,awesto,django-shop,6,closed,223,8,https://api.github.com/repos/awesto/django-shop/issues/223/comments,https://github.com/awesto/django-shop/pull/223,[],ImportError when Importing from django.conf.urls.defaults when using django trunk,"django.conf.urls.defaults moved into django.conf.urls on django 1.4 and was depreciated. On current django trunk the backwards compatibility has been removed so django-shop throws an ImportError.

I've cached this error and fall back to the old style when running on 1.3.
"
14638,awesto,django-shop,6,closed,222,2,https://api.github.com/repos/awesto/django-shop/issues/222/comments,https://github.com/awesto/django-shop/issues/222,[],Error while deleting users ,"I'm getting this error while deleting a user in my project.

```
Traceback (most recent call last):

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 115, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/options.py"", line 372, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/utils/decorators.py"", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/views/decorators/cache.py"", line 89, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/sites.py"", line 202, in inner
    return view(request, *args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/utils/decorators.py"", line 25, in _wrapper
    return bound_func(*args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/utils/decorators.py"", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/utils/decorators.py"", line 21, in bound_func
    return func(self, *args2, **kwargs2)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/options.py"", line 1205, in changelist_view
    response = self.response_action(request, queryset=cl.get_query_set(request))

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/options.py"", line 960, in response_action
    response = func(self, request, queryset)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/actions.py"", line 35, in delete_selected
    queryset, opts, request.user, modeladmin.admin_site, using)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/util.py"", line 109, in get_deleted_objects
    collector.collect(objs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/contrib/admin/util.py"", line 160, in collect
    return super(NestedObjects, self).collect(objs, source_attr=source_attr, **kwargs)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/deletion.py"", line 225, in collect
    elif sub_objs:

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/query.py"", line 141, in __nonzero__
    return type(self).__bool__(self)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/query.py"", line 135, in __bool__
    next(iter(self))

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/query.py"", line 123, in _result_iter
    self._fill_cache()

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/query.py"", line 927, in _fill_cache
    self._result_cache.append(next(self._iter))

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/query.py"", line 301, in iterator
    for row in compiler.results_iter():

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 775, in results_iter
    for rows in self.execute_sql(MULTI):

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/models/sql/compiler.py"", line 840, in execute_sql
    cursor.execute(sql, params)

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 58, in execute
    six.reraise(utils.DatabaseError, utils.DatabaseError(*tuple(e.args)), sys.exc_info()[2])

  File ""/home/eyad/Envs/through_italy/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py"", line 54, in execute
    return self.cursor.execute(query, args)

DatabaseError: relation ""addressmodel_address"" does not exist
LINE 1: ...user"".""is_active"", ""auth_user"".""date_joined"" FROM ""addressmo...
```

I'm not using the address model, it's not in my installed apps and it's not in the DB.
I'm using Django 1.5.1
"
14648,awesto,django-shop,6,closed,212,1,https://api.github.com/repos/awesto/django-shop/issues/212/comments,https://github.com/awesto/django-shop/pull/212,[],Update shop/templates/shop/cart.html,"fix a `MultiValueDictKeyError at /cart/update/` when doing an `Update Shopping Cart` by providing a hidden id form field as mentioned in [Django docs](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#using-the-formset-in-the-template). 

You can reproduce this bug by navigating to ""Your cart"" and trying to update some quantity on the formset.
"
14667,awesto,django-shop,7,closed,193,0,https://api.github.com/repos/awesto/django-shop/issues/193/comments,https://github.com/awesto/django-shop/issues/193,[],Error in docs,"Hi! I'm new to django shop, and I think I've found an error in the docs.

At http://django-shop.readthedocs.org/en/latest/getting-started.html#adding-taxes in the code says def add_extra_cart_price_field(self, cart): and it should say def get_extra_cart_price_field(self, cart):

If it isnt an error i would love to hear an explanation, because i've had an issue with it.
"
14681,awesto,django-shop,7,closed,179,2,https://api.github.com/repos/awesto/django-shop/issues/179/comments,https://github.com/awesto/django-shop/issues/179,[],Migrations fail if you don't use the shop's models,"If you use you own product or order models, the shop migration will fail with something like `django.db.utils.DatabaseError: table ""shop_order"" does not exist`. Faking the latest shop migration and creating a new one from your codebase works.

Any nicer way to handle this? Should we write some docs about it?
"
14700,awesto,django-shop,7,closed,160,5,https://api.github.com/repos/awesto/django-shop/issues/160/comments,https://github.com/awesto/django-shop/issues/160,[],import error when using example app,"vladka@vladka:~/PycharmProjects$ ./manage.py syncdb
Traceback (most recent call last):
  File ""./manage.py"", line 14, in <module>
    execute_manager(settings)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 438, in execute_manager
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/**init**.py"", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/base.py"", line 191, in run_from_argv
    self.execute(_args, *_options.**dict**)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/base.py"", line 219, in execute
    self.validate()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/base.py"", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py"", line 35, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py"", line 146, in get_app_errors
    self._populate()
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py"", line 61, in _populate
    self.load_app(app_name, True)
  File ""/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py"", line 78, in load_app
    models = import_module('.models', app_name)
  File ""/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py"", line 35, in import_module
    __import__(name)
  File ""/home/vladka/PycharmProjects/2checkout/shop/models/**init**.py"", line 4, in <module>
    from ordermodel import \*  # NOQA
  File ""/home/vladka/PycharmProjects/2checkout/shop/models/ordermodel.py"", line 7, in <module>
    from shop.models.productmodel import Product
  File ""/home/vladka/PycharmProjects/2checkout/shop/models/productmodel.py"", line 15, in <module>
    Product = load_class(PRODUCT_MODEL, 'SHOP_PRODUCT_MODEL')
  File ""/home/vladka/PycharmProjects/2checkout/shop/util/loader.py"", line 45, in load_class
    raise exceptions.ImproperlyConfigured(txt)
django.core.exceptions.ImproperlyConfigured: Error importing backend myshop.models: ""cannot import name Product"". Check your SHOP_PRODUCT_MODEL setting
# 
"
14705,awesto,django-shop,7,closed,155,1,https://api.github.com/repos/awesto/django-shop/issues/155/comments,https://github.com/awesto/django-shop/issues/155,[],Payment API empty cart bug,"If there is no user connected to Order, or the user is not logged in, payment api would raise an exception.

bug is introduced in 13ddf80ef69789a2433c8e4d13022a68421ad90e

see:
https://github.com/divio/django-shop/commit/13ddf80ef69789a2433c8e4d13022a68421ad90e#L0R55
"
14711,awesto,django-shop,7,closed,149,3,https://api.github.com/repos/awesto/django-shop/issues/149/comments,https://github.com/awesto/django-shop/issues/149,[],multiple address models break unique related_name constraint,"I've ran into this bug while trying to run tests (http://stackoverflow.com/questions/10058277/django-test-fails-when-creating-test-database/) and a user of one of my plugins has ran into it when running my migrations: https://github.com/Lacrymology/django-shop-area-tax/issues/1

The issue seems to be the existence of two models with `ForeignKey(User, related_name=""[shipping|billing]_address""..)`, i.e.: your own user-defined models and `shop.addressmodel.Address`.

Even if you don't add `shop.addressmodel` to your user models, the tests import them to use them, and then conflict arises, in the case of the bug the other user is reporting,  I'm not sure where the import's coming from.

But it has lead me to think that my own app will have the same problem, if a user wants to use the l10n app, but wants to provide their own Address model. I think I'll have to move it out of my app's models.py file, that'd do the trick, wouldn't it?
"
14744,awesto,django-shop,7,closed,116,1,https://api.github.com/repos/awesto/django-shop/issues/116/comments,https://github.com/awesto/django-shop/pull/116,[],Huge PEP8 cleanup.,"Sorry guys. I really wanted to contribute something useful this weekend but I can't concentrate on coding when I see all these PEP8 violations... o_O

Thank god it was a rainy Sunday with heavy thunderstorms here...

For the record, this is how you find all these nasty PEP8 errors:

pip install flake8
cd into/your/django-shop/fork/
cd shop
flake8 --statistics .

Any objections to merge this? Tests still run, and I checked my shop instance against it (added product to cart and placed an order). Didn't make any real code changes, just re-formatting.
"
14765,awesto,django-shop,8,closed,95,10,https://api.github.com/repos/awesto/django-shop/issues/95/comments,https://github.com/awesto/django-shop/issues/95,[],Impossible to configure,"Guys, i have some problem with configuring django-shop app
i set SHOP_CART_MODEL to 'apps.carts.models.MyCart'
and try two ways:
MyCart model based on Cart (like in docs on http://readthedocs.org/docs/django-shop/en/latest/howto/how-to-extend-django-shop-models.html

from shop.models import Cart
class MyCart(Cart):
    class Meta(object):
        pass

this raise:
django.core.exceptions.ImproperlyConfigured: Error importing backend apps.carts.models: ""cannot import name Cart"". Check your SHOP_CART_MODEL setting

and MyCart model based on BaseCart

from shop.models.defaults.bases import Cart
class MyCart(Cart):
    class Meta(object):
        pass

it raise:
django.core.exceptions.ImproperlyConfigured: Backend module ""apps.carts.models"" does not define a ""MyCart"" class.

it takes me much time of trying to fix it. guys, please, help)
"
14855,awesto,django-shop,8,closed,5,1,https://api.github.com/repos/awesto/django-shop/issues/5/comments,https://github.com/awesto/django-shop/issues/5,[],Setup from pip fails,"```
$ pip install -e git+https://github.com/divio/django-shop.git#egg=djangoshop
Obtaining djangoshop from git+https://github.com/divio/django-shop.git#egg=djangoshop
  Cloning https://github.com/divio/django-shop.git to /Users/issackelly/virtualenvs/djangoshop/src/djangoshop
  Running setup.py egg_info for package djangoshop
    Traceback (most recent call last):
      File ""<string>"", line 14, in <module>
      File ""/Users/issackelly/virtualenvs/djangoshop/src/djangoshop/setup.py"", line 12, in <module>
        long_description=open(os.path.join(os.path.dirname(__file__), 'README.rst')).read(),
    NameError: name 'os' is not defined
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File ""<string>"", line 14, in <module>

  File ""/Users/issackelly/virtualenvs/djangoshop/src/djangoshop/setup.py"", line 12, in <module>

    long_description=open(os.path.join(os.path.dirname(__file__), 'README.rst')).read(),

NameError: name 'os' is not defined
```
"
14979,rafalp,Misago,3,closed,1114,0,https://api.github.com/repos/rafalp/Misago/issues/1114/comments,https://github.com/rafalp/Misago/pull/1114,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}]",Tweak test accuracy and revert ranking algo because new one was Dj2 only,"This PR reverts users activity ranking implementation to old one, because new one was using features not present in Django 2 (but not raising errors in Django 1.11).

Our (messy) test case has also been tweaked to test that users that posted outside of ranked period don't show on ranking.

Fixes #1110 "
15097,rafalp,Misago,4,closed,990,0,https://api.github.com/repos/rafalp/Misago/issues/990/comments,https://github.com/rafalp/Misago/issues/990,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.18,"# Updating instructions

To update Misago from 0.17 to 0.18 use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago
```

Now, open your forum's `settings.py` and find `INSTALLED_APPS` in it. Next, find this code:

```python
    # 3rd party apps used by Misago
    'debug_toolbar',
    'crispy_forms',
    'mptt',
    'rest_framework',
```

And add `social_django` below `rest_framework`, like this:

```python
    # 3rd party apps used by Misago
    'debug_toolbar',
    'crispy_forms',
    'mptt',
    'rest_framework',
    'social_django',
```

Also add following code at the end of your settings.py:

```python
SOCIAL_AUTH_PIPELINE = (
    # Steps required by social pipeline to work - don't delete those!
    'social_core.pipeline.social_auth.social_details',
    'social_core.pipeline.social_auth.social_uid',
    'social_core.pipeline.social_auth.social_user',

    # Uncomment next line to let your users to associate their old forum account with social one.
    # 'misago.users.social.pipeline.associate_by_email',

    # Those steps make sure banned users may not join your site or use banned name or email.
    'misago.users.social.pipeline.validate_ip_not_banned',
    'misago.users.social.pipeline.validate_user_not_banned',

    # Reads user data received from social site and tries to create valid and available username
    # Required if you want automatic account creation to work. Otherwhise optional.
    'misago.users.social.pipeline.get_username',

    # Uncomment next line to enable automatic account creation if data from social site is valid
    # and get_username found valid name for new user account:
    # 'misago.users.social.pipeline.create_user',

    # This step asks user to complete simple, pre filled registration form containing username,
    # email, legal note if you remove it without adding custom one, users will have no fallback
    # for joining your site using their social account.
    'misago.users.social.pipeline.create_user_with_form',

    # Steps finalizing social authentication flow - don't delete those!
    'social_core.pipeline.social_auth.associate_user',
    'misago.users.social.pipeline.require_activation',
)

SOCIAL_AUTH_POSTGRES_JSONFIELD = True
```

Misago 0.18 also renamed the ""Full name"" field to ""Real name"", if your `settings.py` contains following line:

```
'misago.users.profilefields.default.FullNameField',
```

You will have to change it to following to keep your forum working:

```
'misago.users.profilefields.default.RealNameField',
```

Next, open your `urls.py` and find following lines in it:

```python
urlpatterns = [
    url(r'^', include('misago.urls', namespace='misago')),
```

Now add `url(r'^', include('social_django.urls', namespace='social')),` below that code, so it looks like this:

```python
urlpatterns = [
    url(r'^', include('misago.urls', namespace='misago')),
    url(r'^', include('social_django.urls', namespace='social')),
```

Run following commands to make sure your forum's database and static files are up to date with latest changes:

```
python manage.py migrate
python manage.py collectstatic
python manage.py deleteprofilefield fullname
```

You will also need to run regularly clear the database tables used to hold temporary data returned from social sites. To do this, add following task to your cron:

```
25 0 * * * python manage.py clearsocial
```

To learn how to enable social login for selected site on your Misago, see the [guide in documentation](https://rafalp.gitbooks.io/misago/SocialAuth.html).

# New features

* #416 - Sign in or join using social authentication.
* #1005 - Expose real name to the UI as `real_name` in React.js and `get_real_name` in templates.

# Theme changes

* #996 - Don't require user to vote/view votes to access poll edit/delete buttons.

# Bugs fixed

* #995 - Posting action doesn't recognize and display attachments errors to the user.
* #997 - Don't prompt user for label if they didn't enter URL in previous prompt.
* #998 - Private Threads icon in header erroneously claims that user has unread messages.

# Implementation and API changes

* #416 - Function signature for registration validators has changed to `request, cleaned_data={}, add_error=None`, with `add_error` kwarg being an [`add_error`](https://docs.djangoproject.com/en/1.11/ref/forms/api/#django.forms.Form.add_error) bound method belonging to form or serializer requesting registration validation.
* #994 - Make registration-only bans option behavior more intuitive. Previously bans with ""registration only"" option disabled were ignored during registration, username or email changes.
* #1004 - Delete marked users management task will delete already-marked user accounts even if administrator disabled option for users to request account deletion with `MISAGO_ENABLE_DELETE_OWN_ACCOUNT = False`.
* #1005 - `FullNameField` has been renamed to `RealNameField`.
* #1006 - Don't log profile fields values in case they are stored in 3rd party service.

# Documentation changes

* #416 - Added [guide](https://rafalp.gitbooks.io/misago/SocialAuth.html) for setting up social auth using GitHub as provider.

# Localization changes

*none*"
15113,rafalp,Misago,4,closed,972,5,https://api.github.com/repos/rafalp/Misago/issues/972/comments,https://github.com/rafalp/Misago/issues/972,[],Trying to install: python manage.py migrate,"```
Traceback (most recent call last):
  File ""manage.py"", line 23, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python3.6/site-packages/django/core/management/__init__.py"", line 347, in execute
    django.setup()
  File ""/usr/local/lib/python3.6/site-packages/django/__init__.py"", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/local/lib/python3.6/site-packages/django/apps/registry.py"", line 112, in populate
    app_config.import_models()
  File ""/usr/local/lib/python3.6/site-packages/django/apps/config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""/usr/local/Cellar/python/3.6.4_3/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/usr/local/lib/python3.6/site-packages/Misago-0.16.0-py3.6.egg/misago/users/models/__init__.py"", line 2, in <module>
    from .user import AnonymousUser, Online, User, UsernameChange
  File ""/usr/local/lib/python3.6/site-packages/Misago-0.16.0-py3.6.egg/misago/users/models/user.py"", line 134, in <module>
    class User(AbstractBaseUser, PermissionsMixin):
  File ""/usr/local/lib/python3.6/site-packages/Misago-0.16.0-py3.6.egg/misago/users/models/user.py"", line 274, in User
    class Meta:
  File ""/usr/local/lib/python3.6/site-packages/Misago-0.16.0-py3.6.egg/misago/users/models/user.py"", line 278, in Meta
    where={'is_staff': True},
  File ""/usr/local/lib/python3.6/site-packages/Misago-0.16.0-py3.6.egg/misago/core/pgutils.py"", line 16, in __init__
    super(PgPartialIndex, self).__init__(fields, name)
TypeError: __init__() takes 1 positional argument but 3 were given
```"
15128,rafalp,Misago,4,closed,954,0,https://api.github.com/repos/rafalp/Misago/issues/954/comments,https://github.com/rafalp/Misago/issues/954,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.15,"Misago 0.15 is quality of life release that brings small fixes and visual update to default theme as well as updates translation files for Spanish, French, Russian and Chinese languages. This is also first release to come with Turkish translation.

# Updating instructions

To update Misago from 0.14 to 0.15 use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago
```

Then run `migrate` and `collectstatic` commands to make sure your forum's database and static files are up to date:

```
python manage.py migrate
python manage.py collectstatic
```

# New features

*none*

# Theme changes

* #951 - Changed default theme's color scheme to be less gray all-around and bolder with brand's color.

# Bugs fixed

* #953 - Guest's menu on desktop was displayed wrong on Safari.
* #955 - Don't display signed out message in tabs where user is already signed out.
* #957 - Don't display moderation button on user profile if no moderation actions are available.

# Implementation and API changes

* #950 - Added test that checks if JavaScript translation files are correctly loaded and served under `django-i18n.js` url. 

# Documentation changes

*none*

# Localization changes

* Added Turkish (tr_TR) language files.
* Updated  Spanish (es), French (fr), Russian (ru) and Chinese (zh_Hans) language files to be current with their state on transifex."
15155,rafalp,Misago,4,closed,922,2,https://api.github.com/repos/rafalp/Misago/issues/922/comments,https://github.com/rafalp/Misago/issues/922,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/help%20wanted"", ""color"": ""2ecc71"", ""node_id"": ""MDU6TGFiZWw3NTc5ODMz"", ""id"": 7579833}]","Application labels aren't unique, duplicates: search","Hello，
 
I use misago and django-oscar together.
I got this error.

https://docs.djangoproject.com/en/1.11/ref/applications/#for-application-authors

I check django docs and get some solutions."
15156,rafalp,Misago,4,closed,921,2,https://api.github.com/repos/rafalp/Misago/issues/921/comments,https://github.com/rafalp/Misago/issues/921,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}, {""default"": false, ""name"": ""critical"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/critical"", ""color"": ""FF0000"", ""node_id"": ""MDU6TGFiZWw4MDQ0NzI4NA=="", ""id"": 80447284}]",Misago sometimes crashing due repeated serialization of categories ACL,"There's recurring issue in Misago where users running Misago under Python 3k experience random crashes:

https://misago-project.org/t/api-error/376/
https://misago-project.org/t/debug-false-causes-server-error-500/463/

Those crashes seem to origin from Django Debug Toolbar building its own template context, running context processors, one of which seems to be Misago's context processor that serializes current `request.user` and its ACL's. Apparently this step occurs repeatedly, producing error on attepting to serialize already serialized data.

Its worth investigating if there's some edge case or gotcha involved in either Rest Framework's serializers or Debug Toolbar"
15158,rafalp,Misago,4,closed,919,1,https://api.github.com/repos/rafalp/Misago/issues/919/comments,https://github.com/rafalp/Misago/issues/919,[],DEBUG = False causes server error (500),"Great project! Really hoping to use this in production for a class I'm teaching in a couple of weeks.

I have a problem with setting DEBUG = False, which gives a 500 error, even with ALLOWED_HOSTS  set to '*' or '127.0.0.1'. 

I'm using python 3.4.3 and Django 1.11.5. The error log is attached.

Any ideas would be wonderful!

Austen

[mysite.log](https://github.com/rafalp/Misago/files/1326912/mysite.log)"
15174,rafalp,Misago,5,closed,903,1,https://api.github.com/repos/rafalp/Misago/issues/903/comments,https://github.com/rafalp/Misago/issues/903,[],No module named 'misago.search.context_processors',"Hi, I met a problem.
when I follow the document in https://github.com/hxchen/Misago
After I run python manage.py runserver
Then I visit http://127.0.0.1:8000/
It's reported an error, I don't know how can I fix it.
`

Request Method: | GET
-- | --
http://127.0.0.1:8000/
1.11.4
ModuleNotFoundError
No module named 'misago.search.context_processors'
/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py in import_module, line 126
/Library/Frameworks/Python.framework/Versions/3.6/bin/python3
3.6.0
['/Users/haixiangchen/Documents/工作/Misago/github/Misago/testforum',  '/Library/Frameworks/Python.framework/Versions/3.6/lib/python36.zip',  '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6',  '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/lib-dynload',  '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages',  '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Misago-0.10.0-py3.6.egg']
Thu, 17 Aug 2017 10:26:11 +0000

`
`Environment:


Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.11.4
Python Version: 3.6.0
Installed Applications:
['misago',
 'misago.users',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.postgres',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'debug_toolbar',
 'crispy_forms',
 'mptt',
 'rest_framework',
 'misago.admin',
 'misago.acl',
 'misago.core',
 'misago.conf',
 'misago.markup',
 'misago.legal',
 'misago.categories',
 'misago.threads',
 'misago.readtracker',
 'misago.search',
 'misago.faker']
Installed Middleware:
['debug_toolbar.middleware.DebugToolbarMiddleware',
 'misago.users.middleware.RealIPMiddleware',
 'misago.core.middleware.frontendcontext.FrontendContextMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'misago.users.middleware.UserMiddleware',
 'misago.core.middleware.exceptionhandler.ExceptionHandlerMiddleware',
 'misago.users.middleware.OnlineTrackerMiddleware',
 'misago.admin.middleware.AdminAuthMiddleware',
 'misago.threads.middleware.UnreadThreadsCountMiddleware',
 'misago.core.middleware.threadstore.ThreadStoreMiddleware']



Traceback:

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/core/handlers/exception.py"" in inner
  41.             response = get_response(request)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/views/generic/base.py"" in view
  68.             return self.dispatch(request, *args, **kwargs)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/views/generic/base.py"" in dispatch
  88.         return handler(request, *args, **kwargs)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Misago-0.10.0-py3.6.egg/misago/threads/views/list.py"" in get
  27.         return render(request, self.template_name, template_context)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/shortcuts.py"" in render
  30.     content = loader.render_to_string(template_name, context, request, using=using)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/template/loader.py"" in render_to_string
  68.     return template.render(context, request)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/template/backends/django.py"" in render
  66.             return self.template.render(context)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/template/base.py"" in render
  205.                 with context.bind_template(self):

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/contextlib.py"" in __enter__
  82.             return next(self.gen)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/debug_toolbar/panels/templates/panel.py"" in _request_context_bind_template
  43.     processors = (template.engine.template_context_processors +

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/utils/functional.py"" in __get__
  35.         res = instance.__dict__[self.name] = self.func(instance)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/template/engine.py"" in template_context_processors
  93.         return tuple(import_string(path) for path in context_processors)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/template/engine.py"" in <genexpr>
  93.         return tuple(import_string(path) for path in context_processors)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/django/utils/module_loading.py"" in import_string
  20.     module = import_module(module_path)

File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py"" in import_module
  126.     return _bootstrap._gcd_import(name[level:], package, level)

Exception Type: ModuleNotFoundError at /
Exception Value: No module named 'misago.search.context_processors'`"
15203,rafalp,Misago,5,closed,871,2,https://api.github.com/repos/rafalp/Misago/issues/871/comments,https://github.com/rafalp/Misago/issues/871,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}]",User defined Question/Answers CAPTCHA not working.,"New user can register successfully with a random answer.
It's an easypicking bug inside the misago/users/api/userendpoints/create.py from line#27 to line#33
Just move the CAPTCHA validation before returning any response.

BTW, It's quite amazing you've done most of the developing by yourself.Would you like a hand with this project?I'm familiar with Django and React.js, and it'll be my honor to become a contributor."
15206,rafalp,Misago,5,closed,868,0,https://api.github.com/repos/rafalp/Misago/issues/868/comments,https://github.com/rafalp/Misago/issues/868,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.8,"# Updating instructions

To update Misago from 0.7 to 0.8 use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago
```

> This release includes changes to database. Make sure you have backup of your data before carrying on with the update.


## Enabling profile fields 

Misago 0.8 adds new feature named ""profile fields"" that enables your users to share additional information about themselves with other users via ""details"" tab on their profiles.

To enable this feature on your forum, open your `settings.py` and find this code:

```python
import os


# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
```

And edit it look like this:

```python
import os


# Build paths inside the project like this: os.path.join(BASE_DIR, ...)
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))


# Define placeholder gettext function
# This function will mark strings in settings visible to makemessages
# without need for Django's i18n features be initialized first.
_ = lambda x: x
```


Next, insert below code in same file, preferably at it its and:

```python
# Profile fields

MISAGO_PROFILE_FIELDS = [
    {
        'name': _(""Personal""),
        'fields': [
            'misago.users.profilefields.default.FullNameField',
            'misago.users.profilefields.default.GenderField',
            'misago.users.profilefields.default.BioField',
            'misago.users.profilefields.default.LocationField',
        ],
    },
    {
        'name': _(""Contact""),
        'fields': [
            'misago.users.profilefields.default.TwitterHandleField',
            'misago.users.profilefields.default.SkypeIdField',
            'misago.users.profilefields.default.WebsiteField',
        ],
    },
    {
        'name': _(""IP address""),
        'fields': [
            'misago.users.profilefields.default.JoinIpField',
            'misago.users.profilefields.default.LastIpField',
        ],
    },
]
```

Finally, find `django.contrib.contenttypes` in your `INSTALLED_APPS`:

```python
INSTALLED_APPS = [
   # ...bunch of lines here
    'django.contrib.contenttypes',
    # ...more lines there
]
```

And insert the `'django.contrib.postgres',` line below it:

```python
INSTALLED_APPS = [
   # ...bunch of lines here
    'django.contrib.contenttypes',
    'django.contrib.postgres',
    # ...more lines there
]
```

[Here's the reference](https://github.com/rafalp/Misago/blob/master/misago/project_template/project_name/settings.py#L169) of `INSTALLED_APPS` including this change if you need one.


## Wrapping up the update

After installing Misago 0.8 from PIP and modifying your `settings.py`, you should run the`python manage.py migrate` to update your database and `python manage.py collectstatic` for your site to update your static files to their latest versions.

If you'll encounter database permission error during migration, you'll need to elevate your database's user to superuser in order for Misago's migrations to enable the `hstore` extension for your database. {lease see the [documentation](https://rafalp.gitbooks.io/misago/setup/#about-the-djangodbutilsprogrammingerror-permission-denied-to-create-extension-errors-during-database-migration) short example on how to do this.


# New langauge

Misago 0.8 is first release that contains (nearly complete) translation for other language, with 98% of language strings translated for simplified chinese. To enable simplified chinese language on your site, edit your `settings.py`, find `LANGUAGE_CODE = 'en_us'` in it and edit it to `LANGUAGE_CODE = 'zh_Hans'`.

# New features

* #865 - User profiles fields.
* #876 - Included translation files for simplified chinese with 98% of language strings translated.

# Theme changes

* #875 - Tweaked the spacing between elements in posts content, making header-induced breaks more noticeable.

# Bugs fixed

* #869 - Goto views computed the target page incorrectly.
* #870 - Tweaked margins on row in post's changelog header so horizontal scrollbar no longer shows up.
* #871 - Invalid captcha would not interrupt the registration process, thus allowing users to register accounts after entering invalid answer to Q&A captcha.
* #876 - Moment.js translation was resolved incorrectly for some language codes, like `zh_Hans`.
* #877 - Approve thread moderation action didn't update its `has_unapproved_posts` flag correctly.

# Implementation and API changes

*none*

# Documentation changes

* #865 - Documentation for user profile fields feature.
* #872 - Small spelling corrections in setup and maintenance part of the docs."
15217,rafalp,Misago,5,closed,857,0,https://api.github.com/repos/rafalp/Misago/issues/857/comments,https://github.com/rafalp/Misago/issues/857,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}, {""default"": false, ""name"": ""client"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/client"", ""color"": ""81D4FA"", ""node_id"": ""MDU6TGFiZWwyNjQ4MDU0Nw=="", ""id"": 26480547}]","Django supports whitespace at the start and end of passwords, Misago doesn't","Refs:

https://code.djangoproject.com/ticket/26334
https://docs.djangoproject.com/en/1.11/releases/1.9.5/#bugfixes"
15237,rafalp,Misago,5,closed,835,0,https://api.github.com/repos/rafalp/Misago/issues/835/comments,https://github.com/rafalp/Misago/pull/835,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6,"# Updating instructions

Misago 0.6 bumps all dependencies to their current versions. This makes it preferable to perform its installation on fresh virtual environment.

```
virtualenv venv
pip install misago --pre
```

## `MISAGO_JS_CATALOG_PACKAGES` has been deprecated.

Django 1.10 deprecates support for the `javascript_catalog` view, superseding it with the `JavaScriptCatalog`. Because of this Misago drops it's own `misago.core.views.javascript_catalog` view.

Instead, as part of migration you need to edit your site's `urls.py` to include new `JavaScriptCatalog` view.

Add following imports:

```python

from django.utils import timezone
from django.views.decorators.cache import cache_page
from django.views.decorators.http import last_modified
from django.views.i18n import JavaScriptCatalog
```

Delete following import:

```python
from misago.core.views import javascript_catalog
```

Finally, edit line defining the view:

```python
    # Javascript translations
    url(r'^django-i18n.js$', javascript_catalog, name='django-i18n'),
```

To following:

```python
# Javascript translations
    url(
        r'^django-i18n.js$',
        cache_page(86400 * 2, key_prefix='misagojsi18n')(
            last_modified(lambda req, **kw: timezone.now())(
                JavaScriptCatalog.as_view(
                    packages=['misago'],
                ),
            ),
        ),
        name='django-i18n'
    ),
```

## The way that Django Admin URL's were included in `urlconf` has changed

If you have enabled django admin in your Misago site via uncommenting it in default `urls.py`, you'll need to edit the line for future compatibility with Django 2.0.

Find in your `urls.py`:

```python
url(r'^django-admin/', include(admin.site.urls)),
```

And change it to:

```python
url(r'^django-admin/', admin.site.urls),
```

## About the `could not open extension control file` error during database migration

If you run into an error that looks like following:

    django.db.utils.OperationalError: could not open extension control file ""/usr/share/postgresql/9.4/extension/btree_gin.control"": No such file or directory

This means you'll need to install the `postgresql-contrib` package that includes extensions for PostgreSQL:

    sudo apt-get install postgresql-contrib


## About the `django.db.utils.ProgrammingError: permission denied to create extension ""btree_gin""` error during database migration

Only superusers may enable extensions in your database. To solve this issue, you may grant your database user super user privileges for duration of the installation:

    # switch to postgresql user and start psql tool
    sudo -u postgres psql postgres

    # make your database user the superuser
    alter role user_name superuser;

    # after installation is complete run below query in the psql
    # to remove super user privileges from your database user 
    alter role user_name nosuperuser;

# New features

* #848: Added OpenGraph tags to pages for sharing in social media.

# Theme changes

* #836 - Additional category styles.
* #845 - Made user ranks border less dominant.
* #847 - Made difference between default and disabled buttons more noticeable.
* #851 - Wrapped fallback categories list on thread view in noscript so it'll won't blink before JS kicks in.
* #852 - Removed gradients from iconography.

# Bugs fixed

* #834 - Horizontally aligned header stats items in Safari.
* #842 - Changed css class on team role created by migration to from ""team"" to ""primary"".
* #846 - Fixed check version tool in admin.
* #850 - Icon and colorful badge didn't appear in user's menu if user has unread private threads.
* #853 - Fixed and cleaned categories custom css class handling on threads and thread views.
* #854 - Switched the order of captcha and form validation around in registration form, so invalid form submission will not invalidate reCaptcha token.

# Implementation and API changes

* #653 - Ranks are translated using language specified in `settings.py` when Misago is installed. If permission roles names have translation for active language, they'll be displayed translated in the admin UI.
* #837 - Unified all models link serialization to `url` and `api` props.
* #838 - Updated Django version to Django 1.11 LTS.
* #839 - Updated all dependencies to their latest versions.
* #843 - Forum search uses GIN index for faster search. It also limits results number to five pages of latest items that meet search criteria for performance reasons.
* #855 - Deleted `misagodbrelations` util.
* #857 - Misago will now no longer strip whitespaces from around the passwords. This puts its password handling behaviour in compliance with `django.contrib.auth`.
* #844 -The `CreatePartialIndex` and `CreatePartialCompositeIndex` utils have been superseded with new `PgPartialIndex` that uses custom index mechanic introduced in Django 1.11

# Documentation changes

* #838 - Removed `MISAGO_JS_CATALOG_PACKAGES` from settings doc.
* #853 - Documented additional CSS classes available on thread and category views when custom CSS class is set on category.
"
15256,rafalp,Misago,5,closed,816,7,https://api.github.com/repos/rafalp/Misago/issues/816/comments,https://github.com/rafalp/Misago/issues/816,[],Error 'plural forms expression could be dangerous',"Hi there!

I have these error messages every hour.
Why does it happen?
I found this opinion:

> This is because gettext doesn't support plural forms, while ngettext does. I'm running into the same issue, will look into it.


My locale files:
[ru_locale.zip](https://github.com/rafalp/Misago/files/948985/ru_locale.zip)




```
Internal Server Error: /

ValueError at /
plural forms expression could be dangerous

Request Method: GET
Request URL: http://f/
Django Version: 1.10.7
Python Executable: /usr/local/bin/uwsgi
Python Version: 2.7.9
Python Path: ['.', '', '/lib/python2.7/site-packages']
Server time: Сб, 22 Апр 2017 12:58:08 +0000
Installed Applications:
['misago',
 'misago.users',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'debug_toolbar',
 'crispy_forms',
 'mptt',
 'rest_framework',
 'misago.admin',
 'misago.acl',
 'misago.core',
 'misago.conf',
 'misago.markup',
 'misago.legal',
 'misago.categories',
 'misago.threads',
 'misago.readtracker',
 'misago.search',
 'misago.faker',
 'misago.datamover']
Installed Middleware:
['debug_toolbar.middleware.DebugToolbarMiddleware',
 'misago.users.middleware.RealIPMiddleware',
 'misago.core.middleware.frontendcontext.FrontendContextMiddleware',
 'django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'misago.users.middleware.UserMiddleware',
 'misago.core.middleware.exceptionhandler.ExceptionHandlerMiddleware',
 'misago.users.middleware.OnlineTrackerMiddleware',
 'misago.admin.middleware.AdminAuthMiddleware',
 'misago.threads.middleware.UnreadThreadsCountMiddleware',
 'misago.core.middleware.threadstore.ThreadStoreMiddleware']


Traceback:  

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/core/handlers/exception.py"" in inner
  42.             response = get_response(request)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/deprecation.py"" in __call__
  134.             response = self.process_request(request)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/middleware/locale.py"" in process_request
  29.         translation.activate(language)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/__init__.py"" in activate
  161.     return _trans.activate(language)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in activate
  238.     _active.value = translation(language)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in translation
  227.         _translations[language] = DjangoTranslation(language)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in __init__
  129.             self._add_installed_apps_translations()

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in _add_installed_apps_translations
  176.             translation = self._new_gnu_trans(localedir)

File ""/home/daria/virtual-env/polesye1forum/local/lib/python2.7/site-packages/django/utils/translation/trans_real.py"" in _new_gnu_trans
  156.             fallback=use_null_fallback)

File ""/usr/lib/python2.7/gettext.py"" in translation
  478.                 t = _translations.setdefault(key, class_(fp))

File ""/usr/lib/python2.7/gettext.py"" in __init__
  180.             self._parse(fp)

File ""/usr/lib/python2.7/gettext.py"" in _parse
  315.                         self.plural = c2py(plural)

File ""/usr/lib/python2.7/gettext.py"" in c2py
  93.             raise ValueError, 'plural forms expression could be dangerous'

Exception Type: ValueError at /
Exception Value: plural forms expression could be dangerous
Request information:
USER: [unable to retrieve the current user]

GET: No GET data

POST: No POST data

FILES: No FILES data

COOKIES: No cookie data

META:
CONTENT_LENGTH = ''
CONTENT_TYPE = ''
DOCUMENT_ROOT = '/usr/share/nginx/html'
HTTP_ACCEPT = 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
HTTP_ACCEPT_ENCODING = 'gzip, deflate'
HTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.5'
HTTP_CONNECTION = 'keep-alive'
HTTP_HOST = 'forum.polesye1.ru'
HTTP_USER_AGENT = 'Mozilla/5.0 (compatible; YandexMetrika/2.0; +http://yandex.com/bots mtmon01e.yandex.ru)'
PATH_INFO = u'/'
QUERY_STRING = ''
```
"
15276,rafalp,Misago,6,closed,796,6,https://api.github.com/repos/rafalp/Misago/issues/796/comments,https://github.com/rafalp/Misago/issues/796,[],The flashing of the forum,"I was enjoying while I was catching this bug. 
Last version Misago.
djangojs.po: 1764

```
#: static/misago/js/misago.js:13 static/misago/js/misago.js:16
msgid ""%(replies)s reply""
msgid_plural ""%(replies)s replies""
msgstr[0] ""%(replies)s bla-bla""
msgstr[1] ""%(replies)s blas-blas""
```
After msgstr initialization the categories disappear and the forum begins to blink. This happens with msgid ""%(replies)s reply"" only.

![screenshot from 2017-04-15 07 40 04](https://cloud.githubusercontent.com/assets/22542295/25060811/f98a5d7e-21ae-11e7-96f8-c1150dbea500.png)
![screenshot from 2017-04-15 07 40 08](https://cloud.githubusercontent.com/assets/22542295/25060813/008fdb76-21af-11e7-8fe8-4cbeaf3b5a27.png)
"
15292,rafalp,Misago,6,closed,780,0,https://api.github.com/repos/rafalp/Misago/issues/780/comments,https://github.com/rafalp/Misago/issues/780,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6 Alpha 8,"# Updating instructions

To update Misago from 0.6 Alpha 7 to 0.6 Alpha 8, use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago --pre
```

# New features

* #774 - Default Pillow version bumped to 4.0 for better cross-system compatibility. Misago is guaranteed to run on latest 3.x, but apparently that version has issues when installed on Windows 10.
* #783 - Prompt user for confirmation before marking category's threads as read.

# Theme changes

* #757 - Use the pager from threadview on users list.
* #762 - Improved posts editor on small displays.
* #763 - Fixed breakpoints used by navbar, made full navbar displayed starting with 700px widths.
* #764 - Redesigned threads list, removed top-category resolution.
* #766 - Improved active posters ranking display on mobile devices.
* #767 - Improved way the polls are displayed on tablet and mobile displays.
* #768 - Improved post's changelog on mobile devices.
* #769 - Improved posts attachments lists appearance on small displays.
* #770 - Improved private threads participants list responsiveness for tablets and mobile displays.
* #773 - Made youtube videos in posts responsive.
* #781 - Empty posts footers will no longer be displayed.
* #782 - CSS and icons links have been moved to separate template `misago/head.html` for easier customization.
* #787 - Small improvements to poll votes and posts likes lists modals markup.

# Bugs fixed

* #767 - Fixed bug that caused poll edit form to don't appear.
* #786 - Fixed JS catalogue view so it loads Misago's `djangojs.mo` file with translated messages for javascript.

# Implementation and API changes

*none*

# Documentation changes

*none*"
15321,rafalp,Misago,6,closed,751,0,https://api.github.com/repos/rafalp/Misago/issues/751/comments,https://github.com/rafalp/Misago/issues/751,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6 Alpha 6,"This release improves Misago's UI responsiveness as well as adds support for search filters, enabling board administrators to include simple tweaks in forum's search engine.

# Updating instructions

To update Misago from 0.6 Alpha 5 to 0.6 Alpha 6, use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago --pre
```

# New features

* #645 - Search filters feature that allows tweaking of the search engine via implementation of functions that normalize and fix search queries and indexed documents.
* #756 - Django user admin now includes ""edit this user in Misago admin"" backlink.
* #759 - Made avatar cropper responsive.
* #760 - Use uploaded image's Data URL in cropper to speed up new avatar upload process.

# Theme changes

* #752 - Dramatically improved page headers responsiveness.
* #755 - Made paginator always present on thread view. This keeps markup simple and saves layout reflows when new thread page appears in active threads.

# Bugs fixed

*none*

# Implementation and API changes

*none*

# Documentation changes

*none*"
15324,rafalp,Misago,6,closed,748,0,https://api.github.com/repos/rafalp/Misago/issues/748/comments,https://github.com/rafalp/Misago/issues/748,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6 Alpha 5,"This release brings bugfixes to UI implementation and posted links handling as well as improves mobile UI on threads list and thread pages.

# Updating instructions

To update Misago from 0.6 Alpha 4 to 0.6 Alpha 5, use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago --pre
```

# New features

* #750 - improved the way posts are displayed on small displays in thread views, user profiles and search results.
* #753 - improved responsiveness of toolbars on threads list and threadviews.

# Bugs fixed

* #754 - protocol-less outgoing urls are prepended with 'http://' to make sure they correctly point outside of the site. `[url]` BBCode implementation was fixed.

# Implementation and API changes

* #749 - dropped custom importers for sake of django's `import_string` utility.

# Documentation changes

*none*"
15335,rafalp,Misago,6,closed,737,0,https://api.github.com/repos/rafalp/Misago/issues/737/comments,https://github.com/rafalp/Misago/issues/737,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}]",Showstopper in /api/auth/ caused by misago.usersutils.hash_email not handling unicode,"```
Traceback:  

File ""/site-packages/django/core/handlers/exception.py"" in inner
 39.             response = get_response(request)

File ""/site-packages/django/core/handlers/base.py"" in _get_response
 187.                 response = self.process_exception_by_middleware(e, request)

File ""/site-packages/django/core/handlers/base.py"" in _get_response
 185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/misago/users/api/auth.py"" in gateway
 27.         return login(request)

File ""/site-packages/django/views/decorators/csrf.py"" in wrapped_view
 58.         return view_func(*args, **kwargs)

File ""/site-packages/django/views/generic/base.py"" in view
 68.             return self.dispatch(request, *args, **kwargs)

File ""/site-packages/rest_framework/views.py"" in dispatch
 477.             response = self.handle_exception(exc)

File ""/site-packages/rest_framework/views.py"" in handle_exception
 437.             self.raise_uncaught_exception(exc)

File ""/site-packages/rest_framework/views.py"" in dispatch
 474.             response = handler(request, *args, **kwargs)

File ""/site-packages/rest_framework/decorators.py"" in handler
 52.             return func(*args, **kwargs)

File ""/site-packages/django/utils/decorators.py"" in _wrapped_view
 149.                     response = view_func(request, *args, **kwargs)

File ""/misago/users/api/auth.py"" in login
 41.     if form.is_valid():

File ""/site-packages/django/forms/forms.py"" in is_valid
 169.         return self.is_bound and not self.errors

File ""/site-packages/django/forms/forms.py"" in errors
 161.             self.full_clean()

File ""/site-packages/django/forms/forms.py"" in full_clean
 371.         self._clean_form()

File ""/site-packages/django/forms/forms.py"" in _clean_form
 398.             cleaned_data = self.clean()

File ""/misago/users/forms/auth.py"" in clean
 75.                 username=username, password=password)

File ""/site-packages/django/contrib/auth/__init__.py"" in authenticate
 74.             user = backend.authenticate(**credentials)

File ""/misago/users/authbackends.py"" in authenticate
 14.             user = UserModel.objects.get_by_username_or_email(username)

File ""/misago/users/models/user.py"" in get_by_username_or_email
 141.         queryset = queryset | models.Q(email_hash=hash_email(login))

File ""/misago/users/utils.py"" in hash_email
 5.     return hashlib.md5(email.lower().encode()).hexdigest()
```"
15350,rafalp,Misago,6,closed,722,0,https://api.github.com/repos/rafalp/Misago/issues/722/comments,https://github.com/rafalp/Misago/issues/722,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6 Alpha 3 Release Notes,"This release brings bugfixes, reliability improvements and further cleanups to Misago's codebase.

# Updating instructions

To update Misago from 0.6 Alpha 2 to 0.6 Alpha 3, use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago --pre
```

Next, run `migrate` command to update your database to latest version:

```
python manage.py migrate
```


# New features

- #125 - Added schema.org structural data on threads lists, thread view and users lists.
- #702 - Misago now comes with special ""cleansource"" utility tool that reformats and lints python codebase using [yapf](https://github.com/google/yapf), [pylint](https://www.pylint.org/), [isort](https://github.com/timothycrosley/isort) and custom overrides.


# Bugs fixed

* #723 - Added default values for some settings. This solves showstopper on changing forum configuration using empty values, and brings in intended behavior of Misago changing those settings to default if user attempts to clear their values.
* #724 - Fixed misalignment of labels in modals horizontal forms.
* #732 - Threadview pagination could report incorrect number of pages for threads with number of pages on next page equal to `MISAGO_POSTS_TAIL`.
* #733 - Disallowed `/options/`, `/p/` and `/private-threads/` in default robots.txt
* #737 - Fixed showstopper when user enters string containing non-ascii characters in auth forms accepting e-mail addresses.

# Implementation and API changes

* #594 - Renamed `user.acl` attribute to `user.acl_cache` and `user.acl_` to `user.acl`.
* #629 - User follows and followers lists in API were moved to designated edges.
* #643 - `UserTestCase`, `AuthenticatedUserTestCase` and `SuperUserTestCase` are using `force_login` and `logout` utilities instead of previous approach of signing user in and out via test client, which has greatly speed up tests suite.
* #644 - Introduced optional API for creating derivate model serializers in situ, via `Serializer.subset_fields`, `Serializer.extend_fields` and `Serializer.exclude_fields`. Performed cleaning pass over existing serializers making those list's fields easier to maintain.
* #648 - Moved constants under their classes or `constants.py` modules, simplified their names and made them easier to use across codebase.
* #676 - Misago's `validate_password` utility has been removed and replaced with Django's [password validation facilities](https://docs.djangoproject.com/en/1.10/topics/auth/passwords/).
* #706 - moved bunch of forms used exclusively by an API to serializers, so they handle json data better.
* #707 - relative imports other than from sibling or child paths have been converted back to absolute.
* #710 - moved user profile and users lists views to classes.
* #726 - replaced `user.is_authenticated()` and `user.is_anonymous()` calls with `user.is_authenticated` and `user.is_anonymous` as per [Django 1.10 api change](https://docs.djangoproject.com/en/1.10/releases/1.10/#user-is-auth-anon-deprecation).
* #727 - cleanup `get_user_model()` usage and made it consistent with Django's codebase.
* #731 - camelcase `Model`, `Form` and `SearchForm` attributes on generics for writing admin views.
* #728 - cleanup `import *` and `__all__` clauses in python code.
* #734 - moved bulk of user API edges and views to viewmodels.
* #740 - codebase is now tested with pylint to fish out basic errors and omissions like using undefined name, redefining value or having unused imports.
* #741 - cleaned response.json handling in tests a little.

# Documentation changes

* #739 - documented installation error that occurs when installing Misago using setuptools release older than 8."
15366,rafalp,Misago,7,closed,706,0,https://api.github.com/repos/rafalp/Misago/issues/706/comments,https://github.com/rafalp/Misago/issues/706,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": false, ""name"": ""client"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/client"", ""color"": ""81D4FA"", ""node_id"": ""MDU6TGFiZWwyNjQ4MDU0Nw=="", ""id"": 26480547}]",Replace forms with serializers when used by API,"Currently Misago's forms handling in backend is mixed bag. Some API endpoints use django forms to validate/clean inputs while other api endpoints use rest framework's serializers instead.

I would love to unify whole API to use JSON messages and serializers for its validation.

**TODO**

* [x] Replace `user=` attr with `context=`
* [x] ForumOptionsForm
* [x] EditSignatureForm
* [x] ChangeUsernameForm
* [x] ChangePasswordForm
* [x] ChangeEmailForm
* [x] ModerateAvatarForm
* [x] ModerateSignatureForm

Note to self in future: I'm omitting *misago.users.forms.auth* for sake of those integrating with misago wanting to use its auth forms. RegisterForm lacks `add_error` or comparable API."
15378,rafalp,Misago,7,closed,694,0,https://api.github.com/repos/rafalp/Misago/issues/694/comments,https://github.com/rafalp/Misago/issues/694,"[{""default"": false, ""name"": ""meta"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/meta"", ""color"": ""c2e0c6"", ""node_id"": ""MDU6TGFiZWw1MTMyODgzNjM="", ""id"": 513288363}]",Misago 0.6 Alpha 2 Release Notes,"# Updating instructions

To update Misago from 0.6 Alpha 1 to 0.6 Alpha 2, use PIP to uninstall old Misago and install new one:

```
pip uninstall misago
pip install misago --pre
```

This release includes new features that require additional configuration:


## Moment.js locale context processor

This release adds new context processor, available under the `            misago.core.context_processors.momentjs_locale` that has to be added to your `TEMPLATES['OPTIONS']['context_processors']` setting in order for Misago to load Moment.js locale file. If your site is running with `LANGUAGE_CODE` set to something else than `en-us` (default), you'll need to add this context processor to your `settings.py`.

To do so, find list of `context_processors` under the `TEMPLATES` setting, and add `
                'misago.core.context_processors.momentjs_locale',` line to it, like this:

```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            os.path.join(BASE_DIR, 'theme', 'templates'),
        ],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.i18n',
                'django.template.context_processors.media',
                'django.template.context_processors.request',
                'django.template.context_processors.static',
                'django.template.context_processors.tz',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',

                'misago.core.context_processors.site_address',
                'misago.core.context_processors.momentjs_locale',
                'misago.conf.context_processors.settings',
                'misago.users.context_processors.user_links',
                'misago.legal.context_processors.legal_links',

                # Data preloaders
                'misago.conf.context_processors.preload_settings_json',
                'misago.core.context_processors.current_link',
                'misago.markup.context_processors.preload_api_url',
                'misago.threads.context_processors.preload_threads_urls',
                'misago.users.context_processors.preload_user_json',

                # Note: keep frontend_context processor last for previous processors
                # to be able to expose data UI app via request.frontend_context
                'misago.core.context_processors.frontend_context',
            ],
        },
    },
]
```


## Older clients support

Misago Alpha 0.2 includes small JavaScript snippet in its scripts that test for presence of JavaScript apis required for it to run, and includes polyfill if those are not found. This was done mostly with IE11 support in mind, but should also work for some older android devices and Trident-powered clients.


# New features

* #475 - If you are unhappy with default slugs generation logic, you may now specify custom function instead via entering path to it in `MISAGO_SLUGIFY` setting.
* #703, #718 - [Polyfills](https://babeljs.io/docs/usage/polyfill/) are included by Misago if client's JS lacks apis required by Misago JavaScript.
* #721 - Misago will now set current language's ISO 639-1 code in `<html>`'s `lang=` attribute.


# Bugs fixed

* #695 - removed overflow form user status on posters ranking.
* #696 - Don't linkify url's in `code` elements.
* #712 - Display previous thread's title in ""thread title was changed from"" event instead of ""undefined"".
* #714 - Display valid likes message for posts with more than three likes.


# Implementation and API changes

* #589 - `misago.core.forms` module is no longer abstraction layer over `django.forms`. Instead its utility module defining two misago-specifis form fields `IsoDateTimeField` and `YesNoSwitch`.
* #635 - `misago.core.shortcuts.pagination_dict` no longer includes `page_range` in pagination data. Also returned value type is `dict` instead of `OrderedDict`.
* #699 - Unified posting flags value types to be booleans. Ealier some flags used `0`'s and `1`'s instead for holding their values.
* #708 - `misago.core.apipaginator` has been removed. Misago now uses `paginate` and `pagination_dict` utilities from `misago.core.shortcuts` for paginating api.
* #713 - `misago.core.shortcuts.paginated_response` shortcut function for returning paginated responses procedural way.
* #717 - `zxcvbn.js` library is now lazily loaded by `password-strenght` component after it was displayed. This makes registration form display faster than previously due to lack of blocking 400kb (or 800kb minus gzip) download.
* #719 - `/api/auth/token/` edge has been removed. To use Misago API from other applications, use [token authentication](http://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication) instead.
* #720 - `momentjs-i18n` view has been removed. Instead Misago uses context processor to inject `MOMENTJS_LOCALE_URL` variable containing path to Moment.js locale file that should be used to the templates.


# Documentation changes

* #666 - moved documentation away from Sphinx/reStructuredText to GitBook/Markdown.
* #700 - links to Django docs version were made configurable and set to point to Django 1.10."
15451,rafalp,Misago,7,closed,620,3,https://api.github.com/repos/rafalp/Misago/issues/620/comments,https://github.com/rafalp/Misago/issues/620,[],Can't install new apps,"Hi Rafal,

I'm trying to add a few django modules to the forum and I am getting some kind of erorr.
Where should I put my `INSTALLED_APPS` ?

Right now under: `mforum3/mforum3/settings.py`, i've added:
""""""
INSTALLED_APPS = (

```
'django.contrib.staticfiles',
'debug_toolbar',)
```

""""""

And I am getting:

```
ubuntu@ubuntu-xenial:/vagrant/mforum3$ sudo python manage.py makemigrations
Traceback (most recent call last):
  File ""manage.py"", line 11, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/core/management/__init__.py"", line 353, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/core/management/__init__.py"", line 327, in execute
    django.setup()
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/__init__.py"", line 18, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/apps/registry.py"", line 115, in populate
    app_config.ready()
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/apps.py"", line 15, in ready
    dt_settings.patch_all()
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/settings.py"", line 227, in patch_all
    patch_middleware_classes()
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/settings.py"", line 206, in patch_middleware_classes
    if not is_toolbar_middleware_installed():
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/settings.py"", line 188, in is_toolbar_middleware_installed
    for middleware in settings.MIDDLEWARE_CLASSES)
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/settings.py"", line 188, in <genexpr>
    for middleware in settings.MIDDLEWARE_CLASSES)
  File ""/usr/local/lib/python2.7/dist-packages/django_debug_toolbar-1.4-py2.7.egg/debug_toolbar/settings.py"", line 179, in is_middleware_class
    middleware_cls = import_string(middleware_path)
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/utils/module_loading.py"", line 20, in import_string
    module = import_module(module_path)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/usr/local/lib/python2.7/dist-packages/Misago-0.6a1.dev1-py2.7.egg/misago/users/middleware.py"", line 4, in <module>
    from django.contrib.auth.models import AnonymousUser as DjAnonymousUser
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/contrib/auth/models.py"", line 6, in <module>
    from django.contrib.contenttypes.models import ContentType
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/contrib/contenttypes/models.py"", line 161, in <module>
    class ContentType(models.Model):
  File ""/usr/local/lib/python2.7/dist-packages/Django-1.9.10-py2.7.egg/django/db/models/base.py"", line 102, in __new__
    ""INSTALLED_APPS."" % (module, name)
RuntimeError: Model class django.contrib.contenttypes.models.ContentType doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.
```

Regards,
Ioan.
"
15452,rafalp,Misago,7,closed,619,5,https://api.github.com/repos/rafalp/Misago/issues/619/comments,https://github.com/rafalp/Misago/issues/619,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}, {""default"": false, ""name"": ""client"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/client"", ""color"": ""81D4FA"", ""node_id"": ""MDU6TGFiZWwyNjQ4MDU0Nw=="", ""id"": 26480547}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/help%20wanted"", ""color"": ""2ecc71"", ""node_id"": ""MDU6TGFiZWw3NTc5ODMz"", ""id"": 7579833}]",React routing is not supporting deployments under path.,"Hi Rafal,

I've moved the forum away from root / to /forum/ and now the index disappears.

![Image of the error](https://i.gyazo.com/96f8dd163c253caef74892222d8eb9ae.gif)

Here are the files I've changed in `settings.py`:

```
STATIC_URL = '/forum/static/'
MEDIA_URL = '/forum/media/'
```

And in `urls.py`:

```
url(r'^forum/', include('misago.urls', namespace='misago')),

    # Javascript translations
    url(r'^forum/django-i18n.js$', javascript_catalog),
    url(r'^forum/moment-i18n.js$', momentjs_catalog),
```

Regards,
Ioan.
"
15466,rafalp,Misago,8,closed,605,3,https://api.github.com/repos/rafalp/Misago/issues/605/comments,https://github.com/rafalp/Misago/issues/605,[],"django.core.exceptions.ImproperlyConfigured: Error importing debug panel debug_toolbar.panels.timer: ""No module named apps""","I install from tag 0.5. How to config debug_toolbar in production.
system
nginx  -> uwsgi -> deployment.setting
file: misago_uwsgi.ini

[uwsgi]
chdir=/home/deploy/Misago
module=deployment.wsgi:application
master=True
vacuum=True
max-requests=5000
daemonize=/home/deploy/Misago/tmp/misago.log
home=/home/deploy/venv27
socket=/home/deploy/Misago/tmp/misago.sock
chmod-socket=664
uid=1000
gid=1000
"
15480,rafalp,Misago,8,closed,590,1,https://api.github.com/repos/rafalp/Misago/issues/590/comments,https://github.com/rafalp/Misago/issues/590,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}]","Get rid of ""from misago.conf.defaults import *""","After this change the `misago.conf.defaults` module becomes source of fallback configuration for Misago, resolved via mechanism like below:

```
try:
    getattr(django.conf, setting)
except AttributeError:
    getattr(misago.conf.defaults, setting)
```


**TODO**

* [x] update `settings.py` template to use current for Django 1.10
* [x] add misago apps to `INSTALLED_APPS`
* [x] add misago middlewares to `MIDDLEWARE`
* [x] add misago context processors to `TEMPLATES.OPTIONS.context_processors`
* [x] move required Django configuration from `misago.conf.defaults`
* [x] move required Rest Framework configuration from `misago.conf.defaults`
* [x] move required Debug Toolbar configuration from `misago.conf.defaults`
* [x] include email settings in project template's settings
* [x] remove non-misago settings from `misago.conf.defaults`
* [x] update `misago.conf.settings` to fallback to `misago.conf.defaults` if `django.conf.settings` fails to define requested setting."
15482,rafalp,Misago,8,closed,588,1,https://api.github.com/repos/rafalp/Misago/issues/588/comments,https://github.com/rafalp/Misago/issues/588,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""enhancement"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/enhancement"", ""color"": ""83e2a9"", ""node_id"": ""MDU6TGFiZWwxMDI1NjE0NjE5"", ""id"": 1025614619}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/help%20wanted"", ""color"": ""2ecc71"", ""node_id"": ""MDU6TGFiZWw3NTc5ODMz"", ""id"": 7579833}]",misago.faker module cleanup,"Misago comes with special `misago.faker` module that provides mock data generators for developing and testing.

Those generators have begun their life as utils thrown together to make testing features less annoying with plan to nuke or move outside of project down the road, however they have proven themselves to be very useful and as such could use some extra work.

First change that should be done would be making those commands check if Misago is running with `DEBUG = False`, or return error message stating that ""This command may be run only when DEBUG is set to True."" otherwhise.

Tests should be added for those commands asserting they have no showstoppers. This will be tricky for some execution paths as their occurence is random. In most cases just running command 5 times in a look to generate 10 items and asserting that run generated at least one new item will suffice. In case of `createfakethreads` command, it should be refactored into following commands:

`createfakethreads` - that will create specified numer of fake threads
`closerandomthreads` - that will close specified numer of randomly selected threads
`pingloballyrandomthreads` - that will pin globally specified numer of randomly selected threads
`pinlocallyrandomthreads` - that will pin locally specified numer of randomly selected threads
`unapproverandomthreads` - that will unapprove specified numer of randomly selected threads
`hiderandomthreads` - that will hide specified numer of randomly selected threads

When possible, those actions should be executed via moderation action (available in `misago.threads.moderation.threads`) by randomly selected user.

Once this is done, it should be made sure that those commands don't raise warnings for Django 1.10 that changed way in which management commands are receiving parameters, and that `misago.fake` module is not raising issues for pylint ran with settings specified in `.pylintrc`.
"
15486,rafalp,Misago,8,closed,584,3,https://api.github.com/repos/rafalp/Misago/issues/584/comments,https://github.com/rafalp/Misago/issues/584,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/help%20wanted"", ""color"": ""2ecc71"", ""node_id"": ""MDU6TGFiZWw3NTc5ODMz"", ""id"": 7579833}]",AttributeError on logout action from django admin panel,"Steps to reproduce:
1. Login in django-admin.
2. Press button logout at the top-right corner.

Traceback:

```
Environment:


Request Method: GET
Request URL: http://127.0.0.1:8001/django-admin/logout/

Django Version: 1.7.6
Python Version: 2.7.11
Installed Applications:
('django.contrib.admin',
 'misago.users',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'debug_toolbar',
 'pipeline',
 'crispy_forms',
 'mptt',
 'rest_framework',
 'misago.admin',
 'misago.acl',
 'misago.core',
 'misago.conf',
 'misago.markup',
 'misago.legal',
 'misago.categories',
 'misago.threads',
 'misago.readtracker',
 'misago.faker')
Installed Middleware:
(u'debug_toolbar.middleware.DebugToolbarMiddleware',
 'misago.users.middleware.AvatarServerMiddleware',
 'misago.users.middleware.RealIPMiddleware',
 'misago.core.middleware.frontendcontext.FrontendContextMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'misago.users.middleware.UserMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'misago.core.middleware.exceptionhandler.ExceptionHandlerMiddleware',
 'misago.users.middleware.OnlineTrackerMiddleware',
 'misago.admin.middleware.AdminAuthMiddleware',
 'misago.threads.middleware.UnreadThreadsCountMiddleware',
 'misago.core.middleware.threadstore.ThreadStoreMiddleware')


Traceback:
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/Django-1.7.6-py2.7.egg/django/core/handlers/base.py"" in get_response
  137.                 response = response.render()
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/Django-1.7.6-py2.7.egg/django/template/response.py"" in render
  103.             self.content = self.rendered_content
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/Django-1.7.6-py2.7.egg/django/template/response.py"" in rendered_content
  79.         context = self.resolve_context(self.context_data)
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/Django-1.7.6-py2.7.egg/django/template/response.py"" in resolve_context
  156.         return RequestContext(self._request, context, current_app=self._current_app)
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/django_debug_toolbar-1.3.2-py2.7.egg/debug_toolbar/panels/templates/panel.py"" in _request_context___init__
  56.             context = processor(request)
File ""/home/ivan/projects/python/misago/misago/users/context_processors.py"" in preload_user_json
  43.             'user': AnonymousUserSerializer(request.user).data
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/djangorestframework-3.3.2-py2.7.egg/rest_framework/serializers.py"" in data
  503.         ret = super(Serializer, self).data
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/djangorestframework-3.3.2-py2.7.egg/rest_framework/serializers.py"" in data
  239.                 self._data = self.to_representation(self.instance)
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/djangorestframework-3.3.2-py2.7.egg/rest_framework/serializers.py"" in to_representation
  472.                 ret[field.field_name] = field.to_representation(attribute)
File ""/home/ivan/projects/python/venv/local/lib/python2.7/site-packages/djangorestframework-3.3.2-py2.7.egg/rest_framework/fields.py"" in to_representation
  1645.         return method(value)
File ""/home/ivan/projects/python/misago/misago/users/serializers/user.py"" in get_acl
  92.         return serialize_acl(obj)
File ""/home/ivan/projects/python/misago/misago/acl/api.py"" in serialize_acl
  81.     serialized_acl = copy.deepcopy(target.acl)

Exception Type: AttributeError at /django-admin/logout/
Exception Value: 'AnonymousUser' object has no attribute 'acl'
```
"
15570,rafalp,Misago,9,closed,494,2,https://api.github.com/repos/rafalp/Misago/issues/494/comments,https://github.com/rafalp/Misago/issues/494,"[{""default"": false, ""name"": ""docs"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/docs"", ""color"": ""9b59b6"", ""node_id"": ""MDU6TGFiZWw2NDg3ODgxNQ=="", ""id"": 64878815}]",django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.,"When i tried to run forum with default settings, i got that error:

Traceback (most recent call last):
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 168, in **call**
    self.load_middleware()
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/core/handlers/base.py"", line 44, in load_middleware
    mw_class = import_string(middleware_path)
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/utils/module_loading.py"", line 26, in import_string
    module = import_module(module_path)
  File ""/usr/local/lib/python2.7/importlib/**init**.py"", line 37, in import_module
    **import**(name)
  File ""./misago/threads/middleware.py"", line 5, in <module>
    from misago.threads.counts import (ModeratedCount, NewThreadsCount,
  File ""./misago/threads/counts.py"", line 9, in <module>
    from misago.threads.views.moderatedcontent import ModeratedContent
  File ""./misago/threads/views/moderatedcontent.py"", line 7, in <module>
    from misago.threads.views.generic.threads import Threads, ThreadsView
  File ""./misago/threads/views/generic/**init**.py"", line 4, in <module>
    from misago.threads.views.generic.goto import *
  File ""./misago/threads/views/generic/goto.py"", line 4, in <module>
    from misago.threads import goto
  File ""./misago/threads/goto.py"", line 6, in <module>
    from misago.readtracker.threadstracker import make_read_aware
  File ""./misago/readtracker/threadstracker.py"", line 6, in <module>
    from misago.readtracker import forumstracker, signals
  File ""./misago/readtracker/forumstracker.py"", line 6, in <module>
    from misago.readtracker import signals
  File ""./misago/readtracker/signals.py"", line 4, in <module>
    from misago.threads.signals import move_thread, remove_thread_participant
  File ""./misago/threads/signals.py"", line 114, in <module>
    @receiver(pre_delete, sender=get_user_model())
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/contrib/auth/**init**.py"", line 137, in get_user_model
    return django_apps.get_model(settings.AUTH_USER_MODEL)
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/apps/registry.py"", line 199, in get_model
    self.check_models_ready()
  File ""/home/vladka/forum.webdevelop.pro/env/lib/python2.7/site-packages/django/apps/registry.py"", line 131, in check_models_ready
    raise AppRegistryNotReady(""Models aren't loaded yet."")
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet.

in misago default settings:
AUTH_USER_MODEL = 'misago_users.User'

but seems that now work.

Am i doing anything wrong ? Or its a bug ?
"
15585,rafalp,Misago,9,closed,476,1,https://api.github.com/repos/rafalp/Misago/issues/476/comments,https://github.com/rafalp/Misago/issues/476,[],misago TemplateSyntaxError 'compressed' is not a valid tag library: ImportError raised loading pipeline.templatetags.compressed: No module named conf,"hello, i have installed misago and i get error 
'compressed' is not a valid tag library: ImportError raised loading pipeline.templatetags.compressed: No module named conf

Error during template rendering

In template /home/lh4ckg/dev-1/forum/lib/python2.7/site-packages/Misago-0.5.99-py2.7.egg/misago/templates/misago/base.html, error at line 1
'compressed' is not a valid tag library: ImportError raised loading pipeline.templatetags.compressed: No module named conf

screenshot links
https://fbcdn-sphotos-d-a.akamaihd.net/hphotos-ak-xpf1/v/t1.0-9/10710630_1604089113145253_8311532351374180797_n.jpg?oh=8fb6bcc45ec098bcae6d6e0e64dcac53&oe=5518E0AD&__gda__=1427734162_e21c4cf6b6fb0faf21301869abbb1b30
https://scontent-a-ams.xx.fbcdn.net/hphotos-xfa1/v/t1.0-9/1902722_1604089139811917_9214342970514815381_n.jpg?oh=6c6a6362dad54d5f64788cb610df0307&oe=5514F737

i use package
Name: django-pipeline
Version: 1.4.1
Name: Django
Version: 1.7.1
Name: Python
Version: 2.7.8
how to correct this problem? help me please...
"
15674,rafalp,Misago,10,closed,380,3,https://api.github.com/repos/rafalp/Misago/issues/380/comments,https://github.com/rafalp/Misago/issues/380,[],"Exception at / Requested setting ""attempts_limit"" could not be found.","Found this error after run `vagrant$ sudo python manage.py runserver 192.168.33.10:80` command to start server

```
Environment:


Request Method: GET
Request URL: http://192.168.33.10/

Django Version: 1.6.4
Python Version: 2.7.3
Installed Applications:
('south',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'django_jinja',
 'django_jinja.contrib._humanize',
 'floppyforms',
 'mptt',
 'haystack',
 'debug_toolbar',
 'misago')
Installed Middleware:
('misago.middleware.thread.ThreadMiddleware',
 'misago.middleware.stopwatch.StopwatchMiddleware',
 'misago.middleware.heartbeat.HeartbeatMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware',
 'misago.middleware.cookiejar.CookieJarMiddleware',
 'misago.middleware.theme.ThemeMiddleware',
 'misago.middleware.firewalls.FirewallMiddleware',
 'misago.middleware.crawlers.DetectCrawlerMiddleware',
 'misago.middleware.session.SessionMiddleware',
 'misago.middleware.bruteforce.JamMiddleware',
 'misago.middleware.csrf.CSRFMiddleware',
 'misago.middleware.banning.BanningMiddleware',
 'misago.middleware.messages.MessagesMiddleware',
 'misago.middleware.user.UserMiddleware',
 'misago.middleware.mailsqueue.MailsQueueMiddleware',
 'misago.middleware.acl.ACLMiddleware',
 'misago.middleware.privatethreads.PrivateThreadsMiddleware',
 'django.middleware.common.CommonMiddleware')


Traceback:
File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"" in     get_response
   90.                 response = middleware_method(request)
File ""/vagrant/misago/middleware/session.py"" in process_request
  12.             request.session = HumanSession(request)
File ""/vagrant/misago/sessions.py"" in __init__
  184.                 self.remember_me = auth_remember(request, self.get_ip(request))
File ""/vagrant/misago/auth.py"" in auth_remember
  73.     if SignInAttempt.objects.is_jammed(ip):
File ""/vagrant/misago/models/signinattemptmodel.py"" in is_jammed
  19.         if settings.attempts_limit == 0:
File ""/vagrant/misago/conf.py"" in __getattr__
  51.         return self.setting(key)
File ""/vagrant/misago/conf.py"" in setting
  42.             raise Exception(u""Requested setting \""%s\"" could not be found."" % key)

Exception Type: Exception at /
Exception Value: Requested setting ""attempts_limit"" could not be found.
```
"
15684,rafalp,Misago,10,closed,370,1,https://api.github.com/repos/rafalp/Misago/issues/370/comments,https://github.com/rafalp/Misago/issues/370,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": false, ""name"": ""critical"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/critical"", ""color"": ""FF0000"", ""node_id"": ""MDU6TGFiZWw4MDQ0NzI4NA=="", ""id"": 80447284}]",Debug toolbar for Django 1.7,
15693,rafalp,Misago,10,closed,360,15,https://api.github.com/repos/rafalp/Misago/issues/360/comments,https://github.com/rafalp/Misago/issues/360,"[{""default"": false, ""name"": ""backend"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/backend"", ""color"": ""1976D2"", ""node_id"": ""MDU6TGFiZWw3NTU1NjQwNA=="", ""id"": 75556404}, {""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}, {""default"": false, ""name"": ""client"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/client"", ""color"": ""81D4FA"", ""node_id"": ""MDU6TGFiZWwyNjQ4MDU0Nw=="", ""id"": 26480547}]",Misago crashes when opening notifications page,"When trying to display notifications, misago crashes with the following error:

```
Internal Server Error: /alerts/
Traceback (most recent call last):
  File ""./misago/decorators.py"", line 52, in decorator
    return f(*args, **kwargs)
  File ""./misago/apps/alerts.py"", line 78, in alerts
    context_instance=RequestContext(request))
  File ""./misago/shortcuts.py"", line 16, in render_to_response
    return django_render_to_response(template_name, dictionary, content_type=kwargs.get('content_type'))
  File ""misago/ENV/local/lib/python2.7/site-packages/django/shortcuts/__init__.py"", line 29, in render_to_response
    return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
  File ""misago/ENV/local/lib/python2.7/site-packages/django/template/loader.py"", line 164, in render_to_string
    return t.render(Context(dictionary))
  File ""misago/ENV/local/lib/python2.7/site-packages/django_jinja/base.py"", line 131, in render
    return super(Template, self).render(new_context)
  File ""/usr/lib/python2.7/dist-packages/jinja2/environment.py"", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File ""misago/templates/cranefly/alerts/list.html"", line 78, in top-level template code
    {% macro lang_older() -%}{% trans %}Older Notifications{% endtrans %}{%- endmacro %}
  File ""misago/templates/cranefly/layout.html"", line 2, in top-level template code
    {% from ""cranefly/macros.html"" import messages_list %}
  File ""misago/templates/cranefly/base.html"", line 19, in top-level template code
    {% block body %}{% endblock %}
  File ""misago/templates/cranefly/layout.html"", line 154, in block ""body""
    {% block container %}
  File ""misago/templates/cranefly/alerts/list.html"", line 23, in block ""container""
    {% if alerts.today %}{{ alerts_list(lang_today(), alerts.today) }}{% endif %}
  File ""misago/templates/cranefly/alerts/list.html"", line 65, in template
    <td class=""alert-message"">{{ (_(alert.message) % alert.vars())|safe }}</td>
  File ""/usr/lib/python2.7/dist-packages/jinja2/ext.py"", line 129, in _gettext_alias
    return __context.call(__context.resolve('gettext'), *args, **kwargs)
  File ""/usr/lib/python2.7/dist-packages/jinja2/ext.py"", line 138, in gettext
    return rv % variables
  File ""/usr/lib/python2.7/dist-packages/markupsafe/__init__.py"", line 98, in __mod__
    return self.__class__(unicode.__mod__(self, arg))
  File ""/usr/lib/python2.7/dist-packages/markupsafe/__init__.py"", line 216, in <lambda>
    __getitem__ = lambda s, x: _MarkupEscapeHelper(s.obj[x])
KeyError: u'username'
```
"
15697,rafalp,Misago,10,closed,356,2,https://api.github.com/repos/rafalp/Misago/issues/356/comments,https://github.com/rafalp/Misago/issues/356,[],Error during template rendering,"I installed Misago future version without errors at Windows8. After ran 
`python manage.py runserver`,
I got a error when requests `http://127.0.0.1:8000/`.

```
Environment:


Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.6.1
Python Version: 2.7.6
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'debug_toolbar',
 'south',
 'pipeline',
 'crispy_forms',
 'mptt',
 'misago.admin',
 'misago.acl',
 'misago.core',
 'misago.conf',
 'misago.users',
 'misago.faker',
 'misago.forums')
Installed Middleware:
(u'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'misago.core.middleware.threadstore.ThreadStoreMiddleware',
 'misago.core.middleware.exceptionhandler.ExceptionHandlerMiddleware',
 'misago.admin.middleware.AdminAuthMiddleware')


Template error:
In template f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\misago-0.6.0dev-py2.7.egg\misago\templates\misago\base.html, error at line 15

   5 :     <meta charset=""utf-8"">


   6 :     <meta http-equiv=""X-UA-Compatible"" content=""IE=edge"">


   7 :     <meta name=""viewport"" content=""width=device-width, initial-scale=1"">


   8 :     <title>{% block title %}{{ misago_settings.forum_name }}{% endblock %}</title>


   9 :     <meta name=""description"" content=""{% block meta_description %}{% endblock %}"">


   10 :     <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->


   11 :     <!--[if lt IE 9]>


   12 :       <script src=""https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js""></script>


   13 :       <script src=""https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js""></script>


   14 :     <![endif]-->


   15 :      {% compressed_css 'misago' %} 


   16 :     <link rel=""apple-touch-icon-precomposed"" sizes=""144x144"" href=""{% static 'apple-touch-icon-144-precomposed.png' %}"">


   17 :     <link rel=""apple-touch-icon-precomposed"" sizes=""114x114"" href=""{% static 'apple-touch-icon-114-precomposed.png' %}"">


   18 :     <link rel=""apple-touch-icon-precomposed"" sizes=""72x72"" href=""{% static 'apple-touch-icon-72-precomposed.png' %}"">


   19 :     <link rel=""apple-touch-icon-precomposed"" href=""{% static 'apple-touch-icon-57-precomposed.png' %}"">


   20 :     <link rel=""shortcut icon"" href=""{% static 'favicon.ico' %}"">


   21 :   </head>


   22 :   <body>


   23 : 


   24 :     {% include ""misago/messages.html"" %}


   25 :     {% include ""misago/navbar.html"" %}


Traceback:
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\core\handlers\base.py"" in get_response
  114.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\misago-0.6.0dev-py2.7.egg\misago\core\views.py"" in forum_index
  5.     return render(request, 'misago/index.html')
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\shortcuts\__init__.py"" in render
  53.     return HttpResponse(loader.render_to_string(*args, **kwargs),
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\loader.py"" in render_to_string
  169.         return t.render(context_instance)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\base.py"" in render
  140.             return self._render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\test\utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\debug.py"" in render_node
  78.             return node.render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\loader_tags.py"" in render
  123.         return compiled_parent._render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\test\utils.py"" in instrumented_test_render
  85.     return self.nodelist.render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\base.py"" in render
  840.                 bit = self.render_node(node, context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django-1.6.1-py2.7.egg\django\template\debug.py"" in render_node
  78.             return node.render(context)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django_pipeline-1.3.20-py2.7.egg\pipeline\templatetags\compressed.py"" in render
  55.         return self.render_compressed(package, 'css')
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django_pipeline-1.3.20-py2.7.egg\pipeline\templatetags\compressed.py"" in render_compressed
  40.             paths = packager.compile(package.paths)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django_pipeline-1.3.20-py2.7.egg\pipeline\packager.py"" in compile
  97.         return self.compiler.compile(paths, force=force)
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\django_pipeline-1.3.20-py2.7.egg\pipeline\compilers\__init__.py"" in compile
  49.                 return list(executor.map(_compile, paths))
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\futures-2.1.6-py2.7.egg\concurrent\futures\_base.py"" in map
  549.                     yield future.result()
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\futures-2.1.6-py2.7.egg\concurrent\futures\_base.py"" in result
  404.                 return self.__get_result()
File ""f:\~workbench\git\github\Misago\testproject\env-future\lib\site-packages\futures-2.1.6-py2.7.egg\concurrent\futures\_base.py"" in __get_result
  356.             raise self._exception

Exception Type: CompilerError at /
Exception Value: ϵͳ�Ҳ���ָ����·����

```
"
15792,rafalp,Misago,11,closed,256,0,https://api.github.com/repos/rafalp/Misago/issues/256/comments,https://github.com/rafalp/Misago/issues/256,[],Create MisagoExceptionsHandler and delegate handling Misago exceptions from views/decorators to it.,"Single Misago-wide exception handler for Misago-specific exception will spare developers from writing boilerplate that would turn exceptions into error403/error404 views every time ACL checks are performed.

Basically, exceptions handler could provide two public methods:
- **delegate_exception_to_misago(request, exception)**
- **handle_exception(request, exception)**

First method would check if Misago wants to handle exception, and if it came from misago links space (kind of hacky way is to see if request link starts with string that board_home link produces)

Additionally such middleware could intercept exceptions raised by out of range pagination, get_object_or_404 or outdates slug request, and return redirects for valid links.

Additionally, Misago will no longer need to use Django handler404 and handler403 URLconf's settings, getting out of the way for those who are building their own projects around Misago and want to use different approach to error pages.
"
15870,rafalp,Misago,12,closed,170,2,https://api.github.com/repos/rafalp/Misago/issues/170/comments,https://github.com/rafalp/Misago/issues/170,[],Error upon handling any request,"Site becomes unaccessible due to the missing module.

```
[05/Jul/2013 21:33:21] ""GET / HTTP/1.1"" 500 59
   Traceback (most recent call last):
     File ""/usr/lib/python2.7/wsgiref/handlers.py"", line 85, in run
       self.result = application(self.environ, self.start_response)
     File ""/home/web/misago/env/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py"", line 236, in __call__
       self.load_middleware()
     File ""/home/web/misago/env/local/lib/python2.7/site-packages/django/core/handlers/base.py"", line 53, in    load_middleware
       raise exceptions.ImproperlyConfigured('Error importing middleware %s: ""%s""' % (mw_module, e))
   ImproperlyConfigured: Error importing middleware misago.middleware.threading: ""No module named threading""
```
"
15871,rafalp,Misago,12,closed,169,1,https://api.github.com/repos/rafalp/Misago/issues/169/comments,https://github.com/rafalp/Misago/issues/169,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/bug"", ""color"": ""FF9800"", ""node_id"": ""MDU6TGFiZWwxOTk3NDg0Mw=="", ""id"": 19974843}]",Changing Settings in ACP broken,"I'm getting this error after entering TOS contents and applying changes:

TypeError at /admincp/system/tos-130/

'function' object does not support item assignment

Request Method:     POST
Request URL:    http://misago.pl/admincp/system/tos-130/
Django Version:     1.5.1
Exception Type:     TypeError
Exception Value:    

'function' object does not support item assignment

Exception Location:     /home/l0ud/Misago-pl/misago/apps/admin/settings/views.py in settings, line 51
"
15941,rafalp,Misago,12,closed,99,4,https://api.github.com/repos/rafalp/Misago/issues/99/comments,https://github.com/rafalp/Misago/issues/99,[],local variable 'context' referenced before assignment,"Hi,I start the misago and it run out with a page error:

Environment:

Request Method: GET
Request URL: http://127.0.0.1:8900/

Django Version: 1.5.1
Python Version: 2.7.3
Installed Applications:
('south',
 'coffin',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'mptt',
 'debug_toolbar',
 'misago')
Installed Middleware:
('misago.middleware.stopwatch.StopwatchMiddleware',
 'misago.middleware.heartbeat.HeartbeatMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware',
 'misago.middleware.cookiejar.CookieJarMiddleware',
 'misago.middleware.settings.SettingsMiddleware',
 'misago.middleware.monitor.MonitorMiddleware',
 'misago.middleware.theme.ThemeMiddleware',
 'misago.middleware.firewalls.FirewallMiddleware',
 'misago.middleware.crawlers.DetectCrawlerMiddleware',
 'misago.middleware.session.SessionMiddleware',
 'misago.middleware.bruteforce.JamMiddleware',
 'misago.middleware.csrf.CSRFMiddleware',
 'misago.middleware.banning.BanningMiddleware',
 'misago.middleware.messages.MessagesMiddleware',
 'misago.middleware.user.UserMiddleware',
 'misago.middleware.acl.ACLMiddleware',
 'misago.middleware.privatethreads.PrivateThreadsMiddleware',
 'django.middleware.common.CommonMiddleware')

Traceback:
File ""D:\Python27\lib\site-packages\django\core\handlers\base.py"" in get_response
1.                 response = middleware_method(request, response)
   File ""D:\Python27\lib\site-packages\django_debug_toolbar-0.9.4-py2.7.egg\debug_toolbar\panels\template.py"" in process_response
2.                     pformat(k(self.request))) for k in get_standard_processors()
   File ""G:\open_projects\Misago-master\misago\context_processors.py"" in common
3.     return context

Exception Type: UnboundLocalError at /

My question: How to fix it? and if it meet the django 1.5.1?
"
15986,rafalp,Misago,13,closed,54,0,https://api.github.com/repos/rafalp/Misago/issues/54/comments,https://github.com/rafalp/Misago/issues/54,"[{""default"": false, ""name"": ""client"", ""url"": ""https://api.github.com/repos/rafalp/Misago/labels/client"", ""color"": ""81D4FA"", ""node_id"": ""MDU6TGFiZWwyNjQ4MDU0Nw=="", ""id"": 26480547}]",Remove non-ascii characters from uploaded filenames,"Misago relies on python.path library to work with uploaded files. This library in return works with OS's locale to work with files on filesystem. If locale is not unicode (ergo. ""en_US"" instead of ""en_US.UTF-8""), path will crash with UnicodeEncodeError because  it will use str instead of unicode to work with path strings.

Solution to this is to put original file name trough either unidecode or django's smart_str before giving it to path(). This solution however will work only on uploaded files 
"
16043,Tivix,django-rest-auth,2,closed,529,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/529/comments,https://github.com/Tivix/django-rest-auth/issues/529,[],REST_AUTH_REGISTER_SERIALIZERS completely ignored,"In my `settings.py` I have set:

```
REST_AUTH_REGISTER_SERIALIZERS = {
    'REGISTER_SERIALIZER': 'users.serializers.UserRegisterSerializer',
}
```

where:
-  `users` is my Django app containing my custom user model
- `serializers` is a python file in which
  - `UserRegisterSerializer` is defined

This is in accordance with the [docs](https://django-rest-auth.readthedocs.io/en/0.9.4/configuration.html):

> REST_AUTH_REGISTER_SERIALIZERS
> 
> You can define your custom serializers for registration endpoint. Possible key values:
> 
> REGISTER_SERIALIZER - serializer class in rest_auth.registration.views.RegisterView, default value rest_auth.registration.serializers.RegisterSerializer

`django-rest-auth` still tries to use its default `RegisterSerializer` which causes Django to crash, as my `CustomUser` model does not have a username field (why I need a custom REGISTER_SERIALIZER in the first place).


```
$ python manage.py runserver
Watching for file changes with StatReloader
Performing system checks...

Traceback (most recent call last):
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/db/models/options.py"", line 565, in get_field
    return self.fields_map[field_name]
KeyError: 'username'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 15, in <module>
    execute_from_command_line(sys.argv)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
    utility.execute()
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/__init__.py"", line 375, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/base.py"", line 323, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 60, in execute
    super().execute(*args, **options)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/base.py"", line 364, in execute
    output = self.handle(*args, **options)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 95, in handle
    self.run(**options)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/core/management/commands/runserver.py"", line 102, in run
    autoreload.run_with_reloader(self.inner_run, **options)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/utils/autoreload.py"", line 579, in run_with_reloader
    start_django(reloader, main_func, *args, **kwargs)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/utils/autoreload.py"", line 564, in start_django
    reloader.run(django_main_thread)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/utils/autoreload.py"", line 272, in run
    get_resolver().urlconf_module
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/utils/functional.py"", line 80, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/urls/resolvers.py"", line 564, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/home/sudomann/repos/divvy-env/divvy/django/divvy/urls.py"", line 22, in <module>
    path('api/', include('api.urls')),
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/urls/conf.py"", line 34, in include
    urlconf_module = import_module(urlconf_module)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/home/sudomann/repos/divvy-env/divvy/django/api/urls.py"", line 6, in <module>
    path('rest-auth/registration/', include('rest_auth.registration.urls')),
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/urls/conf.py"", line 34, in include
    urlconf_module = import_module(urlconf_module)
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/importlib/__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/rest_auth/registration/urls.py"", line 4, in <module>
    from .views import RegisterView, VerifyEmailView
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/rest_auth/registration/views.py"", line 26, in <module>
    from rest_auth.registration.serializers import (VerifyEmailSerializer,
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/rest_auth/registration/serializers.py"", line 166, in <module>
    class RegisterSerializer(serializers.Serializer):
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/rest_auth/registration/serializers.py"", line 168, in RegisterSerializer
    max_length=get_username_max_length(),
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/allauth/utils.py"", line 68, in get_username_max_length
    max_length = User._meta.get_field(USER_MODEL_USERNAME_FIELD).max_length
  File ""/home/sudomann/repos/divvy-env/lib/python3.6/site-packages/django/db/models/options.py"", line 567, in get_field
    raise FieldDoesNotExist(""%s has no field named '%s'"" % (self.object_name, field_name))
django.core.exceptions.FieldDoesNotExist: CustomUser has no field named 'username'
```"
16051,Tivix,django-rest-auth,2,closed,512,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/512/comments,https://github.com/Tivix/django-rest-auth/issues/512,[],Django/Vue braces added to request method after logout,"Cross-post from [axios/axios#1994 (comment)](https://github.com/axios/axios/issues/1994#issuecomment-464779874) that I thought was an axios issue but a user tried it out with a mock backend server and didn't have a problem. I'm also posting on https://github.com/davesque/django-rest-framework-simplejwt/ because I'm not sure if it's a simplejwt issue or a rest-auth issue (or maybe even further down into Django/DRF)

I have a basic user management project that I'm using off of which to scaffold other projects. It is a Vue CLI 3 front end and Django/Django REST Framework/Django REST Auth back end. The project I'm posting here uses sqllite but it can relatively easily be converted to another db.

Here is the link to the full repo for anyone who is willing to download to try to replicate my issue: https://github.com/JVP3122/user-project

I'm having a very strange problem in that when I log out of the site and then try to log back in directly from the same page it seems that axios is adding the payload to the beginning of the request method.

For example, in the images found in the post I put up in Imgur (https://imgur.com/a/bEsx662) the user name is simply ""test"" with the password ""password"", and when I try to log back in after logging out the subsequent login attempt is no longer a POST route, but instead a {}POST route. If I try again, the route becomes a {""USERNAME"":""TEST"",""PASSWORD"":""PASSWORD""}POST method.

I've tried looking at the config in the axios request interceptor, looking at the dispatch method in the rest_framework source code (checking request details in the dispatch function in , and I can't figure out what is going on or how to solve this. It's a small bug that doesn't take away from the rest of the functionality, but it's a bug nonetheless.

Any help would be appreciated."
16056,Tivix,django-rest-auth,2,closed,505,0,https://api.github.com/repos/Tivix/django-rest-auth/issues/505/comments,https://github.com/Tivix/django-rest-auth/issues/505,[],Would you be able to say how to use the newer re_path syntax? The only example I've found fails with a syntax error:,"Would you be able to say how to use your regex with the newer re_path syntax? The only example I've found fails with a syntax error:
`re_path(r'^rest-auth/registration/account-confirm-email/(?P<key>[\s\d\w().+-_',:&]+)/$', TemplateView.as_view(), name='account_confirm_email'),`

_Originally posted by @Shelagh-Lewins in https://github.com/Tivix/django-rest-auth/issues/290#issuecomment-459448523_"
16070,Tivix,django-rest-auth,2,closed,473,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/473/comments,https://github.com/Tivix/django-rest-auth/issues/473,[],Cannot Login (allauth.account.models.EmailAddress.DoesNotExist),"I set as blew, I could user registration, verify-mail. But when I try to login, occur the error.
How to solve the problem? 

* version
  * django 2.1.2
  * django-allauth 0.38.0
  * django-rest-auth 0.9.3
* urls
```
urlpatterns = [
    path('', include('rest_auth.urls')),
    path('registration/account-email-verification-sent/', django_rest_auth_null, name='account_email_verification_sent'),
    path('registration/', include('rest_auth.registration.urls')),
]
```

* settings
```
# Rest-framework
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': (
        'rest_framework.renderers.JSONRenderer',
        'rest_framework.renderers.BrowsableAPIRenderer',
    ),
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.TokenAuthentication',
    ),
    'DEFAULT_PERMISSION_CLASSES': (
        'rest_framework.permissions.AllowAny',
    )
}

SITE_ID = 1
ACCOUNT_EMAIL_SUBJECT_PREFIX = ""[test blog]""
ACCOUNT_AUTHENTICATED_LOGIN_REDIRECTS = False
ACCOUNT_AUTHENTICATION_METHOD = ""email""
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_USERNAME_REQUIRED = False
ACCOUNT_EMAIL_VERIFICATION = ""mandatory""
ACCOUNT_UNIQUE_EMAIL = True
AUTHENTICATION_BACKENDS = (
    # Needed to login by username in Django admin, regardless of `allauth`
    'django.contrib.auth.backends.ModelBackend',
    # `allauth` specific authentication methods, such as login by e-mail
    'allauth.account.auth_backends.AuthenticationBackend',
)


REST_AUTH_SERIALIZERS = {
    'USER_DETAILS_SERIALIZER': 'users.api.serializers.UserSerializer'
}
```

### ERROR
```
nternal Server Error: /api/accounts/login/
Traceback (most recent call last):
  File ""/blog_env/lib/python3.7/site-packages/django/core/handlers/exception.py"", line 34, in inner
    response = get_response(request)
  File ""/blog_env/lib/python3.7/site-packages/django/core/handlers/base.py"", line 126, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/blog_env/lib/python3.7/site-packages/django/core/handlers/base.py"", line 124, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/blog_env/lib/python3.7/site-packages/django/views/decorators/csrf.py"", line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/django/utils/decorators.py"", line 45, in _wrapper
    return bound_method(*args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/django/views/decorators/debug.py"", line 76, in sensitive_post_parameters_wrapper
    return view(request, *args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/rest_auth/views.py"", line 49, in dispatch
    return super(LoginView, self).dispatch(*args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/rest_framework/views.py"", line 495, in dispatch
    response = self.handle_exception(exc)
  File ""/blog_env/lib/python3.7/site-packages/rest_framework/views.py"", line 455, in handle_exception
    self.raise_uncaught_exception(exc)
  File ""/blog_env/lib/python3.7/site-packages/rest_framework/views.py"", line 492, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/rest_auth/views.py"", line 93, in post
    self.serializer.is_valid(raise_exception=True)
  File ""/blog_env/lib/python3.7/site-packages/rest_framework/serializers.py"", line 236, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File ""/blog_env/lib/python3.7/site-packages/rest_framework/serializers.py"", line 437, in run_validation
    value = self.validate(value)
  File ""/blog_env/lib/python3.7/site-packages/rest_auth/serializers.py"", line 105, in validate
    email_address = user.emailaddress_set.get(email=user.email)
  File ""/blog_env/lib/python3.7/site-packages/django/db/models/manager.py"", line 82, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File ""/blog_env/lib/python3.7/site-packages/django/db/models/query.py"", line 399, in get
    self.model._meta.object_name
allauth.account.models.EmailAddress.DoesNotExist: EmailAddress matching query does not exist.
[29/Oct/2018 03:59:35] ""POST /api/accounts/login/ HTTP/1.1"" 500 18654
[29/Oct/2018 04:41:41] ""GET /admin/ HTTP/1.1"" 200 7533
```

"
16073,Tivix,django-rest-auth,2,closed,470,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/470/comments,https://github.com/Tivix/django-rest-auth/pull/470,[],Adds django-allauth to dev-requirements.txt,"The `django-allauth` dependency was missing, which caused an error bootstrapping the dev environment with `virtualenv`."
16080,Tivix,django-rest-auth,2,closed,447,0,https://api.github.com/repos/Tivix/django-rest-auth/issues/447/comments,https://github.com/Tivix/django-rest-auth/issues/447,[],"POST Request returns ""Method \""GET\"" not allowed.""","Hello,

I have set up django-rest-auth as per the installation tutorial, yet I am not able to use the login API endpoint. When I send a POST request with the correct information, I receive a 405 status error in response with  ""Method \""GET\"" not allowed.""

However, when I navigate to the actual URL and POST it from the online form, it works fine and returns a token.

Help?!

EDIT:

Turned out to be an issue with URL redirection on the server-side."
16081,Tivix,django-rest-auth,2,closed,446,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/446/comments,https://github.com/Tivix/django-rest-auth/issues/446,[],While deleting a user from django admin: getting error	 no such table: allauth_socialaccount,"I added users using the rest-auth/register url. but i am not able to delete the users from the django admin console. it is giving the error 

**OperationalError at /admin/auth/user/
no such table: allauth_socialaccount**"
16086,Tivix,django-rest-auth,2,closed,432,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/432/comments,https://github.com/Tivix/django-rest-auth/issues/432,[],Registration turns on csrf token required (weirdest bug ever),"I'm building a REST API with Django Rest Framework and django-rest-auth.

Here is a list of all the packages I'm using:
```
Package             Version
------------------- ---------
certifi             2018.4.16
chardet             3.0.4
defusedxml          0.5.0
Django              1.11.13
django-allauth      0.36.0
django-authtools    1.6.0
django-model-utils  3.1.2
django-rest-auth    0.9.3
djangorestframework 3.8.2
idna                2.6

oauthlib            2.0.7
pip                 10.0.1
python3-openid      3.1.0
pytz                2018.4
requests            2.18.4
requests-oauthlib   0.8.0
setuptools          39.1.0
six                 1.11.0
urllib3             1.22
wheel               0.31.1
```

So you'll also have to install pip install django-rest-auth[with_social]
Make sure you are in the correct branch:|
18-05-14-loginandstuffstillworking

Everything works fine, except as soon as I create a user using rest-auth's registration view, the project gets screwed. One of the bugs is, that login suddenly requires a CSRF Token to be send. And my login view isn't even imported from rest auth.
Below I post a link to the repository so you can fork it and also the easy steps to reproduce the bug. It's very easy and very weird.
Repository: https://github.com/janhesters/BasicRestAPI/tree/18-05-14-loginandstuffstillworking

Steps to reproduce:
1. Fork the repository.
2. Make post requests to the login route (http://localhost:8000/api/auth/login/). You can use the users jan@web.de and bob@web.de. Both have the password root1234. Jan can log in, Bob doesn't, because only Jan has a verified e-mail.
So the keys for the post request should be:
email: jan@web.de
password: root1234
3. If you made sure that jan@web.de can log in, go on and the register view to the urls.py file.
Here is the code that needs to be added (add it to accounts/api/urls.py):

```
from rest_auth.registration import views as rest_auth_registration_views
...
  url(
        r'^registration/$',
        rest_auth_registration_views.RegisterView.as_view(),
        name='rest_register'
    ),
```

4.  Make a POST request to the register route. 
email: jim@web.de
password1: root1234
password2: root1234
5. When you now try to log in with jan@web.de or any other user, see that suddenly there is an error involving csrf tokens.

I don't know what causes this bug, but it's super inconvenient. Does anyone know how to fix this?

![screen shot 2018-05-14 at 22 43 19](https://user-images.githubusercontent.com/31096420/40022448-530b1e74-57c8-11e8-987d-67e636176eb3.png)"
16087,Tivix,django-rest-auth,2,closed,429,6,https://api.github.com/repos/Tivix/django-rest-auth/issues/429/comments,https://github.com/Tivix/django-rest-auth/issues/429,[],ImportError: No module named core.serializers,"Basically I get this error from the issue title when adding this to the `urls.py`:
```
url(r'^rest-api/auth/registration/', include('rest_auth.registration.urls')),
```
This is the traceback:
```
Traceback (most recent call last):
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/utils/autoreload.py"", line 228, in wrapper
    fn(*args, **kwargs)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/management/commands/runserver.py"", line 124, in inner_run
    self.check(display_num_errors=True)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/management/base.py"", line 359, in check
    include_deployment_checks=include_deployment_checks,
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/management/base.py"", line 346, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/checks/registry.py"", line 81, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/checks/urls.py"", line 16, in check_url_config
    return check_resolver(resolver)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/core/checks/urls.py"", line 26, in check_resolver
    return check_method()
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/urls/resolvers.py"", line 254, in check
    for pattern in self.url_patterns:
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/urls/resolvers.py"", line 405, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/utils/functional.py"", line 35, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/urls/resolvers.py"", line 398, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/a/Projects/project/project_app_django/project_app/urls.py"", line 49, in <module>
    url(r'^rest-api/auth/registration/', include('rest_auth.registration.urls')),
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/django/conf/urls/__init__.py"", line 50, in include
    urlconf_module = import_module(urlconf_module)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/rest_auth/registration/urls.py"", line 4, in <module>
    from .views import RegisterView, VerifyEmailView
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/rest_auth/registration/views.py"", line 32, in <module>
    from .app_settings import RegisterSerializer, register_permission_classes
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/rest_auth/registration/app_settings.py"", line 12, in <module>
    serializers.get('REGISTER_SERIALIZER', DefaultRegisterSerializer))
  File ""/Users/a/Projects/project/venv/lib/python2.7/site-packages/rest_auth/utils.py"", line 11, in import_callable
    return getattr(import_module(package), attr)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
ImportError: No module named core.serializers
```
This is `urls.py`:
```
api_router = routers.DefaultRouter()
api_router.register(r'cities', app.viewsets.CitiesViewSet)

urlpatterns += [
    # API URLs
    url(r'^rest-api/', include('rest_framework.urls', namespace='rest_framework')),
    url(r'^rest-api/', include(api_router.urls)),

    # Rest auth.
    url(r'^rest-api/auth/', include('rest_auth.urls')),
    url(r'^rest-api/auth/registration/', include('rest_auth.registration.urls')),

    # Allauth
    url(r'^account/', include('allauth.urls')),
]
```
Installed apps:
```
INSTALLED_APPS = (
    'crispy_forms',
    'compressor',
    'typogrify',
    'meta',
    'any_imagefield',
    'django_countries',
    'sorl.thumbnail',
    'clear_cache',
    'annoying',
    'markdown_deux',
    'django_filters',

    'rest_framework',
    'rest_framework.authtoken',
    'rest_framework_filters',
    'rest_auth',

    'allauth',
    'allauth.account',
    'rest_auth.registration',
    'allauth.socialaccount.providers.instagram',
    'allauth.socialaccount.providers.twitter',
)
```
Any thoughts? If I comment the `rest-api/auth/registration/` in the `urls.py` there are no errors of course."
16093,Tivix,django-rest-auth,2,closed,410,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/410/comments,https://github.com/Tivix/django-rest-auth/issues/410,[],401 Unauthorized error on calling social_account_disconnect ,"I'm getting a 401 error (""Authentication credentials were not provided."") after making the following api call:

```
axios.post(`/socialaccounts/${account.id}/disconnect/`, {
                    headers: {
                        'Authorization': 'Token ' + this.getAuthToken,
                    }
                })
```
The token being included is the same token being used for every other TokenAuth call to DRF and django-rest-auth.  

Edit: Ok, this is really strange. The same request works if I use the REST client in WebStorm. And the correct token is definitely being sent with the request. Really no idea what is going on here. In the same view I perform a GET to the social_account_list and that works just fine."
16096,Tivix,django-rest-auth,2,closed,402,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/402/comments,https://github.com/Tivix/django-rest-auth/issues/402,[],pip install django-rest-auth[with_social] not working,"I'm trying to integrate django-rest-auth with django-allauth to support social login.
So I tried the following, after the reading the doc

```pip install django-rest-auth[with_social]```
 
But I could not install the package with the error message returning 

`zsh: no matches found: django-rest-auth[with_social]`

Any ideas why this happens? Thanks."
16100,Tivix,django-rest-auth,2,closed,395,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/395/comments,https://github.com/Tivix/django-rest-auth/issues/395,[],Demo project setup fails with Django-2.0,"Setting up the demo project [as described in the docs](http://django-rest-auth.readthedocs.io/en/latest/demo.html) works perfectly fine with Django-1.11 but it fails with Django-2.0.

```
>>>python manage.py migrate --settings=demo.settings --noinput
Traceback (most recent call last):
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/rest_framework/compat.py"", line 27, in <module>
    from django.urls import (
ImportError: cannot import name 'RegexURLPattern'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/__init__.py"", line 365, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/base.py"", line 288, in run_from_argv
    self.execute(*args, **cmd_options)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/base.py"", line 332, in execute
    self.check()
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/base.py"", line 364, in check
    include_deployment_checks=include_deployment_checks,
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/commands/migrate.py"", line 58, in _run_checks
    issues.extend(super()._run_checks(**kwargs))
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/management/base.py"", line 351, in _run_checks
    return checks.run_checks(**kwargs)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/checks/registry.py"", line 73, in run_checks
    new_errors = check(app_configs=app_configs)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/checks/urls.py"", line 40, in check_url_namespaces_unique
    all_namespaces = _load_all_namespaces(resolver)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/core/checks/urls.py"", line 57, in _load_all_namespaces
    url_patterns = getattr(resolver, 'url_patterns', [])
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/utils/functional.py"", line 36, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/urls/resolvers.py"", line 536, in url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/utils/functional.py"", line 36, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/django/urls/resolvers.py"", line 529, in urlconf_module
    return import_module(self.urlconf_name)
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/importlib/__init__.py"", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 2254, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 2237, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 2226, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1200, in _load_unlocked
  File ""<frozen importlib._bootstrap>"", line 1129, in _exec
  File ""<frozen importlib._bootstrap>"", line 1471, in exec_module
  File ""<frozen importlib._bootstrap>"", line 321, in _call_with_frames_removed
  File ""/tmp/django-rest-auth/demo/demo/urls.py"", line 5, in <module>
    from rest_framework_swagger.views import get_swagger_view
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/rest_framework_swagger/views.py"", line 1, in <module>
    from rest_framework import exceptions
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/rest_framework/exceptions.py"", line 17, in <module>
    from rest_framework.utils.serializer_helpers import ReturnDict, ReturnList
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/rest_framework/utils/serializer_helpers.py"", line 8, in <module>
    from rest_framework.compat import unicode_to_repr
  File ""/tmp/django-rest-auth/demo/env/lib/python3.4/site-packages/rest_framework/compat.py"", line 31, in <module>
    from django.core.urlresolvers import (  # Will be removed in Django 2.0
ImportError: No module named 'django.core.urlresolvers'
```
"
16102,Tivix,django-rest-auth,2,closed,392,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/392/comments,https://github.com/Tivix/django-rest-auth/issues/392,[],password/reset Error being thrown,"I'm attempting to implement a _Forgot Password_ button, utilizing the url `/rest_auth/pasword/reset`.

My assumption, from reading the [docs](http://django-rest-auth.readthedocs.io/en/latest/api_endpoints.html#basic) on this endpoint, is that you only need to pass an `email` to the endpoint, and then the reset email will be sent, prompting the user to reset their password.

The issue is, this flow only works when the user is actually logged in, thus when the session has a valid token key to send back to the server.

If the user forgets their password, they obviously won't be logged in, and thus won't have a token to send back to the server. This is the error I get when trying to post to the endpoint with just the email and no token header.
`{""detail"":""Invalid token header. No credentials provided.""}`

I didn't think that we should need to include a token in the header because that defeats the purpose. Am I misunderstanding how this endpoint is supposed to be used?"
16116,Tivix,django-rest-auth,2,closed,375,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/375/comments,https://github.com/Tivix/django-rest-auth/issues/375,[],`version` error when URLPathVersioning is enabled in DRF,"Calling: `/v1/rest-auth/logout/` and `/v1/rest-auth/password/change` with URL Versioning enabled in Django Rest Framework throws the error:

`TypeError: post() got an unexpected keyword argument 'version'`

**settings.py:**

```
REST_FRAMEWORK = {
    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',
    'DEFAULT_VERSION': 'v1', 
    'ALLOWED_VERSIONS': ('v1', ),

}
```

**urls.py:**

```
URL_VERSION = r'^(?P<version>v[1])'
url(f'{URL_VERSION}/rest-auth/', include('rest_auth.urls'))
```

Else without URL versioning the URLs work okay.

Packages:

> django==1.10.8
> djangorestframework==3.5.1
> django-rest-auth==0.9.1"
16119,Tivix,django-rest-auth,2,closed,368,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/368/comments,https://github.com/Tivix/django-rest-auth/issues/368,[],Field name `username` is not valid for model `User`.,"I use custom user model. I thought that by defining the following settings it will ignore 'username'. However, I still hit the same error.

Field name `username` is not valid for model `User`.
_~/lib/python3.6/site-packages/rest_framework/serializers.py in build_unknown_field, line 1258_

```
ACCOUNT_EMAIL_VERIFICATION = 'mandatory'
ACCOUNT_AUTHENTICATION_METHOD = 'email'
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_USER_MODEL_USERNAME_FIELD = None
ACCOUNT_USERNAME_REQUIRED = False
ACCOUNT_UNIQUE_EMAIL = True
REST_USE_JWT = True
JWT_SERIALIZER = True
REST_USE_JWT=True
```

I am going nuts implementing this stuff. What am I missing? Lets assume that email is verified, I'd like to login and get JWT in the response. Do I need to implement custom LoginSerializer? But, then if you look at how it is [configured by default](https://github.com/Tivix/django-rest-auth/blob/master/rest_auth/serializers.py), you can see that it has some logic that checks what kind of credentials have been used on login attempt. I am lost."
16142,Tivix,django-rest-auth,3,closed,333,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/333/comments,https://github.com/Tivix/django-rest-auth/issues/333,[],Support for Google Captcha code,"It is possible to add Google Recaptcha validation by adding these code in the RegisterSerializer class:

    import requests
    class RegisterSerializer(serializers.Serializer):
         captcha_token = serializers.CharField(required=True, write_only=True)
    
        def validate_captcha_token(self, value):
            try:
                r = requests.post(
                    'https://www.google.com/recaptcha/api/siteverify',
                    {
                        'secret': settings.RECAPTCHA_PRIVATE_KEY,
                        'response': value
                    },
                    timeout=5
                )
                r.raise_for_status()
            except requests.RequestException as e:
                raise ValidationError(
                    _('Connection to reCaptcha server failed')
                )
    
            json_response = r.json()
    
            if bool(json_response['success']):
                return value
            else:
                if 'error-codes' in json_response:
                    if 'missing-input-secret' in json_response['error-codes'] or \
                                    'invalid-input-secret' in json_response['error-codes']:
                        raise serializers.ValidationError(
                            _('Connection to reCaptcha server failed')
                        )
                    else:
                        raise serializers.ValidationError(
                            _('reCaptcha invalid or expired, try again')
                        )
                else:
                    raise serializers.ValidationError(
                        _('reCaptcha response from Google not valid, try again')
                    )

The code comes from [here](https://github.com/kbytesys/django-recaptcha2/blob/master/snowpenguin/django/recaptcha2/fields.py)

In settings.py add:

    RECAPTCHA_PRIVATE_KEY = ''"
16146,Tivix,django-rest-auth,3,closed,326,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/326/comments,https://github.com/Tivix/django-rest-auth/issues/326,[],"When submitting email to reset password, 500 status because the password reset confirm URL is missing arguments?","It looks like django-rest-auth, by default, simply uses native Django's contrib/admin/templates/registration/password_reset_email.html template when you submit your email to reset your password.

If you look at urlpatterns in django.contrib.auth.urls, the password_reset_confirm URL takes uidb64 and token params, which makes sense--when clicked on, this will identify the user resetting the password. However, django-rest-auth's rest_password_reset_confirm URL doesn't take any arguments: it just goes to password/reset/confirm/. How can it work? I get the following 500 error when submitting my email to reset my password, and I'm not surprised--the error makes sense:

NoReverseMatch: Reverse for 'password_reset_confirm' with arguments '()' and keyword arguments '{u'uidb64': 'NA', u'token': u'4lj-65cd7b4219c9206126b4'}' not found.

What I don't understand is it seems like such a basic thing that I must be doing something wrong--otherwise everyone using django-rest-auth would get this error because the arguments are clearly missing in the URL definition. Has anyone else experienced it and if so, did you update urlpatterns to fix it?"
16149,Tivix,django-rest-auth,3,closed,320,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/320/comments,https://github.com/Tivix/django-rest-auth/issues/320,[],NoReverseMatch at /rest-auth/registration/account-confirm-email/OQ:1cltRJ:Suk-ByPIoc5fpzcVjTBcgm2dh88/,"I am trying to impliment rest-auth in my project which uses angular in front-end. I have managed to get the user to register, however the problem is that when I click the registration link from my email, I get this error
NoReverseMatch at /rest-auth/registration/account-confirm-email/OQ:1cltRJ:Suk-ByPIoc5fpzcVjTBcgm2dh88/

here is the whole traceback

Environment:


Request Method: GET
Request URL: http://localhost:8000/rest-auth/registration/account-confirm-email/OQ:1cltRJ:Suk-ByPIoc5fpzcVjTBcgm2dh88/

Django Version: 1.10.6
Python Version: 3.6.0
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'corsheaders',
 'marks_app',
 'profiles_app',
 'search_app',
 'timeline_app',
 'accounts_app',
 'sectors_app',
 'videos_app',
 'university_app',
 'rest_framework',
 'rest_framework.authentication',
 'rest_framework.authtoken',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.facebook',
 'allauth.socialaccount.providers.twitter',
 'rest_auth.registration',
 'rest_auth',
 'debug_toolbar',
 'rest_framework_swagger',
 'api',
 'djangular']
Installed Middleware:
['django.middleware.security.SecurityMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'corsheaders.middleware.CorsMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware']


Template error:
In template C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\allauth\templates\account\email_confirm.html, error at line 16
   Reverse for 'account_email' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []   6 : {% block head_title %}{% trans ""Confirm E-mail Address"" %}{% endblock %}
   7 : 
   8 : 
   9 : {% block content %}
   10 : <h1>{% trans ""Confirm E-mail Address"" %}</h1>
   11 : 
   12 : {% if confirmation %}
   13 : 
   14 : {% user_display confirmation.email_address.user as user_display %}
   15 : 
   16 : <p>{% blocktrans with confirmation.email_address.email as email %}Please confirm that <a href=""mailto:{{ email }}"">{{ email }}</a> is an e-mail addres s for user {{ user_displa y }}.{% endblocktrans %}</p>
   17 : 
   18 : <form method=""post"" action=""{% url 'account_confirm_email' confirmation.key %}"">
   19 : {% csrf_token %}
   20 :     <button type=""submit"">{% trans 'Confirm' %}</button>
   21 : </form>
   22 : 
   23 : {% else %}
   24 : 
   25 : {% url 'account_email' as email_url %}
   26 : 


Traceback:

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\handlers\exception.py"" in inner
  42.             response = get_response(request)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\handlers\base.py"" in _legacy_get_response
  249.             response = self._get_response(request)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\handlers\base.py"" in _get_response
  217.                 response = self.process_exception_by_middleware(e, request)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\handlers\base.py"" in _get_response
  215.                 response = response.render()

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\response.py"" in render
  109.             self.content = self.rendered_content

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\response.py"" in rendered_content
  86.         content = template.render(context, self._request)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\backends\django.py"" in render
  66.             return self.template.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  208.                     return self._render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\test\utils.py"" in instrumented_test_render
  94.     return self.nodelist.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  994.                 bit = node.render_annotated(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render_annotated
  961.             return self.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\loader_tags.py"" in render
  174.         return compiled_parent._render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\test\utils.py"" in instrumented_test_render
  94.     return self.nodelist.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  994.                 bit = node.render_annotated(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render_annotated
  961.             return self.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\loader_tags.py"" in render
  174.         return compiled_parent._render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\test\utils.py"" in instrumented_test_render
  94.     return self.nodelist.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  994.                 bit = node.render_annotated(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render_annotated
  961.             return self.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\loader_tags.py"" in render
  70.                 result = block.nodelist.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  994.                 bit = node.render_annotated(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render_annotated
  961.             return self.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\defaulttags.py"" in render
  315.                 return nodelist.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render
  994.                 bit = node.render_annotated(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\base.py"" in render_annotated
  961.             return self.render(context)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\template\defaulttags.py"" in render
  439.             url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\urls\base.py"" in reverse
  91.     return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))

File ""C:\Users\Nibit\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\urls\resolvers.py"" in _reverse_with_prefix
  392.             (lookup_view_s, args, kwargs, len(patterns), patterns)

Exception Type: NoReverseMatch at /rest-auth/registration/account-confirm-email/OQ:1cltRJ:Suk-ByPIoc5fpzcVjTBcgm2dh88/
Exception Value: Reverse for 'account_email' with arguments '()' and keyword arguments '{}' not found. 0 pattern(s) tried: []

Can anyone help me please. "
16151,Tivix,django-rest-auth,3,closed,318,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/318/comments,https://github.com/Tivix/django-rest-auth/issues/318,[],AttributeError when using custom UserDetailsSerializer,"We have created a custom `UserDetailsSerializer` but when trying to run the application we get the error:

`AttributeError: module 'path.to.serializers' has no attribute 'MPUserDetailsSerializer'`

The full error is [pasted here](http://pastebin.com/c6NFpmFF).

The setup for REST_AUTH_SERIALIZERS and USER_DETAILS_SERIALIZER in the django settings is:
```
REST_AUTH_SERIALIZERS = {
    'LOGIN_SERIALIZER': 'questions.serializers.LoginSerializer',
    'JWT_SERIALIZER' : 'questions.serializers.JWTSerializer',
    'USER_DETAILS_SERIALIZER' : 'questions.serializers.MPUserDetailsSerializer',
}
```

The custom serializer is:

```
from rest_auth import serializers as auth_serializers

class MPUserDetailsSerializer(auth_serializers.UserDetailsSerializer):
""""""
User model w/o password
""""""
class Meta:
    model = User
    fields = ('pk', 'username', 'email', 'name')
    read_only_fields = ('username', )

def validate_email(self, email):
    email = get_adapter().clean_email(email)
    if allauth_settings.UNIQUE_EMAIL:
        if email and email_address_exists(email):
            raise serializers.ValidationError(
                _(""A user is already registered with this e-mail address.""))
    return email
```

The workaround that we did was to remove the following lines from our local virtualenv, in the file `/lib/python3.5/site-packages/rest-auth/serializers.py`:

```
# Required to allow using custom USER_DETAILS_SERIALIZER  in
# JWTSerializer. Defining it here to avoid circular imports
rest_auth_serializers = getattr(settings, 'REST_AUTH_SERIALIZERS', {})
JWTUserDetailsSerializer = import_callable(
  rest_auth_serializers.get('USER_DETAILS_SERIALIZER', UserDetailsSerializer)
)
```

And replacing `JWTUserDetailsSerializer` with `UserDetailsSerializer` in the same file. But that's a really bad solution since we are changing third parties code and it doesn't make any sense to remove specifically the lines that are told to be required to allow custom `USER_DETAILS_SERIALIZER`, but we don't know what else to do to make it work, are we missing something? a config maybe?

We're using django v1.10.1, djangorestframework v3.4.7 and django-rest-auth v0.9.0

(This issue was firstly created at [stackoverflow](http://stackoverflow.com/questions/41965340/attributeerror-when-using-custom-userdetailsserializer-in-django-rest-auth))
"
16158,Tivix,django-rest-auth,3,closed,304,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/304/comments,https://github.com/Tivix/django-rest-auth/issues/304,[],Error to register through REST API,"I have error when making registration through POST request to `/api/v1/auth/registration/` which says `NoReverseMatch at /api/v1/auth/registration/. 'users' is not a registered namespace`.

In my **urls.py**:
```
url(r'^api/v1/auth/', include('rest_auth.urls')),
url(r'^api/v1/auth/registration/', include('rest_auth.registration.urls')),
```

In my settings:
```
# APP CONFIGURATION
# ------------------------------------------------------------------------------
DJANGO_APPS = (
    # Default Django apps:
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # Useful template tags:
    # 'django.contrib.humanize',

    # Admin
    'django.contrib.admin',
)
THIRD_PARTY_APPS = (
    'crispy_forms',  # Form layouts
    'allauth',  # registration
    'allauth.account',  # registration
    'allauth.socialaccount',  # registration
    'allauth.socialaccount.providers.facebook',
    'allauth.socialaccount.providers.linkedin_oauth2',
    'rest_framework',
    'rest_framework.authtoken',
    'rest_auth',
    'rest_auth.registration',
)

# Apps specific for this project go here.
LOCAL_APPS = (
    # custom users app
    'myapp.users.apps.UsersConfig',
    # Your stuff: custom apps go here
)

# See: https://docs.djangoproject.com/en/dev/ref/settings/#installed-apps
INSTALLED_APPS = DJANGO_APPS + THIRD_PARTY_APPS + LOCAL_APPS
```

"
16163,Tivix,django-rest-auth,3,closed,298,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/298/comments,https://github.com/Tivix/django-rest-auth/issues/298,[],400 error when logging in when using email only mode.,"I am trying to set up authentication using django-rest-auth and django-allauth. The user exists in the database and I can login to the django admin site. When I try to login using the rest-auth/login/ endpoint posting email/password, I receive a 400 error with the following response:

```
{
    ""non_field_errors"": [
        ""Unable to log in with provided credentials.""
    ]
}
```

I followed the instructions here: http://django-allauth.readthedocs.io/en/latest/configuration.html#configuration

In my settings file I have the following:

```
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_UNIQUE_EMAIL = True
ACCOUNT_AUTHENTICATION_METHOD = 'email' 
```

If I comment out the three lines above and use the same endpoint but add the username it works. It seems to only not work with email only mode.

Thanks for your help!"
16178,Tivix,django-rest-auth,3,closed,276,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/276/comments,https://github.com/Tivix/django-rest-auth/issues/276,[],Returning Oauth2 tokens,"Hello,

I've been struggling with this for a while, so pardon me if it is documented or I've missed it.

I have an application which uses Oauth2. However, djang-rest-auth seems prepared to return single (and most importantly, unique per user) tokens only, is that correct?

I have tried to use the _REST_AUTH_TOKEN_MODEL_ setting to set the model of the RefreshToken (currently _oauth2_provider.models.RefreshToken_, a well known Oauth2 toolkit for Django), and the _TOKEN_SERIALIZER_ setting to a serializer where I return the given RefreshToken, plus the access token assigned to it. I believe I still would need to set _REST_AUTH_TOKEN_CREATOR_ however this seems unclear to me and it appears the toolkit is managing tokens just fine - either way this setting is unneeded until I fix the issues.

**TLDR**
Even by using the settings provided to use a custom token system, they seem lacking when using non-unique-per-user tokens such as Oauth2 - the error I get is the following:

```
  File ""/usr/local/opt/pyenv/versions/xxxxx/lib/python3.4/site-packages/rest_auth/views.py"", line 83, in post
    self.login()
  File ""/usr/local/opt/pyenv/versions/xxxxx/lib/python3.4/site-packages/rest_auth/views.py"", line 59, in login
    self.token = create_token(self.token_model, self.user, self.serializer)
  File ""/usr/local/opt/pyenv/versions/xxxxx/lib/python3.4/site-packages/rest_auth/utils.py"", line 15, in default_create_token
    token, _ = token_model.objects.get_or_create(user=user)

oauth2_provider.models.MultipleObjectsReturned: get() returned more than one RefreshToken -- it returned 2!
```

Is there a workaround around this? Am I doing something wrong? Or would the project need to further evolve?
All I can think off is to create a custom proxy class that manages the token logic for me and leaves it all ready for django-rest-auth.

Thank you for your time, even with this issue, your project is saving me time :)
"
16184,Tivix,django-rest-auth,3,closed,267,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/267/comments,https://github.com/Tivix/django-rest-auth/issues/267,[],Cannot access overrides account_confirm_email,"In the FAQ, we can read:

> You should override this view/url to handle it in your API client somehow and then, send post to /verify-email/ endpoint with proper key.

I'm trying to write my own view and to override the URL but I cannot reach my endpoint.
My view is:

```
from django.views import View

class ConfirmEmailView(View):    
    def get(self, request):
        # Some code
        return Response(status=status.HTTP_401_UNAUTHORIZED)
    def post(self, request):
        # Some code
        return Response(status=status.HTTP_401_UNAUTHORIZED)
```

And my url:
`url(r'^rest-auth/registration/account-confirm-email/(?P<key>[-:\w]+)/$', ConfirmEmailView, name=""account_confirm_email""),`
When I run this URL:
`http://localhost:8000/rest-auth/registration/account-confirm-email/MTI:1buIr3:bA90-S2a6d4AToZ0bSLx4LTU9d8/`
I have a error message:

```
TypeError at /rest-auth/registration/account-confirm-email/MTI:1buIr3:bA90-S2a6d4AToZ0bSLx4LTU9d8/
__init__() takes 1 positional argument but 2 were given
```

Can someone give me a short example of how to override this view.
It may be a noob question but I'm new in Django...
"
16185,Tivix,django-rest-auth,3,closed,266,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/266/comments,https://github.com/Tivix/django-rest-auth/issues/266,[],Unable to import serializer,"Running following code:

`python -c 'from rest_auth.serializers import LoginSerializer'`

kill's the program. Is that to be expected?

This causes program to do ka-boom in any context except django app running (tests, sphinx, shell programs) as soon as we put mentioned above import anywhere in our program (and we do that to extend LoginSerializer).

Solution for us is to move LoginSerializer extension to separate file, right now it's grouped with other serializers that are imported by views. However if all of that is to be expected I guess documentation should contain a line or two that if you have an error ""Models aren't loaded yet"" you should make sure that rest_auth.serializer is not imported in context of views and/or models.

That being said I believe get_user_model should not be executed on module level at all. Consulting django docs it says:

> Generally speaking, you should reference the User model with the AUTH_USER_MODEL setting in code that is executed at import time. get_user_model() only works once Django has imported all models.
"
16188,Tivix,django-rest-auth,3,closed,261,5,https://api.github.com/repos/Tivix/django-rest-auth/issues/261/comments,https://github.com/Tivix/django-rest-auth/issues/261,[],"rest_auth.registration email confirmation: ""No module named 'user'""","Hello, I've set up and successfully ran Django 1.10.1, DRF 3.4.7, django-allauth 0.27.0 and django-rest-auth 0.8.1 (with JWT installed and enabled).

User registration is working fine, but email confirmation is not. When I register an user, it is created and then when trying to send the confirmation email, Django says that there is no module named 'user'. This happends at allauth/templates/account/email/email_confirmation_signup_message.txt error at line 1.

Is this a versioning problem? Am I doing something wrong? Thanks in advance.
"
16189,Tivix,django-rest-auth,3,closed,260,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/260/comments,https://github.com/Tivix/django-rest-auth/issues/260,[],"""client_class"" and ""callback_url"" - not defined","Hi all,
I am trying to implement social auth using ""django-rest-auth"".  I followed the instruction, however once I sent access_token and code to ""/rest-auth/facebook/"" endpoint a I get: 'Define callback_url in view' error. I have checked the code and see that both ""client_class"" and ""callback_url"" - are required to have in view.

Is there anywhere I can read about it?

Many thanks,
Andrew
"
16193,Tivix,django-rest-auth,3,closed,255,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/255/comments,https://github.com/Tivix/django-rest-auth/pull/255,[],Fix error django 1.9.7,"See https://github.com/Tivix/django-rest-auth/issues/254
"
16194,Tivix,django-rest-auth,3,closed,254,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/254/comments,https://github.com/Tivix/django-rest-auth/issues/254,[],ImportError: No module named importlib after install,"Hi guys :)

After install django-rest-auth i got this message:

> Traceback (most recent call last):
>   File ""manage.py"", line 12, in <module>
>     execute_from_command_line(sys.argv)
>   File ""lib/djangae/core/management/**init**.py"", line 65, in execute_from_command_line
>     return _execute_from_command_line(namespace.sandbox, ['manage.py'] + namespace.args, **overrides)
>   File ""lib/djangae/core/management/__init__.py"", line 45, in _execute_from_command_line
>     return django_management.execute_from_command_line(argv)
>   File ""lib/django/core/management/__init__.py"", line 353, in execute_from_command_line
>     utility.execute()
>   File ""lib/django/core/management/**init**.py"", line 327, in execute
>     django.setup()
>   File ""lib/django/**init**.py"", line 18, in setup
>     apps.populate(settings.INSTALLED_APPS)
>   File ""lib/django/apps/registry.py"", line 115, in populate
>     app_config.ready()
>   File ""lib/debug_toolbar/apps.py"", line 15, in ready
>     dt_settings.patch_all()
>   File ""lib/debug_toolbar/settings.py"", line 228, in patch_all
>     patch_root_urlconf()
>   File ""lib/debug_toolbar/settings.py"", line 216, in patch_root_urlconf
>     reverse('djdt:render_panel')
>   File ""lib/django/core/urlresolvers.py"", line 568, in reverse
>     app_list = resolver.app_dict[ns]
>   File ""lib/django/core/urlresolvers.py"", line 360, in app_dict
>     self._populate()
>   File ""lib/django/core/urlresolvers.py"", line 293, in _populate
>     for pattern in reversed(self.url_patterns):
>   File ""lib/django/utils/functional.py"", line 33, in __get__
>     res = instance.**dict**[self.name] = self.func(instance)
>   File ""lib/django/core/urlresolvers.py"", line 417, in url_patterns
>     patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)
>   File ""lib/django/utils/functional.py"", line 33, in **get**
>     res = instance.**dict**[self.name] = self.func(instance)
>   File ""lib/django/core/urlresolvers.py"", line 410, in urlconf_module
>     return import_module(self.urlconf_name)
>   File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/**init**.py"", line 37, in import_module
>     **import**(name)
>   File ""/Users/briva/Desktop/owls_global/owls_core/core/urls.py"", line 26, in <module>
>     url(r'^rest-auth/', include('rest_auth.urls')),
>   File ""lib/django/conf/urls/**init**.py"", line 52, in include
>     urlconf_module = import_module(urlconf_module)
>   File ""/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/importlib/**init**.py"", line 37, in import_module
>     **import**(name)
>   File ""lib/rest_auth/urls.py"", line 3, in <module>
>     from rest_auth.views import (Login, Logout, UserDetails, PasswordChange,
>   File ""lib/rest_auth/views.py"", line 12, in <module>
>     from .app_settings import (TokenSerializer, UserDetailsSerializer,
>   File ""lib/rest_auth/app_settings.py"", line 10, in <module>
>     from .utils import import_callable
>   File ""lib/rest_auth/utils.py"", line 2, in <module>
>     from django.utils.importlib import import_module
> ImportError: No module named importlib

Someone did view this bug ?
"
16202,Tivix,django-rest-auth,3,closed,245,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/245/comments,https://github.com/Tivix/django-rest-auth/issues/245,[],Got TemplateDoesNotExists in register and password reset in demo project,"Hi,
I'm trying out the demo project. But when I send requests to register or password reset, I get **TemplateDoesNotExists** for _account/email/email_confirmation_signup_subject.txt_ and _registration/password_reset_subject.txt_ respectively.

This is what I did:
1. Create virtualenv and activate it (for python version 2.7).
2. Follow these instructions to install demo project: http://django-rest-auth.readthedocs.io/en/latest/demo.html
3. Send requests to create new account: `curl -d ""username=tom&password1=tom12345&password2=tom12345&email=tom@tom.com"" http://localhost:8000/rest-auth/registration/`
4. Receive back error code 500 with error page for TemplateDoesNotExists for template _account/email/email_confirmation_signup_subject.txt_. The account did get created though. 

A quick look on google and that template belongs to django-allauth, so I tried to install it: `pip install django-allauth`. But that didn't solve the problem.

I'm still new to Django so might have missed something trivial. Any help is appreciated.
"
16213,Tivix,django-rest-auth,3,closed,232,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/232/comments,https://github.com/Tivix/django-rest-auth/issues/232,[],account_email_confim No Reverse Match,"Hi, I know this has been rehashed but this seems to persist and I cannot remove the error no matter how I reconfigure the urls:

my urls.py

``` python
from allauth.account.views import confirm_email
urlpatterns = patterns('',
url(r'^api/v1/rest-auth/registration/account-confirm-email/(?P<key>[-/\w]+)/$', confirm_email, name='account_confirm_email'),
url(r'^api/v1/rest-auth/', include('rest_auth.urls')),
url(r'^api/v1/rest-auth/registration/', include('rest_auth.registration.urls')),
url(r'^api/v1/rest-auth/facebook/$', 'common.api.fb_login', name='fb_login'),
# url(r'^account/', include('allauth.urls')),
...
)
```

account_confirm_email is the first pattern I have no namespaces defined.
Also I've imported allauths view to override the empty/dummy TemplateView defined by django-rest-auth.
Still when I run a curl call on register endpoint api/v1/rest-auth/registration/ I have No reverse match error thrown.
This is what comes out of shell:

``` python
Traceback (most recent call last):
  File ""<console>"", line 1, in <module>
  File ""/home/borko/.virtualenvs/cco_apiauth/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 578, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""/home/borko/.virtualenvs/cco_apiauth/local/lib/python2.7/site-packages/django/core/urlresolvers.py"", line 495, in _reverse_with_prefix
    (lookup_view_s, args, kwargs, len(patterns), patterns))
NoReverseMatch: Reverse for 'account_confirm_email' with arguments '('Mzk:1bSNFh:JqL2-mnq0toOx6efgmLSjxh3A5M',)' and keyword arguments '{}' not found. 2 pattern(s) tried: ['api/v1/rest-auth/registration/account-confirm-email/(?P<key>\\w+)/$', 'api/v1/rest-auth/registration/account-confirm-email/(?P<key>[-/\\w]+)/$']
```

This recognizes two patterns since after hitting my override it hits the TemplateView still defined in django-rest-auth.

lib versions:
Django==1.8.14
djangorestframework==3.4.0
django-rest-auth==0.8.0
djangorestframework-jwt==1.8.0

Any advice on how to proceed here would be great.
"
16220,Tivix,django-rest-auth,3,closed,222,8,https://api.github.com/repos/Tivix/django-rest-auth/issues/222/comments,https://github.com/Tivix/django-rest-auth/issues/222,[],Leaking sensitive passwords in error emails,"I believe this is leaking the user's password when a user fails to validate while logging in. On my system, I am getting their password in raw text via error emails. I think that this should be using [Django's sensitive_variables decorator](https://docs.djangoproject.com/en/dev/howto/error-reporting/#django.views.decorators.debug.sensitive_variables) in the [LoginView](https://github.com/Tivix/django-rest-auth/blob/master/rest_auth/views.py#L25).

Thoughts?
"
16224,Tivix,django-rest-auth,3,closed,218,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/218/comments,https://github.com/Tivix/django-rest-auth/issues/218,[],django.contrib.sites dependency missing in installation instructions,"Without

```
INSTALLED_APPS = (
    ...,
    'django.contrib.sites',
```

You will get an ""OperationalError: no such table: django_site"" when trying to register a user.

```
$ lsb_release -d
Description:    Ubuntu 14.04.4 LTS

$ python --version
Python 3.4.3

$ pip freeze
defusedxml==0.4.1
Django==1.8
django-allauth==0.25.2
django-rest-auth==0.7.0
djangorestframework==3.3.3
oauthlib==1.1.2
python3-openid==3.0.10
requests==2.10.0
requests-oauthlib==0.6.1
six==1.10.0
```
"
16232,Tivix,django-rest-auth,3,closed,205,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/205/comments,https://github.com/Tivix/django-rest-auth/issues/205,[],/rest-auth/password/reset/ gave 500 Error,"Here is my request:

```
http://localhost:8000/rest-auth/password/reset/

request body:
{""email"": ""test@gmail.com""}
```

error:

```
django.core.urlresolvers.NoReverseMatch: Reverse for 'password_reset_confirm' with arguments '()' and keyword arguments '{'token': '4b9-73e30e0cb92a36a7e52b', 'uidb64': b'Mg'}' not found. 0 pattern(s) tried: []
```
"
16239,Tivix,django-rest-auth,4,closed,197,0,https://api.github.com/repos/Tivix/django-rest-auth/issues/197/comments,https://github.com/Tivix/django-rest-auth/issues/197,[],previous commit broke social accounts integration,"pennersr/django-allauth@2cb74f4 changes OAuth2Adapter to require a ""request "" object during initialization introduces a bug:

A no argument initializer was lost when ""request"" was added as a parameter.
rest_auth.registration.serializers.SocialLoginSerializer expects a no attribute initializer for the adapter class.

My current fix is to have this in my code:

``` python
class FacebookOAuth2AdapterFixed(FacebookOAuth2Adapter):
    def __init__(self):
        pass

class FacebookLogin(SocialLoginView):
    adapter_class = FacebookOAuth2AdapterFixed
```
"
16241,Tivix,django-rest-auth,4,closed,195,11,https://api.github.com/repos/Tivix/django-rest-auth/issues/195/comments,https://github.com/Tivix/django-rest-auth/issues/195,[],allauth>=0.25.0 :   __init__() takes exactly 2 arguments (1 given) error,"```
Internal Server Error: /rest-auth/facebook/
Traceback (most recent call last):
  File ""/Users/mywork/venv/lib/python2.7/site-packages/django/core/handlers/base.py"", line 149, in get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/django/core/handlers/base.py"", line 147, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_framework/views.py"", line 466, in dispatch
    response = self.handle_exception(exc)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_framework/views.py"", line 463, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_auth/views.py"", line 50, in post
    self.serializer.is_valid(raise_exception=True)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_framework/serializers.py"", line 213, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_framework/serializers.py"", line 410, in run_validation
    value = self.validate(value)
  File ""/Users/mywork/venv/lib/python2.7/site-packages/rest_auth/registration/serializers.py"", line 63, in validate
    adapter = adapter_class()
TypeError: __init__() takes exactly 2 arguments (1 given)
```

I just follow installation 

```
from allauth.socialaccount.providers.facebook.views import FacebookOAuth2Adapter
from rest_auth.registration.views import SocialLoginView

class FacebookLogin(SocialLoginView):
    adapter_class = FacebookOAuth2Adapter

urlpatterns = [
...
        url(r'^rest-auth/', include('rest_auth.urls')),
    url(r'^rest-auth/registration/', include('rest_auth.registration.urls')),
    url(r'^rest-auth/facebook/$', FacebookLogin.as_view(), name='fb_login'),

]
```
"
16248,Tivix,django-rest-auth,4,closed,187,0,https://api.github.com/repos/Tivix/django-rest-auth/issues/187/comments,https://github.com/Tivix/django-rest-auth/pull/187,[],Capture OAuthError in TwitterLoginSerializer,"The `TwitterLoginSerializer` introduced in #154 uses OAuth 1.0 and the oauth.client raises [OAuthError](https://github.com/pennersr/django-allauth/blob/45e3900/allauth/socialaccount/providers/oauth/client.py#L33) and not `HTTPError`
"
16264,Tivix,django-rest-auth,4,closed,170,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/170/comments,https://github.com/Tivix/django-rest-auth/issues/170,[],NoReverseMatch: Reverse for 'account_confirm_email' with arguments,"I have created an app named 'api' within a project and the api/urls.py looks like:

```
...
url(r'^accounts/', include('allauth.urls')),
url(r'^rest-auth/registration/account-confirm-email/(?P<key>\w+)/$',confirm_email, name='account_confirm_email'),
url(r'^rest-auth/', include('rest_auth.urls')),
url(r'^rest-auth/registration/', include('rest_auth.registration.urls')),
...
```

but when trying to register I get the following stacktrace:

```
[2016-02-15 23:45:35,093] ERROR [base:handle_uncaught_exception:256 8977] Internal Server Error: /api/rest-auth/registration/
Traceback (most recent call last):                                              
  File ""/home/.../webapps/project_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)     
  File ""/home/.../webapps/project_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)                                           
  File ""/home/.../webapps/project_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/views/generic/base.py"", line 71, in view
    return self.dispatch(request, *args, **kwargs)                              
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/rest_framework/views.py"", line 452, in dispatch
    response = self.handle_exception(exc)                                       
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/rest_framework/views.py"", line 449, in dispatch
    response = handler(request, *args, **kwargs)                                
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/rest_auth/registration/views.py"", line 44, in post
    self.form_valid(self.form)                                                  
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/rest_auth/registration/views.py"", line 36, in form_valid
    self.get_success_url())                                                     
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/allauth/account/utils.py"", line 157, in complete_signup
    signal_kwargs=signal_kwargs)                                                
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/allauth/account/utils.py"", line 114, in perform_login
    send_email_confirmation(request, user, signup=signup)                       
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/allauth/account/utils.py"", line 286, in send_email_confirmation
    signup=signup)                                                              
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/allauth/account/models.py"", line 60, in send_confirmation
    confirmation.send(request, signup=signup)                                   
  File ""/home/.../webapps/project_test/.ve/lib/python2.7/site-packages/allauth/account/models.py"", line 121, in send
    activate_url = reverse(""account_confirm_email"", args=[self.key])            
  File ""/home/.../webapps/project_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/core/urlresolvers.py"", line 578, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""/home/.../webapps/project_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/core/urlresolvers.py"", line 495, in _reverse_with_prefix
    (lookup_view_s, args, kwargs, len(patterns), patterns))                     
NoReverseMatch: Reverse for 'account_confirm_email' with arguments '(u'vgro7mdagterfbnqxlkihpnzs2bsp1iktwxng9vecznpeg8hcdv1eidco11tee3u',)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
```

Using a shell I see:

```
python manage.py shell
Inside api.apps.ApiConfig.ready
Python 2.7.5 (default, Nov 20 2015, 02:00:19) 
[GCC 4.8.5 20150623 (Red Hat 4.8.5-4)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
(InteractiveConsole)
>>> from django.core.urlresolvers import reverse
>>> 
>>> reverse('account_confirm_email', args=['l8ig7wqo1l4ypd7uosuoxlgnv2qxf5voe5ehwcd7s46hbprzyx9qwjgeontw5un6'])
Traceback (most recent call last):
  File ""<console>"", line 1, in <module>
  File ""/home/divkis01/webapps/instaguide_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/core/urlresolvers.py"", line 578, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""/home/divkis01/webapps/instaguide_test/lib/python2.7/Django-1.8.7-py2.7.egg/django/core/urlresolvers.py"", line 495, in _reverse_with_prefix
    (lookup_view_s, args, kwargs, len(patterns), patterns))
NoReverseMatch: Reverse for 'account_confirm_email' with arguments '('l8ig7wqo1l4ypd7uosuoxlgnv2qxf5voe5ehwcd7s46hbprzyx9qwjgeontw5un6',)' and keyword arguments '{}' not found. 0 pattern(s) tried: []
>>> 

```

while if I use api:account_confirm_email, it does return correct url.

```
>>> reverse('api:account_confirm_email', args=['l8ig7wqo1l4ypd7uosuoxlgnv2qxf5voe5ehwcd7s46hbprzyx9qwjgeontw5un6'])
u'/api/rest-auth/registration/account-confirm-email/l8ig7wqo1l4ypd7uosuoxlgnv2qxf5voe5ehwcd7s46hbprzyx9qwjgeontw5un6/'
```

Given the exception is from within the allauth and I guess modifying the allauth is not the right solution here, what am I missing here or if it is an issue in rest-auth itself?
"
16270,Tivix,django-rest-auth,4,closed,162,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/162/comments,https://github.com/Tivix/django-rest-auth/issues/162,[],incoherent validation messages,"If I try to login with wrong crdentials the (bad) http response payload is something similar to this 

```
{non_field_errors: [""Unable to log in with provided credentials.""]}
```

I've understood I can change the name of this field using this settings:

```
REST_FRAMEWORK = {
  'NON_FIELD_ERRORS_KEY' : ""validation_errors""
}
```

so that the response would become:

```
{validation_errors: [""Unable to log in with provided credentials.""]}
```

If I send wrong fields during registration (so using allauth) I receive a structure similar to this:

```
{
    password1 : [""This field is required.""]
    password2 : [""This field is required.""]
    username  : [""This field is required.""]
}
```

Completely different from the previous one.

I don't know who is responsable for the validation messages (and structure) in the first and second case: Django, Form validation, Allauth or django-rest-auth?

A clarification would help in order to always send a similar structure in case of errors.

Also, are only validation error sent back? Exposing internal errors would be a risk, but I guess this should be disabled with `DEBUG = False`, unless this apps is exposing something more, isn't it?
"
16273,Tivix,django-rest-auth,4,closed,158,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/158/comments,https://github.com/Tivix/django-rest-auth/issues/158,[],JSON API login ,"When I try to log in, I get a HTTP 409 CONFLICT response :

``` json
{
""errors"":{
""detail"": ""The resource object's type (User) is not the type that constitute the collection represented by the endpoint (LoginView).""
}
}
```

I use https://github.com/django-json-api/django-rest-framework-json-api on top of DRF.

``` json
{
  ""data"": {
    ""type"": ""User"",
    ""id"": null,
    ""attributes"": {
      ""username"": ""..."",
      ""password"": ""...""
    }
  }
}
```

What type should I put ? Thank you.
"
16296,Tivix,django-rest-auth,4,closed,135,5,https://api.github.com/repos/Tivix/django-rest-auth/issues/135/comments,https://github.com/Tivix/django-rest-auth/issues/135,[],500 Internal Server Error for /rest-auth/password/reset/,"When I tried to use the /rest-auth/password/reset/ endpoint to reset password, I got this error. It was fine for v0.5, but not v0.6. Thanks.

Trackback:

```
Internal Server Error: /rest-auth/password/reset/
Traceback (most recent call last):
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/defaulttags.py"", line 501, in render
    current_app=current_app)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 578, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 495, in _reverse_with_prefix
    (lookup_view_s, args, kwargs, len(patterns), patterns))
django.core.urlresolvers.NoReverseMatch: Reverse for 'project.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb64': b'Mg', 'token': '47i-9050dc8d943a476f73b9'}' not found. 0 pattern(s) tried: []

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/core/handlers/base.py"", line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/views/decorators/csrf.py"", line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/views/generic/base.py"", line 71, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/rest_framework/views.py"", line 466, in dispatch
    response = self.handle_exception(exc)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/rest_framework/views.py"", line 463, in dispatch
    response = handler(request, *args, **kwargs)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/rest_auth/views.py"", line 112, in post
    serializer.save()
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/rest_auth/serializers.py"", line 131, in save
    self.reset_form.save(**opts)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/contrib/auth/forms.py"", line 256, in save
    html_email_template_name=html_email_template_name)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/contrib/auth/forms.py"", line 206, in send_mail
    body = loader.render_to_string(email_template_name, context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/loader.py"", line 99, in render_to_string
    return template.render(context, request)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/backends/django.py"", line 74, in render
    return self.template.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/base.py"", line 209, in render
    return self._render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/test/utils.py"", line 96, in instrumented_test_render
    return self.nodelist.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/base.py"", line 903, in render
    bit = self.render_node(node, context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/defaulttags.py"", line 40, in render
    output = self.nodelist.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/base.py"", line 903, in render
    bit = self.render_node(node, context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/loader_tags.py"", line 56, in render
    result = self.nodelist.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/base.py"", line 903, in render
    bit = self.render_node(node, context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/debug.py"", line 79, in render_node
    return node.render(context)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/defaulttags.py"", line 507, in render
    six.reraise(*exc_info)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/utils/six.py"", line 659, in reraise
    raise value
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/template/defaulttags.py"", line 493, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 578, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""/Users/ZachLiu/.virtualenvs/property_365/lib/python3.4/site-packages/django/core/urlresolvers.py"", line 495, in _reverse_with_prefix
    (lookup_view_s, args, kwargs, len(patterns), patterns))
django.core.urlresolvers.NoReverseMatch: Reverse for 'password_reset_confirm' with arguments '()' and keyword arguments '{'uidb64': b'Mg', 'token': '47i-9050dc8d943a476f73b9'}' not found. 0 pattern(s) tried: []
```
"
16302,Tivix,django-rest-auth,4,closed,129,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/129/comments,https://github.com/Tivix/django-rest-auth/pull/129,[],raise_exception=True for views,"As was [announced at Django REST framework 3.0](http://www.django-rest-framework.org/topics/3.0-announcement/#using-is_validraise_exceptiontrue), using `serializer.is_valid(raise_exception=True)` may help to remove error response handling from view code. Also it is useful when somebody uses custom error hadnling, for example, to make reponses with validation errors more consistence with other error responses
"
16307,Tivix,django-rest-auth,4,closed,123,9,https://api.github.com/repos/Tivix/django-rest-auth/issues/123/comments,https://github.com/Tivix/django-rest-auth/issues/123,[],"""Can't set attribute"" error on user registration","When trying to register a new user, the following error occurs:

Here is the log:

AttributeError at /api/auth/registration/
can't set attribute
Request Method:
POST
Request URL:
http://127.0.0.1:8000/api/auth/registration/
Django Version:
1.8.6
Exception Type:
AttributeError
Exception Value:
can't set attribute
Exception Location:
/Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/rest_auth/registration/views.py in post, line 54
Python Executable:
/Users/bt/Development/Python/env/vremind/bin/python
Python Version:
2.7.10
Python Path:
['/Users/bt/Development/Python/projects/vremind',
 '/Users/bt/Development/Python/env/vremind/lib/python27.zip',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/plat-darwin',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/plat-mac',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/bt/Development/Python/env/vremind/Extras/lib/python',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/lib-tk',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/lib-old',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages']
Server time:
Tue, 10 Nov 2015 12:52:47 +0000
Traceback Switch to copy-and-paste view
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/django/core/handlers/base.py in get_response
    125.                        response = middleware_method(request, callback, callback_args, callback_kwargs)
    126.                        if response:
    127.                            break
    128.  
    129.                if response is None:
    130.                    wrapped_callback = self.make_view_atomic(callback)
    131.                    try:
    132.                                    response = wrapped_callback(request, _callback_args, *_callback_kwargs) ... 
    133.                    except Exception as e:
    134.                        # If the view raised an exception, run it through exception
    135.                        # middleware, and if the exception middleware returns a
    136.                        # response, use that. Otherwise, reraise the exception.
    137.                        for middleware_method in self._exception_middleware:
    138.                            response = middleware_method(request, e)
         ▶ Local vars
        Variable
        Value
        e
        AttributeError(""can't set attribute"",) 
        callback_args
        () 
        resolver_match
        ResolverMatch(func=rest_auth.registration.views.RegisterView, args=(), kwargs={}, url_name=rest_register, app_name=None, namespaces=[]) 
        middleware_method
        <bound method CsrfViewMiddleware.process_view of <django.middleware.csrf.CsrfViewMiddleware object at 0x109380850>> 
        self
        <django.core.handlers.wsgi.WSGIHandler object at 0x108f21810> 
        request
        ""<WSGIRequest\npath:/api/auth/registration/,\nGET:<QueryDict: {}>,\nPOST:<could not parse>,\nCOOKIES:{},\nMETA:{'Apple_PubSub_Socket_Render': '/private/tmp/com.apple.launchd.iMKDGiE1AR/Render',\n 'CONTENT_LENGTH': '90',\n 'CONTENT_TYPE': 'application/json;charset=UTF-8',\n u'CSRF_COOKIE': u'fyGGuiDUy1ZLZLu3epk9owOTiqxe0UHb',\n 'DJANGO_SETTINGS_MODULE': 'vremind.settings',\n 'GATEWAY_INTERFACE': 'CGI/1.1',\n 'HOME': '/Users/bt',\n 'HTTP_ACCEPT': 'application/json, text/plain, _/_',\n 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',\n 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',\n 'HTTP_CONNECTION': 'keep-alive',\n 'HTTP_HOST': '127.0.0.1:8000',\n 'HTTP_ORIGIN': 'http://127.0.0.1:9000',\n 'HTTP_REFERER': 'http://127.0.0.1:9000/',\n 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36',\n 'LC_CTYPE': 'UTF-8',\n 'LOGNAME': 'bt',\n 'NVM_IOJS_ORG_MIRROR': 'https://iojs.org/dist',\n 'NVM_NODEJS_ORG_MIRROR': 'https://nodejs.org/dist',\n 'NVM_RC_VERSION': '',\n 'OLDPWD': '/Users/bt/Development/Python/projects',\n 'PATH': '/Users/bt/Development/Python/env/vremind/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin',\n 'PATH_INFO': u'/api/auth/registration/',\n 'PS1': '(vremind)\\h:\\W \\u\\$ ',\n 'PWD': '/Users/bt/Development/Python/projects/vremind',\n 'QUERY_STRING': '',\n 'REMOTE_ADDR': '127.0.0.1',\n 'REMOTE_HOST': '',\n 'REQUEST_METHOD': 'POST',\n 'RUN_MAIN': 'true',\n 'SCRIPT_NAME': u'',\n 'SECURITYSESSIONID': '186ef',\n 'SERVER_NAME': 'arjans-macbook-pro.local',\n 'SERVER_PORT': '8000',\n 'SERVER_PROTOCOL': 'HTTP/1.1',\n 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.10',\n 'SHELL': '/bin/bash',\n 'SHLVL': '1',\n 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.i6vX1PgOaQ/Listeners',\n 'TERM': 'xterm-256color',\n 'TERM_PROGRAM': 'Apple_Terminal',\n 'TERM_PROGRAM_VERSION': '361',\n 'TERM_SESSION_ID': '5A515916-B6DD-444F-BC1E-2437D91FAA6A',\n 'TMPDIR': '/var/folders/mj/wn1t2_0d6kx8vyvm_5175_l00000gp/T/',\n 'TZ': 'UTC',\n 'USER': 'bt',\n 'VERSIONER_PYTHON_PREFER_32_BIT': 'no',\n 'VERSIONER_PYTHON_VERSION': '2.7',\n 'VIRTUAL_ENV': '/Users/bt/Development/Python/env/vremind',\n 'XPC_FLAGS': '0x0',\n 'XPC_SERVICE_NAME': '0',\n '_': './manage.py',\n '__CF_USER_TEXT_ENCODING': '0x1F6:0x0:0x0',\n 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x10821b1e0>,\n 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x1091edbb0>,\n 'wsgi.input': <socket._fileobject object at 0x109336e50>,\n 'wsgi.multiprocess': False,\n 'wsgi.multithread': True,\n 'wsgi.run_once': False,\n 'wsgi.url_scheme': 'http',\n 'wsgi.version': (1, 0)}>"" 
        callback
        <function RegisterView at 0x10aaf7050> 
        wrapped_callback
        <function RegisterView at 0x10aaf7050> 
        resolver
        <RegexURLResolver 'vremind.urls' (None:None) ^/> 
        callback_kwargs
        {} 
        response
        None 
        urlconf
        'vremind.urls' 
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/django/views/decorators/csrf.py in wrapped_view
    51.     """"""
    52.     Marks a view function as being exempt from the CSRF view protection.
    53.     """"""
    54.     # We could just do view_func.csrf_exempt = True, but decorators
    55.     # are nicer if they don't have side-effects, so we return a new
    56.     # function.
    57.     def wrapped_view(_args, *_kwargs):
    58.                     return view_func(_args, *_kwargs) ... 
    59.     wrapped_view.csrf_exempt = True
    60.     return wraps(view_func, assigned=available_attrs(view_func))(wrapped_view)
         ▶ Local vars
        Variable
        Value
        args
        (<WSGIRequest: POST '/api/auth/registration/'>,) 
        view_func
        <function RegisterView at 0x10a6c9938> 
        kwargs
        {} 
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/django/views/generic/base.py in view
    64.         def view(request, _args, *_kwargs):
    65.             self = cls(*_initkwargs)
    66.             if hasattr(self, 'get') and not hasattr(self, 'head'):
    67.                 self.head = self.get
    68.             self.request = request
    69.             self.args = args
    70.             self.kwargs = kwargs
    71.                         return self.dispatch(request, *args, *_kwargs) ... 
    72. 
    73.         # take name and docstring from class
    74.         update_wrapper(view, cls, updated=())
    75. 
    76.         # and possible attributes set by decorators
    77.         # like csrf_exempt from dispatch
         ▶ Local vars
        Variable
        Value
        initkwargs
        {} 
        self
        <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0> 
        args
        () 
        request
        ""<WSGIRequest\npath:/api/auth/registration/,\nGET:<QueryDict: {}>,\nPOST:<could not parse>,\nCOOKIES:{},\nMETA:{'Apple_PubSub_Socket_Render': '/private/tmp/com.apple.launchd.iMKDGiE1AR/Render',\n 'CONTENT_LENGTH': '90',\n 'CONTENT_TYPE': 'application/json;charset=UTF-8',\n u'CSRF_COOKIE': u'fyGGuiDUy1ZLZLu3epk9owOTiqxe0UHb',\n 'DJANGO_SETTINGS_MODULE': 'vremind.settings',\n 'GATEWAY_INTERFACE': 'CGI/1.1',\n 'HOME': '/Users/bt',\n 'HTTP_ACCEPT': 'application/json, text/plain, _/_',\n 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',\n 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',\n 'HTTP_CONNECTION': 'keep-alive',\n 'HTTP_HOST': '127.0.0.1:8000',\n 'HTTP_ORIGIN': 'http://127.0.0.1:9000',\n 'HTTP_REFERER': 'http://127.0.0.1:9000/',\n 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36',\n 'LC_CTYPE': 'UTF-8',\n 'LOGNAME': 'bt',\n 'NVM_IOJS_ORG_MIRROR': 'https://iojs.org/dist',\n 'NVM_NODEJS_ORG_MIRROR': 'https://nodejs.org/dist',\n 'NVM_RC_VERSION': '',\n 'OLDPWD': '/Users/bt/Development/Python/projects',\n 'PATH': '/Users/bt/Development/Python/env/vremind/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin',\n 'PATH_INFO': u'/api/auth/registration/',\n 'PS1': '(vremind)\\h:\\W \\u\\$ ',\n 'PWD': '/Users/bt/Development/Python/projects/vremind',\n 'QUERY_STRING': '',\n 'REMOTE_ADDR': '127.0.0.1',\n 'REMOTE_HOST': '',\n 'REQUEST_METHOD': 'POST',\n 'RUN_MAIN': 'true',\n 'SCRIPT_NAME': u'',\n 'SECURITYSESSIONID': '186ef',\n 'SERVER_NAME': 'arjans-macbook-pro.local',\n 'SERVER_PORT': '8000',\n 'SERVER_PROTOCOL': 'HTTP/1.1',\n 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.10',\n 'SHELL': '/bin/bash',\n 'SHLVL': '1',\n 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.i6vX1PgOaQ/Listeners',\n 'TERM': 'xterm-256color',\n 'TERM_PROGRAM': 'Apple_Terminal',\n 'TERM_PROGRAM_VERSION': '361',\n 'TERM_SESSION_ID': '5A515916-B6DD-444F-BC1E-2437D91FAA6A',\n 'TMPDIR': '/var/folders/mj/wn1t2_0d6kx8vyvm_5175_l00000gp/T/',\n 'TZ': 'UTC',\n 'USER': 'bt',\n 'VERSIONER_PYTHON_PREFER_32_BIT': 'no',\n 'VERSIONER_PYTHON_VERSION': '2.7',\n 'VIRTUAL_ENV': '/Users/bt/Development/Python/env/vremind',\n 'XPC_FLAGS': '0x0',\n 'XPC_SERVICE_NAME': '0',\n '_': './manage.py',\n '__CF_USER_TEXT_ENCODING': '0x1F6:0x0:0x0',\n 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x10821b1e0>,\n 'wsgi.file_wrapper': <class wsgiref.util.FileWrapper at 0x1091edbb0>,\n 'wsgi.input': <socket._fileobject object at 0x109336e50>,\n 'wsgi.multiprocess': False,\n 'wsgi.multithread': True,\n 'wsgi.run_once': False,\n 'wsgi.url_scheme': 'http',\n 'wsgi.version': (1, 0)}>"" 
        kwargs
        {} 
        cls
        <class 'rest_auth.registration.views.RegisterView'> 
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/rest_framework/views.py in dispatch
    459.                                      self.http_method_not_allowed)
    460.                else:
    461.                    handler = self.http_method_not_allowed
    462.  
    463.                response = handler(request, _args, *_kwargs)
    464.  
    465.            except Exception as exc:
    466.                            response = self.handle_exception(exc) ... 
    467.  
    468.            self.response = self.finalize_response(request, response, _args, *_kwargs)
    469.            return self.response
    470.  
    471.        def options(self, request, _args, *_kwargs):
    472.            """"""
         ▶ Local vars
        Variable
        Value
        exc
        AttributeError(""can't set attribute"",) 
        self
        <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0> 
        args
        () 
        request
        <rest_framework.request.Request object at 0x10ab2b4d0> 
        handler
        <bound method RegisterView.post of <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0>> 
        kwargs
        {} 
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/rest_framework/views.py in dispatch
    456.                # Get the appropriate handler method
    457.                if request.method.lower() in self.http_method_names:
    458.                    handler = getattr(self, request.method.lower(),
    459.                                      self.http_method_not_allowed)
    460.                else:
    461.                    handler = self.http_method_not_allowed
    462.  
    463.                            response = handler(request, _args, *_kwargs) ... 
    464.  
    465.            except Exception as exc:
    466.                response = self.handle_exception(exc)
    467.  
    468.            self.response = self.finalize_response(request, response, _args, *_kwargs)
    469.            return self.response
         ▶ Local vars
        Variable
        Value
        exc
        AttributeError(""can't set attribute"",) 
        self
        <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0> 
        args
        () 
        request
        <rest_framework.request.Request object at 0x10ab2b4d0> 
        handler
        <bound method RegisterView.post of <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0>> 
        kwargs
        {} 
        /Users/bt/Development/Python/env/vremind/lib/python2.7/site-packages/rest_auth/registration/views.py in post
    47.             request = self.request._request
    48.         return complete_signup(request, self.user,
    49.                                app_settings.EMAIL_VERIFICATION,
    50.                                self.get_success_url())
    51. 
    52.     def post(self, request, _args, *_kwargs):
    53.         self.initial = {}
    54.                     self.request.POST = self.request.data.copy() ... 
    55.         form_class = self.get_form_class()
    56.         self.form = self.get_form(form_class)
    57.         if self.form.is_valid():
    58.             self.form_valid(self.form)
    59.             return self.get_response()
    60.         else:
         ▶ Local vars
        Variable
        Value
        self
        <rest_auth.registration.views.RegisterView object at 0x10ab2b2d0> 
        args
        () 
        request
        <rest_framework.request.Request object at 0x10ab2b4d0> 
        kwargs
        {} 

Request information
GET
No GET data
POST
No POST data
FILES
No FILES data
COOKIES
No cookie data
META
Variable
Value
wsgi.version
(1, 0)
wsgi.multiprocess
False
RUN_MAIN
'true'
HTTP_REFERER
'http://127.0.0.1:9000/'
VERSIONER_PYTHON_PREFER_32_BIT
'no'
SERVER_SOFTWARE
'WSGIServer/0.1 Python/2.7.10'
LC_CTYPE
'UTF-8'
TERM_PROGRAM_VERSION
'361'
REQUEST_METHOD
'POST'
LOGNAME
'bt'
USER
'bt'
HTTP_ORIGIN
'http://127.0.0.1:9000'
PATH
'/Users/bt/Development/Python/env/vremind/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin'
QUERY_STRING
''
HOME
'/Users/bt'
PS1
'(vremind)\h:\W \u\$ '
wsgi.errors
<open file '<stderr>', mode 'w' at 0x10821b1e0>
TERM_PROGRAM
'Apple_Terminal'
CONTENT_LENGTH
'90'
TERM
'xterm-256color'
SHELL
'/bin/bash'
TZ
'UTC'
SERVER_NAME
'arjans-macbook-pro.local'
VERSIONER_PYTHON_VERSION
'2.7'
SHLVL
'1'
SECURITYSESSIONID
'186ef'
XPC_FLAGS
'0x0'
wsgi.url_scheme
'http'
_
'./manage.py'
SERVER_PORT
'8000'
PATH_INFO
u'/api/auth/registration/'
TERM_SESSION_ID
'5A515916-B6DD-444F-BC1E-2437D91FAA6A'
SSH_AUTH_SOCK
'/private/tmp/com.apple.launchd.i6vX1PgOaQ/Listeners'
XPC_SERVICE_NAME
'0'
VIRTUAL_ENV
'/Users/bt/Development/Python/env/vremind'
wsgi.input
<socket._fileobject object at 0x109336e50>
Apple_PubSub_Socket_Render
'/private/tmp/com.apple.launchd.iMKDGiE1AR/Render'
HTTP_HOST
'127.0.0.1:8000'
SCRIPT_NAME
u''
wsgi.multithread
True
HTTP_CONNECTION
'keep-alive'
TMPDIR
'/var/folders/mj/wn1t2_0d6kx8vyvm_5175_l00000gp/T/'
HTTP_ACCEPT
'application/json, text/plain, _/_'
NVM_IOJS_ORG_MIRROR
'https://iojs.org/dist'
HTTP_USER_AGENT
'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.80 Safari/537.36'
GATEWAY_INTERFACE
'CGI/1.1'
wsgi.run_once
False
CSRF_COOKIE
u'fyGGuiDUy1ZLZLu3epk9owOTiqxe0UHb'
OLDPWD
'/Users/bt/Development/Python/projects'
REMOTE_ADDR
'127.0.0.1'
HTTP_ACCEPT_LANGUAGE
'en-US,en;q=0.8'
__CF_USER_TEXT_ENCODING
'0x1F6:0x0:0x0'
PWD
'/Users/bt/Development/Python/projects/vremind'
SERVER_PROTOCOL
'HTTP/1.1'
DJANGO_SETTINGS_MODULE
'vremind.settings'
CONTENT_TYPE
'application/json;charset=UTF-8'
wsgi.file_wrapper
''
REMOTE_HOST
''
HTTP_ACCEPT_ENCODING
'gzip, deflate'
NVM_RC_VERSION
''
NVM_NODEJS_ORG_MIRROR
'https://nodejs.org/dist'
Settings
Using settings module vremind.settings
Setting
Value
SECURE_BROWSER_XSS_FILTER
False
USE_THOUSAND_SEPARATOR
False
ACCOUNT_AUTHENTICATION_METHOD
'email'
CSRF_COOKIE_SECURE
False
LANGUAGE_CODE
'en-us'
ROOT_URLCONF
'vremind.urls'
MANAGERS
()
BASE_DIR
'/Users/bt/Development/Python/projects/vremind'
SILENCED_SYSTEM_CHECKS
[]
DEFAULT_CHARSET
'utf-8'
SESSION_SERIALIZER
'django.contrib.sessions.serializers.JSONSerializer'
ACCOUNT_EMAIL_REQUIRED
True
ALLOWED_HOSTS
[]
MESSAGE_STORAGE
'django.contrib.messages.storage.fallback.FallbackStorage'
EMAIL_SUBJECT_PREFIX
'[Django] '
SERVER_EMAIL
'root@localhost'
SECURE_HSTS_SECONDS
0
STATICFILES_FINDERS
('django.contrib.staticfiles.finders.FileSystemFinder',
 'django.contrib.staticfiles.finders.AppDirectoriesFinder')
SESSION_CACHE_ALIAS
'default'
SESSION_COOKIE_DOMAIN
None
SESSION_COOKIE_NAME
'sessionid'
TIME_INPUT_FORMATS
('%H:%M:%S', '%H:%M:%S.%f', '%H:%M')
SECURE_REDIRECT_EXEMPT
[]
DATABASES
{'default': {'ATOMIC_REQUESTS': False,
             'AUTOCOMMIT': True,
             'CONN_MAX_AGE': 0,
             'ENGINE': 'django.db.backends.sqlite3',
             'HOST': '',
             'NAME': '/Users/bt/Development/Python/projects/vremind/db.sqlite3',
             'OPTIONS': {},
             'PASSWORD': u'*******************_',
             'PORT': '',
             'TEST': {'CHARSET': None,
                      'COLLATION': None,
                      'MIRROR': None,
                      'NAME': None},
             'TIME_ZONE': 'UTC',
             'USER': ''}}
EMAIL_SSL_KEYFILE
u'**_****************_'
FILE_UPLOAD_DIRECTORY_PERMISSIONS
None
FILE_UPLOAD_PERMISSIONS
None
FILE_UPLOAD_HANDLERS
('django.core.files.uploadhandler.MemoryFileUploadHandler',
 'django.core.files.uploadhandler.TemporaryFileUploadHandler')
TEMPLATE_CONTEXT_PROCESSORS
('django.contrib.auth.context_processors.auth',
 'django.template.context_processors.debug',
 'django.template.context_processors.i18n',
 'django.template.context_processors.media',
 'django.template.context_processors.static',
 'django.template.context_processors.tz',
 'django.contrib.messages.context_processors.messages')
DEFAULT_CONTENT_TYPE
'text/html'
ACCOUNT_EMAIL_VERIFICATION
'mandatory'
APPEND_SLASH
True
LOCALE_PATHS
()
DATABASE_ROUTERS
[]
DEFAULT_TABLESPACE
''
YEAR_MONTH_FORMAT
'F Y'
STATICFILES_STORAGE
'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES
{'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
SESSION_COOKIE_PATH
'/'
SECURE_CONTENT_TYPE_NOSNIFF
False
MIDDLEWARE_CLASSES
('corsheaders.middleware.CorsMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'django.middleware.security.SecurityMiddleware')
USE_I18N
True
THOUSAND_SEPARATOR
','
SECRET_KEY
u'**_****************_'
LANGUAGE_COOKIE_NAME
'django_language'
DEFAULT_INDEX_TABLESPACE
''
LOGGING_CONFIG
'logging.config.dictConfig'
TEMPLATE_LOADERS
('django.template.loaders.filesystem.Loader',
 'django.template.loaders.app_directories.Loader')
FIRST_DAY_OF_WEEK
0
WSGI_APPLICATION
'vremind.wsgi.application'
TEMPLATE_DEBUG
False
X_FRAME_OPTIONS
'SAMEORIGIN'
CSRF_COOKIE_NAME
'csrftoken'
FORCE_SCRIPT_NAME
None
USE_X_FORWARDED_HOST
False
EMAIL_TIMEOUT
None
SECURE_SSL_HOST
None
SIGNING_BACKEND
'django.core.signing.TimestampSigner'
SESSION_COOKIE_SECURE
False
CSRF_COOKIE_DOMAIN
None
FILE_CHARSET
'utf-8'
DEBUG
True
LANGUAGE_COOKIE_DOMAIN
None
DEFAULT_FILE_STORAGE
'django.core.files.storage.FileSystemStorage'
INSTALLED_APPS
('modeltranslation',
 'django.contrib.sites',
 'django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'rest_framework',
 'rest_framework.authtoken',
 'rest_auth',
 'allauth',
 'allauth.account',
 'rest_auth.registration',
 'corsheaders',
 'companies')
LANGUAGES
(('en', 'English'), ('nl', 'Dutch'))
USE_L10N
True
STATIC_ROOT
None
SECURE_HSTS_INCLUDE_SUBDOMAINS
False
STATICFILES_DIRS
()
PREPEND_WWW
False
SECURE_PROXY_SSL_HEADER
None
LANGUAGE_COOKIE_AGE
None
SESSION_COOKIE_HTTPONLY
True
DEBUG_PROPAGATE_EXCEPTIONS
False
CSRF_COOKIE_AGE
31449600
MONTH_DAY_FORMAT
'F j'
LOGIN_URL
'/accounts/login/'
SESSION_EXPIRE_AT_BROWSER_CLOSE
False
TIME_FORMAT
'P'
AUTH_USER_MODEL
'auth.User'
DATE_INPUT_FORMATS
('%Y-%m-%d',
 '%m/%d/%Y',
 '%m/%d/%y',
 '%b %d %Y',
 '%b %d, %Y',
 '%d %b %Y',
 '%d %b, %Y',
 '%B %d %Y',
 '%B %d, %Y',
 '%d %B %Y',
 '%d %B, %Y')
AUTHENTICATION_BACKENDS
('django.contrib.auth.backends.ModelBackend',
 'allauth.account.auth_backends.AuthenticationBackend')
EMAIL_HOST_PASSWORD
u'**_****************_'
PASSWORD_RESET_TIMEOUT_DAYS
u'**_****************_'
SESSION_FILE_PATH
None
CACHE_MIDDLEWARE_ALIAS
'default'
SESSION_SAVE_EVERY_REQUEST
False
NUMBER_GROUPING
0
SESSION_ENGINE
'django.contrib.sessions.backends.db'
CSRF_FAILURE_VIEW
'django.views.csrf.csrf_failure'
CSRF_COOKIE_PATH
'/'
LOGIN_REDIRECT_URL
'/accounts/profile/'
DECIMAL_SEPARATOR
'.'
IGNORABLE_404_URLS
()
MIGRATION_MODULES
{}
PASSWORD_HASHERS
u'**_****************_'
TEMPLATE_STRING_IF_INVALID
''
LOGOUT_URL
'/accounts/logout/'
EMAIL_USE_TLS
True
FIXTURE_DIRS
()
EMAIL_HOST
'mail.vertinum.eu'
DATE_FORMAT
'N j, Y'
MEDIA_ROOT
''
DEFAULT_EXCEPTION_REPORTER_FILTER
'django.views.debug.SafeExceptionReporterFilter'
ADMINS
()
FORMAT_MODULE_PATH
None
DEFAULT_FROM_EMAIL
'noreply@vertinum.eu'
REST_FRAMEWORK
{'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework.authentication.SessionAuthentication',
                                    'rest_framework.authentication.TokenAuthentication'),
 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.DjangoModelPermissionsOrAnonReadOnly']}
MEDIA_URL
''
DATETIME_FORMAT
'N j, Y, P'
TEMPLATE_DIRS
()
SITE_ID
1
DISALLOWED_USER_AGENTS
()
ALLOWED_INCLUDE_ROOTS
()
LOGGING
{}
SHORT_DATE_FORMAT
'm/d/Y'
TEMPLATES
[{'APP_DIRS': True,
  'BACKEND': 'django.template.backends.django.DjangoTemplates',
  'DIRS': [],
  'OPTIONS': {'context_processors': ['django.template.context_processors.debug',
                                     'django.template.context_processors.request',
                                     'django.contrib.auth.context_processors.auth',
                                     'django.contrib.messages.context_processors.messages']}}]
TEST_RUNNER
'django.test.runner.DiscoverRunner'
CACHE_MIDDLEWARE_KEY_PREFIX
u'**_*****************'
SECURE_SSL_REDIRECT
False
TIME_ZONE
'UTC'
CORS_ORIGIN_ALLOW_ALL
True
FILE_UPLOAD_MAX_MEMORY_SIZE
2621440
EMAIL_BACKEND
'django.core.mail.backends.console.EmailBackend'
EMAIL_USE_SSL
False
CRISPY_TEMPLATE_PACK
'bootstrap3'
REST_AUTH_SERIALIZERS
{'USER_DETAILS_SERIALIZER': 'companies.serializers.UserSerializer'}
SESSION_COOKIE_AGE
1209600
SETTINGS_MODULE
'vremind.settings'
USE_ETAGS
False
LANGUAGES_BIDI
('he', 'ar', 'fa', 'ur')
FILE_UPLOAD_TEMP_DIR
None
INTERNAL_IPS
()
STATIC_URL
'/static/'
EMAIL_PORT
587
USE_TZ
True
SHORT_DATETIME_FORMAT
'm/d/Y P'
TEST_NON_SERIALIZED_APPS
[]
MODELTRANSLATION_DEFAULT_LANGUAGE
'en'
ABSOLUTE_URL_OVERRIDES
{}
LANGUAGE_COOKIE_PATH
'/'
CACHE_MIDDLEWARE_SECONDS
600
EMAIL_SSL_CERTFILE
None
CSRF_COOKIE_HTTPONLY
False
DATETIME_INPUT_FORMATS
('%Y-%m-%d %H:%M:%S',
 '%Y-%m-%d %H:%M:%S.%f',
 '%Y-%m-%d %H:%M',
 '%Y-%m-%d',
 '%m/%d/%Y %H:%M:%S',
 '%m/%d/%Y %H:%M:%S.%f',
 '%m/%d/%Y %H:%M',
 '%m/%d/%Y',
 '%m/%d/%y %H:%M:%S',
 '%m/%d/%y %H:%M:%S.%f',
 '%m/%d/%y %H:%M',
 '%m/%d/%y')
EMAIL_HOST_USER
'vreminders'
You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard page generated by the handler for this status code.
"
16321,Tivix,django-rest-auth,4,closed,109,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/109/comments,https://github.com/Tivix/django-rest-auth/issues/109,[],Cant authenticate with basic Auth credentials in /login/,"Hi! I i am new to django-rest-auth and apis. 
Its the first time i build a rest auth and i am not very familiar with Authorization headers and Content Types.

I am trying to understand why when i try to authenticate a user in /login/ with Basic Authorization like this:
curl -X POST -H ""Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=""  'https://myurl.com/rest-auth/login/' --insecure

i got this error message:
{""password"":[""(This field is required""]}

When passing the username and password in the body like this:
curl -X POST -H ""Content-Type: application/x-www-form-urlencoded"" -d 'username=myuser&password=mypassword' 'https://myurl.com/rest-auth/login/'  --insecure
I got the key:
{""key"":""b5c0f3a9c7b2fc2f58a74b25f816e2968c64712f""}

Why this is happening?

I also wonder why when trying the same in /user/ it didnt throw me any error and give me my user model serialized

curl -X GET -H ""Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ="" -H ""Cache-Control: no-cache"" 'https://myurl.com/rest-auth/user/' --insecure

The only difference i can understand is that in /login i am using POST and in /user/ is GET

Can anybody explain this to me?

Thanks for reading!
"
16322,Tivix,django-rest-auth,4,closed,108,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/108/comments,https://github.com/Tivix/django-rest-auth/issues/108,[],demo syncdb error,"```
django.db.migrations.graph.NodeNotFoundError: Migration account.0003_merge dependencies reference nonexistent parent node ('account', '0002_email_max_length'
```

demo at syncdb
"
16325,Tivix,django-rest-auth,4,closed,105,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/105/comments,https://github.com/Tivix/django-rest-auth/issues/105,[],Python3: reset password doesn't work when user model has UUID PK,"Reset password function doesn't work with user model has  UUID as PK. 

```
 [25/Sep/2015 14:51:22] ERROR [django.request:256] Internal Server Error: /api/rest- auth/password/reset/confirm/
 Traceback (most recent call last):
   File ""venv/lib/python3.4/site-packages/django/db/backends/utils.py"", line 64, in execute
     return self.cursor.execute(sql, params)
 psycopg2.ProgrammingError: operator does not exist: uuid = bytea
 LINE 1: ...customauth_myuser"" WHERE ""customauth_myuser"".""id"" = '\x34353...
```

It's possible this is related to Python3 and maybe PostgreSQL database, problematic code is in serializers.py:

```
       # ERROR: uid is bytestring and raises error with postgresql
       ... 
       uid = uid_decoder(attrs['uid'])
       self.user = UserModel._default_manager.get(pk=uid)
       ...

       # FIX: making it string and error is gone
        ....
        from django.utils.encoding import force_text
        uid = force_text(uid_decoder(attrs['uid']))
        self.user = UserModel._default_manager.get(pk=uid)
        ...
```
"
16327,Tivix,django-rest-auth,4,closed,103,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/103/comments,https://github.com/Tivix/django-rest-auth/issues/103,[],non_field_errors : Must include email and password HTTP 400,"After registering a user, I can't login with that user - neither on the AngularJS app nor the JQuery demo app. I followed the Demo instructions verbatim here - http://django-rest-auth.readthedocs.org/en/latest/demo.html

API Response: 400 BAD REQUEST
Content: {""non_field_errors"":[""Must include \""email\"" and \""password\"".""]}

How can I login/register a user?
"
16328,Tivix,django-rest-auth,4,closed,102,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/102/comments,https://github.com/Tivix/django-rest-auth/issues/102,[],Commit #47 broke compatibility with drf <3,"ValidationError is not included in earlier versions on DRF and it is not trivial to upgrade. Perhaps there is a more backward compatible solution, e.g using the django.core.exceptions ValidationError
"
16334,Tivix,django-rest-auth,4,closed,96,7,https://api.github.com/repos/Tivix/django-rest-auth/issues/96/comments,https://github.com/Tivix/django-rest-auth/issues/96,[],[BUG] request.DATA usage removed in Django Rest Framework 3.2,"Using django-rest-auth 4.0, and upgraded to djangorestframework 3.2 and received the following exception when testing the registration route:

> NotImplementedError at /rest-auth/registration/
> `request.DATA` has been deprecated in favor of `request.data` since version 3.0, and has been fully removed as of version 3.2.

request.DATA is appears to be called from **rest_framework/request.py line 40**.
"
16340,Tivix,django-rest-auth,5,closed,89,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/89/comments,https://github.com/Tivix/django-rest-auth/issues/89,[],Error with required email,"On user registration after upgrading to 0.4.0 I'm getting an error:  AssertionError: May not set both `read_only` and `required`

which is being raised in django rest framework fields.py line 183 assert not (read_only and required), NOT_READ_ONLY_REQUIRED.

This is because the email field is being marked read_only in rest_auth.serializers.UserDetailsSerializer, and I'm not sure why. When I get rid of that line the error goes away.

Should the email only be marked read_only if it's not required since it can't be required and read_only?

I'm getting this error with rest_auth version 0.4.0, django 1.8.3, DRF 3.1.3.
"
16341,Tivix,django-rest-auth,5,closed,88,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/88/comments,https://github.com/Tivix/django-rest-auth/issues/88,[],custom registration form django 1.8,"I am using django 1.8 for the first time and things are a little different than in the past.

Here's my model:

```
from django.db import models
from django.contrib.auth.models import User

class FDUserProfile(models.Model):
    user = models.OneToOneField(User)
    organization = models.CharField(max_length=100)
```

Here's my form:

```
from django import forms
from django.contrib.auth.models import User
from .models import FDUserProfile

class FDSignupForm(forms.ModelForm):
    class Meta:
        model = FDUserProfile
        fields = ['organization']

    first_name = forms.CharField(max_length=30, label='Voornaam')
    last_name = forms.CharField(max_length=30, label='Achternaam')
    organization = forms.CharField(max_length=100, label='Company')

    def signup(self, request, user):
        user.first_name = self.cleaned_data['first_name']
        user.last_name = self.cleaned_data['last_name']
        profile = FDUserProfile(user=user, organization=self.cleaned_data['organization'])
        profile.save()
```

The error I get is the following:

```
NOT NULL constraint failed: fdauth_fduserprofile.user_id
```

Now I don't want my user_id to be null and don't really understand why this is happening. I was able to simplify this form and use the User model as my form's model and just save the first_name and last_name fields however I need to store the company of the client as well. 

One other thing to note, and this is just another thing I've noticed, when I had this working with just the first_name and last_name, the user object would save but no email would send. I can cross that bridge once I get past this one.
"
16346,Tivix,django-rest-auth,5,closed,83,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/83/comments,https://github.com/Tivix/django-rest-auth/issues/83,[],SocialLogin should catch the case that the email exists,"If there exists a login with an email (eg - from  a username/password) and you login with a social account - you can get a database error if you have uniqueness constraints on your User email

There should be a HTTP_409_conflict raised here on DB error - That email exists.

https://github.com/Tivix/django-rest-auth/blob/master/rest_auth/registraton/serializers.py#42
"
16355,Tivix,django-rest-auth,5,closed,73,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/73/comments,https://github.com/Tivix/django-rest-auth/issues/73,[],Django 1.8 breaks rest-auth,"See https://github.com/pennersr/django-allauth/issues/858#issuecomment-92357122

There is an invocation of the user when the account is not setup yet.

``` python
        try:
            login = self.adapter.complete_login(request, app, token,
                                                response=access_token)
            token.account = login.account
            login.token = token
            complete_social_login(request, login)
        except HTTPError:
            raise serializers.ValidationError('Incorrect value')
```
"
16357,Tivix,django-rest-auth,5,closed,71,5,https://api.github.com/repos/Tivix/django-rest-auth/issues/71/comments,https://github.com/Tivix/django-rest-auth/issues/71,[],deleted a user ,"OperationalError at /admin/auth/user/3/delete/
no such table: allauth_socialaccount
Request Method: GET
Request URL:    http://127.0.0.1:8888/admin/auth/user/3/delete/
Django Version: 1.8
Exception Type: OperationalError
Exception Value:  
no such table: allauth_socialaccount
Exception Location: /home/coco/project/env/jifen/lib/python3.4/site-packages/Django-1.8-py3.4.egg/django/db/backends/sqlite3/base.py in execute, line 318
Python Executable:  /home/coco/project/env/jifen/bin/python
Python Version: 3.4.0
Python Path:  
['/home/coco/project/django-rest-auth/demo',
 '/home/coco/project/env/jifen/lib/python3.4/site-packages/Django-1.8-py3.4.egg',
 '/home/coco/project/env/jifen/lib/python3.4',
 '/home/coco/project/env/jifen/lib/python3.4/plat-x86_64-linux-gnu',
 '/home/coco/project/env/jifen/lib/python3.4/lib-dynload',
 '/usr/lib/python3.4',
 '/usr/lib/python3.4/plat-x86_64-linux-gnu',
 '/home/coco/project/env/jifen/lib/python3.4/site-packages']
Server time:    Mon, 13 Apr 2015 06:14:38 +0000
"
16361,Tivix,django-rest-auth,5,closed,67,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/67/comments,https://github.com/Tivix/django-rest-auth/issues/67,[],Testing google social auth login results in an error,"More or less duplicated the test for the social login for facebook, but change it to google as the provider.  It does not work if I have the django messages app installed, but work fine if I remove it.

```
  File ""/Users/xxx/.virtualenvs/yyy/lib/python3.4/site-packages/allauth/account/utils.py"", line 157, in complete_signup
    signal_kwargs=signal_kwargs)
  File ""/Users/xxx/.virtualenvs/yyy/lib/python3.4/site-packages/allauth/account/utils.py"", line 140, in perform_login
    {'user': user})
  File ""/Users/xxx/.virtualenvs/yyy/lib/python3.4/site-packages/allauth/account/adapter.py"", line 263, in add_message
    extra_tags=extra_tags)
  File ""/Users/xxx/.virtualenvs/yyy/lib/python3.4/site-packages/django/contrib/messages/api.py"", line 23, in add_message
    ""not '%s'."" % request.__class__.__name__)
TypeError: add_message() argument must be an HttpRequest object, not 'Request'.
```
"
16376,Tivix,django-rest-auth,5,closed,51,7,https://api.github.com/repos/Tivix/django-rest-auth/issues/51/comments,https://github.com/Tivix/django-rest-auth/issues/51,[],How to update extended user profile?,"I had a need to store additional information for the user. So I created a UserProfile model by adding this in my `models.py`

``` python
from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    company_name = models.CharField(max_length=100)
```

Further I made a `serializers.py` file in my application and added the following to it so that whenever the user is created a `UserProfile` could be created as well and whenever a user is updated the `company_name` field would be updated as well. 

``` python
from rest_framework import serializers
#from django.forms.exceptions import ValidationError
from rest_framework.serializers import ValidationError
from .models import *
from django.contrib.auth import get_user_model
import re


class UserProfileSerializer(serializers.ModelSerializer):
    #follows = serializers.PrimaryKeyRelatedField(many=True, read_only=True)
    class Meta:
        model = models.UserProfile
        fields = ('company_name',)

class UserSerializer(serializers.ModelSerializer):
    profile = UserProfileSerializer()

    class Meta:
        model = User
        fields = ('username', 'email', 'profile')

    def create(self, validated_data):
        profile_data = validated_data.pop('profile')
        user = User.objects.create(**validated_data)
        Profile.objects.create(user=user, **profile_data)
        return user

    def update(self, instance, validated_data):
        profile_data = validated_data.pop('profile')
        # Unless the application properly enforces that this field is
        # always set, the follow could raise a `DoesNotExist`, which
        # would need to be handled.
        profile = instance.profile

        instance.username = validated_data.get('username', instance.username)
        instance.email = validated_data.get('email', instance.email)
        instance.save()

        profile.company_name = profile_data.get(
            'company_name',
            profile.company_name
        )
        profile.save()

        return instance
```

However, the changes I made to serializers.py don't seem to be having any effect. 
How would I go about updating the `company_name` field when the user profile is updated on this url `http://localhost:8080/rest-auth/user/` ? FYI, I'm trying all this in the demo application that ships with application.
"
16380,Tivix,django-rest-auth,5,closed,47,3,https://api.github.com/repos/Tivix/django-rest-auth/issues/47/comments,https://github.com/Tivix/django-rest-auth/issues/47,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/Tivix/django-rest-auth/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWw5NjMyMzg4Ng=="", ""id"": 96323886}]",(Security bug) PasswordResetConfirm doesn't check token! It allows to change password for anyone,"https://github.com/Tivix/django-rest-auth/blob/master/rest_auth/serializers.py#L116 

Perhaps, you forgot to raise an exception, for example like that:

<pre>
if self._errors:
            raise serializers.ValidationError(self._errors)
</pre>
"
16384,Tivix,django-rest-auth,5,closed,43,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/43/comments,https://github.com/Tivix/django-rest-auth/issues/43,[],DRF 3 changes HttpRequest to Request,"When I do registration, one exception raise as follow:

```
add_message() argument must be an HttpRequest object, not 'Request'.
```

The upper level code related to django-rest-auth is at /rest_auth/registration/views.py#L27

```
def form_valid(self, form):
    self.user = form.save(self.request)
    return complete_signup(self.request, self.user,
                           app_settings.EMAIL_VERIFICATION,
                           self.get_success_url()) 
```

And add_message in django will check request object:

```
if not isinstance(request, HttpRequest):
    raise TypeError(""add_message() argument must be an HttpRequest object, ""
                    ""not '%s'."" % request.__class__.__name__) 
```

but [docs](http://www.django-rest-framework.org/api-guide/requests/) from drf says:

```
Note that due to implementation reasons the Request class does not inherit from HttpRequest class, but instead extends the class using composition.
```

Related stackoverflow thread:
http://stackoverflow.com/questions/27456273/using-django-message-framework-with-rest-framework

I will make a pull request if you guys are going to support drf 3.0.
"
16390,Tivix,django-rest-auth,5,closed,37,9,https://api.github.com/repos/Tivix/django-rest-auth/issues/37/comments,https://github.com/Tivix/django-rest-auth/issues/37,[],Problem with login.,"I'm trying using http://127.0.0.1:8000/rest-auth/login/ to login myself into the system but error always showes up.

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/rest-auth/login/

Django Version: 1.7.1
Python Version: 2.7.8
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'reminder',
 'rest_framework',
 'rest_framework.authtoken',
 'rest_auth',
 'allauth',
 'allauth.account',
 'rest_auth.registration',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.facebook')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')


Traceback:
File ""I:\www\bvenv\lib\site-packages\django\core\handlers\base.py"" in get_response
  111.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""I:\www\bvenv\lib\site-packages\django\views\decorators\csrf.py"" in wrapped_view
  57.         return view_func(*args, **kwargs)
File ""I:\www\bvenv\lib\site-packages\django\views\generic\base.py"" in view
  69.             return self.dispatch(request, *args, **kwargs)
File ""I:\www\bvenv\lib\site-packages\rest_framework\views.py"" in dispatch
  406.             response = self.handle_exception(exc)
File ""I:\www\bvenv\lib\site-packages\rest_framework\views.py"" in dispatch
  403.             response = handler(request, *args, **kwargs)
File ""I:\www\bvenv\lib\site-packages\rest_auth\views.py"" in post
  52.         self.login()
File ""I:\www\bvenv\lib\site-packages\rest_auth\views.py"" in login
  34.         self.user = self.serializer.object['user']

Exception Type: AttributeError at /rest-auth/login/
Exception Value: 'LoginSerializer' object has no attribute 'object'

```

This error  `'LoginSerializer' object has no attribute 'object'` also is in Demo.
"
16396,Tivix,django-rest-auth,5,closed,31,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/31/comments,https://github.com/Tivix/django-rest-auth/issues/31,[],Swagger UI breaks with an AttributeError,"The latests version break the hability to view the REST URLs using [Swagger UI](https://github.com/marcgibbons/django-rest-swagger#django-rest-swagger).

```
AttributeError at /api/doc/api-docs/api/auth
'NoneType' object has no attribute 'user'
```

http://dpaste.com/29TPWPB
"
16404,Tivix,django-rest-auth,5,closed,23,13,https://api.github.com/repos/Tivix/django-rest-auth/issues/23/comments,https://github.com/Tivix/django-rest-auth/issues/23,[],Error with Social Authentication (Facebook): NoReverseMatch: Reverse for 'socialaccount_signup',"Hello,
I enabled Facebook login following documentation but I'm getting the same error described here:
https://github.com/pennersr/django-allauth/issues/558

What am I missing? Thanks in advance.
"
16407,Tivix,django-rest-auth,5,closed,20,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/20/comments,https://github.com/Tivix/django-rest-auth/issues/20,[],TemplateResponseMixin error when loading pages.,"Whenever I try and load a page I receive the following error:

Internal Server Error: /rest-auth/registration/account-email-verification-sent/
Traceback (most recent call last):
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/core/handlers/base.py"", line 111, in get_response
    response = wrapped_callback(request, _callback_args, *_callback_kwargs)
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/views/generic/base.py"", line 69, in view
    return self.dispatch(request, _args, *_kwargs)
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/views/generic/base.py"", line 87, in dispatch
    return handler(request, _args, *_kwargs)
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/views/generic/base.py"", line 155, in get
    return self.render_to_response(context)
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/views/generic/base.py"", line 130, in render_to_response
    template=self.get_template_names(),
  File ""/Users/chrisfranklin/ng/coderdash/env/lib/python2.7/site-packages/django/views/generic/base.py"", line 142, in get_template_names
    ""TemplateResponseMixin requires either a definition of ""
ImproperlyConfigured: TemplateResponseMixin requires either a definition of 'template_name' or an implementation of 'get_template_names()'
[26/Oct/2014 13:48:13] ""GET /rest-auth/registration/account-email-verification-sent/ HTTP/1.1"" 500 111497

Any ideas what might be causing it?
"
16408,Tivix,django-rest-auth,5,closed,19,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/19/comments,https://github.com/Tivix/django-rest-auth/issues/19,[],Update profile not working,"I'm testing out my current django install with [the sample angular app](https://github.com/Tivix/angular-django-registration-auth), and updating a profile is failing. The server response is `{""detail"":""Method 'POST' not allowed."",""status"":405}`. Angular is printing this error to the javascript console `POST http://127.0.0.1:8000/rest-auth/user/ 405 (METHOD NOT ALLOWED)`.
"
16409,Tivix,django-rest-auth,5,closed,18,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/18/comments,https://github.com/Tivix/django-rest-auth/pull/18,[],Fix app_settings import,"The url paths:

```
    url(r'^rest-auth/', include('rest_auth.urls')),
    url(r'^rest-auth/registration/', include('rest_auth.registration.urls')),
```

Weren't working for me, I kept getting an ImportError `No module named 'app_settings'`.
This fixes that issue for me on Win7 x64, Python 3.4, Django 1.7
"
16418,Tivix,django-rest-auth,5,closed,9,2,https://api.github.com/repos/Tivix/django-rest-auth/issues/9/comments,https://github.com/Tivix/django-rest-auth/issues/9,[],Missing serializer_class on UserDetails?,"UserDetails seems to be missing 
`serializer_class = UserDetailsSerializer`
as without this django-swagger can't inspect the UserDetails class without errors. Can this be added?
"
16421,Tivix,django-rest-auth,5,closed,6,1,https://api.github.com/repos/Tivix/django-rest-auth/issues/6/comments,https://github.com/Tivix/django-rest-auth/issues/6,[],BrowsableAPIRenderer throws on /auth/user/ without AUTH_PROFILE_MODULE,"Hi

a followup to #3: when leaving out AUTH_PROFILE_MODULE, the `/auth/user/` correctly returns json when requested to. Calling it in the Browser fails with

```
Traceback:
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/django/core/handlers/base.py"" in get_response
  137.                 response = response.render()
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/django/template/response.py"" in render
  105.             self.content = self.rendered_content
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/response.py"" in rendered_content
  59.         ret = renderer.render(self.data, media_type, context)
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/renderers.py"" in render
  601.         context = self.get_context(data, accepted_media_type, renderer_context)
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/renderers.py"" in get_context
  551.         raw_data_post_form = self.get_raw_data_form(view, 'POST', request)
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/renderers.py"" in get_raw_data_form
  490.                 serializer = view.get_serializer(instance=obj)
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/generics.py"" in get_serializer
  99.         serializer_class = self.get_serializer_class()
File ""/home/peter/AAA-WssIt/django-vs-extjs/lib/python3.3/site-packages/rest_framework/generics.py"" in get_serializer_class
  248.             % self.__class__.__name__

Exception Type: AssertionError at /api/auth/user/
Exception Value: 'UserDetails' should either include a 'serializer_class' attribute, or use the 'model' attribute as a shortcut for automatically generating a serializer class.
```

Environment:

```
Request Method: GET
Request URL: http://localhost:8000/api/auth/user/

Django Version: 1.6.5
Python Version: 3.3.2
Installed Applications:
('django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'rest_framework',
 'rest_framework.authtoken',
 'rest_auth',
 'frontend',
 'polls')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')
```

REST_FRAMEWORK Settings

```
{'DEFAULT_AUTHENTICATION_CLASSES': ('rest_framework.authentication.SessionAuthentication',),
 'DEFAULT_FILTER_BACKENDS': ['rest_framework.filters.DjangoFilterBackend',
                             'rest_framework.filters.OrderingFilter'],
 'DEFAULT_MODEL_SERIALIZER_CLASS': 'rest_framework.serializers.HyperlinkedModelSerializer',
 'DEFAULT_PERMISSION_CLASSES': ['rest_framework.permissions.DjangoModelPermissions'],
 'MAX_PAGINATE_BY': 100,
 'ORDERING_PARAM': 'sort',
 'PAGINATE_BY': 10,
 'PAGINATE_BY_PARAM': 'limit'}
```
"
16422,Tivix,django-rest-auth,5,closed,5,5,https://api.github.com/repos/Tivix/django-rest-auth/issues/5/comments,https://github.com/Tivix/django-rest-auth/issues/5,[],AttributeError at /rest-auth/login/,"**Gist**: https://gist.github.com/dyzajash/7f95c631d61b511ccbf9

**Code used**: https://github.com/Tivix/angular-django-registration-auth + https://github.com/dyzajash/nemu

**Problem**: 

When I try to login I can **GET** form but I can't **POST** it. In browser it gives me ""type object 'Token' has no attribute 'objects'"" error, and in console.log i got **500 (INTERNAL SERVER ERROR)**

**SYSTEM**: precise32 VagrantBox 
"
16424,Tivix,django-rest-auth,5,closed,3,5,https://api.github.com/repos/Tivix/django-rest-auth/issues/3/comments,https://github.com/Tivix/django-rest-auth/issues/3,[],Allow /auth/user/ without UserProfile,"Hi

I don't need an extra userprofile, just a single api-call that tells me whether a user is currently logged in or not. /auth/user/ fails in 2.2 on django 1.6 without a configured AUTH_PROFILE_MODULE with the following error message:

SiteProfileNotAvailable at /api/auth/user/
You need to set AUTH_PROFILE_MODULE in your project settings

Regards, Peter
"
16425,Tivix,django-rest-auth,5,closed,2,4,https://api.github.com/repos/Tivix/django-rest-auth/issues/2/comments,https://github.com/Tivix/django-rest-auth/issues/2,[],AttributeError at /rest-auth/register/ 'NoneType' object has no attribute '_meta',"I tried to simply install this without adding anything per the readme.
trying: 

http://localhost:8000/rest-auth/register/

getting some issue with models being None:

AttributeError at /rest-auth/register/ 'NoneType' object has no attribute '_meta'

trace:
https://gist.github.com/oxbits/1d30bd8f7fb51836071d

using Ubuntu trusty 64 via vagrant

$ pip list
apt-xapian-index (0.45)
argparse (1.2.1)
chardet (2.0.1)
Cheetah (2.4.4)
cloud-init (0.7.5)
colorama (0.2.5)
configobj (4.7.2)
Django (1.6.5)
django-filter (0.7)
django-registration (1.0)
django-rest-auth (0.2.1)
djangorestframework (2.3.14)
html5lib (0.999)
httplib2 (0.8)
ipython (2.1.0)
jsonpatch (1.3)
jsonpointer (1.0)
keyring (3.5)
Landscape-Client (14.01)
launchpadlib (1.10.2)
lazr.restfulclient (0.13.3)
lazr.uri (1.0.3)
Markdown (2.4.1)
oauth (1.0.1)
PAM (0.4.2)
pip (1.5.4)
prettytable (0.7.2)
pycrypto (2.6.1)
pycurl (7.19.3)
Pygments (1.6)
pygobject (3.12.0)
pyOpenSSL (0.13)
pyserial (2.6)
python-apt (0.9.3.5)
python-debian (0.1.21-nmu2ubuntu2)
PyYAML (3.10)
requests (2.2.1)
SecretStorage (2.0.0)
setuptools (3.3)
simplejson (3.3.1)
six (1.5.2)
ssh-import-id (3.21)
Twisted-Core (13.2.0)
Twisted-Names (13.2.0)
Twisted-Web (13.2.0)
urllib3 (1.7.1)
wadllib (1.3.2)
wsgiref (0.1.2)
zope.interface (4.0.5)
"
16427,vitorfs,bootcamp,2,closed,188,1,https://api.github.com/repos/vitorfs/bootcamp/issues/188/comments,https://github.com/vitorfs/bootcamp/issues/188,[],Migration not working because of DATABASE_URL,"Hi,
I downloadet the bootcamp repo and installed all requirements. After installing postresql on local I tried to migrate, but its not working.

in **.env** I unmarked **DATABASE_URL** 
`DATABASE_URL=postgresql://bootcamp_user:bootcamp_pass@127.0.0.1:5432/bootcamp`

> (venv) sebastian@sebastian-Lenovo-G580:~/PycharmProjects/base_camp$ python manage.py makemigrations
> /home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/environ/environ.py:639: UserWarning: Error reading /home/sebastian/PycharmProjects/base_camp/.env - if you're not configuring your environment separately, check this.
>   ""environment separately, check this."" % env_file)
> Traceback (most recent call last):
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/environ/environ.py"", line 273, in get_value
>     value = self.ENVIRON[var]
>   File ""/usr/lib/python3.7/os.py"", line 678, in __getitem__
>     raise KeyError(key) from None
> KeyError: 'DATABASE_URL'
> 
> During handling of the above exception, another exception occurred:
> 
> Traceback (most recent call last):
>   File ""manage.py"", line 30, in <module>
>     execute_from_command_line(sys.argv)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/__init__.py"", line 381, in execute_from_command_line
>     utility.execute()
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/__init__.py"", line 375, in execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 323, in run_from_argv
>     self.execute(*args, **cmd_options)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 361, in execute
>     self.check()
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 390, in check
>     include_deployment_checks=include_deployment_checks,
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/management/base.py"", line 377, in _run_checks
>     return checks.run_checks(**kwargs)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/checks/registry.py"", line 72, in run_checks
>     new_errors = check(app_configs=app_configs)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/core/checks/urls.py"", line 10, in check_url_config
>     if getattr(settings, 'ROOT_URLCONF', None):
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/conf/__init__.py"", line 79, in __getattr__
>     self._setup(name)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/conf/__init__.py"", line 66, in _setup
>     self._wrapped = Settings(settings_module)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/django/conf/__init__.py"", line 157, in __init__
>     mod = importlib.import_module(self.SETTINGS_MODULE)
>   File ""/usr/lib/python3.7/importlib/__init__.py"", line 127, in import_module
>     return _bootstrap._gcd_import(name[level:], package, level)
>   File ""<frozen importlib._bootstrap>"", line 1006, in _gcd_import
>   File ""<frozen importlib._bootstrap>"", line 983, in _find_and_load
>   File ""<frozen importlib._bootstrap>"", line 967, in _find_and_load_unlocked
>   File ""<frozen importlib._bootstrap>"", line 677, in _load_unlocked
>   File ""<frozen importlib._bootstrap_external>"", line 728, in exec_module
>   File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
>   File ""/home/sebastian/PycharmProjects/base_camp/config/settings/local.py"", line 5, in <module>
>     from .base import *  # noqa
>   File ""/home/sebastian/PycharmProjects/base_camp/config/settings/base.py"", line 42, in <module>
>     'default': env.db('DATABASE_URL'),
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/environ/environ.py"", line 204, in db_url
>     return self.db_url_config(self.get_value(var, default=default), engine=engine)
>   File ""/home/sebastian/PycharmProjects/base_camp/venv/lib/python3.7/site-packages/environ/environ.py"", line 277, in get_value
>     raise ImproperlyConfigured(error_msg)
> django.core.exceptions.ImproperlyConfigured: Set the DATABASE_URL environment variable

I dont changed something in the setting files. In the wiki I cant found any extra steps. what is wrong, or ehat I forgott?

Im using Ubuntu and python 3.7"
16430,vitorfs,bootcamp,2,closed,185,3,https://api.github.com/repos/vitorfs/bootcamp/issues/185/comments,https://github.com/vitorfs/bootcamp/issues/185,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNTk="", ""id"": 102701259}]",A bug in messager app can't serialize UUID(),"In the messager app when you try to send a message a to another user, sometimes it is not possible to submit the message-form, Error is thrown from messages/send-message/ TypeError: can't serialize UUID() in _map_channel_keys_to_connection function of channnels_redis package. I don't know Django-channels but I think it might be channels_redis core problem and not the implementation in this project.

It is hard to reproduce this bug because it happens randomly and I don't know in which conditions but I have reproduced it so many times in different settings. I don't know if it is the only one having this issue, I think if you play with messager so much you might reproduce it. Below is the full traceback.

`HTTP POST /messages/send-message/ 500 [0.11, 192.168.0.124:64502] Internal Server Error: /messages/send-message/ Traceback (most recent call last):
 File ""C:\workspace\bootcamp\venv\lib\site-packages\django\core\handlers\exception.py"", line 34, in inner response = get_response(request)
 File ""C:\workspace\bootcamp\venv\lib\site-packages\django\core\handlers\base.py"", line 126, in _get_response response = self.process_exception_by_middleware(e, request)
 File ""C:\workspace\bootcamp\venv\lib\site-packages\django\core\handlers\base.py"", line 124, in _get_response response = wrapped_callback(request, *callback_args, **callback_kwargs)
File ""C:\Users\user\AppData\Local\Programs\Python\Python37-32\lib\contextlib.py"", line 74, in inner return func(*args, **kwds)
 File ""C:\workspace\bootcamp\venv\lib\site-packages\django\contrib\auth\decorators.py"", line 21, in _wrapped_view return view_func(request, *args, **kwargs) File ""C:\Users\user\workspace\bootcamp\helpers.py"", line 36, in wrap return f(request, *args, **kwargs) File ""C:\workspace\bootcamp\venv\lib\site-packages\django\views\decorators\http.py"", line 40, in inner return func(request, *args, **kwargs) 
File ""C:\Users\user\workspace\bootcamp\messager\views.py"", line 89, in send_message msg = Message.send_message(sender, recipient, message)
 File ""C:\Users\user\workspace\bootcamp\messager\models.py"", line 94, in send_message async_to_sync(channel_layer.group_send)(recipient.username, payload)
File ""C:\workspace\bootcamp\venv\lib\site-packages\asgiref\sync.py"", line 64, in __call__ return call_result.result() 
File ""C:\Users\user\AppData\Local\Programs\Python\Python37-32\lib\concurrent\futures\_base.py"", line 432, in result return self.__get_result() 
File ""C:\Users\user\AppData\Local\Programs\Python\Python37-32\lib\concurrent\futures\_base.py"", line 384, in __get_result raise self._exception File ""C:\workspace\bootcamp\venv\lib\site-packages\asgiref\sync.py"", line 78, in main_wrap result = await self.awaitable(*args, **kwargs)
File ""C:\workspace\bootcamp\venv\lib\site-packages\channels_redis\core.py"", line 619, in group_send channel_names, message
 File ""C:\workspace\bootcamp\venv\lib\site-packages\channels_redis\core.py"", line 736, in _map_channel_keys_to_connection channel_key_to_message[key] = self.serialize(channel_key_to_message[key])
 File ""C:\workspace\bootcamp\venv\lib\site-packages\channels_redis\core.py"", line 756, in serialize value = msgpack.packb(message, use_bin_type=True) File ""C:\workspace\bootcamp\venv\lib\site-packages\msgpack\__init__.py"", line 47, in packb return Packer(**kwargs).pack(o)
 File ""msgpack/_packer.pyx"", line 284, in msgpack._packer.Packer.pack File ""msgpack/_packer.pyx"", line 290, in msgpack._packer.Packer.pack 
File ""msgpack/_packer.pyx"", line 287, in msgpack._packer.Packer.pack
 File ""msgpack/_packer.pyx"", line 234, in msgpack._packer.Packer._pack 
File ""msgpack/_packer.pyx"", line 281, in msgpack._packer.Packer._pack TypeError: can't serialize UUID('d30b95f9-950f-4e10-a314-e2ec32c3414c')`

I am using Redis version 3.2 and channels_redis version 2.3.2

"
16437,vitorfs,bootcamp,2,closed,177,2,https://api.github.com/repos/vitorfs/bootcamp/issues/177/comments,https://github.com/vitorfs/bootcamp/issues/177,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/help%20wanted"", ""color"": ""159818"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjI="", ""id"": 102701262}]",Deploy on Heroku failing,"Hi!
I've been trying to deploy this application on Heroku.. but I got this error:

`/app/.heroku/python/lib/python3.6/site-packages/environ/environ.py:639: UserWarning: Error reading /app/.env - if you're not configuring your environment separately, check this.
  ""environment separately, check this."" % env_file)`

I already did all the steps on the cookiecutter docs.
I already ran: heroku config:set DJANGO_SETTINGS_MODULE=config.settings.production

But I'm still getting this error
Appreciate for any help!"
16441,vitorfs,bootcamp,2,closed,173,3,https://api.github.com/repos/vitorfs/bootcamp/issues/173/comments,https://github.com/vitorfs/bootcamp/issues/173,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}, {""default"": true, ""name"": ""question"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/question"", ""color"": ""cc317c"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjQ="", ""id"": 102701264}]",Ask Questions / Write Articles not working!!,"Hi, I deployed the lastest version locally following http://cookiecutter-django.readthedocs.io/en/latest/developing-locally.html , signed up , verified email using admin panel and logged in. But when I am trying to write articles / ask Questions this error comes up:

render() got an unexpected keyword argument 'renderer'
Error during template rendering

In template C:\Users\kaust\Desktop\globetrotter\bootcamp\env\lib\site-packages\crispy_forms\templates\bootstrap4\field.html, error at line 28

Any Idea why is this happening? 

![screenshot_2018-08-08 typeerror at articles write-new-article](https://user-images.githubusercontent.com/21956467/43799351-e9ebc968-9aaa-11e8-9e30-a8f91450a670.png)
"
16450,vitorfs,bootcamp,2,closed,162,1,https://api.github.com/repos/vitorfs/bootcamp/issues/162/comments,https://github.com/vitorfs/bootcamp/issues/162,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}, {""default"": true, ""name"": ""question"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/question"", ""color"": ""cc317c"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjQ="", ""id"": 102701264}]",asgi_redis now is renamed to channels_redis,"please update requirements/base.txt  and rename asgi_redis to channels_redis.
[https://github.com/django/channels_redis/channels_redis/README.rst ](url)
the latest version is 2.1.1 , Am I going to have errors if I used the latest version?"
16451,vitorfs,bootcamp,2,closed,161,3,https://api.github.com/repos/vitorfs/bootcamp/issues/161/comments,https://github.com/vitorfs/bootcamp/issues/161,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}]",Unable to use SETTINGS_MODULE=config.settings.production,"Using SETTINGS_MODULE=config.settings.production throws the following error:
```
Traceback (most recent call last):
  File ""/opt/bootcamp/manage.py"", line 31, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 364, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/site-packages/django/core/management/__init__.py"", line 308, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 56, in __getattr__
    self._setup(name)
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/site-packages/django/conf/__init__.py"", line 110, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/local/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/opt/bootcamp/config/settings/production.py"", line 81
    'CacheControl': f'max-age={_AWS_EXPIRY}, s-maxage={_AWS_EXPIRY}, must-revalidate',
                                                                                    ^
SyntaxError: invalid syntax
```

I am trying to use the 'production' level setting for installing bootcamp but there was not a 'production' .env to reference from."
16453,vitorfs,bootcamp,2,closed,159,2,https://api.github.com/repos/vitorfs/bootcamp/issues/159/comments,https://github.com/vitorfs/bootcamp/issues/159,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}, {""default"": true, ""name"": ""question"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/question"", ""color"": ""cc317c"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjQ="", ""id"": 102701264}]",Hai KeyError at /login 'default',"Internal Server Error: /login
Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/core/handlers/exception.py"", line 41, in inner
    response = get_response(request)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/contrib/auth/views.py"", line 54, in inner
    return func(*args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/contrib/auth/views.py"", line 150, in login
    )(request)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/views/generic/base.py"", line 68, in view
    return self.dispatch(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/views/decorators/debug.py"", line 76, in sensitive_post_parameters_wrapper
    return view(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 67, in _wrapper
    return bound_func(*args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/views/decorators/cache.py"", line 57, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/utils/decorators.py"", line 63, in bound_func
    return func.__get__(self, type(self))(*args2, **kwargs2)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/contrib/auth/views.py"", line 90, in dispatch
    return super(LoginView, self).dispatch(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/views/generic/base.py"", line 88, in dispatch
    return handler(request, *args, **kwargs)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/views/generic/edit.py"", line 183, in post
    return self.form_valid(form)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/contrib/auth/views.py"", line 119, in form_valid
    auth_login(self.request, form.get_user())
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/contrib/auth/__init__.py"", line 160, in login
    user_logged_in.send(sender=user.__class__, request=request, user=user)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/dispatch/dispatcher.py"", line 193, in send
    for receiver in self._live_receivers(sender)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/Django-1.11.7-py3.6.egg/django/dispatch/dispatcher.py"", line 193, in <listcomp>
    for receiver in self._live_receivers(sender)
  File ""/Users/zhunishengrikuaile/Downloads/bootcamp-master/bootcamp/authentication/models.py"", line 206, in on_user_login
    Profile.objects.get(user=kwargs['user']).notify_login()
  File ""/Users/zhunishengrikuaile/Downloads/bootcamp-master/bootcamp/authentication/models.py"", line 157, in notify_login
    self.group_notification('log in')
  File ""/Users/zhunishengrikuaile/Downloads/bootcamp-master/bootcamp/authentication/models.py"", line 187, in group_notification
    Group('notifications').send({
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/channels/channel.py"", line 65, in __init__
    self.channel_layer = channel_layers[alias]
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/channels/asgi.py"", line 70, in __getitem__
    self.backends[key] = self.make_backend(key)
  File ""/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/channels/asgi.py"", line 32, in make_backend
    config = self.configs[name].get(""CONFIG"", {})
KeyError: 'default'
How to solve it。"
16474,vitorfs,bootcamp,2,closed,138,14,https://api.github.com/repos/vitorfs/bootcamp/issues/138/comments,https://github.com/vitorfs/bootcamp/issues/138,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}, {""default"": true, ""name"": ""help wanted"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/help%20wanted"", ""color"": ""159818"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjI="", ""id"": 102701262}, {""default"": true, ""name"": ""question"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/question"", ""color"": ""cc317c"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNjQ="", ""id"": 102701264}]",Installing in windows,"Hi,

I installed in my windows pc but I have this error:
```
python manage.py migrate

Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\management\__init__.py"", line 371, in execute_from_command_line
    utility.execute()
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\core\management\__init__.py"", line 347, in execute
    django.setup()
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\__init__.py"", line 24, in setup
    apps.populate(settings.INSTALLED_APPS)
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\apps\registry.py"", line 112, in populate
    app_config.import_models()
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\site-packages\django\apps\config.py"", line 198, in import_models
    self.models_module = import_module(models_module_name)
  File ""C:\Users\allan\AppData\Local\Programs\Python\Python36-32\lib\importlib\__init__.py"", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File ""<frozen importlib._bootstrap>"", line 994, in _gcd_import
  File ""<frozen importlib._bootstrap>"", line 971, in _find_and_load
  File ""<frozen importlib._bootstrap>"", line 955, in _find_and_load_unlocked
  File ""<frozen importlib._bootstrap>"", line 665, in _load_unlocked
  File ""<frozen importlib._bootstrap_external>"", line 678, in exec_module
  File ""<frozen importlib._bootstrap>"", line 219, in _call_with_frames_removed
  File ""C:\Users\allan\Documents\progetti\bootcamp\bootcamp\activities\models.py"", line 14, in <module>
    class Activity(models.Model):
  File ""C:\Users\allan\Documents\progetti\bootcamp\bootcamp\activities\models.py"", line 26, in Activity
    user = models.ForeignKey(User)

TypeError: __init__() missing 1 required positional argument: 'on_delete'
```
![image](https://user-images.githubusercontent.com/22498435/34177988-dac319c4-e505-11e7-89ba-32f71c013dd4.png)

![image](https://user-images.githubusercontent.com/22498435/34177942-ae032492-e505-11e7-8310-483949993da5.png)

I want to help with some feature when I have lost time."
16477,vitorfs,bootcamp,2,closed,135,12,https://api.github.com/repos/vitorfs/bootcamp/issues/135/comments,https://github.com/vitorfs/bootcamp/issues/135,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}]","Command ""pythin setup.py egg_info"" failed with error code 1 in /tmp/pip-build-eLZ8Xt/Django/",
16480,vitorfs,bootcamp,2,closed,132,2,https://api.github.com/repos/vitorfs/bootcamp/issues/132/comments,https://github.com/vitorfs/bootcamp/issues/132,"[{""default"": false, ""name"": ""Support"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/Support"", ""color"": ""bf3d52"", ""node_id"": ""MDU6TGFiZWw3MjI4NjQxMDg="", ""id"": 722864108}]",No module named 'django.core.urlresolvers',"In Django version 2.0, the django.core.urlresolvers module has been moved to django.urls. I get the following error:
ImportError: No module named 'django.core.urlresolvers'"
16500,vitorfs,bootcamp,2,closed,112,2,https://api.github.com/repos/vitorfs/bootcamp/issues/112/comments,https://github.com/vitorfs/bootcamp/issues/112,[],django admin page not found,"I can't seem to open django admin page. 
I have included `url(r'^admin/', admin.site.urls),` in bootcamp.urls but I keep getting an error that admin/index.html is not found when I try to open it."
16503,vitorfs,bootcamp,2,closed,109,1,https://api.github.com/repos/vitorfs/bootcamp/issues/109/comments,https://github.com/vitorfs/bootcamp/issues/109,[],help ! i cant load the static files ...,"when i run the first page
i found the css files is not found

i get those errors 
thanks for helper !

---------------------------------------------------------------

[05/Sep/2017 09:49:46] ""GET / HTTP/1.1"" 200 2421
Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 41, in inner
    response = get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 172, in _get_response
    resolver_match = resolver.resolve(request.path_info)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 392, in resolve
    raise Resolver404({'tried': tried, 'path': new_path})
django.urls.exceptions.Resolver404: {'tried': [[<RegexURLPattern home ^$>], [<RegexURLPattern login ^login>], [<RegexURLPattern logout ^logout>], [<RegexURL
Pattern signup ^signup/$>], [<RegexURLPattern settings ^settings/$>], [<RegexURLPattern picture ^settings/picture/$>], [<RegexURLPattern upload_picture ^set
tings/upload_picture/$>], [<RegexURLPattern save_uploaded_picture ^settings/save_uploaded_picture/$>], [<RegexURLPattern password ^settings/password/$>], [<
RegexURLPattern network ^network/$>], [<RegexURLResolver <module 'bootcamp.feeds.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\feeds\\urls.py'> (No
ne:None) ^feeds/>], [<RegexURLResolver <module 'bootcamp.questions.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\questions\\urls.py'> (None:None) ^
questions/>], [<RegexURLResolver <module 'bootcamp.articles.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\articles\\urls.py'> (None:None) ^articles
/>], [<RegexURLResolver <module 'bootcamp.messenger.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\messenger\\urls.py'> (None:None) ^messages/>], [<
RegexURLPattern notifications ^notifications/$>], [<RegexURLPattern last_notifications ^notifications/last/$>], [<RegexURLPattern check_notifications ^notif
ications/check/$>], [<RegexURLPattern search ^search/$>], [<RegexURLPattern profile ^(?P<username>[^/]+)/$>], [<RegexURLResolver <module 'django.conf.urls.i
18n' from 'D:\\Python36-32\\lib\\site-packages\\django\\conf\\urls\\i18n.py'> (None:i18n) ^i18n/>]], 'path': 'static/css/bootcamp.css'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 109, in get_exception_response
    response = callback(request, **dict(param_dict, exception=exception))
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 45, in page_not_found
    body = template.render(context, request)
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
Traceback (most recent call last):
  File ""D:\Python36-32\lib\wsgiref\handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 53, in response_for_exception
    response = get_exception_response(request, get_resolver(get_urlconf()), 404, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 119, in get_exception_response
    response = handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 143, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 74, in server_error
    return http.HttpResponseServerError(template.render())
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 41, in inner
    response = get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 172, in _get_response
    resolver_match = resolver.resolve(request.path_info)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 392, in resolve
    raise Resolver404({'tried': tried, 'path': new_path})
django.urls.exceptions.Resolver404: {'tried': [[<RegexURLPattern home ^$>], [<RegexURLPattern login ^login>], [<RegexURLPattern logout ^logout>], [<RegexURL
Pattern signup ^signup/$>], [<RegexURLPattern settings ^settings/$>], [<RegexURLPattern picture ^settings/picture/$>], [<RegexURLPattern upload_picture ^set
tings/upload_picture/$>], [<RegexURLPattern save_uploaded_picture ^settings/save_uploaded_picture/$>], [<RegexURLPattern password ^settings/password/$>], [<
RegexURLPattern network ^network/$>], [<RegexURLResolver <module 'bootcamp.feeds.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\feeds\\urls.py'> (No
ne:None) ^feeds/>], [<RegexURLResolver <module 'bootcamp.questions.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\questions\\urls.py'> (None:None) ^
questions/>], [<RegexURLResolver <module 'bootcamp.articles.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\articles\\urls.py'> (None:None) ^articles
/>], [<RegexURLResolver <module 'bootcamp.messenger.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\messenger\\urls.py'> (None:None) ^messages/>], [<
RegexURLPattern notifications ^notifications/$>], [<RegexURLPattern last_notifications ^notifications/last/$>], [<RegexURLPattern check_notifications ^notif
ications/check/$>], [<RegexURLPattern search ^search/$>], [<RegexURLPattern profile ^(?P<username>[^/]+)/$>], [<RegexURLResolver <module 'django.conf.urls.i
18n' from 'D:\\Python36-32\\lib\\site-packages\\django\\conf\\urls\\i18n.py'> (None:i18n) ^i18n/>]], 'path': 'static/js/bootcamp.js'}

During handling of the above exception, another exception occurred:

  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 109, in get_exception_response
    response = callback(request, **dict(param_dict, exception=exception))
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 45, in page_not_found
    body = template.render(context, request)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 41, in inner
    response = get_response(request)
  File ""D:\Python36-32\lib\wsgiref\handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 53, in response_for_exception
    response = get_exception_response(request, get_resolver(get_urlconf()), 404, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 119, in get_exception_response
    response = handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 143, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 74, in server_error
    return http.HttpResponseServerError(template.render())
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 172, in _get_response
    resolver_match = resolver.resolve(request.path_info)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 392, in resolve
    raise Resolver404({'tried': tried, 'path': new_path})
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
django.urls.exceptions.Resolver404: {'tried': [[<RegexURLPattern home ^$>], [<RegexURLPattern login ^login>], [<RegexURLPattern logout ^logout>], [<RegexURL
Pattern signup ^signup/$>], [<RegexURLPattern settings ^settings/$>], [<RegexURLPattern picture ^settings/picture/$>], [<RegexURLPattern upload_picture ^set
tings/upload_picture/$>], [<RegexURLPattern save_uploaded_picture ^settings/save_uploaded_picture/$>], [<RegexURLPattern password ^settings/password/$>], [<
RegexURLPattern network ^network/$>], [<RegexURLResolver <module 'bootcamp.feeds.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\feeds\\urls.py'> (No
ne:None) ^feeds/>], [<RegexURLResolver <module 'bootcamp.questions.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\questions\\urls.py'> (None:None) ^
questions/>], [<RegexURLResolver <module 'bootcamp.articles.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\articles\\urls.py'> (None:None) ^articles
/>], [<RegexURLResolver <module 'bootcamp.messenger.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\messenger\\urls.py'> (None:None) ^messages/>], [<
RegexURLPattern notifications ^notifications/$>], [<RegexURLPattern last_notifications ^notifications/last/$>], [<RegexURLPattern check_notifications ^notif
ications/check/$>], [<RegexURLPattern search ^search/$>], [<RegexURLPattern profile ^(?P<username>[^/]+)/$>], [<RegexURLResolver <module 'django.conf.urls.i
18n' from 'D:\\Python36-32\\lib\\site-packages\\django\\conf\\urls\\i18n.py'> (None:i18n) ^i18n/>]], 'path': 'static/css/cover.css'}
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)

During handling of the above exception, another exception occurred:

  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 109, in get_exception_response
    response = callback(request, **dict(param_dict, exception=exception))
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 45, in page_not_found
    body = template.render(context, request)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']
[05/Sep/2017 09:49:46] ""GET /static/css/bootcamp.css?v=1 HTTP/1.1"" 500 59
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
[05/Sep/2017 09:49:46] ""GET /static/js/bootcamp.js HTTP/1.1"" 500 59
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""D:\Python36-32\lib\wsgiref\handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 53, in response_for_exception
    response = get_exception_response(request, get_resolver(get_urlconf()), 404, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 119, in get_exception_response
    response = handle_uncaught_exception(request, resolver, sys.exc_info())
Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 143, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 41, in inner
    response = get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 172, in _get_response
    resolver_match = resolver.resolve(request.path_info)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 392, in resolve
    raise Resolver404({'tried': tried, 'path': new_path})
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
django.urls.exceptions.Resolver404: {'tried': [[<RegexURLPattern home ^$>], [<RegexURLPattern login ^login>], [<RegexURLPattern logout ^logout>], [<RegexURL
Pattern signup ^signup/$>], [<RegexURLPattern settings ^settings/$>], [<RegexURLPattern picture ^settings/picture/$>], [<RegexURLPattern upload_picture ^set
tings/upload_picture/$>], [<RegexURLPattern save_uploaded_picture ^settings/save_uploaded_picture/$>], [<RegexURLPattern password ^settings/password/$>], [<
RegexURLPattern network ^network/$>], [<RegexURLResolver <module 'bootcamp.feeds.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\feeds\\urls.py'> (No
ne:None) ^feeds/>], [<RegexURLResolver <module 'bootcamp.questions.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\questions\\urls.py'> (None:None) ^
questions/>], [<RegexURLResolver <module 'bootcamp.articles.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\articles\\urls.py'> (None:None) ^articles
/>], [<RegexURLResolver <module 'bootcamp.messenger.urls' from 'D:\\Python36-32\\works\\myvenv2\\bootcamp\\messenger\\urls.py'> (None:None) ^messages/>], [<
RegexURLPattern notifications ^notifications/$>], [<RegexURLPattern last_notifications ^notifications/last/$>], [<RegexURLPattern check_notifications ^notif
ications/check/$>], [<RegexURLPattern search ^search/$>], [<RegexURLPattern profile ^(?P<username>[^/]+)/$>], [<RegexURLResolver <module 'django.conf.urls.i
18n' from 'D:\\Python36-32\\lib\\site-packages\\django\\conf\\urls\\i18n.py'> (None:i18n) ^i18n/>]], 'path': 'static/js/ga.js'}
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 74, in server_error
    return http.HttpResponseServerError(template.render())

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 109, in get_exception_response
    response = callback(request, **dict(param_dict, exception=exception))
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 45, in page_not_found
    body = template.render(context, request)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
[05/Sep/2017 09:49:46] ""GET /static/css/cover.css HTTP/1.1"" 500 59
  File ""D:\Python36-32\lib\wsgiref\handlers.py"", line 137, in run
    self.result = application(self.environ, self.start_response)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\wsgi.py"", line 157, in __call__
    response = self.get_response(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\base.py"", line 124, in get_response
    response = self._middleware_chain(request)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 43, in inner
    response = response_for_exception(request, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 53, in response_for_exception
    response = get_exception_response(request, get_resolver(get_urlconf()), 404, exc)
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 119, in get_exception_response
    response = handle_uncaught_exception(request, resolver, sys.exc_info())
  File ""D:\Python36-32\lib\site-packages\django\core\handlers\exception.py"", line 143, in handle_uncaught_exception
    return callback(request, **param_dict)
  File ""D:\Python36-32\lib\site-packages\django\utils\decorators.py"", line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File ""D:\Python36-32\lib\site-packages\django\views\defaults.py"", line 74, in server_error
    return http.HttpResponseServerError(template.render())
  File ""D:\Python36-32\lib\site-packages\django\template\backends\django.py"", line 66, in render
    return self.template.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 207, in render
    return self._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 177, in render
    return compiled_parent._render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 199, in _render
    return self.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\loader_tags.py"", line 72, in render
    result = block.nodelist.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 990, in render
    bit = node.render_annotated(context)
  File ""D:\Python36-32\lib\site-packages\django\template\base.py"", line 957, in render_annotated
    return self.render(context)
  File ""D:\Python36-32\lib\site-packages\django\template\defaulttags.py"", line 458, in render
    url = reverse(view_name, args=args, kwargs=kwargs, current_app=current_app)
  File ""D:\Python36-32\lib\site-packages\django\urls\base.py"", line 91, in reverse
    return force_text(iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)))
  File ""D:\Python36-32\lib\site-packages\django\urls\resolvers.py"", line 497, in _reverse_with_prefix
    raise NoReverseMatch(msg)
django.urls.exceptions.NoReverseMatch: Reverse for 'profile' with arguments '('',)' not found. 1 pattern(s) tried: ['(?P<username>[^/]+)/$']
[05/Sep/2017 09:49:46] ""GET /static/js/ga.js HTTP/1.1"" 500 59


"
16513,vitorfs,bootcamp,2,closed,99,6,https://api.github.com/repos/vitorfs/bootcamp/issues/99/comments,https://github.com/vitorfs/bootcamp/issues/99,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNTk="", ""id"": 102701259}]",Lack of validation on input from user (GET/POST),"It seems like the application does not validate user provided parameters which results in further crashes. 

For example, injecting letter ('f') within last_feed GET parameter:

```
GET /feeds/check/?last_feed=2f2&feed_source=all&_=1500651952280 HTTP/1.1
Host: localhost:8000
```

will result in:
```
Exception Type: ValueError at /feeds/check/
Exception Value: invalid literal for float(): 2f2
```
in this case the problem is the check method of feeds views:

```python
@login_required
@ajax_required
def check(request):
    last_feed  = request.GET.get('last_feed')
```

Here is my patch in case it helps:


```
@login_required
@ajax_required
def check(request):
    last_feed  = request.GET.get('last_feed')
    feeds = Feed.get_feeds_after(last_feed)
    try:
        last_feed  = int(request.GET.get('last_feed'))
        feed_source = int(request.GET.get('feed_source'))
    except ValueError:
        last_feed = 0
        feed_source = 0

    feeds = Feed.get_feeds_after(last_feed)
    if feed_source != 'all':
        feeds = feeds.filter(user__id=feed_source)
    count = feeds.count()
    return HttpResponse(count)
```


I'm catching ValueError. 

Nevertheless there are several other methods that have the same problem.

What's the best solution here? Perhaps adding django's ModelForms validation would help? 

"
16516,vitorfs,bootcamp,2,closed,96,5,https://api.github.com/repos/vitorfs/bootcamp/issues/96/comments,https://github.com/vitorfs/bootcamp/issues/96,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNTk="", ""id"": 102701259}]","Crash - ""Exception Value:	 need more than 0 values to unpack""","The app seems to crash when set up from scratch with 2 users. 
When you go to a profile to one of them (url: http://localhost:8000/testusr/)
you get this nasty crash:



```
Request Method: | GET
-- | --
http://localhost:8000/testusr/
1.11.3
ValueError
need more than 0 values to unpack
Python Executable: | /usr/bin/python
-- | --
2.7.12
Exception Value: | need more than 0 values to unpack
-- | --
```

Any ideas? 

The bug seems to be in this part of code:
```

        query = Activity.objects.filter(user=user).annotate(day=TruncDay(
            'date')).values('day').annotate(c=Count('id')).values('day', 'c')

        dates, datapoints = zip( *[[a['c'], str(a['day'].date())] for a in query])
        return json.dumps(dates), json.dumps(datapoints)
```


It's weird because the other user's profile I created is fine. You can browse it under the profile url without a crash. 


Thanks. It's a nice app btw!

BTW. Is this app a good fit for a production website? To use it as the base. Does it comply with modern standards of django coding etc? :) (excluding SPA of course ;)

"
16519,vitorfs,bootcamp,2,closed,93,2,https://api.github.com/repos/vitorfs/bootcamp/issues/93/comments,https://github.com/vitorfs/bootcamp/issues/93,"[{""default"": true, ""name"": ""bug"", ""url"": ""https://api.github.com/repos/vitorfs/bootcamp/labels/bug"", ""color"": ""fc2929"", ""node_id"": ""MDU6TGFiZWwxMDI3MDEyNTk="", ""id"": 102701259}]",Article app is broken,"I'm not aware at which point the Article app got broken, and started to throw an error on the creation process `django.db.utils.IntegrityError: UNIQUE constraint failed: articles_article.id`."
16524,vitorfs,bootcamp,2,closed,88,5,https://api.github.com/repos/vitorfs/bootcamp/issues/88/comments,https://github.com/vitorfs/bootcamp/pull/88,[],Fixed feed reload issue,"Testing on Ubuntu 16.04, line 59 gave the following error when feed/post queried:
```
Internal Server Error: /feeds/post/
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/exception.py"", line 39, in inner
    response = get_response(request)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"", line 249, in _legacy_get_response
    response = self._get_response(request)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py"", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File ""/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py"", line 23, in _wrapped_view
    return view_func(request, *args, **kwargs)
  File ""/home/ubuntu/babanpenn/bootcamp/bootcamp/decorators.py"", line 9, in wrap
    return f(request, *args, **kwargs)
  File ""/home/ubuntu/babanpenn/bootcamp/bootcamp/feeds/views.py"", line 120, in post
    html = _html_feeds(last_feed, user, csrf_token)
  File ""/home/ubuntu/babanpenn/bootcamp/bootcamp/feeds/views.py"", line 79, in _html_feeds
    'csrf_token': csrf_token
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 414: ordinal not in range(128)
```

Fixed decode issue by setting the default encoding to utf8 at the top of the file"
16527,vitorfs,bootcamp,3,closed,85,4,https://api.github.com/repos/vitorfs/bootcamp/issues/85/comments,https://github.com/vitorfs/bootcamp/issues/85,[],What is this error when I try create a new account??,"```
Environment:


Request Method: POST
Request URL: http://localhost:8000/signup/

Django Version: 1.10.4
Python Version: 3.5.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'bootcamp.activities',
 'bootcamp.articles',
 'bootcamp.authentication',
 'bootcamp.core',
 'bootcamp.feeds',
 'bootcamp.messenger',
 'bootcamp.questions',
 'bootcamp.search')
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware')



Traceback:

File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
  64.                 return self.cursor.execute(sql, params)

The above exception (relation ""auth_user"" does not exist
LINE 1: SELECT (1) AS ""a"" FROM ""auth_user"" WHERE UPPER(""auth_user"".""...
                               ^
) was the direct cause of the following exception:

File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/exception.py"" in inner
  39.             response = get_response(request)

File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"" in _legacy_get_response
  249.             response = self._get_response(request)

File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
  187.                 response = self.process_exception_by_middleware(e, request)

File ""/usr/local/lib/python3.5/site-packages/django/core/handlers/base.py"" in _get_response
  185.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)

File ""/bootcamp/bootcamp/authentication/views.py"" in signup
  12.         if not form.is_valid():

File ""/usr/local/lib/python3.5/site-packages/django/forms/forms.py"" in is_valid
  169.         return self.is_bound and not self.errors

File ""/usr/local/lib/python3.5/site-packages/django/forms/forms.py"" in errors
  161.             self.full_clean()

File ""/usr/local/lib/python3.5/site-packages/django/forms/forms.py"" in full_clean
  370.         self._clean_fields()

File ""/usr/local/lib/python3.5/site-packages/django/forms/forms.py"" in _clean_fields
  388.                     value = field.clean(value)

File ""/usr/local/lib/python3.5/site-packages/django/forms/fields.py"" in clean
  160.         self.run_validators(value)

File ""/usr/local/lib/python3.5/site-packages/django/forms/fields.py"" in run_validators
  143.                 v(value)

File ""/bootcamp/bootcamp/authentication/forms.py"" in UniqueUsernameIgnoreCaseValidator
  51.     if User.objects.filter(username__iexact=value).exists():

File ""/usr/local/lib/python3.5/site-packages/django/db/models/query.py"" in exists
  660.             return self.query.has_results(using=self.db)

File ""/usr/local/lib/python3.5/site-packages/django/db/models/sql/query.py"" in has_results
  494.         return compiler.has_results()

File ""/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py"" in has_results
  806.         return bool(self.execute_sql(SINGLE))

File ""/usr/local/lib/python3.5/site-packages/django/db/models/sql/compiler.py"" in execute_sql
  835.             cursor.execute(sql, params)

File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
  79.             return super(CursorDebugWrapper, self).execute(sql, params)

File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
  64.                 return self.cursor.execute(sql, params)

File ""/usr/local/lib/python3.5/site-packages/django/db/utils.py"" in __exit__
  94.                 six.reraise(dj_exc_type, dj_exc_value, traceback)

File ""/usr/local/lib/python3.5/site-packages/django/utils/six.py"" in reraise
  685.             raise value.with_traceback(tb)

File ""/usr/local/lib/python3.5/site-packages/django/db/backends/utils.py"" in execute
  64.                 return self.cursor.execute(sql, params)

Exception Type: ProgrammingError at /signup/
Exception Value: relation ""auth_user"" does not exist
LINE 1: SELECT (1) AS ""a"" FROM ""auth_user"" WHERE UPPER(""auth_user"".""...
                               ^

```"
16529,vitorfs,bootcamp,3,closed,83,1,https://api.github.com/repos/vitorfs/bootcamp/issues/83/comments,https://github.com/vitorfs/bootcamp/issues/83,[],Reverse for 'profile' with arguments not found.,"I am a beginner and I have copied the messenger to my site and changed the things required like bootcamp.messenger to messenger and other things as per my project.
I can open /new but when I open messages for individual user or the base page it shows this error:
`Reverse for 'profile' with arguments '('abc',)' and keyword arguments '{}' not found. 0 pattern(s) tried: []`

I am using Django 1.10 Python 3.5"
16532,vitorfs,bootcamp,3,closed,80,2,https://api.github.com/repos/vitorfs/bootcamp/issues/80/comments,https://github.com/vitorfs/bootcamp/issues/80,[],Password Showing incorrect,"  conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
django.db.utils.OperationalError: FATAL:  password authentication failed for user ""u_bootcamp""
FATAL:  password authentication failed for user ""u_bootcamp""
"
16534,vitorfs,bootcamp,3,closed,78,3,https://api.github.com/repos/vitorfs/bootcamp/issues/78/comments,https://github.com/vitorfs/bootcamp/issues/78,[],"when run 'python manage.py migrate',show 'if engine is none else engine'","Traceback (most recent call last):
  File ""D:/Document/VirtualWS/bootcamp-master/manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""D:\PengFan\virtualEnv\lib\site-packages\django\core\management\__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""D:\PengFan\virtualEnv\lib\site-packages\django\core\management\__init__.py"", line 316, in execute
    settings.INSTALLED_APPS
  File ""D:\PengFan\virtualEnv\lib\site-packages\django\conf\__init__.py"", line 53, in __getattr__
    self._setup(name)
  File ""D:\PengFan\virtualEnv\lib\site-packages\django\conf\__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""D:\PengFan\virtualEnv\lib\site-packages\django\conf\__init__.py"", line 97, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""d:\program files\python27\Lib\importlib\__init__.py"", line 37, in import_module
    __import__(name)
  File ""D:\Document\VirtualWS\bootcamp-master\bootcamp\settings.py"", line 17, in <module>
    default=config('DATABASE_URL')
  File ""D:\PengFan\virtualEnv\lib\site-packages\dj_database_url.py"", line 51, in config
    config = parse(s, engine, conn_max_age)
  File ""D:\PengFan\virtualEnv\lib\site-packages\dj_database_url.py"", line 103, in parse
    engine = SCHEMES[url.scheme] if engine is None else engine
KeyError: ''"
16541,vitorfs,bootcamp,3,closed,71,3,https://api.github.com/repos/vitorfs/bootcamp/issues/71/comments,https://github.com/vitorfs/bootcamp/issues/71,[],Getting decouple error while starting up site,"When I try to run the site I get a
`decouple.UndefinedValueError: ALLOWED_HOSTS option not found and default value was not defined.` 

I can't seem to figure out where I'm going wrong. Any thoughts?

full error:
```
Traceback (most recent call last):
  File ""manage.py"", line 10, in <module>
    execute_from_command_line(sys.argv)
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 367, in execute_from_command_line
    utility.execute()
  File ""/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py"", line 316, in execute
    settings.INSTALLED_APPS
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 53, in __getattr__
    self._setup(name)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 41, in _setup
    self._wrapped = Settings(settings_module)
  File ""/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py"", line 97, in __init__
    mod = importlib.import_module(self.SETTINGS_MODULE)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/appu/bootcamp/bootcamp/settings.py"", line 22, in <module>
    ALLOWED_HOSTS = config('ALLOWED_HOSTS', cast=Csv())
  File ""/usr/local/lib/python2.7/dist-packages/decouple.py"", line 197, in __call__
    return self.config(*args, **kwargs)
  File ""/usr/local/lib/python2.7/dist-packages/decouple.py"", line 77, in __call__
    return self.get(*args, **kwargs)
  File ""/usr/local/lib/python2.7/dist-packages/decouple.py"", line 64, in get
    raise UndefinedValueError('%s option not found and default value was not defined.' % option)
decouple.UndefinedValueError: ALLOWED_HOSTS option not found and default value was not defined.

```
"
16551,vitorfs,bootcamp,3,closed,61,7,https://api.github.com/repos/vitorfs/bootcamp/issues/61/comments,https://github.com/vitorfs/bootcamp/issues/61,[],database issue,"I am very new to the django framework so don't have much idea about it. Can you guide me how to install this project. On executing manage.py migrate i am getting this error : FATAL:  password authentication failed for user ""u_bootcamp"".
"
